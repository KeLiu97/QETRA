originalTitle,body,reformulatedTitle
How do I set the HttpOnly flag on cookie in rails, The page Protecting Your Cookies: HttpOnly explains why making HttpOnly cookies is a good idea.How do I set this property in Ruby on Rails? <code> ,How do I set the HttpOnly flag on a cookie in Ruby on Rails
How can I install local gem?," If I download a .gem file to a folder in my computer, can I install it later using gem install? <code> ",How can I install a local gem?
Logging a ruby exceptions stack trace," I am working on rails project and I am trying to get exceptions to be logged to the rails log files. I know I can call logger.error $! to get the first line of the exception logged to the file. But, I want to get the entire trace stack logged as well. How do I log the entire trace back of an exception using the default rails logger? <code> ",How do I log the entire trace back of a Ruby exception using the default Rails logger?
What other languages have features and/or libraries similar to Perl formats?," I may be in the minority here, but I very much enjoy Perl's formats. I especially like being able to wrap a long piece of text within a column (""~~ ^<<<<<<<<<<<<<<<<"" type stuff). Are there any other programming languages that have similar features, or libraries that implement similar features? I am especially interested in any libraries that implement something similar for Ruby, but I'm also curious about any other options. <code> ",What other languages have features and/or libraries similar to Perl's format?
conditional formating in rails partials," I am rendering a rails partial and I want to alternate the background color when it renders the partial. I know that is not super clear so here is an example of what I want to do:Row One grey BackgroundRow Two yellow backgroundRow Three grey BackgroundRow Four yellow backgroundsorry stackoverflow seams to prevent the background colors from being shown but I think this makes my idea clearThis is the view code that I am using the _row.html.erb partial looks like this The problem is I do not know how to change the background color for every other row. Is there a way to do this? <code>  <table> <%= render :partial => 'row' :collection => @rows %></table> <tr bgcolor=""#AAAAAA""> <td><%= row.name %></td></tr>",conditional formatting in rails partials
How to use REST with nested resources represented in XML?," My aim is to create nested resources via one REST request. The REST requests is represented via a XML document. That works fine for single resources but I could not manage it for nested ones. OK I'll give you a little example next.First create a new rails project Next we generate the scaffolds of two resources, the trees and the bird's nests. In the File ./forrest/app/models/tree.rb we insert the ""has_many"" line below because a tree can have many bird's nests :-) In the File ./forrest/app/models/bird_nest.rb we insert the ""belongs_to"" line below because every bird's nest should belong to a tree. Afterwards we set up the database and start the server: Just copy and paste this XML sniplet to a file named ""tree.xml""... ...and post it to the service by cURL to create a new tree: This works fine. Also for the bird's nest XML (file name ""bird-nest.xml"") separately. If we send this... ...also via the following cURL statement. That resource is created properly! OK everything is fine so far. Now comes the point where the rubber meets the road. We create both resources in one request. So here is the XML for our tree which contains one bird's nest: We trigger the appropriate request by using cURL again... ...and now we'll get a server error in the (generated) ""create"" method of the tree's controller: AssociationTypeMismatch (BirdNest expected, got Array) In my point of view this is the important part of the server's log regarding received attributes and error message: So my question is what I'm doing wrong regarding the nesting of the XML resources. Which would be the right XML syntax? Or do I have to modify the tree's controller manually as this case is not covered by the generated one? <code>  rails forrest ./script/generate scaffold tree name:string./script/generate scaffold bird_nest tree_id:integer bird_type:string eggs_count:integer class Tree < ActiveRecord::Base has_many :bird_nestsend class BirdNest < ActiveRecord::Base belongs_to :treeend rake db:createrake db:migrate./script/server <tree> <name>Apple</name></tree> curl -H 'Content-type: application/xml' -H 'Accept: application/xml' -d @tree.xml http://localhost:3000/trees/ -X POST <bird-nest> <tree-id>1</tree-id> <bird-type>Sparrow</bird-type> <eggs-count>2</eggs-count></bird-nest> curl -H 'Content-type: application/xml' -H 'Accept: application/xml' -d @bird-nest.xml http://localhost:3000/bird_nests/ -X POST <tree> <name>Cherry</name> <bird-nests> <bird-nest> <bird-type>Blackbird</bird-type> <eggs-count>2</eggs-count> </bird-nest> </bird-nests></tree> curl -H 'Content-type: application/xml' -H 'Accept: application/xml' -d @tree-and-bird_nest.xml http://localhost:3000/trees/ -X POST Processing TreesController#create (for 127.0.0.1 at 2009-02-17 11:29:20) [POST] Session ID: 8373b8df7629332d4e251a18e844c7f9 Parameters: {""action""=>""create"", ""controller""=>""trees"", ""tree""=>{""name""=>""Cherry"", ""bird_nests""=>{""bird_nest""=>{""bird_type""=>""Blackbird"", ""eggs_count""=>""2""}}}} SQL (0.000082) SET NAMES 'utf8' SQL (0.000051) SET SQL_AUTO_IS_NULL=0 Tree Columns (0.000544) SHOW FIELDS FROM `trees` ActiveRecord::AssociationTypeMismatch (BirdNest expected, got Array): /vendor/rails/activerecord/lib/active_record/associations/association_proxy.rb:150:in `raise_on_type_mismatch' /vendor/rails/activerecord/lib/active_record/associations/association_collection.rb:146:in `replace' /vendor/rails/activerecord/lib/active_record/associations/association_collection.rb:146:in `each' /vendor/rails/activerecord/lib/active_record/associations/association_collection.rb:146:in `replace' /vendor/rails/activerecord/lib/active_record/associations.rb:1048:in `bird_nests=' /vendor/rails/activerecord/lib/active_record/base.rb:2117:in `send' /vendor/rails/activerecord/lib/active_record/base.rb:2117:in `attributes=' /vendor/rails/activerecord/lib/active_record/base.rb:2116:in `each' /vendor/rails/activerecord/lib/active_record/base.rb:2116:in `attributes=' /vendor/rails/activerecord/lib/active_record/base.rb:1926:in `initialize' /app/controllers/trees_controller.rb:43:in `new' /app/controllers/trees_controller.rb:43:in `create'",How to use REST with nested resources which are represented in XML?
Overriding a module method from a gem in Rails.," The will_paginate gem is broken on my version of Oracle. The default paginate_by_sql method in the WillPaginate module is inserting an extra 'AS' into a query and causing it to fail.The code itself is easily fixed, but I'm not sure of the best way to get Rails to pick up my change.I don't want to change the code in the gem itself, as that will leave my code broken on other machines.I tried creating an lib/test.rb file containing: and requiring it from environment.rb, but it's not picking up my changes.I also tried requiring it from controllers/application.rb, but again, not picking up my changes.Temporarily, I got it to work by overriding the method within the specific model itself, but this is a bit of a hack, and means I can't use it on any of the other models in this project.I'm sure there's an easy way to do this, but I'm not having any luck tracking it down using Google. <code>  module WillPaginate def paginate_by_sql (my code goes here) endend",Overriding a module method from a gem in Rails
`const_missing': uninitialized constant  (NameError)," Every time I try to run any class from my rails 2.2 app's lib directory using ""script/runner -e production ClassName.run"" I get the following error: For some reason I don't get this error when I run it as test instead of production, and everything works fine.O yeah run is a class method i.e. def self.run .... endAny suggestions? <code>  /usr/lib/ruby/gems/1.8/gems/rails-2.2.2/lib/commands/runner.rb:47: /usr/lib/ruby/gems/1.8/gems/activesupport-2.2.2/lib/active_support/dependencies.rb:89:in `const_missing': uninitialized constant ClassName (NameError)""",`const_missing': uninitialized constant (NameError)
Natural language data parser for ruby/rails," Does anybody know of something similar to Date.js in Ruby? Something that would be able to return a date object from something like: ""two weeks from today"". The Remember the Milk webapp incorporates this feature into their system and it is incredibly easy to use.I would use the Date.js library itself but because it is on the client side it has its limitations. If the user doesn't have javascript enabled the functionality would be lost. This would affect mobile phone users who would, ideally, use our system via text message (sms).I would love to use a solution that's already out there but if not how hard would it be to port this code into Ruby? I really don't know much about natural language interpretation but it seems like it would take some time.Thanks. <code> ",Natural language date parser for ruby/rails
Ruby: Posting XML to RESTFUL Web Service using Net::HTTP::Post," I am having trouble getting this to work so any help would be appreciated! Basically, the request.body contains valid XML for the Web Service like so: ...but the service returns empty XML. Note that the id field is returned suggesting that it does actually hit the database, but the name and description fields are nil: I have manually tested the RESTFUL service using Poster and it works fine.Here is the code: Does anyone have any clues why the data in the XML post is not persisted? <code>  <somedata><name>Test Name 1</name><description>Some data for Unit testing</description></somedata> <somedata><id type='integer'>1</id><name nil='true'></name><description nil='true'></description></somedata> url = URI.parse('http://localhost:3000/someservice/')request = Net::HTTP::Post.new(url.path)request.body = ""<?xml version='1.0' encoding='UTF-8'?><somedata><name>Test Name 1</name><description>Some data for Unit testing</description></somedata>""response = Net::HTTP.start(url.host, url.port) {|http| http.request(request)}#Note this test PASSES!assert_equal '201 Created', response.get_fields('Status')[0]",How do I post XML to RESTFUL Web Service using Net::HTTP::Post?
Ruby on Rails Single Table Inheritance (STI) and unit test problem (with PostgreSQLl)," I'm using an STI model with a single ""Accounts"" table to hold information for Users and Technicians (i.e. User < Account, Technician < Account). Everything works from a functional perspective, but things explode when running unit tests:...8) Error:test_the_truth(UserTest):ActiveRecord::StatementInvalid: PGError: ERROR: relation ""technicians"" does not exist: DELETE FROM ""technicians""...Essentially, the standard framework doesn't recognize that the Technicians and Users tables (or ""relations"" as PostgreSQL calls them) don't exist and, in fact, should be aliased to Accounts.Any ideas? I'm relatively new to RoR and I'm at a loss as how to fix this without ripping out STI all together. <code> ",Ruby on Rails Single Table Inheritance (STI) and unit test problem (with PostgreSQL)
Returning a part of an array in Ruby," With a list in Python I can return a part of it using the following code: Since Ruby does everything in arrays I wonder if there is something similar to that. <code>  foo = [1,2,3,4,5,6]bar = [10,20,30,40,50,60]half = len(foo) / 2foobar = foo[:half] + bar[half:]",How to return a part of an array in Ruby?
How to remove size propery from input generated by text_field?," I have an .erb file with form template that uses form_for helper to generate form, and some of their fields generated with text_field method. In resulting HTML I see size properties are added to every input generated with aforementioned method.I want to control input sizes with CSS and that size property prevents me from doing it. Is there any way to tell text_field method that I don't want them?I tried to pass :size => nil as option to that method, but that didn't help. <code> ",How to remove size property from input generated by text_field?
Ruby Hash Filter," I am trying to figure out how I can filter out key and value pairs from one filter into anotherFor example I want to take this hash Thanks for your helpEDIT: should probably mention that in this example, I want it to behave as a whitelist filter. That is, I know what I want, not what I don't want. <code>  x = { ""one"" => ""one"", ""two"" => ""two"", ""three"" => ""three""}y = x.some_functiony == { ""one"" => ""one"", ""two"" => ""two""}",Ruby Hash Whitelist Filter
Why are methods in ruby documentation preceded by a pund sign?," When I see any Ruby method printed in text, it usually appears as: or Now, I would use: Why are all Ruby methods preceded by a pound sign? Is there any reason for it? <code>  Class#method #method Class.method",Why are methods in Ruby documentation preceded by a hash sign?
Why are methods in ruby documentation preceded by a pound sign?," When I see any Ruby method printed in text, it usually appears as: or Now, I would use: Why are all Ruby methods preceded by a pound sign? Is there any reason for it? <code>  Class#method #method Class.method",Why are methods in Ruby documentation preceded by a hash sign?
Why are methods in ruby documentation preceded by a hash sign?," When I see any Ruby method printed in text, it usually appears as: or Now, I would use: Why are all Ruby methods preceded by a pound sign? Is there any reason for it? <code>  Class#method #method Class.method",Why are methods in Ruby documentation preceded by a hash sign?
Rails Time difference in hours, I am trying to get the difference in hours for two different Time instances. I get these values from the DB as a :datetime column How can I do this so that it includes the months and years as well in the calculation while ignoring or rounding the minutes? Can this only be done manually or is there a function to do this? <code> ,Time difference in hours
Get class name from ActiveRecord object," How can I get the class name from an ActiveRecord object?I have: I tried: I need only the class name, in a string (User in this case). Is there a method for that? I know this is pretty basic, but I searched both Rails' and Ruby's docs, and I couldn't find it. <code>  result = User.find(1) result.class# => User(id: integer, name: string ...)result.to_s# => #<User:0x3d07cdc>""",How do I get the name of a Ruby class?
Extending core Ruby classes when in Rails," The Rails method Array#to_sentence allows for the following: I would like to extend this method to allow it to take a block, so that you can do something like the following (where people is an array of Person objects, which have the name attribute): I don't have a problem with writing the extension method. But I can't work out where to put it. The Rails core extensions get loaded somewhere down in the depths of ActiveSupport. My need is for a place where user-defined code is always loaded, and is pre-loaded (before any application code). <code>  ['a', 'b', 'c'].to_sentence # gives: ""a, b, and c"" people.to_sentence { |person| person.name }# => ""Bill, John, and Mark""",Redefining Rails' methods
What are some good role authorziation solutions used with of Authlogic?, I am looking for a good role based authorization solution to use alongside Authlogic. Anyone have any good suggestions? Please list some pros and cons from your experience if possible please.  <code> ,What are some good role authorization solutions used with Authlogic?
Ruby: Detect number of CPUs installed," I already found a solution for ""Most unixes"" via cat /proc/cpuinfo, but a pure-Ruby solution would be nicer. <code> ",Detect number of CPUs installed
how is the python findall() method in ruby?," I need to extract all MP3 titles from a fuzzy list in a list.With Python this works for me fine: How can I do that in Ruby? <code>  import refor i in re.compile('mmc.+?mp3').findall(open(""tracklist.txt"").read()): print i",Equivalent to Pythons findall() method in Ruby?
Generating sequetial numebers in mult-user saas application," How do people generate auto_incrementing integers for a particular user in a typical saas application?For example, the invoice numbers for all the invoices for a particular user should be auto_incrementing and start from 1. The rails id field can't be used in this case, as it's shared amongst all the users.Off the top of my head, I could count all the invoices a user has, and then add 1, but does anyone know of any better solution? <code> ",Generating sequential numbers in multi-user saas application
Correct Way to Set Default Values in Rails, I'm trying to find the best way to set default values for objects in Rails. The best I can think of is to set the default value in the new method in the controller. Does anyone have any input if this is acceptable or if there's a better way to do it? <code> ,How to set default values in Rails?
What is  ruby's StringIO class really?," I think I understand StringIO somewhat as being similar to Java's StringBuffer class, but I don't really understand it fully. How would you define it and its purpose/possible uses in Ruby? Just hoping to clear up my confusion.  <code> ",What is ruby's StringIO class really?
Test if a string is basically an integer in quotes using Ruby?," I need a function, is_an_integer, where""12"".is_an_integer? returns true.""blah"".is_an_integer? returns false.How can I do this in Ruby? I would write a regex but I'm assuming there is a helper for this that I am not aware of. <code> ",How to test if a string is basically an integer in quotes using Ruby
Where is on a Mac the ruby standard library directory placed?, I want to read some ruby code. And I think this is the good place to start dig in. But I cant find it. <code> ,Where is the ruby standard library directory placed on a Mac?
When to use 'self' in Rails," This method: Fails with this error when date is nil: However, if I change date = date.to_date to self.date = self.date.to_date, the method works correctly.What's going on? In general, when do I have to write self?Edit: It's not related to the question, but please note that there is no ""titleize!"" method. <code>  def format_stations_and_date from_station.titelize! if from_station.respond_to?(:titleize!) to_station.titleize! if to_station.respond_to?(:titleize!) if date.respond_to?(:to_date) date = date.to_date end end NoMethodError (You have a nil object when you didn't expect it!The error occurred while evaluating nil.to_date): app/models/schedule.rb:87:in `format_stations_and_date' app/controllers/schedules_controller.rb:15:in `show'",When to use 'self' in Ruby
"Ruby gem listed, but wont load (gem in user dir, not ruby dir)"," I'm trying to get some gems working on a web-host which supports ruby and some ruby gems, but not some of the ones I need to use.Following the instructions I found here, I kept the original gem location in my gem path, and added my own at /path/to/my/home/gems to ~/.gemrc I downloaded some gems manually and did installs using the --local and --install-dir options of the gem command. I then did a ""gem list"", and can in fact see the gems I installed in my user directory, as well as the original gems in the normal system path.If I kick on IRB or do a ruby -e, all the system gems work fine. However, I can't get my user directory installed gems loaded: I even tried the old school require_gem: From my ""gems list"" I can see: I have this same problem with all the user-directory install gems. What am I missing here?EDIT: This is not a rails app. This is for a command line-application. The program will be executed by my user account, just like the tests shown above in.EDIT: Per Rafe's suggestion, I looked at Gem.path from IRB. It only lists the system gem path, /usr/local/lib/ruby/gems/1.8, and not my user dir path as well. <code>  gemhome: /users/home/myuser/gemsgempath:- /usr/local/lib/ruby/gems/1.8- /users/home/mysuser/gems $ ruby -r rubygems -e ""require 'nokogiri'""/usr/local/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:21:in `require__': no such file to load -- nokogiri (LoadError) from /usr/local/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:21:in `require' from -e:1 $ irb -r rubygemsirb(main):001:0> require_gem 'nokogiri'Gem::LoadError: Could not find RubyGem nokogiri (> 0.0.0) from /usr/local/lib/ruby/site_ruby/1.8/rubygems.rb:204:in `report_activate_error' from /usr/local/lib/ruby/site_ruby/1.8/rubygems.rb:141:in `activate' from /usr/local/lib/ruby/site_ruby/1.8/rubygems.rb:37:in `require_gem_with_options' from /usr/local/lib/ruby/site_ruby/1.8/rubygems.rb:31:in `require_gem' from (irb):1 nokogiri (1.3.3)Nokogiri is an HTML, XML, SAX, and Reader parser","Ruby gem listed, but won't load (gem in user dir, not ruby dir)"
Sum array members," I have an array of integers.For example: Is there any nice way to get the sum of them?I know, that would work. <code>  array = [123,321,12389] sum = 0array.each { |a| sum+=a }",How to sum array of numbers in Ruby?
How to sum array members in Ruby?," I have an array of integers.For example: Is there any nice way to get the sum of them?I know, that would work. <code>  array = [123,321,12389] sum = 0array.each { |a| sum+=a }",How to sum array of numbers in Ruby?
Using Unix Process Controll Methods in Ruby," Ryan Tomayko touched off quite a fire storm with this post about using Unix process control commands. We should be doing more of this. A lot more of this. I'm talking about fork(2), execve(2), pipe(2), socketpair(2), select(2), kill(2), sigaction(2), and so on and so forth. These are our friends. They want so badly just to help us.I have a bit of code (a delayed_job clone for DataMapper that I think would fit right in with this, but I'm not clear on how to take advantage of the listed commands. Any Ideas on how to improve this code? <code>  def start say ""*** Starting job worker #{@name}"" t = Thread.new do loop do delay = Update.work_off(self) break if $exit sleep delay break if $exit end clear_locks end trap('TERM') { terminate_with t } trap('INT') { terminate_with t } trap('USR1') do say ""Wakeup Signal Caught"" t.run endend",Using Unix Process Control Methods in Ruby
"How to implement a ""callback"" in Ruby"," I'm not sure of the best idiom for C style call-backs in Ruby - or if there is something even better ( and less like C ). In C, I'd do something like: Whats a good Ruby equivalent? Essentially I want to call a passed in class method, when a certain condition is met within ""DoStuff"" <code>  void DoStuff( int parameter, CallbackPtr callback ){ // Do stuff ... // Notify we're done callback( status_code )}","How to implement a ""callback"" in Ruby?"
base.extend ClassMethods VS: base.class_eval extend ClassMethods, Is this syntax functionally equivalent to this? <code>  def self.included(base) base.class_eval do extend ClassMethods end end def self.included(base) base.extend ClassMethods end,base.extend vs. base.class_eval extend
ruby vs php!!!!, i know nothing about ruby but a lot about php.when you code in ror...do you actually understand what is going on under the surface if you are a beginner? and do you HAVE TO understand it or is it good enough just to know enough to build something fast?Looking for experiences from people who have made the transition. <code> ,Is Rails hard to understand for a PHP developer?
Is Ruby hard to understand for a PHP developer?, i know nothing about ruby but a lot about php.when you code in ror...do you actually understand what is going on under the surface if you are a beginner? and do you HAVE TO understand it or is it good enough just to know enough to build something fast?Looking for experiences from people who have made the transition. <code> ,Is Rails hard to understand for a PHP developer?
"File.open ,open and IO.foreach in Ruby ,what is the difference?"," All of the following API do the same thing: open a file and call a block for each line. Is there any preference we should use one than another? <code>  File.open(""file"").each_line {|line| puts line}open(""file"").each_line {|line| puts line} IO.foreach(""file"") {|line | puts line}","File.open, open and IO.foreach in Ruby, what is the difference?"
Better Way to Remove Blank Lines After Nokogiri Node Removal," Perhaps this is nitpicky, but I have to ask. I'm using Nokogiri to parse XML, remove certain tags, and write over the original file with the results. Using .remove leaves blank lines in the XML. I'm currently using a regex to get rid of the blank lines. Is there some built-in Nokogiri method I should be using? Here's what I have: <code>  require 'Nokogiri'io_path = ""/path/to/metadata.xml""io = File.read(io_path)document = Nokogiri::XML(io)document.xpath('//artwork_files', '//tracks', '//previews').remove# write to file and remove blank lines with a regular expressionFile.open(io_path, 'w') do |x| x << document.to_s.gsub(/\n\s+\n/, ""\n"")end",A better way to remove blank lines after Nokogiri Node removal
What exactly is is this in ruby: `&:captialize`," I just read this answer Converting upper-case string into title-case using Ruby.There is the following line of code What exactly is &:capitalize? Before I had put this into irb myself, I would have told you, it's not valid ruby syntax. It must be some kind of Proc object, because Array#map normaly takes a block. But it isn't. If I put it into irb alone, I get syntax error, unexpected tAMPER. <code>  ""abc"".split(/(\W)/).map(&:capitalize).join",What exactly is `&:capitalize` in Ruby?
What exactly is is this in ruby: `&:capitalize`," I just read this answer Converting upper-case string into title-case using Ruby.There is the following line of code What exactly is &:capitalize? Before I had put this into irb myself, I would have told you, it's not valid ruby syntax. It must be some kind of Proc object, because Array#map normaly takes a block. But it isn't. If I put it into irb alone, I get syntax error, unexpected tAMPER. <code>  ""abc"".split(/(\W)/).map(&:capitalize).join",What exactly is `&:capitalize` in Ruby?
Ruby interpreter won't run on my Mac," I can't get the Ruby interpreter to run on either of my Macs (one MacBook and one MacBook Pro, both running Snow Leopard). When I run it, by typing ruby in Terminal, nothing happens. It just sits there. I can kill it by pressing Ctrl+C, but that's it. I know the Ruby process is running, since I can see it in Activity Monitor, and running ruby --version works fine.I have tried the following, all to no avail:I have some bash customizations, so I tried disabling them, but that didn't help.I installed a new copy of Ruby 1.8.7 using MacPorts, but that one had the same problem.I tried quitting and restarting the Terminal application.Some other information that might be useful:I'm trying to run the version of Ruby that comes with Snow Leopard.I have installed Apple's developer tools.Other interpreters (Python, Io, etc.) work fine.I spent a while tonight searching for this problem online, but haven't found any discussion of it. I'm at a loss for what could be causing it, so any help anybody can provide would be greatly appreciated. <code> ","The command ""ruby"" does nothing on my Mac"
US National Weather Service lib for rails or perl?, The only US weather data that is available free for commercial use is the US National Weather Service. I'd like to use it. Is there a Ruby/Rails library for accessing it? Perl would also be helpful. They provide a Perl example. I'd use it as a guide for writing the Ruby version. <code> ,Is there a Ruby client for the US National Weather Service data?
Is there a Ruby client for the NDFD from the National Weather Service?, The only US weather data that is available free for commercial use is the US National Weather Service. I'd like to use it. Is there a Ruby/Rails library for accessing it? Perl would also be helpful. They provide a Perl example. I'd use it as a guide for writing the Ruby version. <code> ,Is there a Ruby client for the US National Weather Service data?
How do I add 'eac'h method to Ruby object (or should I extend Array)?, I have an object Results that contains an array of result objects along with some cached statistics about the objects in the array. I'd like the Results object to be able to behave like an array. My first cut at this was to add methods like this This feels very c-like and I know Ruby has better way.I'd also like to be able to do this but am not sure what the each method is really doing under the hood. Currently I simply return the underlying array via a method and call each on it which doesn't seem like the most-elegant solution.Any help would be appreciated. <code>  def <<(val) @result_array << val end Results.each do |result| result.do_stuff end,How do I add 'each' method to Ruby object (or should I extend Array)?
Versioning CouchDB code," I am new to CouchDB way of making things. So, I have a lot of questions about it, but let's focus in one of them.CouchDB has this concept of javascript code (validation + map-reduce + show + ?) being written in the design documents. This is part of the database, like stored procedures or triggers are for more tradittional databases.Is there anybody maintaining this code inside a project so that we can actually test this code like any other javascript code (through jspec for instance, mocking the dependencies), version in the same repository we version the rest of our code, probably in a separate folder.. is it possible and used? Or isn't it good for some reason I should know?What I would like to have is some way to do a single rake task and my couchdb design documents get synced with the project, something like that might be useful.In the case of ruby, it would be helpful also to make some dynamic magic happen (e.g. default views and validations, new views through the use of named scopes). <code> ",How to manage CouchDB code out of it?
Rails Templates?," I am starting to learn Ruby on Rails. I have an application in mind that I would like to create, but I know I'm going to have to repeat a lot of the things that have already been done a million times (such as user authentication, etc).I just found out about rails templates. From what I understand, you can use one of these templates to create a new rails application and set up a lot of the basics. Where can I find some of the most popular templates, and should I use one of them? <code> ",Rails application templates
Ruby : How to write a gem," I'd like to write a package for Ruby and make it available as a gem.What are the tools, steps and pitfalls ?Are there any good tutorials, screencasts, etc., which helped you learning how to do it ?  <code> ",Ruby : How to write a gem ?
rewrite this ruby simple ruby function," I do not know the correct terminology. I tried to google it and could not find anything for that reason.I am writing a Ruby library, and I want to rewrite the functions so they work as below as I prefer it for readability (inside a block?)I have a function that does this I want to rewrite it so it works like this Can you outline the way I go about this? <code>  @dwg = Dwg.new(""test.dwg"")@dwg.line([0,0,0],[1,1,0])@dwg.save Dwg.new(""test.dwg"") do line([0,0,0],[1,1,0]) saveend",Rewrite simple ruby function to use a block
how to convert a fraction to float in rails," I have a string ""1/16"" I want to convert it to float and multiply it by 45. However, I dont get the desired results. I am trying in script/console how can i get the desired result of 2.81Bigger picture: I have a drop down like this: whenever user selects oz value then i want to multiply it to 45so i do: <code>  >> ""1/16"".to_f=> 1.0>> ""1/16"".to_f*45=> 45.0 <%=select_tag :volume, options_for_select(["""", ""1 g"", ""1/16 oz"", ""1/8 oz"",""1/4 oz"",""1/2 oz"", ""1 oz"", ""1/8 lb"", ""1/4 lb"", ""Single"", ""Multi 5"" ], ""N/A"") %> first, *rest = params[:volume].to_s.split(/ /)if rest.first==""oz"" @indprodprice = @prods.orig_price.to_i*first.to_f*28.3495else @indprodprice = @prods.orig_price.to_i*first.to_f*453.59237end",how to convert a fraction to float in ruby
How &: operator in Ruby is called?," Possible Duplicates: Ruby/Ruby on Rails ampersand colon shortcut What does map(&:name) mean in Ruby? I was reading Stackoverflow and stumbled upon the following code Ok, it's easy to see what this code does but I'd like to know more about &: construct which I have never seen before.Unfortunately all I can think of is ""lambda"" which it is not. Google tells me that lambda syntax in Ruby is ->->(x,y){ x * y }So anyone knows what that mysterious &: is and what it can do except calling a single method?  <code>  array.map(&:to_i)",What do you call the &: operator in Ruby?
what's with ruby's percent syntax?," I don't understand why some people use the percentage syntax a lot in ruby.For instance, I'm reading through the ruby plugin guide and it uses code such as: Every time I see something like this, I have to go and look up the percentage syntax reference because I don't remember what %w means.Is that syntax really preferable to [""models"", ""controllers""].each ...?I think in this latter case it's more clear that I've defined an array of strings, but in the former - especially to someone learning ruby - it doesn't seem as clear, at least for me.If someone can tell me that I'm missing some key point here then please do, as I'm having a hard time understanding why the percent syntax appears to be preferred by the vast majority of ruby programmers. <code>  %w{ models controllers }.each do |dir| path = File.join(File.dirname(__FILE__), 'app', dir) $LOAD_PATH << path ActiveSupport::Dependencies.load_paths << path ActiveSupport::Dependencies.load_once_paths.delete(path)end",What are the pros and cons of Ruby's general delimited input? (percent syntax)
What's with ruby's percent syntax?," I don't understand why some people use the percentage syntax a lot in ruby.For instance, I'm reading through the ruby plugin guide and it uses code such as: Every time I see something like this, I have to go and look up the percentage syntax reference because I don't remember what %w means.Is that syntax really preferable to [""models"", ""controllers""].each ...?I think in this latter case it's more clear that I've defined an array of strings, but in the former - especially to someone learning ruby - it doesn't seem as clear, at least for me.If someone can tell me that I'm missing some key point here then please do, as I'm having a hard time understanding why the percent syntax appears to be preferred by the vast majority of ruby programmers. <code>  %w{ models controllers }.each do |dir| path = File.join(File.dirname(__FILE__), 'app', dir) $LOAD_PATH << path ActiveSupport::Dependencies.load_paths << path ActiveSupport::Dependencies.load_once_paths.delete(path)end",What are the pros and cons of Ruby's general delimited input? (percent syntax)
get file size before downloading & counting how much already downloaded? (http+ruby)," Can anybody help me to get the file size before I start downloadingdisplay how much % was already downloaded. <code>  require 'net/http'require 'uri'url = ""http://www.onalllevels.com/2009-12-02TheYangShow_Squidoo_Part 1.flv""url_base = url.split('/')[2]url_path = '/'+url.split('/')[3..-1].join('/')Net::HTTP.start(url_base) do |http| resp = http.get(URI.escape(url_path)) open(""test.file"", ""wb"") do |file| file.write(resp.body) endendputs ""Done.""",Get file size before downloading & counting how much already downloaded (http+ruby)
Understanding Symbols In Ruby," Despite reading ""Understanding Ruby Symbols"", I'm still confused by the representation of the data in memory when it comes to using symbols. If a symbol, two of them contained in different objects, exist in the same memory location, then how is it that they contain different values? I'd have expected the same memory location to contain the same value.This a quote from the link: Unlike strings, symbols of the same name are initialized and exist in memory only once during a session of rubyI don't understand how it manages to differentiate the values contained in the same memory location.Consider this example: patient1 and patient2 are both hashes, that's fine. :ruby however is a symbol. If we were to output the following: Then what will be output? ""red"", or ""programming""?Forgetting hashes for a second, I'm thinking a symbol is a pointer to a value. The questions I have are:Can I assign a value to a symbol?Is a symbol just a pointer to a variable with a value in it?If symbols are global, does that mean a symbol always points to one thing? <code>  patient1 = { :ruby => ""red"" }patient2 = { :ruby => ""programming"" }patient1.each_key {|key| puts key.object_id.to_s}3918094patient2.each_key {|key| puts key.object_id.to_s}3918094 patient1.each_key {|key| puts key.to_s}",How to understand symbols in Ruby
Check if a string is capitalized in rails," I'm looking to check if a string is all capitals in Rails.How would I go about doing that?I'm writing my own custom pluralize helper method and I would something be passing words like ""WORD"" and sometimes ""Word"" - I want to test if my word is all caps so I can return ""WORDS"" - with a capital ""S"" in the end if the word is plural (vs. ""WORDs"").Thanks! <code> ",Check if a string is all-capitals in Rails
Check if a string is capitalized in Rails," I'm looking to check if a string is all capitals in Rails.How would I go about doing that?I'm writing my own custom pluralize helper method and I would something be passing words like ""WORD"" and sometimes ""Word"" - I want to test if my word is all caps so I can return ""WORDS"" - with a capital ""S"" in the end if the word is plural (vs. ""WORDs"").Thanks! <code> ",Check if a string is all-capitals in Rails
Is there a perl equivalent of the ruby koans project?," Is there a Perl equivalent to the ruby-koans project?When I was starting to learn ruby a few months ago I stumbled across ruby-koans and it was a huge help for learning the basics of the language.I now need to poke at some Perl code, and while I've hacked together a few Perl scripts in the past I've never really learned the language, and every time I have to refer back to older scripts I wrote for even simple things. I have a feeling that something like koans would make it much easier for me to learn and retain knowledge of Perl. Does anything like that exist? <code> ",Is there a Perl equivalent of the ruby koans project?
"Ruby on Rails, form_remote_tag, and YM4R/GM"," I am trying to add Google Maps to my page using YM4R/GM. As a regular submit using form_tag everything works, so I know I didn't mess that part up.But using form_remote_tag I end up with nothing inside my update div. I tested with rendering text so the right method is being executed and YM4R/GM is returning the Google Maps KML. But the map is not being displayed.My form tag: The search method specified as the form's action: Is it correct to place the div to be updated inside of a partial, and then render that partial? Am I overcomplicating this, or going about it the wrong way? I know the YM4R/GM code is being executed as I see Google's KML output. And I wonder if the problem is related the XML/KML response? Is Rails interpreting the response as XML rather than HTML? <code>  <% form_remote_tag(:url => {:controller => ""home"", :action => ""search""}, :update => ""map_div"") do %> def search location = GeoKit::Geocoders::MultiGeocoder.geocode(params[:address]) @map = GMap.new(""map_div"") @map.control_init(:large_map => true,:map_type => true) @map.center_zoom_init([location.lat,location.lng],11) render :partial => 'map'end","Ruby on Rails, form_remote_tag, and Google Maps API"
OT: How to learn Ruby and Rails?," I came from a C, php and bash background, it was easy to learn because they all have the same C structure, which I can associate with what I already know.Then 2 years ago I learned Python and I learned it quite well, Python is easier for me to learn than Ruby. Then since last year, I was trying to learn Ruby, then Rails, and I admit, until now I still couldn't get it, the irony is that those are branded as easy to learn, but for a seasoned programmer like me, I just couldn't associate it with what I learned before, I have 2 books on both Ruby and Rails, and when I'm reading it nothing is absorbed into my mind, and I'm close to giving up...In ruby, I'm having a hard time grasping the concepts of blocks, and why there's @variables that can be accessed by other functions, and what does $variable and :variable do? And in Rails, why there's function like this_is_another_function_that_do_this, so thus ruby, is it just a naming convention or it's auto-generated with thisvariable _can_do_this_function. I'm still puzzled that where all those magic concepts and things came from? And now, 1 year of trying and absorbing, but still no progress...Edit:To summarize:How can I learn about blocks, and how can it be related to concepts from PHP/C?Variables, what does does it mean when a variable is prefixed with:@$:""Magic concepts"", suchs as rails declarations of Records, what happens behind the scenes when I write has_one XOK so, bear with me with my confusion, at least I'm honest with myself, and it's over a year now since I first trying to learn ruby, and I'm not getting younger..so And now, I just couldn't connect the dots with Ruby, |b|{ blocks }, using @variables, :variables, and variables_with_this_things.. <code>  I learned this in Bash/C/PHPsolve_problem($problem){ if [ -e $problem == ""trivial"" ]; then write_solution(); else breakdown_problem_into_N_subproblems(\; define_relationship_between_subproblems; for i in $( command $each_subproblem ); do solve_problem $i done fi}write_solution(problem) { some_solution=$(command <parameters> ""input"" | command); command | command $some_solution > output_solved_problem_to_file}breakdown_problem_into_N_subproblems($problems) { for i in $problems; do command $i | command > i_can_output_a_file_right_away done}define_relationship_between_subproblems($problems) { if [ -e $problem == ""relationship"" ]; then relationship=$(command; command | command; command;) elsif [ -e $problem == ""another_relationship"" ]; relationship=$(command; command | command; command;) fi}In C/PHP is something like thissolve_problem(problem){ if (problem == trivial) write_solution; else { breakdown_problem_into_N_subproblems; define_relationship_between_subproblems; for (each_subproblem) solve_problems(subproblem); }}",How can this C and PHP programmer learn Ruby and Rails?
how .hash string method work ?," I'm just a newbie to ruby. I've seen a string method (String).hash . For example, in irb, I've tried returns how does this method works ? <code>  >> ""mgpyone"".hash => 144611910",How does ruby's String .hash method work?
Ruby: Integer.times - how do I know what iteration I'm in?," Let's say I have I use the Integer's times method to loop.Inside the iteration, is there an easy way, without keeping a counter, to see what iteration the loop is currently in? <code>  some_value = 23",How do I know what iteration I'm in when using the Integer.times method?
Running Rspec in debug mode," This is a short question: I am looking for a way to run specs in debug mode, with the -u switch, so that RSpec would drop to console whenever it failed, without having to add a debugger line into the code. Any pointers? <code> ",Running RSpec in debug mode
"Installing Paperclip - ""undefined method `has_attached_file` for"" - Ruby on Rails"," I just installed the plugin for Paperclip and I am getting the following error message but I am not sure why: It is referencing the will_paginate gem. From what I can find, it seems that either there is something wrong with my PostsController#index or perhaps a previously attempt at installing the gem instead of the plugin, in which case I have read I should be able to remedy through the /config/environments.rb file somehow. I didn't think that previous gem installation would matter as I did it in an old version of the site that I trashed before installing the plugin. In the current version of the site I show that the table has been updated with the Paperclip columns after migration. Here is my code:PostsConroller#show: Post model: /views/posts/new.html.erb: <code>  NoMethodError (undefined method `has_attached_file' for #<Class:0x10338acd0>): /Users/bgadoci/.gem/ruby/1.8/gems/will_paginate-2.3.12/lib/will_paginate/finder.rb:170:in `method_missing' app/models/post.rb:2 app/controllers/posts_controller.rb:50:in `show' def show @post = Post.find(params[:id]) respond_to do |format| format.html # show.html.erb format.xml { render :xml => @post } end end class Post < ActiveRecord::Base has_attached_file :photo validates_presence_of :body, :title has_many :comments, :dependent => :destroy has_many :tags, :dependent => :destroy has_many :votes, :dependent => :destroy belongs_to :user after_create :self_vote def self_vote # I am assuming you have a user_id field in `posts` and `votes` table. self.votes.create(:user => self.user) end cattr_reader :per_page @@per_page = 10end <h1>New post</h1><%= link_to 'Back', posts_path %><% form_for(@post, :html => { :multipart => true}) do |f| %> <%= f.error_messages %> <p> <%= f.label :title %><br /> <%= f.text_field :title %> </p> <p> <%= f.label :body %><br /> <%= f.text_area :body %> </p> <p> <%= f.file_field :photo %> </p> <p> <%= f.submit 'Create' %> </p><% end %>","Why do I get an ""undefined method for `has_attached_file` when installing PaperClip?"
invoking proc with instance_eval with arguments," I know this works: However I want to pass arguments to proc, so I tried this which does not work: Can anyone help me make it work? <code>  proc = Proc.new do puts self.hi + ' world'endclass Usa def hi ""Hello!"" endendUsa.new.instance_eval &proc proc = Proc.new do |greeting| puts self.hi + greetingendclass Usa def hi ""Hello!"" endendUsa.new.instance_eval &proc, 'world' # does not workUsa.new.instance_eval &proc('world') # does not work",invoking proc with instance_eval with arguments?
[Ruby] access parent class instance var," How can this work? Basically, I need a value from the parent class to use in a lookup on the child class, but I don't want to pass it explicitly if there's a better way. Is the instance var of the parent totally inaccessible in the child class? Or is this just poor hierarchy design? <code>  class A attr_accessor :name def initialize params @name = params[:name] @collection << B.new endendclass B < A def initialize @my_name = lookup_something(<parent.name>) endend",Access parent class instance variable
Top 50 Things to know about the Ruby programming language?," I am new to the language and I need to know what are the top things that are absolutely necessary to know in order to make a fully functional website or web app using the Ruby programming language?Mainly Ruby on Rails with Rake and other tools that mainly use Rake.Update: I know many other languages like C++, Java, PHP, Perl, etc, etc ....Update 2: This is great ... keep 'em coming! <code> ",What are the most important things to know about Ruby?
Most Important Things to know about the Ruby programming language?," I am new to the language and I need to know what are the top things that are absolutely necessary to know in order to make a fully functional website or web app using the Ruby programming language?Mainly Ruby on Rails with Rake and other tools that mainly use Rake.Update: I know many other languages like C++, Java, PHP, Perl, etc, etc ....Update 2: This is great ... keep 'em coming! <code> ",What are the most important things to know about Ruby?
how to check string is valid date or not in rails," I have a string: ""31-02-2010"" and want to check whether or not it is a valid date.What is the best way to do it?I need a method which which returns true if the string is a valid date and false if it is not. <code> ",How to check if a string is a valid date
Checking to see if a string is a valid date. Ruby on Rails," I have a string: ""31-02-2010"" and want to check whether or not it is a valid date.What is the best way to do it?I need a method which which returns true if the string is a valid date and false if it is not. <code> ",How to check if a string is a valid date
What is the best Diff library in Ruby," I've looked at diff-lcs ( http://raa.ruby-lang.org/project/diff-lcs ) but it's poorly documented, and appears to be unmaintained.Are there any good, actively maintained ruby gems for diffing text or html files? <code> ",What is the best Diff library in Ruby?
proper way to run raw sql quries with sequel," I am not clear yet on the proper way to run raw SQL queries with Sequel.Currently I am trying this: How can I can run the queries as raw SQL then access the results like normal? <code>  DB.fetch(""SELECT * FROM zone WHERE dialcode = '#{@dialcode}' LIMIT 1"") do |row| @zonename = rowend if @zonename.name = ""UK""",How to run raw SQL queries with Sequel
proper way to run raw sql queries with sequel," I am not clear yet on the proper way to run raw SQL queries with Sequel.Currently I am trying this: How can I can run the queries as raw SQL then access the results like normal? <code>  DB.fetch(""SELECT * FROM zone WHERE dialcode = '#{@dialcode}' LIMIT 1"") do |row| @zonename = rowend if @zonename.name = ""UK""",How to run raw SQL queries with Sequel
Ruby: retrieve contents of URL as string," For tedious reasons to do with Hpricot, I need to write a function that is passed a URL, and returns the whole contents of the page as a single string. I'm close. I know I need to use OpenURI, and it should look something like this: Can anyone suggest what I need to add? <code>  require 'open-uri'open(url) { # do something mysterious here to get page_string}puts page_string",Retrieve contents of URL as string
how is ActiveSupport::SecureRandom secure?, Is the ActiveSupport::SecureRandom secure in the way that it is 'impossible' to figure out random numbers or is it secure in the way that it will return UUIDs? <code> ,How is ActiveSupport::SecureRandom secure?
How to store arrays in a file in ruby?, How to store a Ruby array into a file? <code> ,how to store a Ruby array into a file?
Static methods in ruby modules?," Is it possible to declare static methods in a module in ruby? The example above will not print out ""exited"".Is it only possible to have instance methods in a module? <code>  module Software def self.exit puts ""exited"" endendclass Windows include Software def self.start puts ""started"" self.exit endendWindows.start",How can I call a static method in a Ruby module from a class that includes the module?
What is the shortest Ruby code that can count how many true in each column of n x m array?," Given an n x m array of boolean: what is a simple way that can return ""how many true are there in that column?""the result should be  <code>  [[true, true, false], [false, true, true], [false, true, true]] [1, 3, 2] ","Using Ruby, what is a simple way to count how many true in each column of n x m array?"
All integers of a given number," For example, I have 4800 and I would like to see all the factors of this number. divisors_of(4800) => [[1, 4800], [2, 2400], [3, 1600], [4, 1200], [5, 960], [6, 800], [8, 600], [10, 480], [12, 400], [15, 320], [16, 300], [20, 240], [24, 200], [25, 192], [30, 160], [32, 150], [40, 120], [48, 100], [50, 96], [60, 80], [64, 75], [75, 64], [80, 60], [96, 50], [100, 48], [120, 40], [150, 32], [160, 30], [192, 25], [200, 24], [240, 20], [300, 16], [320, 15], [400, 12], [480, 10], [600, 8], [800, 6], [960, 5], [1200, 4], [1600, 3], [2400, 2], [4800, 1]] How would you do this in ruby or any language? <code>  # num = the number you want factors of def factors_of(num) (1..num).collect { |n| [n, num/n] if ((num/n) * n) == num}.compact end",All factors of a given number
All divisors of a given number," For example, I have 4800 and I would like to see all the factors of this number. divisors_of(4800) => [[1, 4800], [2, 2400], [3, 1600], [4, 1200], [5, 960], [6, 800], [8, 600], [10, 480], [12, 400], [15, 320], [16, 300], [20, 240], [24, 200], [25, 192], [30, 160], [32, 150], [40, 120], [48, 100], [50, 96], [60, 80], [64, 75], [75, 64], [80, 60], [96, 50], [100, 48], [120, 40], [150, 32], [160, 30], [192, 25], [200, 24], [240, 20], [300, 16], [320, 15], [400, 12], [480, 10], [600, 8], [800, 6], [960, 5], [1200, 4], [1600, 3], [2400, 2], [4800, 1]] How would you do this in ruby or any language? <code>  # num = the number you want factors of def factors_of(num) (1..num).collect { |n| [n, num/n] if ((num/n) * n) == num}.compact end",All factors of a given number
How to pass parameters to a proc when calling it ? (ruby)," Thanks :) <code>  proc = Proc.new do |name| puts ""Thank you #{name}!""enddef thank yieldend proc.call # output nothing, just fineproc.call('God') # => Thank you God!thank &proc # output nothing, too. Fine;thank &proc('God') # Error!thank &proc.call('God') # Error!thank proc.call('God') # Error!# So, what should I do if I have to pass the 'God' to the proc and use the 'thank' method at the same time ?",How to pass parameters to a proc when calling it by a method?
How to pass parameters to a proc when calling it by a method? (ruby)," Thanks :) <code>  proc = Proc.new do |name| puts ""Thank you #{name}!""enddef thank yieldend proc.call # output nothing, just fineproc.call('God') # => Thank you God!thank &proc # output nothing, too. Fine;thank &proc('God') # Error!thank &proc.call('God') # Error!thank proc.call('God') # Error!# So, what should I do if I have to pass the 'God' to the proc and use the 'thank' method at the same time ?",How to pass parameters to a proc when calling it by a method?
"How do I create a Ruby date object from this string ""DD-MM-YYYY""?", How do I create a Ruby date object from the following string? <code>  DD-MM-YYYY,How do I create a Ruby date object from a string?
"In ruby, what is the vertical lines?", Why won't this work? What about y? <code>  1.upto(9) { |x| print x } { print x |x} },"In Ruby, what are the vertical lines?"
What is the equivalent of this string concatenation in Ruby?," In Python, this idiom for string formatting is quite common What is the equivalent in Ruby? <code>  s = ""hello, %s. Where is %s?"" % (""John"",""Mary"")","What is Ruby equivalent of Python's `s= ""hello, %s. Where is %s?"" % (""John"",""Mary"")`"
What is the Ruby equivalent of this string formatting?," In Python, this idiom for string formatting is quite common What is the equivalent in Ruby? <code>  s = ""hello, %s. Where is %s?"" % (""John"",""Mary"")","What is Ruby equivalent of Python's `s= ""hello, %s. Where is %s?"" % (""John"",""Mary"")`"
how to pass multiple parameters to rake task.," I want to pass multiple parameter but I don't know the numbers. Such as model names. How do I pass those parameters into a rake task and how do I access those parameters inside the rake task.Like, $ rake test_rake_task[par1, par2, par3] <code> ",how to pass multiple parameters to rake task
Ruby string slice index," Easy question, but couldn't find it in the doc.How do I slice a string or array from n until forever? <code>  >> 'Austin'[1..3]=> ""ust"">> 'Austin'[1..]SyntaxError: compile error(irb):2: syntax error, unexpected ']' from (irb):2",Ruby string slice index: str[n..infinity]
Sinatra on Ruby 1.9.2-p0," I'm quite new to Ruby language (up to now I developed in Groovy + Grails) but since I was curious about it I wanted to try Sinatra on Ruby 1.9.2-p0.I have a trivial website that is contained in /mywebpage and has 2 files: and then in the same folder I have a /views/ folder that contains index.haml.I try to run the server with rackup -p8080 but when I try to get /impossible I receive the following error: By searching over internet it seems that this maybe caused by ""."" not being included in $LOAD_PATH so I tried to add it or add directly views ./views so that actually $LOAD_PATH.inspect gives me correct path: ..., ""/home/jack/mywebpage/views""]But still it doesn't seem to work. Being quite new to the framework and the language I was wondering if I'm doing something wrong. any clues? <code>  # blog.rbget '/' do 'Hello World!'endget '/impossible' do haml :indexend #config.rupath = File.expand_path ""../"", __FILE__$LOAD_PATH << (File.expand_path ""."") + ""/views""require 'haml'require 'sinatra'require ""#{path}/blog""run Sinatra::Application Errno::ENOENT at /impossibleNo such file or directory - /home/jack/mywebpage/<internal:lib/rubygems/views/index.haml",Sinatra cannot find views on Ruby 1.9.2-p0
How can I chomp an array in ruby?," In the interest of writing cleaner code... <code>  IO.popen(""Generate a list of files"").readlines.each{ |line| chomped_line = line.chomp # ...}",How can I chomp every line in an array at once?
Why does Ruby doesn't have a ThreadPool built-in?," I have a program that creates 10000 threads at once, and runs 8 at the same time.But ruby doesn't have a ThreadPool built-in as Java. Is there a good reason? <code> ",Why doesn't Ruby have a ThreadPool built-in?
How do I debug ruby scripts?, I copied the following Ruby code from the Internet and made a few changes but it doesn't work.What can I do to debug the program by myself? <code> ,How to debug Ruby scripts
How do I debug Ruby scripts?, I copied the following Ruby code from the Internet and made a few changes but it doesn't work.What can I do to debug the program by myself? <code> ,How to debug Ruby scripts
Heroku: Running imagemagick w/ paperclip," I have installed image magick on my mac os x computer and now I want to deploy it to heroku. I've installed the the paperclip plugin on heroku but I get this error when uploading an image: I had this error before when I didn't have imagemagick instaledl on my computer before but now that I want to deploy it, how do I get image magick to work on heroku? <code>  Paperclip::CommandNotFoundError",Heroku: Running imagemagick with paperclip
"Is there a Ruby, or Ruby-ism for not_nil? opposite of nil? method? "," I am not experienced in Ruby, so my code feels ""ugly"" and not idiomatic: I'd rather have something like But cannot find such a method that opposites nil? <code>  def logged_in? !user.nil?end def logged_in? user.not_nil?end","Is there a Ruby, or Ruby-ism for not_nil? opposite of nil? method?"
Rspec: how to test file operations and file content," In my app, I have the following code: I want to test this code via RSpec. What are the best practices for doing this? <code>  File.open ""filename"", ""w"" do |file| file.write(""text"")end",RSpec: how to test file operations and file content
"Ruby, remove last characters from a string?", What is the preferred way of removing the last n characters from a string? <code> ,"Ruby, remove last N characters from a string?"
rails 3.0: configuring non-restful routes," I can't figure out how to do this in rails 3.0. I have a controller, products, and an action, search, and in routes.rb I've tried and and many other settings, but whenever I access products/search I still get an error complaining that the Product with id, search, can't be found for the action show. Anyone know what I'm doing wrong?Thanks. <code>  resources :products, :collection => {:search => :post } match 'products/search' => 'products#search', :via => [:get, :post]",Configuring non-restful routes
Rails : Associative Arrays," Does Ruby have associative arrays?For eg: What is the easiest method to create such an data structure in Ruby? <code>  a = Array.new a[""Peter""] = 32 a[""Quagmire""] = 'asdas'",Associative Arrays in Ruby
Ruby : Associative Arrays," Does Ruby have associative arrays?For eg: What is the easiest method to create such an data structure in Ruby? <code>  a = Array.new a[""Peter""] = 32 a[""Quagmire""] = 'asdas'",Associative Arrays in Ruby
How to insert ERB-tags with vim, How do I insert <% %> in Vim? I have rails.vim.  <code> ,How do I insert ERB-tags with Vim?
How to insert ERB-tags with Vim, How do I insert <% %> in Vim? I have rails.vim.  <code> ,How do I insert ERB-tags with Vim?
Sorting an array in ruby particular order," I want to sort an array in particular order given in another array.EX: consider an array Now I want to sort array 'a' in the order of 'b', i.e So the output should be Any suggestions? <code>  a=[""one"", ""two"", ""three""]b=[""two"", ""one"", ""three""] a.each do |t| # It should be in the order of 'b' puts tend twoone three ",How to sort an array in Ruby to a particular order?
How do I sort an array in Ruby into a particular order?," I want to sort an array in particular order given in another array.EX: consider an array Now I want to sort array 'a' in the order of 'b', i.e So the output should be Any suggestions? <code>  a=[""one"", ""two"", ""three""]b=[""two"", ""one"", ""three""] a.each do |t| # It should be in the order of 'b' puts tend twoone three ",How to sort an array in Ruby to a particular order?
"Ruby, Klass, Class, What is the difference", What is the difference between Class and Klass? <code> ,What is the difference between Class and Klass in ruby?
xml encoding in nokogiri," I have created a xml doc with Nokogiri: Nokogiri::XML::DocumentThe header of my file is <?xml version=""1.0""?> but I'd expect to have <?xml version=""1.0"" encoding=""UTF-8""?>. Is there any options I could use so the encoding appears ? <code> ",How do I get Nokogiri to add the right XML encoding?
netbeans 6.9.1 +rail3 + ruby 1.9.2p0 debugging," I'm running OpenSuSE 11.3 and am having problems debugging rails3 application in NetBeans 6.9.1 (ruby 1.9.2p0, rails 3.0.3, rvm).I have installed ruby-debug19, ruby-debug-ide19Changed Gemfile, so that the line 'gem ruby-debug19' is not commented outRan 'bundle install'When I ran 'ruby s --debugger' in console I got the following: NetBeans: Any ideas how can I solve it?Thanks! <code>  tux@linux-hby6:~/prg/ruby/rail3-sqlite> rails s --debugger=> Booting WEBrick=> Rails 3.0.3 application starting in development on http://0.0.0.0:3000=> Call with -d to detach=> Ctrl-C to shutdown server=> Debugger enabled[2010-12-16 01:07:13] INFO WEBrick 1.3.1[2010-12-16 01:07:13] INFO ruby 1.9.2 (2010-08-18) [i686-linux][2010-12-16 01:07:13] INFO WEBrick::HTTPServer#start: pid=4105 port=3000 Fast Debugger (ruby-debug-ide 0.4.9) listens on :35528 /home/tux/.rvm/gems/ruby-1.9.2-p0/gems/ruby-debug-ide19-0.4.12/lib/ruby-debug-ide.rb:123:in `debug_load' /home/tux/.rvm/gems/ruby-1.9.2-p0/gems/ruby-debug-ide19-0.4.12/lib/ruby-debug-ide.rb:123:in `debug_program' /home/tux/.rvm/gems/ruby-1.9.2-p0/gems/ruby-debug-ide19-0.4.12/bin/rdebug-ide:87:in `' /home/tux/.rvm/gems/ruby-1.9.2-p0/bin/rdebug-ide:19:in `load' /home/tux/.rvm/gems/ruby-1.9.2-p0/bin/rdebug-ide:19:in `'Uncaught exception: no such file to load -- script/rails",netbeans 6.9.1 + rails 3 + ruby 1.9.2p0 debugging
Web Based Application Development," I'm particularly fond of the way the following SAAS companies have enabled application development through-the-web. Many of them allow, through-the-web definition of tables, views, relationships, forms, dashboards, email-notifications, charts, calendars, cross-tabulations, and role based security. They are:DabbleDBZohoTeamDeskInfoDomeCaspioOther Interesting PAASTIBCOSilverI've also found these open source products that offer through-the-web application development. These tend to use Javascript components that interface via a REST interface. The Javascripts components can typically be switched into ""development"" mode and configured to have custom data sources, respond to events, and be styled.WaveMaker (Open Source Java)SmartGWTProAribaWeb Are there any other through-the-web application development frameworks? I'm especially looking for the closest thing offered by Ruby or Python? <code> ",Through-the-Web Web Application Development
[Rails 3] How can I specify a local gem in my Gemfile?, I'd like Bundler to load a local gem. Is there an option for that? Or do I have to move the gem folder into the .bundle directory? <code> ,How can I specify a local gem in my Gemfile?
How does this superbe quine work?, Another SO question mentions a fantastic quine by Yusuke Endoh. A quine is a computer program which produces a copy of its own source code as its only output; this one does it with a twist. A must-see.But I can't figure out how it works. Any pointers? <code> ,How does this superb quine work?
Date ordinalization in Ruby/Rails," I'm looking for a way to handle integer ordinalization in Ruby/Rails, ie. ""st"", ""nd"", ""rd"", and ""th"" suffixes to integers. Ruby on Rails used to extend FixNum with an ""ordinalize"" method, but that functionality seems to have been deprecated in version 3.I am currently just using the source for the old Rails method, which is fine... but this seems like functionality that most scripting languages / web frameworks would have built in, and I feel like the folks behind Rails must have had a reason for deprecating the functionality (perhaps it is now available in Ruby proper?). Please advise! <code> ",Integer ordinalization in Ruby/Rails
ruby: how to change the array index of a array element?," I have a question on how I can change the index of a array element, so that it doesn't come at the 7. position but at position 2 instead...Is there a function to handle this? <code> ",How to change the position of an array element?
Ruby regex help," I have a string which will always be at least a number, but can also contain letters before and/or after the number: I need to split the string like this: How can I do this with Ruby 1.9.2? <code>  ""4""""Section 2""""4 Section""""Section 5 Aisle"" ""4"" becomes ""4""""Section 2"" becomes ""Section "",""2""""4 Aisle"" becomes ""4"","" Aisle""""Section 5 Aisle"" becomes ""Section "",""5"","" Aisle""","Split string on a number, preserving the number"
Sinatra: Route Handlers Inside a Class - Access other Class Methods," I have a Sinatra app setup where most of the logic is performed inside of various classes, and the post/get routes instantiate those classes and call their methods.I'm thinking about whether putting the post/get route handlers inside of the classes themselves would be a better structure. In any case, I'd like to know if it is possible. So for instance: Without modification to the above, Sinatra will say there is no method say_hello on the SinatraApplication object. <code>  class Example def say_hello ""Hello"" end get '/hello' do @message = say_hello endend",Route Handlers Inside a Class
Ruby libary function to transorm Enumerable to Hash," Consider this extension to Enumerable: It is used like so: Is there a built-in function which already does this, or close enough to it that this extension is not needed? <code>  module Enumerable def hash_on h = {} each do |e| h[yield(e)] = e end h endend people = [ {:name=>'fred', :age=>32}, {:name=>'barney', :age=>42},]people_hash = people.hash_on { |person| person[:name] }p people_hash['fred'] # => {:age=>32, :name=>""fred""}p people_hash['barney'] # => {:age=>42, :name=>""barney""}",Ruby library function to transform Enumerable to Hash
Ruby on Rails - Check if a directory/file/symlink exists with one command," Is there a single way of detecting if a directory/file/symlink/etc. entity (more generalized) exists? I need a single function because I need to check an array of paths that could be directories, files or symlinks. I know File.exists?""file_path"" works for directories and files but not for symlinks (which is File.symlink?""symlink_path"").  <code> ",How to check if a directory/file/symlink exists with one command in Ruby
How to check if a directory/file/symlink exists with one command," Is there a single way of detecting if a directory/file/symlink/etc. entity (more generalized) exists? I need a single function because I need to check an array of paths that could be directories, files or symlinks. I know File.exists?""file_path"" works for directories and files but not for symlinks (which is File.symlink?""symlink_path"").  <code> ",How to check if a directory/file/symlink exists with one command in Ruby
How to make this work in Ruby 1.8.6," The following line is working fine in ruby 1.8.7 and not in 1.8.6. What alternative I can use in 1.8.6 Since count is not a method in Array in version 1.8.6, I am getting this error. Is there a similar method in this version? <code>  x = [3,4,5,6,7,78,4,3,2,5,5,3]x.count(3)=> 3",Count instances of a value in an array in Ruby 1.8.6
What is this save(false)," In the following code, what does save(false) do? If it's for updating the credentials, then why do they include false? <code>  def create_reset_code! @reset = true self.attributes = {:reset_code => Digest::SHA1.hexdigest( Time.now.to_s.split(//).sort_by {rand}.join )} save(false) end ","What does ""save(false)"" do?"
Insecure world writable dir /home," I've tried this but it didn't work and seemed to be for osx. I have a fresh Ubuntu 10.10 install with rvm, rails 3 and ruby 1.9.2. I have a fresh rails app but using either gem or rails results in the following warnings (with lag). $ rails -v $ gem -v Just incase it matters, here is my Gemfile: <code>  /home/chance/.rvm/gems/ruby-1.9.2-p180@global/gems/railties-3.0.5/lib/rails/script_rails_loader.rb:11: warning: Insecure world writable dir /home/chance in PATH, mode 040777/home/chance/.rvm/gems/ruby-1.9.2-p180@global/gems/bundler-1.0.10/lib/bundler/runtime.rb:136: warning: Insecure world writable dir /home/chance in PATH, mode 040777Rails 3.0.5 /home/chance/.rvm/rubies/ruby-1.9.2-p180/bin/gem:4: warning: Insecure world writable dir /home/chance in PATH, mode 0407771.6.2 source 'http://rubygems.org'gem 'rails'# Bundle edge Rails instead:# gem 'rails', :git => 'git://github.com/rails/rails.git'gem 'sqlite3'gem 'sqlite3-ruby', :require => 'sqlite3'gem ""haml""gem ""formtastic""gem ""will_paginate""gem ""devise""gem ""delayed_job""gem ""whenever""gem ""memcache-client""gem ""capistrano""group :testing do gem ""rspec"" gem ""rspec-rails"" gem ""autotest-standalone"" gem ""autotest-rails"" gem ""autotest-growl"" gem ""mocha"" gem ""shoulda"" gem ""factory_girl_rails""endgroup :development do gem ""cheat"" gem ""bullet"" gem ""ruby-growl""end","Getting the warning ""Insecure world writable dir /home/chance "" in PATH, mode 040777 for rails and gem"
Can the standard Rails logger be configured to flush after every message?," Is it possible for the standard Ruby logger (i.e. ::Logger) to auto-flush after each write?Update: I am setting a custom log formatter, as per How to get timestamps in your ruby on rails logs: I tried to use the suggestion from idlefingers as follows: But no dice. Neither does @logger.auto_flushing = 1 work for me. What am I doing wrong?Update: It turns out that ActiveSupport's ::Logger simply wraps the standard Ruby ::Logger. So my question turns out to be about Ruby and not Rails, after all. <code>  class Foo def initialize(params = {}) @logger = Logger.new $stdout @logger.formatter = LogFormatter.new @logger.level = params.include?(:log) ? params[:log] : Logger::INFO # ... end class LogFormatter < Logger::Formatter def call(severity, time, progname, message) timestamp = time.iso8601 log_msg = ""#{timestamp}#{"" [#{severity}]"" if %w{ERROR WARN}.include? severity} "" if message.is_a? Exception log_msg += ""#{message.message}"" log_msg += "": #{message.backtrace.join ""\n#{timestamp} ""}"" unless message.backtrace.blank? else log_msg += message end ""#{log_msg}\n"" end endend def initialize(params = {}) Rails.logger.auto_flushing = 1 @logger = Logger.new $stdout @logger.formatter = LogFormatter.new @logger.level = params.include?(:log) ? params[:log] : Logger::INFO end",Can the standard Ruby logger be configured to flush after every message?
Can the standard ActiveSupport logger be configured to flush after every message?," Is it possible for the standard Ruby logger (i.e. ::Logger) to auto-flush after each write?Update: I am setting a custom log formatter, as per How to get timestamps in your ruby on rails logs: I tried to use the suggestion from idlefingers as follows: But no dice. Neither does @logger.auto_flushing = 1 work for me. What am I doing wrong?Update: It turns out that ActiveSupport's ::Logger simply wraps the standard Ruby ::Logger. So my question turns out to be about Ruby and not Rails, after all. <code>  class Foo def initialize(params = {}) @logger = Logger.new $stdout @logger.formatter = LogFormatter.new @logger.level = params.include?(:log) ? params[:log] : Logger::INFO # ... end class LogFormatter < Logger::Formatter def call(severity, time, progname, message) timestamp = time.iso8601 log_msg = ""#{timestamp}#{"" [#{severity}]"" if %w{ERROR WARN}.include? severity} "" if message.is_a? Exception log_msg += ""#{message.message}"" log_msg += "": #{message.backtrace.join ""\n#{timestamp} ""}"" unless message.backtrace.blank? else log_msg += message end ""#{log_msg}\n"" end endend def initialize(params = {}) Rails.logger.auto_flushing = 1 @logger = Logger.new $stdout @logger.formatter = LogFormatter.new @logger.level = params.include?(:log) ? params[:log] : Logger::INFO end",Can the standard Ruby logger be configured to flush after every message?
Is there a cleaner way to avoid calling a method on nil in a nested params hash?, I'm interested in getting the nested 'name' parameter of a params hash. Calling something like throws an error when params[:subject] is empty. To avoid this error I usually write something like this: Is there a cleaner way to implement this? <code>  params[:subject][:name] if params[:subject] && params[:subject][:name],Is there a clean way to avoid calling a method on nil in a nested params hash?
How to use Sinatra's HAML-helper inside a model?," In one of my models I have a method that sends an email. I'd like to mark up this email via a Haml file that's stored together with my other views.Is there a way to call Sinatra's HAML-helper from within a model? If not, I will need to call Haml directly like so: Is there a way for the Haml template to have access to the @name instance variable? <code>  @name = 'John Doe'Haml::Engine.new(File.read(""#{MyApplication.views}/email.haml"")).to_html",How to use Sinatra's Haml-helper inside a model?
Installing nokogiri fails / libiconv missing," I've been trying to install Nokogiri on Mac OS 10.9.3 and whatever I try, the install fails in the end with the following error message: After following a lot of help found around the web including building and installing libxml2 and libxslt using brew and building libiconv from the sources (as described in ""Installing Nokogiri""), the error remains the same. When trying to run the installation for Nokogiri, libxml2 and libxslt seem to be found fine, but not libiconv.Anyone with a better knowledge of these things know how to get Nokogiri installed? <code>  $ sudo gem install nokogiri -- --with-xml2-include=/usr/local/Cellar/libxml2/2.9.1/include/libxml2 --with-xml2-lib=/usr/local/Cellar/libxml2/2.9.1/lib --with-xslt-dir=/usr/local/Cellar/libxslt/1.1.28 --with-iconv-include=/usr/local/Cellar/libiconv/1.14/include --with-iconv-lib=/usr/local/Cellar/libiconv/1.14/libBuilding native extensions with: '--with-xml2-include=/usr/local/Cellar/libxml2/2.9.1/include/libxml2 --with-xml2-lib=/usr/local/Cellar/libxml2/2.9.1/lib --with-xslt-dir=/usr/local/Cellar/libxslt/1.1.28 --with-iconv-include=/usr/local/Cellar/libiconv/1.14/include --with-iconv-lib=/usr/local/Cellar/libiconv/1.14/lib'This could take a while...Building nokogiri using packaged libraries.ERROR: Error installing nokogiri: ERROR: Failed to build gem native extension. /System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/bin/ruby extconf.rb --with-xml2-include=/usr/local/Cellar/libxml2/2.9.1/include/libxml2 --with-xml2-lib=/usr/local/Cellar/libxml2/2.9.1/lib --with-xslt-dir=/usr/local/Cellar/libxslt/1.1.28 --with-iconv-include=/usr/local/Cellar/libiconv/1.14/include --with-iconv-lib=/usr/local/Cellar/libiconv/1.14/libBuilding nokogiri using packaged libraries.checking for iconv.h... yeschecking for iconv_open() in iconv.h... nochecking for iconv_open() in -liconv... nochecking for libiconv_open() in iconv.h... nochecking for libiconv_open() in -liconv... no-----libiconv is missing. please visit http://nokogiri.org/tutorials/installing_nokogiri.html for help with installing dependencies.-----*** extconf.rb failed ***Could not create Makefile due to some reason, probably lack of necessarylibraries and/or headers. Check the mkmf.log file for more details. You mayneed configuration options.Provided configuration options: --with-opt-dir --without-opt-dir --with-opt-include --without-opt-include=${opt-dir}/include --with-opt-lib --without-opt-lib=${opt-dir}/lib --with-make-prog --without-make-prog --srcdir=. --curdir --ruby=/System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/bin/ruby --help --clean --use-system-libraries --enable-static --disable-static --with-zlib-dir --without-zlib-dir --with-zlib-include --without-zlib-include=${zlib-dir}/include --with-zlib-lib --without-zlib-lib=${zlib-dir}/lib --enable-cross-build --disable-cross-buildGem files will remain installed in /Library/Ruby/Gems/2.0.0/gems/nokogiri-1.6.2.1 for inspection.Results logged to /Library/Ruby/Gems/2.0.0/gems/nokogiri-1.6.2.1/ext/nokogiri/gem_make.out",Why does installing Nokogiri on Mac OS fail with libiconv is missing?
Why does installing nokogiri on Mac OS fail with libiconv is missing?," I've been trying to install Nokogiri on Mac OS 10.9.3 and whatever I try, the install fails in the end with the following error message: After following a lot of help found around the web including building and installing libxml2 and libxslt using brew and building libiconv from the sources (as described in ""Installing Nokogiri""), the error remains the same. When trying to run the installation for Nokogiri, libxml2 and libxslt seem to be found fine, but not libiconv.Anyone with a better knowledge of these things know how to get Nokogiri installed? <code>  $ sudo gem install nokogiri -- --with-xml2-include=/usr/local/Cellar/libxml2/2.9.1/include/libxml2 --with-xml2-lib=/usr/local/Cellar/libxml2/2.9.1/lib --with-xslt-dir=/usr/local/Cellar/libxslt/1.1.28 --with-iconv-include=/usr/local/Cellar/libiconv/1.14/include --with-iconv-lib=/usr/local/Cellar/libiconv/1.14/libBuilding native extensions with: '--with-xml2-include=/usr/local/Cellar/libxml2/2.9.1/include/libxml2 --with-xml2-lib=/usr/local/Cellar/libxml2/2.9.1/lib --with-xslt-dir=/usr/local/Cellar/libxslt/1.1.28 --with-iconv-include=/usr/local/Cellar/libiconv/1.14/include --with-iconv-lib=/usr/local/Cellar/libiconv/1.14/lib'This could take a while...Building nokogiri using packaged libraries.ERROR: Error installing nokogiri: ERROR: Failed to build gem native extension. /System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/bin/ruby extconf.rb --with-xml2-include=/usr/local/Cellar/libxml2/2.9.1/include/libxml2 --with-xml2-lib=/usr/local/Cellar/libxml2/2.9.1/lib --with-xslt-dir=/usr/local/Cellar/libxslt/1.1.28 --with-iconv-include=/usr/local/Cellar/libiconv/1.14/include --with-iconv-lib=/usr/local/Cellar/libiconv/1.14/libBuilding nokogiri using packaged libraries.checking for iconv.h... yeschecking for iconv_open() in iconv.h... nochecking for iconv_open() in -liconv... nochecking for libiconv_open() in iconv.h... nochecking for libiconv_open() in -liconv... no-----libiconv is missing. please visit http://nokogiri.org/tutorials/installing_nokogiri.html for help with installing dependencies.-----*** extconf.rb failed ***Could not create Makefile due to some reason, probably lack of necessarylibraries and/or headers. Check the mkmf.log file for more details. You mayneed configuration options.Provided configuration options: --with-opt-dir --without-opt-dir --with-opt-include --without-opt-include=${opt-dir}/include --with-opt-lib --without-opt-lib=${opt-dir}/lib --with-make-prog --without-make-prog --srcdir=. --curdir --ruby=/System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/bin/ruby --help --clean --use-system-libraries --enable-static --disable-static --with-zlib-dir --without-zlib-dir --with-zlib-include --without-zlib-include=${zlib-dir}/include --with-zlib-lib --without-zlib-lib=${zlib-dir}/lib --enable-cross-build --disable-cross-buildGem files will remain installed in /Library/Ruby/Gems/2.0.0/gems/nokogiri-1.6.2.1 for inspection.Results logged to /Library/Ruby/Gems/2.0.0/gems/nokogiri-1.6.2.1/ext/nokogiri/gem_make.out",Why does installing Nokogiri on Mac OS fail with libiconv is missing?
ruby: all ways to read from file," What are all the common ways to read a file in Ruby?For instance, here is one method: I know Ruby is extremely flexible. What are the benefits/drawbacks of each approach? <code>  fileObj = File.new($fileName, ""r"")while (line = fileObj.gets) puts(line)endfileObj.close",What are all the common ways to read a file in Ruby?
How to escape a Unicode string with ruby?," I need to encode/convert a Unicode string to its escaped form, with backslashes. Anybody know how? <code> ",How do I escape a Unicode string with Ruby?
"<body id=""some"">"," How can I set ID for body tag in Rails? <code>  <body id=""login"">",Dynamic body id
Ruby: string not in array," In Ruby, how would I return true if a string is not in an array of options? ...or do you know of a better way to write this? <code>  # pseudo codedo_this if current_subdomain not_in [""www"", ""blog"", ""foo"", ""bar""]","In Ruby, how do I find out if a string is not in an array?"
foreign key dropdowns in scaffolded rails 3 views," I created 2 models using scaffolding with Rails 3. The models are Locations and Jobs and each job has a location.I created the required reference calls in the scaffold generation code but when I look at the view to create a new job, all I see is a textbox where I should add the location_id.How can I get that to be a dropdown instead for a better user experience? <code> ",Foreign Key Dropdown in Scaffold Rails 3 Views
Stroing values in csv as string," When i run above code it stores the values in CSV as01, 02. testI want them to store as""01"", ""02"", ""test"" <code>  @out = File.open(""#{File.expand_path(""CSV"")}/#{file_name}.csv"", ""w"")CSV::Writer.generate(@out) do |csv| csv << [""01"", ""02"", ""test""]end@out.close",Quote all fields in CSV output
String values in csv as string," When i run above code it stores the values in CSV as01, 02. testI want them to store as""01"", ""02"", ""test"" <code>  @out = File.open(""#{File.expand_path(""CSV"")}/#{file_name}.csv"", ""w"")CSV::Writer.generate(@out) do |csv| csv << [""01"", ""02"", ""test""]end@out.close",Quote all fields in CSV output
Testing combinations in Cucumber," I have a scenario outline that has two different variables. One variable has about 20 different values and the other has 3.I need to be able to test every single combination and I need each in a separate scenario since they must be tested independently.Currently, I just write it out by hand(they are integers in the example but not in my test): Question: Is there a way to run this where every combination doesn't have to be written out? The variables are bound to change in size and content later on and I would prefer to have a single data structure to deal with. <code>  Scenario Outline: Test my stuffGiven first var is <var_a>And second var is <var_b>When I do stuffThen good stuff should happenExamples:| var_a | var_b || 1 | 1 || 1 | 2 || 1 | 3 || 2 | 1 || 2 | 2 |etc...",Combinatorial testing with Cucumber
Ruby - change variable passed in a method, How can I change the contents of a variable using a method? Maybe I'm not saying this correctly. What is a way to get the reference to a variable like in C? Example: How can I do something like this in Ruby? <code>  // main stuffint gorilla = 29;makeMeABanana(&gorilla);void makeMeABanana(int *gorilla) { },Change variable passed in a method
How to find if a hash has one of multiple keys in ruby," Do you know a pretty ruby way to find if an hash has one of some keys ? I know that I can do a : But I was wondering if there was a prettier way to do it ! :)Thanks a lot ! <code>  h = {:a => 1, :c => 3, :d => 4}# keys to find are :a, :b or :e h.key?(:a) || h.key?(:b) || h.key?(:e)",Determine if hash contains any key from a set of keys?
Generating a random number in a certain range with Ruby, I am trying to get a random year between 1900 and 1980 with Ruby.So far I have: but this is just adding 1900 and a random number from 0 - 1979 together to look like 19001947.I think I'm missing something silly but can anyone shed any light? <code>  puts 'the year was: ' + 1900.to_s + rand(1980).to_s,How do I generate a random number in a certain range with Ruby?
Ruby regex for brackets," I am looking for a regex to replace all terms in parentheses unless the parentheses are within square brackets.e.g. I current have: However this is still matching words within the square brackets.I have also created a rubular page of my progress so far: http://rubular.com/r/gG22pFk2Ld <code>  (matches) #match[(do not match)] #should not match[[does (not match)]] #should not match [^\]]\([^()]*\) #Not a square bracket, an opening bracket, any non-bracket character and a closing bracket.",Ruby regex for text within parentheses
Ruby: Creating instance of class in module via string," Say I have this Ruby code in test.rb Here some tests in a ruby shell started with irb -r test.rb: Why does Object.const_get('MyModule::TestClassA').new in the constructor of TestClassB fail while MyModule::TestClassA.new works in the console?I also tried Object.const_get('TestClassA').new, but that doesn't work either. <code>  module MyModule class TestClassA end class TestClassB def initialize a = Object.const_get('MyModule::TestClassA').new end endend ruby-1.8.7-p302 > MyModule => MyModule ruby-1.8.7-p302 > MyModule::TestClassA => MyModule::TestClassA ruby-1.8.7-p302 > MyModule::TestClassA.new => #<MyModule::TestClassA:0x10036bef0> ruby-1.8.7-p302 > MyModule::TestClassB => MyModule::TestClassB ruby-1.8.7-p302 > MyModule::TestClassB.newNameError: wrong constant name MyModule::TestClassA from ./test.rb:7:in `const_get' from ./test.rb:7:in `initialize' from (irb):1:in `new' from (irb):1",Creating instance of class in module via string
Case control structure (bigger than)," Why is this not working? <code>  case ARGV.length when 0 abort ""Error 1"" when > 2 abort ""Error 2""end","Why doesn't ""case"" with ""when > 2"" work?"
Case control structure (greater-than)," Why is this not working? <code>  case ARGV.length when 0 abort ""Error 1"" when > 2 abort ""Error 2""end","Why doesn't ""case"" with ""when > 2"" work?"
"Why doesn't a case ""when > 2"" work?"," Why is this not working? <code>  case ARGV.length when 0 abort ""Error 1"" when > 2 abort ""Error 2""end","Why doesn't ""case"" with ""when > 2"" work?"
Equivalent of .try() for a hash?," In Rails we can do the following in case a value doesn't exist to avoid an error: What is the equivalent when I'm digging deep into a hash and don't want to get an error? In the above case, session[:comments]try[@comment.id] doesn't work. What would? <code>  @myvar = @comment.try(:body) @myvar = session[:comments][@comment.id][""temp_value""] # [:comments] may or may not exist here","Equivalent of .try() for a hash to avoid ""undefined method"" errors on nil?"
Where to place/access config file in gem," I am writing my first gem and I'd like specific options to be retrieved and set by the user through a config.yml file. Where should this file be placed within my gem file structure and how does someone modify the file when installing my gem? I'm guessing they can pass in specific options when installing the gem, and those options can be mapped to the config.yml file, but how is this possible?Also, is the best way to retrieve the file through YAML.load_file?I've watched Ryan's railcasts on creating a gem via Bundler, but he doesn't cover this topic. <code> ",Where to place/access config file in gem?
"Ruby on Rails Callback, what is difference between :before_save and :before_create ?"," Could you explain in detail what the :before_save and :before_create Ruby on Rails callbacks are, and what they have to do with Rails validations? Does validation occur after :before_save or :before_create?  <code> ","Ruby on Rails Callback, what is difference between :before_save and :before_create?"
Net HTTP get source code and status," I am currently getting the source code of the page using: I would also like to get the HTTP status, without making a second request.Is there a way to do that with another method? I've been looking at the documentation, but cannot seem to find what I am looking for. <code>  Net::HTTP.get(URI.parse(page.url))",Net::HTTP get source code and status
Trouble Using RVM," I have installed RVM along with ruby versions. However if I fire up the console and run the command rails server, bundle install, etc. I get this error But if I run rvm use 1.9.2 first, then everything is ok. I tried using `rvm use --default 1.9.2' but nothing changed. Does this mean it uses a different ruby from the ones in RVM? Thanks in advance! <code>  bash: /usr/bin/rails: /usr/bin/ruby1.8: bad interpreter: No such file or directory",RVM finding system gems' executables
How to Get the Page Source with Mechanize/Nokogiri," I'm logged into a webpage/servlet using Mechanize.I have a page object: When I use: I get the ""mechanized"" version of the page which I don't want: How do I get the HTML source of the page instead? <code>  jobShortListPg = agent.get(addressOfPage) puts jobShortListPg #<Mechanize::Page::Link ""Home"" ""blahICScriptProgramName=WEBLIB_MENU.ISCRIPT3.FieldFormula.IScript_DrillDown&target=main0&Level=0&RL=&navc=3171"">",How to get the page source with Mechanize/Nokogiri
Ruby split String into two seconds and put in hash with predefined keys," I don't know if this is actually good ruby code, but what I am trying to do is split a String into two separate sections and put the two as values to two specific keys. For example: I was wondering if this could be done in a single line through some ruby magic however. <code>  name_a = ""Henry Fillenger"".split(/\s+/,2) name = {:first_name => name_a[0], :last_name => name_a[1]}",Ruby split String into two sections and put in hash with predefined keys
Using Nokogiri::XML::Reader to parse large XML files," I'm trying to use Ruby's Nokogiri to parse large (1 GB or more) XML files. I'm testing code on a smaller file, containing only 4 records available here. I'm using Nokogiri version 1.5.0, Ruby 1.8.7 on Ubuntu 10.10. Since I don't understand SAX very well, I'm trying Nokogiri::XML::Reader to start.My first attempt, to retrieve the content of the PMID tag, looks like this: Here's what I hoped to see: Here's what I actually saw: It seems that for some reason, my code is finding, or generating, an extra, empty PMID tag for every instance of PMID. Either that or inner_xml does not work as I thought.I'd be grateful if anyone could confirm that my code and data generates the result shown and suggest where I'm going wrong. <code>  #!/usr/bin/rubyrequire ""rubygems""require ""nokogiri""file = ARGV[0]reader = Nokogiri::XML::Reader(File.open(file))p = []reader.each do |node| if node.name == ""PMID"" p << node.inner_xml endendputs p.inspect [""21714156"", ""21693734"", ""21692271"", ""21692260""] [""21714156"", """", ""21693734"", """", ""21692271"", """", ""21692260"", """"]",How do I use Nokogiri::XML::Reader to parse large XML files?
Getting domain of an URL with Regular Expression," I'm trying to get the domain of a given URL. For example http://www.facebook.com/someuser/ will return facebook.com. The given URL can be on these formats:https://www.facebook.com/someuser (www. is optional, but should be ignored)www.facebook.com/someuser (http:// is not required)facebook.com/someuserhttp://someuser.tumblr.com -> this has to return tumblr.com onlyI wrote this regex:/(?: \.|\/{2})(?: www\.)?([^\/]*)/iBut it does not work as I expect.I can do this in parts:Remove http:// and https://, if present on string, with string.delete ""/https?:\/\//i"".Remove www. with string.delete ""/www\./i"".Get the domain with match and /(\w+\.\w+)+/iBut this won't work with subdomains.String for testing: I need this to work with the minimum memory and processing coast as possible.Any ideas? <code>  https://www.facebook.com/usernamehttp://last.fm/user/usernamewww.google.comfacebook.com/usernamehttp://sub.tumblr.com/sub.tumblr.com",Getting domain of an URL with Regular Expressions
How to add to an existing hash in ruby," In regards to adding an key => value pair to an existing populated hash in Ruby, I'm in the process of working through Apress' Beginning Ruby and have just finished the hashes chapter.I am trying to find the simplest way to achieve the same results with hashes as this does with arrays: <code>  x = [1, 2, 3, 4]x << 5p x",How to add to an existing hash in Ruby
Using ruby code in a buildr project," How can use Ruby in a buildr project?I've used Ruby, JRuby, Java, and Clojure in quite a few separate projects. I'm currently working on a simulation app in my standard Ruby that I wanted to try to do with a Clojure backend (I do enjoy the functional code), and JRuby gui and test suite. I could also see using say, Scala, for the backend in a different project in the future.I think I'm going to give buildr (http://buildr.apache.org/) a try for my project, but I noticed that buildr doesn't seem to be set up to use JRuby code inside the project itself! This seems a little silly, seeing as the tool is meant to unify the common JVM languages and is built in ruby.Does anyone know how you would accomplish this, short of including the outputted jar in a distinct, ruby only project? <code> ",How can I use Ruby code in a buildr project?
Making the file name be a timestamp with CarrierWave," Before I go into detail I'll get right to the point: has anyone figured out a way to get Carrierwave to save files with their names as a timestamp or any arbitrary string that is unique to each file?By default Carrierwave saves each file and its alternate versions in its own directory (named after the model ID number). I'm not a fan of this because instead of one directory with 1,000, for the sake of using a large round number, files (in my case pictures) in it we get one directory with 1,000 subdirectories each with one or two files. Yuck.Now, when you override your Uploader's store_dir method to be something like the following: you end up with the exact behavior that I want. All the files (pictures) go into one big happy folder. No more subfolders that stick around when the object gets deleted.There's only one problem. File collisions. If you upload delicious_cake.jpg twice the second one will overwrite the first even if they are two different pictures of delicious cake! That's clearly why the store_dir method has the extra /#{model.id} tacked on the end of the value it returns.So, what to do? After reading around a bit I discovered that in the generated uploader file there is an apparent solution commented out. After a little bit of searching I found someone who had done the following This got me thinking, why not just do this That's when things got horribly broken. The problem with this is that filename apparently gets called for each version of the file so we end up with file names like 1312335603175322.jpg and thumb_1312335603195323.jpg. Notice the slight difference? Each file name is based on the time when filename was called for that particular version. That won't do at all.I next tired using model.created_at for the basis of the timestamp. Only one problem, that returns nil for the first version since it hasn't been put in the database yet.After some further thinking I decided to try the following in my pictures controller. This overrides the original_filename property before Carrierwave even gets to it making it be a timestamp. It does exactly what I want. The original version of the file ends up with a name like 1312332906940106.jpg and the thumbnail version (or any other version) ends up with a name like thumb_1312332906940106.jpg.But, this seems like an awful hack. This should be part of the model, or better yet part of the uploader mounted onto the model.So, my question is, is there a better way to achieve this? Did I miss something crucial with Carrierwave that makes this easy? Is there a not so obvious but cleaner way of going about this? Working code is good, but working code that doesn't smell bad is better. <code>  def store_dir ""uploads/#{model.class.to_s.underscore}/#{mounted_as}""end # Override the filename of the uploaded files:# Avoid using model.id or version_name here, see uploader/store.rb for details.# def filename# ""something.jpg"" if original_filename# end def filename @name ||= ""#{secure_token}.#{file.extension}"" if original_filenameend def filename @name ||= ""#{(Time.now.to_i.to_s + Time.now.usec.to_s).ljust(16, '0')}#{File.extname(original_filename)}""end def create if params[:picture] and params[:picture][:image] params[:picture][:image].original_filename = ""#{(Time.now.to_i.to_s + Time.now.usec.to_s).ljust(16, '0')}#{File.extname(params[:picture][:image].original_filename)}"" end ...","CarrierWave: Create the same, unique filename for all versioned files"
"Generating a random number between X and Y, excluding"," Is there a way of generating a random number in ruby between, say, 1 - 100 but excluding 20, 30 and 40? I could do something like ...but that doesn't seem very efficient (plus that particular example probably wouldn't even work). Is there a simpler way? Any help is much appreciated!  <code>  def random_number random_number = rand(100) while random_number == 20 || 30 || 40 random_number = rand(100) end return random_numberend","Generating a random number between X and Y, excluding certain numbers"
Rotate a set of object coordinates in Ruby," I have a bunch of objects (ActiveRecord) that have x and y coordinates relative to a HTML5 canvas element. I need to rotate sets of them by different number of degrees (in 90 degrees increments) and then store them again for a one time data migration.These objects are all relative to a canvas element so the coordinates start at (0,0) and I would like them to stay in that quadrant (bottom right), if possible. I assume that I need to do a rotation around (0,0) and then a translation down and right.Is there a way I can write a block that will do this? Any help is appreciated.Update: did some edits to make it clearer after some questions.Thanks. <code> ",Rotate a set of object coordinates
Understanding how really establish_connection works on ActiveRecord," This code was taken from ActiveRecord 2.3.14's gem class ConnectionHandler It seems each time ruby calls establish_connection on the model, it's creating a new connection pool.My question: If I have 5 models that use establish_connection to the same database, is Rails smart enough to pick an already existing pool rather creating a new one with the same connection credentials? Does this also happen if my 5 models are subclasses of some abstract class that uses establish_connection? Will it always pick a connection from the @connection_pools if it exists?Update 1I'm talking about a concrete example. You have 5 models with 5 different connections, each time Rails uses a model it executes establish_connection. Looking at the code in ActiveRecord, when it executes establish_connection it creates a new pool with connections to that specific connection. What I'm wondering is whether each time Rails calls a model's establish_connection, does it create a new pool or take the existing one.Example: you come to my site and see a product list. You've just hit an action that calls Product.all, which executes establish_connection to some database on Amazon. Then, I come to the product list, what happens? Do I grab the established connection or am I creating a new pool with that connection?Update 2My guess is that first time Rails loads my models it's creating pools with different connections. After, when I use some Model.method, it just grabs the connection associated with the model and executes the method. I'm not sure what happens when 2 models have two equal connections (not in the abstract class but in self class). Will this produce two same connection pools, or is ActiveRecord smart enough to catch this case? <code>  def establish_connection(name, spec) @connection_pools[name] = ConnectionAdapters::ConnectionPool.new(spec)end",Understanding how establish_connection works in ActiveRecord
How to filer parameters in rails?," Rails has built in log filtering so you don't log passwords and credit cards. Works great for that but when you want to trigger a custom log (like to email) and send your own params or other data along with it, the parameters are obviously not auto-filtered. I have been digging and trying to find this in the rails source but have had no luck so far.I have configured rails to filter parameters as follows and it works properly for keeping the data out of rails logs: How would you filter sensitive data from the params hash before dumping it into an email, api call or custom (non-rails) log? <code>  config.filter_parameters += [:password, :password_confirmation, :credit_card]",How to filter parameters in rails?
Override Model's Setter and getter's in Mongoid," Is there a way to override a setter or getter for a model in Mongoid? Something like: where the name method can be overwritten without using virtual fields? <code>  class Project include Mongoid::Document field :name, :type => String field :num_users, type: Integer, default: 0 key :name has_and_belongs_to_many :users, class_name: ""User"", inverse_of: :projects # This will not work def name=(projectname) @name = projectname.capitalize endend",Override a Mongoid model's setters and getters
Override model's setters and getters in Mongoid," Is there a way to override a setter or getter for a model in Mongoid? Something like: where the name method can be overwritten without using virtual fields? <code>  class Project include Mongoid::Document field :name, :type => String field :num_users, type: Integer, default: 0 key :name has_and_belongs_to_many :users, class_name: ""User"", inverse_of: :projects # This will not work def name=(projectname) @name = projectname.capitalize endend",Override a Mongoid model's setters and getters
Is there a way to known the current rake task?," Is it possible to know the current rake task within ruby: EditI'm asking about any enviroment|global variable that can be queried about that, because I wanted to make an app smart about rake, not modify the task itself. I'm thinking of making an app behave differently when it was run by rake. <code>  # Rakefiletask :install do MyApp.somemethod(options)end# myapp.rbclass MyApp def somemetod(opts) ## current_task? endend",Is there a way to know the current rake task?
Ruby/Rails: How to determine if one array contains all elements of another array?," Given: I would like to determine if it contains all elements of: In this case the result is false.Are there any built-in Ruby/Rails methods to identify such array inclusion?One way to implement this is: Is there a better, more readable, way? <code>  a1 = [5, 1, 6, 14, 2, 8] a2 = [2, 6, 15] a2.index{ |x| !a1.include?(x) }.nil?",How to determine if one array contains all elements of another array
carrierwave check content_type of uploaded file," I want to create 1 uploader for multiple types of files (images, pdf, video)For each content_type will different actionsHow I can define what content_type of file?For example: <code>  if image? version :thumb do process :proper_resize endelsif video? version :thumb do something endend",CarrierWave: create 1 uploader for multiple types of files
ruby irb | I can't understand how range operetion work," I use irb.I write the code below.""ax""..""bc""I expect""ax""""ay""""az""""ba""bb""""bc""But the result is just""ax""..""bc""How should I correct?Thanks. <code> ",Create a range of strings from end values
I can't understand how range operations work," I use irb.I write the code below.""ax""..""bc""I expect""ax""""ay""""az""""ba""bb""""bc""But the result is just""ax""..""bc""How should I correct?Thanks. <code> ",Create a range of strings from end values
Rails 3.1 Aport trap: 6, When I try to do a rails s on my Rails 3.1 App I am getting: <code>  /Users/Kyle/.rvm/gems/ruby-1.9.2-p290@skateparks/gems/rack-1.3.4/lib/rack/backports/uri/common_192.rb:53: warning: already initialized constant WFKV_/Users/Kyle/.rvm/gems/ruby-1.9.2-p290@skateparks/gems/eventmachine-0.12.10/lib/rubyeventmachine.bundle: [BUG] Segmentation faultruby 1.9.2p290 (2011-07-09 revision 32553) [x86_64-darwin11.1.0]-- control frame ----------c:0038 p:-17557387368028 s:0124 b:0124 l:000123 d:000123 TOP c:0037 p:---- s:0122 b:0122 l:000121 d:000121 CFUNC :requirec:0036 p:0012 s:0118 b:0118 l:000102 d:000117 BLOCK /Users/Kyle/.rvm/gems/ruby-1.9.2-p290@skateparks/gems/activesupport-3.1.0/lib/active_support/dependencies.rb:240c:0035 p:0005 s:0116 b:0116 l:000107 d:000115 BLOCK /Users/Kyle/.rvm/gems/ruby-1.9.2-p290@skateparks/gems/activesupport-3.1.0/lib/active_support/dependencies.rb:223c:0034 p:0045 s:0114 b:0114 l:000113 d:000113 METHOD /Users/Kyle/.rvm/gems/ruby-1.9.2-p290@skateparks/gems/activesupport-3.1.0/lib/active_support/dependencies.rb:640c:0033 p:0041 s:0108 b:0108 l:000107 d:000107 METHOD /Users/Kyle/.rvm/gems/ruby-1.9.2-p290@skateparks/gems/activesupport-3.1.0/lib/active_support/dependencies.rb:223c:0032 p:0019 s:0103 b:0103 l:000102 d:000102 METHOD /Users/Kyle/.rvm/gems/ruby-1.9.2-p290@skateparks/gems/activesupport-3.1.0/lib/active_support/dependencies.rb:240c:0031 p:0150 s:0097 b:0097 l:000096 d:000096 TOP /Users/Kyle/.rvm/gems/ruby-1.9.2-p290@skateparks/gems/eventmachine-0.12.10/lib/eventmachine.rb:66c:0030 p:---- s:0095 b:0095 l:000094 d:000094 FINISHc:0029 p:---- s:0093 b:0093 l:000092 d:000092 CFUNC :requirec:0028 p:0012 s:0089 b:0089 l:000073 d:000088 BLOCK /Users/Kyle/.rvm/gems/ruby-1.9.2-p290@skateparks/gems/activesupport-3.1.0/lib/active_support/dependencies.rb:240c:0027 p:0005 s:0087 b:0087 l:000078 d:000086 BLOCK /Users/Kyle/.rvm/gems/ruby-1.9.2-p290@skateparks/gems/activesupport-3.1.0/lib/active_support/dependencies.rb:223c:0026 p:0045 s:0085 b:0085 l:000084 d:000084 METHOD /Users/Kyle/.rvm/gems/ruby-1.9.2-p290@skateparks/gems/activesupport-3.1.0/lib/active_support/dependencies.rb:640c:0025 p:0041 s:0079 b:0079 l:000078 d:000078 METHOD /Users/Kyle/.rvm/gems/ruby-1.9.2-p290@skateparks/gems/activesupport-3.1.0/lib/active_support/dependencies.rb:223c:0024 p:0019 s:0074 b:0074 l:000073 d:000073 METHOD /Users/Kyle/.rvm/gems/ruby-1.9.2-p290@skateparks/gems/activesupport-3.1.0/lib/active_support/dependencies.rb:240c:0023 p:0083 s:0068 b:0068 l:000067 d:000067 TOP /Users/Kyle/.rvm/gems/ruby-1.9.2-p290@skateparks/gems/thin-1.2.11/lib/thin.rb:7c:0022 p:---- s:0065 b:0065 l:000064 d:000064 FINISHc:0021 p:---- s:0063 b:0063 l:000062 d:000062 CFUNC :requirec:0020 p:0026 s:0059 b:0059 l:000040 d:000058 BLOCK /Users/Kyle/.rvm/gems/ruby-1.9.2-p290@skateparks/gems/bundler-1.0.21/lib/bundler/runtime.rb:68c:0019 p:---- s:0056 b:0056 l:000055 d:000055 FINISHc:0018 p:---- s:0054 b:0054 l:000053 d:000053 CFUNC :eachc:0017 p:0091 s:0051 b:0051 l:000040 d:000050 BLOCK /Users/Kyle/.rvm/gems/ruby-1.9.2-p290@skateparks/gems/bundler-1.0.21/lib/bundler/runtime.rb:66c:0016 p:---- s:0046 b:0046 l:000045 d:000045 FINISHc:0015 p:---- s:0044 b:0044 l:000043 d:000043 CFUNC :eachc:0014 p:0046 s:0041 b:0041 l:000040 d:000040 METHOD /Users/Kyle/.rvm/gems/ruby-1.9.2-p290@skateparks/gems/bundler-1.0.21/lib/bundler/runtime.rb:55c:0013 p:0021 s:0037 b:0037 l:000036 d:000036 METHOD /Users/Kyle/.rvm/gems/ruby-1.9.2-p290@skateparks/gems/bundler-1.0.21/lib/bundler.rb:122c:0012 p:0089 s:0033 b:0033 l:000032 d:000032 TOP /Users/Kyle/Desktop/skateparks-web/config/application.rb:7c:0011 p:---- s:0031 b:0031 l:000030 d:000030 FINISHc:0010 p:---- s:0029 b:0029 l:000028 d:000028 CFUNC :requirec:0009 p:0016 s:0025 b:0025 l:000016 d:000024 BLOCK /Users/Kyle/.rvm/gems/ruby-1.9.2-p290@skateparks/gems/railties-3.1.0/lib/rails/commands.rb:52c:0008 p:---- s:0022 b:0022 l:000021 d:000021 FINISHc:0007 p:---- s:0020 b:0020 l:000019 d:000019 CFUNC :tapc:0006 p:0721 s:0017 b:0017 l:000016 d:000016 TOP /Users/Kyle/.rvm/gems/ruby-1.9.2-p290@skateparks/gems/railties-3.1.0/lib/rails/commands.rb:49c:0005 p:---- s:0012 b:0012 l:000011 d:000011 FINISHc:0004 p:---- s:0010 b:0010 l:000009 d:000009 CFUNC :requirec:0003 p:0061 s:0006 b:0006 l:0000f8 d:000678 EVAL script/rails:6c:0002 p:---- s:0004 b:0004 l:000003 d:000003 FINISHc:0001 p:0000 s:0002 b:0002 l:0000f8 d:0000f8 TOP ----------------------------- Ruby level backtrace information ----------------------------------------script/rails:6:in `<main>'script/rails:6:in `require'/Users/Kyle/.rvm/gems/ruby-1.9.2-p290@skateparks/gems/railties-3.1.0/lib/rails/commands.rb:49:in `<top (required)>'/Users/Kyle/.rvm/gems/ruby-1.9.2-p290@skateparks/gems/railties-3.1.0/lib/rails/commands.rb:49:in `tap'/Users/Kyle/.rvm/gems/ruby-1.9.2-p290@skateparks/gems/railties-3.1.0/lib/rails/commands.rb:52:in `block in <top (required)>'/Users/Kyle/.rvm/gems/ruby-1.9.2-p290@skateparks/gems/railties-3.1.0/lib/rails/commands.rb:52:in `require'/Users/Kyle/Desktop/skateparks-web/config/application.rb:7:in `<top (required)>'/Users/Kyle/.rvm/gems/ruby-1.9.2-p290@skateparks/gems/bundler-1.0.21/lib/bundler.rb:122:in `require'/Users/Kyle/.rvm/gems/ruby-1.9.2-p290@skateparks/gems/bundler-1.0.21/lib/bundler/runtime.rb:55:in `require'/Users/Kyle/.rvm/gems/ruby-1.9.2-p290@skateparks/gems/bundler-1.0.21/lib/bundler/runtime.rb:55:in `each'/Users/Kyle/.rvm/gems/ruby-1.9.2-p290@skateparks/gems/bundler-1.0.21/lib/bundler/runtime.rb:66:in `block in require'/Users/Kyle/.rvm/gems/ruby-1.9.2-p290@skateparks/gems/bundler-1.0.21/lib/bundler/runtime.rb:66:in `each'/Users/Kyle/.rvm/gems/ruby-1.9.2-p290@skateparks/gems/bundler-1.0.21/lib/bundler/runtime.rb:68:in `block (2 levels) in require'/Users/Kyle/.rvm/gems/ruby-1.9.2-p290@skateparks/gems/bundler-1.0.21/lib/bundler/runtime.rb:68:in `require'/Users/Kyle/.rvm/gems/ruby-1.9.2-p290@skateparks/gems/thin-1.2.11/lib/thin.rb:7:in `<top (required)>'/Users/Kyle/.rvm/gems/ruby-1.9.2-p290@skateparks/gems/activesupport-3.1.0/lib/active_support/dependencies.rb:240:in `require'/Users/Kyle/.rvm/gems/ruby-1.9.2-p290@skateparks/gems/activesupport-3.1.0/lib/active_support/dependencies.rb:223:in `load_dependency'/Users/Kyle/.rvm/gems/ruby-1.9.2-p290@skateparks/gems/activesupport-3.1.0/lib/active_support/dependencies.rb:640:in `new_constants_in'/Users/Kyle/.rvm/gems/ruby-1.9.2-p290@skateparks/gems/activesupport-3.1.0/lib/active_support/dependencies.rb:223:in `block in load_dependency'/Users/Kyle/.rvm/gems/ruby-1.9.2-p290@skateparks/gems/activesupport-3.1.0/lib/active_support/dependencies.rb:240:in `block in require'/Users/Kyle/.rvm/gems/ruby-1.9.2-p290@skateparks/gems/activesupport-3.1.0/lib/active_support/dependencies.rb:240:in `require'/Users/Kyle/.rvm/gems/ruby-1.9.2-p290@skateparks/gems/eventmachine-0.12.10/lib/eventmachine.rb:66:in `<top (required)>'/Users/Kyle/.rvm/gems/ruby-1.9.2-p290@skateparks/gems/activesupport-3.1.0/lib/active_support/dependencies.rb:240:in `require'/Users/Kyle/.rvm/gems/ruby-1.9.2-p290@skateparks/gems/activesupport-3.1.0/lib/active_support/dependencies.rb:223:in `load_dependency'/Users/Kyle/.rvm/gems/ruby-1.9.2-p290@skateparks/gems/activesupport-3.1.0/lib/active_support/dependencies.rb:640:in `new_constants_in'/Users/Kyle/.rvm/gems/ruby-1.9.2-p290@skateparks/gems/activesupport-3.1.0/lib/active_support/dependencies.rb:223:in `block in load_dependency'/Users/Kyle/.rvm/gems/ruby-1.9.2-p290@skateparks/gems/activesupport-3.1.0/lib/active_support/dependencies.rb:240:in `block in require'/Users/Kyle/.rvm/gems/ruby-1.9.2-p290@skateparks/gems/activesupport-3.1.0/lib/active_support/dependencies.rb:240:in `require'-- C level backtrace information -------------------------------------------[NOTE]You may have encountered a bug in the Ruby interpreter or extension libraries.Bug reports are welcome.For details: http://www.ruby-lang.org/bugreport.htmlAbort trap: 6,"Rails 3.1 server start fails with ""Abort trap: 6"""
"Ruby: Most concise way to use a variable if it exists, otherwise use default value"," In Ruby, I am trying to write a line that uses a variable if it has been set, otherwise default to some value: I could write this code like this: But this is rather verbose, and I'm trying to write it in the most concise way possible. How can I do this? <code>  myvar = # assign it to ENV['MY_VAR'], otherwise assign it to 'foobar' if ENV['MY_VAR'].is_set? #whatever the function is to check if has been set myvar = ENV['MY_VAR']else myvar = 'foobar'end","Ruby: Most concise way to use an ENV variable if it exists, otherwise use default value"
Ruby - spacing around parentheses," I've recently had some problems getting a path working properly. The solution turned out to be simple but I had an unexpected problem that stopped me getting to it. The following line, included in an erb template, works perfectly: This one doesn't: It seems spacing before the opening parenthesis is not allowed in this case. The error I get is this: Can anybody explain why this causes an error?EDIT: for info, this is Ruby 1.9.2 and Rails 3.0.9, on Windows 7 64-bit <code>  <%= button_to ""Confirm delivery"", delivery_confirm_path( @delivery ) %> <%= button_to ""Confirm delivery"", delivery_confirm_path ( @delivery ) %> /app/views/deliveries/_delivery_buttons.html.erb:22: syntax error,unexpected tLPAREN_ARG, expecting keyword_do or '{' or '('...ivery"", delivery_confirm_path ( @delivery ) );@output_buffer...... ^",Spacing around parentheses in Ruby
wkhtmltopdf RuntimeError (Location of wkhtmltopdf unknown)," I am using Ubuntu 11.04 to develop an app in Ruby on Rails.In the app I need to generate pdf documents. So I am usingthe wicked_pdf and wkhtmltopdf-binary gems.In the development environment in my system everything is working fine.But once I deployed the app in production on CentOS 5.6 using Phusion Passenger, when I try to generate pdfs on the fly its giving me the following error:RuntimeError (Location of wkhtmltopdf unknown)I am using Ruby1.9.2.p136 Rails 3.1.1Any help will be much appreciated....Thanks. <code> ",Rails: wkhtmltopdf RuntimeError (Location of wkhtmltopdf unknown)
Rails 3. How do display two decimal places in edit form?," I have this edit form.But when I store something such as 1.5, I would like to display it as 1.50. How could I do that with the form helper? <%= f.text_field :cost, :class => 'cost' %> <code> ",Rails 3. How to display two decimal places in edit form?
ruby nokogiri remove comments," I have some code that uses Nokogiri and I am trying to get the inner_html without getting the comments. <code>  html = Nokogiri::HTML(open(@sql_scripts_url[1])) #using first value of the arrayhtml.css('td[class=""ms-formbody""]').each do |node| puts node.inner_html # prints commentsend",Remove comments from inner_html
Ruby 1.9 - why can't the block see my variable?," I'm new to Ruby and wondering why I am getting an error in this situation using the 'mail' gem in a simple Sinatra app: This however works fine: I suspect this is something to do with block scope and my misunderstanding of it.  <code>  post ""/email/send"" do @recipient = params[:email] Mail.deliver do to @recipient # throws error as this is undefined from 'server@domain.com' subject 'testing sendmail' body 'testing sendmail' end erb :email_sentend post ""/email/send"" do Mail.deliver do to 'me@domain.com' from 'server@domain.com' subject 'testing sendmail' body 'testing sendmail' end erb :email_sentend",Why can't the Mail block see my variable?
Why can't the block see my variable?," I'm new to Ruby and wondering why I am getting an error in this situation using the 'mail' gem in a simple Sinatra app: This however works fine: I suspect this is something to do with block scope and my misunderstanding of it.  <code>  post ""/email/send"" do @recipient = params[:email] Mail.deliver do to @recipient # throws error as this is undefined from 'server@domain.com' subject 'testing sendmail' body 'testing sendmail' end erb :email_sentend post ""/email/send"" do Mail.deliver do to 'me@domain.com' from 'server@domain.com' subject 'testing sendmail' body 'testing sendmail' end erb :email_sentend",Why can't the Mail block see my variable?
emacs ruby method parameter indentation," I want to make emacs indent ruby method calls like: The closest I can get is: This is using ruby-deep-indent-paren, ruby-deep-indent-paren-style, ruby-deep-arglist all set to nil.Hashes indent how I like... if I could just make method calls indent like hashes I would be happy. Any ideas? <code>  foo( :blah => 'bar', :shibby => 'baz') foo( :blah => 'bar', :shibby => 'baz' )",Emacs Ruby method parameter indentation
Active record find records which created_at bfore today, I want to get all records where the created_at field is less than today (a date).Is there anything like:  <code>  MyTable.find_by_created_at(< 2.days.ago),Active Record - Find records which were created_at before today
Active record find records which created_at before today, I want to get all records where the created_at field is less than today (a date).Is there anything like:  <code>  MyTable.find_by_created_at(< 2.days.ago),Active Record - Find records which were created_at before today
ruby incrementing integer," What causes the error in the following code? or  <code>  ruby -e ""puts 1++""-e:1: syntax error, unexpected $end ruby -e ""x=1; puts x++;""-e:1: syntax error, unexpected ';'",How to increment an integer in Ruby
Creating an empty file in ruby," What is the best way to create an empty file in Ruby?Something similar to the Unix command, touch: <code>  touch file.txt","Creating an empty file in Ruby: ""touch"" equivalent?"
"Creating an empty file in ruby: ""touch"" equivalent?"," What is the best way to create an empty file in Ruby?Something similar to the Unix command, touch: <code>  touch file.txt","Creating an empty file in Ruby: ""touch"" equivalent?"
"Ruby on Rails - What's the difference between colon "":"" and fat arrow ""=>""", What's the difference between colon : and fat arrow => in Ruby? Or when to use what? <code>  :foo => truefoo: true,"What's the difference between colon "":"" and fat arrow ""=>"""
"Ruby - What's the difference between colon "":"" and fat arrow ""=>""", What's the difference between colon : and fat arrow => in Ruby? Or when to use what? <code>  :foo => truefoo: true,"What's the difference between colon "":"" and fat arrow ""=>"""
converting ruby hash keys," I have a Ruby hash which looks like: I would like to convert it to: <code>  { ""id"" => ""123"", ""name"" => ""test"" } { :id => ""123"", :name => ""test"" }",How do I convert a Ruby hash so that all of its keys are symbols?
Formatting datetime to more friendly formats," I'm fairly new to Ruby on Rails. I created a blog using SQLite3, because I am unable to install MySQL, and would like to display the date of creation next to the title.The date of creation is created using a timestamp. As I am new to RoR I created the blog using generate scaffold so I'm not 100% sure how that all works.At the moment, when I display the created_at field, I'm given an ugly format: Is there a way to change this so that it display DD-MM-YYYY HH:MM, or preferably to say ""posted 30 days ago"". I realize the latter would be a lot more tricky. <code>  2011-12-05 14:11:10 UTC",How do I format datetime values to more friendly formats?
How to add different gems to bundle based on different OSes?," I'm developing a Rails app on a Mac, and I'm new to testing, so I just added these gems to my Gemfile: But my production server runs Linux, so even if they aren't grouped in :production, bundler (v1.0.21) still attempts to install them. ...and fails, obviously!extconf.rb:19:in '<main>': Only Darwin (Mac OS X) systems are supported (RuntimeError)Setting RAILS_ENV to production before running bundle install doesn't work.It worked by running bundle install --without development test, but how can these gems be taken into consideration by bundler only based on your OS?Edit: The bundler wiki provides details on how to use platform as a parameter.The same solution is given in bundler issue #663, so I tried: bundle install does not work, but even if we go back to square one and dobundle install --without darwin, the result is 'darwin' is not a valid platform.The available options are: [:ruby, :ruby_18, :ruby_19, :mri, :mri_18, :mri_19, :rbx, :jruby, :mswin, :mingw, :mingw_18, :mingw_19]Any other (elegant) approaches? <code>  group :test, :development do gem 'rspec-rails' gem 'rb-fsevent' gem 'growl'end group :test, :development do gem 'rspec-rails' platforms :darwin do gem 'rb-fsevent' gem 'growl' end end",How to add Mac-specific gems to bundle on Mac but not on Linux?
How to add Mac-only gems to bundle on Mac and not on Linux?," I'm developing a Rails app on a Mac, and I'm new to testing, so I just added these gems to my Gemfile: But my production server runs Linux, so even if they aren't grouped in :production, bundler (v1.0.21) still attempts to install them. ...and fails, obviously!extconf.rb:19:in '<main>': Only Darwin (Mac OS X) systems are supported (RuntimeError)Setting RAILS_ENV to production before running bundle install doesn't work.It worked by running bundle install --without development test, but how can these gems be taken into consideration by bundler only based on your OS?Edit: The bundler wiki provides details on how to use platform as a parameter.The same solution is given in bundler issue #663, so I tried: bundle install does not work, but even if we go back to square one and dobundle install --without darwin, the result is 'darwin' is not a valid platform.The available options are: [:ruby, :ruby_18, :ruby_19, :mri, :mri_18, :mri_19, :rbx, :jruby, :mswin, :mingw, :mingw_18, :mingw_19]Any other (elegant) approaches? <code>  group :test, :development do gem 'rspec-rails' gem 'rb-fsevent' gem 'growl'end group :test, :development do gem 'rspec-rails' platforms :darwin do gem 'rb-fsevent' gem 'growl' end end",How to add Mac-specific gems to bundle on Mac but not on Linux?
What is Enumerator object?," I have an attributes array as follows, When i do this, i get the following output in terminal Wondering why am I getting an enumerator object as output? Thanks in advance.EDIT:Please note that instead of attributes[-1].gsub(""Photo:"", """"), I am doing attributes[-1].gsub(""Photo:"") So would like to know why enumerator object has returned here( I was expecting an error message) and what is going on.?Ruby - 1.9.2Rails - 3.0.7 <code>  attributes = [""test, 2011"", ""photo"", ""198.1 x 198.1 cm"", ""Photo: Manu PK Full Screen""] artist = attributes[-1].gsub(""Photo:"")p artist #<Enumerator: ""Photo: Manu PK Full Screen"":gsub(""Photo:"")>",What is Enumerator object? (Created with String#gsub)
What is Enumerator object? (Created with String#gsub)," I have an attributes array as follows, When i do this, i get the following output in terminal Wondering why am I getting an enumerator object as output? Thanks in advance.EDIT:Please note that instead of attributes[-1].gsub(""Photo:"", """"), I am doing attributes[-1].gsub(""Photo:"") So would like to know why enumerator object has returned here( I was expecting an error message) and what is going on.?Ruby - 1.9.2Rails - 3.0.7 <code>  attributes = [""test, 2011"", ""photo"", ""198.1 x 198.1 cm"", ""Photo: Manu PK Full Screen""] artist = attributes[-1].gsub(""Photo:"")p artist #<Enumerator: ""Photo: Manu PK Full Screen"":gsub(""Photo:"")>",What is Enumerator object? (Created with String#gsub)
Assigning ID's in seed data," I would like to seed my Products and assign them to a specific User and Store.Product.rb Note: Store belongs_to Business (:business_name)Seed.rbThis is my basic setup: I attempted these but they did not work: Is there a way to set the ID's so I can associate my Products to a Store and User?UPDATE -I have tried the answers below and still came out unsuccessful. Does anyone know of another way to do this? <code>  class Product < ActiveRecord::Base belongs_to :user belongs_to :store def product_store=(id) self.store_id = id endend user = User.create(:username => 'user', :email => 'user2@email.com') store = Store.create(:business_name => 'store', :address => 'Japan') # This gives random ID's ranging from 1 to 4425!?user.products.create([{:name => ""Apple"", :product_store => Store.find_by_address('San Francisco, USA')}])# This gives me undefined method 'walmart'. user.store.products.create([ {:name => ""Apple""} ])",How do I seed a belongs_to association?
Assigning ID's along with a user in seed data," I would like to seed my Products and assign them to a specific User and Store.Product.rb Note: Store belongs_to Business (:business_name)Seed.rbThis is my basic setup: I attempted these but they did not work: Is there a way to set the ID's so I can associate my Products to a Store and User?UPDATE -I have tried the answers below and still came out unsuccessful. Does anyone know of another way to do this? <code>  class Product < ActiveRecord::Base belongs_to :user belongs_to :store def product_store=(id) self.store_id = id endend user = User.create(:username => 'user', :email => 'user2@email.com') store = Store.create(:business_name => 'store', :address => 'Japan') # This gives random ID's ranging from 1 to 4425!?user.products.create([{:name => ""Apple"", :product_store => Store.find_by_address('San Francisco, USA')}])# This gives me undefined method 'walmart'. user.store.products.create([ {:name => ""Apple""} ])",How do I seed a belongs_to association?
Assigning ID's in seed data," I would like to seed my Products and assign them to a specific User and Store.Product.rb Note: Store belongs_to Business (:business_name)Seed.rbThis is my basic setup: I attempted these but they did not work: Is there a way to set the ID's so I can associate my Products to a Store and User?UPDATE -I have tried the answers below and still came out unsuccessful. Does anyone know of another way to do this? <code>  class Product < ActiveRecord::Base belongs_to :user belongs_to :store def product_store=(id) self.store_id = id endend user = User.create(:username => 'user', :email => 'user2@email.com') store = Store.create(:business_name => 'store', :address => 'Japan') # This gives random ID's ranging from 1 to 4425!?user.products.create([{:name => ""Apple"", :product_store => Store.find_by_address('San Francisco, USA')}])# This gives me undefined method 'walmart'. user.store.products.create([ {:name => ""Apple""} ])",How do I seed a belongs_to association?
Assigning ID's in seed data with user," I would like to seed my Products and assign them to a specific User and Store.Product.rb Note: Store belongs_to Business (:business_name)Seed.rbThis is my basic setup: I attempted these but they did not work: Is there a way to set the ID's so I can associate my Products to a Store and User?UPDATE -I have tried the answers below and still came out unsuccessful. Does anyone know of another way to do this? <code>  class Product < ActiveRecord::Base belongs_to :user belongs_to :store def product_store=(id) self.store_id = id endend user = User.create(:username => 'user', :email => 'user2@email.com') store = Store.create(:business_name => 'store', :address => 'Japan') # This gives random ID's ranging from 1 to 4425!?user.products.create([{:name => ""Apple"", :product_store => Store.find_by_address('San Francisco, USA')}])# This gives me undefined method 'walmart'. user.store.products.create([ {:name => ""Apple""} ])",How do I seed a belongs_to association?
Assigning ID's in seed data not working?," I would like to seed my Products and assign them to a specific User and Store.Product.rb Note: Store belongs_to Business (:business_name)Seed.rbThis is my basic setup: I attempted these but they did not work: Is there a way to set the ID's so I can associate my Products to a Store and User?UPDATE -I have tried the answers below and still came out unsuccessful. Does anyone know of another way to do this? <code>  class Product < ActiveRecord::Base belongs_to :user belongs_to :store def product_store=(id) self.store_id = id endend user = User.create(:username => 'user', :email => 'user2@email.com') store = Store.create(:business_name => 'store', :address => 'Japan') # This gives random ID's ranging from 1 to 4425!?user.products.create([{:name => ""Apple"", :product_store => Store.find_by_address('San Francisco, USA')}])# This gives me undefined method 'walmart'. user.store.products.create([ {:name => ""Apple""} ])",How do I seed a belongs_to association?
"How to use Array#rand(n, random: rng) syntax?"," The documentation for Array#sample says it can take an rng: If rng is given, it will be used as the random number generator.How can a range function as a random number generator, or why is such thing useful? Also the hash form suggests there are other options, but I can't find anything about them. Trying out [1,2,3,4,5].sample(3) behaves just like [1,2,3,4,5].sample(3, random: 1..2). <code> ","How to use Array#sample(n, random: rng) syntax?"
"Accessing ssl site on windows fails, on mac works with ruby mechanize"," This is the code I'm using to connect to the SSL site. I""m using using Ruby 1.9.3 and Mechanize 2.1pre1 + dependencies. On Mac the above code works and returns the page. On windows 7 running the same versions it gives me the following error: Reverting to Mechanize 2.0.1 seems to solve this problem, but I then get plagued with the too many connections reset by peer problem. Thus that is not a solution.I've tried doing a.verify_mode = false, but that does not do anything. I have read that you can turn off SSL verification by using: How can I turn it off in Mechanize ? Why am I only getting this error on Windows ? <code>  require 'mechanize'a = Mechanize.newpage = a.get 'https://site.com' OpenSSL::SSL::SSLError: SSL_connect returned=1 errno=0 state=SSLv3read server certificate B: certificate verify failed open(uri,:ssl_verify_mode => OpenSSL::SSL::VERIFY_NONE)","Why does accessing a SSL site with Mechanize on Windows fail, but on Mac work?"
Storing image height with CarrierWave," I need the ability to put the processed image's dimensions.I have in my ImageUploader class: Is there a way that I could get the image's dimensions similar to this? <code>  version :post do process :resize_to_fit => [200, nil]end height = @picture.image_height(:post)",Retrieving image height with CarrierWave
Retreiving image height with CarrierWave," I need the ability to put the processed image's dimensions.I have in my ImageUploader class: Is there a way that I could get the image's dimensions similar to this? <code>  version :post do process :resize_to_fit => [200, nil]end height = @picture.image_height(:post)",Retrieving image height with CarrierWave
what do assigns," I am currently attempt to learn Ruby on Rails, and the testing framework RSpec. What does assigns do in this RSpec test? <code>  describe ""GET index"" do it ""assigns all mymodel as @mymodel"" do mymodel = Factory(:mymodel) get :index assigns(:mymodels).should eq([mymodel]) end end","What does ""assigns"" do in Ruby on Rails?"
"what does ""assigns"""," I am currently attempt to learn Ruby on Rails, and the testing framework RSpec. What does assigns do in this RSpec test? <code>  describe ""GET index"" do it ""assigns all mymodel as @mymodel"" do mymodel = Factory(:mymodel) get :index assigns(:mymodels).should eq([mymodel]) end end","What does ""assigns"" do in Ruby on Rails?"
remove auto generated id form_for id rails 3.1," I have this form_for: That generate the next code html: If I have many forms in a same page is not a html valid with the same id.The id for form_for generate id=""new_comment""The id for textarea generate id=""comment_content""With so many forms in a same page is not valid html.How can I change the id autogenerate by form_for method helper from rails 3.1? <code>  <%= form_for [post, Comment.new,], :remote => true do |f| %><%= f.text_area :content, :cols =>10, :rows => 1%><% end %><%= f.submit :class => ""input_comment"" %> <form method=""post"" id=""new_comment"" data-remote=""true"" class=""new_comment"" action=""/post/4efcda9e1d41c82486000077/comments"" accept-charset=""UTF-8""><div style=""margin:0;padding:0;display:inline""><input type=""hidden"" value="""" name=""utf8""><input type=""hidden"" value=""ctVfDF/O4FIR91I7bC5MVezQmutOCkX3dcXe73uNPZY="" name=""authenticity_token""><textarea rows=""1"" name=""comment[content]"" id=""comment_content"" cols=""10""></textarea><input type=""submit"" value=""Create Comment"" name=""commit"" class=""input_comment""></form>",Change html form id generated by form_for rails 3.1
How does the magic comment ( # Encoding: utf-8 ) in ruby works?, How does the magic comment in ruby works? I am talking about: Is this a preprocessing directive? Are there other uses of this type of construction? <code>  # Encoding: utf-8,How does the magic comment ( # Encoding: utf-8 ) in ruby work?
Who to query some mysql database from Rails app without models?," How can I execute a SQL query from a Rails application to a MySQL database? My application uses Postgres as a primary database, but I need to read some information from a secondary MySQL database. I can't create models because the MySQL database has more than 100 tables, named in an incompatible way for every table. Can it be done without ActiveRecord or some other way? <code> ",How can I query a MySQL database from a Rails app without models?
"Generate xml with Nokogiri without ""<?xml version=..."""," Possible Duplicate: Print an XML document without the XML header line at the top I have a problem with Nokogiri::XML::Builder. I am generating XML wth this code: And the result is: How can I remove: from my XML? <code>  builder = Nokogiri::XML::Builder.new do request { data '1' }end <?xml version=""1.0"" encoding=""UTF-8""?><request><data>1</data></request> <?xml version=""1.0"" encoding=""UTF-8""?>","How can I generate XML with Nokogiri without ""<?xml version=...""?"
How do I redirect back to a page I'm currently on in ruby on rails," In my users photo album page they see photos they have uploaded and each photo has a 'make default' link on it.When the user clicks make default, then the id of the photo is stored in the photo_id column of my profiles table.The issue is redirecting them back to: Is there a way I can redirect back to the photo album using the id of the photo that has just been set as the default? Can Rails find what album I want to redirect to just by looking at the id of a photo, as a photo belongs to a photo album, and a photo album has many photos?I have the following tables in my database:User(s): has one profile, has many PhotoAlbumsProfile(s): belongs to userPhotoAlbum(s): belongs to user, has many photosPhoto(s): belongs to PhotoAlbumController action: My routes: <code>  localhost:3000/settings/photo_gallery/:id def set_default_profile_photo photo = Profile.find_by_user_id(current_user.id) photo.photo_id = params[:photo_id] photo.save redirect_to ""**HERE IS WHERE I'D LIKE TO REDIRECT TO THE PHOTOALBUM THE PHOTO IS IN**"" flash[:success] = ""Default photo set!""end users GET /users(.:format) {:action=>""index"", :controller=>""users""} POST /users(.:format) {:action=>""create"", :controller=>""users""} new_user GET /users/new(.:format) {:action=>""new"", :controller=>""users""} edit_user GET /users/:id/edit(.:format) {:action=>""edit"", :controller=>""users""} user GET /users/:id(.:format) {:action=>""show"", :controller=>""users""} PUT /users/:id(.:format) {:action=>""update"", :controller=>""users""} DELETE /users/:id(.:format) {:action=>""destroy"", :controller=>""users""} sessions GET /sessions(.:format) {:action=>""index"", :controller=>""sessions""} POST /sessions(.:format) {:action=>""create"", :controller=>""sessions""} new_session GET /sessions/new(.:format) {:action=>""new"", :controller=>""sessions""} edit_session GET /sessions/:id/edit(.:format) {:action=>""edit"", :controller=>""sessions""} session GET /sessions/:id(.:format) {:action=>""show"", :controller=>""sessions""} PUT /sessions/:id(.:format) {:action=>""update"", :controller=>""sessions""} DELETE /sessions/:id(.:format) {:action=>""destroy"", :controller=>""sessions""} passwords GET /passwords(.:format) {:action=>""index"", :controller=>""passwords""} POST /passwords(.:format) {:action=>""create"", :controller=>""passwords""} new_password GET /passwords/new(.:format) {:action=>""new"", :controller=>""passwords""} edit_password GET /passwords/:id/edit(.:format) {:action=>""edit"", :controller=>""passwords""} password GET /passwords/:id(.:format) {:action=>""show"", :controller=>""passwords""} PUT /passwords/:id(.:format) {:action=>""update"", :controller=>""passwords""} DELETE /passwords/:id(.:format) {:action=>""destroy"", :controller=>""passwords""} profiles GET /profiles(.:format) {:action=>""index"", :controller=>""profiles""} POST /profiles(.:format) {:action=>""create"", :controller=>""profiles""} new_profile GET /profiles/new(.:format) {:action=>""new"", :controller=>""profiles""} edit_profile GET /profiles/:id/edit(.:format) {:action=>""edit"", :controller=>""profiles""} profile GET /profiles/:id(.:format) {:action=>""show"", :controller=>""profiles""} PUT /profiles/:id(.:format) {:action=>""update"", :controller=>""profiles""} DELETE /profiles/:id(.:format) {:action=>""destroy"", :controller=>""profiles""} emails GET /emails(.:format) {:action=>""index"", :controller=>""emails""} POST /emails(.:format) {:action=>""create"", :controller=>""emails""} new_email GET /emails/new(.:format) {:action=>""new"", :controller=>""emails""} edit_email GET /emails/:id/edit(.:format) {:action=>""edit"", :controller=>""emails""} email GET /emails/:id(.:format) {:action=>""show"", :controller=>""emails""} PUT /emails/:id(.:format) {:action=>""update"", :controller=>""emails""} DELETE /emails/:id(.:format) {:action=>""destroy"", :controller=>""emails""} root / {:controller=>""users"", :action=>""new""} success /success(.:format) {:action=>""success"", :controller=>""users""} login /login(.:format) {:action=>""new"", :controller=>""sessions""} logout /logout(.:format) {:action=>""destroy"", :controller=>""sessions""} reset_password /reset_password(.:format) {:action=>""new"", :controller=>""passwords""} setup_new_password /setup_new_password(.:format) {:action=>""edit"", :controller=>""passwords""} settings /settings(.:format) {:action=>""settings"", :controller=>""users""} settings_account /settings/account(.:format) {:controller=>""users"", :action=>""account""} settings_edit_profile /settings/edit_profile(.:format) {:controller=>""profiles"", :action=>""edit_profile""} /:username(.:format) {:controller=>""users"", :action=>""show""} change_password /change_password(.:format) {:action=>""change_password"", :controller=>""users""}profile_photo_set_default /profile_photo/set_default(.:format) {:controller=>""photo_albums"", :action=>""set_default_profile_photo""} album_photo_set_default /album_photo/set_default(.:format) {:controller=>""photo_albums"", :action=>""set_default_album_photo""} photo_albums GET /settings/photo_gallery(.:format) {:action=>""index"", :controller=>""photo_albums""} POST /settings/photo_gallery(.:format) {:action=>""create"", :controller=>""photo_albums""} new_photo_album GET /settings/photo_gallery/new(.:format) {:action=>""new"", :controller=>""photo_albums""} edit_photo_album GET /settings/photo_gallery/:id/edit(.:format) {:action=>""edit"", :controller=>""photo_albums""} photo_album GET /settings/photo_gallery/:id(.:format) {:action=>""show"", :controller=>""photo_albums""} PUT /settings/photo_gallery/:id(.:format) {:action=>""update"", :controller=>""photo_albums""} DELETE /settings/photo_gallery/:id(.:format) {:action=>""destroy"", :controller=>""photo_albums""} photos GET /settings/photo_gallery/photos(.:format) {:action=>""index"", :controller=>""photos""} POST /settings/photo_gallery/photos(.:format) {:action=>""create"", :controller=>""photos""} new_photo GET /settings/photo_gallery/photos/new(.:format) {:action=>""new"", :controller=>""photos""} edit_photo GET /settings/photo_gallery/photos/:id/edit(.:format) {:action=>""edit"", :controller=>""photos""} photo GET /settings/photo_gallery/photos/:id(.:format) {:action=>""show"", :controller=>""photos""} PUT /settings/photo_gallery/photos/:id(.:format) {:action=>""update"", :controller=>""photos""} DELETE /settings/photo_gallery/photos/:id(.:format) {:action=>""destroy"", :controller=>""photos""}",How do I redirect back to a page I'm currently on?
"Ruby method_missing, puts and to_ary"," I'm learning metaprogramming in Ruby and am just trying out defining missing methods via method_missing and define_method. I'm getting some unexpected behaviour and am wondering if anyone can explain this. Here is my class: Now, this code: Produces the output: What I don't get is the last part: why is Ruby calling to_ary in a call to puts? Why would Ruby try to convert my object into an array just to print it?I've Googled around and found these related links: http://tenderlovemaking.com/2011/06/28/til-its-ok-to-return-nil-from-to_ary/http://yehudakatz.com/2010/01/02/the-craziest-fing-bug-ive-ever-seen/These also talk about method_missing and to_ary gotchas, but not specifically about why puts would call to_ary.I should also mention that the behaviour does not change when I define a to_s, e.g. The output of ""puts x"" is then: <code>  class X def method_missing(m, *args, &block) puts ""method #{m} not found. Defining it."" self.class.send :define_method, m do puts ""hi from method #{m}"" end puts ""defined method #{m}"" end end x = X.newx.some_methodputsx.some_methodputsputs x method some_method not found. Defining it.defined method some_methodhi from method some_methodmethod to_ary not found. Defining it.defined method to_ary#<X:0x007fcbc38e5030> def to_s ""I'm an instance of X""end method to_ary not found. Defining it.defined method to_aryI'm an instance of X",Ruby: why does puts call to_ary?
Ruby: puts calls to_ary?," I'm learning metaprogramming in Ruby and am just trying out defining missing methods via method_missing and define_method. I'm getting some unexpected behaviour and am wondering if anyone can explain this. Here is my class: Now, this code: Produces the output: What I don't get is the last part: why is Ruby calling to_ary in a call to puts? Why would Ruby try to convert my object into an array just to print it?I've Googled around and found these related links: http://tenderlovemaking.com/2011/06/28/til-its-ok-to-return-nil-from-to_ary/http://yehudakatz.com/2010/01/02/the-craziest-fing-bug-ive-ever-seen/These also talk about method_missing and to_ary gotchas, but not specifically about why puts would call to_ary.I should also mention that the behaviour does not change when I define a to_s, e.g. The output of ""puts x"" is then: <code>  class X def method_missing(m, *args, &block) puts ""method #{m} not found. Defining it."" self.class.send :define_method, m do puts ""hi from method #{m}"" end puts ""defined method #{m}"" end end x = X.newx.some_methodputsx.some_methodputsputs x method some_method not found. Defining it.defined method some_methodhi from method some_methodmethod to_ary not found. Defining it.defined method to_ary#<X:0x007fcbc38e5030> def to_s ""I'm an instance of X""end method to_ary not found. Defining it.defined method to_aryI'm an instance of X",Ruby: why does puts call to_ary?
Is der any reporting tool or Gem in Ruby on Rails," I am looking for a reporting gem or tool in ruby on rails. its for a e-commerce app, where I need to generate lot of data like sales report, marketing reporting,etc, I want to keep it more generic and open so that the users can get any kind of report.  <code> ",Is there any reporting tool or a gem in Ruby on Rails
Is there any reporting tool or Gem in Ruby on Rails," I am looking for a reporting gem or tool in ruby on rails. its for a e-commerce app, where I need to generate lot of data like sales report, marketing reporting,etc, I want to keep it more generic and open so that the users can get any kind of report.  <code> ",Is there any reporting tool or a gem in Ruby on Rails
Is There any reporting tool or Gem in Ruby on Rails," I am looking for a reporting gem or tool in ruby on rails. its for a e-commerce app, where I need to generate lot of data like sales report, marketing reporting,etc, I want to keep it more generic and open so that the users can get any kind of report.  <code> ",Is there any reporting tool or a gem in Ruby on Rails
Ruby adding encoded query values to a URL," I am looking for a convenient and functional way to add encoded values to a URL query string in Ruby.Currently, I have: This isn't what I'm looking for, because I need to get""http://mydomain.example/tv?show=Rosie%20%26%20Jim"", so that the show= value is not truncated. Does Open::URI have another method that would do this? If not, can it be done with any other standard Ruby, or gem? <code>  require 'open-uri'u = URI::HTTP.new(""http"", nil, ""mydomain.example"", nil, nil, ""/tv"", nil, ""show="" + URI::encode(""Rosie & Jim""), nil) p u.to_s # => ""http://mydomain.example/tv?show=Rosie%20&%20Jim""",How do I add encoded query values to a URL?
Ruby assignment operater with multiple arguments," I have a custom class and want to be able to override the assignment operator.Here is an example: This currently doesn't work as intended. upon using [:mystrategy, :backward] gets assigned to the strategy variable and the direction variable remains :forward.The important part is that I want to be able to assign a standard value to the direction parameter.Any clues to make this work are highly appreciated. <code>  class MyArray < Array attr_accessor :direction def initialize @direction = :forward endendclass History def initialize @strategy = MyArray.new end def strategy=(strategy, direction = :forward) @strategy << strategy @strategy.direction = direction endend h = History.newh.strategy = :mystrategy, :backward",Setter method (assignment) with multiple arguments
Issue installing the Nokogiri Gem in Mac OS X 10.5.8," I'm trying to install the Nokogiri gem under an RVM managed Ruby 1.8.7 installation in OS X Leopard (10.5.8).I'm getting the following error: I have the latest libxml2 installed via homebrew (brew install libxml2), so I don't know what else to try.Update:I tried the instructions from the Nokogiri website and I can't get the Nokogiri gem installation to recognize libxml2.Per the instructionsI installed and linked libxml2 and libxslt via homebrew: The error message has changed, but the Nokogiri installation complains that libxml2 is missing: The installed libxml2 version is 2.7.8.Update update:I tried installing the iconv library from homebrew to see if I could solve the error checking for iconv_open() in iconv.h... no, so I ran the commands: And after finishing the installation, I tried to install the nokogiri gem again, to get this error message, where the installer now complains that libiconv is missing I'm clueless. <code>  Building native extensions. This could take a while...ERROR: Error installing nokogiri: ERROR: Failed to build gem native extension. /Users/user/.rvm/rubies/ruby-1.8.7-p352/bin/ruby extconf.rbchecking for libxml/parser.h... yeschecking for libxslt/xslt.h... yeschecking for libexslt/exslt.h... yeschecking for iconv_open() in iconv.h... nochecking for iconv_open() in -liconv... yeschecking for xmlParseDoc() in -lxml2... yeschecking for xsltParseStylesheetDoc() in -lxslt... yeschecking for exsltFuncRegister() in -lexslt... yeschecking for xmlHasFeature()... no-----The function 'xmlHasFeature' is missing from your installation of libxml2. Likely this means that your installed version of libxml2 is old enough that nokogiri will not work well. To get around this problem, please upgrade your installation of libxml2.Please visit http://nokogiri.org/tutorials/installing_nokogiri.html for more help!*** extconf.rb failed *** brew install libxml2 libxsltbrew link libxml2 libxsltgem install nokogiri ...checking for libxml/parser.h... yeschecking for libxslt/xslt.h... yeschecking for libexslt/exslt.h... yeschecking for iconv_open() in iconv.h... nochecking for iconv_open() in -liconv... yeschecking for xmlParseDoc() in -lxml2... no-----libxml2 is missing. please visit http://nokogiri.org/tutorials/installing_nokogiri.html for help with installing dependencies brew install libiconvbrew link libiconv hecking for libxml/parser.h... yeschecking for libxslt/xslt.h... yeschecking for libexslt/exslt.h... yeschecking for iconv_open() in iconv.h... nochecking for iconv_open() in -liconv... no-----libiconv is missing. please visit http://nokogiri.org/tutorials/installing_nokogiri.html for help with installing dependencies.-----",Issue installing the Nokogiri gem in Mac OS X 10.5.8
How to increase the number of decimal digits when converting BigDecimal to String?," I am facing a problem with BigDecimal.This code: outputs: I want to increase the number of digits.In JAVA, I could do: The output is: I looked at BigDecimal documentation, and tried to set the digits when instantiating the number, then tried to set the limit with the BigDecimal.limit, but I couldn't print more than 18 digits.What am I missing?I am running ruby 1.9.3p0 (2011-10-30) [i386-mingw32] on Windows 7 64bits <code>  x = BigDecimal.new('1.0') / 7puts x.to_s 0.142857142857142857E0 BigDecimal n = new BigDecimal(""1"");BigDecimal d = new BigDecimal(""7"");n = n.divide(d,200, RoundingMode.HALF_UP);System.out.println(n); 0.1428571428571428571428571428571428571428571428571428571428... (200 digits)",How can I increase the number of decimal digits when converting BigDecimal to String?
what is Post.all.map(&:id) means," Possible Duplicate: What does map(&:name) mean in Ruby? will return What does map(&:id) mean? Especially the &. <code>  Post.all.map(&:id) => [1, 2, 3, 4, 5, 6, 7, ................] ",What does Post.all.map(&:id) mean?
Adding and subtracting Weeks in Ruby," I am trying to do some date math based on the week number of a given year. For example: Now that I know what the current week is, I want to figure out what the next week and previous week are. I need to take the year (2012) and the week number (10) and turn it back into a date object so I can calculate the value for the next/previous week. How can I do this? <code>  date = Date.today # Monday, March 5, 2012puts date.cwyear # 2012puts date.cweek # 10 (10th week of 2012)",Finding the date for a given week number
Regexp: Any single character except sequence," [^abc] Any single character except: a, b, or cBut how can I make regex for any characters except sequence abcSo, something like that Will return ""Hello "" and "" awesome world"".PS: And it is not about splitting the string <code>  ""Hello abc awesome world"".scan /[^(abc)]+/",Regexp: Any characters except sequence
How to obtain the output in better way in ruby?," I want to output an array of hashes with the name being unique to all hashes. How would I go about doing this using ruby?This is my input: I want the output to look like this: <code>  input = [{:name => ""Kutty"", :score => 2, :some_key => 'value', ...}, {:name => ""Kutty"", :score => 4, :some_key => 'value', ...}, {:name => ""Baba"", :score => 5, :some_key => 'value', ...}] output = [{:name => ""Kutty"", :score => 4, :some_key => 'value', ...}, {:name => ""Baba"", :score => 5, :some_key => 'value', ...}]",Remove duplicate from an array in ruby
Number of days between two Time instances in ruby, How can I determine the number of days between two Time instances in Ruby? I'd like to determine the number of days in time_difference (I'm not worried about fractions of days. Rounding up or down is fine). <code>  > earlyTime = Time.at(123)> laterTime = Time.now> time_difference = laterTime - earlyTime,Number of days between two Time instances
Why does Ruby 1.9.2 give a syntax error for: f(true and f(false))?," I am puzzled that Ruby 1.9 (JRuby 1.6.6 (RUBY_VERSION == ""1.9.2"") and Ruby 1.9.3-p125) give a syntax error for puts(true and false).I don't know why - what is the problem here? How would I write that piece of code correctly? puts(true && false) works but is there a solution with and?Example irb session: Thanks to Mladen Jablanovi for simplifying the example. The old example was f(true and f(false)). <code>  1.9.3p125 :001 > puts(true and false)SyntaxError: (irb):1: syntax error, unexpected keyword_and, expecting ')'puts(true and false) ^ from /home/fr/.rvm/rubies/ruby-1.9.3-p125/bin/irb:16:in `<main>'1.9.3p125 :002 > puts(true && false)false => nil ",Why does Ruby 1.9.2 give a syntax error for: puts(true and false)?
Ruby - remove a character from array element," I have an array like this: and I'd like to either remove the commas, \"" or replace that with &#34 so that the array looks like this: or this: The reason is that I'm trying to pass that array from Ruby to JavaScript, but I keep getting an ""Unterminated string constant error"" and I just can't figure out a way around it!This is what I'm using to pass the info to JavaScript: <code>  [""ee"", ""3/4\"""", ""22\"""", ""22\""""] [""ee"", ""3/4"", ""22"", ""22""] [""ee"", ""3/4&#34"", ""22&#34"", ""22&#34""] cut_list=""from_ruby_cut(\""""+c[1]+""\"")""",How do I remove a character from array element?
Creating a hash from an array of keys in Ruby," I have looked at other questions in SO and did not find an answer for my specific problem.I have an array: I want to convert this array to a hash where the array elements become the keys in the hash and all they the same value say 1. i.e hash should be: <code>  a = [""a"", ""b"", ""c"", ""d""] {""a"" => 1, ""b"" => 1, ""c"" => 1, ""d"" => 1}",Create a hash from an array of keys
Create Hash from an array of keys," I have looked at other questions in SO and did not find an answer for my specific problem.I have an array: I want to convert this array to a hash where the array elements become the keys in the hash and all they the same value say 1. i.e hash should be: <code>  a = [""a"", ""b"", ""c"", ""d""] {""a"" => 1, ""b"" => 1, ""c"" => 1, ""d"" => 1}",Create a hash from an array of keys
Ruby - Change string in a date format to another format," I have a string like this (YYYYMMDD): 20120225And I want to have a string like this (MM/DD/YYYY): 02/25/2012What's a good way of doing this in Ruby? I have thought about converting the first string to a Date, and then change the format. Or just treating the string and getting the parts I want and build the new string. <code> ",Change string in a date format to another format
Why doesn't nil:NilClass just return nil for undefined methods?," In other languages like (objective-c for example) calling a method on a nil object fails silently and returns nil but in ruby you get errors like this... which (for me) results in code like this: or Which all seems backwards and weird.Two questionsWhat am I doing wrong, what's the correct way to deal with having the possibility of a nil objectWhat kinds of awful awful things would happen if I just monkey patched the nil object to return nil for missing_methods?IE: <code>  undefined method `some_method' for nil:NilClass if some_object && some_object.cool? # instead of if some_object.cool? # do some cool stuffend some_object.do_awsome_thing if some_object class NilClass def missing_method nil endend",Can I monkey patch NilClass to return nil for missing methods?
Geting firs image in gif using carrierwave," Im using carrier wave to upload gifs which works just fine, the problem comes when i try to generate the thumb version and converting the gif into a jpeg with only the first image in the gif as the thumb, i get an error: RequestParameters: Here's the code im using to generate the thumb: Hope you guys can help and thanks in advance. <code>  LocalJumpError in ImagesController#createno block given (yield)app/controllers/images_controller.rb:21:in `new'app/controllers/images_controller.rb:21:in `create' {""utf8""=>"""",""authenticity_token""=>""lPEjP1WtPxFdizL2/FAWGHzOZPtecb5nKzKO8dg5ZdE="",""image""=>{""image""=>#<ActionDispatch::Http::UploadedFile:0x007ff5d4cdc720 @original_filename=""some-file-name.gif"",@content_type=""image/gif"",@headers=""Content-Disposition: form-data; name=\""image[image]\""; filename=\""some-file-name.gif\""\r\nContent-Type: image/gif\r\n"",@tempfile=#<File:/var/folders/c8/1t7w8nln4b3bvs4_nv2cyn2m0000gt/T/RackMultipart20120326-5101-gcyvk0>>,""remote_image_url""=>"""",""title""=>""The red panda"",""nsw""=>""0""},""commit""=>""Roll GIF""} version :thumb do process :resize_to_limit => [200, 200] process :convert => 'jpg'end",Getting first image in gif using carrierwave
Python's decode equivalent in ruby," Possible Duplicate: Hex to binary in ruby In Python, I can do the following: If I have to achieve the same output in ruby which call could I make? I tried to_s(16), which doesn't seem to work. I need the output to be in that specific format, so I expect to get the following: <code>  >>> str = '000E0000000000'>>> str.decode('hex')'\x00\x0e\x00\x00\x00\x00\x00' ""\\x00\\x0e\\x00\\x00\\x00\\x00\\x00""",Decode hexadecimal string in Ruby
Is it possible to get the line number that threw an error in Rails?," Is there a way to get the line number of the statement where the error occurred? <code>  begin . . . # error occurs here . . .rescue => error puts ""Error: "" + error.messageend",Is it possible to get the line number that threw an error?
About changing Binding of a Proc in Ruby," I have this code: I just want to access a by the lambda and a special scope which has defined a already somewhere like inside some_function in the example, or just soon later in the same scope as: Then I found when calling l, it is still using its own binding but not the new one where it was called.And then I tried to use it as: But this also failed, it is strange that I can't explain why.I know the one of the solution is using eval, in which I could special a binding and executing some code in text, but I really do not want to use as so.And, I know it is able to use a global variable or instance variable. However, actually my code is in a deeper embedded environment, so I don't want to break the completed parts if not quite necessary.I have referred the Proc class in the documentation, and I found a function names binding that referred to the Proc's context. While the function only provided a way to access its binding but cannot change it, except using Binding#eval. It evaluate text also, which is exactly what I don't like to do.Now the question is, do I have a better (or more elegant) way to implement this? Or using eval is already the regular manner?Edit to reply to @Andrew:Okay, this is a problem which I met when I'm writing a lexical parser, in which I defined a array with fixed-number of items, there including at least a Proc and a regular expression. My purpose is to matching the regular expressions and execute the Procs under my special scope, where the Proce will involved some local variables that should be defined later. And then I met the problem above.Actually I suppose it is not same completely to that question, as mine is how to pass in binding to a Proc rather than how to pass it out.@Niklas:Got your answer, I think that is what exactly I want. It has solved my problem perfectly. <code>  l = lambda { a } def some_function a = 1 end l = lambda { a } a = 1 l.call l.instance_eval do a = 1 call end",Change the binding of a Proc in Ruby
Changing the binding of a Proc in Ruby," I have this code: I just want to access a by the lambda and a special scope which has defined a already somewhere like inside some_function in the example, or just soon later in the same scope as: Then I found when calling l, it is still using its own binding but not the new one where it was called.And then I tried to use it as: But this also failed, it is strange that I can't explain why.I know the one of the solution is using eval, in which I could special a binding and executing some code in text, but I really do not want to use as so.And, I know it is able to use a global variable or instance variable. However, actually my code is in a deeper embedded environment, so I don't want to break the completed parts if not quite necessary.I have referred the Proc class in the documentation, and I found a function names binding that referred to the Proc's context. While the function only provided a way to access its binding but cannot change it, except using Binding#eval. It evaluate text also, which is exactly what I don't like to do.Now the question is, do I have a better (or more elegant) way to implement this? Or using eval is already the regular manner?Edit to reply to @Andrew:Okay, this is a problem which I met when I'm writing a lexical parser, in which I defined a array with fixed-number of items, there including at least a Proc and a regular expression. My purpose is to matching the regular expressions and execute the Procs under my special scope, where the Proce will involved some local variables that should be defined later. And then I met the problem above.Actually I suppose it is not same completely to that question, as mine is how to pass in binding to a Proc rather than how to pass it out.@Niklas:Got your answer, I think that is what exactly I want. It has solved my problem perfectly. <code>  l = lambda { a } def some_function a = 1 end l = lambda { a } a = 1 l.call l.instance_eval do a = 1 call end",Change the binding of a Proc in Ruby
Why does this string interpolation work in Ruby?," The proper way to use string interpolation in Ruby is as follows: That is the way I intend to always use it. However, I've noticed something odd in Ruby's string interpolation. I've noticed that string interpolation works in Ruby without the curly braces in regards to instance variables. For example: And that trying the same thing as a non-instance variable does not work. I've tried this with success in both 1.9.2 and 1.8.7. Why does this work? What is the interpreter doing here? <code>  name = ""Ned Stark""puts ""Hello there, #{name}"" #=> ""Hello there, Ned Stark"" @name = ""Ned Stark""puts ""Hello there, #@name"" #=> ""Hello there, Ned Stark"" name = ""Ned Stark""puts ""Hello, there, #name"" #=> ""Hello there, #name""",Why does string interpolation work in Ruby when there are no curly braces?
Overload in Ruby," I want to use overloading feature in Ruby like many other languages, but Ruby itself does not support this feature.Do I have to implement it using the way that define a method with *args argument and determine the number and types of the arguments inside the method? Some like: You can see, it is really ugly than directly overloading.I want to know whether there is any keywords or some other manners (like a meta-programming module) that could allow me to define an overloading method in a more elegant way. <code>  class A def foo(*args) case (args.length) when 1 do something when 2 do something-else .... end endend",Overloading in Ruby
How to assert that a class will respond_to an instance method with RSpec?, Let's say I have a class definition like so: with a spec like: The second it assertion fails. It isn't clear to me from RSpec's documentation that respond_to should fail on class methods.  <code>  class Foo def init(val) @val = val end def self.bar :bar end def val @val endend describe Foo it { should respond_to(:val) } it { should respond_to(:bar) }end,How to assert that a class will respond_to a class method with RSpec?
How to assert that a class will respond_to an class method with RSpec?, Let's say I have a class definition like so: with a spec like: The second it assertion fails. It isn't clear to me from RSpec's documentation that respond_to should fail on class methods.  <code>  class Foo def init(val) @val = val end def self.bar :bar end def val @val endend describe Foo it { should respond_to(:val) } it { should respond_to(:bar) }end,How to assert that a class will respond_to a class method with RSpec?
very basic issue: how to fetch image from the assets/images folder in a rails app," I have been searching and searching for this answer. But I cannot seem to make this work, several hours now. Please please help me.I'm a webpage of my rails app, I am trying to show an image saved in my assets folder @app/assets/images/rails.png.I have a javascript file with the following function that constructs html. Inside this function, I'd like to pass the link to the image. This is the code I have currently. As you can see above in the code the bold part is the problem. I've tried several different combinations of url strings to access that image file but the image does not show up in the html element. I've looked and looked, tried rails helper functions such as image_url('rails.png'). But I must be putting them in the wrong place. Can someone please help me. Please show me where , what function in the above code I need to add to fetch the image at /assets/images/rails.png so that it's url is placed in the highlighted part above and it shows in my view. <code>  function addToInfoWindow(infoWindowContent){infoWindowString = '<div class=""infoWindow"">'+**'<img src=""/assets/images/rails.png"" />'+**'<p>'+infoWindowContent+'</p>'+'<p><a href=""http://www.google.com"">See here</a></p>'+'<p><a href=""http://www.google.com"">Upload a photo</a></p>'+'</div>';infoWindow.setContent(infoWindowString);}",how to fetch image from the assets/images folder in a rails app
Remove query string," Removing the query string from a URL in Ruby could be done like this: Where url is the complete URL including the query string (e.g. url = http://www.domain.extension/folder?schnoo=schnok&foo=bar).Is there a faster way to do this, i.e. without using split, but rather using Rails?edit: The goal is to redirect from http://www.domain.extension/folder?schnoo=schnok&foo=bar to http://www.domain.extension/folder.EDIT: I used: <code>  url.split('?')[0] url = 'http://www.domain.extension/folder?schnoo=schnok&foo=bar'parsed_url = URI.parse(url)new_url = parsed_url.scheme+""://""+parsed_url.host+parsed_url.path",Removing a part of a URL with Ruby
Filter applying to only one model with tire and elasticsearch in Rails," I have several models indexed with elasticsearch and one of them has an association that needs to be filtered, but if I add something like this into the search method then all the models are filtered out because they don't have such an association sessions. So is there a way to apply filter to only one model?Any thoughts are much appreciated! <code>  search.filter :range, 'sessions.starts_on' => {:gte => start_date, :lte => ends_on}",Filter applying to only one model with Tire and ElasticSearch in Rails
How do you round a float to decimal places in jruby, How do you round a float to 2 decimal places in JRuby(1.6.x)? <code>  number = 1.1164number.round(2)# The above shows the following error# wrong number of arguments (1 for 0),How do you round a float to 2 decimal places in JRuby?
How do you round a float to two decimal places in jruby, How do you round a float to 2 decimal places in JRuby(1.6.x)? <code>  number = 1.1164number.round(2)# The above shows the following error# wrong number of arguments (1 for 0),How do you round a float to 2 decimal places in JRuby?
Ruby URL Encoding of ASCII Character," I'm using Ruby to extract a URL of a file to download and download it. The file name has utf8 characters, ex: When trying to download the above URL, it fails. Using URI::escape produces a URI that also doesn't work: But if I follow the URL Encoding Reference, it works: I tried to search for a function in Ruby that does the exact same encoding, but I couldn't find any. Before I try to write a function that implements the table in the link above, I want to ask if anyone know any existing library that does this. And if I decide to do this, what range of characters I should encode, obviously, not everything.I'm using JRuby 1.6.2 with RUBY_VERSION => ""1.8.7""  <code>  www.domain.com/.../360.txt www.domain.com/.../%C3%96%C3%87%C3%84%C3%9C360%C3%93%C3%AF%C3%92%C3%B4%C3%96%C3%BA%C3%80%C3%AD.txt www.domain.com/.../%D6%C7%C4%DC360%D3%EF%D2%F4%D6%FA%C0%ED.txt",How do I do URL encoding of ASCII characters?
How to generate an image in ruby without external dependencies?," I want to implement heat maps over Google maps with my own data beyond my Rails application. To do this I need to generate overlay images for each map coordinate (tile) based on my data. I found how to generate that using ImageMagick but I do not want to depend on this, because I plan to distribute my application in several places, so I would like to do this using only the Ruby language. Note that I need only to plot points in different colors over an small transparent square. <code> ",How can I generate an image in Ruby without external dependencies?
How to generate an image in Ruby without external dependencies?," I want to implement heat maps over Google maps with my own data beyond my Rails application. To do this I need to generate overlay images for each map coordinate (tile) based on my data. I found how to generate that using ImageMagick but I do not want to depend on this, because I plan to distribute my application in several places, so I would like to do this using only the Ruby language. Note that I need only to plot points in different colors over an small transparent square. <code> ",How can I generate an image in Ruby without external dependencies?
Why can't access a local variable inside a method in Ruby?," I have a Ruby file named test.rb I execute it, got error:test.rb:3:in `test': undefined local variable or method `ff' for main:Object (NameError)What's the reason for this? Is there any documentation to explain it? <code>  ff=""ff""def test puts ffend",Why can't I access a local variable inside a method in Ruby?
"One-liner for ""return x if x"" in Ruby"," One thing I love about Ruby is that you can express things in the shortest way possible.I know that one can do, when assigning Is there an analog form for return? I'm trying to ""say"" x only once. This question asks about just returning (nothing), but I don't see how to do it when returning something other than void. <code>  x ||= a# instead ofx = a unless x# which isx = x || a # instead ofreturn x if x","Shorthand for ""return x if x"" in Ruby"
Private vs Public method," Ruby as an Object Oriented Language. What that means is whatever message I send, I strictly send it on some object/instance of class.Example: makes sense I call method test2 on self objectBut I cannot do this When test2 is public method I can call it on self (fair enough, a method sent to self object). But when test2 is private method I cannot call it on self. So where is the object that I am sending method on? <code>  class Test def test1 puts ""I am in test1. A public method"" self.test2 end def test2 puts ""I am in test2. A public Method"" end end class Test def test1 puts ""I am in test1. A public method"" self.test2 # Don't work test2 # works. (where is the object that I am calling this method on?) end private def test2 puts ""I am in test2. A private Method"" end end",Why won't Ruby allow me to specify self as a receiver inside a private method?
How can I iterate through a MySQL result set in Ruby?," Here is the code I'm using: In my View, here's what I do to see the values: So imagine I query something like select * from Person, and that returns a result set such as: How can I iterate through each value and output it? The documentation here is not useful because I have tried methods that supposedly exist, but the interpreter gives me an error saying that those methods don't exist. Am I using the wrong documentation?http://www.tmtm.org/en/mysql/ruby/Thanks! <code>  # Run the query against the database defined in .yml file.# This is a Mysql::result object - http://www.tmtm.org/en/mysql/ruby/@results = ActiveRecord::Base.connection.execute(@sql_query) <pre><%= debug @results %></pre>Outputs: #<Mysql2::Result:0x007f31849a1fc0><% @results.each do |val| %> <%= val %><% end %>Outputs: [""asdfasdf"", 23, ""qwefqwef""] [""sdfgdsf"", 23, ""asdfasdfasdf""] ID Name Age1 Sergio 222 Lazlow 283 Zeus 47",How can I iterate through a MySQL result set?
i am getting error when i tried to create cafe and cave with scaffold in rails 3.1.1," I want to create a cafe and a cave controller.When I try to create my cafe using rails scaffolding, via the command rails g scaffold cafe name:stringIt is deriving the plural form of ""cafe"" as ""caves"", which means I can't make my caves controller since the name is already used.How can I make rails use the correct pluralisation? <code> ","Rails scaffolding pluralisation is incorrect for ""cafe"""
"What is formal term for the ""#{}"" token in Ruby syntax?"," The BackgroundI recently posted an answer where I variously referred to #{} as a literal, an operator, and (in one draft) a ""literal constructor."" The squishiness of this definition didn't really affect the quality of the answer, since the question was more about what it does and how to find language references for it, but I'm unhappy with being unable to point to a canonical definition of exactly what to call this element of Ruby syntax.The Ruby manual mentions this syntax element in the section on expression substitution, but doesn't really define the term for the syntax itself. Almost every reference to this language element says it's used for string interpolation, but doesn't define what it is.Wikipedia DefinitionsHere are some Wikipedia definitions that imply this construct is (strictly speaking) neither a literal nor an operator.Literal (computer programming)Operator (programming)The QuestionsDoes anyone know what the proper term is for this language element? If so, can you please point me to a formal definition? <code> ","What is the formal term for the ""#{}"" token in Ruby syntax?"
Running rails on a Production mode in webrick serer," In my current ruby on rails project, I am using webrick (default) server for development. I have a separate server for testing the application and I want to set the environment to Products in it. I used the following line to run the server in production mode. The issue is, it works perfectly if its in the development mode, but in server mode I'm getting following error: I am using Jammit and POpen4 and my rails version is: 3.0.9. Ruby version 1.8.7. I can't currently upgrade the version as several other developers are involved in the project. Can anybody give me a solution for this. Thanks <code>  rails s -e production Started GET ""/"" for 172.20.7.94 at Thu Jun 07 10:35:45 +0530 2012 Processing by FrontendController#dashboard as HTMLRendered frontend/dashboard.html.erb within layouts/frontend (3.0ms)Completed 200 OK in 50ms (Views: 22.0ms | ActiveRecord: 0.0ms)Started GET ""/assets/frontend-datauri.css"" for 172.20.7.94 at Thu Jun 07 10:35:46 +0530 2012 Processing by Jammit::Controller#package as HTML Parameters: {""extension""=>""css"", ""package""=>""frontend-datauri""}Completed 500 Internal Server Error in 190msNameError (uninitialized constant POpen4::Open4):Started GET ""/assets/frontend.js"" for 172.20.7.94 at Thu Jun 07 10:35:46 +0530 2012 Processing by Jammit::Controller#package as Parameters: {""extension""=>""js"", ""package""=>""frontend""}Completed 500 Internal Server Error in 105msNameError (uninitialized constant POpen4::Open4):",Running rails on a Production mode in webrick server
Ruby: how can I change this array into hash (array hash manipulation)," I have an simple array how can i convert in to this hash whenever element in array match the first element of each element in array2? I am quite new to ruby, and spend a lot to do this manipulation, but no luck, any help ? <code>  array = [""apple"", ""orange"", ""lemon""] array2 = [[""apple"", ""good taste"", ""red""], [""orange"", ""bad taste"", ""orange""], [""lemon"" , ""no taste"", ""yellow""]] hash = {""apple"" => [""apple"" ,""good taste"", ""red""], ""orange"" => [""orange"", ""bad taste"", ""orange""], ""lemon"" => [""lemon"" , ""no taste"", ""yellow""] }",Convert Ruby array of tuples into a hash given an array of keys?
SublimeText 2 ruby formatting," Has anyone found a good Ruby/Rails formatter? There is BeautifyRuby, but it gets strings written like Q%[] wrong because it aligns everything to the [] and it messes everything up.Essentially it looks like this from a function auto formatted by beautifyruby: Does anyone have an idea how to fix this? <code>  %x[#{cat_command} &] %x[#{join_command} &] return newintroname end",SublimeText 2 Ruby formatting
Sort hash alphabetically rails," I'd think this would be easy, and have searched for this pretty hard, but can't seem to get it to work.I have the following hash: I'm trying to sort it alphabetically by the name.Right now I""m doing this: However, it just outputs the full results in non-alphabetical order. <code>  @friends = [{""name""=>""John Smith"", ""id""=>""12345""}, {""name""=>""Jane Doe"", ""id""=>""23456""}, {""name""=>""Samuel Jackson"", ""id""=>""34567""}, {""name""=>""Kate Upton"", ""id""=>""45678""}] @friends.sort{|a,b| a[0]<=>b[0]}",Sort hashes in array alphabetically by a field
Sort hashes in array alphabetically rails," I'd think this would be easy, and have searched for this pretty hard, but can't seem to get it to work.I have the following hash: I'm trying to sort it alphabetically by the name.Right now I""m doing this: However, it just outputs the full results in non-alphabetical order. <code>  @friends = [{""name""=>""John Smith"", ""id""=>""12345""}, {""name""=>""Jane Doe"", ""id""=>""23456""}, {""name""=>""Samuel Jackson"", ""id""=>""34567""}, {""name""=>""Kate Upton"", ""id""=>""45678""}] @friends.sort{|a,b| a[0]<=>b[0]}",Sort hashes in array alphabetically by a field
Dynamically include module into Model at rutime?," I have a ""transaction"" (extends ActiveRecord::Base). I have two different types of transactions, a ""Purchase"" or a ""Donation"". There's enough overlap between the two that there's no need to create two separate database tables, so I just have one table for the transactions with an ""item_type"" column.However, there are different methods and validations for a Purchase and Donation, so it makes sense to break them up into two different controllers and models. Instead of creating ActiveBase models (minus the tables), I'm trying to use Modules for each of these.Here is what the Purchase module looks like. Here is how one is created: (this code is in the create action of the Purchases controller) I am able to call @purchase.testing and it returns ""testing"". However, that validation is not being run.If I include the module in the traditional fashion on the Transaction model, with ""include Purchase"", then they work.Any ideas how I can make this workflow happen? I followed this a bit: http://paulsturgess.co.uk/articles/84-how-to-include-class-and-validation-methods-using-a-module-in-ruby-on-rails <code>  module Purchase def self.included(base) base.validates :amount, :presence => true end def testing ""testing"" endend @purchase = Transaction.new(params[:purchase]).extend(Purchase)",Dynamically include module into Model at runtime?
Seeding HABTM associations," Equipment and Workouts have a HABTM relationship. The above seeds code works but how can I also assign a second equipment association at the same time as the first? <code>  Equipment.create(name: ""Room to run"")Equipment.create(name: ""Pull-up bar"")Workout.create( description: ""Do 100 pull-ups then run 5km"", :equipment => Equipment.where(:name => 'Pull-up bar'))",Rails - Seeding HABTM associations
Ruby Dir['*'] with dotfiles?," How do I get Dir['*'] to include dotfiles, e.g., .gitignore, but not . and ..?I.e., is there a better way to do: perhaps with Dir? The following solutions are close but both include . & ..: So, the following works: But, is there still a better way to do this?I'm wondering this to fix line 9 of a Meteor Homebrew Formula. <code>  `ls -A`.split ""\n"" Dir.glob('*', File::FNM_DOTMATCH)Dir['{.*,*}'] Dir.glob('*', File::FNM_DOTMATCH) - ['.', '..']",How to list directory contents including dotfiles but not . and ..?
Ruby list directory with Dir['*'] including dotfiles but not . and," How do I get Dir['*'] to include dotfiles, e.g., .gitignore, but not . and ..?I.e., is there a better way to do: perhaps with Dir? The following solutions are close but both include . & ..: So, the following works: But, is there still a better way to do this?I'm wondering this to fix line 9 of a Meteor Homebrew Formula. <code>  `ls -A`.split ""\n"" Dir.glob('*', File::FNM_DOTMATCH)Dir['{.*,*}'] Dir.glob('*', File::FNM_DOTMATCH) - ['.', '..']",How to list directory contents including dotfiles but not . and ..?
ruby - how to change elements into upper case," How can I turn an array of elements into uppercase? Expected output would be: The following didn't work and left them as lower case. <code>  [""Monday"", ""Tuesday"", ""Wednesday"", ""Thursday"", ""Friday""] => [""MONDAY"", ""TUESDAY"", ""WEDNESDAY"", ""THURSDAY"", ""FRIDAY""] Day.weekday.map(&:name).each {|the_day| the_day.upcase } => [""Monday"", ""Tuesday"", ""Wednesday"", ""Thursday"", ""Friday""] ",How can I uppercase each element of an array?
Get Jekyll Configuration Inside AssetFilter," I'd like to make changes to the Jekyll Only First Paragraph plugin to make the generation of a 'read more ' link a configurable option.To do this I'd need to be able to access the Jekyll site config inside the plugin's AssetFilter. With the configuration available I can make the change. I don't know how to make the site configuration available to the plugin.The code below demonstrates where I'd like site.config available: Can this be achieved? <code>  require 'nokogiri'module Jekyll module AssetFilter def only_first_p(post) # site.config needs to be available here to modify the output based on the configuration output = ""<p>"" output << Nokogiri::HTML(post[""content""]).at_css(""p"").inner_html output << %{</p><a class=""readmore"" href=""#{post[""url""]}"">Read more</a>} output end endendLiquid::Template.register_filter(Jekyll::AssetFilter)",Get Jekyll Configuration Inside Plugin
"What is the most efficient way to determine if two lines are the same, within a tolerance?"," Edit: Changed the title. I'm less interested in the two segments being the same, but rather, if they are colinear with each other, within a certain tolerance. If so, then the lines should be clustered together as a single segment.Edit: I guess a short way of saying this: I'm trying to cluster similar line segments together in an efficient way.Say I have line segments f (fx0, fy0) and (fx1, fy1) and g (gx0, gy0) and (gx1, gy1)These come from something like a computer-vision algorithm edge detector, and in some cases, the two lines are basically the same, but are counted as two distinct lines because of pixel tolerances.There are several scenariosf and g share the exact same endpoints, eg: f = (0,0), (10,10) g = (0,0), (10,10)f and g share roughly the same endpoints, and roughly the same length, eg : f = (0,0.01), (9.95,10) g = (0,0), (10,10)f is a subset of g, meaning that its endpoints fall within the g segment and share the same slope as the g segment. Think of a roughly drawn line in which the pen has gone back and forth to make it thicker. eg : f = (4.00, 4.02), (9.01, 9.02) g = (0,0), (10,10)The following would not be considered the same:f and g have a slope difference beyond a certain tolerancef and g may have the same slope but are separated by a distance beyond tolerance, i.e. parallel linesf and g are on the same plane and same slope, but don't overlap at all...i.e. a set of segments within a dashed line.The easiest way to tell if they are the same is if gx1 - fx1 <= tolerance (repeat for the three other points), but in some cases, line f may be shorter than line g (again, because of pixel differences and/or poor photo scanning). So is it better to convert the two segments into polar coordinates and compare the angles? In that case, the two rho's would be within a tolerance. But then you have to make sure the two line segments have the same ""direction"", which is trivial to compute in Cartesian or polar coordinates. So this is easy to figure out a way, but I'm just wondering if there's a much cleaner way, based in the linear algebra that I've long forgotten? <code> ","What is the most efficient way to determine if two line segments are part of the same segment, within a tolerance?"
"What is the most efficient way to determine if two line segments are the same, within a tolerance?"," Edit: Changed the title. I'm less interested in the two segments being the same, but rather, if they are colinear with each other, within a certain tolerance. If so, then the lines should be clustered together as a single segment.Edit: I guess a short way of saying this: I'm trying to cluster similar line segments together in an efficient way.Say I have line segments f (fx0, fy0) and (fx1, fy1) and g (gx0, gy0) and (gx1, gy1)These come from something like a computer-vision algorithm edge detector, and in some cases, the two lines are basically the same, but are counted as two distinct lines because of pixel tolerances.There are several scenariosf and g share the exact same endpoints, eg: f = (0,0), (10,10) g = (0,0), (10,10)f and g share roughly the same endpoints, and roughly the same length, eg : f = (0,0.01), (9.95,10) g = (0,0), (10,10)f is a subset of g, meaning that its endpoints fall within the g segment and share the same slope as the g segment. Think of a roughly drawn line in which the pen has gone back and forth to make it thicker. eg : f = (4.00, 4.02), (9.01, 9.02) g = (0,0), (10,10)The following would not be considered the same:f and g have a slope difference beyond a certain tolerancef and g may have the same slope but are separated by a distance beyond tolerance, i.e. parallel linesf and g are on the same plane and same slope, but don't overlap at all...i.e. a set of segments within a dashed line.The easiest way to tell if they are the same is if gx1 - fx1 <= tolerance (repeat for the three other points), but in some cases, line f may be shorter than line g (again, because of pixel differences and/or poor photo scanning). So is it better to convert the two segments into polar coordinates and compare the angles? In that case, the two rho's would be within a tolerance. But then you have to make sure the two line segments have the same ""direction"", which is trivial to compute in Cartesian or polar coordinates. So this is easy to figure out a way, but I'm just wondering if there's a much cleaner way, based in the linear algebra that I've long forgotten? <code> ","What is the most efficient way to determine if two line segments are part of the same segment, within a tolerance?"
Sinatra CSRF Authenticity tokens," I'm building a simple app in ruby using the Sinatra framework. It's mainly ""get"" based - most requests will be for listing data. However there are a couple of key screens in the app that will collect user input. I want to ensure the app is as safe as I can make it, and currently, trying to find how to implement the kind of authenticity tokens that you get in a Rails form?Where I've got to:Well, I know I need the tokens for csrf, but I'm unsure if I need to generate them myself or if Sinatra can do it for me - I've looked through the docs and they say that Sinatra is using Rack Protection, however, I can't find any example code for it and can't seem to figure out how to get it going - any help apprectiated - thanks! <code> ",How can I make Sinatra use CSRF Authenticity tokens?
"Array.reject!, how does it work exactly? [Ruby]"," I've made a very small ruby script today that makes use of regexes to track down certain content in files with a specific name and removes that content before adding its replacement. (Or else stuff would go wrong during iterations).I'm not very used to ruby (only been using it since my vacation job started which is 1-2 weeks ago), but one of my habits is to avoid touching lists (or most other ADT's using indexes) while iterating over them (to remove the certain content), doesn't matter which language I'm using.After some searching I found out about a few Array functions that could help. Right now, I'm using Array.reject! and the script works like I want it to work, but I honestly can't figure out why Array.reject! {|line| line =~ regex } does not have trouble with skipping objects in the array. These sources, ruby-docs & some random website, confirm that the changes are applied instantly while iterating, which makes me wonder how it does not mess up... The lines that are being removed have no space/words between them, only \n brings the next one to its own line of course (but that's just part of the end of the strings).Has anyone got a great explanation for this?  <code> ","Array.reject!, how does it work exactly?"
Error when using association extension," I am trying to reference an association extension but it errors with: Here is my implementation:app/models/user.rb lib/lister.rb I am using Rails v3.1.3. <code>  NameError (uninitialized constant User::ListerExtension): app/models/user.rb:2:in `<class:User>' class User < ActiveRecord::Base include ListerExtension has_and_belongs_to_many :roles, :uniq => true, :extend => Lister module ListerExtension def lister self.map(&:to_s).join(', ') endend","""Uninitialized constant"" error when including a module"
Error when using association extension in rails v3.1," I am trying to reference an association extension but it errors with: Here is my implementation:app/models/user.rb lib/lister.rb I am using Rails v3.1.3. <code>  NameError (uninitialized constant User::ListerExtension): app/models/user.rb:2:in `<class:User>' class User < ActiveRecord::Base include ListerExtension has_and_belongs_to_many :roles, :uniq => true, :extend => Lister module ListerExtension def lister self.map(&:to_s).join(', ') endend","""Uninitialized constant"" error when including a module"
'uninitialized constant' error when using association extension in rails v3.1," I am trying to reference an association extension but it errors with: Here is my implementation:app/models/user.rb lib/lister.rb I am using Rails v3.1.3. <code>  NameError (uninitialized constant User::ListerExtension): app/models/user.rb:2:in `<class:User>' class User < ActiveRecord::Base include ListerExtension has_and_belongs_to_many :roles, :uniq => true, :extend => Lister module ListerExtension def lister self.map(&:to_s).join(', ') endend","""Uninitialized constant"" error when including a module"
Select all elements from one column in an array of arrays in Ruby," I have an array of arrays: And I want an array containing only the third column of each of the arrays: How would I do that?I want to type something like: But thinking more Ruby-like, I tried: but this returns the whole row. <code>  arr = [[""Foo1"", ""Bar1"", ""1"", ""W""], [""Foo2"", ""Bar2"", ""2"", ""X""], [""Foo3"", ""Bar3"", ""3"", ""Y""], [""Foo4"", ""Bar4"", ""4"", ""Z""]] res = [""1"", ""2"", ""3"", ""4""] arr[][2] arr.select{ |r| r[2] }",Select all elements from one column in an array of arrays in Ruby?
Ruby named regexp and MatchData to hash," I have a rather simple regexp, but I wanted to use named regular expressions to make it cleaner and then iterate over results. Testing string: My regexp: This work like a charm, but heres where the problem comes: There is no .each method in MatchData object, and I really don't want to monkey patch it. How can I fix this problem ?I wasn't as clear as I thought: the point is to keep names and hash-like structure. <code>  testing_string = ""111x222b333"" regexp = %r{ (?<width> [0-9]{3} ) {0} (?<height> [0-9]{3} ) {0} (?<depth> [0-9]+ ) {0} \g<width>x\g<height>b\g<depth> }xdimensions = regexp.match(testing_string) dimensions.each { |k, v| dimensions[k] = my_operation(v) }# ERROR ! undefined method `each' for #<MatchData ""111x222b333"" width:""111"" height:""222"" depth:""333"">.",Convert named matches in MatchData to Hash
How do i log correctly inside ruby gems?," Currently I'm using puts, but I'm sure that's not the correct answer. How do I correctly setup a logger, inside my gem, to output my internal logging instead of puts? <code> ",How do I log correctly inside my Ruby gem?
How do i log correctly inside my own ruby gem?," Currently I'm using puts, but I'm sure that's not the correct answer. How do I correctly setup a logger, inside my gem, to output my internal logging instead of puts? <code> ",How do I log correctly inside my Ruby gem?
What do the one-letter prefixes in ruby error messages mean?," Ruby error messages often contain lexical constants with one-letter prefixes, for example: syntax error, unexpected tIDENTIFIER, expecting kENDWhere do the t and k come from? Are there other letters? A master list of possible keywords? <code> ",What do the one-letter prefixes in Ruby error messages mean?
"Rails 3, displaying jpg images from the local file system below RAILS_ROOT"," I'm trying to figure out a way to display images from a mounted file system that is not under RAILS_ROOT (in RedHat or Ubuntu environments). I don't want to use a symbolic link because this app is actually deployed through Tomcat, and Tomcat tries to follow the symbolic link and delete all the images in the mount when I shut down Tomcat. Putting the images under public/images is also not an option due to the number and size of these files.I looked into send_file, but that will just display the one image. I need to display 6 requested images in a nicely formatted page. I would prefer not to use Base64 encoding because of the bloat, but I don't know how else to pass the image data down with the rendered page.Again, the issue is that the images cannot be accessed via url in the generated HTML, the image data must be passed down with the rest of the page. I know that creating some type of service to server up the images would be the best way to handle this, but right now I just need to get this working.Any help greatly appreciated! <code> ","Rails 3, displaying jpg images from the local file system above RAILS_ROOT"
Why does ruby let me use #$$ to print the pid in a string?," I was looking at some code examples and I came across this line: which outputs It looks like $$ is the PID and it's leveraging some shorthand for the normal #{$$} string interpolation syntax. I can't find the documentation for this though. I'm curious what other short hand tricks are available (or going to confuse me).Where are the docs? Why is this special? <code>  puts ""child #$$ accepting..."" >> child 7231 accepting...",Why does ruby let me use #$$ to print the PID in a string?
"How do I check parameter ""param[:some_value]"" if Ruby", I know some ways to check if parameter is not nil Which one is correct and most popular? What is the difference between them?I'd rather use if param[:some_value] because it is simplest and shorterst. <code>  if param[:some_value]if param[:some_value].present?if !param[:some_value].nil? #unless param[:some_value].nil? if !param[:some_value].blank? #unless param[:some_value].blank? ,"How do I check parameter ""param[:some_value]"" in Ruby"
"How to ""expand"" text in Vim, into a nive to read way?"," I work a lot with nested data structures, and many times I have to manually analyze them from the console. The problem is that they come printed all in one line. Is there an easy way of re-structuring the display of a data structure based on {,[,],} and the comma, such that it will look like Ruby's pretty_print output? <code> ","How to ""expand"" text in Vim, into a nice to read way?"
Ruby :If Instance Variale belong to class in Ruby," If an instance variable belongs to a class, can I access the instance variable (e.g. @hello) directly using the class instance? <code>  class Hello def method1 @hello = ""pavan"" endendh = Hello.newputs h.method1",Access instance variable from outside the class
Ruby: If Instance Variable belong to class in Ruby," If an instance variable belongs to a class, can I access the instance variable (e.g. @hello) directly using the class instance? <code>  class Hello def method1 @hello = ""pavan"" endendh = Hello.newputs h.method1",Access instance variable from outside the class
How to reinstall a gem using bundle," I did a bundle show and get the complete path to a gem directory.Unfortunately, I removed the directory using rm -r gem_path. Then my rails app isn't working anymore. If I try start server or start rails console it outputs the following error: <class:Application>: uninitialized constant MyAPP::Application::Gem (NameError)What should I do to have it back?I tried bundle install or bundle update in hope of forcing the bundle to search the gem and install it back, but didn't work.I also tried delete the Gemfile.lock and run bundle install. Nothing changed, same error.The gem in question is Act as taggable on. <code> ",How to reinstall a gem using bundler
Ruby on Android, I installed a Ruby code editor (DroidEdit) I wrote a program but I don't know how I can test it on my Android device. How do I do that? <code> ,How to run Ruby on Android?
how do you stub a file.read that happens inside a File.open block?, How do I stub a file.read call so that it returns what I want it to? The following does not work: It looks like the stub is being applied to the File class and not the file instance inside my block. So File.read returns stubbed read as expected. But when I run my spec it fails. <code>  def write_something File.open('file.txt') do |f| return contents = f.read endend# rspecdescribe 'stub .read' do it 'should work' do File.stub(:read) { 'stubbed read' } write_something.should == 'stubbed read' endend,How do you stub a file.read that happens inside a File.open block?
"In Ruby, why isn't [1..5] == [1,2,3,4,5]?"," Why isn't [1..5] == [1,2,3,4,5]?Why isn't [1..5].to_a == [1,2,3,4,5]?How to convert from [1..5] to [1,2,3,4,5]? <code> ","Why isn't [1..5] == [1,2,3,4,5]?"
"Something in Javascript to do a string range and the ""to_a"" similar in Ruby?"," I read some code where someone did this in Ruby: output: Is there something in Javascript that will allow this to be done just as easy? if not, is there Node module that allows for something similar? <code>  puts ('A'..'Z').to_a.join(',') A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z",Create an array of characters from specified range
Ruby on Rails: How do I format a BigDecimal to only show as many decimals as needed," I have a BigDecimal that has either 0, 1 or 2 decimal digits (I'm calling round(2) on it). I want to display it in a view in such a way that it'll only show as many decimal digits as needed. In other words: How do I achieve this? So far, it's showing ""7.0"" instead of ""7"". <code>  7.0 -> ""7"" 7.5 -> ""7.5"" 7.67 -> ""7.67""",How do I format a BigDecimal to only show as many decimal digits as needed?
Weird ruby behaviour, Why does the following code not throw an error? Whereas the following does throw an error: The same thing happens with unless & case statements. <code>  if false x = 0endx #=> nil y # NameError: undefined local variable or method `y' for main:Object,Why can I refer to a variable outside of an if/unless/case statement that never ran?
ruby implementing adjacency list and graph," I'm trying to build a graph by adjacency list, which means I need a list for all the nodes, and inside every node class, I also need a data structure to hold all the adjacent nodes. Just wondering what the best structure would be to do this (a fast search for target node class). Would an array work? <code> ",Adjacency list and graph
What is the current status of named arguments (named method parameters) in Ruby?, I have heard that named method arguments will be among the feature improvements in Ruby 2.0. Can someone let me in on their current established syntax in Ruby 2.0? <code> ,"What is the current status of named arguments (named method parameters, keyword arguments) in Ruby?"
loop through array of strings to see if any string contains 'dog' in ruby without excessive return statements," Possible Duplicate: check if value exists in array in Ruby I have this method which loops through an array of strings and returns true if any string contains the string 'dog'. It is working, but the multiple return statements look messy. Is there a more eloquent way of doing this? <code>  def has_dog?(acct) [acct.title, acct.description, acct.tag].each do |text| return true if text.include?(""dog"") end return falseend",Checking if any element of an array satisfies a condition
How can I loop through array of strings to see if any contains 'dog' without excessive return statements?," Possible Duplicate: check if value exists in array in Ruby I have this method which loops through an array of strings and returns true if any string contains the string 'dog'. It is working, but the multiple return statements look messy. Is there a more eloquent way of doing this? <code>  def has_dog?(acct) [acct.title, acct.description, acct.tag].each do |text| return true if text.include?(""dog"") end return falseend",Checking if any element of an array satisfies a condition
Rails: Why can private helper methods still be accessed in views?," Just another ""why is it that way"" question: I noticed that private helper methods still can be accessed within views. Why's that? And is there a way to prevent this (e.g. when having helper methods that should only be called from within another helper)? <code> ",Why can private helper methods still be accessed in views?
cannot load such file -- ruby-wmi (LoadError)," I did install below mentioned ruby stuffwhen i try executing chef-client, i receive below mentioned error Ruby193 folder Structure ( Missing ) <code>  c:\RubyDevKit>chef-clientC:/Ruby193/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require': cannot load such file -- ruby-wmi (LoadError) from C:/Ruby193/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require' from C:/Ruby193/lib/ruby/gems/1.9.1/gems/chef-10.14.4/lib/chef/provider/env/windows.rb:20:in `<top (required)>' from C:/Ruby193/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require' from C:/Ruby193/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require' from C:/Ruby193/lib/ruby/gems/1.9.1/gems/chef-10.14.4/lib/chef/providers.rb:49:in `<top (required)>' from C:/Ruby193/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require' from C:/Ruby193/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require' from C:/Ruby193/lib/ruby/gems/1.9.1/gems/chef-10.14.4/lib/chef.rb:25:in `<top (required)>' from C:/Ruby193/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require' from C:/Ruby193/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require' from C:/Ruby193/lib/ruby/gems/1.9.1/gems/chef-10.14.4/bin/chef-client:23:in `<top (required)>' from C:/Ruby193/bin/chef-client:23:in `load' from C:/Ruby193/bin/chef-client:23:in `<main>'",cannot load such file -- ruby-wmi (LoadError) & cannot load such file -- win32/service (LoadError)
Calculate days until next birthday in rails, I have a model with a date column called birthday.How would I calculate the number of days until the user's next birthday? <code> ,Calculate days until next birthday in Rails
Rails - How to calculate the distance of two gps coordinates without having to use Google Maps on Rails?, I'm wondering if there's a way to calculate the distance of two GPS coordinates without relying on Google Maps API.My app may receive the coordinates in float or I would have to do reverse GEO on the addresses. <code> ,How to calculate the distance between two GPS coordinates without using Google Maps API?
Ruby: Get public (remote) IP address, I was wondering if there was a simple way to get the public IP address of a computer using Ruby. <code> ,Get public (remote) IP address
Ruby - gem psych serialize - LoadError enc/trans/single_byte," I encountered a weird problem while using ActiveRecord::Store module in my Ruby on Rails app. As I understand, this module use 'serialize' method under the hood so it just serialize your data to yaml format with ruby built-in psych gem.It works OK most of the time, but sometimes I get 500 error with the following message: As you can see, I use rbenv and ruby 1.9.3-p286. My system is Ubuntu 11.10. Required file exists ~/.rbenv/versions/1.9.3-p286/lib/ruby/1.9.1/i686-linux/enc/trans/single_byte.so. The same error I encountered with ruby 1.9.3-p194. And the most weird part of this problem that this error occurs from time to time.So maybe someone encountered this problem too and has already found a solution? Or does it seem more like a bug in psych and I should file it to its maintainer?Thanks in advance for any help!EDIT: the problem isn't directrly related to psych gem. It's general problem with unusual ruby setup. See the accepted answer below for details. <code>  LoadError (cannot load such file -- enc/trans/single_byte):~/.rbenv/versions/1.9.3-p286/lib/ruby/1.9.1/psych/visitors/emitter.rb:27:in `write'~/.rbenv/versions/1.9.3-p286/lib/ruby/1.9.1/psych/visitors/emitter.rb:27:in `end_document'~/.rbenv/versions/1.9.3-p286/lib/ruby/1.9.1/psych/visitors/emitter.rb:27:in `visit_Psych_Nodes_Document'~/.rbenv/versions/1.9.3-p286/lib/ruby/1.9.1/psych/visitors/visitor.rb:15:in `visit'~/.rbenv/versions/1.9.3-p286/lib/ruby/1.9.1/psych/visitors/visitor.rb:5:in `accept'~/.rbenv/versions/1.9.3-p286/lib/ruby/1.9.1/psych/visitors/emitter.rb:20:in `block in visit_Psych_Nodes_Stream'~/.rbenv/versions/1.9.3-p286/lib/ruby/1.9.1/psych/visitors/emitter.rb:20:in `each'~/.rbenv/versions/1.9.3-p286/lib/ruby/1.9.1/psych/visitors/emitter.rb:20:in `visit_Psych_Nodes_Stream'~/.rbenv/versions/1.9.3-p286/lib/ruby/1.9.1/psych/visitors/visitor.rb:15:in `visit'~/.rbenv/versions/1.9.3-p286/lib/ruby/1.9.1/psych/visitors/visitor.rb:5:in `accept'~/.rbenv/versions/1.9.3-p286/lib/ruby/1.9.1/psych/nodes/node.rb:46:in `yaml'~/.rbenv/versions/1.9.3-p286/lib/ruby/1.9.1/psych.rb:243:in `dump'",Ruby - LoadError enc/trans/single_byte
How to use CMU Sphynx voice recognition with Ruby application?, I'm searching for how to use CMU Sphinx with Ruby (Rails) application. I need very simple task - I have an mp3 file and I want get it transcribed into text.How can I implement this easiest way? I dont' know C/C++ and my task isn't so big to learn C/C++ for it :)Thanks for help! <code> ,How to use CMU Sphinx speech recognition with Ruby application?
How to use CMU Sphinx voice recognition with Ruby application?, I'm searching for how to use CMU Sphinx with Ruby (Rails) application. I need very simple task - I have an mp3 file and I want get it transcribed into text.How can I implement this easiest way? I dont' know C/C++ and my task isn't so big to learn C/C++ for it :)Thanks for help! <code> ,How to use CMU Sphinx speech recognition with Ruby application?
Using rspec to check if something is an instance of another object," I need a way to check if an object is an instance of another object using RSpec. For example: <code>  describe ""new shirt"" do it ""should be an instance of a Shirt object"" # How can i check if it is an instance of a shirt object endend",Using RSpec to check if something is an instance of another object
"Why I'm seeing different results for these two nearly identical Ruby regex patterns, and why is one matching what I think it shouldn't?"," Using Ruby 1.9.2, I have the following Ruby code in IRB: This results in the following output: 1.) Why do the results differ?2.) Why would r1 match on strings 2, 3 and 4? Wouldn't the (?=.*[\W]) lookahead cause it to fail since there aren't any non-word characters in those examples? <code>  > r1 = /^(?=.*[\d])(?=.*[\W]).{8,20}$/i> r2 = /^(?=.*\d)(?=.*\W).{8,20}$/i> a = [""password"", ""1password"", ""password1"", ""pass1word"", ""password 1""]> a.each {|p| puts ""r1: #{r1.match(p) ? ""+"" : ""-""} \""#{p}\"""".ljust(25) + ""r2: #{r2.match(p) ? ""+"" : ""-""} \""#{p}\""""} r1: - ""password"" r2: - ""password""r1: + ""1password"" r2: - ""1password""r1: + ""password1"" r2: - ""password1""r1: + ""pass1word"" r2: - ""pass1word""r1: + ""password 1"" r2: + ""password 1""","Why am I seeing different results for these two nearly identical Ruby regex patterns, and why is one matching what I think it shouldn't?"
Difference between if + else and if -> unless," I had an issue today with defining custom RSpec matchers that I resolved, but couldn't actually see any reasoning behind why one of the approaches works and the other doesn't, here's the code:Approach 1 -- if + else: Approach 2 -- if followed by unless I figure the first approach is better because it checks the condition only once, but nevertheless, the result should be the same, right?Well, it turns out the tests with the first approach pass, while the tests with the second don't. I am completely clueless as to why that is and would love if anyone could shed some light on that.Edit:Forgot to add the actual tests (with approach 2):With the following HTML tag present: I run 4 separate tests: The failure is with following message: When the HTML tag is not present, all 4 tests fail.Edit 2:I've tried another approach to verify whether control flow is correct:Approach 3: With this approach the behavior is the same as with approach 2 - first test fails, following 3 pass.Output is the following: In if, message is: nil In unless, message is: ""Profile updated""So the control flow looks alright, but fails, even though it passes outside the matcher. This truly is a mystery.Final edit:Just in response to the approved answer - when I switch the code like this: The tests look like this: So I think that indeed the last line, when it's not true, gets evaluated to nil, and that causes the whole mess. The first approach is better anyway, but I'm glad I have this problem out of my mind :) <code>  RSpec::Matchers.define :have_success_message do |message| match do |page| if message.nil? page.should have_selector('div.alert.alert-success') else page.should have_selector('div.alert.alert-success', text: message) end endend RSpec::Matchers.define :have_success_message do |message| match do |page| page.should have_selector('div.alert.alert-success') if message.nil? page.should have_selector('div.alert.alert-success', text: message) unless message.nil? endend <div class=""alert alert-success"">Profile updated</div> it { should have_success_message } # failsit { should have_success_message('Profile updated') } # passesit { should have_selector('div.alert.alert-success') } # passesit { should have_selector('div.alert.alert-success', text: ""Profile updated"") } # passes 1) User pages edit with valid information Failure/Error: it { should have_success_message } expected #<Capybara::Session> to have success message # ./spec/requests/user_pages_spec.rb:80:in `block (5 levels) in <top (required)>' if message.nil? puts ""In if, message is: #{message.inspect}"" page.should(have_selector('div.alert.alert-success'))endunless message.nil? puts ""In unless, message is: #{message.inspect}"" page.should(have_selector('div.alert.alert-success', text: message))end page.should(have_selector('div.alert.alert-success')) page.should have_selector('div.alert.alert-success', text: message) unless message.nil? page.should have_selector('div.alert.alert-success') if message.nil? it { should have_success_message } # passesit { should have_success_message('Profile updated') } # failsit { should have_selector('div.alert.alert-success') } # passesit { should have_selector('div.alert.alert-success', text: ""Profile updated"") } # passes",Inconsistency between if + else and if -> unless
sequel gem qualified query column name with table double underscores," Using the Sequel gem: The above fails with: I understand the error (same column names between joined tables, e.g employee), but do not know how I can qualify the employee condition in the and statement since the table uses the identifier method to ignore the underscores. <code>  employees = DB[:prm_master__employee.identifier].join(:prm_master__employee_custom_fields.identifier, :employee => :employee).where(""termination_date >= ?"",""06/01/2012"").or(""termination_date = NULL"").and(""employee = 'holderl'"") ~/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/sequel-3.41.0/lib/sequel/adapters/tinytds.rb:221:in `fields': TinyTds::Error: Ambiguous column name 'employee'. (Sequel::DatabaseError)",The Sequel gem qualified query column name with table double underscores
How to copy an entire folder to another path using S3 with sdk?," When I do for a single file it works: But I want to move the entire ""/photos"" folder throws No Such Key. Probably the s3 keys are only the full path for each file. How to do that? Thanks! <code>  aws_s3 = AWS::S3.new(S3_CONFIG) bucket = aws_s3.buckets[S3_CONFIG[""bucket""]] object = bucket.objects[""user/1/photos/image_1.jpg""] new_object = bucket.objects[""users/1/photos/image_1.jpg""] object.copy_to new_object, {:acl => :public_read} aws_s3 = AWS::S3.new(S3_CONFIG) bucket = aws_s3.buckets[S3_CONFIG[""bucket""]] object = bucket.objects[""user/1/photos""] new_object = bucket.objects[""users/1/photos""] object.copy_to new_object, {:acl => :public_read}","How to copy an entire ""folder"" to another path using S3 with sdk?"
Can Ruby's stdlib Logger class safely handle writers from multiple proceses?," I'm working on a Ruby library that needs to do logging. Ideally, I'd like multiple worker processes to be able to log into the same file. Looking at the source for the Logger class from Ruby's standard library, I see that efforts are made to synchronize writes into the log from multiple threads (as pointed out in the answer to Is Ruby's stdlib Logger class thread-safe?).It seems there's a similar problem when multiple processes are writing into the same log file: depending on how the underlying layers decide to buffer / split the writes, each log message may not maintain its integrity.So, is there a way of using the standard Logger class to allow multiple processes to safely log to a single file? If not, how is this typically accomplished in Ruby projects?Here's what I mean by 'safely':Each log line is 'atomic' - appearing in its entirety, uninterrupted before the next message begins. e.g. nothing like [1/1/2013 00:00:00] (PID N) LOGMESS[1/1/2013 00:00:01] (PID M) LOGMESSAGE2\nAGE1Log messages need not be strictly ordered across processes, so long as the timestamps appearing in the log are correct.Update:I decided to take the Tin Man's advice and write a test, which you can find here:https://gist.github.com/4370423The short version: Winfield is correct, at least with the default usage of Logger it is safe to use from multiple processes simultaneously (for the definition of 'safe' given above).The key factor seems to be that if given a file path (instead of an already-open IO object) Logger will open the file with mode WRONLY|APPEND, and set sync=true on it. The combination of these two things (at least on my testing on Mac OS X) appears to make it safe to log concurrently from multiple processes. If you want to pass in an already-open IO object, just make sure you create it in the same way.  <code> ",Can Ruby's stdlib Logger class safely handle writers from multiple processes?
Modify color of images in ruby," How I can change the colors from this:into this:I generated the output image using Gimp with the input image as layer one, and the background color from the image as layer two, in the Layers panel I selected the mode ""colors""I want preserve the background color, but want the colors be shades of brown.Any ideas to do this with ChunkyPNG? Or should I use ImageMagick with color lookup tables? <code> ",How to modify the color of images to remove vibrancy?
attr vs attr_accessor in Ruby," In Ruby there are four different getter and setter methods for instance variables, attr, attr_reader, attr_writer, and attr_accessor. The question is, is in Ruby attr :dilithium, the same as attr_reader :dilithium, and identical to attr_accessor :dilithium if an additional parameter true is passed? That is to say is identical to Are the two functions attr and attr_accessor more or less redundant? <code>  class Enterprise attr :dilithium, true class Enterprise attr_accessor :dilithium",attr vs attr_accessor
RSpec shorter output for test failures," I'm using RSpec (latest Version, 2.12.2) to test a small Ruby class I'm working on. My problem is that when an RSpec test fails, the test output seems incredibly verbose, and shows a huge list of error messages, almost what seems to be a full backtrace. This means I have to scroll up to see the actual error message and the top of the trace. I believe by default RSpec is supposed to do this but it doesn't seem to be doing it for me. For example, if I run rspec spec/my_spec.rb:132 (just run one test that's on L132), I get this output: Which, as you can see, is absolutely massive. I've not got any RSpec config files around that could be altering the configuration passed to RSpec.Has anyone seen this before? I've tried Googling but searches have been fruitless.Edit: I then set up config to make sure it was applying the default backtrace cleaning: But this doesn't make a difference. Looking at the output, it should be having most of it filtered out but it seems like the configuration isn't being applied?Edit again:In my config, I can even run cleaned_from_backtrace?(line) to see if a line should be cleaned. This returns true: But the actual output in the terminal remains the same!Edit 3:I am running RSpec with the command rspec, and nothing more. The project's .rspec file contains: And there is no ~/.rspec file either that could be applying settings. <code>  Failure/Error: @f.has_changed?(""test"").should be_true expected: true value got: false # /Users/JackFranklin/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rspec-expectations-2.12.1/lib/rspec/expectations/fail_with.rb:33:in `fail_with' # /Users/JackFranklin/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rspec-expectations-2.12.1/lib/rspec/expectations/handler.rb:33:in `handle_matcher' # /Users/JackFranklin/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rspec-expectations-2.12.1/lib/rspec/expectations/syntax.rb:53:in `should' # /Users/JackFranklin/Dropbox/Sites/rubygems/filefixtures/spec/filefixtures_spec.rb:137:in `block (4 levels) in <top (required)>' # /Users/JackFranklin/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rspec-core-2.12.2/lib/rspec/core/example.rb:114:in `instance_eval' # /Users/JackFranklin/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rspec-core-2.12.2/lib/rspec/core/example.rb:114:in `block in run' # /Users/JackFranklin/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rspec-core-2.12.2/lib/rspec/core/example.rb:254:in `with_around_each_hooks' # /Users/JackFranklin/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rspec-core-2.12.2/lib/rspec/core/example.rb:111:in `run' # /Users/JackFranklin/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rspec-core-2.12.2/lib/rspec/core/example_group.rb:388:in `block in run_examples' # /Users/JackFranklin/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rspec-core-2.12.2/lib/rspec/core/example_group.rb:384:in `map' # /Users/JackFranklin/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rspec-core-2.12.2/lib/rspec/core/example_group.rb:384:in `run_examples' # /Users/JackFranklin/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rspec-core-2.12.2/lib/rspec/core/example_group.rb:369:in `run' # /Users/JackFranklin/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rspec-core-2.12.2/lib/rspec/core/example_group.rb:370:in `block in run' # /Users/JackFranklin/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rspec-core-2.12.2/lib/rspec/core/example_group.rb:370:in `map' # /Users/JackFranklin/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rspec-core-2.12.2/lib/rspec/core/example_group.rb:370:in `run' # /Users/JackFranklin/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rspec-core-2.12.2/lib/rspec/core/example_group.rb:370:in `block in run' # /Users/JackFranklin/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rspec-core-2.12.2/lib/rspec/core/example_group.rb:370:in `map' # /Users/JackFranklin/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rspec-core-2.12.2/lib/rspec/core/example_group.rb:370:in `run' # /Users/JackFranklin/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rspec-core-2.12.2/lib/rspec/core/command_line.rb:28:in `block (2 levels) in run' # /Users/JackFranklin/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rspec-core-2.12.2/lib/rspec/core/command_line.rb:28:in `map' # /Users/JackFranklin/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rspec-core-2.12.2/lib/rspec/core/command_line.rb:28:in `block in run' # /Users/JackFranklin/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rspec-core-2.12.2/lib/rspec/core/reporter.rb:34:in `report' # /Users/JackFranklin/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rspec-core-2.12.2/lib/rspec/core/command_line.rb:25:in `run' # /Users/JackFranklin/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rspec-core-2.12.2/lib/rspec/core/runner.rb:80:in `run' # /Users/JackFranklin/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rspec-core-2.12.2/lib/rspec/core/runner.rb:17:in `block in autorun' RSpec.configure do |config| # RSpec automatically cleans stuff out of backtraces; # sometimes this is annoying when trying to debug something e.g. a gem config.backtrace_clean_patterns = [ /\/lib\d*\/ruby\//, /bin\//, /gems/, /spec\/spec_helper\.rb/, /lib\/rspec\/(core|expectations|matchers|mocks)/ ]end config.cleaned_from_backtrace?(""/Users/JackFranklin/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rspec-expectations-2.12.1/lib/rspec/expectations/fail_with.rb:33:in `fail_with'"") --color--format progress",RSpec shorter backtrace output for test failures
How to append json objects together in Ruby, I am trying to create a group of map markers with the results of to_gmaps4rails in an each block. On an array with valid geo coordinates the to_gmaps4rails method produces valid JSON. I'm using Mongoid and my geo coordinates are in a sub-collection like so: Here is my controller code. nearby_sales is a collection of Accounts: The browser complains about my @json not being well-formed.Is there a Ruby way to append valid JSON together?  <code>  Account.locations.coordinates @json = String.newnearby_sales.each do |sale| @json << sale.locations.to_gmaps4railsend,How to append JSON objects together in Ruby
Errno::EACCES: Permission denied," I'm trying to setup gitlab and thus install some gems from another user account using sudo,but I'm constantly getting Permission denied error. <code>  sudo -u gitlab -H bundle install --deployment --without development test postgres> Using ... ( a lot of successful gems there )> Using pygments.rb (0.3.2) from https://github.com/gitlabhq/pygments.rb.git (at master) > Errno::EACCES: Permission denied - pygments.rb-0.3.2.gem> An error occurred while installing pygments.rb (0.3.2), and Bundler cannot continue.> Make sure that `gem install pygments.rb -v '0.3.2'` succeeds before bundling.\sudo -u gitlab -H gem install pygments.rb -v '0.3.2'> Successfully installed pygments.rb-0.3.2> 1 gem installed> Installing ri documentation for pygments.rb-0.3.2...> Installing RDoc documentation for pygments.rb-0.3.2...# no matter how many times I run this command, I always get the same output# as if the gem installation doesn't stick # I've tried to chmodchmod 777 -R /usr/local/lib/ruby# then Againsudo -u gitlab -H bundle install --deployment --without development test postgres# same result, Errno::EACCES: Permission denied - pygments.rb-0.3.2.gem",Errno::EACCES: Permission denied when installing gems via gitlab
Rails: Could not find a JavaScript runtime. See https://github.com/sstephenson/execjs for a list of available runtimes," I'm trying to run a Rails app on CentOS 5 and keep getting this error: Could not find a JavaScript runtime. See https://github.com/sstephenson/execjs for a list of available runtimes. (ExecJS::RuntimeUnavailable)I have both NodeJS (v0.8.15) and therubyracer (libv8) installed.Here is my gem list: here is my gem file: What have I done wrong and what can I do to make execjs see any of JS runtime installed? <code>  *** LOCAL GEMS ***actionmailer (3.2.9, 3.2.8)actionpack (3.2.9, 3.2.8)activemodel (3.2.9, 3.2.8)activerecord (3.2.9, 3.2.8)activerecord-sqlserver-adapter (3.2.10)activeresource (3.2.9, 3.2.8)activesupport (3.2.9, 3.2.8)arel (3.0.2)builder (3.1.4, 3.0.4)bundler (1.2.3, 1.2.2)capistrano (2.13.5)commonjs (0.2.6)daemon_controller (1.1.0)diff-lcs (1.1.3)erubis (2.7.0)execjs (1.4.0)factory_girl (4.1.0)factory_girl_rails (4.1.0)fastthread (1.0.7)haml (3.1.7)haml-rails (0.3.5)highline (1.6.15)hike (1.2.1)i18n (0.6.1)journey (1.0.4)jquery-rails (2.1.4, 2.1.3)json (1.7.5)less (2.2.2)less-rails (2.2.6)libv8 (3.11.8.4)mail (2.5.3, 2.4.4)mime-types (1.19)multi_json (1.5.0, 1.3.7)net-scp (1.0.4)net-sftp (2.0.5)net-ssh (2.6.2, 2.6.1)net-ssh-gateway (1.1.0)nokogiri (1.5.6, 1.5.5)passenger (3.0.18)polyglot (0.3.3)rack (1.4.1)rack-cache (1.2)rack-ssl (1.3.2)rack-test (0.6.2)rails (3.2.9, 3.2.8)railties (3.2.9, 3.2.8)rake (10.0.3, 10.0.2, 10.0.1)rdoc (3.12)ref (1.0.2)rspec-core (2.12.2, 2.12.0)rspec-expectations (2.12.1, 2.12.0)rspec-mocks (2.12.1, 2.12.0)rspec-rails (2.12.0)ruby-odbc (0.99994)rubygems-bundler (1.1.0)rvm (1.11.3.5)sass (3.2.4, 3.2.3)sass-rails (3.2.5)sprockets (2.8.2, 2.2.2, 2.1.3)sqlite3 (1.3.6)therubyracer (0.11.0, 0.11.0beta8 x86-linux, 0.10.2)thor (0.16.0)tilt (1.3.3)tiny_tds (0.5.1)treetop (1.4.12)twitter-bootstrap-rails (2.1.9, 2.1.6)tzinfo (0.3.35)uglifier (1.3.0)webrat (0.7.3)will_paginate (3.0.3)will_paginate-bootstrap (0.2.1) source 'https://rubygems.org'gem 'rails', '3.2.8'gem 'haml'gem 'will_paginate'gem 'will_paginate-bootstrap'gem 'activerecord-sqlserver-adapter'gem 'ruby-odbc'gem 'tiny_tds'gem 'jquery-rails'gem 'execjs'gem 'therubyracer', :platforms => :rubygroup :assets do gem 'execjs' gem 'sass-rails' gem 'therubyracer', :platforms => :ruby gem 'uglifier' gem 'jquery-rails' gem 'twitter-bootstrap-rails'endgroup :test do gem 'rspec-rails' gem 'webrat' gem 'factory_girl_rails'end group :development do gem 'rspec-rails' gem 'haml-rails'end",Could not find a JavaScript runtime despite therubyracer and nodejs being installed
Rails: Could not find a JavaScript runtime. See https://github.com/sstephenson/execjs ... While therubyracer and nodejs are installed," I'm trying to run a Rails app on CentOS 5 and keep getting this error: Could not find a JavaScript runtime. See https://github.com/sstephenson/execjs for a list of available runtimes. (ExecJS::RuntimeUnavailable)I have both NodeJS (v0.8.15) and therubyracer (libv8) installed.Here is my gem list: here is my gem file: What have I done wrong and what can I do to make execjs see any of JS runtime installed? <code>  *** LOCAL GEMS ***actionmailer (3.2.9, 3.2.8)actionpack (3.2.9, 3.2.8)activemodel (3.2.9, 3.2.8)activerecord (3.2.9, 3.2.8)activerecord-sqlserver-adapter (3.2.10)activeresource (3.2.9, 3.2.8)activesupport (3.2.9, 3.2.8)arel (3.0.2)builder (3.1.4, 3.0.4)bundler (1.2.3, 1.2.2)capistrano (2.13.5)commonjs (0.2.6)daemon_controller (1.1.0)diff-lcs (1.1.3)erubis (2.7.0)execjs (1.4.0)factory_girl (4.1.0)factory_girl_rails (4.1.0)fastthread (1.0.7)haml (3.1.7)haml-rails (0.3.5)highline (1.6.15)hike (1.2.1)i18n (0.6.1)journey (1.0.4)jquery-rails (2.1.4, 2.1.3)json (1.7.5)less (2.2.2)less-rails (2.2.6)libv8 (3.11.8.4)mail (2.5.3, 2.4.4)mime-types (1.19)multi_json (1.5.0, 1.3.7)net-scp (1.0.4)net-sftp (2.0.5)net-ssh (2.6.2, 2.6.1)net-ssh-gateway (1.1.0)nokogiri (1.5.6, 1.5.5)passenger (3.0.18)polyglot (0.3.3)rack (1.4.1)rack-cache (1.2)rack-ssl (1.3.2)rack-test (0.6.2)rails (3.2.9, 3.2.8)railties (3.2.9, 3.2.8)rake (10.0.3, 10.0.2, 10.0.1)rdoc (3.12)ref (1.0.2)rspec-core (2.12.2, 2.12.0)rspec-expectations (2.12.1, 2.12.0)rspec-mocks (2.12.1, 2.12.0)rspec-rails (2.12.0)ruby-odbc (0.99994)rubygems-bundler (1.1.0)rvm (1.11.3.5)sass (3.2.4, 3.2.3)sass-rails (3.2.5)sprockets (2.8.2, 2.2.2, 2.1.3)sqlite3 (1.3.6)therubyracer (0.11.0, 0.11.0beta8 x86-linux, 0.10.2)thor (0.16.0)tilt (1.3.3)tiny_tds (0.5.1)treetop (1.4.12)twitter-bootstrap-rails (2.1.9, 2.1.6)tzinfo (0.3.35)uglifier (1.3.0)webrat (0.7.3)will_paginate (3.0.3)will_paginate-bootstrap (0.2.1) source 'https://rubygems.org'gem 'rails', '3.2.8'gem 'haml'gem 'will_paginate'gem 'will_paginate-bootstrap'gem 'activerecord-sqlserver-adapter'gem 'ruby-odbc'gem 'tiny_tds'gem 'jquery-rails'gem 'execjs'gem 'therubyracer', :platforms => :rubygroup :assets do gem 'execjs' gem 'sass-rails' gem 'therubyracer', :platforms => :ruby gem 'uglifier' gem 'jquery-rails' gem 'twitter-bootstrap-rails'endgroup :test do gem 'rspec-rails' gem 'webrat' gem 'factory_girl_rails'end group :development do gem 'rspec-rails' gem 'haml-rails'end",Could not find a JavaScript runtime despite therubyracer and nodejs being installed
what's the use of Gemfile in rails?, What is the use of Gemfile in rails?How to use Gemfile? <code> ,What is the use of Gemfile in rails?
In Ruby how pack() method works with directives," In Ruby why we need array Packing? How does directive help to do such packing?I ran some code in my console to see what and how directives looks like in Array packing.But the output is closely same with each directives. Then in core how they differs? Now I can see from the console that n.pack(""SSS"") and n.pack(""sss"");n.pack(""ccc"") and n.pack(""CCC"");n.pack(""qqq"") and n.pack(""QQQ"") gives the same output. Then where the differences are?And the docs also not covered a bit of example of how each directive works on in real life program.I am also confused with the below directives as i don't know how to test them? any small code withthem also helpful for me:S_, S!S> L> Q>S!< I!<L_, L! <code>  irb(main):003:0> n = [ 65, 66, 67 ]=> [65, 66, 67]irb(main):004:0> n.pack(""ccc"")=> ""ABC""irb(main):005:0> n.pack(""C"")=> ""A""irb(main):006:0> n.pack(""CCC"")=> ""ABC""irb(main):007:0> n.pack(""qqq"")=> ""A\x00\x00\x00\x00\x00\x00\x00B\x00\x00\x00\x00\x00\x00\x00C\x00\x00\x00\x00\x00\x00\x00""irb(main):008:0> n.pack(""QQQ"")=> ""A\x00\x00\x00\x00\x00\x00\x00B\x00\x00\x00\x00\x00\x00\x00C\x00\x00\x00\x00\x00\x00\x00""irb(main):009:0> n.pack(""SSS"")=> ""A\x00B\x00C\x00""irb(main):010:0> n.pack(""sss"")=> ""A\x00B\x00C\x00""irb(main):011:0>",How does pack() and unpack() work in Ruby
Parse URL in Ruby to get subdomain or main domain without www," If I had an URL: I would like to interpret that to: But, if I had: I'd like to get back: Is that difficult? <code>  http://www.example.com/page example.com http://blog.example.com/page blog.example.com","Parse URL in Ruby to get subdomain or main domain without ""www""?"
What happens when you have a Ruby case statement with no conditions and the when clauses are lambdas?," This code does not perform as I expect: Neither does this The first then clause is executed in both cases, which must mean that the lambda I supply to the when clause is not being called. I understand that the case equality operator === should be called on whatever the subject of the when clause is. I am wondering what goes on the other side of the === when there is no argument supplied to case. I was thinking it might be nil, but it can't be: This performs as expected and, if it were being executed, would lead to my expected case results or an exception. Can someone explain the results above? It seems that the case equality operator isn't being used at all, and yet the first when clause is evaluating to true. BTW, I am doing this because the output of a case can be used for variable assignment and it is less wordy then having several elsif clauses. I would like to be able to use arbitrary Procs in a case statement with no argument. <code>  case when -> { false } then ""why?"" else ""This is what I expect"" end # => ""why?"" casewhen ->(x) {false} then ""why?"" else ""This is what I expect""end # => ""why?"" -> {false} === nil# => ArgumentError: wrong number of arguments (1 for 0)->(x) {false} === nil# => false",What happens when you have a case statement with no argument and the when clauses are lambdas?
What happens when you have a case statement with no conditions and the when clauses are lambdas?," This code does not perform as I expect: Neither does this The first then clause is executed in both cases, which must mean that the lambda I supply to the when clause is not being called. I understand that the case equality operator === should be called on whatever the subject of the when clause is. I am wondering what goes on the other side of the === when there is no argument supplied to case. I was thinking it might be nil, but it can't be: This performs as expected and, if it were being executed, would lead to my expected case results or an exception. Can someone explain the results above? It seems that the case equality operator isn't being used at all, and yet the first when clause is evaluating to true. BTW, I am doing this because the output of a case can be used for variable assignment and it is less wordy then having several elsif clauses. I would like to be able to use arbitrary Procs in a case statement with no argument. <code>  case when -> { false } then ""why?"" else ""This is what I expect"" end # => ""why?"" casewhen ->(x) {false} then ""why?"" else ""This is what I expect""end # => ""why?"" -> {false} === nil# => ArgumentError: wrong number of arguments (1 for 0)->(x) {false} === nil# => false",What happens when you have a case statement with no argument and the when clauses are lambdas?
"Ruby, Tempfile, Writing to csv"," I have the below background job that writes to a csv file and emails it out. I am using the Tempfile class so the file is removed after I email it to the user. Currently, when I look at the csv file I am producing the results look like the following: Please ignore the data, but the issue is, it is being written directly to the file in the ruby format and not removing the """" and [] characters.Please see the code below: Would this be an issue with using the tempfile class instead of the csv class? or is there something I could do to change the way it is being written to the file?Adding the code for reading the csv file in the mailer. I am currently getting a TypeError that says ""can't convert CSV into String"". <code>  [""Client Application"" ""Final Price"" ""Tax"" ""Credit"" ""Base Price"" ""Billed At"" ""Order Guid"" ""Method of Payment Guid"" ""Method of Payment Type""][""web"" nil nil nil nil nil nil ""k32k313k1j3"" ""credit card""] class ReportJob@queue = :report_job def self.perform(client_app_id, current_user_id) user = User.find(current_user_id) client_application = Application.find(client_app_id) transactions = client_application.transactions file = Tempfile.open([""#{Rails.root}/tmp/"", "".csv""]) do |csv| begin csv << [""Application"", ""Price"", ""Tax"", ""Credit"", ""Base Price"", ""Billed At"", ""Order ID"", ""Payment ID"", ""Payment Type""] transactions.each do |transaction| csv << ""\n"" csv << [application.name, transaction.price, transaction.tax, transaction.credit, transaction.base_price, transaction.billed_at, transaction.order_id, transaction.payment_id, transaction.payment_type] end ensure ReportMailer.send_rev_report(user.email, csv).deliver csv.close(unlink_now=false) end endendend class ReportMailer < ActionMailer::Base default :from => ""test@gmail.com"" def send_rev_report(email, file) attachments['report.csv'] = File.read(""#{::Rails.root.join('tmp', file)}"") mail(:to => email, :subject => ""Attached is your report"") end endend",Writing to a file via Tempfile in Ruby
Show tooltip of a column chart programmatically in highchart," I've a Highstock chart (Line with markers and shadow) and would like to show a highstock tooltip programmatically, i.e. when i select, for example, a row on some table (that contains chart data) i would like to show the corresponding highstock tooltip.Is that possible? <code> ",Show tooltip of a column chart programmatically in StockChart (highchart)
Installing Ruby on Rails on Mac OS X 10.8.2," I have referred to Installing Ruby on Rails - Mac OS Lion and followed Alain Beauvois's reply and got pretty much everything up. The only difference is I am using 1.9.3 instead of 1.9.2.I have created .bash_profile and even made sure that is there by open -e .bash_profile and even added the line as stated by Alain Beauvois.But what seems to be the problem now is I am getting this error: The referenced log contains this: I even tried but still get the same error. I did get some weird errors before I got to this part but after I reran it with an addition of sudo in front of it, it worked. AFAIK, sudo = doing something with su permissions/privileges, right? <code>  Error running 'make', please read /usr/local/rvm/log/ruby-1.9.3-p374/make.logThere has been an error while running make. Halting the installation. [2013-02-02 21:41:52] make CC = clang LD = ld LDSHARED = clang -dynamic -bundle CFLAGS = -O3 -ggdb -Wall -Wextra -Wno-unused-parameter -Wno-parentheses -Wno-long-long -Wno-missing-field-initializers -Werror=pointer-arith -Werror=write-strings -Werror=declaration-after-statement -Werror=shorten-64-to-32 -Werror=implicit-function-declaration -pipe XCFLAGS = -include ruby/config.h -include ruby/missing.h -fvisibility=hidden -DRUBY_EXPORT CPPFLAGS = -D_XOPEN_SOURCE -D_DARWIN_C_SOURCE -I/usr/local/rvm/usr/include -I. -I.ext/include/x86_64-darwin12.2.1 -I./include -I. DLDFLAGS = -Wl,-undefined,dynamic_lookup -Wl,-multiply_defined,suppress -Wl,-flat_namespace SOLIBS = compiling regparse.cregparse.c:582:15: error: implicit conversion loses integer precision: 'st_index_t' (aka 'unsigned long') to 'int' [-Werror,-Wshorten-64-to-32] return t->num_entries; ~~~~~~ ~~~^~~~~~~~~~~1 error generated.make: *** [regparse.o] Error 1 rvm -install ruby-1.9.3-p374",Installing Ruby on Mac OS X 10.8.2
Get Response headers from Ruby http request," I'm making an HTTP request with Ruby using Net::HTTP, and I can't figure out how to get all the response headers.I tried response.header and response.headers and nothing is working. <code> ",Get response headers from Ruby HTTP request
Getting strings from i18n YAML file," I have some view code: I use this code to get some dynamic strings translated into the view. My YAML is something like: Is there a way I can use to dynamically get all the ""features"" from the YAML by locale and put it in the data-attribute? <code>  <span data-something=""[<%= t('.asd') %>, <%= t('.dsf') %>]></span> en: feature: asd: ""Asdddd"" dsf: ""adasdsadasda""",Getting strings from i18n YAML file?
Efficienet way to power and mod in ruby," i need to know the value of an power and mod of 3 values, such as: was there any ruby gems or faster way to compute this using ruby? <code>  print 1_299_709 ** 1_300_751 % 104_729",Efficient way to power and mod in ruby
Efficient way to power and mod in ruby," i need to know the value of an power and mod of 3 values, such as: was there any ruby gems or faster way to compute this using ruby? <code>  print 1_299_709 ** 1_300_751 % 104_729",Efficient way to power and mod in ruby
Calculating a Median in Ruby for Beginners, How do I calculate the median of an array of numbers using Ruby?I am a beginner and am struggling with handling the cases of the array being of odd and even length. <code> ,Calculating Median in Ruby
How to cleanly verify if the user input is an integer in ruby?," I have a piece of code where I ask the user to input a number as an answer to my question.I can do to_i but tricky/garbage inputs would escape through to_i. For example, if a user inputs 693iirum5 as an answer then #to_i would strip it to 693.Please suggest a function, not a regular expression.Thanks in advance for replying. <code> ",How to cleanly verify if the user input is an integer in Ruby?
New line positions," Given a string, what is the most efficient way to return an array of the character position of the beginning of newlines in the string? Expected: I post my own answers. I would like to accept the fastest way as the accepted answer.Benchmark result here will be updated when a new answer is added <code>  text =<<_Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod temporincididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quisnostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eufugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum._ find_newlines(text) # => [0, 80, 155, 233, 313, 393] require ""fruity""compare do padde1 {find_newlines_padde1(text)} digitalross1 {find_newlines_digitalross1(text)} sawa1 {find_newlines1(text)} sawa2 {find_newlines2(text)}end# Running each test 512 times. Test will take about 1 second.# digitalross1 is faster than sawa2 by 5x 0.1# sawa2 is faster than sawa1 by 21.999999999999996% 1.0%# sawa1 is faster than padde1 by 4.0000000000000036% 1.0%",Newline positions
Find and print lines in a file exactly matching string or regex (Ruby)," In ruby 1.9.3, I'm trying to write a program that will find all words with n number of characters taken from an arbitrary set of characters. So for instance, if I'm given the characters [ b, a, h, s, v, i, e, y, k, s, a ] and n = 5, I need to find all 5-letter words that can be made using only those characters. Using the 2of4brif.txt word list from http://wordlist.sourceforge.net/ (to include British words and spellings, too), I have attempted the following code: This does nothing (no error message, no output, as if frozen). I have also attempted variations based on the following threads:What's the best way to search for a string in a file?Ruby find string in file and print resultHow to search for exact matching string in a text file using Ruby?Finding lines in a text file matching a regular expressionMatch a content with regexp in a file?How to open a file and search for a word?Every variation I have tried has resulted in either:1) Freezing;2) Printing all words from the list that contain the 5-character permutations (I assume that's what it's doing; I didn't go through and check all of the thousands of printed words); or3) Printing all 5-character permutations found within words in the list (again, I assume that's what it's doing).Again, I'm not looking for words that contain the 5-character permutations, I'm looking for 5-character permutations that are complete words in and of themselves, so a line in the text file should only be printed if it is a perfect match with a permutation.What am I doing wrong? Thanks in advance! <code>  a = %w[b a h s v i e y k s a]a.permutation(5).map(&:join).each do |x| File.open('2of4brif.txt').each_line do |line| puts line if line.match(/^[#{x}]+$/) endend",Find and print lines in a file exactly matching string or regexp (Ruby)
What does this ruby regex means?," Could someone explain what (?i) and (?-i) wrapping a word in regex mean? I tested and it matches test, TEST, and teSt. But I have never seen this before. What does the ? before i mean? I saw this here. <code>  (?i)test(?-i)",What do `?i` and `?-i` in regex mean?
Overlapping equivalent of Array#slice in Ruby," Given this Ruby array: What is the easiest way to iterate it like this? Or this? <code>  [1, 2, 3, 4, 5] [[1,2], [2,3], [3,4], [4,5]] [[1,2,3], [2,3,4], [3,4,5]]",Overlapping equivalent of Array#slice
What is reserved word BEGIN used for in Ruby?, This is a very hard to find word because in most cases they are not sensitive during a search.The best I could find outside of documentation is a test in IRB. <code>  BEGIN{puts x = 10} 10,What are the reserved words BEGIN or END used for in Ruby?
What is reserved words BEGIN or END used for in Ruby?, This is a very hard to find word because in most cases they are not sensitive during a search.The best I could find outside of documentation is a test in IRB. <code>  BEGIN{puts x = 10} 10,What are the reserved words BEGIN or END used for in Ruby?
does ruby method automatically create instance variables for attributes?," For example, if we write but did not explicitly create an initialize method with instance variable @something, does Ruby automatically create it?  <code>  class MyClass attr_accessor :somethingend",Does Ruby's attr_accessor automatically create instance variables for attributes?
Behaviour of Float#round in Ruby (in contrast to Python)," ""Behavior of round function in Python"" observes that Python rounds floats like this: The accepted answer confirms this is caused by the binary representation of floats being inaccurate, which is all logical.Assuming that Ruby floats are just as inaccurate as Python's, how come Ruby floats round like a human would? Does Ruby cheat? <code>  >>> round(0.45, 1)0.5>>> round(1.45, 1)1.4>>> round(2.45, 1)2.5>>> round(3.45, 1)3.5>>> round(4.45, 1)4.5>>> round(5.45, 1)5.5>>> round(6.45, 1)6.5>>> round(7.45, 1)7.5>>> round(8.45, 1)8.4>>> round(9.45, 1)9.4 1.9.3p194 :009 > 0.upto(9) do |n|1.9.3p194 :010 > puts (n+0.45).round(1)1.9.3p194 :011?> end0.51.52.53.54.55.56.57.58.59.5",Why is Ruby's Float#round behavior different than Python's?
rails console command not working," I am new to Ruby on Rails, and am using RVM to manage Ruby versions.My laptop has Ruby1.8.7 installed, but my project is using RVM, Ruby1.9.3 and Rails 3.2.11.I can't run rails c or rails console without it giving me the following error: <code>  /home/phil/.rvm/rubies/ruby-1.9.3-p392/lib/ruby/1.9.1/irb/completion.rb:9:in `require': cannot load such file -- readline (LoadError)from /home/phil/.rvm/rubies/ruby-1.9.3-p392/lib/ruby/1.9.1/irb/completion.rb:9:in `<top (required)>'from /home/phil/.rvm/gems/ruby-1.9.3-p392/gems/railties-3.2.11/lib/rails/commands/console.rb:3:in `require'from /home/phil/.rvm/gems/ruby-1.9.3-p392/gems/railties-3.2.11/lib/rails/commands/console.rb:3:in `<top (required)>'from /home/phil/.rvm/gems/ruby-1.9.3-p392/gems/railties-3.2.11/lib/rails/commands.rb:38:in `require'from /home/phil/.rvm/gems/ruby-1.9.3-p392/gems/railties-3.2.11/lib/rails/commands.rb:38:in `<top (required)>'from script/rails:6:in `require'from script/rails:6:in `<main>'","Why does Rails console say ""cannot load such file -- readline""?"
"remove ""?"" of url", I have this url: I have a helper to remove ?locale=en of url: With this helper I get this url http://localhost:3000/blog/posts?. I would like to delete the trailing ?.The result should be http://localhost:3000/blog/posts. <code>  http://localhost:3000/blog/posts?locale=en def url_without_locale_params(url) uri = URI url params = Rack::Utils.parse_query uri.query params.delete 'locale' uri.query = params.to_param uri.to_send,"Remove trailing ""?"" from a string"
nokogiri xpath get all text nodes after and including the first paragraph node," I'm new to Nokogiri, and Ruby in general.I want to get the text of all the nodes in the document, starting from and inclusive of the first paragraph node.I tried the following with XPath but I'm getting nowhere: This doesn't work. What do I have to change? <code>  puts page.search(""//p[0]/text()[next-sibling::node()]"")",What XPath can I use to get all text nodes after and including the first paragraph node?
Removing non-printable characters in ruby," Sometimes I have evil non-printable characters in the middle of a string. These strings are user input, so I must make my program receive it well instead of try to change the source of the problem.For example, they can have zero width no-break space in the middle of the string. For example, while parsing a .po file, one problematic part was the string ""he is a man of god"" in the middle of the file. While it everything seems correct, inspecting it with irb shows: I believe that I know what a BOM is, and I even handle it nicely. However sometimes I have such characters on the middle of the file, so it is not a BOM. My current approach is to remove all characters that I found evil in a really smelly fashion: The most close I got was following this post which leaded me to :print: option on regexps. However it was no good for me: so the question is: How can I remove all non-printable characters from a string in ruby? <code>  ""he is a man of god"".codepoints => [104, 101, 32, 105, 115, 32, 97, 32, 65279, 109, 97, 110, 32, 111, 102, 32, 103, 111, 100] text = (text.codepoints - CODEPOINTS_BlACKLIST).pack(""U*"") ""m"".scan(/[[:print:]]/).join.codepoints => [65279, 109] ",How to remove non-printable/invisible characters in ruby?
"logging in rails, is there any performance hit"," Rails comes bundled with Ruby's logger class in the standard library. The available log levels are: :debug, :info, :warn, :error, and :fatal.I was wondering if I add extensive logging in my Rails application with log level set to :debug for development and testing, will there be a performance impact when running in production with logging turned-off or set at higher level, such as config.log_level = :fatal? <code> ","Logging in Rails, is there any performance hit?"
RVM requirements installation on debian," On my Debian server I have a user called ""deployer"" that does not have sudo access, and has RVM installed.When installing Ruby using ""deployer"", like 1.9.3, it triggers a task to install dependencies which fails and stops installation because ""deployer"" can not sudo.I don't want to add ""deployer"" into the sudoers list, and don't want to install RVM for some other user just for a one-time use for installing dependencies.What is the correct way to install that dependencies? Or how do I list them to install manually? <code>  ""Installing requirements for debian, might require sudo password.""",How to install RVM system requirements without giving sudo access for RVM user
How to install RVM debian requirements without giving sudo for rvm user," On my Debian server I have a user called ""deployer"" that does not have sudo access, and has RVM installed.When installing Ruby using ""deployer"", like 1.9.3, it triggers a task to install dependencies which fails and stops installation because ""deployer"" can not sudo.I don't want to add ""deployer"" into the sudoers list, and don't want to install RVM for some other user just for a one-time use for installing dependencies.What is the correct way to install that dependencies? Or how do I list them to install manually? <code>  ""Installing requirements for debian, might require sudo password.""",How to install RVM system requirements without giving sudo access for RVM user
How to install RVM system requirements without giving sudo for rvm user," On my Debian server I have a user called ""deployer"" that does not have sudo access, and has RVM installed.When installing Ruby using ""deployer"", like 1.9.3, it triggers a task to install dependencies which fails and stops installation because ""deployer"" can not sudo.I don't want to add ""deployer"" into the sudoers list, and don't want to install RVM for some other user just for a one-time use for installing dependencies.What is the correct way to install that dependencies? Or how do I list them to install manually? <code>  ""Installing requirements for debian, might require sudo password.""",How to install RVM system requirements without giving sudo access for RVM user
Ruby: Sorting multiple values by ascending and descending," I'm trying to sort an array of objects based upon different attributes. Some of those attributes I would like to sort in ascending order and some in descending order. I have been able to sort by ascending or descending but have been unable to combine the two.Here is the simple class I am working with: I can then instantiate some dogs to be sorted later. I can then use the sort_all_by_gender_then_name method. The array it returns includes females first, then males, all sorted by name in ascending order.But what if I want to have gender be descending, and then name ascending, so that it would be males first and then sorted by name ascending. In this case: Or, if I wanted it by gender ascending, but name descending: When sorting numerical values, you can prepend a - to make it sort in reverse. However, I have been unable to find a way to do this with strings. Any help or ideas would be appreciated. Thanks.  <code>  class Dog attr_reader :name, :gender DOGS = [] def initialize(name, gender) @name = name @gender = gender DOGS << self end def self.all DOGS end def self.sort_all_by_gender_then_name self.all.sort_by { |d| [d.gender, d.name] } endend @rover = Dog.new(""Rover"", ""Male"")@max = Dog.new(""Max"", ""Male"")@fluffy = Dog.new(""Fluffy"", ""Female"")@cocoa = Dog.new(""Cocoa"", ""Female"") Dog.sort_all_by_gender_then_name=> [@cocoa, @fluffy, @max, @rover] => [@max, @rover, @cocoa, @fluffy] => [@fluffy, @cocoa, @rover, @max]",Sorting multiple values by ascending and descending
Ruby: Removing all elements of a column in a two-dimensional array," I have this array: which is representing a prawn-table containing columns ""a"", ""b"", and ""c"".How do I remove the entire column ""c"" with all its values, 5, 8, 1?Maybe there are useful hints in ""Create two-dimensional arrays and access sub-arrays in Ruby"" and ""difficulty modifying two dimensional ruby array"" but I can't transfer them to my problem. <code>  arr = [[""a"",""b"",""c""],[2,3,5],[3,6,8],[1,3,1]]",Removing all elements of a column in a two-dimensional array
why puppet chef use ruby?," We all know that Puppet and Chef are the superstars of the IT automation area, and they are developed in Ruby (though Chef 11 server was rewritten in Erlang). In my working environment, a very large group of the operations team uses Python as the primary language to develop operation tools or basic system applications. I want to find why both Puppet and Chef were written in Ruby? What are the advantages? Ruby supports DSLs well. Can Python do such thing? <code> ",Why do Puppet and Chef use Ruby?
why does Puppet and Chef use Ruby?," We all know that Puppet and Chef are the superstars of the IT automation area, and they are developed in Ruby (though Chef 11 server was rewritten in Erlang). In my working environment, a very large group of the operations team uses Python as the primary language to develop operation tools or basic system applications. I want to find why both Puppet and Chef were written in Ruby? What are the advantages? Ruby supports DSLs well. Can Python do such thing? <code> ",Why do Puppet and Chef use Ruby?
Ruby Load File from parent directory, I'm working with Ruby 1.8 and I have script that I want to call but it's in a parent folder. Below is the structure: How can I require neededscript.rb from inside myscript.rb? <code>  maindir/neededscript.rb subdir/ subdir2/ myscript.rb,Load File from parent directory
Ruby Array Iteration Over Objects and Return Attributes," I am trying to return a list of titles of objects in Rails, however I keep getting the entire object returned instead of the title attribute.loe is the object which has an attribute which is a list of articles (named article), each article is itself an object with an attribute called title. is how I am currently attempting to do the iteration, but this returns the entire list of articles. <code>  <%= loe.article.each { |x| print x.title } %>",Iterate over Array of Objects and Return Attributes
Ruby - How I can do this inside the each_char?, I have this: I want this: Does anybody know how I can do that? <code>  sentence.each_char {|char| ...... ......} sentence.each_char {|char| if (char is the last char) ...... end},How can I do this inside the each_char?
Ruby: Eval string with macro substitution," I don't understand, why eval works like this: How can I interpolate into a string inside eval?Update:Thank you, friends. It worked. So if you have a string variable with #{} that you want to eval later, you should do it as explained below: or  <code>  ""123 #{456.to_s} 789"" # => ""123 456 789""eval('123 #{456.to_s} 789') # => 123 string = '123 #{456} 789' eval(""\"""" + string + ""\"""")# => 123 456 789 string = '123 #{456} 789' eval('""' + string + '""')# => 123 456 789",Ruby: eval with string interpolation
"Ruby string encoding issue ""\xE2"" from ASCII-8BIT to UTF-8"," I'm trying to download a PDF from an email and write the contents to a file. For some reason, I'm getting this error: Here's my code: I read around and it looked like the way to solve this was: but it doesn't seem to work. <code>  An Encoding::UndefinedConversionError occurred in attachments#inbound: ""\xE2"" from ASCII-8BIT to UTF-8 app/controllers/api/attachments_controller.rb:70:in `write' def inbound if Rails.env.production? or Rails.env.staging? email = Postmark::Mitt.new(request.body.read) else email = Postmark::Mitt.new(File.binread ""#{Rails.root}/app/temp_pdfs/email.json"") end if email.attachments.count == 0 # notify aidin that we got an inbound email with no attachments respond_to do |format| format.json { head :no_content } end return end attachment = email.attachments.first filename = ""attachment"" + (Time.now.strftime(""%Y%m%d%H%M%S"")+(rand * 1000000).round.to_s) + "".pdf"" base_path = ""#{Rails.root}/temp_attachments/"" unless File.directory?(base_path) Dir::mkdir(base_path) end file = File.new base_path + filename, 'w+' file.write Base64.decode64(attachment.source['Content'].encode(""UTF-16BE"", :invalid=>:replace, :replace=>""?"").encode(""UTF-8"")) file.close write_options = write_options() write_options[:metadata] = {:filename => attachment.file_name, :content_type => attachment.content_type, :size => attachment.size } obj = s3_object() file = File.open file.path obj.write(file.read, write_options) file.close FaxAttach.trigger obj.key.split('/').last render :nothing => true, :status => 202 and return end file.write Base64.decode64(attachment.source['Content'].encode(""UTF-16BE"", :invalid=>:replace, :replace=>""?"").encode(""UTF-8""))","Why do I get a string encoding issue ""\xE2"" from ASCII-8BIT to UTF-8?"
how to force rake task to run under development environment," I'm using Whenever gem to run a rake task.When I run rake task it runs under development environment, but when it runs on a scheduled time it refers to a production environment.How can I force to run a scheduled rake task under development environment.As I understand I'll have to use RAILS_ENV variable, but can't figure out where to put it.I think, it has nothing to do with Whenever gem here. <code> ",how to force rake task to run under development environment using Whenever gem
ruby try method when trying to fetch hash value," I'm trying to avoid an error message when pulling from a hash which may or may not have a value. I either want it to return the value or return nil.I thought the try method would do it, but I'm still getting an error. My hash is an hstore column called content... content['en'], etc. Try method I thought this would work but it doesn't. How else can I return a nil instead of an error?Also, the content field itself might also be nil so calling content['en'] throws: <code>  key not found: ""en"" content = {""es""=>""This is an amazing event!!!!!"", ""pl""=>""Gonna be crap!""} @object.content.try(:fetch, 'en') # should return nil, but errors even with try method undefined method `content' for nil:NilClass",`try` method when trying to fetch hash value
split Ruby Array," I have an array consisting of hashes in the following form: Are there any convenient ways to split the group according to the value of user key? The final result should be something like this: <code>  [ {:user=>""mike"" etc}, {:user=>""mike"" etc}, {:user=>""peter"" etc}, {:user=>""joe"" etc}] [ [{:user=>""mike"" etc}, {:user=>""mike"" etc}], [{:user=>""peter"" etc}], [{:user=>""joe"" etc}]]",Group array of hashes by key
Count items in array," In my application, I have an array named @apps which is loaded by ActiveRecord with a record containing the app's name, environment, etc.I am currently using @apps.count to get the number of apps in the array, but I am having trouble counting the number of applications in the array where the environment = 0.I tried @apps.count(0) but that didn't work since there are multiple fields for each record.I also tried something like @apps.count{ |environment| environment = 0} but nothing happened.Any suggestions? <code> ",How do I count items in an array that have a specific attribute value?
How do I count items in an array?," In my application, I have an array named @apps which is loaded by ActiveRecord with a record containing the app's name, environment, etc.I am currently using @apps.count to get the number of apps in the array, but I am having trouble counting the number of applications in the array where the environment = 0.I tried @apps.count(0) but that didn't work since there are multiple fields for each record.I also tried something like @apps.count{ |environment| environment = 0} but nothing happened.Any suggestions? <code> ",How do I count items in an array that have a specific attribute value?
Does Ruby support typehinting like PHP?," PHP Example: Ruby Example: Is there anything similar to this? Thanks. <code>  function do_something(int $i) { return $i + 2;} class MyClass # ...enddef do_something(MyClass x) x.prop1 = ""String...""end",Does Ruby support type-hinting?
"Alphabetizing an array in Ruby, case-insensitive"," I'm using Chris Pine's Learn to Program and am stumped on his relatively simple challenge to take user input in the form of a list of random words and then alphabetize them in an array. Questions about this challenge have come up before, but I haven't been able to find my specific question on SO, so I'm sorry if it's a duplicate. While this does the trick, I'm trying to figure out how to alphabetize the array without case-sensitivity. This is hard to wrap my head around.I learned about casecmp but that seems to be a method for comparing a specific string, as opposed to an array of strings.So far I've been trying things like: which, in addition to looking bad, doesn't work for multiple reasons, including that Ruby 2.0 doesn't allow strings to be converted to arrays. <code>  puts ""Here's a fun trick. Type as many words as you want (one per line) and I'll sort them in...ALPHABETICAL ORDER! Hold on to your hats!""wordlist = Array.newwhile (userInput = gets.chomp) != '' wordlist.push(userInput)endputs wordlist.sort wordlist.to_s.downcase.to_a.sort!",How do I alphabetize an array ignoring case?
Ruby YAML force double quotes when dumping," I have a small script to automate some things in YAML files.I read the original YAML file and convert it into a hash and then dump it to the file after modifying it: That works fine, but it removes double-quotes around the string if they aren't needed. That's valid YAML, but it doesn't look very nice.I could add a space at the end of every string to force single-quotes, but I'm not too happy with that. Is there any way of forcing double-quotes around strings? <code>  File.open(output_file, ""w"") do |out| YAML.dump(modified_hash, out)end",How do I force double-quotes when dumping YAML?
How do I force double quotes when dumping YAML?," I have a small script to automate some things in YAML files.I read the original YAML file and convert it into a hash and then dump it to the file after modifying it: That works fine, but it removes double-quotes around the string if they aren't needed. That's valid YAML, but it doesn't look very nice.I could add a space at the end of every string to force single-quotes, but I'm not too happy with that. Is there any way of forcing double-quotes around strings? <code>  File.open(output_file, ""w"") do |out| YAML.dump(modified_hash, out)end",How do I force double-quotes when dumping YAML?
Using Regex to Ask if Vowels are Not in Strings," Is there a better way to write the following regular expression in Ruby? The first regex matches a string that begins with a (lower case) consonant, the second with a vowel.I'm trying to figure out if there's a way to write a regular expression that matches the negative of the second expression, versus writing the first expression with several ranges. <code>  string =~ /\A[b-df-hj-np-tv-z]/string =~ /\A[aeiou]/",Using Regexp to check whether a string starts with a consonant
Unusual active record behaviour rails," When I have list of ids that I want to update their property the updated_at field in the database doesn't seem to change, here is what I mean : After this update is executed updated_at field doesn't change. However when I enter rails console with rails c and do this : After this statement updated_at field changes value. Why is this? I'm relying on this updated_at field in my app as I'm listening to the updates and doing whole app flow when this happens?EditI just found out from dax answer that : I don't want to be updating one record at a time, is there a way around this? without resorting to sql level? <code>  ids = [2,4,51,124,33]MyObj.where(:id => ids).update_all(:closed => true) obj = MyObj.find(2)obj.closed = false;obj.save! TimestampsNote that ActiveRecord will not update the timestamp fields (updated_at/updated_on) when using update_all().",Updating timestamps with #update_all
"YouTube API v3 with OAuth2: `update` and `delete` fail with ""Insufficient Permission"" error"," I am trying to update and delete videos using the YouTube API v3 with OAuth2 for authentication via the google-api-client (0.6.4) Ruby gem. However, when I attempt to execute either of these two actions, I see the following error message: Here's the odd thing: Using the exact same authentication procedure as with update and delete, I can insert (upload) successfully, no problem! So, I do not believe this is a problem with my authentication setup, but somewhere else in my code.My read-write scope is always the same across any of these actions: And according to the API documentation, that space-delimited set of scopes should cover insert, update and delete actions.My client_id, client_secret, refresh_token are always the same for all these actions too -- so, that can't be the problem either, can it? Note that my program automatically obtains a new access_token when it expires, so, again, I do not believe that is where the problem lies.To compare, here is what my insert (upload) code looks like (this works): And here is what my delete code looks like (this fails): What am I missing? Unfortunately, the YouTube API documentation for delete does not provide any examples, so I've got nothing to compare against. Please let me know if there is further information that I can provide to make my question clearer. <code>  Google::APIClient::ClientError: Insufficient Permission https://www.googleapis.com/auth/youtube https://www.googleapis.com/auth/youtube.upload # Auth stuff, then...@client.execute!( :api_method => @youtube.videos.insert, :body_object => body, :media => Google::APIClient::UploadIO.new(file_path, 'video/*'), :parameters => { 'uploadType' => 'multipart', :part => body.keys.join(','), }) # Auth stuff, then...@client.execute!( :api_method => @youtube.videos.delete, :parameters => { 'id' => youtube_id, })","YouTube API v3 with OAuth2: update and delete fail with ""Insufficient Permission"" error"
"Test datetime fields, as a json string using rspec"," I'm trying to test a JSON response with rspec (in Rails) by equality between [the original object].to_json and the response body. The problem is that the updated_at and created_at fields in the response JSON string are different than the same fields in the original object by milliseconds and therefore the test failed.The test: The result: Note that the two strings are equal, except the 870 milliseconds in the expectation (and 000 in the actual result).How can I test that? <code>  lesson = FactoryGirl.create(:lesson)request.accept = ""application/json""get :show, {:id => lesson.to_param, :location_id => lesson.location_id}, valid_sessionresponse.body.should eq lesson.to_json expected: ""{\""id\"":1,\""location_id\"":1,\""day_number\"":5,\""time\"":\""17:00\"",\""min_age\"":4,\""max_age\"":10,\""created_at\"":\""2013-10-02T00:51:53.870+03:00\"",\""updated_at\"":\""2013-10-02T00:51:53.870+03:00\""}"" got: ""{\""id\"":1,\""location_id\"":1,\""day_number\"":5,\""time\"":\""17:00\"",\""min_age\"":4,\""max_age\"":10,\""created_at\"":\""2013-10-02T00:51:53.000+03:00\"",\""updated_at\"":\""2013-10-02T00:51:53.000+03:00\""}""",Test datetime fields as a JSON string using rspec
I suddenly receive an error when running my rails server," I have been running Ruby on Rails on my laptop for about a month now, but when I wanted to run the server in this instance (and it was working fine a few hours ago) I now receive this message. How can I get the server to run again please?  <code>  C:\Sites\LaunchPage>rails s C:/RailsInstaller/Ruby1.9.3/lib/ruby/1.9.1/psych.rb:203:in `parse': (<unknown>): found character that cannot start any token while scanning for the next token at line 17 column 17 (Psych::SyntaxError) from C:/RailsInstaller/Ruby1.9.3/lib/ruby/1.9.1/psych.rb:203:in `parse_stream' from C:/RailsInstaller/Ruby1.9.3/lib/ruby/1.9.1/psych.rb:151:in `parse' from C:/RailsInstaller/Ruby1.9.3/lib/ruby/1.9.1/psych.rb:127:in `load' from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/figaro-0.6.3/lib/figaro.rb:21:in `raw' from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/figaro-0.6.3/lib/figaro.rb:17:in `env' from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/figaro-0.6.3/lib/figaro/railtie.rb:7:in `block in <class:Railtie>' from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/lazy_load_hooks.rb:34:in `call' from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/lazy_load_hooks.rb:34:in `execute_hook' from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/lazy_load_hooks.rb:43:in `block in run_load_hooks' from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/lazy_load_hooks.rb:42:in `each' from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/lazy_load_hooks.rb:42:in `run_load_hooks' from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/application.rb:67:in `inherited' from C:/Sites/LaunchPage/config/application.rb:13:in `<module:LaunchPage>' from C:/Sites/LaunchPage/config/application.rb:12:in `<top (required)>' from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/commands.rb:53:in `require' from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/commands.rb:53:in `block in <top (required)>' from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/commands.rb:50:in `tap' from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/commands.rb:50:in `<top (required)>' from script/rails:6:in `require' from script/rails:6:in `<main>'","I'm getting ""found character that cannot start any token while scanning for the next token"""
Adding a validation error with a before_save callback?," I have a model Listing that belongs_to :user. Alternatively, User has_many :listings. Each listing has a category field that classifies it (dogs, cats, etc). The User also has a boolean field called is_premium.Here is how I am validating the category... Let's say I only want to allow premium users to be able to add tigers, lions, and rhinos. How would I go about this? Would it be best to do it in a before_save method? Thanks in advance! <code>  validates_format_of :category, :with => /(dogs|cats|birds|tigers|lions|rhinos)/, :message => 'is incorrect' before_save :premium_checkdef premium_check # Some type of logic here to see if category is tiger, lion, or rhino. # If it is, then check if the user is premium. If it's not, it doesn't matter. # If user isn't premium then add an error message.end",Adding a validation error with a before_save callback or custom validator?
In Rails Im getting this error from Guard saying I have to update to the new :cmd syntax," I just updated my gems and when I tried to run Guard, I get the following error : Here's my Guard file: So how can I use :cmd command to replace '--drb' do? <code>  Guard::RSpec DEPRECATION WARNING: The :cli option is deprecated. Please customize the new :cmd option to fit your need. guard 'rspec', cli: '--drb' do watch(%r{^spec/.+_spec\.rb$}) watch(%r{^lib/(.+)\.rb$}) { |m| ""spec/lib/#{m[1]}_spec.rb"" } watch('spec/spec_helper.rb') { ""spec"" } # Rails example watch(%r{^app/(.+)\.rb$}) { |m| ""spec/#{m[1]}_spec.rb"" } watch(%r{^app/(.*)(\.erb|\.haml)$}) { |m| ""spec/#{m[1]}#{m[2]}_spec.rb"" } watch(%r{^app/controllers/(.+)_(controller)\.rb$}) { |m| [""spec/routing/#{m[1]}_routing_spec.rb"", ""spec/#{m[2]}s/#{m[1]}_#{m[2]}_spec.rb"", ""spec/acceptance/#{m[1]}_spec.rb""] } watch(%r{^spec/support/(.+)\.rb$}) { ""spec"" } watch('config/routes.rb') { ""spec/routing"" } watch('app/controllers/application_controller.rb') { ""spec/controllers"" } # Custom specs watch(%r{^app/controllers/(.+)_(controller)\.rb$}) do |m| [""spec/routing/#{m[1]}_routing_spec.rb"", ""spec/#{m[2]}s/#{m[1]}_#{m[2]}_spec.rb"", ""spec/acceptance/#{m[1]}_spec.rb"", (m[1][/_pages/] ? ""spec/requests/#{m[1]}_spec.rb"" : ""spec/requests/#{m[1].singularize}_pages_spec.rb"")] end watch(%r{^app/views/(.+)/}) do |m| (m[1][/_pages/] ? ""spec/requests/#{m[1]}_spec.rb"" : ""spec/requests/#{m[1].singularize}_pages_spec.rb"") end watch(%r{^app/controllers/sessions_controller\.rb$}) do |m| ""spec/requests/authentication_pages_spec.rb"" end # Capybara features specs watch(%r{^app/views/(.+)/.*\.(erb|haml)$}) { |m| ""spec/features/#{m[1]}_spec.rb"" } # Turnip features and steps watch(%r{^spec/acceptance/(.+)\.feature$}) watch(%r{^spec/acceptance/steps/(.+)_steps\.rb$}) { |m| Dir[File.join(""**/#{m[1]}.feature"")][0] || 'spec/acceptance' }endguard 'spork', :cucumber_env => { 'RAILS_ENV' => 'test' }, :rspec_env => { 'RAILS_ENV' => 'test' } do watch('config/application.rb') watch('config/environment.rb') watch('config/environments/test.rb') watch(%r{^config/initializers/.+\.rb$}) watch('Gemfile') watch('Gemfile.lock') watch('spec/spec_helper.rb') { :rspec } watch('test/test_helper.rb') { :test_unit } watch(%r{features/support/}) { :cucumber }end",In Rails I'm getting this error from Guard saying I have to update to the new :cmd syntax
Error to install nokogiri over OSX 10.9 Maverick," I upgraded my OSX (Lion) to Mavericks and I can't install Nokogiri for my projects. I already install XCode 5.0.1, Command Line Tools (using xcode-select --install), and already installed libxml2 from Homebrew and I am still having problems. The error is: I installed libxml2, libxslt and libiconv from Homebrew, and set the params to install Nokogiri, but don't work too.I can't find what's wrong in my enviroment, can you help me? <code>  Gem::Installer::ExtensionBuildError: ERROR: Failed to build gem native extension./Users/ericcamalionte/.rvm/rubies/ruby-1.9.2-p320/bin/ruby extconf.rbchecking for libxml/parser.h... *** extconf.rb failed ***Could not create Makefile due to some reason, probably lack ofnecessary libraries and/or headers. Check the mkmf.log file for moredetails. You may need configuration options.Provided configuration options: --with-opt-dir --with-opt-include --without-opt-include=${opt-dir}/include --with-opt-lib --without-opt-lib=${opt-dir}/lib --with-make-prog --without-make-prog --srcdir=. --curdir --ruby=/Users/ericcamalionte/.rvm/rubies/ruby-1.9.2-p320/bin/ruby --with-zlib-dir --without-zlib-dir --with-zlib-include --without-zlib-include=${zlib-dir}/include --with-zlib-lib --without-zlib-lib=${zlib-dir}/lib --with-iconv-dir --without-iconv-dir --with-iconv-include --without-iconv-include=${iconv-dir}/include --with-iconv-lib --without-iconv-lib=${iconv-dir}/lib --with-xml2-dir --without-xml2-dir --with-xml2-include --without-xml2-include=${xml2-dir}/include --with-xml2-lib --without-xml2-lib=${xml2-dir}/lib --with-xslt-dir --without-xslt-dir --with-xslt-include --without-xslt-include=${xslt-dir}/include --with-xslt-lib --without-xslt-lib=${xslt-dir}/lib --with-libxslt-config --without-libxslt-config --with-pkg-config --without-pkg-config --with-libxml-2.0-config --without-libxml-2.0-config --with-libiconv-config --without-libiconv-config/Users/ericcamalionte/.rvm/rubies/ruby-1.9.2-p320/lib/ruby/1.9.1/mkmf.rb:368:in `try_do': The complier failed to generate an executable file. (RuntimeError)You have to install development tools first. from /Users/ericcamalionte/.rvm/rubies/ruby-1.9.2-p320/lib/ruby/1.9.1/mkmf.rb:452:in `try_cpp' from /Users/ericcamalionte/.rvm/rubies/ruby-1.9.2-p320/lib/ruby/1.9.1/mkmf.rb:853:in `block in find_header' from /Users/ericcamalionte/.rvm/rubies/ruby-1.9.2-p320/lib/ruby/1.9.1/mkmf.rb:693:in `block in checking_for' from /Users/ericcamalionte/.rvm/rubies/ruby-1.9.2-p320/lib/ruby/1.9.1/mkmf.rb:280:in `block (2 levels) in postpone' from /Users/ericcamalionte/.rvm/rubies/ruby-1.9.2-p320/lib/ruby/1.9.1/mkmf.rb:254:in `open' from /Users/ericcamalionte/.rvm/rubies/ruby-1.9.2-p320/lib/ruby/1.9.1/mkmf.rb:280:in `block in postpone' from /Users/ericcamalionte/.rvm/rubies/ruby-1.9.2-p320/lib/ruby/1.9.1/mkmf.rb:254:in `open' from /Users/ericcamalionte/.rvm/rubies/ruby-1.9.2-p320/lib/ruby/1.9.1/mkmf.rb:276:in `postpone' from /Users/ericcamalionte/.rvm/rubies/ruby-1.9.2-p320/lib/ruby/1.9.1/mkmf.rb:692:in `checking_for' from /Users/ericcamalionte/.rvm/rubies/ruby-1.9.2-p320/lib/ruby/1.9.1/mkmf.rb:852:in `find_header' from extconf.rb:116:in `<main>'Gem files will remain installed in /Users/ericcamalionte/Locaweb/code/dns-panel/vendor/bundle/ruby/1.9.1/gems/nokogiri-1.5.9 for inspection.Results logged to /Users/ericcamalionte/Locaweb/code/dns-panel/vendor/bundle/ruby/1.9.1/gems/nokogiri-1.5.9/ext/nokogiri/gem_make.outAn error occured while installing nokogiri (1.5.9), and Bundler cannot continue.Make sure that `gem install nokogiri -v '1.5.9'` succeeds before bundling.",Error to install Nokogiri on OSX 10.9 Maverick?
Force an eager loading of an entire app in a rake task, I would like to be able to load an entire app so that I may find the descendants of a given class.For example given I have the following class defined: It won't be found with: Until I call the const: Then it is returned: How would I go about doing this? <code>  # app/models/foo_class.rbclass FooClass < MySpecialBaseClass # pasta codeend irb> ObjectSpace.each_object.select { |obj| obj.is_a?(Class) && obj <= MySpecialBaseClass }=> [] irb> FooClass irb> ObjectSpace.each_object.select { |obj| obj.is_a?(Class) && obj <= MySpecialBaseClass } => [FooClass],Rails force models to eager load
Nokogiri xpath on nodes with a prefix but without a namespace," I have an XML file that I need to parse. I have no control over the format of the file and cannot change it.The file makes use of a prefix (call it a), but it doesn't define a namespace for that prefix anywhere. I can't seem to use xpath to query for nodes with the a namespace.Here's the contents of the xml document I am using Nokogiri to query the document: The fails giving the following error: From my research, I found out that I could specify the namespace for the prefix in the xpath method: This returns an empty array.What would be the best way for me to get the nodes that I need? <code>  <?xml version=""1.0"" encoding=""UTF-8""?><a:root> <a:thing>stuff0</a:thing> <a:thing>stuff1</a:thing> <a:thing>stuff2</a:thing> <a:thing>stuff3</a:thing> <a:thing>stuff4</a:thing> <a:thing>stuff5</a:thing> <a:thing>stuff6</a:thing> <a:thing>stuff7</a:thing> <a:thing>stuff8</a:thing> <a:thing>stuff9</a:thing></a:root> doc = Nokogiri::XML(open('text.xml'))things = doc.xpath('//a:thing') Nokogiri::XML::XPath::SyntaxError: Undefined namespace prefix: //a:thing things = doc.xpath('//a:thing', a: 'nobody knows')",How do I use xpath on nodes with a prefix but without a namespace?
Ruby check if nil," If I try to access a hash element that isn't present, I get NoMethodError: undefined method '[]' for nil:NilClass. However, I can't predict which elements will be present. How can I avoid raising this error when an element is unexpectedly nil? <code>  @param_info = {}@param_info[""drug""][""name""]# => NoMethodError: undefined method `[]' for nil:NilClass",How to avoid NoMethodError for nil elements when accessing nested hashes?
When are constants garbage collected in ruby?," When does the Class object assigned to a constant get garbage collected? E.g. When does a constant declared inside an anonymous class/module get garbage collected? E.g. In the example above, will the constant NAME declared inside the anonymous class be garbage collected? ( I am assuming the anonymous class will be garbage collected..) <code>  class Foo; endBar = Class.new {} foo = Class.new do self::NAME = ""Bar""endfoo::NAME # Barfoo = nil GC.start ",When are constants garbage collected in Ruby?
I'm using RVM. What is the difference between `bundle update` and `gem update`?, I have a Ruby on Rails application and I'm using Ruby Version Manager. Can I update gems using either bundle update or gem update? Are they doing the same thing? <code> ,"What is the difference between ""bundle update"" and ""gem update""?"
Rails Friendly Id," I'm trying to develop a app in Ruby on Rails 4.0 (already used older versions of this incredible framework) and I having some troubles. I installed the FriendlyID gem and I think everything is okay, but I'm receiving errors when I try to test my app. If I go to http://0.0.0.0:3000/categories/1, this works. But when I click in ""edit"" in this page, or just go to http://0.0.0.0:3000/categories/electronics (that's the slugged name of category with ID 1), I receive the following error: Category Model: Category Controller:(generated by scaffold for test purposes) Migration:##(I added friendlyId after create the Category table, but I think is okay) Routes: Hope you can help me. What I'm doing wrong in Rails 4.0? <code>  Couldn't find Category with id=electronics# Use callbacks to share common setup or constraints between actions.def set_category @category = Category.find(params[:id]) #Here's pointed the errorend class Category < ActiveRecord::Base extend FriendlyId friendly_id :name, use: :slugged # Validations validates_uniqueness_of :name, :case_sensitive => falseend class CategoriesController < ApplicationController before_action :set_category, only: [:show, :edit, :update, :destroy] # GET /categories # GET /categories.json def index @categories = Category.all end # GET /categories/1 # GET /categories/1.json def show end # GET /categories/new def new @category = Category.new end # GET /categories/1/edit def edit end # POST /categories # POST /categories.json def create @category = Category.new(category_params) respond_to do |format| if @category.save format.html { redirect_to @category, notice: 'Category was successfully created.' } format.json { render action: 'show', status: :created, location: @category } else format.html { render action: 'new' } format.json { render json: @category.errors, status: :unprocessable_entity } end end end # PATCH/PUT /categories/1 # PATCH/PUT /categories/1.json def update respond_to do |format| if @category.update(category_params) format.html { redirect_to @category, notice: 'Category was successfully updated.' } format.json { head :no_content } else format.html { render action: 'edit' } format.json { render json: @category.errors, status: :unprocessable_entity } end end end # DELETE /categories/1 # DELETE /categories/1.json def destroy @category.destroy respond_to do |format| format.html { redirect_to categories_url } format.json { head :no_content } end end private # Use callbacks to share common setup or constraints between actions. def set_category @category = Category.find(params[:id]) end # Never trust parameters from the scary internet, only allow the white list through. def category_params params.require(:category).permit(:name) endend class AddColumnToCategory < ActiveRecord::Migration def change add_column :categories, :slug, :string add_index :categories, :slug, unique: true endend resources :categories",Rails Friendly Id - Couldn't find Category with id=electronics
Gemfile for Sytem," I have numerous gems that I use across all Rails projects, but that aren't part of the projects' Gems, for example powder for managing POW.It would make sense to me to manage these with a global Gemfile, but I can't see any examples of this.How should I manage global Gems that I don't want in my project gemfiles? It would be good to have a single point of install for when I set up a new machine etc.I'm using chruby alongside ruby-install to manage my Ruby versions. <code> ",Globally available Gemfile
Rails: why command gem list does not list gems installed with :git option?," In our rails 3.2 Gemfile, there are some gems installed with option :git pointing to repo on github, such as: After bundle install, we type gem list to list all the gems installed. However gem list does not list ruote as a gem installed. As a matter of fact, there is no ruote listed at all. We notice the same thing also happens to all rails engines which are installed with option :git pointing to repo on github. Why gem list does not list all gems installed? How can we assure that ruote is correctly installed? <code>  gem 'ruote', :git => 'http://github.com/jmettraux/ruote.git'",Why doesn't the command `gem list` include gems installed with bundler's :git option?
Dir.glob not returning any files," I am trying to copy files from one folder into another folder, and then record the names of all the files that were copied into a log file. Both folders are in the same directory and I take that path via the command line. In my program currently that happens through which successfully becomes 'c:\user\alexander\desktop\'.Then I copy the files on my desktop into a folder already on the desktop with This also successfully completes which I verified from the cmd output and from checking the folder itself. Finally I am trying to save the filenames to a log file with the path 'c:\user\alexander\desktop\log.txt'. I tried to do this by using This does nothing and leaves my logFile empty. I tried to fix this by changing the File.open option to 'w' instead of 'a' but that still did nothing. Then I thought I must be implementing it incorrectly so I tried just putting as a sanity check, but this also outputs nothing. Is what I am trying to accomplish possible? If it is, what am I doing wrong, and if its not is there another way to do this?Edit 1:Changing the Dir.glob argument to is making it write the current directories files to the log. I thought that meant I must have some unseen typo in my argument3 variable but when I did its outputting c:\user\alexander\desktop* I tried concatenating the file path before I passed it as an argument to Dir.glob as And its still not working as I expected. Is there some trick to passing in the exact file path to Dir.glob? I can't guarantee that the program will always be in the directory it needs to copy from when its run. <code>  argument3 = ARGV[2] + ""\\"" system ""copy #{argument3}*.* #{argument3}TestFolder"" logFile = ""c:\\user\\alexander\\desktop\\log.txt""Dir.glob(argument3 + ""*.*"").each do |fileName| File.open(logFile, 'a') {|file| file << ""\n"" + fileName}end Dir.glob(argument3 + ""*.*"").each do |fileName| puts fileNameend Dir.glob(""*"") puts argument3 + ""*"" filePath = argument3 + ""*""Dir.glob(argument3 + ""*.*"").each do |fileName| File.open(logFile, 'a') {|file| file << ""\n"" + fileName}end",Ruby: Dir.glob not returning any files
no implicit conversion of String into Integer (TypeError)," I'm trying to write a script that will get a system ID from Red Hat Satellite/Spacewalk, which uses XMLRPC. I'm trying to get the ID which is the first value when using the XMLRPC client using the system name.I'm referencing the documentation from Red Hat for the method used below: The output of getsystemid looks like this: But when I try to just get just id I get this error: Any help is appreciated <code>  #!/usr/bin/env rubyrequire ""xmlrpc/client""@SATELLITE_URL = ""satellite.rdu.salab.redhat.com""@SATELLITE_API = ""/rpc/api""@SATELLITE_LOGIN = ""********""@SATELLITE_PASSWORD = ""*******""@client = XMLRPC::Client.new(@SATELLITE_URL, @SATELLITE_API)@key = @client.call(""auth.login"", @SATELLITE_LOGIN, @SATELLITE_PASSWORD)@getsystemid = @client.call(""system.getId"", @key, 'cfme038')print ""#{@getsystemid}""@systemid = @getsystemid ['id'] [{""id""=>1000010466, ""name""=>""cfme038"", ""last_checkin""=>#<XMLRPC::DateTime:0x007f9581042428 @year=2013, @month=12, @day=26, @hour=14, @min=31, @sec=28>}] no implicit conversion of String into Integer (TypeError)",No implicit conversion of String into Integer (TypeError)?
Parse large json hash with ruby-yajl," I have a large file (>50Mb) which contains a JSON hash. Something like: Rather than parsing the entire file and taking say the first ten elements, I'd like to parse each item in the hash. I actually don't care about the key, i.e. obj1. If I convert the above to this: I can easily achieve what I want using Yajl streaming: Is there a way to do this without having to alter the file? Some sort of callback in Yajl maybe? <code>  { ""obj1"": { ""key1"": ""val1"", ""key2"": ""val2"" }, ""obj2"": { ""key1"": ""val1"", ""key2"": ""val2"" } ...} { ""key1"": ""val1"", ""key2"": ""val2"" } ""obj2"": { ""key1"": ""val1"", ""key2"": ""val2"" } io = File.open(path_to_file)count = 10Yajl::Parser.parse(io) do |obj| puts ""Parsed: #{obj}"" count -= 1 break if count == 0endio.close",Parse large JSON hash with ruby-yajl?
"In object.initalize, is it better to use self. over @?"," There's a convention to reference an object's attributes over its instance variables, where possible. Practical Object-Oriented Design in Ruby says: Always wrap instance variables in accessor methods instead of directly referring to variables...This is shown with an example, which I've paraphrased: The most common way I see to create a new object with an instance variable is this: @title= directly accesses the instance variable title. Assuming we are following the the 'attribute over instance variable' convention, is it more appropriate to use self.title=, which would tell the object to send itself the message title=, thereby using the attribute write method, over the instance variable directly? The book talks about 'attribute over instance variable' with reference to reading an instance variable, but doesn't it also apply to writing? <code>  class Gear attr_reader :chainring, :cog ... def ratio # this is bad # @chainring / @cog.to_f # this is good chainring / cog.to_fend class Book attr_accessor :title def initialize(title) @title = title endend class Book attr_accessor :title def initialize(title) self.title = title endend","In object.initialize, is it better to use self. over @?"
Passenger Could not find a temporary directory," I am getting some 500 errors in my Passenger Rails app. When looking at the log it appears passenger cannot access the /tmp dir. I have validated that it is there and has RW access to root, and then tried www-data. What is going on here? Here are my current /tmp, and config/environment.rb ownerships: <code>  2014-01-14 16:01:16.6573 20624/7fa7c8806700 Pool2/SmartSpawner.h:301 ]: Preloader for /var/www/socialrest_homepage started on PID 20686, listening on unix:/tmp/passenger.1.0.20618/generation-0/backends/preloader.20686App 20704 stdout: [Tue Jan 14 16:01:17 2014] [error] [client 168.215.171.129] Premature end of script headers: App 20686 stderr: /usr/local/rvm/rubies/ruby-2.0.0-p353/lib/ruby/2.0.0/tmpdir.rb:34:in `tmpdir': could not find a temporary directory (ArgumentError)App 20686 stderr: from /usr/local/rvm/gems/ruby-2.0.0-p353/gems/passenger-4.0.33/lib/phusion_passenger/utils/tmpio.rb:17:in `new'App 20686 stderr: from /usr/local/rvm/gems/ruby-2.0.0-p353/gems/passenger-4.0.33/lib/phusion_passenger/utils/tee_input.rb:99:in `initialize'App 20686 stderr: from /usr/local/rvm/gems/ruby-2.0.0-p353/gems/passenger-4.0.33/lib/phusion_passenger/rack/thread_handler_extension.rb:55:in `new'App 20686 stderr: from /usr/local/rvm/gems/ruby-2.0.0-p353/gems/passenger-4.0.33/lib/phusion_passenger/rack/thread_handler_extension.rb:55:in `process_request'App 20686 stderr: from /usr/local/rvm/gems/ruby-2.0.0-p353/gems/passenger-4.0.33/lib/phusion_passenger/request_handler/thread_handler.rb:141:in `accept_and_process_next_request'App 20686 stderr: from /usr/local/rvm/gems/ruby-2.0.0-p353/gems/passenger-4.0.33/lib/phusion_passenger/request_handler/thread_handler.rb:109:in `main_loop'App 20686 stderr: from /usr/local/rvm/gems/ruby-2.0.0-p353/gems/passenger-4.0.33/lib/phusion_passenger/request_handler.rb:440:in `block (3 levels) in start_threads'[ 2014-01-14 16:01:21.0163 20624/7fa7cb242700 Pool2/Pool.h:776 ]: Process (pid=20704, group=/var/www/socialrest_homepage#default) no longer exists! Detaching it from the pool.App 20720 stdout: drwxrwxrwx 5 root root 4.0K Jan 14 16:01 tmp-rwxr-xr-x 1 root root 196 Jan 13 20:06 environment.rb",Ruby: Could not find a temporary directory
Trying to install bro pages: mime-types requires Ruby version >= 1.9.2," I've been trying to install bro pages, but I'm hitting a wall.I've managed to upgrade to Ruby 2.1.0: But I try to install bro pages, like so: Which to me makes no sense.I found some where on Stackoverflow a similar problem, where another gem had issues with being installed at they recommended adding --pre --no-ri --no-rdoc to the end, but I get this error instead: So how can I get round this, and install bropages? <code>  craig@Craig-loaf:~$ ruby -vruby 2.1.0p0 (2013-12-25 revision 44422) [x86_64-linux]craig@Craig-loaf:~$ gem -v2.2.1 craig@Craig-loaf:~$ sudo gem install bropagesERROR: Error installing bropages: mime-types requires Ruby version >= 1.9.2. craig@Craig-loaf:~$ sudo gem install bropages --pre --no-ri --no-rdoc[sudo] password for craig: ERROR: Could not find a valid gem 'bropages' (>= 0) in any repositoryERROR: Possible alternatives: bropagescraig@Craig-loaf:~$ sudo gem install mime-types --pre --no-ri --no-rdocERROR: Could not find a valid gem 'mime-types' (>= 0) in any repositoryERROR: Possible alternatives: mime-types",How to install bropages: mime-types requires Ruby version >= 1.9.2
Pass Environmental Variables To Rake Task Invoked From Another Rake Task," I have three Rake tasks invoked from another Rake task. The first Rake task requires that an environmental variable is set before it is executed.The following works, however it means that I lose all the output from the task which is critical: How can I invoke the first task with the environmental variable AND display its output to the terminal?  <code>  namespace :deploy do task :staging => :environment do `EXAMPLE=something rake db:rebuild` Rake::Task[""rake envs:push:staging""].invoke Rake::Task[""rake app:push:staging""].invoke endend",How do I pass environmental variables to a Rake task invoked from another Rake task?
Quiet git remote update, I am trying to quiet the git remote update command in my Ruby script.I used the --quiet flags of other Git commands like git checkout [branch_name].For some reason Git doesn't have that flag when doing a git remote update. Does anybody know any other way?I have also tried to put the output to /dev/null like git checkout [branch_name] < /dev/null.I am open to any Ruby or command line suggestions. <code> ,Quiet git remote update?
Check if string contains only positive numbers in Ruby," I am really new to ruby and want know if it's possible to check if a string contains only positive numbers using regex or some other function? <code>  str = ""123abcd"" #return false because it contains alphabetsstr = ""153"" #return true because of all numbers",Check if string contains only positive digits
Rails: HABTM duplicate records," I have a 2 models Game & Theme and they have a has_and_belongs_to_many association. I have tried many solutions to prevent duplicate records in the games_themes table, but no solutions work. The problem is, games_themes is a table, but it is not a model, so I can't figure out a way to run validations on it effectively.Heres a solution I tried <code>  class Theme < ActiveRecord::Base has_and_belongs_to_many :games, :uniq => trueendclass Game < ActiveRecord::Base has_and_belongs_to_many :themes, :uniq => trueend",HABTM duplicate records
Sharing Ruby variables between Sinatra reqests," I am trying to write a simple quiz game in sinatra and I need to have common objects accessible for all users (lobby state, chat messages etc.). The problem is that Sinatra reloads the code after every request and objects become in initial state. How to implement it? <code> ",Sharing Ruby variables between Sinatra requests
How to generate a signature using a key pair in Java," sorry to ask a particular question, but I need to generate in java code a 'signature' like the following code line in ruby: signature = OpenSSL::PKey::RSA.new(File.read(""PUBLIC_PEM_PATH"")).public_encrypt('SECRET_KEY')I have the .pem key file and the SECRET_KEY that's is something like: F6qxlwQTYWRM3gRfgftryKJHKYZiGXdoy5lDm4How can I do this ? Thanks!UPDATE 1I tried this : And got this error: UPDATE2 I managed to load a public key from a .pem file. But now, Im getting an error from the cipher. The error log: Any thoughts?? <code>  File pubKeyFile = new File(keyFileName); DataInputStream inputStream; byte[] signature = null; try { inputStream = new DataInputStream(new FileInputStream(pubKeyFile)); byte[] pubKeyBytes = new byte[(int)pubKeyFile.length()]; inputStream.readFully(pubKeyBytes); inputStream.close(); KeyFactory keyFactory = KeyFactory.getInstance(""RSA""); X509EncodedKeySpec pubSpec = new X509EncodedKeySpec(pubKeyBytes); RSAPublicKey pubKey = (RSAPublicKey) keyFactory.generatePublic(pubSpec); Cipher cipher = Cipher.getInstance(""RSA/ECB/PKCS1Padding""); cipher.init(Cipher.ENCRYPT_MODE, pubKey); signature = cipher.doFinal(secretKey.getBytes()); } catch (Exception e) { e.printStackTrace(); } return signature; java.security.spec.InvalidKeySpecException: java.lang.RuntimeException: error:0D0680A8:asn1 encoding routines:ASN1_CHECK_TLEN:wrong tag public static byte[] getSignature(String keyFileName, byte[] secretKey){ byte[] signature = null; try { PublicKey pubKey = readKeyFromFile(keyFileName); Cipher cipher = Cipher.getInstance(""RSA/ECB/PKCS1Padding""); cipher.init(Cipher.ENCRYPT_MODE, pubKey); signature = cipher.doFinal(secretKey); } catch (Exception e) { e.printStackTrace(); } return signature;}private static PublicKey readKeyFromFile(String keyFileName) throws IOException { InputStream in = new FileInputStream(keyFileName); DataInputStream din = new DataInputStream(in); try { BigInteger m = BigInteger.valueOf(din.readLong()); BigInteger e = BigInteger.valueOf(din.readLong()); RSAPublicKeySpec keySpec = new RSAPublicKeySpec(m, e); KeyFactory fact = KeyFactory.getInstance(""RSA""); RSAPublicKey pubKey = (RSAPublicKey) fact.generatePublic(keySpec); return pubKey; } catch (Exception e) { throw new RuntimeException(""Spurious serialisation error"", e); } finally { din.close(); }} javax.crypto.IllegalBlockSizeException: input must be under 8 bytes",Encrypt data in Android with a RSA public.pem file generated in Ruby
How to link to a page without html extension in Jekyll?," I'm building a website in Jekyll. To remove html extension in posts I added the following to _config.yml To remove html extension from pages, I created folders for each page, and placed an index.html file in each page folder.Now the posts and pages work without html extension, but when I link to a page with page.url it returns the whole link (/kb/index.html) instead of just /kb.What variable can I use to link to a page without html extension? <code>  permalink: /kb/:title",How to link to a page with page.url without the html extension in Jekyll?
How do I correctly require 'sass' in a ruby .rb, How do I call a sass function from inside a ruby file?The following line works in the command prompt: I need to put this into a Ruby file. So I wrote as below in a Ruby file: But it complains with the following: <code>  sass C:\Users\..etc..\main.scss require 'sass'$arg1 = 'C:/Users/dmoores/Desktop/testst/main.scss'sass $arg1 undefined method `sass' for main:Object (NoMethodError),How do I run sass in ruby?
Compare two public SSL certs in Ruby and validate that they are the same (cert pinning)," I have my own HTTPS service that I am talking to from another Ruby app. I would like to save it's public key certificate at a known point in time in my app repo, and compare the public key that the service sends me with the stored copy. To install the certificate on the external server I'm likely to have to convert it to some format, so the file sent by the server is not going to be the same.I want to do cert pinning of sorts, to that specific public key. What are the fields of the cert I need to compare using OpenSSL to verify that the PK I received from the service is the same as the one that's received from the server?I imagine the CN and the signature have to match at least. What else needs to be checked to know that the public cert I have matches the one I've received exactly (i.e. is the same cert)? Maybe OSSL has a built-in facility for this? <code> ",Implementing HTTPS certificate/pubkey pinning with Ruby
"What is the diference between this two codes? (global variables, Ruby)", This prints 1: This prints 12: The latter is modifying the global variable $x. Why is it modified in the second example and not in the first one? Will this will happen with any method (not only push) of the class Array? <code>  def sum(i) i=i+[2]end$x=[1]sum($x)print $x def sum(i) i.push(2)end$x=[1]sum($x)print $x,What is the diference between these two pieces of code?
Why does rubymine suggests me to use single quotes over double quotes on strings?," Every time I use double-quoted strings, I'm getting this kind of suggestion:When I click the bulb icon I'm getting an option to convert that string into a single-quoted string.Can someone explain why single-quoted strings are preferred over double-quoted strings? <code> ",Why does Rubymine suggests I use single-quotes over double-quotes on strings?
"RUBY If hash has key, use it. Otherwise, use different key"," response is a hash that could look like one of two things: or I want to do something like this: Is there a more ""Ruby"" approach to this? Maybe something using the || operator? I am using ruby 2.0.0 and rails 4.0.0. <code>  response = {'demo' => 'nil', 'test_01' => 'Demo Data'} response = {'test' => 'Demo Data', 'demo' => 'nil'} if response.has_key? 'test_01' new_response.update(:nps_score => response['test_01']else new_response.update(:nps_score => response['test']end","If hash has key, use it. Otherwise, use different key"
Ruby: how to check if an attribute exists?," I am using search of Net::LDAP, the returned entry is something like this. I tried to do the following, but failed.(1) (2) The first error says ""to_hash"" undefined, the second ""has_key"" undefined. Then I really don't know how to do it, basically I want to find if ""uid"" is present and if so get its correspondent value. Thank you very much for the tip.BTW, it only responds to ""entry.uid"", but if the search key is provided as a string, how to do that? for example, <code>  #<Net::LDAP::Entry:0x7f47a6491c00 @myhash= {:loginshell=>[""/bin/bash""], :cn=>[""M... R...""], :homedirectory=>[""/mnt/home/m...""], :uid=>[""m...""], :userpassword=>[""{CRYPT}$1$3zR/C...$R1""], ...}> e = entry.to_hashe.has_key? ""uid"" entry.has_key? ""uid"" def get_value(key) if entry has key return key's value endend",How to check if a key exists in a Ruby hash?
Ruby: how to check if a hash key exists?," I am using search of Net::LDAP, the returned entry is something like this. I tried to do the following, but failed.(1) (2) The first error says ""to_hash"" undefined, the second ""has_key"" undefined. Then I really don't know how to do it, basically I want to find if ""uid"" is present and if so get its correspondent value. Thank you very much for the tip.BTW, it only responds to ""entry.uid"", but if the search key is provided as a string, how to do that? for example, <code>  #<Net::LDAP::Entry:0x7f47a6491c00 @myhash= {:loginshell=>[""/bin/bash""], :cn=>[""M... R...""], :homedirectory=>[""/mnt/home/m...""], :uid=>[""m...""], :userpassword=>[""{CRYPT}$1$3zR/C...$R1""], ...}> e = entry.to_hashe.has_key? ""uid"" entry.has_key? ""uid"" def get_value(key) if entry has key return key's value endend",How to check if a key exists in a Ruby hash?
Avoid rails to convert postgres inet type to an IPAddr object," I have a problem in my Rails project. In previous projects (not Rails) I just used the ""inet"" type in PostgreSQL to store an IP address with a subnet, something like this: This was a good method to store the IP and the subnet in one field. Now I am using the inet type in Rails (4.0.1) and Ruby (2.0.0 p247), but as I read and tried, Rails converts it to the IPAddr object. But this IPAddr Object is destroying my format. It converts the four examples above to the following: Is there a way to prevent Rails doing that or is there a way to substitute it with a string? Or maybe another gem?The problem occurs when I try to store something, and even when I try to read an existing value from the database.Just to be more granular: Creates the database entry:  <code>  192.168.1.0/30 192.168.1.1/30 192.168.1.2/30 192.168.1.3/30 192.168.1.0/30 IPAddr.new(""192.168.1.2/255.255.255.252"") 192.168.1.0/24",Avoid Rails converting PostgreSQL inet type to an IPAddr object?
QtRuby with Qt 5?," Everything I can find online about QtRuby uses Qt 4, but the current version of Qt is 5. Is this simply a matter of documentation not catching up with reality, where Qt 5 would work just fine with QtRuby?If you assert that this is the case (that Qt5 is unsupported) then please backup your assertion with evidence. <code> ",Does QtRuby work with Qt 5?
How do you get the root element name of an XML document using Nokogiri," Using Nokogiri, I would like to determine the name of the root element.I thought that doing an XPath query for / would do the trick but apparently that node name is ""document""? How can I get the string ""foo"" for the root node name without knowing it ahead of time? <code>  require 'nokogiri'doc = Nokogiri::XML('<foo>Hello</foo>')doc.xpath('/').first.name # => ""document"" doc.xpath('/foo').first.name # => ""foo""",How do I get the root element name of an XML document using Nokogiri?
Missing `secret_key_base` for 'production' environment," I've created a rails app (Rails 4.1.0) from scratch and I am getting a problem that I am not able to solve. I have installed and configured Apache Passenger Module, it works fine. Any time I try to access the virtual host I get an error 500: The secret.yml file contains the following configuration: Even when it's not recommended I did this: But Apache logs show this: How I can fix this error? How do I access the development enviroment? I mean how I can write code, test in my browser and then deploy to Heroku or just test in production enviroment?UpdateI manage to fix the error above by setting RailsEnv development on VirtualHost but now I get this other error: SQLite3::CantOpenException unable to open database file Rails.root: /var/www/html/moviedbI'm trying to use this GEM for make queries to TheMovieDB website and get results. Any advice on this new error? <code>  Missing secret_key_base for 'production' environment, set this value in config/secrets.yml secret_key_base: <%= ENV[""SECRET_KEY_BASE""] %> production: secret_key_base: XXXXXXXXXXXXXXXXXXXXXXXXXXXX (random key) # tailf /etc/httpd/logs/error_log[Tue May 06 12:56:18 2014] [error] [client 192.168.3.1] Premature end of script headers:App 4405 stderr: [ 2014-05-06 12:56:18.5763 4421/0x9d48bdc(Worker 1) utils.rb:68 ]: *** Exception RuntimeError in Rack application object (Missing `secret_key_base` for 'production' environment, set this value in `config/secrets.yml`) (process 4421, thread 0x9d48bdc(Worker 1)):App 4405 stderr: from /usr/local/rvm/gems/ruby-2.1.1/gems/railties-4.1.0/lib/rails/application.rb:440:in `validate_secret_key_config!'App 4405 stderr: from /usr/local/rvm/gems/ruby-2.1.1/gems/railties-4.1.0/lib/rails/application.rb:195:in `env_config'App 4405 stderr: from /usr/local/rvm/gems/ruby-2.1.1/gems/railties-4.1.0/lib/rails/engine.rb:510:in `call'App 4405 stderr: from /usr/local/rvm/gems/ruby-2.1.1/gems/railties-4.1.0/lib/rails/application.rb:144:in `call'App 4405 stderr: from /usr/local/rvm/gems/ruby-2.1.1/gems/passenger-4.0.41/lib/phusion_passenger/rack/thread_handler_extension.rb:74:in `process_request'App 4405 stderr: from /usr/local/rvm/gems/ruby-2.1.1/gems/passenger-4.0.41/lib/phusion_passenger/request_handler/thread_handler.rb:141:in `accept_and_process_next_request'App 4405 stderr: from /usr/local/rvm/gems/ruby-2.1.1/gems/passenger-4.0.41/lib/phusion_passenger/request_handler/thread_handler.rb:109:in `main_loop'App 4405 stderr: from /usr/local/rvm/gems/ruby-2.1.1/gems/passenger-4.0.41/lib/phusion_passenger/request_handler.rb:448:in `block (3 levels) in start_threads'",SemiFixed: Missing `secret_key_base` for 'production' environment
What is the Difference Between a List and a Dictionary," In Python, there are dictionaries: In Ruby, there are Hashes: The only difference is the : versus => syntax. (Note that if the example were using variables instead of strings, then there would be no syntax difference.)In Python, you call a dictionary's value via a key: In Ruby, you grab a Hash's value via a key as well: They appear to be the same.What is the difference between a Hash in Ruby and a dictionary in Python? <code>  residents = {'Puffin' : 104, 'Sloth' : 105, 'Burmese Python' : 106} residents = {'Puffin' => 104, 'Sloth' => 105, 'Burmese Python' => 106} residents['Puffin']# => 104 residents['Puffin']# => 104",What is the difference between a Ruby Hash and a Python dictionary?
What is the difference between a Ruby hash and a Python dictionary," In Python, there are dictionaries: In Ruby, there are Hashes: The only difference is the : versus => syntax. (Note that if the example were using variables instead of strings, then there would be no syntax difference.)In Python, you call a dictionary's value via a key: In Ruby, you grab a Hash's value via a key as well: They appear to be the same.What is the difference between a Hash in Ruby and a dictionary in Python? <code>  residents = {'Puffin' : 104, 'Sloth' : 105, 'Burmese Python' : 106} residents = {'Puffin' => 104, 'Sloth' => 105, 'Burmese Python' => 106} residents['Puffin']# => 104 residents['Puffin']# => 104",What is the difference between a Ruby Hash and a Python dictionary?
What is the difference between a Ruby Hash and a Python dictionary," In Python, there are dictionaries: In Ruby, there are Hashes: The only difference is the : versus => syntax. (Note that if the example were using variables instead of strings, then there would be no syntax difference.)In Python, you call a dictionary's value via a key: In Ruby, you grab a Hash's value via a key as well: They appear to be the same.What is the difference between a Hash in Ruby and a dictionary in Python? <code>  residents = {'Puffin' : 104, 'Sloth' : 105, 'Burmese Python' : 106} residents = {'Puffin' => 104, 'Sloth' => 105, 'Burmese Python' => 106} residents['Puffin']# => 104 residents['Puffin']# => 104",What is the difference between a Ruby Hash and a Python dictionary?
A constant in Integer," I want to define a constant FOO in the namespace of Integer that is similar to Float::NAN in Float, which is itself an instance of Float. It will be used somewhat similar to symbols, i.e., to mark a special case (of an integer). I don't need it to be used in calculation, but I need it to have the following properties:Its class must be Integer or a subclass of Integer, and it must behave so to methods related to class: Optionally (if the class is Integer): It must be distinct from (ideally all) other integers: Ideally, I want it distinct from any other integer, but if that is not possible, I can live with a dirty hack that, say makes Integer::FOO be identical to the largest or the smallest integer, which are the least likely to hit any random given integer.What is the best way to go about this? <code>  Integer::FOO.kind_of?(Integer) # => true Integer::FOO.class # => IntegerInteger === Integer::FOO # => trueInteger::FOO.instance_of?(Integer) # => true Integer::FOO == 0 # => false",Creating a Special Integer
ruby regex: find first not corresponding symbol," I need a very simple string validator that would show where is first symbol not corresponding to the desired format. I want to use regex but in this case I have to find the place where the string stops corresponding to the expression and I can't find a method that would do that.(It's got to be a fairly simple method... maybe there isn't one?)For example if I have regex: with string: The desired result should be 7 <code>  /^Q+E+R+$/ ""QQQQEEE2ER""",At which position does the regex fail?
Remove http:\\ and and httts:\\ . from a string," am new to rubyusing regular expression .how can i remove https and http and www from a string from these sites i want to remove all http ,https and www i used following code but it is not woking for me <code>  server= http://france24.miles.comserver= https://seloger.com france24.miles.comseloger.com server = server.(/^https?\:\/\/(www.)?/,'')","Remove ""http://"" and ""https://"" from a string"
How do I remove emoji from string in Ruby?," My problem is to remove emoji from a string, but not CJK (Chinese, Japanese, Korean) characters from a string using regex. I tried to use this regex: This regex works fine except it also detects the Chinese, Japanese and Korean character where I need those characters. Any idea how to solve this issue? <code>  REGEX = /[^\u1F600-\u1F6FF\s]/i",How do I remove emoji from string
How to clear all the jobs from sidekiq?," I am using sidekiq for background tasks in Rails application. Now the numbers of jobs becomes more, so I want to clear all the jobs. I tried the following command in console but it was giving following error. How do I clear all the jobs from sidekiq? <code>  Sidekiq::Queue.new.clear NameError: uninitialized constant Sidekiq::Queue ",How to clear all the jobs from Sidekiq?
JS-style non-blocking callback execution with Ruby?," I'm a frontend developer, somewhat familiar with Ruby. I only know how to do Ruby in a synchronous/sequential manner, while in JS i'm used to async/non-blocking callbacks.Here's sample Ruby code: The goal is to have the callbacks run without blocking main script execution. In other words, i want ""Hello"" line to appear in output above the ""All 5 requests..."" line. Also, the callbacks should run concurrently, so that the callback fastest to finish makes it into the resulting array first.With JavaScript, i would simply wrap the callback call into a setTimeout with zero delay: This JS approach does not implement true multithreading/concurrency/parallel execution. Under the hood, the callbacks would run all in one thread sequentially, or rather interlaced on the low level.But on practical level it would appear as concurrent execution: the resulting array would be populated in an order corresponding to the amount of time spent by each callback, i. e. the resulting array would appear sorted by the time it took each callback to finish.Note that i only want the asynchronous feature of setTimeout(). I don't need the sleep feature built into setTimeout() (not to be confused with a sleep used in the callback example to imitate a time-consuming operation).I tried to inquire into how to do that JS-style async approach with Ruby and was given suggestions to use:Multithreading. This is probably THE approach for Ruby, but it requires a substantial amount of scaffolding:Manually define an array for threads.Manually define a mutex.Start a new thread for each callback, add it to the array.Pass the mutex into each callback.Use mutex in the callback for thread synchronization.Ensure all threads are completed before program completion.Compared to JavaScript's setTimeout(), this is just too much. As i don't need true parallel execution, i don't want to build that much scaffolding every time i want to execute a proc asynchronously.A sophisticated Ruby library like Celluloid and Event Machine. They look like it will take weeks to learn them.A custom solution like this one (the author, apeiros@freenode, claims it to be very close to what setTimeout does under the hood). It requires almost no scaffolding to build and it does not involve threads. But it seems to run callbacks synchronously, in the order they've been executed.I have always considered Ruby to be a programming language most close to my ideal, and JS to be a poor man's programming language. And it kinda discourages me that Ruby is not able to do a thing which is trivial with JS, without involving heavy machinery.So the question is: what is the simplest, most intuitive way to do do async/non-blocking callback with Ruby, without involving complicated machinery like threads or complex libraries?PS If there will be no satisfying answer during the bounty period, i will dig into #3 by apeiros and probably make it the accepted answer. <code>  results = []rounds = 5callback = ->(item) { # This imitates that the callback may take time to complete sleep rand(1..5) results.push item if results.size == rounds puts ""All #{rounds} requests have completed! Here they are:"", *results end}1.upto(rounds) { |item| callback.call(item) }puts ""Hello"" setTimeout( function() { callback(item); }, 0);","JS-style async/non-blocking callback execution with Ruby, without heavy machinery like threads?"
"JS-style async/non-blocking callback execution with Ruby, without heavy machinery like treads?"," I'm a frontend developer, somewhat familiar with Ruby. I only know how to do Ruby in a synchronous/sequential manner, while in JS i'm used to async/non-blocking callbacks.Here's sample Ruby code: The goal is to have the callbacks run without blocking main script execution. In other words, i want ""Hello"" line to appear in output above the ""All 5 requests..."" line. Also, the callbacks should run concurrently, so that the callback fastest to finish makes it into the resulting array first.With JavaScript, i would simply wrap the callback call into a setTimeout with zero delay: This JS approach does not implement true multithreading/concurrency/parallel execution. Under the hood, the callbacks would run all in one thread sequentially, or rather interlaced on the low level.But on practical level it would appear as concurrent execution: the resulting array would be populated in an order corresponding to the amount of time spent by each callback, i. e. the resulting array would appear sorted by the time it took each callback to finish.Note that i only want the asynchronous feature of setTimeout(). I don't need the sleep feature built into setTimeout() (not to be confused with a sleep used in the callback example to imitate a time-consuming operation).I tried to inquire into how to do that JS-style async approach with Ruby and was given suggestions to use:Multithreading. This is probably THE approach for Ruby, but it requires a substantial amount of scaffolding:Manually define an array for threads.Manually define a mutex.Start a new thread for each callback, add it to the array.Pass the mutex into each callback.Use mutex in the callback for thread synchronization.Ensure all threads are completed before program completion.Compared to JavaScript's setTimeout(), this is just too much. As i don't need true parallel execution, i don't want to build that much scaffolding every time i want to execute a proc asynchronously.A sophisticated Ruby library like Celluloid and Event Machine. They look like it will take weeks to learn them.A custom solution like this one (the author, apeiros@freenode, claims it to be very close to what setTimeout does under the hood). It requires almost no scaffolding to build and it does not involve threads. But it seems to run callbacks synchronously, in the order they've been executed.I have always considered Ruby to be a programming language most close to my ideal, and JS to be a poor man's programming language. And it kinda discourages me that Ruby is not able to do a thing which is trivial with JS, without involving heavy machinery.So the question is: what is the simplest, most intuitive way to do do async/non-blocking callback with Ruby, without involving complicated machinery like threads or complex libraries?PS If there will be no satisfying answer during the bounty period, i will dig into #3 by apeiros and probably make it the accepted answer. <code>  results = []rounds = 5callback = ->(item) { # This imitates that the callback may take time to complete sleep rand(1..5) results.push item if results.size == rounds puts ""All #{rounds} requests have completed! Here they are:"", *results end}1.upto(rounds) { |item| callback.call(item) }puts ""Hello"" setTimeout( function() { callback(item); }, 0);","JS-style async/non-blocking callback execution with Ruby, without heavy machinery like threads?"
Why is slurping a file bad?," Why is ""slurping"" a file not a good practice for normal text-file I/O, and when is it useful?For example, why shouldn't I use these? or <code>  File.read('/path/to/text.txt').lines.each do |line| # do something with a lineend File.readlines('/path/to/text.txt').each do |line| # do something with a lineend","Why is ""slurping"" a file not a good practice?"
Rails 4 Resetting Test Database," I'm on Rails 4 and have noticed some of my RSpec tests are failing because some of my test refactorings use a before filter (presumably because of transactions). This post describes a similar issue:rails test database not clearing after some runsIn lieu of using the DatabaseCleaner gem, is there a rake command to clear out the test database? I believe rake db:test:prepare is deprecated in Rails 4. Also, if before transactions like are persistent, is there an alternative way of refactoring to avoid the need to manually clear out the test database? <code>  `post :create, user: Fabricate.attributes_for(:user)`",Rails 4: How to reset test database?
Using transpose with arrays," I have an array: I have the following code: but it doesn't work,how to solve it?I am getting my solution: output: <code>  arr=[[1,2,3],[4,5],[6]], arr.transpose [[1,2,3],[4,5],[6]].transposeIndexError: element size differs (2 should be 3) from (irb):13:in `transpose' from (irb):13 from /home/durrant arr.reduce(&:zip).map(&:flatten) [[1, 4, 6], [2, 5, nil], [3, nil, nil]]",How can I transpose different sized ruby arrays?
How can I transpose ruby arrays with different elements?," I have an array: I have the following code: but it doesn't work,how to solve it?I am getting my solution: output: <code>  arr=[[1,2,3],[4,5],[6]], arr.transpose [[1,2,3],[4,5],[6]].transposeIndexError: element size differs (2 should be 3) from (irb):13:in `transpose' from (irb):13 from /home/durrant arr.reduce(&:zip).map(&:flatten) [[1, 4, 6], [2, 5, nil], [3, nil, nil]]",How can I transpose different sized ruby arrays?
How can I transpose different sized ruby arrays?," I have an array: I have the following code: but it doesn't work,how to solve it?I am getting my solution: output: <code>  arr=[[1,2,3],[4,5],[6]], arr.transpose [[1,2,3],[4,5],[6]].transposeIndexError: element size differs (2 should be 3) from (irb):13:in `transpose' from (irb):13 from /home/durrant arr.reduce(&:zip).map(&:flatten) [[1, 4, 6], [2, 5, nil], [3, nil, nil]]",How can I transpose different sized ruby arrays?
Updating Gemfile.lock withouth installing gems, Is there a way to force an update of the Gemfile.lock without installing the gems that have changed? <code> ,Updating Gemfile.lock without installing gems
setting categories in jekyll," I have a markdown file as follows: In my _config.yml file, I set the permalink to /:categories/:title.htmlSo when I generate the site, the permalink ends up being /first/second/title.html, whereasI was hoping Jekyll would create /first/title.html and /second/title.htmlIs there a way to do this without custom plugins?Cheers <code>  ---title: My Pagecategories:- first- second---",Setting multiple categories in jekyll
Prevent will_paginate from calling #count of ActiveRelation," When I pass will_paginate an ActiveRelation, it always calls its #count method and hits the database to find out the total number of items. But this operation takes time and I have the total number already cached and ready. Can I pass this pre-calculated count to will_paginate and stop it from hitting the database?I tried the :count option, but it is passed to ActiveRecord as an option: Thanks! :) <code>  active_relation.paginate(page: 2, per_page: 100, count: total_count)",Rails: Prevent will_paginate from calling #count of ActiveRelation
how to delete values from one index to another index in an array in ruby," If array = [1, 2, 3, 4, 5, 6, 7, 8, 9], I want to delete a range of elements from array.For example: I want to delete all elements with an index in the range 2..5 from that array, the result should be [1, 2, 7, 8, 9]Thanks in advance. <code> ",How to delete a range of values from an array?
No implicit conversion of HTTParty response into string, When I am trying to parse some kind of response into JSON I am getting the following error. I have raised JSON::ParserError in my code if incase parsing fails. But this kind of exception does not come under this parser error. I don't know why this kind of error is thrown? and How to rescue this error?code: Error: <code>  begin parsed_response = JSON.parse(response) rescue JSON::ParserError => e nil end A TypeError occurred in background at 2014-11-16 03:01:08 UTC : no implicit conversion of HTTParty::Response into String,No implicit conversion of HTTParty::Response into String
why does perl use /dev/urandom," I strace'd a simple script using perl and bash. Why does perl need the pseudorandom number generator for such a trivial script? I would expect opening /dev/urandom only after the first use of random data.Edit: I also tested python and ruby Why do perl and ruby open it with different modes? <code>  $ strace perl -e 'echo ""test"";' 2>&1 | grep 'random'open(""/dev/urandom"", O_RDONLY) = 3$ strace bash 'echo ""test""' 2>&1 | grep 'random'$ $ strace python -c 'print ""test""' 2>&1 | grep random$$ strace ruby -e 'print ""test\n""' 2>&1 | grep randomopen(""/dev/urandom"", O_RDONLY|O_NOCTTY|O_NONBLOCK|O_CLOEXEC) = 3","why do perl, ruby use /dev/urandom"
POST 422 (Unprocessable Entity) in Rails? Due to the routes or the controller?," I'm trying to give users on my website ""points"" or ""credits"" for tweeting about out the brand name.I have the fancy twitter widget on the appropriate view... I have the JS all written up and pretty.... Now the problem is either in the controller OR in the routes (where I'm posting). I think the routes are fine because the POST is almost working, because this is the description of the error on wikipedia - ""422 Unprocessable Entity (WebDAV; RFC 4918)The request was well-formed but was unable to be followed due to semantic errors.""So, do you guys see anything wrong with my ruby code in the controller? And in my routes.rb, it's pretty straight forward, so I doubt there's anything wrong here... Where oh where is this error? I clearly don't know smack about HTTP requests. <code>  <p><a href=""https://twitter.com/share"" class=""twitter-share-button"" data-text=""Check Out This Awesome Website Yay"" data-via=""BrandName"" data-hashtags=""ProductName"">Tweet</a><div id=""credited""></div><script>window.twttr = (function (d, s, id) { var t, js, fjs = d.getElementsByTagName(s)[0]; if (d.getElementById(id)) return; js = d.createElement(s); js.id = id; js.src= ""https://platform.twitter.com/widgets.js""; fjs.parentNode.insertBefore(js, fjs); return window.twttr || (t = { _e: [], ready: function (f) { t._e.push(f) } });}(document, ""script"", ""twitter-wjs""));</script> function creditTweet() { $.post( ""/credit_tweet"", {}, function(result) { var text; if (result.status === ""noop"") { text = ""Thanks for sharing already!""; } else if (result.status === ""ok"") { text = ""5 Kredit Added""; } $(""#credited"").html(text); } );}$(function() { twttr.ready(function (twttr) { window.twttr.events.bind('tweet', creditTweet); }); }); class SocialKreditController < ApplicationController TWEET_CREDIT_AMOUNT = 5 def credit_tweet if !signed_in? render json: { status: :error } elsif current_user.tweet_credited Rails.logger.info ""Not crediting #{ current_user.id }"" render json: { status: :noop } else Rails.logger.info ""Crediting #{ current_user.id }"" current_user.update_attributes tweet_credited: true current_user.add_points TWEET_CREDIT_AMOUNT render json: { status: :ok } end endend get 'social_kredit/credit_tweet' post '/credit_tweet' => 'social_kredit#credit_tweet'",Rails: POST 422 (Unprocessable Entity) in Rails? Due to the routes or the controller?
Display content of another website on my page using jquery without using iframe," I have made a webpage on my site which will be embedded on another site using jquery. I have to provide jquery code so as when we hit the url from some another site in which my webpage is embedded , my contents of are loaded on page load. I cannot use iframe . I have used .html , .load , .ajax but they always through the error XMLHttpRequest cannot load http://mypage.com/index?user_id=82. No 'Access-Control-Allow-Origin' header is present on the requested resource. Origin 'localserver:port' is therefore not allowed access.Is there a problem with mypage settingsI have checked these: Please suggest <code>  $('#siteloader').load('http://mypage.com/index?user_id=82');$(""#siteloader"").html('<object data=""http://mypage.com/index?user_id=82"">');",Display content of another website on my page using jquery without using iframe in Rails
Sort Ruby Hash Alphabetically by key," I am trying to sort a Hash alphabetically by key, but I can't seem to find a way to do it without creating my own Sorting class. I found the code below to sort by value if it's an integer and I am trying to modify it but not having any luck. My goal is to order the Hash by key then output the values. I will have to do this multiple times with different hash orders but the same values. <code>  temp[""ninjas""]=36temp[""pirates""]=12temp[""cheese""]=222temp.sort_by { |key, val| key }",How to sort a Ruby Hash alphabetically by keys
bug when switching to Rails 4.1 - `method_missing': undefined method `whitelist_attributes=' for ActiveRecord::Base:Class (NoMethodError), When switching from Rails 4.0 to Rails 4.1 I am getting this error: I am not using attr_accessible or attr_protected anywhere on my app so I wonder why I have a problem.When moving to Rails 4.0 I had already put on my application.rb:config/application.rb: The full error log is: I'm really lost here as most people having bugs kind of related to mine suggest to use gem 'protected_attributesbut I don't want to use it as I don't have anyattr_accessiblenorattr_protected`.Any idea where this bug comes from ? <code>  activerecord-4.1.8/lib/active_record/dynamic_matchers.rb:26:in `method_missing': undefined method `whitelist_attributes=' for ActiveRecord::Base:Class (NoMethodError) config.active_record.whitelist_attributes = false /home/mathieu/.rvm/gems/ruby-2.0.0-p451@rails3tutorial2ndEd/gems/activerecord-4.1.8/lib/active_record/dynamic_matchers.rb:26:in `method_missing': undefined method `whitelist_attributes=' for ActiveRecord::Base:Class (NoMethodError) from /home/mathieu/.rvm/gems/ruby-2.0.0-p451@rails3tutorial2ndEd/gems/activerecord-4.1.8/lib/active_record/railtie.rb:110:in `block (3 levels) in <class:Railtie>' from /home/mathieu/.rvm/gems/ruby-2.0.0-p451@rails3tutorial2ndEd/gems/activerecord-4.1.8/lib/active_record/railtie.rb:109:in `each' from /home/mathieu/.rvm/gems/ruby-2.0.0-p451@rails3tutorial2ndEd/gems/activerecord-4.1.8/lib/active_record/railtie.rb:109:in `block (2 levels) in <class:Railtie>' from /home/mathieu/.rvm/gems/ruby-2.0.0-p451@rails3tutorial2ndEd/gems/activesupport-4.1.8/lib/active_support/lazy_load_hooks.rb:38:in `instance_eval' from /home/mathieu/.rvm/gems/ruby-2.0.0-p451@rails3tutorial2ndEd/gems/activesupport-4.1.8/lib/active_support/lazy_load_hooks.rb:38:in `execute_hook' from /home/mathieu/.rvm/gems/ruby-2.0.0-p451@rails3tutorial2ndEd/gems/activesupport-4.1.8/lib/active_support/lazy_load_hooks.rb:28:in `block in on_load' from /home/mathieu/.rvm/gems/ruby-2.0.0-p451@rails3tutorial2ndEd/gems/activesupport-4.1.8/lib/active_support/lazy_load_hooks.rb:27:in `each' from /home/mathieu/.rvm/gems/ruby-2.0.0-p451@rails3tutorial2ndEd/gems/activesupport-4.1.8/lib/active_support/lazy_load_hooks.rb:27:in `on_load' from /home/mathieu/.rvm/gems/ruby-2.0.0-p451@rails3tutorial2ndEd/gems/activerecord-4.1.8/lib/active_record/railtie.rb:108:in `block in <class:Railtie>' from /home/mathieu/.rvm/gems/ruby-2.0.0-p451@rails3tutorial2ndEd/gems/railties-4.1.8/lib/rails/initializable.rb:30:in `instance_exec' from /home/mathieu/.rvm/gems/ruby-2.0.0-p451@rails3tutorial2ndEd/gems/railties-4.1.8/lib/rails/initializable.rb:30:in `run' from /home/mathieu/.rvm/gems/ruby-2.0.0-p451@rails3tutorial2ndEd/gems/railties-4.1.8/lib/rails/initializable.rb:55:in `block in run_initializers' from /home/mathieu/.rvm/rubies/ruby-2.0.0-p451/lib/ruby/2.0.0/tsort.rb:150:in `block in tsort_each' from /home/mathieu/.rvm/rubies/ruby-2.0.0-p451/lib/ruby/2.0.0/tsort.rb:183:in `block (2 levels) in each_strongly_connected_component' from /home/mathieu/.rvm/rubies/ruby-2.0.0-p451/lib/ruby/2.0.0/tsort.rb:219:in `each_strongly_connected_component_from' from /home/mathieu/.rvm/rubies/ruby-2.0.0-p451/lib/ruby/2.0.0/tsort.rb:182:in `block in each_strongly_connected_component' from /home/mathieu/.rvm/rubies/ruby-2.0.0-p451/lib/ruby/2.0.0/tsort.rb:180:in `each' from /home/mathieu/.rvm/rubies/ruby-2.0.0-p451/lib/ruby/2.0.0/tsort.rb:180:in `each_strongly_connected_component' from /home/mathieu/.rvm/rubies/ruby-2.0.0-p451/lib/ruby/2.0.0/tsort.rb:148:in `tsort_each' from /home/mathieu/.rvm/gems/ruby-2.0.0-p451@rails3tutorial2ndEd/gems/railties-4.1.8/lib/rails/initializable.rb:54:in `run_initializers' from /home/mathieu/.rvm/gems/ruby-2.0.0-p451@rails3tutorial2ndEd/gems/railties-4.1.8/lib/rails/application.rb:300:in `initialize!' from /home/mathieu/.rvm/gems/ruby-2.0.0-p451@rails3tutorial2ndEd/gems/railties-4.1.8/lib/rails/railtie.rb:194:in `public_send' from /home/mathieu/.rvm/gems/ruby-2.0.0-p451@rails3tutorial2ndEd/gems/railties-4.1.8/lib/rails/railtie.rb:194:in `method_missing' from /home/mathieu/rails_projects/app/config/environment.rb:5:in `<top (required)>' from /home/mathieu/.rvm/gems/ruby-2.0.0-p451@rails3tutorial2ndEd/gems/activesupport-4.1.8/lib/active_support/dependencies.rb:247:in `require' from /home/mathieu/.rvm/gems/ruby-2.0.0-p451@rails3tutorial2ndEd/gems/activesupport-4.1.8/lib/active_support/dependencies.rb:247:in `block in require' from /home/mathieu/.rvm/gems/ruby-2.0.0-p451@rails3tutorial2ndEd/gems/activesupport-4.1.8/lib/active_support/dependencies.rb:232:in `load_dependency' from /home/mathieu/.rvm/gems/ruby-2.0.0-p451@rails3tutorial2ndEd/gems/activesupport-4.1.8/lib/active_support/dependencies.rb:247:in `require' from /home/mathieu/rails_projects/_app/config.ru:3:in `block in <main>' from /home/mathieu/.rvm/gems/ruby-2.0.0-p451@global/gems/rack-1.5.2/lib/rack/builder.rb:55:in `instance_eval' from /home/mathieu/.rvm/gems/ruby-2.0.0-p451@global/gems/rack-1.5.2/lib/rack/builder.rb:55:in `initialize' from /home/mathieu/rails_projects/app/config.ru:in `new' from /home/mathieu/rails_projects/app/config.ru:in `<main>' from /home/mathieu/.rvm/gems/ruby-2.0.0-p451@global/gems/rack-1.5.2/lib/rack/builder.rb:49:in `eval' from /home/mathieu/.rvm/gems/ruby-2.0.0-p451@global/gems/rack-1.5.2/lib/rack/builder.rb:49:in `new_from_string' from /home/mathieu/.rvm/gems/ruby-2.0.0-p451@global/gems/rack-1.5.2/lib/rack/builder.rb:40:in `parse_file' from /home/mathieu/.rvm/gems/ruby-2.0.0-p451@global/gems/rack-1.5.2/lib/rack/server.rb:277:in `build_app_and_options_from_config' from /home/mathieu/.rvm/gems/ruby-2.0.0-p451@global/gems/rack-1.5.2/lib/rack/server.rb:199:in `app' from /home/mathieu/.rvm/gems/ruby-2.0.0-p451@rails3tutorial2ndEd/gems/railties-4.1.8/lib/rails/commands/server.rb:50:in `app' from /home/mathieu/.rvm/gems/ruby-2.0.0-p451@global/gems/rack-1.5.2/lib/rack/server.rb:314:in `wrapped_app' from /home/mathieu/.rvm/gems/ruby-2.0.0-p451@rails3tutorial2ndEd/gems/railties-4.1.8/lib/rails/commands/server.rb:130:in `log_to_stdout' from /home/mathieu/.rvm/gems/ruby-2.0.0-p451@rails3tutorial2ndEd/gems/railties-4.1.8/lib/rails/commands/server.rb:67:in `start' from /home/mathieu/.rvm/gems/ruby-2.0.0-p451@rails3tutorial2ndEd/gems/railties-4.1.8/lib/rails/commands/commands_tasks.rb:81:in `block in server' from /home/mathieu/.rvm/gems/ruby-2.0.0-p451@rails3tutorial2ndEd/gems/railties-4.1.8/lib/rails/commands/commands_tasks.rb:76:in `tap' from /home/mathieu/.rvm/gems/ruby-2.0.0-p451@rails3tutorial2ndEd/gems/railties-4.1.8/lib/rails/commands/commands_tasks.rb:76:in `server' from /home/mathieu/.rvm/gems/ruby-2.0.0-p451@rails3tutorial2ndEd/gems/railties-4.1.8/lib/rails/commands/commands_tasks.rb:40:in `run_command!' from /home/mathieu/.rvm/gems/ruby-2.0.0-p451@rails3tutorial2ndEd/gems/railties-4.1.8/lib/rails/commands.rb:17:in `<top (required)>' from bin/rails:4:in `require' from bin/rails:4:in `<main>',Bug when switching to Rails 4.1 - `method_missing': undefined method `whitelist_attributes=' for ActiveRecord::Base:Class (NoMethodError)
Rails 4.2 add nullable foreign key," Referencing to Rails 4.2 add_foreign_key support: How to create a nullable foreign key constraint, to allow the situation, where articles.author_id can be sometimes null? <code>  # add a foreign key to `articles.author_id` referencing `authors.id` add_foreign_key :articles, :authors",Add nullable foreign key in Rails
Add nullable foreign key," Referencing to Rails 4.2 add_foreign_key support: How to create a nullable foreign key constraint, to allow the situation, where articles.author_id can be sometimes null? <code>  # add a foreign key to `articles.author_id` referencing `authors.id` add_foreign_key :articles, :authors",Add nullable foreign key in Rails
how to format ActiveSupport::TimeWithZone instance to specified format," I have a ActiveSupport::TimeWithZone instance like 2014-12-22 05:54:34 UTC, but I only want to keep the date info 2014-12-22I tried Rail's to_formatted_s, but it didn't work for me. Which displays: 2014-12-22 05:54:34 <code>  <%= item.updated_at.to_formatted_s(:db) %>",How to format ActiveSupport::TimeWithZone instance to specified format
Does Ruby uniq() preserve ordering?," The documentation doesn't say anything about that (http://www.ruby-doc.org/core-2.2.0/Array.html#method-i-uniq). Also, is it using a naive O(n^2) search or something else like a hashmap ? In the latter case, should I understand that my elements must have a proper implementation of hash and eql? when I want to unicize them ? <code> ",Does Ruby uniq preserve ordering?
Thread safety of Redis Ruby Gem," I'm using Redis in my application, both for Sidekiq queues, and for model caching.What is the best way to have a Redis connection available to my models, considering that the models that will be hitting Redis will be called both from my Web application (ran via Puma), and from background jobs inside Sidekiq?I'm currently doing this in my initializers: And then simply use Redis.current.get / Redis.current.set (and similar) throughout the code...This should be thread-safe, as far as I understand, since the Redis Client only runs one command at a time, using a Monitor.Now, Sidekiq has its own connection pool to Redis, and recommends doing As I understand it, this would be better than the approach of just using Redis.current because you don't have multiple workers on multiple threads waiting on each other on a single connection when they hit Redis.However, how can I make this connection that I get from Sidekiq.redis available to my models? (without having to pass it around as a parameter in every method call)I can't set Redis.current inside that block, since it's global, and I'm back to everyone using the same connection (plus switching between them randomly, which might even be non-thread-safe)Should I store the connection that I get from Sidekiq.Redis into a Thread-local variable, and use that thread-local variable everywhere?In that case, what do I do in the ""Puma"" context? How do I set the thread-local variable?Any thoughts on this are greatly appreciated.Thank you! <code>  Redis.current = Redis.new(host: 'localhost', port: 6379) Sidekiq.redis do |conn| conn.get conn.setend",What is the best way to use Redis in a Multi-threaded Rails environment? (Puma / Sidekiq)
"ruby - read files line by line with \r, \n or \r\n as line separator"," I want to process files line by line. However, these files have different line separators: ""\r"", ""\n"" or ""\r\n"". I don't know which one they use or which kind of OS they come from.I have two solutions: using bash command to translate these separators to ""\n"". read the whole file and gsub these separators but the second solution is not good when the file is huge. See reference. Is there any other ruby idiomatic and efficient solution? <code>  cat file |tr '\r\n' '\n' |tr '\r' '\n' |ruby process.rb text=File.open('xxx.txt').readtext.gsub!(/\r\n?/, ""\n"")text.each_line do |line| do some thingend","Read files line by line with \r, \n or \r\n as line separator"
How to create a associated factory when creating a factory and load both in the controller," A user has many comments, so I would like to have a factory user with a comment associated to it (user_with_comment): It works fine... when I call FactoryGirl.create(:user_with_comment), it creates the user and the related comment in my test db.However, I'm facing some issues in the controller_spec:Using let I have to reload the user to see the comment: One solution would be using before(:each), but it will create venda and comment before each test: Or, I can reload the userbefore each test, but it will also hit the database: What is the best approach in this situation?  <code>  factory :user, class: User do |t| ... factory :user_with_comment do |t| after(:create) do |user| FactoryGirl.create(:comment, user_id: user.id) endend let(:user) { FactoryGirl.create(:user_with_comment) }user.comments.size #=>0user.reloaduser.comments.size #=>1 before(:each) do @user = FactoryGirl.create(:user_with_comment)end@user.comments.size #=>1 let(:user) { FactoryGirl.create(:user_with_comment) }before(:each) do user.reloadend",How to reload a variable defined by let
"How to create an associated factory when creating a factory, loading both in the controller"," A user has many comments, so I would like to have a factory user with a comment associated to it (user_with_comment): It works fine... when I call FactoryGirl.create(:user_with_comment), it creates the user and the related comment in my test db.However, I'm facing some issues in the controller_spec:Using let I have to reload the user to see the comment: One solution would be using before(:each), but it will create venda and comment before each test: Or, I can reload the userbefore each test, but it will also hit the database: What is the best approach in this situation?  <code>  factory :user, class: User do |t| ... factory :user_with_comment do |t| after(:create) do |user| FactoryGirl.create(:comment, user_id: user.id) endend let(:user) { FactoryGirl.create(:user_with_comment) }user.comments.size #=>0user.reloaduser.comments.size #=>1 before(:each) do @user = FactoryGirl.create(:user_with_comment)end@user.comments.size #=>1 let(:user) { FactoryGirl.create(:user_with_comment) }before(:each) do user.reloadend",How to reload a variable defined by let
ROR + Convert Seconds into Hours only - except the days," In Rails, I am trying to convert seconds into hours only. But coincidently function gives something else. After some interval like 24 hours, it converts into day as well. I am trying to use any Ruby inbuilt function to get total hours only. <code>  For example - Second = 164580Output like : 45:43:0",Converting seconds into hours only using Ruby in-built function - except the days
ROR + Convert Seconds into Hours only using Ruby InBuilt Function - except the days," In Rails, I am trying to convert seconds into hours only. But coincidently function gives something else. After some interval like 24 hours, it converts into day as well. I am trying to use any Ruby inbuilt function to get total hours only. <code>  For example - Second = 164580Output like : 45:43:0",Converting seconds into hours only using Ruby in-built function - except the days
Rails autoloading fully capitalized name," I have some structure/lib/dokuwiki.rb/lib/dokuwiki/exception.rb/lib/dokuwiki/api/connection.rbdokuwiki.rb dokuwiki/api/connection.rb Now, when I try to call Dokuwiki::API::Connection.new from a controller (without any require), Rails default constants autoloading fails. I believe this is because the ::API module should have a folder named /a_p_i/ instead of /api/ but that's ugly.Of course I could require 'dokuwiki/api/connection.rb', in the main '/lib/dokuwiki.rb' file, but then it wouldn't reload this class automatically (which is kinda annoying in a dev context)What can I do to keep the nice /api/ folder name and be able to do some live modifications to /lib/dokuwiki/api/connection.rb without having to restart my server ? <code>  require 'dokuwiki/exception.rb'module Dokuwiki ... module Dokuwiki module API class Connection ...",Rails autoloading fully capitalized name like API
Undefined method `truncate' in model," I have the following method in my model which crops the record's description, but for an unknown reason the truncate method does not work: Anyone sees what I'm doing wrong? Thanks. <code>  def cropped_description nb_words_max = 500 if description.length > nb_words_max truncate(description, :length => nb_words_max, :separator => ' ') + "" ..."" else description endend",Rails: Undefined method `truncate' in model
gem install rails fails on ubuntu," The error message: Configurations:Ubuntu 14.10 (GNU/Linux 3.16.0-23-generic x86_64)gcc (Ubuntu 4.9.1-16ubuntu6) 4.9.1ruby 2.1.2p95 (2014-05-08) [x86_64-linux-gnu] <code>  Building native extensions. This could take a while...ERROR: Error installing rails: ERROR: Failed to build gem native extension. /usr/bin/ruby2.1 -r ./siteconf20150328-1540-hff2f0.rb extconf.rbchecking if the C compiler accepts ... *** extconf.rb failed ***Could not create Makefile due to some reason, probably lack of necessarylibraries and/or headers. Check the mkmf.log file for more details. You mayneed configuration options.Provided configuration options: --with-opt-dir --without-opt-dir --with-opt-include --without-opt-include=${opt-dir}/include --with-opt-lib --without-opt-lib=${opt-dir}/lib --with-make-prog --without-make-prog --srcdir=. --curdir --ruby=/usr/bin/ruby2.1 --help --clean/usr/lib/ruby/2.1.0/mkmf.rb:456:in `try_do': The compiler failed to generate an executable file. (RuntimeError)You have to install development tools first. from /usr/lib/ruby/2.1.0/mkmf.rb:571:in `block in try_compile' from /usr/lib/ruby/2.1.0/mkmf.rb:522:in `with_werror' from /usr/lib/ruby/2.1.0/mkmf.rb:571:in `try_compile' from extconf.rb:80:in `nokogiri_try_compile' from extconf.rb:87:in `block in add_cflags' from /usr/lib/ruby/2.1.0/mkmf.rb:621:in `with_cflags' from extconf.rb:86:in `add_cflags' from extconf.rb:337:in `<main>'extconf failed, exit code 1Gem files will remain installed in /var/lib/gems/2.1.0/gems/nokogiri-1.6.6.2 for inspection.Results logged to /var/lib/gems/2.1.0/extensions/x86_64-linux/2.1.0/nokogiri-1.6.6.2/gem_make.out",How to use gem to install Rails on Ubuntu
Compass in Symfony 2 Assetic Filter Exception," I have installed compass in my symfony 2 project. Now i want to use the assetic filter in combination with compass. i am using windows 7.I think it's almost working but i am still getting this error : My code in html (twig) : stylesheets.html.twig base.html.twig: index.html.twig: my config.yml filter assetic configuration: base.scss <code>  [Assetic\Exception\FilterException]An error occurred while running:""C:\Ruby21-x64\bin\ruby.EXE"" ""C:\Ruby21-x64\bin\compass.BAT"" ""compile"" ""C:\Users\tommie\AppData\Local\Temp"" ""--boring"" ""--config"" ""C:\Users\tommie\AppData\Local\Temp\ass4325.tmp"" ""--sass-dir"" """" ""--css-dir"" """" ""C:/Users/tommie/AppData/Local/Temp/ass4326.tmp.scss""Error Output:C:/Ruby21-x64/bin/compass.BAT:1: syntax error, unexpected tCONSTANT, expecting end-of-input {% stylesheets filter=""compass"" output='css/compiled/*.css' ""@AcmeSassDemoBundle/Resources/assets/css/base.scss""%}<link rel=""stylesheet"" href=""{{ asset_url }}"" />{% endstylesheets %} <!DOCTYPE html><html><head> <meta http-equiv=""Content-Type"" content=""text/html; charset=utf-8"" /> <title>{% block title %}Sass Demo!{% endblock %}</title> {#{% block stylesheets %}{% endblock %} #} {% include ""AcmeSassDemoBundle:Demo:stylesheets.html.twig"" %} <link rel=""shortcut icon"" href=""{{ asset('favicon.ico') }}"" /></head><body> <div id=""header""> {% block header %} <h1>Sass Demo</h1> <div class=""logo"">this container is half as big as the sass.gif's dimension</div> {% endblock %} </div> <div id=""menu""> <ul> <li class=""add""><a href=""#"">add something</a></li> <li class=""edit""><a href=""#"">edit something</a></li> <li class=""delete""><a href=""#"">delete something</a></li> </ul> </div> <div id=""content""> {% block body %}hello sass!{% endblock %} </div> <div id=""footer""> {% block footer %}awesome footer goes here ...{% endblock %} </div> {% block javascripts %}{% endblock %}</</body> {% extends 'AcmeSassDemoBundle:Demo:base.html.twig' %}{% block body %}<div class=""content""> hello world <div class=""sub""> This text should be in green ... <div class=""sub""> ... and this one in blue! </div></div> # Assetic Configurationassetic: debug: false use_controller: true# default: true filters: sass: ~ compass: compass: bin: C:\Ruby21-x64\bin\compass.bat $main-background-color: #FFF;$main-color: #FFF;$light-color: #759E1A;$link-color: #0088CC;body { background-color: #CCC;}@mixin rounded($side, $radius: 10px) { border-radius: $radius; border-#{$side}-radius: $radius; -moz-border-radius-#{$side}: $radius; -webkit-border-#{$side}-radius: $radius;}@import ""header.scss"";@import ""menu.scss"";@import ""content.scss"";@import ""footer.scss"";",Compass in Symfony 2 assetic Filter Exception
Ruby on Rails Titleize Hyphenated Name," Rails' titleize method removes hyphens, and Ruby's capitalize method does not capitalize the word that comes after a hyphen. I want something like the following: <code>  ""mary-joe spencer-moore"" => ""Mary-Joe Spencer-Moore""""mary-louise o'donnell"" => ""Mary-Louise O'Donnell""",titleize a hyphenated name
bundle command not found mac," I'm using ruby, and I was given a zip file with some ruby programs and it says: inside the folder, run bundle install to install the packages required. When I run the command in my terminal, it says bundle command not found. Can someone please give me a detailed description of how I can fix this? <code> ",Bundle command not found mac
Remove all newline and space from string in ruby," How can I remove all newlines and spaces from a string in Ruby?For example, if we have a string: It should become this: That is, all whitespaces should be removed. <code>  ""123\n12312313\n\n123 1231 1231 1"" ""12312312313123123112311""",Removing all whitespace from a string in Ruby
how to specify index name when using add_reference in rails migrations," I have the following migration when i run rake db:migrate i am getting the errorIndex name 'index_doctors_on_doctor_specialization_type_and_doctor_specialization_id' on table 'doctors' is too long; the limit is 63 characters so how can i specify the index name when using add_reference like the way we specify in add_index :table, :column, :name => 'index name' <code>  class LinkDoctorsAndSpecializations < ActiveRecord::Migration def up add_reference :doctors, :doctor_specialization, polymorphic: true, index: true end def down remove_reference :doctors, :doctor_specialization, polymorphic: true endend",Specify custom index name when using add_reference
Using a Ruby block to assign variables in chef recipe," I am trying to execute Ruby logic on the fly in a Chef recipe and believe that the best way to achieve this is with a block.I am having difficulty transferring variables assigned inside the block to the main code of the chef recipe. This is what I tried: Rather than try to re-assign the chef attribute on the fly, I also tried to create new variables in the block but still can't find a way to access them in the execute statement.I was originally using a class and calling methods however it was compiled before the recipe and I really need the logic to be executed at runtime, during the recipe. <code>  ruby_block ""Create list"" do block do to_use ||= [] node['hosts'].each do |host| system( ""#{path}/command --all"" \ "" | awk '{print $2; print $3}'"" \ "" | grep #{host} > /dev/null"" ) unless $? == 0 to_use << host end end node['hosts'] = to_use.join(',') end action :createendexecute ""Enable on hosts"" do command ""#{path}/command --enable -N #{node['hosts']}""end",How to use a Ruby block to assign variables in chef recipe
Segmentation fault when embedding rust lib with ruby FFI," I want to pass in a String to a Rust lib, but it always throws a segmentation fault.Here's the code: And the Ruby file: <code>  // lib.rs #[no_mangle] pub extern fn process(foo: String) -> String { foo } # embed.rb require 'ffi' module Hello extend FFI::Library ffi_lib 'target/release/libembed.dylib' attach_function :process, [ :string ], :string end puts Hello.process(""foo"")",Segmentation fault when calling a Rust lib with Ruby FFI
TimeWithZone & Time.zone.now integration test error," In a controller method I set a user's variable activation_sent_at equal to Time.zone.now when an activation email is sent to that user. On the development server this seems to work (although time expressions in my application are 2 hours behind on the local time of my computer).I want to include an integration test that tests whether activation_sent_at indeed gets set properly. So I included the line: However, this produces the error: I think it's suggesting to use another expression for Time.zone.now in my test. I've looked at different sources, including http://api.rubyonrails.org/classes/ActiveSupport/TimeWithZone.html, but am not sure what to do here. Any suggestions what could be causing this error?Additional info: Adding puts Time.zone.now and puts @stakeholder.activation_sent_at confirms the two are equal. Not sure what generates the failure/error. <code>  assert_equal @user.activation_sent_at, Time.zone.now No visible difference in the ActiveSupport::TimeWithZone#inspect output.You should look at the implementation of #== on ActiveSupport::TimeWithZone or its members.",TimeWithZone & Time.zone.now integration test fails
"Use of single ""="" in working if statement. Why?"," This code is provided as an example in for use with devise and OmniAuth, it works in my project. I don't know why it's a single equals sign as apposed to a double equals sign, which I thought was necessary for if-statements. My IDE ""intelliJ IDEA"" agrees with my concerns. <code>  class User < ActiveRecord::Base def self.new_with_session(params, session) super.tap do |user| if data = session[""devise.facebook_data""] && session[""devise.facebook_data""][""extra""][""raw_info""] user.email = data[""email""] if user.email.blank? end end endend",Why does single `=` work in `if` statement?
Does Ruby support nonblocking HTTP requests without a third party library?," I am writing an API to access resources on one of my servers. Part of this API will make HTTP requests. In the name of good software design, I don't want my API to be blocking. I am fairly new to Ruby, but in Java I would provide an Asynchronous API that returns Futures of the response. In JavaScript I would take callbacks in my methods.I've searched for other Stack Overflow questions, and https://github.com/eventmachine/em-http-request seems to do what I want. However, I am hesitant to rely on a third-party library. Is there a Ruby native way to solve this problem, or do most developers rely on third-party libraries? <code> ",Does Ruby support nonblocking HTTP requests without a third-party library?
WITH RECURSIVE in Arel, I have the following SQL which recursively gets all of the parents of a record using WITH RECURSIVE. What would the equivalent of this be in Arel? <code>  table_name = self.class.table_namearel_table = self.class.arel_tablesql = <<-SQL WITH RECURSIVE a AS ( SELECT * FROM #{table_name} WHERE id = '#{id}' UNION ALL SELECT b.* FROM #{table_name} b JOIN a ON b.id = a.parent_id ) SELECT id FROM aSQLids = ActiveRecord::Base.connection.execute(sql).field_values('id')ordering = ids.map { |id| arel_table[:id].eq(id) }self.class.where(id: ids).order(ordering),Equivalent for SQL WITH RECURSIVE in Arel
How to run Mocha and RSpec tests together on Travis CI," I have a repo that contains multiple components, most of them in JavaScript (Node.js) and one written in Ruby (Ruby on Rails). I'd like to have one .travis.yml file that triggers one build that runs all the tests for each of the components. According to this Travis CI Google Group thread, there is no official support for this for now.My directory structure looks like this:. buildserver core extensions webapp Vagrantfile package.json .travis.yml MakefileI want to be able to run specific versions of Ruby (2.2.2) and Node.js (0.12.2). I already have a make target, so make test runs appropriate test suite in each subdirectory. <code> ",How to run Node.js and Ruby tests within one project on Travis CI
Difference between Design pattern and design principles," I'm new to Ruby on Rails, and I went through these articles.Design Patterns in Ruby: Observer, SingletonDesign Patterns in RubyBut I couldn't understand the actual difference between design patterns and design principles.Could someone please explain the distinction? <code> ",What's the difference between design patterns and design principles?
What's the difference between design pattern and design principles?," I'm new to Ruby on Rails, and I went through these articles.Design Patterns in Ruby: Observer, SingletonDesign Patterns in RubyBut I couldn't understand the actual difference between design patterns and design principles.Could someone please explain the distinction? <code> ",What's the difference between design patterns and design principles?
rails 4 best inverse_of best practices?," I am developing a web app using rails 4 for the first time. I am making all of my model associations bidirectional and using inverse_of wherever it is allowed. From reading the documentation, I've developed the impression that this is probably the best practice, but that's never really spelled out clearly anywhere. I'd appreciate any general advice in this regard from experienced rails developers. I hope the question is not too vague to have value here.Thanks!Update: In addition to non-standard names, there appear to be two main additional cases where explicitly setting inverse_of is needed:for INVALID_AUTOMATIC_INVERSE_OPTIONS ( http://www.rubydoc.info/docs/rails/ActiveRecord/Reflection/AssociationReflection )if you're accepting nested attributes - This is because the parent object is not saved yet and thus does not have an id. See http://viget.com/extend/exploring-the-inverse-of-option-on-rails-model-associations  <code> ","rails 4 When is ""inverse_of"" required?"
"rails 4 ""inverse_of"" best practices?"," I am developing a web app using rails 4 for the first time. I am making all of my model associations bidirectional and using inverse_of wherever it is allowed. From reading the documentation, I've developed the impression that this is probably the best practice, but that's never really spelled out clearly anywhere. I'd appreciate any general advice in this regard from experienced rails developers. I hope the question is not too vague to have value here.Thanks!Update: In addition to non-standard names, there appear to be two main additional cases where explicitly setting inverse_of is needed:for INVALID_AUTOMATIC_INVERSE_OPTIONS ( http://www.rubydoc.info/docs/rails/ActiveRecord/Reflection/AssociationReflection )if you're accepting nested attributes - This is because the parent object is not saved yet and thus does not have an id. See http://viget.com/extend/exploring-the-inverse-of-option-on-rails-model-associations  <code> ","rails 4 When is ""inverse_of"" required?"
'rake' and 'rake spec' don't run with custom RAILS_ENV but 'rspec' and 'bundle exec rspec' do," So I'm having a bit of a bizarre issue. I have a custom rails environment setup for my CI server which is running linux. The environment gets loaded properly, and the tests DO run on the CI server, but only if I run them with bundle exec rspec instead of bundle exec rake spec or bundle exec rake.When the tests don't run, they still return an exit code of 0 and the CI server assumes the build was successful, even if theoretically the build may be broken.Identical behavior occurs on my machine, which is running OS X.Here's a console session with all the different test cases to better illustrate what's happening.No RAILS_ENV specified Everything is working as expectedWith a standard RAILS_ENVResults are identical with test, development, or production Once again everything is fine and dandy.With a custom RAILS_ENV Due to the nature of the CI server's setup, I have to run the tests within bundle exec. But what I find mind boggling is that on my machine RAILS_ENV=ci rake works flawlessly, while RAILS_ENV=ci rake spec doesn't run.But when I wrap them in a bundle exec neither rake nor rake spec run in RAILS_ENV=ci but bundle exec rspec works fine.Can someone explain what is going on here? I can't find a way for this to make any logical sense. Have I stumbled upon a bug in Rails' rake tasks?EDIT: In response to haradwaith's answer:You bring up some really good points, and the first point is spot on (it runs the rspec executable directly), but I can't say your answer adequately explains what's happening.This behavior is not specific to my machine, the behavior is identical on a clean ruby:2.2 Docker container which runs bundle install before every test. As it loads a clean container each time, there is no way for ""old"" versions of gems to creep in.To further replicate the ""clean slate"" of the Docker container, I just did a test on my machine with an empty gemset to rule out gem version conflicts and got identical results: http://pastebin.com/9u3MJaFwMy Gemfile does indeed have no mention of a :ci group. If the rspec-rails gem isn't being loaded, then RAILS_ENV=ci rake with no arguments wouldn't run Rspec as the default Rake task, but it clearly does. We can also see that it has different behavior depending on whether or not its being ran with bundle exec. I don't believe that running with bundle exec would ""unload"" rspec-rails if running it without bundler somehow manages to load it automatically.If rspec and/or rspec-rails weren't being loaded, the rake would fail with an exit code other than 0, and spit out something like:~/not-myapp $ touch Rakefile~/not-myapp $ rake specrake aborted!Don't know how to build task 'spec'(See full trace by running task with --trace) <code>  ~/myapp $ rake/Users/io/.rvm/rubies/ruby-2.2.0/bin/ruby -I/Users/io/.rvm/gems/ruby-2.2.0/gems/rspec-core-3.3.2/lib:/Users/io/.rvm/gems/ruby-2.2.0/gems/rspec-support-3.3.0/lib /Users/io/.rvm/gems/ruby-2.2.0/gems/rspec-core-3.3.2/exe/rspec --pattern spec/\*\*\{,/\*/\*\*\}/\*_spec.rb...............................................Finished in 4.34 seconds (files took 3.1 seconds to load)47 examples, 0 failures# -----~/myapp $ rake spec/Users/io/.rvm/rubies/ruby-2.2.0/bin/ruby -I/Users/io/.rvm/gems/ruby-2.2.0/gems/rspec-core-3.3.2/lib:/Users/io/.rvm/gems/ruby-2.2.0/gems/rspec-support-3.3.0/lib /Users/io/.rvm/gems/ruby-2.2.0/gems/rspec-core-3.3.2/exe/rspec --pattern spec/\*\*\{,/\*/\*\*\}/\*_spec.rb...............................................Finished in 3.8 seconds (files took 3.36 seconds to load)47 examples, 0 failures# -----~/myapp $ rspec...............................................Finished in 3.87 seconds (files took 2.98 seconds to load)47 examples, 0 failures# -----~/myapp $ bundle exec rake/Users/io/.rvm/rubies/ruby-2.2.0/bin/ruby -I/Users/io/.rvm/gems/ruby-2.2.0/gems/rspec-core-3.3.2/lib:/Users/io/.rvm/gems/ruby-2.2.0/gems/rspec-support-3.3.0/lib /Users/io/.rvm/gems/ruby-2.2.0/gems/rspec-core-3.3.2/exe/rspec --pattern spec/\*\*\{,/\*/\*\*\}/\*_spec.rb...............................................Finished in 3.9 seconds (files took 3.03 seconds to load)47 examples, 0 failures# -----~/myapp $ bundle exec rake spec/Users/io/.rvm/rubies/ruby-2.2.0/bin/ruby -I/Users/io/.rvm/gems/ruby-2.2.0/gems/rspec-core-3.3.2/lib:/Users/io/.rvm/gems/ruby-2.2.0/gems/rspec-support-3.3.0/lib /Users/io/.rvm/gems/ruby-2.2.0/gems/rspec-core-3.3.2/exe/rspec --pattern spec/\*\*\{,/\*/\*\*\}/\*_spec.rb...............................................Finished in 3.64 seconds (files took 2.97 seconds to load)47 examples, 0 failures# -----~/myapp $ bundle exec rspec...............................................Finished in 3.75 seconds (files took 2.95 seconds to load)47 examples, 0 failures ~/myapp $ RAILS_ENV=test rake/Users/io/.rvm/rubies/ruby-2.2.0/bin/ruby -I/Users/io/.rvm/gems/ruby-2.2.0/gems/rspec-core-3.3.2/lib:/Users/io/.rvm/gems/ruby-2.2.0/gems/rspec-support-3.3.0/lib /Users/io/.rvm/gems/ruby-2.2.0/gems/rspec-core-3.3.2/exe/rspec --pattern spec/\*\*\{,/\*/\*\*\}/\*_spec.rb...............................................Finished in 3.86 seconds (files took 3.07 seconds to load)47 examples, 0 failures# -----~/myapp $ RAILS_ENV=test rake spec/Users/io/.rvm/rubies/ruby-2.2.0/bin/ruby -I/Users/io/.rvm/gems/ruby-2.2.0/gems/rspec-core-3.3.2/lib:/Users/io/.rvm/gems/ruby-2.2.0/gems/rspec-support-3.3.0/lib /Users/io/.rvm/gems/ruby-2.2.0/gems/rspec-core-3.3.2/exe/rspec --pattern spec/\*\*\{,/\*/\*\*\}/\*_spec.rb...............................................Finished in 3.9 seconds (files took 3.02 seconds to load)47 examples, 0 failures# -----~/myapp $ RAILS_ENV=test rspec ...............................................Finished in 3.82 seconds (files took 2.98 seconds to load)47 examples, 0 failures# -----~/myapp $ RAILS_ENV=test bundle exec rake/Users/io/.rvm/rubies/ruby-2.2.0/bin/ruby -I/Users/io/.rvm/gems/ruby-2.2.0/gems/rspec-core-3.3.2/lib:/Users/io/.rvm/gems/ruby-2.2.0/gems/rspec-support-3.3.0/lib /Users/io/.rvm/gems/ruby-2.2.0/gems/rspec-core-3.3.2/exe/rspec --pattern spec/\*\*\{,/\*/\*\*\}/\*_spec.rb...............................................Finished in 3.76 seconds (files took 2.91 seconds to load)47 examples, 0 failures# ------~/myapp $ RAILS_ENV=test bundle exec rake spec/Users/io/.rvm/rubies/ruby-2.2.0/bin/ruby -I/Users/io/.rvm/gems/ruby-2.2.0/gems/rspec-core-3.3.2/lib:/Users/io/.rvm/gems/ruby-2.2.0/gems/rspec-support-3.3.0/lib /Users/io/.rvm/gems/ruby-2.2.0/gems/rspec-core-3.3.2/exe/rspec --pattern spec/\*\*\{,/\*/\*\*\}/\*_spec.rb...............................................Finished in 3.83 seconds (files took 2.99 seconds to load)47 examples, 0 failures# -----~/myapp $ RAILS_ENV=test bundle exec rspec ...............................................Finished in 3.83 seconds (files took 3.11 seconds to load)47 examples, 0 failures ~/myapp $ RAILS_ENV=ci rake/Users/io/.rvm/rubies/ruby-2.2.0/bin/ruby -I/Users/io/.rvm/gems/ruby-2.2.0/gems/rspec-core-3.3.2/lib:/Users/io/.rvm/gems/ruby-2.2.0/gems/rspec-support-3.3.0/lib /Users/io/.rvm/gems/ruby-2.2.0/gems/rspec-core-3.3.2/exe/rspec --pattern spec/\*\*\{,/\*/\*\*\}/\*_spec.rb...............................................Finished in 3.73 seconds (files took 3.03 seconds to load)47 examples, 0 failures# -----~/myapp $ RAILS_ENV=ci rake spec# No output, just a brief pause and back to shell prompt~/myapp $ RAILS_ENV=ci rspec ...............................................Finished in 7.82 seconds (files took 2.96 seconds to load)47 examples, 0 failures# -----~/myapp $ RAILS_ENV=ci bundle exec rake# No output, just a brief pause and back to shell prompt~/myapp $ RAILS_ENV=ci bundle exec rake spec# No output, just a brief pause and back to shell prompt~/myapp $ RAILS_ENV=ci bundle exec rspec ...............................................Finished in 7.77 seconds (files took 2.8 seconds to load)47 examples, 0 failures",'rake spec' doesn't run with custom RAILS_ENV but 'rspec' and 'bundle exec rspec' do
Python equivalent of of Ruby's .select," I have an list/array, lets call it x, and I want to create a new list/array, lets call this one z, out of elements from x that match a certain condition.In Ruby you could do that by calling the .select method on the list/array like so: After this z would look like this: Is there a function/method in Python that I could use to get the same effect?If not, what is the cleanest way I could do this? <code>  x = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]z = x.select{|a| a < 5} z = [1, 2, 3, 4]",Python equivalent of Ruby's .select
How does Ruby Time#dst? know the answer?," Perhaps a daft question that demonstrates my lack of understanding of daylight saving fundamentals, but as per the title, how does Time.dst? know whether the time object is indeed true or false?Presumably this must be discernible by the combination of the Date and the Timezone, but then that doesn't make sense as lower latitudes in timezones don't use daylight savings? Therefore surely it must need location to discern #dst? ?What am i missing? <code> ",How does Ruby Time#dst?
Markdown not interpreted by Ruby middleman correctly," I have a following markdown for my slate project: And I use middleman to serve a site: bundle exec middleman server. However, the last subsection title is not interpreted correctly as a h2 tag (screenshot). The result is the same if I build it through rake build. However, if I put this markdown on other interpreters like http://stackedit.io, it is fine. So I suspect that my markdown interpreter (Ruby redcarpet) is broken somehow. I did not get any warning/error message on the console. I tried different versions of redcarpet. The interpreted HTML is also erroneous, although errors are different. I suppose some combination of Ruby and Redcarpet will make it?Here is my config.rb: Could anybody tell what the probable cause is? Or how to recover? <code>  ---title: API Referencelanguage_tabs: - http - javascriptsearch: true---# Getting Started## Logout# Call Management## Call States```javascript{}```## Call Notification## Caller ID Called Number## Call Information During Call # Markdownset :markdown_engine, :redcarpetset :markdown,fenced_code_blocks: true,smartypants: true,disable_indented_code_blocks: true,prettify: true,tables: true,with_toc_data: true,no_intra_emphasis: true",Markdown not interpreted by Ruby redcarpet correctly
Markdown not interpreted by Ruby middleman/rake correctly," I have a following markdown for my slate project: And I use middleman to serve a site: bundle exec middleman server. However, the last subsection title is not interpreted correctly as a h2 tag (screenshot). The result is the same if I build it through rake build. However, if I put this markdown on other interpreters like http://stackedit.io, it is fine. So I suspect that my markdown interpreter (Ruby redcarpet) is broken somehow. I did not get any warning/error message on the console. I tried different versions of redcarpet. The interpreted HTML is also erroneous, although errors are different. I suppose some combination of Ruby and Redcarpet will make it?Here is my config.rb: Could anybody tell what the probable cause is? Or how to recover? <code>  ---title: API Referencelanguage_tabs: - http - javascriptsearch: true---# Getting Started## Logout# Call Management## Call States```javascript{}```## Call Notification## Caller ID Called Number## Call Information During Call # Markdownset :markdown_engine, :redcarpetset :markdown,fenced_code_blocks: true,smartypants: true,disable_indented_code_blocks: true,prettify: true,tables: true,with_toc_data: true,no_intra_emphasis: true",Markdown not interpreted by Ruby redcarpet correctly
Ruby blocks with two parameters," I found this code by user Hirolau: How can I know when I can send two parameters to a predefined method like find? It's not clear to me because sometimes it doesn't work. Is this something that has been redefined? <code>  def sum_to_n?(a, n) a.combination(2).find{|x, y| x + y == n}enda = [1, 2, 3, 4, 5]sum_to_n?(a, 9) # => [4, 5]sum_to_n?(a, 11) # => nil",Block with two parameters
How do you test a dummary rails app when writing a gem?," I'm writing a gem that integrates with rails, and I want to be able to test a dummy app with rspec inside my gem's test suite.The issue comes up when I test if my dummy rails app loads / a couple modules viarspec spec/integration/rails/load_path_spec.rbSo far, this is what I have: Me test looks like this: rails_helper looks like this: And spec_helper looks like this: it seems like, half of the time, when I run rspec, all of the tests pass. If anyone is curious, my repository is here: https://github.com/NullVoxPopuli/skinny_controllers <code>  # spec/support/rails_app/config/environment.rb# Load the Rails application.require File.expand_path('../application', __FILE__)# Load the gemrequire 'skinny_controllers'# Initialize the Rails application.Rails.application.initialize! require 'rails_helper'describe 'definitions of operations and policies' do it 'loads operations' do is_defined = defined? EventOperations expect(is_defined).to be_truthy end it 'loads policies' do is_defined = defined? EventPolicy expect(is_defined).to be_truthy endend require 'rails/all'require 'factory_girl'require 'factory_girl_rails'require 'rspec/rails'require 'support/rails_app/config/environment'ActiveRecord::Migration.maintain_test_schema!# set up db# be sure to update the schema if required by doing# - cd spec/rails_app# - rake db:migrateActiveRecord::Schema.verbose = falseload ""support/rails_app/db/schema.rb"" # use db agnostic schema by defaultrequire 'support/rails_app/factory_girl'# require 'support/rails_app/factories'require 'spec_helper' require 'rubygems'require 'bundler/setup'require 'pry-byebug' # binding.pry to debug!require 'awesome_print'# CoverageENV['CODECLIMATE_REPO_TOKEN'] = ''require 'codeclimate-test-reporter'CodeClimate::TestReporter.start if ENV['TRAVIS']# This Gemrequire 'skinny_controllers'$LOAD_PATH.unshift Dir[File.dirname(__FILE__) + '/support/operations'].first$LOAD_PATH.unshift Dir[File.dirname(__FILE__) + '/support/policies'].firstDir[File.dirname(__FILE__) + '/support/**/*.rb'].each do |file| # skip the dummy app next if file.include?('support/rails_app') require fileend# This file was generated by the `rspec --init` command. Conventionally, all# specs live under a `spec` directory, which RSpec adds to the `$LOAD_PATH`.# Require this file using `require ""spec_helper""` to ensure that it is only# loaded once.## See http://rubydoc.info/gems/rspec-core/RSpec/Core/ConfigurationRSpec.configure do |config| config.run_all_when_everything_filtered = true config.filter_run :focus # Run specs in random order to surface order dependencies. If you find an # order dependency and want to debug it, you can fix the order by providing # the seed, which is printed after each run. # --seed 1234 config.order = 'random'end",How do you test a dummy rails app when writing a gem?
singleton method vs. class method ruby," Are class method and singleton method doing the same or different? Here is an example. <code>  class C def self.classmethod puts ""class method #{self}"" endendC.classmethod # class method Cc = C.newdef c.singletonmethod puts ""instance method #{self}""endc.singletonmethod # instance method #<C:0x0000000118ed08>",Singleton method vs. class method
"Ruby ""press key to continue"""," I am trying to implement a simple ""Press any key to continue"". I print this message to the console, and I want to erase it after a key is pressed.Following ""Writing over previously output lines in the command prompt with ruby"", I tried this piece of code: However, the \r trick doesn't work and the next puts won't erase the sentence. Is it because of a different function context? The gets spawns a newline? Or because I'm on Windows OS?  <code>  def continue print ""Press any key to continue\r"" getsendputs ""An awesome story begins...""continueputs ""And ends after 2 lines""","How to code ""press key to continue"""
Why only a limited number of MatchData-submatches-global-variables stored in the global_variables array?," If I do a match with a regular expression with ten captures: then, for $10, I get: but it is missing from global_variables. I get (in an irb session): Here, only the first nine are listed: This is also confirmed by: Where is $10 stored, and why isnt it stored in global_variables? <code>  /(o)(t)(th)(f)(fi)(s)(se)(e)(n)(t)/.match(""otthffisseent"") $10 # => ""t"" [:$;, :$-F, :$@, :$!, :$SAFE, :$~, :$&, :$`, :$', :$+, :$=, :$KCODE, :$-K, :$,, :$/, :$-0, :$\, :$_, :$stdin, :$stdout, :$stderr, :$>, :$<, :$., :$FILENAME, :$-i, :$*, :$?, :$$, :$:, :$-I, :$LOAD_PATH, :$"", :$LOADED_FEATURES, :$VERBOSE, :$-v, :$-w, :$-W, :$DEBUG, :$-d, :$0, :$PROGRAM_NAME, :$-p, :$-l, :$-a, :$binding, :$1, :$2, :$3, :$4, :$5, :$6, :$7, :$8, :$9] $1, :$2, :$3, :$4, :$5, :$6, :$7, :$8, :$9 global_variables.include?(:$10) # => false",Why are only a limited number of regular expression captures stored in `global_variables`?
Why is only a limited number of regular expression captures stored in `global_variables`?," If I do a match with a regular expression with ten captures: then, for $10, I get: but it is missing from global_variables. I get (in an irb session): Here, only the first nine are listed: This is also confirmed by: Where is $10 stored, and why isnt it stored in global_variables? <code>  /(o)(t)(th)(f)(fi)(s)(se)(e)(n)(t)/.match(""otthffisseent"") $10 # => ""t"" [:$;, :$-F, :$@, :$!, :$SAFE, :$~, :$&, :$`, :$', :$+, :$=, :$KCODE, :$-K, :$,, :$/, :$-0, :$\, :$_, :$stdin, :$stdout, :$stderr, :$>, :$<, :$., :$FILENAME, :$-i, :$*, :$?, :$$, :$:, :$-I, :$LOAD_PATH, :$"", :$LOADED_FEATURES, :$VERBOSE, :$-v, :$-w, :$-W, :$DEBUG, :$-d, :$0, :$PROGRAM_NAME, :$-p, :$-l, :$-a, :$binding, :$1, :$2, :$3, :$4, :$5, :$6, :$7, :$8, :$9] $1, :$2, :$3, :$4, :$5, :$6, :$7, :$8, :$9 global_variables.include?(:$10) # => false",Why are only a limited number of regular expression captures stored in `global_variables`?
Bundler using an older ruby version," I have Ruby 2.3.0 installed in my system. The output of ruby -v is: When I try to run Rails using: I get the following error: I have both Ruby versions installed. How to make bundle use Ruby 2.3.0 instead of 2.1.7 <code>  ruby 2.3.0p0 (2015-12-25 revision 53290) [x86_64-linux] bundle exec rails new ~/my-test-app --dev Your Ruby version is 2.1.7, but your Gemfile specified 2.3.0",Bundler using an older Ruby version
Strange behaviour of Array element assignment - Ruby," Today I came across some strange behaviour of Array element assignment: This makes sense, however: I know that in [0,0] the first zero is index and second is the number of elements to be effected in that array starting from index. In my thoughts it should be the same as the unshift, but it's not. Can any one explain the behavior? <code>  arr = [""a"",""b""]arr2 = [1,2]arr.unshift(arr2) #= [[1, 2], ""a"", ""b""] arr.push(arr2) #=> [""a"", ""b"", [1, 2]] arr[0,0] = arr2 #=> [1, 2, ""a"", ""b""] ",Strange behaviour of Array element assignment
Why do newlines within parenthesis change arithmetic results in ruby," Why do the following expressions resolve the way they do? Brackets should have higher precedence than newlines, shouldn't they? Omitting the plus also lets the expression evaluate to 2: If I declare as a continuous newline (escaped) or move the plus to the first line, desired behavior is achieved: <code>  3 - ( 1 + 1 )# => 13 - ( 1 + 1 )# => 2 3 - ( 1 1 )# => 2 3 - ( 1 \ + 1 )# => 13 - ( 1 + 1 )# => 1",Why do newlines within parenthesis change arithmetic results?
Searchkick relevant results does not work," I have a problem with a relevant search. Results of following request are very strange: Why Martina is going earlier than Martin?Searckick config: <code>  Candidate.search('martin', fields: [:first_name, :last_name], match: :word_start, misspellings: false).map(&:name)[""Kautzer Martina"", ""Funk Martin"", ""Jaskolski Martin"", ""Gutmann Martine"", ""Wiegand Martina"", ""Schueller Martin"", ""Dooley Martin"", ""Stiedemann Martine"", ""Bartell Martina"", ""Gerlach Martine"", ""Green Martina"", ""Lang Martine"", ""Legros Martine"", ""Ernser Martina"", ""Boehm Martina"", ""Green Martine"", ""Nolan Martin"", ""Schmidt Martin"", ""Hoppe Martin"", ""Macejkovic Martine"", ""Emard Martine""] searchkick language: %w(German English), word_start: [:first_name, :last_name]",Searchkick results are not relevant
Difference between `update_rubygems1 and `gem update --system`," What is the difference between this command: And these commands: I would've assumed that the former would be all that is required in order to update to the latest version of RubyGems, but I have found many references (including https://stackoverflow.com/a/13626200/1369417) which recommend the latter. <code>  gem update --system gem install rubygems-updateupdate_rubygemsgem update --system",Difference between `update_rubygems` and `gem update --system`
Ruby method block," I'm new in Ruby and trying to understand this syntax: I fully understand what this code is doing, but I don't understand how it works. More specifically, I understand that create_table is a method and :posts is a parameter, but I don't understand the rest of the code. <code>  create_table :posts do |t| t.string :title t.string :content t.string :likes t.string :comments t.timestamps null: falseend",How does Ruby's block syntax work?
How can I use an efficent alogirthm to find the difference between two very large arrays?," I have a problem concerning efficiency and algorithms when it comes to finding the difference between two very large arrays. I'm hoping someone with a good understanding of algorithms can point me to the right direction in how to solve this as my current implementations is taking an extremely long amount of time. Problem:I have two very large arrays. One contains a list of emails that have invalid domain names and the other is a mixed list that I need to check against the first array. What I need to do is go through the list of unchecked_account_domains and then compare each entry to see if there is a match in the accounts_with_failed_email_domains. I need to insert all matches between the lists in a separate array to be processed later.How can I efficiently write something that can quickly check through these accounts. Here is what I have tried so far. This above implementation has been running forever. Here is the second attempt which still proved not to be any better. bsearch seemed to be promising, but I'm pretty sure I'm not using this correctly. Also, I tried looking into this question comparing large lists but this is in python and I can't seem to find a Ruby equivalent for set. Does anyone have any ideas on how to solve this? <code>  accounts_with_failed_email_domains = [279,000 records in here]unchecked_account_domains = [149,000 records in here] unchecked_account_domains = [really big array]unchecked_account_domains = unchecked_account_domains.sortaccounts_with_failed_email_domains = [another huge array].sortunchecked_account_domains.keep_if do |email| accounts_with_failed_email_domains.any? { |failed_email| email == failed_email }end# Count to see how many accounts are leftputs unchecked_account_domains.count unchecked_account_domains = [really big array]unchecked_account_domains = unchecked_account_domains.sortaccounts_with_failed_email_domains = [another huge array].sortunchecked_account_domains.each do |email| accounts_with_failed_email_domains.bsearch do |failed_email| final_check << email if email == failed_email endend# Count to see how many accounts are leftputs final_check.count",Ruby - is efficient way to find the difference between two very large arrays?
Hanami html helper render only last element," i'm new in the Hanami World.I'have write this code: I call title method on the template.The html result is: Why the second link overwrite the first? Where is my error?Thanks for any replies. <code>  module Web::Views::Home class Index include Web::View include Hanami::Helpers::HtmlHelper def title html.header do h1 'Test search engine', id: 'title' hr div(id: 'test') do link_to('Home', ""/"", class: 'mnu_orizontal') link_to('About', ""/"", class: 'mnu_orizontal') end end end endend <header> <h1 id=""title"">Test search engine</h1> <hr> <div id=""test""> <a class=""mnu_orizontal"" href=""/"">About</a> </div></header>",Hanami link_to helper renders only last element
How to check if variable is Date / Time / DateTime in Ruby?, Any easy way to check if a variable / object is of Date / Time / DateTime type? Without naming all the types <code> ,How to check if variable is Date or Time or DateTime in Ruby?
How to check if variable is Date or Time or DateTime (or Timezone) in Ruby?, Any easy way to check if a variable / object is of Date / Time / DateTime type? Without naming all the types <code> ,How to check if variable is Date or Time or DateTime in Ruby?
Calculating with Milliseconds in Ruby," Is there a way to add 1 millisecond to a Time/DateTime object in Ruby?For an Webservice Request i need a time scoping with milliseconds: So I'm near my prefered solution, but time_end should be 2016-09-28T21:59:59.999Z.I didn't find solutions that Ruby can handle calculating with milliseconds. I only did it with strftime, but it would be great if there is a possibility to calculate. FYI: I'm on plain Ruby, no Rails. <code>  irb(main):034:0> time_start = Date.today.to_time.utc.iso8601(3)=> ""2016-09-27T22:00:00.000Z""irb(main):035:0> time_end = ((Date.today + 1).to_time).utc.iso8601(3)=> ""2016-09-28T22:00:00.000Z""-- or --irb(main):036:0> time_end = ((Date.today + 1).to_time - 1).utc.iso8601(3)=> ""2016-09-28T21:59:59.000Z"" -- This works, but hard coded --time_end = ((Date.today + 1).to_time - 1).utc.strftime(""%Y-%m-%dT%H:%M:%S.999Z"")=> ""2016-09-28T21:59:59.999Z""",Add 1 millisecond to a Time/DateTime object
Ruby Round to nearest quarter," I'm working with an external api in a Ruby on Rails app. I need to send in floats to this company but they only accept values like 1.0, 1.25, 1.5, 1.75, 2.0, etc.I may have a value like 1.34 or 1.80. I ideally need to round them to the nearest 0.25. What's the best way to accomplish this? if I do 1.34.round(0) it'll give me 1.0 which is lower than I need.Thanks! <code> ",Round float to the nearest quarter in Ruby
Round to nearest quarter," I'm working with an external api in a Ruby on Rails app. I need to send in floats to this company but they only accept values like 1.0, 1.25, 1.5, 1.75, 2.0, etc.I may have a value like 1.34 or 1.80. I ideally need to round them to the nearest 0.25. What's the best way to accomplish this? if I do 1.34.round(0) it'll give me 1.0 which is lower than I need.Thanks! <code> ",Round float to the nearest quarter in Ruby
How do I specify polymorphic types with ruby-graphql?," I have a UserType and a userable that can be a Writer or Account.For GraphQL I figured maybe I could use a UserableUnion like this: and then define my UserType like this: But I get schema contains Interfaces or Unions, so you must define a 'resolve_type (obj, ctx) -> { ... }' functionI have tried putting a resolve_type in multiple places, but I can't seem to figure this out?Does any one now how to implement this? <code>  UserableUnion = GraphQL::UnionType.define do name ""Userable"" description ""Account or Writer object"" possible_types [WriterType, AccountType]end UserType = GraphQL::ObjectType.define do name ""User"" description ""A user object"" field :id, !types.ID field :userable, UserableUnionend",How do I specify polymorphic types with graphql-ruby?
RubyNice way to chain lots of OR statements?," I am doing a coding puzzle where you are a miner in an array, and you can't be out of bounds. I have this code: Is there a nicer/cleaner/one-thing-per-line way to chain lots of OR statements? <code>  if x > minemap.length-1 or x < 0 or y > minemap[0].length-1 or y < 0 return falseend",RubyNice way to chain lots of OR statements? (checking against array out-of-bounds)
Installing active admin on RoR 5," I added gem 'activeadmin', github: 'activeadmin' in my gemfile and did a bundle install. Then it's throwing me the following error. Running bundle update will rebuild your snapshot from scratch, using only the gems in your Gemfile, which may resolve the conflict.I did the bundle update, but still the error is the same. Any help would be appreciated.EDIT gem 'activeadmin' is not compatible with rails 5  <code>  Bundler could not find compatible versions for gem ""actionpack"": In snapshot (Gemfile.lock): actionpack (= 5.0.0.1)In Gemfile:activeadmin (~> 1.0.0.pre4) was resolved to 1.0.0.pre4, which depends on formtastic (~> 3.1) was resolved to 3.1.4, which depends on actionpack (>= 3.2.13)activeadmin (~> 1.0.0.pre4) was resolved to 1.0.0.pre4, which depends on inherited_resources (~> 1.6) was resolved to 1.6.0, which depends on actionpack (< 5, >= 3.2)activeadmin (~> 1.0.0.pre4) was resolved to 1.0.0.pre4, which depends on inherited_resources (~> 1.6) was resolved to 1.6.0, which depends on actionpack (< 5, >= 3.2)activeadmin (~> 1.0.0.pre4) was resolved to 1.0.0.pre4, which depends on kaminari (~> 0.15) was resolved to 0.17.0, which depends on actionpack (>= 3.0.0)activeadmin (~> 1.0.0.pre4) was resolved to 1.0.0.pre4, which depends on ransack (~> 1.3) was resolved to 1.8.2, which depends on actionpack (>= 3.0)","RAILS : Bundler could not find compatible versions for gem ""actionpack"" on installing ActiveAdmin"
how to set expire time when using redis client in ROR," I am trying to use to set multiple keys into Redis and I can not set expire time at the same time.The only way to set expire time to to use this: or I have to call many times and this is not what I want to see.Are there any other ways to solve this problem? <code>  redis.mapped_mset({ ""f1"" => ""v1"", ""f2"" => ""v2"" }) set(key, value, options = {}) expire(key, seconds)",How can I set the expire time in Redis' ruby client when using mapped_mset?
How to set expire time when using redis client in ROR?," I am trying to use to set multiple keys into Redis and I can not set expire time at the same time.The only way to set expire time to to use this: or I have to call many times and this is not what I want to see.Are there any other ways to solve this problem? <code>  redis.mapped_mset({ ""f1"" => ""v1"", ""f2"" => ""v2"" }) set(key, value, options = {}) expire(key, seconds)",How can I set the expire time in Redis' ruby client when using mapped_mset?
Parsing from a JSON file in Ruby," Now I am working on extracting information from a JSON file in Ruby. Then how can I extract just the numbers next to the word 'score' from the following text file? For example, I want to get 0.6748984055823062, 0.6280145725181376 on and on. What I have tried is that I could read a file and set the text file to a hash variable using the JSON method. <code>  { ""sentiment_analysis"": [ { ""positive"": [ { ""sentiment"": ""Popular"", ""topic"": ""games"", ""score"": 0.6748984055823062, ""original_text"": ""Popular games"", ""original_length"": 13, ""normalized_text"": ""Popular games"", ""normalized_length"": 13, ""offset"": 0 }, { ""sentiment"": ""engaging"", ""topic"": ""pop culture-inspired games"", ""score"": 0.6280145725181376, ""original_text"": ""engaging pop culture-inspired games"", ""original_length"": 35, ""normalized_text"": ""engaging pop culture-inspired games"", ""normalized_length"": 35, ""offset"": 370 }, ""negative"": [ { ""sentiment"": ""get sucked into"", ""topic"": ""the idea of planning"", ""score"": -0.7923352042939829, ""original_text"": ""Students get sucked into the idea of planning"", ""original_length"": 45, ""normalized_text"": ""Students get sucked into the idea of planning"", ""normalized_length"": 45, ""offset"": 342 }, { ""sentiment"": ""be daunted"", ""topic"": null, ""score"": -0.5734506634410159, ""original_text"": ""initially be daunted"", ""original_length"": 20, ""normalized_text"": ""initially be daunted"", ""normalized_length"": 20, ""offset"": 2104 }, require 'json'json = JSON.parse(json_string)",Parsing from a JSON file in Ruby and Extract numbers from Nested Hashes
ruby on rails - rack-cors multiple origins with diffrenet resources," I'm implementing CORS in my rails application using rack-cors gem for it, but I'm not sure how can i define different resources for different origins.I need something like that: So it will allow ""http://localhost:3000"" to access only '/api/*' and allow 'http://localhost:6000' to access all. is it possible?is the above code the correct code/syntax for doing that?thanks. <code>  config.middleware.insert_before 0, Rack::Cors do allow do origins 'http://localhost:3000' resource '/api/*', headers: :any, methods: [:get, :post, :options, :put, :delete] end allow do origins 'http://localhost:6000' resource '*', headers: :any, methods: [:get, :post, :options, :put, :delete] endend",ruby on rails - rack-cors multiple origins with different resources
Order and sort_by diffference in Ruby on Rails ActiveRecord," I am trying to sort my data according to timestamp field in my controller, note that the timestamp field may be null and may have some value. I wrote the following query. But this gives error when I have items that have time_timestamp field value as NULL, but following query works. Can anybody tell the difference between these two queries, and in which condition to use which one? And I am using order and reverse to get the latest items from the database, Is this the best way or there are other best ways to get the latest data from database in terms of performance? <code>  @item = Item.sort_by(&:item_timestamp).reverse .paginate(:page => params[:page], :per_page =>5) @item = Item.order(:item_timestamp).reverse .paginate(:page => params[:page], :per_page => 5)",Order and sort_by difference in Ruby on Rails ActiveRecord
"Python yield syntax: How can I make a function without arguments and only with yield's in it, to print something out?"," I've been converting Ruby code to Python code and now I'm stuck with this function that contains yield: I would like to call the function and tell it to print ""Hello"" three times because of the three yield statements. As the function does not take any arguments I get an error. Can you tell me the easiest way to get it working? Thank you. <code>  def three_print(): yield yield yield",Python yield (migrating from Ruby): How can I write a function without arguments and only with yield to do prints?
How to make Ruby 'do' automatically insert 'end' on enter press," I wanted to try out visual studio code for writing ruby/rails and came across this issue that when I write 'do' in the editor and then hit enter then 'end' is not automatically added to the next line.Writing 'def' + enter works fine. 'begin' + enter works fine too, but not 'do' + enter.I haven't found any extension that would make it work yet and google has not been much help either. Maybe there's a way to define the snipper myself?Thanks in advance! <code> ",How to make VSCode automatically insert 'end' on enter press after 'do'
Why expression (true == true == true) produces a syntax error in ruby?," Ruby: syntax error, unexpected tEQvs. JavaScript: vs. C:  <code>  true == true == true true == true == true// => true 1 == 1 == 1// => 1",Why does the expression (true == true == true) produce a syntax error?
Why (true == true == true) expression produces a syntax error?," Ruby: syntax error, unexpected tEQvs. JavaScript: vs. C:  <code>  true == true == true true == true == true// => true 1 == 1 == 1// => 1",Why does the expression (true == true == true) produce a syntax error?
Ruby: sum vs. inject(:+) vs. reduce(:+)," I've noticed array.sum and array.inject(:+) produce different results. What's the reason for this? <code>  a = [10, 1.1, 6.16]a.inject(:+)# => 17.259999999999998a.sum# => 17.26",Ruby: sum vs. inject(:+) produces different results
How to convert OpenStruct Object to JSON," I have an OpenStruct object and needs to convert to JSON data.Sample Hash (from RSPEC helper): I'm using, below function for recursive: For ex to_recursive_ostruct(test_order), will return: Once converted, using OpenStructObject.marshal_dump: OpenStructObject.marshal_dump gives me the right data in first level, I want also the nested data to beconverted.What I really need is like: Please help, thanks in advance. <code>  def test_order { ""id"": 505311428702, ""email"": ""test@gmail.com"", ""closed_at"": """", ""discount_codes"": { ""id"": 507328175, ""text"": ""test"" } }end def to_recursive_ostruct(hash) OpenStruct.new(hash.each_with_object({}) do |(key, val), memo| memo[key] = val.is_a?(Hash) ? to_recursive_ostruct(val) : val end)end <OpenStruct id=505311428702, email=""test@gmail.com"", closed_at="""", ...> {:id=>505311428702, :email=>""test@gmail.com"", :closed_at=>"""", discount_codes=>#<OpenStruct id=507328175, text= ""test"">}} {:id=>505311428702, :email=>""test@gmail.com"", :closed_at=>"""", :discount_codes=>{:id=>507328175, :text=> ""test""} }",How to convert recursive/nested OpenStruct Object to Hash
can't find gem railties (>= 0.a) with executable rails (Gem::GemNotFoundException)," I am trying to build a new application or check the version of rails. I get the following error: I searched many different solutions, but none of them worked for me.Any help would be great. ruby -v ruby 2.5.1p57 (2018-03-29 revision 63029) [x86_64-darwin17] rbenv -v rbenv 1.1.1Even executing bundle install gives an error Could not locate Gemfile. <code>  Traceback (most recent call last): 2: from /usr/local/bin/rails:22:in `<main>' 1: from /Users/vivanksharma/.rbenv/versions/2.5.1/lib/ruby/2.5.0/rubygems.rb:263:in `bin_path'/Users/vivanksharma/.rbenv/versions/2.5.1/lib/ruby/2.5.0/rubygems.rb:289:in `find_spec_for_exe': can't find gem railties (>= 0.a) with executable rails (Gem::GemNotFoundException)",Can't find gem railties (>= 0.a) with executable rails (Gem::GemNotFoundException)
How to check for root priveleges in ruby," I'm trying to write a program that requires root privileges, but whenever it runs it raises an permission error. Is there a better way to run programs as root without entering sudo 'example_script.rb' Also, is there a possibly a way to request `sudo' from inside a ruby script or to check to see if a user is running as sudo when using the program? Thanks! <code> ",How to check for root prvileges from the user in Ruby?
Build new Rails app Error loading the 'sqlite3'," When generate new rails app, and start the server ""rails s"", first massage I got: Puma caught this error: Error loading the 'sqlite3' Active Record adapter. Missing a gem it depends on? can't activate sqlite3 (~> 1.3.6), already activated sqlite3-1.4.0. Make sure all dependencies are added to Gemfile. (LoadError)after reload a page: ActiveRecord::ConnectionNotEstablished No connection pool with 'primary' found. I reinstall ruby, rails, bundler, all except rvmand I don't know what to doP.S.this error disappears when I evidently write sqlite3 verion, but it should work fine from a without it!!!Help!What to do? or maybe reinstall all of it? <code>  def retrieve_connection(spec_name) #:nodoc: pool = retrieve_connection_pool(spec_name) raise ConnectionNotEstablished, ""No connection pool with '#{spec_name}' found."" unless pool pool.connection end",Build new Rails app Error loading the 'sqlite3' without evidently write verion
"""Ruby Sass has reached end-of-life and should no longer be used""; Migrating to SassC"," I have tried to deploy my Jekyll static site to Netlify (via GitHub) and it was unsuccessful. The error message was: ""failed during stage 'building site': Build script returned non-zero exit code: 42""The following was the full Netlify log: As the last statement of the log was: Ruby Sass has reached end-of-life and should no longer be used.I've made the mistake of thinking that Ruby Sass was the problem that required a resolution. After attaching my Gemfile and Gemfile.lock (as well as the Netlify log), @JayDorsey has kindly advised (in his answer below) that the Ruby Sass wasn't the problem.FINAL UPDATE: SOLUTION FOUNDAfter searching specifically with the Netlify error code ""42"", I have found this post (https://jameshfisher.com/2019/01/09/how-to-fix-activating-bundler-2-failed-error-in-your-jekyll-build/) and that has resolved the error right away.The solution that worked for me was the removal of from my Gemfile.lock.The following is my original Gemfile.lock and you can notice that it ends with the code that has to be removed: <code>  5:06:23 PM: Preparing Git Reference refs/heads/master5:06:23 PM: Starting build script5:06:23 PM: Installing dependencies5:06:24 PM: Downloading and installing node v10.16.0...5:06:25 PM: Downloading https://nodejs.org/dist/v10.16.0/node-v10.16.0-linux-x64.tar.xz...5:06:25 PM: ##########################5:06:25 PM: 37.2%5:06:25 PM: ##########################################5:06:25 PM: 58.4%5:06:25 PM: ################################################5:06:25 PM: ######################## 100.0%5:06:25 PM: Computing checksum with sha256sum5:06:25 PM: Checksums matched!5:06:28 PM: Now using node v10.16.0 (npm v6.9.0)5:06:28 PM: Unknown ruby interpreter version (do not know how to handle): RUBY_VERSION.5:06:28 PM: Attempting ruby version 2.6.2, read from environment5:06:29 PM: Using ruby version 2.6.25:06:29 PM: Using PHP version 5.65:06:29 PM: Started restoring cached ruby gems5:06:29 PM: Finished restoring cached ruby gems5:06:29 PM: Installing gem bundle5:06:30 PM: Warning: the running version of Bundler (2.0.1) is older than the version that created the lockfile (2.0.2). We suggest you upgrade to the latest version of Bundler by running `gem install bundler`.5:06:31 PM: Fetching gem metadata from https://rubygems.org/5:06:33 PM: Fetching public_suffix 3.1.15:06:33 PM: Installing public_suffix 3.1.15:06:33 PM: Fetching addressable 2.6.05:06:33 PM: Installing addressable 2.6.05:06:33 PM: Using bundler 2.0.15:06:33 PM: Fetching colorator 1.1.05:06:33 PM: Installing colorator 1.1.05:06:33 PM: Fetching concurrent-ruby 1.1.55:06:33 PM: Installing concurrent-ruby 1.1.55:06:33 PM: Fetching eventmachine 1.2.75:06:33 PM: Installing eventmachine 1.2.7 with native extensions5:06:49 PM: Fetching http_parser.rb 0.6.05:06:49 PM: Installing http_parser.rb 0.6.0 with native extensions5:06:50 PM: Fetching em-websocket 0.5.15:06:50 PM: Installing em-websocket 0.5.15:06:50 PM: Fetching ffi 1.11.15:06:51 PM: Installing ffi 1.11.1 with native extensions5:06:59 PM: Fetching forwardable-extended 2.6.05:06:59 PM: Installing forwardable-extended 2.6.05:06:59 PM: Fetching i18n 0.9.55:06:59 PM: Installing i18n 0.9.55:06:59 PM: Fetching rb-fsevent 0.10.35:07:00 PM: Installing rb-fsevent 0.10.35:07:00 PM: Fetching rb-inotify 0.10.05:07:00 PM: Installing rb-inotify 0.10.05:07:00 PM: Fetching sass-listen 4.0.05:07:00 PM: Installing sass-listen 4.0.05:07:00 PM: Fetching sass 3.7.45:07:00 PM: Installing sass 3.7.45:07:00 PM: Fetching jekyll-sass-converter 1.5.25:07:00 PM: Installing jekyll-sass-converter 1.5.25:07:00 PM: Fetching ruby_dep 1.5.05:07:00 PM: Installing ruby_dep 1.5.05:07:00 PM: Fetching listen 3.1.55:07:00 PM: Installing listen 3.1.55:07:00 PM: Fetching jekyll-watch 2.2.15:07:00 PM: Installing jekyll-watch 2.2.15:07:00 PM: Fetching kramdown 1.17.05:07:01 PM: Installing kramdown 1.17.05:07:01 PM: Fetching liquid 4.0.35:07:01 PM: Installing liquid 4.0.35:07:01 PM: Fetching mercenary 0.3.65:07:01 PM: Installing mercenary 0.3.65:07:01 PM: Fetching pathutil 0.16.25:07:01 PM: Installing pathutil 0.16.25:07:01 PM: Fetching rouge 3.5.15:07:02 PM: Installing rouge 3.5.15:07:02 PM: Fetching safe_yaml 1.0.55:07:02 PM: Installing safe_yaml 1.0.55:07:02 PM: Fetching jekyll 3.8.55:07:02 PM: Installing jekyll 3.8.55:07:02 PM: Fetching jekyll-feed 0.12.15:07:02 PM: Installing jekyll-feed 0.12.15:07:02 PM: Fetching jekyll-paginate 1.1.05:07:02 PM: Installing jekyll-paginate 1.1.05:07:02 PM: Fetching jekyll-seo-tag 2.6.15:07:02 PM: Installing jekyll-seo-tag 2.6.15:07:02 PM: Fetching jekyll-sitemap 1.3.15:07:05 PM: failed during stage 'building site': Build script returned non-zero exit code: 425:07:02 PM: Installing jekyll-sitemap 1.3.15:07:02 PM: Bundle complete! 4 Gemfile dependencies, 30 gems now installed.5:07:02 PM: Bundled gems are installed into `/opt/build/cache/bundle`5:07:02 PM: Post-install message from sass:5:07:02 PM: Ruby Sass has reached end-of-life and should no longer be used. BUNDLED WITH 2.0.2 GEM remote: https://rubygems.org/ specs: addressable (2.6.0) public_suffix (>= 2.0.2, < 4.0) colorator (1.1.0) concurrent-ruby (1.1.5) em-websocket (0.5.1) eventmachine (>= 0.12.9) http_parser.rb (~> 0.6.0) eventmachine (1.2.7) eventmachine (1.2.7-x64-mingw32) ffi (1.11.1) ffi (1.11.1-x64-mingw32) forwardable-extended (2.6.0) http_parser.rb (0.6.0) i18n (0.9.5) concurrent-ruby (~> 1.0) jekyll (3.8.5) addressable (~> 2.4) colorator (~> 1.0) em-websocket (~> 0.5) i18n (~> 0.7) jekyll-sass-converter (~> 1.0) jekyll-watch (~> 2.0) kramdown (~> 1.14) liquid (~> 4.0) mercenary (~> 0.3.3) pathutil (~> 0.9) rouge (>= 1.7, < 4) safe_yaml (~> 1.0) jekyll-feed (0.12.1) jekyll (>= 3.7, < 5.0) jekyll-paginate (1.1.0) jekyll-sass-converter (1.5.2) sass (~> 3.4) jekyll-seo-tag (2.6.1) jekyll (>= 3.3, < 5.0) jekyll-sitemap (1.3.1) jekyll (>= 3.7, < 5.0) jekyll-watch (2.2.1) listen (~> 3.0) kramdown (1.17.0) liquid (4.0.3) listen (3.1.5) rb-fsevent (~> 0.9, >= 0.9.4) rb-inotify (~> 0.9, >= 0.9.7) ruby_dep (~> 1.2) mercenary (0.3.6) pathutil (0.16.2) forwardable-extended (~> 2.6) public_suffix (3.1.1) rb-fsevent (0.10.3) rb-inotify (0.10.0) ffi (~> 1.0) rouge (3.5.1) ruby_dep (1.5.0) safe_yaml (1.0.5) sass (3.7.4) sass-listen (~> 4.0.0) sass-listen (4.0.0) rb-fsevent (~> 0.9, >= 0.9.4) rb-inotify (~> 0.9, >= 0.9.7)PLATFORMS ruby x64-mingw32DEPENDENCIES jekyll-feed jekyll-paginate jekyll-seo-tag jekyll-sitemapRUBY VERSION ruby 2.6.2p47BUNDLED WITH 2.0.2","Netlify deployment ""failed during stage 'building site': Build script returned non-zero exit code: 42"""
Ruby - actually get ALL methods for an instance," In this question:How to list all methods for an object in Ruby?You can call foo.methods and get all methods. But this does not get all methods. Example in Rails, with ActiveStorage: Given that an ArgumentError is being raised, it respond_to?s, and I can grab the method, it does have the variant method. But it is not shown with .methods. How can I see a full list of methods? <code>  Image.first.specimens.first.methods.include?(:variant)#=> falseImage.first.specimens.first.respond_to?(:variant)#=> trueImage.first.specimens.first.variantTraceback (most recent call last): 1: from (irb):3ArgumentError (wrong number of arguments (given 0, expected 1))Image.first.specimens.first.method(:variant)#=> #<Method: ActiveStorage::Attachment(id: integer, name: string, record_type: string, record_id: integer, blob_id: integer, created_at: datetime)#variant>",Ruby - actually get ALL methods for an instance (`.methods` is not listing all)
Failed to install Homebrew Portable Ruby (and your system version is too old)," I'm trying to install Homebrew on macOS. Once the installation finished, when I typed help I got: <code>  Already downloaded: /.../Library/Caches/Homebrew/portable-ruby-2.6.3.mavericks.bottle.tar.gzError: Checksum mismatch.Expected: ab81211a2052ccaa6d050741c433b728d0641523d8742eef23a5b450811e5104 Actual: f80fd4cc877a64b0ac1c105fdc212ca6be08bb034118900f2c2f58edcfe0dafd Archive: /.../Library/Caches/Homebrew/portable-ruby-2.6.3.mavericks.bottle.tar.gzTo retry an incomplete download, remove the file above.Error: Failed to install Homebrew Portable Ruby (and your system version is too old)!",How to install Homebrew Portable Ruby when your system version is too old
Creating a controller with rails generate causing strange error," I tried to start a simple rails app today to refresh my knowledge and ran into a very strange issue...Created app (rails new app-name).Created controller with index action (rails g controller site index).Set the root route to site#index.Start rails server.The server tries to render the index view for site, but aborts abruptly with the following error: I tried (unsuccessfully):Upgrading my ruby version, then my rails version to latest.Reinstalling all my gems.Deleting the path to ffi_c.bundle and reinstalling ffi.What is strange is that if I manually create the controller and the view, everything works fine!I saw a suggestion on a somewhat related issue to try to change the C compiler on my machine to the default, but I don't understand why that would be necessary and I'd like to get a deeper understanding about what's going on. <code>  dyld: lazy symbol binding failed: Symbol not found: _ffi_prep_closure_locReferenced from: /Users/Marco/.rbenv/versions/2.6.1/lib/ruby/gems/2.6.0/gems/ffi-1.13.1/lib/ffi_c.bundle Expected in: /usr/lib/libffi.dylibdyld: Symbol not found: _ffi_prep_closure_loc Referenced from: /Users/Marco/.rbenv/versions/2.6.1/lib/ruby/gems/2.6.0/gems/ffi-1.13.1/lib/ffi_c.bundle Expected in: /usr/lib/libffi.dylib",Creating a controller with rails generate is causing a strange error
