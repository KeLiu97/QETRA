originalTitle,body,reformulatedTitle
"Implementation of ""Remember me"" in a Rails application."," My Rails-app has a sign in box with a ""remember me"" checkbox. Users who check that box should remain logged in even after closing their browser. I'm keeping track of whether users are logged in by storing their id in the user's session. But sessions are implemented in Rails as session cookies, which are not persistent. I can make them persistent: But that seems like a hack, which is surprising for such common functionality. Is there any better way?EditGareth's answer is pretty good, but I would still like an answer from someone familiar with Rails 2 (because of it's unique CookieSessionStore). <code>  class ApplicationController < ActionController::Base before_filter :update_session_expiration_date private def update_session_expiration_date options = ActionController::Base.session_options unless options[:session_expires] options[:session_expires] = 1.year.from_now end endend","Implementation of ""Remember me"" in a Rails application"
How can I modify .xfdl files?," The .XFDL file extension identifies XFDL Formatted Document files. These belong to the XML-based document and template formatting standard. This format is exactly like the XML file format however, contains a level of encryption for use in secure communications.I know how to view XFDL files using a file viewer I found here. I can also modify and save these files by doing File:Save/Save As. I'd like, however, to modify these files on the fly. Any suggestions? Is this even possible?Update #1: I have now successfully decoded and unziped a .xfdl into an XML file which I can then edit. Now, I am looking for a way to re-encode the modified XML file back into base64-gzip (using Ruby or the command line) <code> ",How can I modify .xfdl files? (Update #1)
Calling Bash Commands From Ruby, How do I call shell commands from inside of a Ruby program? How do I then get output from these commands back into Ruby? <code> ,How to call shell commands from Ruby
Calling shell commands from Ruby, How do I call shell commands from inside of a Ruby program? How do I then get output from these commands back into Ruby? <code> ,How to call shell commands from Ruby
How do I rake tasks within a ruby script?," I have a Rakefile with a Rake task that I would normally call from the command line: I'd like to write a Ruby script that calls that Rake task multiple times, but the only solution I see is shelling out using `` (backticks) or system.What's the right way to do this? <code>  rake blog:post Title",How do I run Rake tasks within a Ruby script?
How do I run rake tasks within a ruby script?," I have a Rakefile with a Rake task that I would normally call from the command line: I'd like to write a Ruby script that calls that Rake task multiple times, but the only solution I see is shelling out using `` (backticks) or system.What's the right way to do this? <code>  rake blog:post Title",How do I run Rake tasks within a Ruby script?
How do I create a new Ruby on Rails application using MySQL instead of SQLite?," I want to create my Rails application with MySQL, because I like it so much. How can I do that in the latest version of Rails instead of the default SQLite? <code> ",Create a new Ruby on Rails application using MySQL instead of SQLite
How to sell Python to a client/boss/person with lots of cash," When asked to create system XYZ and you ask to do it in Python over PHP or Ruby, what are the main features you can mention when they require you to explain it? <code> ",How to sell Python to a client/boss/person
why doesn't Ruby have a real StringBuffer or StringIO," I recently read a nice post on using StringIO in Ruby. What the author doesn't mention, though, is that StringIO is just an ""I."" There's no ""O."" You can't do this, for example: Ruby really needs a StringBuffer just like the one Java has. StringBuffers serve two important purposes. First, they let you test the output half of what Ruby's StringIO does. Second, they are useful for building up long strings from small parts -- something that Joel reminds us over and over again is otherwise very very slow.Is there a good replacement?It's true that Strings in Ruby are mutable, but that doesn't mean we should always rely on that functionality. If stuff is large, the performance and memory requirements of this, for example, is really bad. The ""correct"" way to do this in Java is: Though my Java is a bit rusty. <code>  s = StringIO.news << 'foo's << 'bar's.to_s# => should be ""foo\nbar""# => really is ''` result = stuff.map(&:to_s).join(' ') result = StringBuffer.new("""")for(String s : stuff) { result.append(s);}",Why doesn't Ruby have a real StringBuffer or StringIO?
What do the different brackets in Ruby Mean?," In Ruby, what's the difference between {} and []?{} seems to be used for both code blocks and hashes.Are [] only for arrays?The documention isn't very clear. <code> ",What do the different brackets in Ruby mean?
Ruby - Exit Message," Is there a one line function call that quits the program and displays a message? I know in Perl it's as simple as: I'm tired of typing this: <code>  die(""Message goes here"") puts ""Message goes here""exit",How to create an exit message
How would you test observers with rSpec, Suppose you have an ActiveRecord::Observer in one of your Ruby on Rails applications - how do you test this observer with rSpec? <code> ,How would you test observers with rSpec in a Ruby on Rails application?
Is it possible to call Javascript's onsubmit event programatically on a form?," In Ruby on Rails, I'm attempting to update the innerHTML of a div tag using the form_remote_tag helper. This update happens whenever an associated select tag receives an onchange event. The problem is, <select onchange=""this.form.submit();"">; doesn't work. Nor does document.forms[0].submit(). The only way to get the onsubmit code generated in the form_remote_tag to execute is to create a hidden submit button, and invoke the click method on the button from the select tag. Here's a working ERb partial example. What I want to do is something like this, but it doesn't work. So, is there any way to remove the invisible submit button for this use case?There seems to be some confusion. So, let me explain. The basic problem is that submit() doesn't call the onsubmit() code rendered into the form.The actual HTML form that Rails renders from this ERb looks like this: I want to axe the invisible submit button, but using a straight form.submit appears to not work. So, I need some way to call the form's onsubmit event code.Update: Orion Edwards solution would work if there wasn't a return(false); generated by Rails. I'm not sure which is worse though, sending a phantom click to an invisible submit button or calling eval on the getAttribute('onsubmit') call after removing the return call with a javascript string replacement!  <code>  <% form_remote_tag :url => product_path, :update => 'content', :method => 'get' do -%> <% content_tag :div, :id => 'content' do -%> <%= select_tag :update, options_for_select([[""foo"", 1], [""bar"", 2]]), :onchange => ""this.form.commit.click"" %> <%= submit_tag 'submit_button', :style => ""display: none"" %> <% end %><% end %> <% form_remote_tag :url => product_path, :update => 'content', :method => 'get' do -%> <% content_tag :div, :id => 'content' do -%> # the following line does not work <%= select_tag :update, options_for_select([[""foo"", 1], [""bar"", 2]]), :onchange => ""this.form.onsubmit()"" %> <% end %><% end %> <form action=""/products/1"" method=""post"" onsubmit=""new Ajax.Updater('content', '/products/1', {asynchronous:true, evalScripts:true, method:'get', parameters:Form.serialize(this)}); return false;""> <div style=""margin:0;padding:0""> <input name=""authenticity_token"" type=""hidden"" value=""4eacf78eb87e9262a0b631a8a6e417e9a5957cab"" /> </div> <div id=""content""> <select id=""update"" name=""update"" onchange=""this.form.commit.click""> <option value=""1"">foo</option> <option value=""2"">bar</option> </select> <input name=""commit"" style=""display: none"" type=""submit"" value=""submit_button"" /> </div></form>",Is it possible to call Javascript's onsubmit event programmatically on a form?
Is there anyway to run ruby on rails applications on a windows box?," I'm looking to run Redmine, a Ruby on Rails app, on a VPS windows box. The only thing I can really think of is running a virtual Linux machine and hosting it from there. If that is my only option, am I going to run into problems running a virtual machine inside of a virtual machine?Also, this will be an internal app, so performance isn't my number once concern. <code> ",Is there anyway to run Ruby on Rails applications on a Windows box?
Convert an ruby string with brackets to an array," I would like to convert the following string into an array/nested array:  <code>  str = ""[[this, is],[a, nested],[array]]""newarray = # this is what I need help with!newarray.inspect # => [['this','is'],['a','nested'],['array']]",How do I convert a Ruby string with brackets to an array?
SQLite-ruby gem: Failed to build gem native extension," Update: Check out this follow-up question: Gem Update on Windows - is it broken?On Windows, when I do this: I get the following error: Same thing happens with the hpricot gem. I seem to remember these gems installed just fine on < 1.0 gems, but now I'm on 1.2.0, things have gone screwy.I have also tried this: Needless to say, this doesn't work either (same error)Does anyone know what is going on here and how to fix this?Update: Check out this follow-up question: Gem Update on Windows - is it broken? <code>  gem install sqlite3-ruby Building native extensions. This could take a while...ERROR: Error installing sqlite3-ruby: ERROR: Failed to build gem native extension.c:/ruby/bin/ruby.exe extconf.rb install sqlite3-ruby --platform Win32checking for fdatasync() in rt.lib... nochecking for sqlite3.h... nonmake'nmake' is not recognized as an internal or external command,operable program or batch file.Gem files will remain installed in c:/ruby/lib/ruby/gems/1.8/gems/sqlite3-ruby-1.2.4 for inspection.Results logged to c:/ruby/lib/ruby/gems/1.8/gems/sqlite3-ruby-1.2.4/ext/sqlite3_api/gem_make.out gem install sqlite3-ruby --platform Win32",sqlite3-ruby gem: Failed to build gem native extension
"Why do ruby setters need ""self."" qualification within the class?"," Ruby setterswhether created by (c)attr_accessor or manuallyseem to be the only methods that need self. qualification when accessed within the class itself. This seems to put Ruby alone the world of languages:All methods need self/this (like Perl, and I think Javascript)No methods require self/this is (C#, Java)Only setters need self/this (Ruby?)The best comparison is C# vs Ruby, because both languages support accessor methods which work syntactically just like class instance variables: foo.x = y, y = foo.x . C# calls them properties.Here's a simple example; the same program in Ruby then C#: take away the self.qwerty =() and it fails (Ruby 1.8.6 on Linux & OS X). Now C#: Question: Is this true? Are there other occasions besides setters where self is necessary? I.e., are there other occasions where a Ruby method cannot be invoked without self?There are certainly lots of cases where self becomes necessary. This is not unique to Ruby, just to be clear: Same ambiguity is resolved in same way. But while subtle I'm asking about the case where A method has been defined, andNo local variable has been defined, andwe encounter which is ambiguousis this a method invocation or an new local variable assignment?@Mike StoneHi! I understand and appreciate the points you've made and your example was great. Believe me when I say, if I had enough reputation,I'd vote up your response. Yet we still disagree: on a matter of semantics, andon a central point of factFirst I claim, not without irony, we're having a semantic debate about the meaning of 'ambiguity'.When it comes to parsing and programming language semantics (the subject of this question), surely you would admit a broad spectrum of the notion 'ambiguity'. Let's just adopt some random notation: ambiguous: lexical ambiguity (lex must 'look ahead')Ambiguous: grammatical ambiguity (yacc must defer to parse-tree analysis)AMBIGUOUS: ambiguity knowing everything at the moment of execution(and there's junk between 2-3 too). All these categories are resolved by gathering more contextual info, looking more and more globally. So when you say, ""qwerty = 4"" is UNAMBIGUOUS in C# when there is no variable defined...I couldn't agree more. But by the same token, I'm saying ""qwerty = 4"" is un-Ambiguous in ruby (as it now exists) ""qwerty = 4"" is Ambiguous in C#And we're not yet contradicting each other. Finally, here's where we really disagree: Either ruby could or could not be implemented without any further language constructs such that, For ""qwerty = 4,"" ruby UNAMBIGUOUSLY invokes an existing setter if there is no local variable definedYou say no. I say yes; another ruby could exist which behaves exactly like the current in every respect, except ""qwerty = 4"" defines a new variable when no setter and no local exists, it invokes the setter if one exists, and it assigns to the local if one exists. I fully accept that I could be wrong. In fact, a reason why I might be wrong would be interesting.Let me explain.Imagine you are writing a new OO language with accessor methods lookinglike instances vars (like ruby & C#). You'd probably start with conceptual grammars something like: But the parser-compiler (not even the runtime) will puke, because even afterall the input is grokked there's no way to know which grammar is pertinent.You're faced which a classic choice. I can't be sure of the details, butbasically ruby does this: that is why it's un-Ambiguous, while and C# does this: For C#, 'later' is still at compile time.I'm sure ruby could do the same, but 'later' would have to be at runtime, because as ben points out you don't know until the statement is executed which case applies.My question was never intended to mean ""do I really need the 'self.'?"" or ""what potential ambiguity is being avoided?"" Rather I wanted to know why was thisparticular choice made? Maybe it's not performance. Maybe it just got the jobdone, or it was considered best to always allow a 1-liner local to override a method (a pretty rare case requirement) ...But I'm sort of suggesting that the most dynamical language might be the one whichpostpones this decision the longest, and chooses semantics based on the most contextual info: so if you have no local and you defined a setter, it would use the setter. Isn't this why we like ruby, smalltalk, objc, because method invocation is decided at runtime,offering maximum expressiveness? <code>  class A def qwerty; @q; end # manual getter def qwerty=(value); @q = value; end # manual setter, but attr_accessor is same def asdf; self.qwerty = 4; end # ""self."" is necessary in ruby? def xxx; asdf; end # we can invoke nonsetters w/o ""self."" def dump; puts ""qwerty = #{qwerty}""; endenda = A.newa.xxxa.dump using System;public class A { public A() {} int q; public int qwerty { get { return q; } set { q = value; } } public void asdf() { qwerty = 4; } // C# setters work w/o ""this."" public void xxx() { asdf(); } // are just like other methods public void dump() { Console.WriteLine(""qwerty = {0}"", qwerty); }}public class Test { public static void Main() { A a = new A(); a.xxx(); a.dump(); }} using System;public class A { public A() {} public int test { get { return 4; }} public int useVariable() { int test = 5; return test; } public int useMethod() { int test = 5; return this.test; }}public class Test { public static void Main() { A a = new A(); Console.WriteLine(""{0}"", a.useVariable()); // prints 5 Console.WriteLine(""{0}"", a.useMethod()); // prints 4 }} qwerty = 4 var = expr // assignment method = expr // setter method invocation var = expr // assignment (new or existing) // method = expr, disallow setter method invocation without . symbol = expr // push 'symbol=' onto parse tree and decide later // if local variable is def'd somewhere in scope: assignment // else if a setter is def'd in scope: invocation","Why do Ruby setters need ""self."" qualification within the class?"
Raising Exceptions vs Throwing Exceptions, Ruby has two different exceptions mechanisms: Throw/Catch and Raise/Rescue.Why do we have two?When should you use one and not the other?  <code> ,What is the difference between Raising Exceptions vs Throwing Exceptions in Ruby?
What is the differance between Raising Exceptions vs Throwing Exceptions in Ruby?, Ruby has two different exceptions mechanisms: Throw/Catch and Raise/Rescue.Why do we have two?When should you use one and not the other?  <code> ,What is the difference between Raising Exceptions vs Throwing Exceptions in Ruby?
Best way to convert a Ruby string range to a Range object," I have some Ruby code which takes dates on the command line in the format: I want to run for all dates between 20080201 and 20080229 inclusive and the other dates present in the list.I can get the string 20080201..20080229, so is the best way to convert this to a Range instance? Currently, I am using eval, but it feels like there should be a better way.@Purfideas I was kind of looking for a more general answer for converting any string of type int..int to a Range I guess. <code>  -d 20080101,20080201..20080229,20080301",What is the best way to convert a Ruby string range to a Range object
How do I send mail from a Ruby program ?, I want to send email from a Ruby application. Is there a call in the core language to do this or is there a library I should use? What's the best way to do this? <code> ,How do I send mail from a Ruby program?
Ruby - Get a Variable's Name," I'm not entirely sure if this is possible in Ruby, but hopefully there's an easy way to do this. I want to declare a variable and later find out the name of the variable. That is, for this simple snippet: How can I get the name of the array (here, ""foo"") back? If it is indeed possible, does this work on any variable (e.g., scalars, hashes, etc.)?Edit: Here's what I'm basically trying to do. I'm writing a SOAP server that wraps around a class with three important variables, and the validation code is essentially this: My question is then: Can I replace the instances of 'param_name' with foo, goo, or bar? These objects are all Arrays, so the answers I've received so far don't seem to work (with the exception of re-engineering the whole thing ala dbr's answer)  <code>  foo = [""goo"", ""baz""] [foo, goo, bar].each { |param| if param.class != Array puts ""param_name wasn't an Array. It was a/an #{param.class}"" return ""Error: param_name wasn't an Array"" end }",Access variables programmatically by name in Ruby
How to setup a RAILS integration test for XML mehtods, Given a controller method like: What's the best way to write an integration test that asserts that the return has the expected XML? <code>  def show @model = Model.find(params[:id]) respond_to do |format| format.html # show.html.erb format.xml { render :xml => model } endend,How to setup a Rails integration test for XML methods?
"Rails Model, View, Controller, or Helpler? Wherefore Art Thou Logic"," In Ruby on Rails Development (or MVC in general), what quick rule should I follow as to where to put logic.Please answer in the affirmative - With Do put this here, rather than Don't put that there. <code> ","Rails Model, View, Controller, and Helper: what goes where?"
"Rails Model, View, Controller, and Helpler: what goes where?"," In Ruby on Rails Development (or MVC in general), what quick rule should I follow as to where to put logic.Please answer in the affirmative - With Do put this here, rather than Don't put that there. <code> ","Rails Model, View, Controller, and Helper: what goes where?"
Why is RSpec so slow?, Whenever I run rspec tests for my Rails application it takes forever and a day of overhead before it actually starts running tests. Why is rspec so slow? Is there a way to speed up Rails' initial load or single out the part of my Rails app I need (e.g. ActiveRecord stuff only) so it doesn't load absolutely everything to run a few tests? <code> ,Why is RSpec so slow under Rails?
How do I convert mp3 to aac programmatically?," I've been looking for a way to convert an mp3 to aac programmatically or via the command line with no luck. Ideally, I'd have a snippet of code that I could call from my rails app that converts an mp3 to an aac. I installed ffmpeg and libfaac and was able to create an aac file with the following command:ffmpeg -i test.mp3 -acodec libfaac -ab 163840 dest.aacWhen i change the output file's name to dest.m4a, it doesn't play in iTunes. Thanks!  <code> ",How do I programmatically convert mp3 to an itunes-playable aac/m4a file?
enums in ruby, What's the best way to implement the enum idiom in Ruby? I'm looking for something which I can use (almost) like the Java/C# enums. <code> ,How to implement Enums in Ruby?
Enums in Ruby, What's the best way to implement the enum idiom in Ruby? I'm looking for something which I can use (almost) like the Java/C# enums. <code> ,How to implement Enums in Ruby?
which of these scripting languages is more appropriate for pen-testing?," First of all, I want to avoid a flame-war on languages. The languages to choose from are Perl, Python and Ruby . I want to mention that I'm comfortable with all of them, but the problem is that I can't focus just on one. If, for example, I see a cool Perl module, I have to try it out. If I see a nice Python app, I have to know how it's made. If I see a Ruby DSL or some Ruby voodoo, I'm hooked on Ruby for a while.Right now I'm working as a Java developer, but plan on taking CEH in the near future. My question is: for tool writing and exploit development, which language do you find to be the most appropriate?Again, I don't want to cause a flame-war or any trouble, I just want honest opinions from scripters that know what they're doing.One more thing: maybe some of you will ask ""Why settle on one language?"". To answer this: I would like to choose only one language, in order to try to master it. <code> ",Which of these scripting languages is more appropriate for pen-testing?
Ruby/Rails Collection to Collecti," I have a two tables joined with a join table - this is just pseudo code: What I need to do is if i have the id of a library, i want to get all the libraries that all the books that this library has are in.So if i have Library 1, and Library 1 has books A and B in them, and books A and B are in Libraries 1, 2, and 3, is there an elegant (one line) way todo this in rails?I was thinking: But that doesn't seem to work. Suggestions? <code>  LibraryBookLibraryBooks l = Library.find(1)allLibraries = l.books.libraries",Ruby/Rails Collection to Collection
Ruby - Match All Occurrences Of a Regex, Is there a quick way to find every match of a regular expression in Ruby? I've looked through the Regex object in the Ruby STL and searched on Google to no avail. <code> ,How to match all occurrences of a regex
Match All Occurrences of a Regex, Is there a quick way to find every match of a regular expression in Ruby? I've looked through the Regex object in the Ruby STL and searched on Google to no avail. <code> ,How to match all occurrences of a regex
Match all occurrences of a regex, Is there a quick way to find every match of a regular expression in Ruby? I've looked through the Regex object in the Ruby STL and searched on Google to no avail. <code> ,How to match all occurrences of a regex
Is is possible to combine a series of PDFs into one using Ruby?," I have a series of PDFs named sequentially like so:01_foo.pdf02_bar.pdf03_baz.pdfetc.Using Ruby, is it possible to combine these into one big PDF while keeping them in sequence? I don't mind installing any necessary gems to do the job.If this isn't possible in Ruby, how about another language? No commercial components, if possible.Update: Jason Navarrete's suggestion lead to the perfect solution:Place the PDF files needing to be combined in a directory along with pdftk (or make sure pdftk is in your PATH), then run the following script: Or I could even do it as a one-liner from the command-line: Great suggestion Jason, perfect solution, thanks. Give him an up-vote people. <code>  pdfs = Dir[""[0-9][0-9]_*""].sort.join("" "")`pdftk #{pdfs} output combined.pdf` ruby -e '`pdftk #{Dir[""[0-9][0-9]_*""].sort.join("" "")} output combined.pdf`'",Is it possible to combine a series of PDFs into one using Ruby?
"How can I ""Pretty"" format my JSON output in Ruby on Rails?"," I would like my JSON output in Ruby on Rails to be ""pretty"" or nicely formatted. Right now, I call to_json and my JSON is all on one line. At times this can be difficult to see if there is a problem in the JSON output stream.Is there way to configure to make my JSON ""pretty"" or nicely formatted in Rails? <code> ","How to ""pretty"" format JSON output in Ruby on Rails"
How can I 'Pretty' format my JSON output in Rails?," I would like my JSON output in Ruby on Rails to be ""pretty"" or nicely formatted. Right now, I call to_json and my JSON is all on one line. At times this can be difficult to see if there is a problem in the JSON output stream.Is there way to configure to make my JSON ""pretty"" or nicely formatted in Rails? <code> ","How to ""pretty"" format JSON output in Ruby on Rails"
"How can I ""pretty"" format my JSON output in Ruby on Rails?"," I would like my JSON output in Ruby on Rails to be ""pretty"" or nicely formatted. Right now, I call to_json and my JSON is all on one line. At times this can be difficult to see if there is a problem in the JSON output stream.Is there way to configure to make my JSON ""pretty"" or nicely formatted in Rails? <code> ","How to ""pretty"" format JSON output in Ruby on Rails"
How best to generate a random string in Ruby," I'm currently generating an 8-character pseudo-random uppercase string for ""A"" .. ""Z"": but it doesn't look clean, and it can't be passed as an argument since it isn't a single statement. To get a mixed-case string ""a"" .. ""z"" plus ""A"" .. ""Z"", I changed it to: but it looks like trash.Does anyone have a better method? <code>  value = """"; 8.times{value << (65 + rand(25)).chr} value = """"; 8.times{value << ((rand(2)==1?65:97) + rand(25)).chr}",How to generate a random string in Ruby
Rails like Database Migrations?," Is there any easy to install/use (on unix) database migration tools like Rails Migrations? I really like the idea, but installing ruby/rails purely to manage my database migrations seems overkill. <code> ",Rails-like Database Migrations?
Best way to add tests to an existing project?," I have a Rails project which I neglected to build tests for (for shame!) and the code base has gotten pretty large. A friend of mine said that RSpec was a pain to use unless you use it from the beginning. Is this true? What would make him say that?So, considering the available tests suites and the fact that the code base is already there, what would be my best course of action for getting this thing testable? Is it really that much different than doing it from the beginning? <code> ",Best way to add tests to an existing Rails project?
How do I quickly slice and dice large data files in Ruby?," I'd like to slice and dice large datafiles, up to a gig, in a fairly quick and efficient manner. If I use something like UNIX's ""CUT"", it's extremely fast, even in a CYGWIN environment. I've tried developing and benchmarking various Ruby scripts to process these files, and always end up with glacial results. What would you do in Ruby to make this not so dog slow? <code> ",How do I quickly slice and dice large data files?
Does anyone know of any cross platform GUI log viewers for Ruby On Rails," I'm tired of using: To keep track of my rails logs. Instead I would like something that displays the info in a grid and allows my to sort, filter and look at stack traces per log message.Does anyone know of a GUI tool for displaying rails logs. Ideally I would like a standalone app (not something in Netbeans or Eclipse)  <code>  tail -f development.log",Does anyone know of any cross platform GUI log viewers for Ruby On Rails?
Ruby on Rails - Tests," I'm confused about what the various testing appliances in Ruby on Rails are for. I have been using the framework for about 6 months but I've never understood the testing part of it. The only testing I've used is JUnit3 in Java and that only briefly.Everything I've read about it just shows testing validations. Shouldn't the validations in rails just work? It seems more like testing the framework than testing the your code. Why would you need to test validations? Furthermore, the tests seem super fragile to any change in your code. So if you change anything in your models, you have to change your tests and fixtures to match. Doesn't this violate the DRY principle?Third, writing test code seems to take alot of time. Is that normal? Wouldn't it just be faster to refresh my browser and see if it worked? I already have to play with my application just to see if it flows correctly and make sure my CSS hasn't exploded. Why wouldn't manual testing be enough?I've asked these questions before and I haven't gotten more than ""automated testing is automated"". I am smart enough to figure out the advantages of automating a task. My problem is that costs of writing tests seem absurdly high compared to the benefits. That said, any detailed response is welcome because I probably missed a benefit or two. <code> ",Ruby on Rails - Why use tests?
How do you find the namespace/module name programatically in Ruby on Rails?, How do I find the name of the namespace or module 'Foo' in the filter below? <code>  class ApplicationController < ActionController::Base def get_module_name @module_name = ??? endendclass Foo::BarController < ApplicationController before_filter :get_module_nameend,How do you find the namespace/module name programmatically in Ruby on Rails?
Good idea access session in observer or not?," I want to log user's actions in my Ruby on Rails application.So far, I have a model observer that inserts logs to the database after updates and creates. In order to store which user performed the action that was logged, I require access to the session but that is problematic.Firstly, it breaks the MVC model. Secondly, techniques range from the hackish to the outlandish, perhaps maybe even tying the implementation to the Mongrel server.What is the right approach to take? <code> ",Good idea to access session in observer or not?
How to read a password in Ruby," I am running Ruby and MySQL on a Windows box.I have some Ruby code that needs to connect to a MySQL database a perform a select. To connect to the database I need to provide the password among other things. The Ruby code can display a prompt requesting the password, the user types in the password and hits the Enter key. What I need is for the password, as it is typed, to be displayed as a line of asterisks.How can I get Ruby to display the typed password as a line of asterisks in the 'dos box'? <code> ",How can I read a password from the command line in Ruby?
How can I read a password?," I am running Ruby and MySQL on a Windows box.I have some Ruby code that needs to connect to a MySQL database a perform a select. To connect to the database I need to provide the password among other things. The Ruby code can display a prompt requesting the password, the user types in the password and hits the Enter key. What I need is for the password, as it is typed, to be displayed as a line of asterisks.How can I get Ruby to display the typed password as a line of asterisks in the 'dos box'? <code> ",How can I read a password from the command line in Ruby?
How to handle per-Model database connections with ActiveRecord," I'd like the canonical way to do this. My Google searches have come up short. I have one ActiveRecord model that should map to a different database than the rest of the application. I would like to store the new configurations in the database.yml file as well.I understand that establish_connection should be called, but it's not clear where. Here's what I got so far, and it doesn't work: <code>  class Foo < ActiveRecord::Base establish_connection(('foo_' + ENV['RAILS_ENV']).intern)end",How to best handle per-Model database connections with ActiveRecord?
How to incorperate Interactive Ruby into my development process?, I am trying to find a better way to integrate IRB with my normal ruby devleopment. Currently I rarely use IRB with my code. I only use it to verify syntax or to try something small. I know I can load my own code into ruby as a but this usually doesn't mesh with my programming style. Sometimes the variables I want to examine are out of scope or inside of a loop. Is there an easy way to fire up my script and freeze at a certain point inside of IRB? I guess I'm looking for an easier way to debug my ruby code without breaking my F5(compile) key. Maybe a more experienced ruby developer can share with me a more streamlined method of development. <code>  require 'mycode',How to incorporate Interactive Ruby into my development process?
Python Vs. Ruby for Metaprogramming," I'm currently primarily a D programmer and am looking to add another language to my toolbox, preferably one that supports the metaprogramming hacks that just can't be done in a statically compiled language like D.I've read up on Lisp a little and I would love to find a language that allows some of the cool stuff that Lisp does, but without the strange syntax, etc. of Lisp. I don't want to start a language flame war, and I'm sure both Ruby and Python have their tradeoffs, so I'll list what's important to me personally. Please tell me whether Ruby, Python, or some other language would be best for me.Important:Good metaprogramming. Ability to create classes, methods, functions, etc. at runtime. Preferably, minimal distinction between code and data, Lisp style.Nice, clean, sane syntax and consistent, intuitive semantics. Basically a well thought-out, fun to use, modern language.Multiple paradigms. No one paradigm is right for every project, or even every small subproblem within a project.An interesting language that actually affects the way one thinks about programming.Somewhat important:Performance. It would be nice if performance was decent, but when performance is a real priority, I'll use D instead.Well-documented. Not important:Community size, library availability, etc. None of these are characteristics of the language itself, and all can change very quickly.Job availability. I am not a full-time, professional programmer. I am a grad student and programming is tangentially relevant to my research.Any features that are primarily designed with very large projects worked on by a million code monkeys in mind. <code> ",Python vs. Ruby for metaprogramming
Ruby - Regex String Insertion," I need to substitute the value of a string into my regular expression in Ruby. Is there an easy way to do this? For example: <code>  foo = ""0.0.0.0""goo = ""here is some other stuff 0.0.0.0"" if goo =~ /value of foo here dynamically/ puts ""success!""end",Interpolating a string into a regex
Section-specific navigation - how to in Ruby on Rails?," I have a Ruby/Rails app that has two or three main ""sections"". When a user visits that section, I wish to display some sub-navigation. All three sections use the same layout, so I can't ""hard code"" the navigation into the layout.I can think of a few different methods to do this. I guess in order to help people vote I'll put them as answers.Any other ideas? Or what do you vote for? <code> ",How do I implement Section-specific navigation in Ruby on Rails?
Looking to try out JRuby and JRuby on Rails, I'm looking to try out JRuby and JRuby on Rails. I'm having trouble finding information on what's difference between JRuby on Rails and Ruby on Rails. What's the differences I need to look out for? <code> ,"JRuby on Rails vs. Ruby on Rails, what's difference?"
"JRuby on Rails vs. Ruby on Rails, what's different?", I'm looking to try out JRuby and JRuby on Rails. I'm having trouble finding information on what's difference between JRuby on Rails and Ruby on Rails. What's the differences I need to look out for? <code> ,"JRuby on Rails vs. Ruby on Rails, what's difference?"
"What is the difference between Ruby and Python versions of the ""self"" keyword?"," I've done some Python but have just now starting to use RubyI could use a good explanation of the difference between ""self"" in these two languages. Obvious on first glance:Self is not a keyword in Python, but there is a ""self-like"" value no matter what you call it.Python methods receive self as an explicit argument, whereas Ruby does not.Ruby sometimes has methods explicitly defined as part of self using dot notation.Initial Googling revealshttp://rubylearning.com/satishtalim/ruby_self.htmlhttp://www.ibiblio.org/g2swap/byteofpython/read/self.html  <code> ","What is the difference between Ruby and Python versions of""self""?"
'pass parameter by reference' in Ruby ?," In Ruby, is it possible to pass by reference a parameter with value-type semantics (e.g. a Fixnum)?I'm looking for something similar to C#'s 'ref' keyword.Example: Btw. I know I could just use: <code>  def func(x) x += 1enda = 5func(a) #this should be something like func(ref a)puts a #should read '6' a = func(a)",'pass parameter by reference' in Ruby?
"In Ruby on Rails, how do I format a date to get ""th"", as in, ""Sun Oct 5th""?"," I want to display dates in the format: short day of week, short month, day of month without leading zero but including ""th"", ""st"", ""nd"", or ""rd"" suffix.For example, the day this question was asked would display ""Thu Oct 2nd"".I'm using Ruby 1.8.7, and Time.strftime just doesn't seem to do this. I'd prefer a standard library if one exists. <code> ","In Ruby on Rails, how do I format a date with the ""th"" suffix, as in, ""Sun Oct 5th""?"
$SAFE on ruby," I want to be able to run unstrusted ruby code. I want to be able to pass variables to said untrusted code that it may use. I also want said code to return a result to me. Here is a conceptual example of what I am thinking Just to clarify, I am basically using the untrusted code as a function. I want to provide its some inputs, and then allow it to write to the output. That is all I really want, I don't care how it is done, I just want the ability to use untrusted Ruby code as a sort of function. The solution does not have to look anything like the code I wrote above, I am just using it to illustrate what I want.Now, I can currently think of 3 ways to do this:Use the $SAFE level construct above.whytheluckystiff has a Sandbox plugin for rubyI could run each function in its own virtual machine, using some sort of os virtualization software like vmware or Xen or something.I am wondering if anyone has any recommendations for running untrusted ruby code in a functional way? What option would you recomend? How would you go about it? Thanks. <code>  input = ""sweet""output = nilThread.start { $SAFE = 4 #... untrusted code goes here, it uses the input variable(s) #to calculate some result that it places in the output variable}#parse the output variable as a string.",How to run untrusted Ruby code inside a safe sandbox?
How to get a single character in ruby without pressing enter," How can I get a single keyboard character from the terminal with Ruby without pressing enter?I tried Curses::getch, but that didn't really work for me. <code> ",How to get a single character without pressing enter?
How to find where a ruby method is defined (at runtime)?," We recently had a problem where, after a series of commits had occurred, a backend process failed to run. Now, we were good little boys and girls and ran rake test after every check-in but, due to some oddities in Rails' library loading, it only occurred when we ran it directly from Mongrel in production mode.I tracked the bug down and it was due to a new Rails gem overwriting a method in the String class in a way that broke one narrow use in the runtime Rails code.Anyway, long story short, is there a way, at runtime, to ask Ruby where a method has been defined? Something like whereami( :foo ) that returns /path/to/some/file.rb line #45? In this case, telling me that it was defined in class String would be unhelpful, because it was overloaded by some library. I cannot guarantee the source lives in my project, so grepping for 'def foo' won't necessarily give me what I need, not to mention if I have many def foo's, sometimes I don't know until runtime which one I may be using. <code> ",How to find where a method is defined at runtime?
caching calculated column in rails," I have a tree of active record objects, something like: It is too costly to recalculate the complicated_calculation each time. So, I need a way to cache the value. However, if any part is changed, it needs to invalidate its cache and the cache of its parent, and grandparent, etc.As a rough draft, I created a column to hold the cached calculation in the ""parts"" table, but this smells a little rotten. It seems like there should be a cleaner way to cache the calculated values without stuffing them along side the ""real"" columns. <code>  class Part < ActiveRecord::Base has_many :sub_parts, :class_name => ""Part"" def complicated_calculation if sub_parts.size > 0 return self.sub_parts.inject(0){ |sum, current| sum + current.complicated_calculation } else sleep(1) return rand(10000) end endend",How can I cache a calculated column in rails?
ruby: how to post a file via net/http as multipart/form-data?," I want to do an HTTP POST that looks like an HMTL form posted from a browser. Specifically, post some text fields and a file field.Posting text fields is straightforward, there's an example right there in the net/http rdocs, but I can't figure out how to post a file along with it.Net::HTTP doesn't look like the best idea. curb is looking good. <code> ",Ruby: How to post a file via HTTP as multipart/form-data?
Ruby: How to post a file via net/http as multipart/form-data?," I want to do an HTTP POST that looks like an HMTL form posted from a browser. Specifically, post some text fields and a file field.Posting text fields is straightforward, there's an example right there in the net/http rdocs, but I can't figure out how to post a file along with it.Net::HTTP doesn't look like the best idea. curb is looking good. <code> ",Ruby: How to post a file via HTTP as multipart/form-data?
ruby: how to post a file via net/http as multipart/form-data?," I want to do an HTTP POST that looks like an HMTL form posted from a browser. Specifically, post some text fields and a file field.Posting text fields is straightforward, there's an example right there in the net/http rdocs, but I can't figure out how to post a file along with it.Net::HTTP doesn't look like the best idea. curb is looking good. <code> ",Ruby: How to post a file via HTTP as multipart/form-data?
How do I change the title of a page in rails?, What is the best way to create a custom title for pages in a Rails app without using a plug-in? <code> ,Rails: How to change the title of a page?
Persisting an environment variable through ruby," I am trying to set my DOS environment variable in Ruby, and have it persist after the script exits. For example, if I want a ruby script set_abc_env.rb to set environment variable 'ABC' to 'blah', I expect to run the following: How do I do this? <code>  C:> echo %ABC%C:> set_abc_env.rbC:> echo %ABC% blah",Persisting an environment variable through Ruby
Ruby: builtin do ... while ?," Ruby has a wealth of conditional constructs, including if/unless, while/until etc.The while block from C: can be directly translated to Ruby: However, I can't seem to find a built-in equivalent in Ruby for a C-like do ... while block in which the block contents are executed at least once: Any suggestions? <code>  while (condition) { ...} while condition ...end do { ... } while (condition);",Does Ruby have a built-in do ... while?
setting ruby hash .default to a list," I thought I understood what the default method does to a hash... Give a default value for a key if it doesn't exist: All good.But if I set the default to be a empty list, or empty hash, I don't understand it's behaviour at all.... I was hoping/expecting the same behaviour as if I had used the ||= operator... Can anyone explain what is going on? <code>  irb(main):001:0> a = {}=> {}irb(main):002:0> a.default = 4=> 4irb(main):003:0> a[8]=> 4irb(main):004:0> a[9] += 1=> 5irb(main):005:0> a=> {9=>5} irb(main):001:0> a = {}=> {}irb(main):002:0> a.default = []=> []irb(main):003:0> a[8] << 9=> [9] # great!irb(main):004:0> a=> {} # ?! would have expected {8=>[9]}irb(main):005:0> a[8]=> [9] # awesome!irb(main):006:0> a[9]=> [9] # unawesome! shouldn't this be [] ?? irb(main):001:0> a = {}=> {}irb(main):002:0> a[8] ||= []=> []irb(main):003:0> a[8] << 9=> [9]irb(main):004:0> a=> {8=>[9]}irb(main):005:0> a[9]=> nil",Setting ruby hash .default to a list
Can you monkey patch methods on core types in python?," Ruby can add methods to the Number class and other core types to get effects like this: But it seems like Python cannot do this. Is this true? And if so, why? Does it have something to do with the fact that type can't be modified?Update: Rather than talking about different definitions of monkey patching, I would like to just focus on the example above. I have already concluded that it cannot be done as a few of you have answered. But I would like a more detailed explanation of why it cannot be done, and maybe what feature, if available in Python, would allow this.To answer some of you: The reason I might want to do this is simply aesthetics/readability. This reads more like English and clearly indicates which is the tested value and which is the expected value, as supposed to: This concept is what Rspec and some other Ruby frameworks are based on. <code>  1.should_equal(1) item.price.should_equal(19.99) should_equal(item.price, 19.99)",Can you monkey patch methods on core types in Python?
How to get a random number in Ruby?, How do I generate a random number between 0 and n? <code> ,How to get a random number in Ruby
Get the name of the currently executing method in Ruby," $0 is the variable for the top level Ruby program, but is there one for the current method? <code> ",Get the name of the currently executing method
how do I force ActiveRecord to reload a class?," I'm creating a bunch of migrations, some of which are standard ""create table"" or ""modify table"" migrations, and some of which modify data. I'm using my actual ActiveRecord models to modify the data, a la: The problem is that if I load the Blog class, then modify the table, then use the Blog class again, the models have the old table definitions, and cannot save to the new table. Is there a way to reload the classes and their attribute definitions so I can reuse them? <code>  Blog.all.each do |blog| update_some_blog_attributes_to_match_new_schemaend",How do I force ActiveRecord to reload a class?
"RIAA in Ruby (Or, How to Manage Resources in Ruby)"," I know it's by design that you can't control what happens when an object is destroyed. I am also aware of defining some class method as a finalizer.However is the ruby idiom for C++'s RAII (Resources are initialized in constructor, closed in destructor)? How do people manage resources used inside objects even when errors or exceptions happen?Using ensure works: but users of the class have to remember to do the whole begin-rescue-ensure chacha everytime the open method needs to be called. So for example, I'll have the following class: The resource_handle won't be closed if the exception is cause by some other class and the script exits.Or is the problem more of I'm still doing this too C++-like? <code>  f = File.open(""testfile"")begin # .. processrescue # .. handle errorensure f.close unless f.nil?end class SomeResource def initialize(connection_string) @resource_handle = ...some mojo here... end def do_something() begin @resource_handle.do_that() ... rescue ... ensure end def close @resource_handle.close endend","RAII in Ruby (Or, How to Manage Resources in Ruby)"
Ruby on iPhone," Hi I'm looking into iPhone development, and Objective-C is not be my preferred language. As far as I can see at this moment Ruby cannot be used to talk to Cocoa Touch at the moment on the iPhone.So my question is, am I wrong? Can I use Ruby on the iPhone to develop Cocoa Touch applications. And what is the future looking like for Ruby on the iPhone? <code> ",Can you develop native iPhone apps in Ruby?
rubyonrails and jeditable (jquery)," Has anyone gotten the jquery plugin jeditable to run properly in a Rails applications. If so, could you share some hints on how to set it up? I'm having some trouble with creating the ""submit-url"".IIRC, you cannot simply call ruby code from within javascript (please let me be wrong:-). Do you mean RJS??? Isn't that limited to Prototype? I'm using jQuery.UPDATE:uh.....asked this a while back and in the meantime switched to a different solution. But IIRC my main issue was the following:I'm using the RESTful resources. So let's say I have to model a blog and thus have the resource ""posts"". If I want to edit a post (e.g. the post with the ID 8), my update is sent via HTTP to the URL http://my.url.com/posts/8 with the HTTP verb POST. This URL however is constructed in my Rails code. So how would I get my submit-url into my jQuery code? Since this is RESTful code, my update URL will change with every post. <code> ",Ruby on Rails and jeditable (jquery)
redirect puts to a log file, I am working on creating a daemon in Ruby using the daemons gem. I want to add output from the daemon into a log file. I am wondering what is the easiest way to redirect puts from the console to a log file. <code> ,"Redirect the ""puts"" command output to a log file"
FizzBuzz using Ternary Operator," I've been reading up on conditional-style expressions in ruby. However I came across one I couldn't quite understand to define the classic FizzBuzz problem. I understand the FizzBuzz problem and even wrote my own before finding the following quick solution utilising the ternary operator. If someone can explain to me how this chain works to satisfy the FizzBuzz problem it would be very much appreciated :) <code>  for i in 0...100 puts i%3==0 ? i%5==0 ? ""FizzBuzz"" : ""Buzz"" : i%5==0 ? ""Fizz"" : iend",FizzBuzz using ternary conditional operator
Why doesn't my Rails application / mind fit into a RESTful architecture," I started a Rails project recently and decided to use RESTful controllers. I created controllers for my key entities (such as Country) and added index, new, edit, create, show, update and delete. I added my map.resources :country to my routes file and life was good.After development progressed a little, I started to encounter problems. I sometimes needed extra actions in my controller. First there was the search action that returned the options for my fancy autocompleting search box. Then came the need to display the countries in two different ways in different places in the application (the data displayed was different too, so it wasn't just two views) - I added the index_full action. Then I wanted to show a country by name in the URL, not by id so I added the show_by_name action.What do you do when you need actions beyond the standard index, new, edit, create, show, update, delete in a RESTful controller in Rails? Do I need to add (and maintain) manual routes in the routes.rb file (which is a pain), do they go in a different controller, do I become unRESTful or am I missing something fundamental?I guess I am asking, do I need to work harder and add actions into my routes.rb file for the privilege of being RESTful? If I wasn't using map.resources to add the REST goodies, the standard :controller/:action, :controller/:action/:id routes would handle pretty much everything automatically. <code> ",Why do I need to work harder to make my Rails application fit into a RESTful architecture?
How to increase allowed stack size for a recursive ruby app.  Stack level too deep (SystemStackError)," Posting a stack overflow question on stackoverflow.com, how amusing :-)I'm running some recursive Ruby code and I get the: ""Stack level too deep (SystemStackError)""(I'm quite sure the code works, that I'm not in an infinite recursive death spiral, but that is not the point anyway)Is there anyway to change the allowed stack depth/size for my Ruby app?I don't quite get it if this is a restriction in Ruby, since the error says ""Stack level"", which gives me the impression that Ruby somehow counts 'levels' of stack, or if it simply means that the stack is full.I have tried running this program under both Vista and Ubuntu with same result.Under Ubuntu i tried changing the stack size with 'ulimit -s' from 8192 to 16000, but that didn't change anything.Edit:Thanks for the feedback.I do realize that using a recursive function perhaps isn't the most robust way to go.But that isn't the point either. I simply wonder if there is a way to increase the stack size.. period.And as I mentioned i did try running ulimit -s 16000 before running the ruby script.. with no improvement.. Am I using it wrong?Edit2:I was in fact having an infinite recursion in an edge case of the code. The truncated ruby stack trace when you get the ""Stack level too deep"" error is a bit misleading. When having a recursive behavior involving several functions, you get the impression that the numbers of recursions is much lower than it actually is. In this example one might thing that it crashes after little bit more than 190 calls, but it is actually around 15000 calls -Andreas <code>  tst.rb:8:in `p': stack level too deep (SystemStackError) from tst.rb:8:in `bar' from tst.rb:12:in `bar' from tst.rb:19:in `foo' from tst.rb:10:in `bar' from tst.rb:19:in `foo' from tst.rb:10:in `bar' from tst.rb:19:in `foo' from tst.rb:10:in `bar' ... 190 levels... from tst.rb:19:in `foo' from tst.rb:10:in `bar' from tst.rb:19:in `foo' from tst.rb:22",How to increase stack size for a ruby app. Recursive app getting: Stack level too deep (SystemStackError)
Ruby support for namespaces," I work at a small company and our production system uses a hand-rolled RESTful API, implemented in Java with JAXB. We now find that we're taking on customers who use Ruby on Rails, and I have to come up with a reference implementation to show customers how to use our API in Ruby. I'd love to be able to just tell them to use ActiveResource, but the XML required by our API uses (and absolutely requires) namespaces. Unfortunately, we've already got a number of other customers who've already integrated this API, so removing the usage of namespaces is out of the question. What's the best way to generate XML with namespaces in Ruby ? <code> ",Ruby support for XML namespaces
"Ruby and linux, prefered setup?"," Mac's have TextMate as there preferred application for ruby development, but what would be the preferred application for linux? I need something where it's easy to work with multiple files, project structure and setup commands to run my ruby app or if it is one my merb app.Syntax highlighting is also a must.Now I typically use Vim, but it's not the best for working with multiple files or with a project structure, even with VTreeView plug-in or multiple VIM windows.So what would you guys suggest?If you have better plugins to use for VIM feel free to mention them, I'm not ruling out VIM here. <code> ","Ruby and linux, preferred setup?"
How can I find a model's relationships?," I want to, when given a particular model, return all the related models it is associated with. For example: Is there a way to do this already without having to roll my own? Failing that, any suggestions for the best way to do this? <code>  class Dog < ActiveRecord::Base has_many :bones belongs_to :masterendd = Dog.firstd.associations #<== should return [Bone, Master]",How can I find a models' relationships?
In Ruby: How does one - without inheritance - override a class method and call the original from within the new method?," I found one source which successfully overrode Time.strftime like this: The trouble is, strftime is an instance method. I need to override Time.now - a class method - in such away that any caller gets my new method, while the new method still calls the original .now method. I've looked at alias_method and have met with no success. <code>  class Time alias :old_strftime :strftime def strftime #do something old_strftime endend",How does one - without inheritance - override a class method and call the original from within the new method?
Checking if a variable is defined in Ruby, How can I check whether a variable is defined in Ruby? Is there an isset-type method available? <code> ,Checking if a variable is defined?
"What's the ""h"" mean in ""<%=h""?"," When I generate a default scaffold, the display tags on show.html.erb have I know the difference between <% and <%=. What's the ""h"" do? <code>  <%=h @broker.name %>","What is the meaning of ""h"" in ""<%=h [ ...] %>""?"
Rails Plugin: Paperclip Question," How can I prevent the image tag that calls the associated image from displaying if no image is associated with the record? ...gives me the text ""Missing"" if there is no image associated with that agent. I want to test to see there is an image available first, then render the above tag if the test returns true.Better yet, is there anyway for me to specify a default image if no image is specifically provided? <code>  <%= image_tag @agent.avatar.url %>",How show hide image in paperclip when no image present
what's the best way to parse a body of text against multiple (15+) regexes on each line?," I have a body of text that I have to scan and each line contains at least 2 and sometimes four parts of information. The problem is that each line can be 1 out of 15-20 different actions.in ruby the current code looks somewhat like this: This is obviously 'THE PROBLEM'.I did manage to make it faster (in C++ by a 50% margin) by combining all the regexen into one but that is still not the speed I require -- I need to parse thousands of these files FAST!Right now I match them with regexes -- however this is intolerably slow. I started with ruby and hopped over to C++ in hopes that I'd get a speed boost and it just isn't happening.I've casually read on PEGs and grammar based parsing but it looks somewhat difficult to implement. Is this the direction I should head or are there different routes?basically I'm parsing poker hand histories and each line of the hand history usually contains 2-3 bits of information that I need to collect:who the player was, how much money or what cards the action entailed.. etc..Sample text that needs to be parsed: After I collect this information each action is turned into an xml node.Right now my ruby implementation of this is much faster than my C++ one but that's prob. Just cause I have not written in c code for well over 4-5 yearsUPDATE:I don't want to post all the code here but so far my hands/second look like the following: I'm currently testing antlr to see if we can go any further but as of right now I'm very very happy with spirit's results.Related question: Efficiently querying one string against multiple regexes. <code>  text.split(""\n"").each do |line| #around 20 times................ expressions['actions'].each do |pat, reg| #around 20 times................. buriedtens posts $5The button is in seat #4*** HOLE CARDS ***Dealt to Mayhem 31337 [8s Ad]Sherwin7 foldsOneMiKeee foldssyhg99 calls $5buriedtens raises to $10 588 hands/second -- boost::spirit in c++60 hands/second -- 1 very long and complicated regex in c++ (all the regexen put together)33 hands/second -- normal regex style in ruby",What's the best way to parse a body of text against multiple (15+) regexes on each line?
How to stub an instance method called by constructor?," How can I stub do_something in rspec, before the original implementation is called (thus assigning 42 to @x)? And without changing the implementation, of course. <code>  class A def initialize @x = do_something end def do_something 42 endend",rspec: How to stub an instance method called by constructor?
 ::Base part meaninng  in ActiveRecord::Base," What does ::Base part mean in Person < ActiveRecord::Base class declaration?I'm new to ruby and from what I've gathered so far, Person < ActiveRecord should be used.Thank you. <code> ", ::Base part meaning  in ActiveRecord::Base
Can I set up Cacade deleting in Rails ???," I know this is probably on the Internet somewhere but I can't find the answer here on Stackoverflow so I thought I may boost up the knowledge base here a little.I'm a newbie to Ruby and Rails but my company is getting pretty invested in it so I'm trying to get to know it in a little more detail.It's been difficult for me to change my mindset to designing an application from the ""model"" rather the from the database, so I'm trying to figure out how would do all of the design work that I have classically done in the Database in the Rails model instead.So the most recent task that I have given myself is to figure out how to configure a Rails database model to do cascading deletes? Is there an easy way of doing this? Or would I have to go into the MySql and set this up? <code> ",Can I set up Cascade deleting in Rails?
Can I set up Cascade deleting in Rails ???," I know this is probably on the Internet somewhere but I can't find the answer here on Stackoverflow so I thought I may boost up the knowledge base here a little.I'm a newbie to Ruby and Rails but my company is getting pretty invested in it so I'm trying to get to know it in a little more detail.It's been difficult for me to change my mindset to designing an application from the ""model"" rather the from the database, so I'm trying to figure out how would do all of the design work that I have classically done in the Database in the Rails model instead.So the most recent task that I have given myself is to figure out how to configure a Rails database model to do cascading deletes? Is there an easy way of doing this? Or would I have to go into the MySql and set this up? <code> ",Can I set up Cascade deleting in Rails?
best database strategy for a user-based website (Ruby on Rails)," I've built a nice website system that caters to the needs of a small niche market. I've been selling these websites over the last year by deploying copies of the software using Capistrano to my web server.It occurs to me that the only difference in these websites is the database, the CSS file, and a small set of images used for the individual client's graphic design. Everything else is exactly the same, or should be... Now that I have about 20 of these sites deployed, it is getting to be a hassle to keep them all updated with the same code. And this problem will only get worse.I am thinking that I should refactor this system, so that I can use one set of deployed ruby code, dynamically selecting the correct database, etc, by the URL of the incoming request.It seems that there are two ways of handling the database:using multiple databases, one for each client using one database, with a client_id field in each table, and an extra 'client' tableThe multiple database approach would be the simplest for me at the moment, since I wouldn't have to refactor every model in my application to add the client_id field to all CRUD operations. However, it would be a hassle to have to run 'rake db:migrate' for tens or hundreds of different databases, every time I want to migrate the database(s). Obviously this could be done by a script, but it doesn't smell very good.On the other hand, every client will have 20K-50K items in an 'items' table. I am worried about the speed of fulltext searches when the items table has a half million or million items in it. Even with an index on the client_id field, I suspect that searches would be faster if the items were separated into different client databases.If anyone has an informed opinion on the best way to approach this problem, I would very much like to hear it. Thanks much in advance...-- John <code> ",best database strategy for a client-based website (Ruby on Rails)
Print Ruby object members," When I'm running a simple Ruby script, what's the easiest way to dump an object's fields to the console? I'm looking for something similar to PHP's print_r() that will work with arrays as well. <code> ",How do I dump an object's fields to the console?
Ruby/Rails and Sharepoint Web Services, I'm trying to consume Sharepoint webservices with ruby. I've basically given up trying to authenticate with NTLM and temporarily changed the Sharepoint server to use basic authentication. I've been successful getting a WSDL using soap4r but still cannot authenticate when attempting to use an actual web service call.Has anyone had any experience getting ruby and Sharepoint to talk? <code> ,Ruby/Rails and Sharepoint Web Services
Ruby/Rails and Sharepoint Web Services SOLVED, I'm trying to consume Sharepoint webservices with ruby. I've basically given up trying to authenticate with NTLM and temporarily changed the Sharepoint server to use basic authentication. I've been successful getting a WSDL using soap4r but still cannot authenticate when attempting to use an actual web service call.Has anyone had any experience getting ruby and Sharepoint to talk? <code> ,Ruby/Rails and Sharepoint Web Services
Get Filename from file path in Ruby," How can I get the filename from a file path in Ruby?For example if I have a path of ""C:\projects\blah.dll"" and I just want the ""blah"".Is there a LastIndexOf method in Ruby? <code> ",How to get filename without extension from file path in Ruby
Get Filename without extension from file path in Ruby," How can I get the filename from a file path in Ruby?For example if I have a path of ""C:\projects\blah.dll"" and I just want the ""blah"".Is there a LastIndexOf method in Ruby? <code> ",How to get filename without extension from file path in Ruby
String concatenation and Ruby," I am looking for a more elegant way of concatenating strings in Ruby.I have the following line: Is there a nicer way of doing this?And for that matter what is the difference between << and +? <code>  source = ""#{ROOT_DIR}/"" << project << ""/App.config""",String concatenation in Ruby
How to force ruby to show full stack trace?, I just got this error message: and the bug (of course) is hidden somewhere in ... 10 levels....How can I force Ruby to show a full stack trace? <code>  ...from c:/ruby/lib/ruby/gems/1.8/gems/... ... 10 levels...from c:/ruby/lib/ruby/gems/1.8/gems/......,How can I force Ruby to show a full stack trace?
When would you use Infinity?," So in Ruby there is a trick to specify infinity: I believe in Python you can do something like this These are just examples though, I'm sure most languages have infinity in some capacity. When would you actually use this construct in the real world? Why would using it in a range be better than just using a boolean expression? For instance To summarize, what I'm looking for is a real world reason to use Infinity.EDIT: I'm looking for real world code. It's all well and good to say this is when you ""could"" use it, when have people actually used it. <code>  1.0/0=> Infinity float('inf') (0..1.0/0).include?(number) == (number >= 0) # True for all values of number=> true",In what contexts do programming languages make real use of an Infinity value?
Installing Ruby 1.8.7 (and other stuffs) manually," I don't want to rely on the one-click installer any more, and I want to learn how to install Ruby manually. Is there a resource for this? <code> ",Installing Ruby 1.8.7 (and other stuff) manually
How do I move file with Ruby, I want to move a file with Ruby. How do I do that? <code> ,How do I move a file with Ruby?
Please advice on Ruby vs Python," I am a C++ developer, slowly getting into web development. I like LISP a lot but don't like AllegroCL and web-frameworks available for LISP. I am looking for more freedom and ability to do cool hacks on language level. I don't consider tabs as a crime against nature.Which one is closer to LISP: Python or Ruby? I can't seem to be able to choose from Python and Ruby: they seem very similar but apparently Ruby is more functional and object-oriented, which are good things, while Python is more like Perl: a simple scripting language. Do I have the right impression?PS - This might seem like a flame bait but it's not really, I'm just trying not to go crazy from OCD about switching from RoR to Python/Django and back. <code> ","Please advise on Ruby vs Python, for someone who likes LISP a lot."
Please advise on Ruby vs Python," I am a C++ developer, slowly getting into web development. I like LISP a lot but don't like AllegroCL and web-frameworks available for LISP. I am looking for more freedom and ability to do cool hacks on language level. I don't consider tabs as a crime against nature.Which one is closer to LISP: Python or Ruby? I can't seem to be able to choose from Python and Ruby: they seem very similar but apparently Ruby is more functional and object-oriented, which are good things, while Python is more like Perl: a simple scripting language. Do I have the right impression?PS - This might seem like a flame bait but it's not really, I'm just trying not to go crazy from OCD about switching from RoR to Python/Django and back. <code> ","Please advise on Ruby vs Python, for someone who likes LISP a lot."
Please advise on Ruby vs Python (for someone who likes LISP a lot)," I am a C++ developer, slowly getting into web development. I like LISP a lot but don't like AllegroCL and web-frameworks available for LISP. I am looking for more freedom and ability to do cool hacks on language level. I don't consider tabs as a crime against nature.Which one is closer to LISP: Python or Ruby? I can't seem to be able to choose from Python and Ruby: they seem very similar but apparently Ruby is more functional and object-oriented, which are good things, while Python is more like Perl: a simple scripting language. Do I have the right impression?PS - This might seem like a flame bait but it's not really, I'm just trying not to go crazy from OCD about switching from RoR to Python/Django and back. <code> ","Please advise on Ruby vs Python, for someone who likes LISP a lot."
[ruby] How does ruby serialization (Marshaling) work?," I have found some info on the subject (like this link), but nothing that tells me how it actually works under the covers. If you don't want to read the essay below, here are the real questions:How should I implement the marshal_dump and marshal_load methods? even a simple example will do.when marshal_load is called, how does it 'know' which type of object to create? If there are multiple objects of the same type in the file, how do you tell which is which? I am obviously confused...if I have an object which represents an image, is there a different way to write it out to disk?My specific problem is this:It is a bit complicated because I do not have the source code for the object I wish to serialize.I am working on a mod to a game engine (RPG Maker VX using the RGSS2 game library). There is a class called Bitmap which belongs to the (closed source) API. I would like to save this object/image between game plays, so I need to serialize it to the save file. I'm not a ruby pro, but I know that I can define two methods (marshal_dump and marshal_load) which will be called by the ""Marshal"" module when I attempt to serialize the object.The problem is that I do not know how to implement the two methods needed. I can actually just leave them as empty methods and it seems to work, but the object is actually disposed and the image data is gone. Besides that, I don't understand what it is doing internally and obviously creating empty methods is just wrong.So can anyone tell me how this stuff works internally? I think that would help me to solve my problem. Beyond that, is there another type of image format that I can use which I could just save to a file and avoid doing my own serialization? <code> ",How does ruby serialization (Marshaling) work?
Ruby: How to find item in array which has the most occurrences?," How do I find an item in array which has the most occurrences? <code>  [1, 1, 1, 2, 3].mode=> 1['cat', 'dog', 'snake', 'dog'].mode=> dog",How to find an item in array which has the most occurrences
How to get last N records with activerecord," With :limit in query, I will get first N records. What is the easiest way to get last N records? <code> ",How to get last N records with activerecord?
Creating a private instance method that can be called by a class method in Ruby.," Can I create a private instance method that can be called by a class method? Apologies if this is a pretty elementary question, but I haven't been able to Google my way to a solution. <code>  class Foo def initialize(n) @n = n end private # or protected? def plus(n) @n += n endendclass Foo def Foo.bar(my_instance, n) my_instance.plus(n) endenda = Foo.new(5)a.plus(3) # This should not be allowed, butFoo.bar(a, 3) # I want to allow this",Calling a private instance method from a class method in Ruby.
Why can't I install the sqlite gem?," I'm try to install the SQLite gem on a Fedora 9 Linux box with Ruby 1.8.6, Rails 2.2.2, gem 1.3, and sqlite-3.5.9. Here's the command I'm running and its results: gem_make.out just repeats what was already sent to the console. How can I install this gem? <code>  sudo gem install sqlite3-rubyBuilding native extensions. This could take a while...ERROR: Error installing sqlite3-ruby: ERROR: Failed to build gem native extension./usr/bin/ruby extconf.rb install sqlite3-rubycan't find header files for ruby.Gem files will remain installed in /usr/lib/ruby/gems/1.8/gems/sqlite3-ruby-1.2.4 for inspection.Results logged to /usr/lib/ruby/gems/1.8/gems/sqlite3-ruby-1.2.4/ext/sqlite3_api/gem_make.out",Why can't I install the SQLite gem?
Comparing Strings in Ruby," I need to take two strings, compare them, and print the difference between them.So say I have: I want to say ""If the two strings are not equal, print whatever it is that is different between them. In this case, I'm just looking to print ""John."" <code>  teamOne = ""Billy, Frankie, Stevie, John""teamTwo = ""Billy, Frankie, Stevie""$ teamOne.eql? teamTwo => false",Finding the difference between strings in Ruby
"PyObjc vs RubyCocoa for Mac development, Which is more mature?"," I've been wanting to have a play with either Ruby or Python while at the same time I've been wanting to do a bit of Cocoa programming.So I thought the best way to achieve both these goals is to develop something using either a Ruby or Python to Objective-C bridge (PyObjc or RubyCocoa).I know that ideally to get the best learning experience I would learn each techonology independently but I don't have the time. :)So my question is which is a more mature platform, PyObc or RubyCocoa, main things I am looking for:Documentation of APITutorialsToolsSupportive CommunityCompletness of Cocoa API avaialble through the bridge Regarding point 5 I don't expect that the entire Cocoa API will be availble through either bridge but I need to have enough Cocoa APIs available to develop a functioning application. <code> ",PyObjc vs RubyCocoa for Mac development: Which is more mature?
How to output names of ruby test unit tests," I have a unit test (example is modified Test::Unit documentation) When I execute it, I get: I would like to get something like this (test_something is outputted): <code>  require 'test/unit'class TC_MyTest < Test::Unit::TestCase def test_something assert(true) endend Loaded suite C:/testStarted.Finished in 0.0 seconds.1 tests, 1 assertions, 0 failures, 0 errors Loaded suite C:/testStartedtest_something.Finished in 0.0 seconds.1 tests, 1 assertions, 0 failures, 0 errors",How to output names of ruby unit tests
Deployment options for script idea, I want to write a piece of software which is essentially a regex data scrubber. I am going to take a contact list in CSV and remove all non-word characters and such from the person's name.This project has Perl written all over it but my client base is largely non-technical and installing Perl on Windows would not be worth it for them.Any ideas on how I can use a Perl/Python/Ruby type language without all the headaches of getting the interpreter on their computer?Thought about web for a second but it would not work for business reasons. <code> ,How can I deploy a Perl/Python/Ruby script without installing an interpreter?
How to test whether a Ruby object is a value or a reference?," Is there an easy way to test whether an object is a immutable (numbers, nil) or not (Array, Hash, objects)? In other words, could it be changed by side effects from other code?Motivation: I want to create a versioned value store, but some of the data is arrays. Some of the arrays will store custom objects, and I could invert the relationship by storing the 'in' property and searching for it. But I'd also like to be able to store arrays of symbols, other arrays, etc. <code> ",How to test whether a Ruby object is immutable?
Show full path of the ruby file when loaded," When reading source code, I always want to know the full path of the file when it is loaded, is there any callback method in ruby to accomplish this, or any other way to do this? thanks in advance.EDIT Clarification from the comments:I want to know where the loaded ""somefile"" is located while I execute this line: ""load somefile"" <code> ",Show full path name of the ruby file when it get loaded
How to determine the class from which a specified the method originated?," I got this question from this discussion. A method call like object.m does not always mean the class of ""object"" has a ""m"" method, just like the find method to a Array object is not directly originated from Array object, but from the mixed-in Enumerable module. My question is, given a method, how can we determine the class from which the method originated? <code> ",How to determine the class from which a specified method originated?
(ruby) how can i get a reference to a method," Is it possible in Ruby to get a reference to methods of an object ( I would like to know if this can be done without procs/lambdas ) , for example , consider the following code : Is it possible to do such thing ? I would like to avoid procs/lambdas because I want to be able to change the behaviour of A,B,C by subclassing . <code>  class X def initialize @map = {} setup_map end private def setup_map # @map[""a""] = get reference to a method # @map[""b""] = get reference to b method # @map[""c""] = get referebce to c method end public def call(a) @map[""a""](a) if a > 10 @map[""b""](a) if a > 20 @map[""c""](a) if a > 30 end def a(arg) puts ""a was called with #{arg}"" end def b(arg) puts ""b was called with #{arg}"" end def c(arg) puts ""c was called with #{arg}"" endend",How can I get a reference to a method?
(Ruby) How can I get a reference to a method?," Is it possible in Ruby to get a reference to methods of an object ( I would like to know if this can be done without procs/lambdas ) , for example , consider the following code : Is it possible to do such thing ? I would like to avoid procs/lambdas because I want to be able to change the behaviour of A,B,C by subclassing . <code>  class X def initialize @map = {} setup_map end private def setup_map # @map[""a""] = get reference to a method # @map[""b""] = get reference to b method # @map[""c""] = get referebce to c method end public def call(a) @map[""a""](a) if a > 10 @map[""b""](a) if a > 20 @map[""c""](a) if a > 30 end def a(arg) puts ""a was called with #{arg}"" end def b(arg) puts ""b was called with #{arg}"" end def c(arg) puts ""c was called with #{arg}"" endend",How can I get a reference to a method?
Iterate over Ruby Time objects," Is there a way to iterate over a Time range in Ruby, and set the delta?Here is an idea of what I would like to do: You can iterate over the Time objects, but it returns every second between the two. What I really need is a way to set the offset or delta (such as minute, hour, etc.)Is this built in to Ruby, or is there a decent plugin available? <code>  for hour in (start_time..end_time, hour) hour #=> Time object set to hourend",Iterate over Ruby Time object with delta
Best practice for Rails App to provide progress on a long task?," I have a Rails application that unfortunately after a request to a controller, has to do some crunching that takes awhile. What are the best practices in Rails for providing feedback or progress on a long running task or request? These controller methods usually last 60+ seconds. I'm not concerned with the client side... I was planning on having an Ajax request every second or so and displaying a progress indicator. I'm just not sure on the Rails best practice, do I create an additional controller? Is there something clever I can do? I want answers to focus on the server side using Rails only.Thanks in advance for your help.Edit:If it matters, the http request are for PDFs. I then have Rails in conjunction with Ruport generate these PDFs. The problem is, these PDFs are very large and contain a lot of data. Does it still make sense to use a background task? Let's assume an average PDF takes about one minute to two minutes, will this make my Rails application unresponsive to any other server request during this time?Edit 2:Ok, after further investigation, it seems my Rails application is indeed unresponsive to any other HTTP requests after a request comes in for a large PDF. So, I guess the question now becomes: What is the best threading/background mechanism to use? It must be stable and maintained. I'm very surprised Rails doesn't have something like this built in.Edit 3:I have read this page: http://wiki.rubyonrails.org/rails/pages/HowToRunBackgroundJobsInRails. I would love to read about various experiences with these tools.Edit 4:I'm using Passenger Phusion ""modrails"", if it matters.Edit 5:I'm using Windows Vista 64 bit for my development machine; however, my production machine is Ubuntu 8.04 LTS. Should I consider switching to Linux for my development machine? Will the solutions presented work on both? <code> ",Best practice for Rails App to run a long task in the background?
How to implement an abstract class in ruby?," I know there is no concept of an abstract class in Ruby. But if it needs to be implemented, how do I go about it? I tried something like this: But, when I try to instantiate B, it is internally going to call A.new which is going to raise the exception.Also, modules cannot be instantiated, but they cannot be inherited too. Making the new method private will also not work.Does anyone have any pointers? <code>  class A def self.new raise 'Doh! You are trying to write Java in Ruby!' endendclass B < A ... ...end",How to implement an abstract class in Ruby
Is ruby strongly or weakly typed ?, Is ruby strongly or weakly typed ?Presumably the same is true for Javascript. <code> ,Is ruby strongly or weakly typed?
Advanced ruby question: binding of procs," Is it possible to execute a proc within the context of another object?I know that normally you'd do proc.call(foo), and then the block should define a parameter. I was wondering though whether I could get ""self"" to bind to foo so that it's not necessary to have a block parameter. <code>  proc = Proc.new { self.hello }class Foo def hello puts ""Hello!"" endendfoo = Foo.new# How can proc be executed within the context of foo# such that it outputs the string ""Hello""?proc.call",Binding of Procs
Tuples in Ruby," Does anyone use tuples in Ruby? If so, how may one implement a tuple? Ruby hashes are nice and work almost as well, but I'd really like to see something like the Tuple class in Python, where you can use . notation to find the value for which you are looking. I'm wanting this so that I can create an implementation of D, similar to Dee for Python. <code> ",Using Tuples in Ruby?
Get Method object for a method in Ruby," I'm trying to extend the Method class along the lines of: As expected, when I f.a.aa, the .aa is being executed on the return value of f.a. How do I gain access to the Method object which represents f.a? <code>  irb(main):008:0> class Airb(main):009:1> def airb(main):010:2> puts ""blah""irb(main):011:2> endirb(main):012:1> end=> nilirb(main):013:0> class Methodirb(main):014:1> def aairb(main):015:2> p ""hi""irb(main):016:2> endirb(main):017:1> end=> nilirb(main):018:0> f = A.new=> #<A:0x54ed4>irb(main):019:0> A.aNoMethodError: undefined method `a' for A:Class from (irb):19 from :0irb(main):020:0> f.ablah=> nilirb(main):027:0> f.a.aablahNoMethodError: undefined method `aa' for nil:NilClass from (irb):27 from :0",How do I get the Method object for a method?
Using Msql views in a Ruby on Rails app to improve performances," I'm having some performance issues in a rails project (running on rails 2.0.5), for example in my user administration pages.my user model has many relations (details, addresses, roles...) who get loaded with eager loading. That creates really huge SQL queries, for some cases, it takes almost a minute to load 30 users. On the other hand removing the eager loading generates hundreds of queries, in the end I have the same problem: loading the page is slow.I used to develop on Java & Oracle, for this kind of big queries I used to create views, those views were then cached for a faster rendering. It was extremely boring to maintain, as I had to update the database fields manually in the views scripts etc...BUT it really had fantastic performances.... so I was wondering if anyone ever tried to implement something to take benefits of Mysql views in active record ?I just did some basic tests, here's my view (just a few fields for the example, I have a standard Restful Authentication user table, and a big table ""details"" for the personal datas ): Then a model: Tried a few things in my console: looking at the log, simple queries are just handled the same way as any table queriesOf course, those fake models would just be used to read datas.I'm wondering:if someone already tried that ?if it's a good idea ?if I should look into something like memcached instead... <code>  CREATE VIEW users_vs AS SELECTusers.id , users.login , users.email , details.last_name ,details.first_name ,details.phone ,details.fax ,FROM `users` LEFT OUTER JOIN `details` ON details.user_id = users.id ; class UsersV < ActiveRecord::Baseend u=UsersV.find(:first) # ok !u=UsersV.find_by_last_name('smith') #=> ok !us=UsersV.find_all_by_last_name('smith') #=> ok too !",Using MySQL views in a Ruby on Rails app to improve performance
What is the difference or value of these iterator coding styles in Ruby?," Which style is preferred?Is there a good reason for one vs. the other?Thanks in advance! Example code: <code>  1) cmds.each do |cmd| end2) cmds.each { |cmd| } cmds = [ ""create"", ""update"", ""list"", ""help"" ]# Block style one#cmds.each do |cmd| puts ""loop1, cmd: #{cmd}""end# Block style two#cmds.each { |cmd| puts ""loop2, cmd: #{cmd}""}",What is the difference or value of these block coding styles in Ruby?
"When testing in Rails where do I set the HTTP_REFERER, if necessary?"," I'm trying to test a controller and I got this error. I understand the error, but don't know how to fix it. Specify it where? I tried this: But got the same error.Specify it with what, exactly? I guess the URI of the view I want it to go back to: Is that what they mean?OK, so it turns out they mean do this: Can someone tell me where that's documented? I'd like to read up on the context of that information.What if the domain is not ""localhost:3000""? What if it's ""localhost:3001"" or something? Any way to anticipate that?Why doesn't this work: The Rails docs specifically say that's how you set the headers. <code>  test: on CREATE to :user with completely invalid email should respond with redirect(UsersControllerTest):ActionController::RedirectBackError: No HTTP_REFERER was set in the request to this action, so redirect_to :back could not be called successfully. If this is a test, make sure to specify request.env[""HTTP_REFERER""]. setup { post :create, { :user => { :email => 'invalid@abc' } }, { 'referer' => '/sessions/new' } } '/sessions/new' setup do @request.env['HTTP_REFERER'] = 'http://localhost:3000/sessions/new' post :create, { :user => { :email => 'invalid@abc' } }, {}end setup { post :create, { :user => { :email => 'invalid@abc' } }, { 'referer' => '/sessions/new' } }",How do I set HTTP_REFERER when testing in Rails?
ruby unit::text Command line options? ," When running tests in Ruby's unit::test framework, is there a really easy way to specify, from the command-line, that only one test should be run (that is, specify the test class and test member variable)? If not, is there another framework that has this feature?  <code> ",ruby Test::Unit Command line options? 
Make web application with ajax from the begining or add ajax later?, I'm working on my first Ruby on Rails aplication and it's quite big (at least for me ;) - database has about 25 tables). I'm still learning Ruby and Rails and I never wrote anything in Javascript nor Ajax.Should I add Ajax to my application from the beginning? Or maybe it will be better to add it latter? Or in the other words: is it (relatively) easy to add ajax to existing web application? <code> ,Create web application with ajax from the beginning or add ajax later?
Create web application with ajax from the begining or add ajax later?, I'm working on my first Ruby on Rails aplication and it's quite big (at least for me ;) - database has about 25 tables). I'm still learning Ruby and Rails and I never wrote anything in Javascript nor Ajax.Should I add Ajax to my application from the beginning? Or maybe it will be better to add it latter? Or in the other words: is it (relatively) easy to add ajax to existing web application? <code> ,Create web application with ajax from the beginning or add ajax later?
"Study Objective-C , Ruby OR Python???", I am working on C++ since last 4-5 years . Recently I have bought iphone and macbook and want do do some programming for iphone.So I have started reading one book about Objective-C. I have also learn that we can program with Ruby and Python on MAC.So my question is which one to study? Which language you guys see the FUTURE???Can we program with these languages on other platforms? Or are these only limited on MAC?I am just a beginner in objective-C.Need some expert thoughts which way to go.AC <code> ,"Study Objective-C , Ruby OR Python?"
Python or Ruby on Rails for a .NET developer ?," I'm a C# .NET developer and I work on mostly ASP.NET projects.I want to learn a new programming language,to improve my programming skills by experiencing a new language, to see something different then microsoft environment,and maybe to think in a different way.I focus on two languages for my goal. Python and Ruby.Which one do you offer for me ? Pros and cons of them on each other?Is it worth learning them ?EDIT : Sorry I editted my post but not inform here, Ruby on Rails replaced with Ruby. <code> ",Python or Ruby for a .NET developer ?
Which messaging technology to use?," I feel a little bit kind of confused for about 24 hours I have been thinking which group broadcasting technology to use in my project.Basically, what I need is:create groups (by some backend process)broadcast messages by any client (1:N, N:N)(potentially) direct messages (1:1)(important) authenticate/authorize clients with my own backend (say, through some kind of HTTP API)to be able to kick specific clients by backend process (or server plugin) Here is what I will have: Backend-related process(es) in either Ruby or HaxeFrontend in JS+Haxe(Flash9) in browser, so ideally communicating through 80/443, but not necessarily.So, this technology will have to be easily accessible in Haxe for Flash and preferably Ruby.I've been thinking about: RabbitMQ (or OpenAMQ), RabbitMQ+STOMP, ejabberd, ejabberd+BOSH, juggernaut (with a need to write a Haxe lib for it).Any ideas/suggestions? <code> ",Which group messaging technology to use?
Ruby On Rails is slow...," I'm writing a web application to monitor a furniture factory production flow. It has thousand of data to handle. So far, I run RoR on Mongrel + MySQL and it's really really slow (2-4min for some views). When I look at RoR logs, it seems that database queries aren't slow (0-10ms).Is RoR slow when it converts database data to object? Is Mongrel slow?Edit: First thing: I was in dev. env. In the production environment, the slowest view takes 2min (which would turn down to less than 1min on a good computer, mine is 5 years old). With ruby-prof and a bit of common sense, I've found out which methods were slowing down the application. The problem is that single SQL queries are called in loops on larges datasets: Here are ruby-prof results on those methods: The problem is: I can't really avoid those single queries. I've got thousands of events from which I have to compute complex data. Right now I'm using memcached on those methods which are OK unless you're the first to request the page. <code>  ofs = Ofkb.find_by_sql [""..some large SQL query...""]for of in ofs # About 700-1000 elements ops = Operation.find(..the single query..) etc.end %self total self wait child calls name 32.19 97.91 97.91 0.00 0.00 55 IO#gets (ruby_runtime:0} 28.31 86.39 86.08 0.00 0.32 32128 Mysql#query (ruby_runtime:0} 6.14 18.66 18.66 0.00 0.00 12432 IO#write (ruby_runtime:0} 0.80 2.53 2.42 0.00 0.11 32122 Mysql::Result#each_hash (ruby_runtime:0}",Ruby On Rails is slow... ?
Why would redirectstandardoutput cause a process to fail in C#," This is a bit of a pain because I now don't have the code in front of me, but I'll try to explain.I have a simple C# application that kicks off a Ruby script (it does a couple of other things, so it generates a batch file and executes that).I am using the C# process object and I set the followingredirectstandardoutput = trueredirectstandarderror = trueUseShellExecute = falseCreateNoWindow = true (lovely bit of backwards logic there!)I then create two threads and poll ReadLine() for both the error and output streams, waiting for them both to finish before I call WaitForExit().Now, no matter what I do my Ruby script fails to call a system(""xcopy..."") command when I redirect the output (no errors are generated it just doesn't copy). It also doesn't copy other files I ask it to copy.This happens if I direct both streams to a thread, one of them, only redirect one of them and just call ReadToEnd().It only works correctly if I set redirectstandardoutput and redirectstandarderror to false.I'm at a total loss here. I thought maybe the output stream was being filled up, but I can't imagine why if I'm calling ReadLine (I need read line so I can parse each line and only present relevant ones to the end user). I also thought maybe calling dos commands from a threaded C# process might cause problems.Does anyone have any idea what might be going on here? I should say I'm on VS .net 2005, which I think is the .Net Framework 2.0. <code> ",Why would C# ProcessStartInfoRedirectStandardOutput cause xcopy process to fail
count duplicate elements in ruby array," I have a sorted array: I would like to get something like this but it does not have to be a hash: <code>  [ 'FATAL <error title=""Request timed out."">', 'FATAL <error title=""Request timed out."">', 'FATAL <error title=""There is insufficient system memory to run this query."">'] [ {:error => 'FATAL <error title=""Request timed out."">', :count => 2}, {:error => 'FATAL <error title=""There is insufficient system memory to run this query."">', :count => 1}]",How to count duplicate elements in a Ruby array
Difference between \A \Z and ^ $ in Ruby on Rails regular expressions," In the documentation I read: Use \A and \z to match the start and end of the string, ^ and $ match the start/end of a line.I am going to apply a regular expression to check username (or e-mail is the same) submitted by user. Which expression should I use with validates_format_of in model? I can't understand the difference: I've always used ^ and $ ... <code> ",Difference between \A \z and ^ $ in Ruby regular expressions
Difference between \A \Z and ^ $ in Ruby regular expressions," In the documentation I read: Use \A and \z to match the start and end of the string, ^ and $ match the start/end of a line.I am going to apply a regular expression to check username (or e-mail is the same) submitted by user. Which expression should I use with validates_format_of in model? I can't understand the difference: I've always used ^ and $ ... <code> ",Difference between \A \z and ^ $ in Ruby regular expressions
"Reduce a Ruby array to represent ""streaks"""," Summary: The basic question here was, I've discovered, whether you can pass a code block to a Ruby array which will actually reduce the contents of that array down to another array, not to a single value (the way inject does). The short answer is ""no"". I'm accepting the answer that says this. Thanks to Squeegy for a great looping strategy to get streaks out of an array.The Challenge: To reduce an array's elements without looping through it explicitly.The Input: All integers from -10 to 10 (except 0) ordered randomly.The Desired Output: An array representing streaks of positive or negative numbers. For instance, a -3 represents three consecutive negative numbers. A 2 represents two consecutive positive numbers.Sample script: Sample outputs: Note a few things: The streaks array has alternating positive and negative values. The sum of the elements streaks array is always 0 (as is the sum of the original). The sum of the absolute values of the streak array is always 20. Hope that's clear!Edit: I do realize that such constructs as reject! are actually looping through the array in the background. I'm not excluding looping because I'm a mean person. Just looking to learn about the language. If explicit iteration is necessary, that's fine.  <code>  original_array = (-10..10).to_a.sort{rand(3)-1}original_array.reject!{|i| i == 0} # remove zerostreaks = (-1..1).to_a # this is a placeholder. # The streaks array will contain the output.# Your code goes here, hopefully without looping through the arrayputs ""Original Array:""puts original_array.join("","")puts ""Streaks:""puts streaks.join("","")puts ""Streaks Sum:""puts streaks.inject{|sum,n| sum + n} Original Array:3,-4,-6,1,-10,-5,7,-8,9,-3,-7,8,10,4,2,5,-2,6,-1,-9Streaks:1,-2,1,-2,1,-1,1,-2,5,-1,1,-2Streaks Sum:0Original Array:-10,-9,-8,-7,-6,-5,-4,-3,-2,-1,1,2,3,4,5,6,7,8,9,10Streaks:-10,10Streaks Sum:0",Chunk a Ruby array according to streaks within it
Reduce a Ruby array," Summary: The basic question here was, I've discovered, whether you can pass a code block to a Ruby array which will actually reduce the contents of that array down to another array, not to a single value (the way inject does). The short answer is ""no"". I'm accepting the answer that says this. Thanks to Squeegy for a great looping strategy to get streaks out of an array.The Challenge: To reduce an array's elements without looping through it explicitly.The Input: All integers from -10 to 10 (except 0) ordered randomly.The Desired Output: An array representing streaks of positive or negative numbers. For instance, a -3 represents three consecutive negative numbers. A 2 represents two consecutive positive numbers.Sample script: Sample outputs: Note a few things: The streaks array has alternating positive and negative values. The sum of the elements streaks array is always 0 (as is the sum of the original). The sum of the absolute values of the streak array is always 20. Hope that's clear!Edit: I do realize that such constructs as reject! are actually looping through the array in the background. I'm not excluding looping because I'm a mean person. Just looking to learn about the language. If explicit iteration is necessary, that's fine.  <code>  original_array = (-10..10).to_a.sort{rand(3)-1}original_array.reject!{|i| i == 0} # remove zerostreaks = (-1..1).to_a # this is a placeholder. # The streaks array will contain the output.# Your code goes here, hopefully without looping through the arrayputs ""Original Array:""puts original_array.join("","")puts ""Streaks:""puts streaks.join("","")puts ""Streaks Sum:""puts streaks.inject{|sum,n| sum + n} Original Array:3,-4,-6,1,-10,-5,7,-8,9,-3,-7,8,10,4,2,5,-2,6,-1,-9Streaks:1,-2,1,-2,1,-1,1,-2,5,-1,1,-2Streaks Sum:0Original Array:-10,-9,-8,-7,-6,-5,-4,-3,-2,-1,1,2,3,4,5,6,7,8,9,10Streaks:-10,10Streaks Sum:0",Chunk a Ruby array according to streaks within it
Create a ruby funtion that accepts an hash of parameters," I know this may be a stupid question, but I don't know how to create a ruby method that accepts a hash of parameters. I mean, in Rails I'd like to use a method like this: What is the prototype of a method that accepts this kind of parameters? How do I read them? <code>  login_success :msg => ""Success!"", :gotourl => user_url",Create a ruby method that accepts a hash of parameters
Create a ruby function that accepts a hash of parameters," I know this may be a stupid question, but I don't know how to create a ruby method that accepts a hash of parameters. I mean, in Rails I'd like to use a method like this: What is the prototype of a method that accepts this kind of parameters? How do I read them? <code>  login_success :msg => ""Success!"", :gotourl => user_url",Create a ruby method that accepts a hash of parameters
check_box checked by default in rails 1.2.3," How can I make a check box default to being ""checked"" when it is initially displayed? I've not found a ""Rails"" way to do this (that works) so I did it with JavaScript. Is there a proper way to do this in Rails? I'm using Rails 1.2.3. <code> ","How can I make a check box default to being ""checked"" in Rails 1.2.3?"
Ruby: How to make an HTTP GET with modified headers," What is the best way to make an HTTP GET request in Ruby with modified headers?I want to get a range of bytes from the end of a log file and have been toying with the following code, but the server is throwing back a response saying that ""it is a request that the server could not understand"" (the server is Apache). Is there a better way to define headers in Ruby?Does anyone know why this would be failing against Apache? If I do a get in a browser to http://[address]:[port]/[path] I get the data I am seeking without issue. <code>  require 'net/http'require 'uri'#with @address, @port, @path all defined elsewherehttpcall = Net::HTTP.new(@address, @port)headers = { 'Range' => 'bytes=1000-'}resp, data = httpcall.get2(@path, headers)",How to make an HTTP GET with modified headers?
Where can i find the best tutorials on how to learn advanced ruby on rails , I'm working creating rails application and wondered where I can find goodtutorials on how to work with rails.I used this blog that I thought was great in starting to learn rails:http://fairleads.blogspot.com/2007/12/rails-20-and-scaffolding-step-by-step.htmlI have just started working with rails and would like to learn more advanced rails now. <code> ,Where can I find advanced Ruby on Rails tutorials?
Rails task: script/runner or rake?," For ad hoc Rails tasks we have a few implementation alternatives, chief among which would seem to be: and: Which option should I prefer? If there's a clear favourite then when, if ever, should I consider using the other? If never, then why would you suppose it's still present in the framework without deprecation warnings? <code>  script/runner some_useful_thing rake some:other_useful_thing",I have a Rails task: should I use script/runner or rake?
How do you loop through a string in Ruby?," Pretty simple question from a first-time Ruby programmer.How do you loop through a slab of text in Ruby? Everytime a newline is met, I want to re-start the inner-loop. <code>  def parse(input) ...end",How do you loop through a multiline string in Ruby?
Nokogiri (RubyGem): Find and replace HTML tags," I have the following HTML: I'd like to change it into the following HTML: How can I find and replace certain HTML tags? I can use the Nokogiri gem. <code>  <html><body><h1>Foo</h1><p>The quick brown fox.</p><h1>Bar</h1><p>Jumps over the lazy dog.</p></body></html> <html><body><p class=""title"">Foo</p><p>The quick brown fox.</p><p class=""title"">Bar</p><p>Jumps over the lazy dog.</p></body></html>",Find and replace HTML tags
Why Exclamation marks (!) in Ruby methods," In Ruby some methods have a question mark (?) that ask a question like include? that ask if the object in question is included, this then returns a true/false.But why do some methods have exclamation marks (!) where others don't?What does it mean? <code> ",Why are exclamation marks used in Ruby methods?
Whats the difference between Ruby's puts and write methods," What's the difference between... ...and... ...? <code>  File.open('abc', 'w') { |f| f.puts 'abcde' } File.open('abc', 'w') { |f| f.write 'abcde' }",What's the difference between Ruby's puts and write methods?
Whats the difference between Ruby's puts and write methods?," What's the difference between... ...and... ...? <code>  File.open('abc', 'w') { |f| f.puts 'abcde' } File.open('abc', 'w') { |f| f.write 'abcde' }",What's the difference between Ruby's puts and write methods?
What're the difference between Ruby's puts and write methods?," What's the difference between... ...and... ...? <code>  File.open('abc', 'w') { |f| f.puts 'abcde' } File.open('abc', 'w') { |f| f.write 'abcde' }",What's the difference between Ruby's puts and write methods?
Installing PL/Ruby for PostgreSQL," This is to enable the development of postgres functions with embedded ruby code,but I have been unable to build it.As advised byhttp://www.robbyonrails.com/articles/2005/08/22/installing-untrusted-pl-ruby-for-postgresqlI am trying to build the needed plruby.so from the latest version (plruby-0.5.3.tar.gz) provided at ftp://moulon.inra.fr/pub/ruby/I've sorted out where my local postgres set up is and adjusted the invocation to: I've tried quite number of variations on that, but it does not seem to be able to successfully makethe 'conftest.c' fileIt says this: And here is what I end up with in my mkmf.log When I run the gcc line manually, it says there is no 'conftest.c' (and there is not, butit is supposed to be generated). Any help and/or advice would be appreciated.-- Mike Berrow <code>  ruby extconf.rb --with-pgsql-include=/usr/postgresql-8.3.4/include/server --enable-shared --disable-conversion --with-pgsql-version=83 checking for catalog/pg_proc.h... yes*** extconf.rb failed ***Could not create Makefile due to some reason, probably lack ofnecessary libraries and/or headers. Check the mkmf.log file for moredetails. You may need configuration options. have_header: checking for catalog/pg_proc.h... -------------------- yes""gcc -E -I. -I/usr/lib/ruby/1.8/x86_64-linux -I. -I/usr/postgresql-8.3.4/include/server -g -O2 -fPIC conftest.c -o conftest.i""checked program was:/* begin */1: #include <catalog/pg_proc.h>/* end */ 'uname -a' ... givesLinux vdev1 2.6.18.8-xen #2 SMP Thu May 8 11:52:29 PDT 2008 x86_64 x86_64 x86_64 GNU/Linux'ruby -v' ... givesruby 1.8.6 (2008-08-11 patchlevel 287) [x86_64-linux]",Installing PL/Ruby for PostgreSQL 8.3
Is there a helper method that does this in Rails?," If not, what would be a short, sweet name for this method? <code>  def plural(value, string) ""#{value} #{value.abs == 1 ? string.singularize : string.pluralize}""end",Is there a helper method for pluralization in Rails?
How to remove URL's trailing slash in a Rails app? (in a SEO view)," In order to avoid content duplication, I would like to avoid the pages of my site being accessible by several URLs (with or without trailing slash).Currently, the URLs and lead to the same page. My goal is that the second URL redirect to the first (redirection 301, of course). None page of my site should be accessible with a trailing slash, except my home page / obviously.What is the best way to do this? Using .htaccess or routes.rb? How would you do that?NB: I'm developing with Ruby on Rails 1.2.3 <code>  catalog/product/1 catalog/product/1/",How to remove a URL's trailing slash in a Rails app? (in a SEO view)
How to remove URLs trailing slash in a Rails app? (in a SEO view)," In order to avoid content duplication, I would like to avoid the pages of my site being accessible by several URLs (with or without trailing slash).Currently, the URLs and lead to the same page. My goal is that the second URL redirect to the first (redirection 301, of course). None page of my site should be accessible with a trailing slash, except my home page / obviously.What is the best way to do this? Using .htaccess or routes.rb? How would you do that?NB: I'm developing with Ruby on Rails 1.2.3 <code>  catalog/product/1 catalog/product/1/",How to remove a URL's trailing slash in a Rails app? (in a SEO view)
if/then/end ruby syntax confusion," I've found three ways to write the same condition in Ruby: Why can't I do this? I don't understand:Why then and end are needed in #3, and, Why I need to change the order to get #2 to work. Statement #4 seems like the most natural way to write this. I don't understand why it's not possible. <code>  #1if 1==1 puts ""true"" end#2puts ""true"" if 1==1#3if 1==1 then puts ""true"" end #4if 1==1 puts ""true""",How to write 'if' without using 'then' or 'end' in Ruby
Ruby: In unix find of user who executed the program is root, I'm writing a rake script and would like to detect (using Ruby rather than bash if possible) if the user who executed the rake script has root privileges.If it is not root then I would like to terminate the script. <code> ,"On Unix, find if user who executed the program is root?"
Ruby: In unix find if user who executed the program is root, I'm writing a rake script and would like to detect (using Ruby rather than bash if possible) if the user who executed the rake script has root privileges.If it is not root then I would like to terminate the script. <code> ,"On Unix, find if user who executed the program is root?"
Backslashes in Single quoted strings vs. Double quoted strings in Ruby?," If I add a backslash+space to the start of double and single quoted strings, I get different results: In the output for the double quoted string I see only a space.In the output for the single quoted string I see backslash+space.What's happening there? Is this because '\ ' is interpreted as a special character in the double quote string but in the single quoted string the characters are preserved as is?If I change the strings to this, I see the same output, namely a single slash followed by a space and then the text: In both cases the backslash is escaped. I'm confused why they work the same way in this situation. Is there some rule that would help to explain the fundamental difference between how single quoted strings and double quoted strings handle backslashes in Ruby? <code>  ""\ text""'\ text' ""\\ text""'\\ text' ",Backslashes in single quoted strings vs. double quoted strings
"Need to take a break from asp.net for a little, which of the following should I learn and why?", Which of the following technology is easy to learn and fun for developing a website? If you could only pick one which would it be and whyClojure/Compojure+Ring/Moustache+RingGroovy/Grails Python/Django Ruby/RailsTurbogearCappuccino or SproutcoreJavascript/jQuery <code> ,"Tired of ASP.NET, which of the following should I learn and why?"
Nokogiri: Navigating the DOM.," I'm trying to fill the variables parent_element_h1 and parent_element_h2. Can anyone help me use Nokogiri to get the information I need into those variables? Please note: The start_here element could be anywhere inside the document. The HTML data is just an example. That said, the headers <h1> and <h2> could be a sibling of start_here or a child of a sibling of start_here.The following recursive method is a good starting point, but it doesn't work on <h1> because it's a child of a sibling of start_here: After accepting an answer, I came up with my own solution. It works like a charm and I think it's pretty cool. <code>  require 'rubygems'require 'nokogiri'value = Nokogiri::HTML.parse(<<-HTML_END) ""<html>",How to navigate the DOM using Nokogiri
Nokogiri: Navigating the DOM," I'm trying to fill the variables parent_element_h1 and parent_element_h2. Can anyone help me use Nokogiri to get the information I need into those variables? Please note: The start_here element could be anywhere inside the document. The HTML data is just an example. That said, the headers <h1> and <h2> could be a sibling of start_here or a child of a sibling of start_here.The following recursive method is a good starting point, but it doesn't work on <h1> because it's a child of a sibling of start_here: After accepting an answer, I came up with my own solution. It works like a charm and I think it's pretty cool. <code>  require 'rubygems'require 'nokogiri'value = Nokogiri::HTML.parse(<<-HTML_END) ""<html>",How to navigate the DOM using Nokogiri
Create ERD type diagrams from code," I'm beginning to learn Ruby on Rails, and looking at other peoples code. Is there any way to take an exisiting codebase and create object relationship diagrams or Entity relationship diagrams (ERD's) ?I know Visio can do some things given a database, but I was hoping to produce diagrams of classes and objects. <code> ",Create ERD type diagrams from Rails code
How to ensure only one instance of a ruby script is running at a time," I have a process that runs on cron every five minutes. Usually, it takes only a few seconds to run, but sometimes it takes several minutes. I want to ensure that only one version of this is running at a time.I tried an obvious way... ...but it's not testing to see if it can get the lock, it's blocking until the lock is released.Any idea what I'm missing? I'd rather not hack something using ps, but that's an alternative. <code>  File.open(""/tmp/indexer_lock.tmp"",'w') do |f| exit unless f.flock(File::LOCK_EX)end",How do I ensure only one instance of a Ruby script is running at a time?
Ruby show progress with when copying files," I'd like to be able to show the progress of a file copy operation when copying files using Ruby (currently using FileUtils.cp) I've tried setting the verbose option to true but that just seems to show me the copy command issued.I'm running this script from command line at the moment so ideally I'd like to be able to present something like SCP does when it copies files, but I'm not too fussed about the presentation as long as I can see the progress. <code> ",Ruby show progress when copying files
Pygame equilivent for Ruby, I was wondering if anyone knew of a PyGame equivalent for Ruby. I've seen Ruby/SDL and I'm looking for something a little more geared towards games. <code> ,Pygame equivalent for Ruby?
"How do you get you get a ruby gem into the include path for ""require"""," I am creating what I expect to be ruby gem. Anyone have a good link to a tutorial on converting a simple library or plugin to a gem? Also, especially, what is the process that Ruby uses to allow the require to find gems? It seems to be something more than putting the files in the gem path (or is my configuration screwed up?). Thanks <code> ","How do you get a ruby gem into the include path for ""require"""
Getting output of system() calls in ruby," If I call a command using Kernel#system in Ruby, how do I get its output? <code>  system(""ls"")",Getting output of system() calls in Ruby
rails: how to html encode/escape a string? is there a built-in?," I have an untrusted string that I want to show as text in an HTML page. I need to escape the chars '<' and '&' as HTML entities. The less fuss the better.I'm using UTF8 and don't need other entities for accented letters.Is there a built-in function in Ruby or Rails, or should I roll my own? <code> ",How to HTML encode/escape a string? Is there a built-in?
How to HTML encode/escape a string? is there a built-in?," I have an untrusted string that I want to show as text in an HTML page. I need to escape the chars '<' and '&' as HTML entities. The less fuss the better.I'm using UTF8 and don't need other entities for accented letters.Is there a built-in function in Ruby or Rails, or should I roll my own? <code> ",How to HTML encode/escape a string? Is there a built-in?
Exporting from Ruby to Microsoft Word (.doc)," Is there an easy way to create Word documents (.docx) in a Ruby application? Actually, in my case it's a Rails application served from a Linux server. A gem similar to Prawn but for DOCX instead of PDF would be great! <code> ",Creating Microsoft Word (.docx) documents in Ruby
Link_to method and onClick event in Rails," How do I create a link of this type: using method link_to in Rails?I couldn't figure it out from Rails docs. <code>  <a href=""#"" onclick=""document.getElementById('search').value=this.value"">",link_to method and click event in Rails
How to remove newlines from a string using Ruby.," I have a script written in ruby. I need to remove any duplicate newlines (e.g.) to My current attempt worked (or rather not) using Which gave me no change to the output. What am I doing wrong? <code>  \n\n\n \n str.gsub!(/\n\n/, ""\n"")",How to replace multiple newlines in a row with one newline using Ruby.
How do i create a ruby Hello world?," I know in PHP you have to intrepret a page like index.php, but in Ruby how does it work? I don't know what is the Ruby extension like index.php for PHP. Could you help me? <code> ",How do I create a ruby Hello world?
How Do I Tokenize This String in Ruby?," I have this string: And I want to convert it to tokenize this into an array of hashes: I'm aware of StringScanner and the Syntax gem but I can't find enough code examples for both.Any pointers? <code>  %{Children^10 Health ""sanitation management""^5} [{:keywords=>""children"", :boost=>10}, {:keywords=>""health"", :boost=>nil}, {:keywords=>""sanitation management"", :boost=>5}]",How do I tokenize this string in Ruby?
What exactly is Rake ?," In simple terms, what does Rake do? What purposes does it have? I understand it's a build tool but I'm looking a bit more detail. <code> ",What exactly is Rake?
How do I make beautiful screenshots of web pages using ruby and a unix server? ," I'm trying to programatically create thumbnail images of a large number of web pages that are hosted on my own ruby/rails-based website.I want to be able to code a stand-alone bit of ruby that looks something like this: I need the awesome-screenshot-maker library (and its dependencies) to be fairly easy to build on Linux, Solaris and Mac OS X. Ideally it will install with a single 'gem install' command.I've spent the afternoon exploring various options, including Moz snap shooter, webkit2png and rbwebkitgtk. They are all in the right area, but none seem to work on all three platforms.RMagick looks like a possible option if I'm willing to output PDFs from my rails app (instead of web pages), but that strikes me as hacky. It's also very laborious to get RMagic and imagemagick up and running on Mac OS X.Does such a library exist that can easily be setup on three platforms? <code>  require 'awesome-screenshot-maker'items.each do |id| url = ""http://foo.com/bar/#{id}"" shooter = AwesomeScreenshotMaker.new(0.2) # thumbnails are 20% of original shooter.capture(url, ""/images/thumbnail-#{id}.png"")end",How do I take screenshots of web pages using ruby and a unix server?
Django or RoR," I'm a C#/.NET developer looking to mess around with something completely different - something LAM(*) stackish for building web apps quickly.I'm thinking either Django or Rails. I kind of like the Python language better and it seems to be more full-featured than Ruby for statistical, scientific and networking (let me know if you think this is wrong). However, the RoR community seems to be much bigger - which might make it a safer bet. Do you think this is important? Anybody have experience with both RoR and Django?Update: Specifically I'm looking to be able to build a community finance oriented site quickly. There are definitely a lot of Ruby Gems to speed up the process, but I noticed Pinax on the Django side which looks promising. I know that Python is already fairly popular for financial/mathematical programming. Anyone else have an opinion?Update 2: Noticed some comments about ASP.NET MVC. I have in fact done pretty significant work with ASP.NET MVC - a LOB app for Medical Equipment Servicing, and I loved it. It is IMHO a much better and more intuitive way to write web apps compared with ASP.NET web forms. But, I'm really looking for a non-.NET development environment to develop some chops in. <code> ",Django or Ruby on Rails
How I can delete special characters?," I'm practicing with Ruby and regex to delete certain unwanted characters. For example: and for special characters, example ☻ or ™: This leaves only numbers, ok. But this only works if the user enters a special character as a code, like this: My question:How I can delete special characters if the user enters a special character without code, like this: <code>  input = input.gsub(/<\/?[^>]*>/, '') input = input.gsub('&#', '') &#153; ",How can I delete special characters?
Ruby on Rails: Find the record with lowest value of a specific columns," I am trying to find a record in the database that has the lowest value of its datetime column. In simpler words, I want to find a record with the earliest time.I can use minimum to find the lowest value, but that will only return the value itself, and not the whole record.I suppose I could create another query, but I'm wondering if there is a more efficient way of doing this.  <code> ",Ruby on Rails: Find the record with lowest value of a specific column
"Rails Active Record find(:all, :order_by => ) issue."," I seem to be unable to use the ActiveRecord::Base.find option :order for more than one column at a time. For example, I have a ""Show"" model with date and attending columns.If I run the following code: I get the following results: If I run the following code: But, if I run: OR OR I get the same results as only sorting by date: Where as, I want to get these results: This is the query being generated from the logs: Finally, here is my model: What am I missing? What am I doing wrong?UPDATE: Thanks for all your help, but it seems that all of you were stumped as much as I was. What solved the problem was actually switching databases. I switched from the default sqlite3 to mysql.  <code>  @shows = Show.find(:all, :order => ""date"") [#<Show id: 7, date: ""2009-04-18"", attending: 2>, #<Show id: 1, date: ""2009-04-18"", attending: 78>, #<Show id: 2, date: ""2009-04-19"", attending: 91>, #<Show id: 3, date: ""2009-04-20"", attending: 16>, #<Show id: 4, date: ""2009-04-21"", attending: 136>] @shows = Show.find(:all, :order => ""attending DESC"")[#<Show id: 4, date: ""2009-04-21"", attending: 136>, #<Show id: 2, date: ""2009-04-19"", attending: 91>, #<Show id: 1, date: ""2009-04-18"", attending: 78>, #<Show id: 3, date: ""2009-04-20"", attending: 16>, #<Show id: 7, date: ""2009-04-18"", attending: 2>] @shows = Show.find(:all, :order => ""date, attending DESC"") @shows = Show.find(:all, :order => ""date, attending ASC"") @shows = Show.find(:all, :order => ""date ASC, attending DESC"") [#<Show id: 7, date: ""2009-04-18"", attending: 2>, #<Show id: 1, date: ""2009-04-18"", attending: 78>, #<Show id: 2, date: ""2009-04-19"", attending: 91>, #<Show id: 3, date: ""2009-04-20"", attending: 16>, #<Show id: 4, date: ""2009-04-21"", attending: 136>] [#<Show id: 1, date: ""2009-04-18"", attending: 78>,#<Show id: 7, date: ""2009-04-18"", attending: 2>, #<Show id: 2, date: ""2009-04-19"", attending: 91>, #<Show id: 3, date: ""2009-04-20"", attending: 16>, #<Show id: 4, date: ""2009-04-21"", attending: 136>] [4;35;1mUser Load (0.6ms)[0m [0mSELECT * FROM ""users"" WHERE (""users"".""id"" = 1) LIMIT 1[0m[4;36;1mShow Load (3.0ms)[0m [0;1mSELECT * FROM ""shows"" ORDER BY date ASC, attending DESC[0m[4;35;1mUser Load (0.6ms)[0m [0mSELECT * FROM ""users"" WHERE (""users"".""id"" = 1) [0m create_table ""shows"", :force => true do |t| t.string ""headliner"" t.string ""openers"" t.string ""venue"" t.date ""date"" t.text ""description"" t.datetime ""created_at"" t.datetime ""updated_at"" t.decimal ""price"" t.time ""showtime"" t.integer ""attending"", :default => 0 t.string ""time"" end","Rails Active Record find(:all, :order => ) issue."
RoR: Building models containing models - best practice," I think my question is best described as an example. Let's say I have a simple model called ""Thing"" and it has a few attributes that are simple data types. Something like... That isn't hard. The db table will contain three columns with those three attributes and I can access them with something like @thing.foo or @thing.bar.But the problem I'm trying to solve is what happens when ""foo"" or ""goo"" can no longer be contained in a simple data type? Assume that foo and goo represent the same type of object. That is, they are both instances of ""Whazit"" just with different data. So now Thing might look like this... But now there is a new model called ""Whazit"" that looks like this... So far this is all good. Now here is where I'm stuck. If I have @thing, how can I set it up to refer to my 2 instances of Whazit by name (For the record, the ""business rule"" is that any Thing will always have exactly 2 Whazits)? That is, I need to know if the Whazit I have is basically foo or goo. Obviously, I can't do @thing.foo in the current setup, but I'd that is ideal.My initial thought is to add a ""name"" attribute to Whazit so I can get the Whatzits associated with my @thing and then choose the Whazit I want by name that way. That seems ugly though.Is there a better way? <code>  Thing - foo:string - goo:string - bar:int Thing - bar:int Whazit - content:string - value:int - thing_id:int",Best practices for multiple associations with the same class in Rails?
why does the stack overflow?," The following would cause stack overflow for large 'n', and I can understand why. Why does the following cause overflow as well? <code>  def factorial(n) (n > 1) ? (return (n * factorial(n - 1))) : (return 1)end def factorial(n, k) (n > 1) ? (return factorial(n - 1, lambda {|v| return k.call(v * n)})) : (return k.call(1))end",Why does this code cause a stack overflow?
What's the difference between Rack and Metal in Ruby?, I don't get it!Rack: http://rack.rubyforge.org/Rails Metal: http://weblog.rubyonrails.org/2008/12/17/introducing-rails-metalI read the two articles and my eyes got blurry. How do the two components relate? Examples would be great? <code> ,What's the difference between Rack and Rails Metal (Ruby)?
Ruby of Rails on Winxp CTRL+C in console not stopping mongrel ," I am currently in the process of learning Ruby on Rails. I have been following the Learning Rails podcast and screencasts. I've run into a problem, well more of an annoyance. Every time the screencast has me kill the mongrel server I am forced to close the console window because CTRL+C isnt killing it as it should. I then have to open a new console window, navigate to my rails app and issue a 'ruby script/server' command to restart it.What I am looking for is possibly a reason for this, a way to fix it or other suggestions to make this process faster and/or less annoying. Or even possibly a batch file or shortcut to open a cmd window right to where I need it? <code> ",Ruby on Rails on Windows XP CTRL+C in console not stopping mongrel 
Blocks of code in python," Can you elaborate on the current state of ""blocks"" (in the Ruby sense) in Python?What are the language constructs that exist in Python? How do they compare to other languages (like Ruby, Smalltalk, [insert more])? Or does Python lack such constructs?I have so far understood the lambda thing; it is only one-line, but maybe it comes close. What about ""decorators"" and yield in this context?I am also using old Python versions in some projects. Which constructs were introduced in which Python version (2.5, 2.6, etc.) or are planned in future versions?Can you link interesting articles on the subject that explain this stuff for Python and also comparing to other languages and could be interesting for someone who wants to extend basic Python knowledge? <code> ",Blocks of code in Python
"Rails: How do you get a cached action to return a 404 on all requests to a page that raises ActiveRecord::RecordNotFound, not just the first one?"," Note This originally started as a question about 404 errors, but now it's a question why the patch that I applied would make a difference.How do you get a cached action to return a 404 on all requests that raise an ActiveRecord::RecordNotFound exception, not just the first request?For example, if you start an empty rails project, add a Product model and controller, setup your database.yml, setup your cache backend in production.rb, rake db:migrate, then start in production and hit the site for a non-existent object, e.g. http://localhost:3000/product/show/1234 The first time the page is hit, it returns the 404 page as expected. However, every subsequent hit to that URL returns a blank page with 200 OK. How do you get it to return 404 every time?Here are the CURL requests, followed by the logs The second response is clearly wrong.Here is a copy of the log for the 2 requests: Indeed, if you pull the cached action out of the cache, it has some sort of empty garbage in there. What am I doing wrong here?EditI've confirmed that Rails 2.1.2 and 2.2.2 don't exhibit this behavior, but 2.3.2 does. (i.e. the older versions don't store an empty response into the cache and they indeed throw a 404 for the subsequent requests)I'm having trouble testing against edge Rails, because loading it causes the following error when starting the server: foobar/vendor/rails/activesupport/lib/active_support/dependencies.rb:440:in `load_missing_constant': uninitialized constant ActionController::Failsafe (NameError)I've tested against the current head of the 2-3-stable branch, 375e8976e3, and it too exhibits this behavior.Edit #2 I attempted to track down when the change occurred in the Rails codebase to determine if it was intentional. It seems that this seemingly innocuous commit is where the bug starts.Here are the details of the bisection, where 404 denotes the desired behavior, 200 being undesired. Here is a patch that reverses the change, which when applied to tag v2.3.2.1, i.e. dc88847e5ce392eed210b97525c14fca55852867, fixes the problem. I, however, am not smart enough to fathom why this seemingly small change would actually make a difference! Perhaps someone smarter than me could shed some light on the situation? Edit #3The patch seems to also fix the related bug, showcased above, where the ""Completed in XYms (DB: Z) | 404 Not Found [http://0.0.0.0/product/1234]"" did not show up in the log.Edit #4The above patch broke other things in ActionPack, so I delved in and generated a fix for the issue that doesn't cause collateral damage. The patch and any subsequent updates will be at the rails lighthouse <code>  class ProductController < ApplicationController caches_action :show def show @product = Product.find(params[:id]) render :text => ""asdf"" endend ~ $ curl -I http://0.0.0.0:3000/product/show/1234HTTP/1.1 404 Not FoundConnection: closeDate: Mon, 20 Apr 2009 22:49:18 GMTContent-Type: text/html; charset=utf-8Cache-Control: no-cacheContent-Length: 14097~ $ curl -I http://0.0.0.0:3000/product/show/1234HTTP/1.1 200 OKConnection: closeDate: Mon, 20 Apr 2009 22:49:19 GMTX-Runtime: 6Content-Type: text/html; charset=utf-8Cache-Control: no-cacheContent-Length: 0 Processing ProductController#show (for 127.0.0.1 at 2009-04-20 17:35:24) [GET] Parameters: {""id""=>""1234""}ActiveRecord::RecordNotFound (Couldn't find Product with ID=1234): app/controllers/product_controller.rb:6:in `show'Rendering rescues/layout (not_found)Processing ProductController#show (for 127.0.0.1 at 2009-04-20 17:35:30) [GET] Parameters: {""id""=>""1234""}Filter chain halted as [#<ActionController::Caching::Actions::ActionCacheFilter:0x23e36d4 @options={:cache_path=>nil, :store_options=>{}, :layout=>nil}>] rendered_or_redirected.Filter chain halted as [#<ActionController::Filters::AroundFilter:0x23e3580 @kind=:filter, @options={:unless=>nil, :if=>nil, :only=>#<Set: {""show""}>}, @method=#<ActionController::Caching::Actions::ActionCacheFilter:0x23e36d4 @options={:cache_path=>nil, :store_options=>{}, :layout=>nil}>, @identifier=nil>] did_not_yield.Completed in 12ms (View: 0, DB: 0) | 200 OK [http://0.0.0.0/product/show/1234] cache.fetch(""views/0.0.0.0:3000/product/show/1234"")=> ["""", nil, [], []] 2-3-stable branch 375e8976e3 - 200 b1c989f28d - 200 beca1f2e15 - 200 f1fff0a48 - 200 f1e20ce9a7 - 200 a5004573d8 - 200 2e1132fad8 - 200 - the difference seems to start at this commit c69d8c043f - 404 d961592886 - 404 276ec16007 - 404 0efec6452 - 404 13c6c3cfc5 - 404 fb2325e35 - 4042-2 stable 3cb89257b4 - 404 diff --git a/actionpack/lib/action_controller/base.rb b/actionpack/lib/action_controller/base.rbindex 0facf70..0790807 100644--- a/actionpack/lib/action_controller/base.rb+++ b/actionpack/lib/action_controller/base.rb@@ -1403,12 +1403,9 @@ module ActionController #:nodoc: end Base.class_eval do- [ Filters, Layout, Benchmarking, Rescue, Flash, MimeResponds, Helpers,- Cookies, Caching, Verification, Streaming, SessionManagement,- HttpAuthentication::Basic::ControllerMethods, HttpAuthentication::Digest::ControllerMethods,- RecordIdentifier, RequestForgeryProtection, Translation- ].each do |mod|- include mod- end+ include Filters, Layout, Benchmarking, Rescue, Flash, MimeResponds, Helpers+ include Cookies, Caching, Verification, Streaming, SessionManagement+ include HttpAuthentication::Basic::ControllerMethods, HttpAuthentication::Digest::ControllerMethods+ include RecordIdentifier, RequestForgeryProtection, Translation end end","What is the difference between [X,Y,Z].each {|m| include m} and include X, Y, Z ?"
Where is it legal to use ruby splat operator and what is its precedence?," Splats are cool. They're not just for exploding arrays, although that is fun. They can also cast to Array and flatten arrays (See http://github.com/mischa/splat/tree/master for an exhaustive list of what they do.)It looks like one cannot perform additional operations on the splat, but in 1.8.6/1.9 the following code throws ""unexpected tSTAR"":foo = bar || *zap #=> unexpected tSTARWhereas this works:foo = *zap || bar #=> works, but of limited valueWhere can the splat appear in an expression? <code> ",Where is it legal to use ruby splat operator?
Why is Ruby BigDecimal returning a weird value?," I am writing code that will deal with currencies, charges, etc. I am going to use the BigDecimal class for math and storage, but we ran into something weird with it.This statement: returns false.If I run those values through a formatting string ""%.13f"" I get: Note the extra 2 from the BigDecimal at the last decimal place.I thought BigDecimal was supposed to counter the inaccuracies of storing real numbers directly in the native floating point of the computer. Where is this 2 coming from? <code>  1876.8 == BigDecimal('1876.8') ""%.20f"" % 1876.8 => 1876.8000000000000""%.20f"" % BigDecimal('1876.8') => 1876.8000000000002",Why is BigDecimal returning a weird value?
Why C# is not dynamic language?," Listening to a podcast, I heard that C# is not dynamic language while Ruby is.What is a ""dynamic language""? Does the existence of dynamic languages imply that there are static languages?Why is C# a dynamic language and what other languages are dynamic? If C# is not dynamic, why is Microsoft pushing it strongly to the market?As well why most of .NET programmers are going crazy over it and leaving other languages and moving to C#?Why is Ruby ""the language of the future""?  <code> ","What is a dynamic language, and why doesn't C# qualify?"
Authlogic OpenID (Rails): Requiring email-address from OpenID provider," I'm playing with the authlogic-example-app and I'm failing to get the email address from the OpenID provider (in my case: Google and Yahoo) when I register a user, resp. I get an empty response instead of an email address (check the comments in code below).This is how my user model looks like (everything else looks like the ""with_openid""-branch of the authlogic-example-app mentioned above). Besides the missing 'email', the openid-authentication-process works as expected: Any idea how to solve this? Has anyone here done this before using authlogic? Or even better: Do you have a working example?Update: I checked the Google Account Authentication API and compared the request submitted by authlogic (using ruby-openid-gem and openid-authentication-plugin) with the example requests on the Google Account Authentication API docs:Example request to authenticate and fetch email address by Google: Request submitted by my appliation: While debugging the whole setup, I've found out that the openid-authentication-plugin never receives an email in the response it receives from the openid provider, this at least explains why the registration hash in my user-model is empty...UPDATE: If you're playing around with authlogic and openid, don't forget to check out the latest railscast on this subject! <code>  class User < ActiveRecord::Base acts_as_authentic do |c| # not needed because I use OpenID c.validate_login_field = false # avoid failed validation before OpenID request c.validate_email_field = false # this one sets 'openid.sreg.required=email' c.required_fields = [:email] end private # overwriting the existing method in '/lib/authlogic_openid/acts_as_authentic.rb' def map_openid_registration(registration) # this is my problem: 'registration' is an empty hash self.email ||= registration[:email] if respond_to?(:email) && !registration[:email].blank? endend https://www.google.com/accounts/o8/ud?openid.ns=http%3A%2F%2Fspecs.openid.net%2Fauth%2F2.0&openid.claimed_id=http%3A%2F%2Fspecs.openid.net%2Fauth%2F2.0%2Fidentifier_select&openid.identity=http%3A%2F%2Fspecs.openid.net%2Fauth%2F2.0%2Fidentifier_select&openid.return_to=http%3A%2F%2Fwww.example.com%2Fcheckauth&openid.realm=http%3A%2F%2Fwww.example.com%2F&openid.assoc_handle=ABSmpf6DNMw&openid.mode=checkid_setup&openid.ns.ext1=http%3A%2F%2Fopenid.net%2Fsrv%2Fax%2F1.0&openid.ext1.mode=fetch_request&openid.ext1.type.email=http%3A%2F%2Faxschema.org%2Fcontact%2Femail&openid.ext1.required=email https://www.google.com/accounts/o8/ud?openid.assoc_handle=AOQobUcdICerEyK6SXJfukaz8ygXiBqF_gKXv68OBtPXmeafBSdZ6576&openid.ax.mode=fetch_request&openid.claimed_id=http%3A%2F%2Fspecs.openid.net%2Fauth%2F2.0%2Fidentifier_select&openid.identity=http%3A%2F%2Fspecs.openid.net%2Fauth%2F2.0%2Fidentifier_select&openid.mode=checkid_setup&openid.ns=http%3A%2F%2Fspecs.openid.net%2Fauth%2F2.0&openid.ns.ax=http%3A%2F%2Fopenid.net%2Fsrv%2Fax%2F1.0&openid.ns.sreg=http%3A%2F%2Fopenid.net%2Fextensions%2Fsreg%2F1.1&openid.realm=http%3A%2F%2Flocalhost%3A3000%2F&openid.return_to=http%3A%2F%2Flocalhost%3A3000%2Faccount%3Ffor_model%3D1%26_method%3Dpost%26open_id_complete%3D1&openid.sreg.required=email",Ruby-OpenID: Requiring email-address from OpenID provider
How to turn a Ruby Hash into HTTP Params," That is pretty easy with a plain hash like which would translate into But what do you do with something more complex like which should translate into Or even worse, (what to do) with something like: Thanks for the much appreciated help with that! <code>  {:a => ""a"", :b => ""b""} ""a=a&b=b"" {:a => ""a"", :b => [""c"", ""d"", ""e""]} ""a=a&b[0]=c&b[1]=d&b[2]=e"" {:a => ""a"", :b => [{:c => ""c"", :d => ""d""}, {:e => ""e"", :f => ""f""}]",Ruby: How to turn a hash into HTTP parameters?
get all of the immediate subdirectories in ruby, I'm trying to write a simple ruby script that will copy a file to the immediate subdirectories of a directory. How would I get only the immediate subdirectories? <code> ,Get immediate subdirectories in ruby
how can I create a form in Rails without having to use form_for and a model instance?," First of all, I'm a Rails newbie. I can hold my own in Ruby, but Rails is a whole different story for me. I like the development speed Rails offers me, but I can't seem to make peace with the existing documentation.For all of my forms so far, I used form_for, with an instance for the model I needed to create ( for example, submitting a new book ). I would really like to be able to just write something like : From the articles I read online, I understood that this was the way things got done in Rails < 2.0 . Is there anyway of doing this in Rails > 2.0, or something equivalent to it ? Can you please post a snippet ? <code>  <% form(:action => ""whatever"") %> <% text_field ... %> <% file_field ... %><% end %>",How can I create a form in Rails without having to use form_for and a model instance?
ruby: how to fire and forget a subprocess?," I have a long running process and I need it to launch another process (that will run for a good while too). I need to only start it, and then completely forget about it.I managed to do what I needed by scooping some code from the Programming Ruby book, but I'd like to find the best/right way, and understand what is going on. Here's what I got initially: So, is this the way, or how else should I do it?After checking the answers below I ended up with this code, which seems to make more sense: I'd appreciate some explanation on how fork works. [got that already]Was detaching $$ right? I don't know why this works, and I'd really love to have a better grasp of the situation. <code>  exec(""whatever --take-very-long"") if fork.nil?Process.detach($$) (pid = fork) ? Process.detach(pid) : exec(""foo"")",How to fire and forget a subprocess?
Ruby: change each value in a hash with something like #collect for arrays?," I'd like to replace each value in a hash with value.some_method.For example, for given a simple hash: every value should be .upcased, so it looks like: I tried #collect and #map but always just get arrays back. Is there an elegant way to do this?UPDATE Damn, I forgot: The hash is in an instance variable which should not be changed. I need a new hash with the changed values, but would prefer not to define that variable explicitly and then loop over the hash filling it. Something like: <code>  {""a"" => ""b"", ""c"" => ""d""}` {""a"" => ""B"", ""c"" => ""D""} new_hash = hash.magic{ ... }",How to change Hash values?
What's this &block in Ruby? And how does it get passes in a method here?," Saw this piece of code in a Ruby on Rails book. This first one is from a view and the second one is a helper module. I don't understand how that &block and the attributes={} thing work. Can anyone guide me to a tutorial of some kind explaining this? <code>  <% hidden_div_if(@cart.items.empty?, :id => ""cart"") do %> <%= render(:partial => ""cart"", :object => @cart) %><% end %>module StoreHelper def hidden_div_if(condition, attributes = {}, &block) if condition attributes[""style""] = ""display: none"" end content_tag(""div"", attributes, &block) endend",What's this &block in Ruby? And how does it get passed in a method here?
Get person's age," I'd like to get a person's age from its birthday. now - birthday / 365 doesn't work, because some years have 366 days. I came up with the following code: Is there a more Ruby'ish way to calculate age? <code>  now = Date.todayyear = now.year - birth_date.yearif (date+year.year) > now year = year - 1end",Get person's age in Ruby
Get person's age in ruby," I'd like to get a person's age from its birthday. now - birthday / 365 doesn't work, because some years have 366 days. I came up with the following code: Is there a more Ruby'ish way to calculate age? <code>  now = Date.todayyear = now.year - birth_date.yearif (date+year.year) > now year = year - 1end",Get person's age in Ruby
How do I pass command line arguments to a rake task?," I have a rake task that needs to insert a value into multiple databases. I'd like to pass this value into the rake task from the command line, or from another rake task.How can I do this? <code> ",How to pass command line arguments to a rake task
Ruby spaceship operator <=>, What is the Ruby <=> (spaceship) operator? Is the operator implemented by any other languages? <code> ,What is the Ruby <=> (spaceship) operator?
how do i pass multiple arguments to a ruby method as an array?," I have a method in a rails helper file like this and I want to be able to call this method like this so that I can dynamically pass in the arguments based on a form commit. I can't rewrite the method, because I use it in too many places, how else can I do this? <code>  def table_for(collection, *args) options = args.extract_options! ...end args = [:name, :description, :start_date, :end_date]table_for(@things, args)",How do I pass multiple arguments to a ruby method as an array?
Which Algorithm Does Ruby's Sort method use?," When I sort an Array using the native sort method, which algorithm does Ruby use? Is it data-dependant, i.e., if the data is small it uses X algorithm else it uses Y algorithm?Is it a stable sort? What is the average time complexity? <code> ",Which algorithm does Ruby's sort method use?
Please introduce  a multi-processing library in Perl or Ruby," In python we can use multiprocessing modules.If there is a similar library in Perl and Ruby, would you teach it? I would appreciate it if you can include a brief sample. <code> ",Please introduce a multi-processing library in Perl or Ruby
ruby on rails has_one question, I am trying to understand has_one relationship in RoR.Let's say I have two models - Person and Cell: Can I just use has_one :person instead of belongs_to :person in Cell model?Isn't it the same? <code>  class Person < ActiveRecord::Base has_one :cellendclass Cell < ActiveRecord::Base belongs_to :personend,Difference between has_one and belongs_to in Rails?
Is everything an object in python like ruby?," I read on another Stack Overflow question that Python was just like Ruby, as it relates to ""everything's an object,"" and everything in Python was an object, just like Ruby.Is this true? Is everything an object in Python like Ruby?How are the two different in this respect or are they really the same? For example, can you take a number and do the Ruby stuff I've seen like: Can that be done the same way in Python? <code>  y = 5.plus 6",Is everything an object in Python like Ruby?
Ruby on Rails and MySQL ," Is it possible for me to create and use a database table that contains no :id column in ActiveRecord, Ruby on Rails.I don't merely want to ignore the id column, but I wish it to be absolutely non-existent. Any more info ( like an :id_column ) would break the whole feature.How would I implement something like this in rails? <code>  Table Example:key_column :value_column0cc175b9c0f1b6a831c399e269772661 0cc175b9c0f1b6a831c399e2697726614a8a08f09d37b73795649038408b5f33 0d61f8370cad1d412f80b84d143e125792eb5ffee6ae2fec3ad71c777531578f 9d5ed678fe57bcca610140957afab571",Create an ActiveRecord database table with no :id column?
"Ruby on Rails, ActiveRecord and MySQL "," Is it possible for me to create and use a database table that contains no :id column in ActiveRecord, Ruby on Rails.I don't merely want to ignore the id column, but I wish it to be absolutely non-existent. Any more info ( like an :id_column ) would break the whole feature.How would I implement something like this in rails? <code>  Table Example:key_column :value_column0cc175b9c0f1b6a831c399e269772661 0cc175b9c0f1b6a831c399e2697726614a8a08f09d37b73795649038408b5f33 0d61f8370cad1d412f80b84d143e125792eb5ffee6ae2fec3ad71c777531578f 9d5ed678fe57bcca610140957afab571",Create an ActiveRecord database table with no :id column?
A concise explanation of nil v. empty v. blank in Ruby on Rails," I find myself repeatedly looking for a clear definition of the differences of nil?, blank?, and empty? in Ruby on Rails. Here's the closest I've come:blank? objects are false, empty, or a whitespace string. For example, """", "" "", nil, [], and {} are blank.nil? objects are instances of NilClass.empty? objects are class-specific, and the definition varies from class to class. A string is empty if it has no characters, and an array is empty if it contains no items.Is there anything missing, or a tighter comparison that can be made? <code> ",How to understand nil vs. empty vs. blank in Ruby
How to understand nil vs. empty vs. blank in Rails (and Ruby)," I find myself repeatedly looking for a clear definition of the differences of nil?, blank?, and empty? in Ruby on Rails. Here's the closest I've come:blank? objects are false, empty, or a whitespace string. For example, """", "" "", nil, [], and {} are blank.nil? objects are instances of NilClass.empty? objects are class-specific, and the definition varies from class to class. A string is empty if it has no characters, and an array is empty if it contains no items.Is there anything missing, or a tighter comparison that can be made? <code> ",How to understand nil vs. empty vs. blank in Ruby
has Python changed to more object oriented?," I remember that at one point, it was said that Python is less object oriented than Ruby, since in Ruby, everything is an object. Has this changed for Python as well? Is the latest Python more object oriented than the previous version? <code> ",Has Python changed to more object oriented?
Really Cheap Command-Line Option Parsing in Ruby," EDIT: Please, please, please read the two requirements listed at the bottom of this post before replying. People keep posting their new gems and libraries and whatnot, which clearly don't meet the requirements.Sometimes I want to very cheaply hack some command line options into a simple script. A fun way to do it, without dealing with getopts or parsing or anything like that, is: It's not quite the normal Unix options syntax, because it will accept options non-option command line parameters, as in ""myprog -i foo bar -q"", but I can live with that. (Some people, such as the Subversion developers, prefer this. Sometimes I do too.)An option that's just present or absent can't be implemented much more simply than the above. (One assignment, one function call, one side effect.) Is there an equally simple way to deal with options that take a parameter, such as ""-f filename""?EDIT:One point I didn't make earlier on, because it hadn't become clear to me until the author of Trollop mentioned that the library fit ""in one [800-line] file,"" is that I'm looking not only for clean syntax, but for a technique that has the following characteristics:The entirety of the code can be included in the script file (without overwhelming the actual script itself, which may be only a couple of dozen lines), so that one can drop a single file in a bin dir on any system with a standard Ruby 1.8.[5-7] installation and use it. If you can't write a Ruby script that has no require statements and where the code to parse a couple of options is under a dozen lines or so, you fail this requirement.The code is small and simple enough that one can remember enough of it to directly type in code that will do the trick, rather than cutting and pasting from somewhere else. Think of the situation where you're on the console of a firewalled sever with no Internet access, and you want to toss together a quick script for a client to use. I don't know about you, but (besides failing the requirement above) memorizing even the 45 lines of simplified micro-optparse is not something I care to do. <code>  ...$quiet = ARGV.delete('-d')$interactive = ARGV.delete('-i')...# Deal with ARGV as usual here, maybe using ARGF or whatever.",How to do really cheap command-line option parsing in Ruby
Does google use Ruby for any application development ? Also any ideas about ruby jobs ...., Does anyone know if Google uses Ruby for application development? What are the general job prospects of Ruby compared to other languages like Perl or Python? <code> ,Does Google use Ruby for application development?
Do Google use Ruby for any application development?, Does anyone know if Google uses Ruby for application development? What are the general job prospects of Ruby compared to other languages like Perl or Python? <code> ,Does Google use Ruby for application development?
Ruby - How to catch all HTTP traffic (local proxy), I am looking to get access to all HTTP traffic on my machine (my windows machine - not a server). From what I understand having a local proxy through which all traffic routes is the way to go. I have been Googling but failed to find any resources (in respect to Ruby) to help me out. Any tips or links are much appreciated. <code> ,How to catch all HTTP traffic (local proxy)
How to convert from a string to object attribute name? --pls help!," I am trying to convert a string value into a name of an attribute that belongs to an object. For example, in the following code, I need all the string values in the column_array turned into attribute names. The names ""student_identification"", ""email"", etc. are actual column names of my Student table. In the real scenario, column_array will be set by the user (by ticking check boxes). And new_array will be replaced by csv, as I want the data go into a csv file.At the moment I am really struggling at the following line: I want ""#{column_array[i]}"" to be turned into the attribute name so I can access the data. <code>  new_array << r.""#{column_array[i]}"" def exp_tst @records = Student.find(:all, :conditions=> session[:selection_scope], :order => sort_order('laboratory_id')) column_array = [""student_identification"", ""laboratory_id"", ""email"", ""current_status""] new_array = Array.new() @records.each do |r| (0..(column_array.size-1)).each do |i| new_array << r.""#{column_array[i]}"" end endend",How to convert from a string to object attribute name?
Gems and Ubuntu 9.04," I recently upgraded to Ubuntu 9.04 and I have issues using gems.I installed Ruby, Rubygems and Rails using apt-get.The rails command does work.I then installed capistrano and other gems, such as heroku. In order to do that, I used the command: When I want to use the cap command it does not work: It is the same with the other gem commands.Do I have something particular to do so that the gem commands work? <code>  sudo gem install XXX bash: cap: command not found",How do I use gems with Ubuntu?
Gems and Ubuntu," I recently upgraded to Ubuntu 9.04 and I have issues using gems.I installed Ruby, Rubygems and Rails using apt-get.The rails command does work.I then installed capistrano and other gems, such as heroku. In order to do that, I used the command: When I want to use the cap command it does not work: It is the same with the other gem commands.Do I have something particular to do so that the gem commands work? <code>  sudo gem install XXX bash: cap: command not found",How do I use gems with Ubuntu?
Reuse cucumber steps," I want to reuse some Cucumber steps but can't seem to find the right way.I want to write a step like: But then have another step like: So in testing user authentication I can use the former, but most other places, I can use the latter, and not actually have to repro code.Is there a way to call that other step, or do I just put the logic in a helper method, and call said method from each task (basically a method extraction refactoring, which, after reading my question makes me believe that's actually the best way anyway)? <code>  Given /^I login with (.*) credentials$/ |type| # do stuff with type being one of ""invalid"" or ""valid""end Given /^I login successfully$ # call ""Given I login with valid credentials""end",Reuse Cucumber steps
What is the * operator doing to this string in Ruby," Given the Ruby code I understand everything in the second line apart from the * operator - what is it doing and where is the documentation for this? (as you might guess, searching for this case is proving hard...) <code>  line = ""first_name=mickey;last_name=mouse;country=usa"" record = Hash[*line.split(/=|;/)] ",What does the (unary) * operator do in this Ruby code?
What is does the (unary) * operator do in this Ruby code?," Given the Ruby code I understand everything in the second line apart from the * operator - what is it doing and where is the documentation for this? (as you might guess, searching for this case is proving hard...) <code>  line = ""first_name=mickey;last_name=mouse;country=usa"" record = Hash[*line.split(/=|;/)] ",What does the (unary) * operator do in this Ruby code?
JRuby for Ruby web applications?," Background: I'm writing a 'standard' (nothing special) web application in Ruby (not Rails) and I need to start thinking about deployment.So I've been hearing a lot of recommendations to use JRuby to deploy Ruby web applications, regardless of whether you actually need Java libraries or not. How true is this? Is it worth using the Java implementation just for speed? Would I gain anything else by doing so? Would I run into any issues?PS: I don't know Java that well, so ""you can write parts of it in Java"" isn't very helpful. <code> ",Use JRuby for Ruby web applications? Is it worth it?
equivalent of curl for Ruby?, Is there a cURL library for Ruby?  <code> ,Equivalent of cURL for Ruby?
equivalent of cURL for Ruby?, Is there a cURL library for Ruby?  <code> ,Equivalent of cURL for Ruby?
"In a Rails app, where would you create your own Ruby modules?"," With a Ruby module, you can cluster together a bunch of methods that you might use in one place and then include them into a class so it's as if you had written them in that class. What kinds of practical uses are there for Ruby modules in a rails app? I would appreciate if someone could mention an example of where they've actually used a module of their own so I have a sense of what situations I should be thinking about creating them. Thanks. <code> ",When to consider creating your own Ruby module in a Rails app?
"In a Rails app, what's an example of where you might consider creating your own Ruby modules?"," With a Ruby module, you can cluster together a bunch of methods that you might use in one place and then include them into a class so it's as if you had written them in that class. What kinds of practical uses are there for Ruby modules in a rails app? I would appreciate if someone could mention an example of where they've actually used a module of their own so I have a sense of what situations I should be thinking about creating them. Thanks. <code> ",When to consider creating your own Ruby module in a Rails app?
Format a Decimal, I need to format a decimal like this: The problem is that when I retrieve 00.33 it outputs as 0.33.I tried everything and can't get it to work correctly. I could do MySQL's Zerofill but I'm really trying to avoid that. <code>  00.3311.2405.22,How do I format a Decimal?
Nokogiri: How can I add a child to a node at a specific position?," I have a node which has two children: an HTML text and an HTML element. In this case the HTML text is: and the HTML element: I then create a node like this: Now, to add the above node to the main node I use the following: This appends the span node at the end. How can I put the span_node in front of all children? <code>  <h1 id=""Installation-blahblah"">Installation on server<a href=""#Installation-blah"" class=""wiki-anchor"">&para;</a></h1> Installation on server <a href=""#Installation-blah"" class=""wiki-anchor"">anchor;</a> span_node = Nokogiri::HTML::Node.new('span',doc)span_node['class'] = 'edit-section'link_node = Nokogiri::HTML::Node.new('a',doc)link_node['href'] = ""/wiki/#{page_id}/#{@page.title}/edit?section=#{section_index}""link_node['class'] = 'icon icon-edit'link_node.content = 'mylink'span_node.add_child(link_node) node.add_child(span_node)",How can I add a child to a node at a specific position?
"If scala scaled well for Twitter, would jruby have done the same?"," Here is the only way I know to ask it at the moment. As Understand it Scala uses the Java Virtual Machine. I thought Jruby did also. Twitter switched its middleware to Scala. Could they have done the same thing and used Jruby? Could they have started with Jruby to start with and not had their scaling problems that caused them to move from Ruby to Scala in the first place? Do I not understand what Jruby is? I'm assuming that because Jruby can use Java it would have scaled where Ruby would not.Does it all boil down to the static versus dynamic types, in this case? <code> ",Does Scala scale better than other JVM languages?
Why does Scala scale well and other JVM languages do not (or do they)?," Here is the only way I know to ask it at the moment. As Understand it Scala uses the Java Virtual Machine. I thought Jruby did also. Twitter switched its middleware to Scala. Could they have done the same thing and used Jruby? Could they have started with Jruby to start with and not had their scaling problems that caused them to move from Ruby to Scala in the first place? Do I not understand what Jruby is? I'm assuming that because Jruby can use Java it would have scaled where Ruby would not.Does it all boil down to the static versus dynamic types, in this case? <code> ",Does Scala scale better than other JVM languages?
Does Scala scale better then other JVM languages?," Here is the only way I know to ask it at the moment. As Understand it Scala uses the Java Virtual Machine. I thought Jruby did also. Twitter switched its middleware to Scala. Could they have done the same thing and used Jruby? Could they have started with Jruby to start with and not had their scaling problems that caused them to move from Ruby to Scala in the first place? Do I not understand what Jruby is? I'm assuming that because Jruby can use Java it would have scaled where Ruby would not.Does it all boil down to the static versus dynamic types, in this case? <code> ",Does Scala scale better than other JVM languages?
Ruby switch statement, How do I write a switch statement in Ruby? <code> ,How to write a switch statement in Ruby
How to write a switch statement in Ruby?, How do I write a switch statement in Ruby? <code> ,How to write a switch statement in Ruby
How can I write a switch statement in Ruby?, How do I write a switch statement in Ruby? <code> ,How to write a switch statement in Ruby
How to write a switch statement in Ruby, How do I write a switch statement in Ruby? <code> ,How to write a switch statement in Ruby
How to write a switch statement in Ruby?, How do I write a switch statement in Ruby? <code> ,How to write a switch statement in Ruby
Need help refactoring some sorting code," I have implemented a sorting algorithm for a custom string that represents either time or distance data for track & field events. Below is the format'10:03.00 - Either ten minutes and three seconds or 10 feet, three inchesThe result of the sort is that for field events, the longest throw or jump would be the first element while for running events, the fastest time would be first. Below is the code I am currently using for field events. I didn't post the running_event_sort since it is the same logic with the greater than/less than swapped. While it works, it just seems overly complex and needs to be refactored. I am open to suggestions. Any help would be great.  <code>  event_participants.sort!{ |a, b| Participant.field_event_sort(a, b) }class Participantdef self.field_event_sort(a, b) a_parts = a.time_distance.scan(/'([\d]*):([\d]*).([\d]*)/) b_parts = b.time_distance.scan(/'([\d]*):([\d]*).([\d]*)/) if(a_parts.empty? || b_parts.empty?) 0 elsif a_parts[0][0] == b_parts[0][0] if a_parts[0][1] == b_parts[0][1] if a_parts[0][2] > b_parts[0][2] -1 elsif a_parts[0][2] < b_parts[0][2] 1 else 0 end elsif a_parts[0][1] > b_parts[0][1] -1 else 1 end elsif a_parts[0][0] > b_parts[0][0] -1 else 1 endendend",Sorting a string that could contain either a time or distance
"(Ruby,Rails)  Context of SELF in modules and libraries...?"," Quick question regarding the use of ""SELF"" inside a module or library. Basically what is the scope/context of ""SELF"" as it pertains to a module or library and how is it to be properly used? For an example of what I'm talking about, check out the ""AuthenticatedSystem"" module installed with ""restful_authentication"".NOTE: I'm aware that 'self' equates to 'this' in other languages and how 'self' operates on a class/object, however in the context of a module/library there is nothing to 'self'. So then what is the context of self inside something like a module where there is no class? <code> ","(Ruby,Rails) Context of SELF in modules and libraries...?"
"(Ruby,Rails)  Role-based authentication and user management...?"," I'm looking for a quality Administrative plugin for Rails. It seems that most of the existing plugins/gems (e.g. ""restful_authentication"", ""acts_as_authenticated"") revolve around self-signup, etc. However, I'm looking for a full-featured Administrative/Management role-based type of solution -- but not one that's simply tacked on to another non-role-based solution.If I can't find one, I suppose I'll roll my own...just wasn't looking to re-invent the wheel. <code> ","(Ruby,Rails) Role-based authentication and user management...?"
undo scaffolding in rails, Is there any way to 'undo' the effects of a scaffold command in Rails? <code> ,Undo scaffolding in Rails
Trend for ||= or if defined? for method memorization," Should I use if defined? Or ||= I noticed the if defined? method being used more and more recently. Is there any advantage to one over the other? Personally, I prefer ||= for readability. I also think Rails might have a memoize macro which provides this behavior transparently. Is this the case? <code>  return @current_user_session if defined?(@current_user_session) @current_user_session = UserSession.find @current_user_session ||= UserSession.find","In Ruby, should I use ||= or if defined? for memoization?"
how to override [] brackets in ruby ? ," I am writing an Ajax request form with Ruby on Rails using a collection_select tag that looks like this: Ruby then builds an HTML select tag with id = ""Jobs_clearance"" and name = ""Jobs[clearance]""I want to send the parameter to my controller, which looks like this: Unfortunately, Ruby only reads "":Jobs"" as the symbol instead of "":Jobs[clearance]""Is there a way to escape the []'s? backslash isn't working.  <code>  <%= collection_select(""Jobs"", ""clearance"", @allClearances, ""clearance"", ""clearance"", {:prompt => ""Select a Clearance""} )%> class JobsController < ApplicationController def foo @clearance = params[:Jobs[clearance]] end",how to override [] brackets in ruby?
how to override [] brackets in ruby ?," I am writing an Ajax request form with Ruby on Rails using a collection_select tag that looks like this: Ruby then builds an HTML select tag with id = ""Jobs_clearance"" and name = ""Jobs[clearance]""I want to send the parameter to my controller, which looks like this: Unfortunately, Ruby only reads "":Jobs"" as the symbol instead of "":Jobs[clearance]""Is there a way to escape the []'s? backslash isn't working.  <code>  <%= collection_select(""Jobs"", ""clearance"", @allClearances, ""clearance"", ""clearance"", {:prompt => ""Select a Clearance""} )%> class JobsController < ApplicationController def foo @clearance = params[:Jobs[clearance]] end",how to override [] brackets in ruby?
Converting a Ruby String into an array.," I have a string""1,2,3,4""and I'd like to convert it into an array: How? <code>  [1,2,3,4]",How to split a delimited string in Ruby and convert it to an array?
How to split a delimted string in Ruby and convert it to an array?," I have a string""1,2,3,4""and I'd like to convert it into an array: How? <code>  [1,2,3,4]",How to split a delimited string in Ruby and convert it to an array?
ruby add to array... simple question," I'm sure this is simple but I can't seem to get it:Works: What I want to work... Doesn't work either... <code>  @build1 = Booking.build_booking('2009-06-13',3,2,18314)@build2 = Booking.build_booking('2009-06-13',3,4,18317)@build = @build1 + @build2 #for item in @cart.items do# @build << Booking.build_booking('2009-06-13',3,2,18314)#end #(1..3).each do |i|# @build << Booking.build_booking('2009-06-13',3,2,18314)#end",How to add to array in Ruby
What does ||= mean in Ruby?, What does the following code mean in Ruby? Does it have any meaning or reason for the syntax? <code>  ||=,What does ||= (or-equals) mean in Ruby?
What does ||= (or equals) mean in Ruby?, What does the following code mean in Ruby? Does it have any meaning or reason for the syntax? <code>  ||=,What does ||= (or-equals) mean in Ruby?
What is the canonical way to trim a string in Ruby?," This is what I have now - which looks too verbose for the work it is doing. Assume tokens is a array obtained by splitting a CSV line.now the functions like strip! chomp! et. all return nil if the string was not modified What is the Ruby way to say trim it if it contains extra leading or trailing spaces without creating copies?Gets uglier if I want to do tokens[Title].chomp!.strip! <code>  @title = tokens[Title].strip! || tokens[Title] if !tokens[Title].nil? ""abc"".strip! # => nil"" abc "".strip! # => ""abc""",What is the canonical way to trim a string in Ruby without creating a new string?
"The best way in Ruby to do [100, 100] + [2, 3] and get [102, 103] as if it is pixel arithmetics?"," How do I perform vector addition in Ruby so that yields (instead of joining two arrays)?Or it can be another operator too, such as or  <code>  [100, 100] + [2, 3] [102, 103] [100, 100] @ [2, 3] [100, 100] & [2, 3]",How do I perform vector addition in Ruby?
How do I implement vector addition in Ruby?," How do I perform vector addition in Ruby so that yields (instead of joining two arrays)?Or it can be another operator too, such as or  <code>  [100, 100] + [2, 3] [102, 103] [100, 100] @ [2, 3] [100, 100] & [2, 3]",How do I perform vector addition in Ruby?
What Makes Ruby Slow?," Ruby is slow at certain things. But what parts of it are the most problematic?How much does the garbage collector affect performance? I know I've had times when running the garbage collector alone took several seconds, especially when working with OpenGL libraries.I've used matrix math libraries with Ruby that were particularly slow. Is there an issue with how ruby implements basic math?Are there any dynamic features in Ruby that simply cannot be implemented efficiently? If so, how do other languages like Lua and Python solve these problems?Has there been recent work that has significantly improved performance? <code> ",What makes Ruby slow?
"How to write a Perl, Python, or Ruby program to change another process's memory on Windows?"," I wonder if Perl, Python, or Ruby can be used to write a program so that it will look for 0x12345678 in the memory of another process (probably the heap, for both data and code data) and then if it is found, change it to 0x00000000? It is something similar to Cheat Engine, which can do something like that on Windows. <code> ","How to write a Perl, Python, or Ruby program to change the memory of another process on Windows?"
Ruby on Rails: best method of handling currency / money, I'm working on a very basic shopping cart system. I have a table items that has a column price of type integer. I'm having trouble displaying the price value in my views for prices that include both Euros and cents. Am I missing something obvious as far as handling currency in the Rails framework is concerned? <code> ,What is the best method of handling currency/money?
How does one convert a string to lowercase in ruby, How do I take a string and convert it to lower or upper case in Ruby? <code> ,How to convert a string to lower or upper case in Ruby
How does one convert a string to lowercase in Ruby?, How do I take a string and convert it to lower or upper case in Ruby? <code> ,How to convert a string to lower or upper case in Ruby
How does one convert a string to a different case in Ruby?, How do I take a string and convert it to lower or upper case in Ruby? <code> ,How to convert a string to lower or upper case in Ruby
How to convert a string to lower or upper case in Ruby?, How do I take a string and convert it to lower or upper case in Ruby? <code> ,How to convert a string to lower or upper case in Ruby
How do I call DLL functions from Ruby?, I want to access functions within a DLL using Ruby. I want to use the low-level access of C while still retaining the simplicity of writing Ruby code. How do I accomplish this? <code> ,How do I call Windows DLL functions from Ruby?
RoR: How to create a model that is associated with two of another model," I am trying to create the following: Is this an instance in which I would want to use the has_and_belongs_to_many association type on the Link model? How should I do this?Ultimately, I would like to be able to have a user object and call @user.links to get all links involving that user... I'm just not sure what the best way to do this in Rails is. <code>  User model (this is fine)idLink model (associated with two Users)iduser_id1user_id2",Rails - How to create a model linked to TWO of another model
Best way to combine Fragment and Object caching for Memcached + Rails," Lets say you have a fragment of the page which displays the most recent posts, and you expire it in 30 minutes. I'm using Rails here. Obviously you don't need to do the database lookup to get the most recent posts if the fragment exists, so you should be able to avoid that overhead too.What I'm doing now is something like this in the controller which seems to work: Is this the best way? Is it safe?One thing I don't understand is why the key is ""recent_posts"" for the fragment and ""views/recent_posts"" when checking later, but I came up with this after watching memcached -vv to see what it was using. Also, I don't like the duplication of manually entering ""recent_posts"", it would be better to keep that in one place.Ideas? <code>  <% cache(""recent_posts"", :expires_in => 30.minutes) do %> ...<% end %> unless Rails.cache.exist? ""views/recent_posts"" @posts = Post.find(:all, :limit=>20, :order=>""updated_at DESC"")end",Best way to combine fragment and object caching for memcached and Rails
Questions of new developer at the project," There is Ruby on Rails (1.8, 2.3.2) project. First version of project was made by some organisation. I will implement next versions of this project without any help from this organisation. I will be able to talk with developers from previous development team during meeting (1-3 hours).Project statistics: ~10k LOC, 1.0/0.6 code to test ratio, rspecWhat questions about project can you recommend to ask? <code> ",What should I ask the previous development team during my only (1-3hr) meeting?
"in Ruby, how to use global variables or constant values?"," I have a program that looks like: the use of $offset seems a bit weird.In C, if I define something outside of any function, it is a global variable automatically. Why in Ruby does it have to be $offset but cannot be offset and still be global? If it is offset, then it is a local? But local to where, because it feels very much global.Are there better ways to write the code above? The use of $offset may seem a bit ugly at first.Update: I can put this offset inside a class definition, but what if two or several classes need to use this constant? In this case do I still need to define an $offset? <code>  $offset = Point.new(100, 200);def draw(point) pointNew = $offset + point; drawAbsolute(point)enddraw(Point.new(3, 4));",How do you use global variables or constant values in Ruby?
can I use expect on windows without installing cygwin?, Expect is a module used for spawning child applications and controlling them. I'm interested in Python and Ruby. <code> ,Can I use Expect on Windows without installing Cygwin?
How do I change the zone offset for a time in ruby?," I have a variable foo that contains a time, lets say 4pm today, but the zone offset is wrong, i.e. it is in the wrong time zone. How do I change the time zone?When I print it I get So there is no offset, and I would like to set the offset to -4 or Eastern Standard Time.I would expect to be able to just set the offset as a property of the Time object, but that doesn't seem to be available? <code>  Fri Jun 26 07:00:00 UTC 2009",How do I change the zone offset for a time in Ruby on Rails?
Send email from Ruby program using Exchange 2007 server," I am trying to send an email from a Ruby program. The smtp server is an Exchange 2007 server that requires me to login to send the email. When I run this I get the following error. I can't find anything in the Ruby api for Net::SMTP referencing TLS or a STARTTLS command.EDIT:Download smtp-tls.rb, the code doesn't change much but here is what I got to work. EDIT: Works with ruby 1.8.6 <code>  #!/usr/bin/rubyrequire 'rubygems'require 'net/smtp'msgstr = ""Test email.""smtp = Net::SMTP.start('smtp.server.com', 587, 'mail.server.com', 'username', 'password', :login) do |smtp| smtp.send_message msgstr, 'from@server.com', 'to@server.com'end /usr/lib/ruby/1.8/net/smtp.rb:948:in `check_auth_continue': 530 5.7.0 Must issue a STARTTLS command first (Net::SMTPAuthenticationError) from /usr/lib/ruby/1.8/net/smtp.rb:740:in `auth_login' from /usr/lib/ruby/1.8/net/smtp.rb:921:in `critical' from /usr/lib/ruby/1.8/net/smtp.rb:739:in `auth_login' from /usr/lib/ruby/1.8/net/smtp.rb:725:in `send' from /usr/lib/ruby/1.8/net/smtp.rb:725:in `authenticate' from /usr/lib/ruby/1.8/net/smtp.rb:566:in `do_start' from /usr/lib/ruby/1.8/net/smtp.rb:525:in `start' from /usr/lib/ruby/1.8/net/smtp.rb:463:in `start' #!/usr/bin/rubyrequire 'rubygems'require 'net/smtp'require 'smtp-tls'msgstr = <<MESSAGE_ENDFrom: me <me@test.com>To: you <you@test.com>Subject: e-mail testbody of emailMESSAGE_ENDsmtp = Net::SMTP.start('smtp.test.com', 587, 'test.com', 'username', 'passwd', :login) do |smtp| smtp.send_message msgstr, 'me@test.com', ['you@test.com']end",Send email from Ruby program with TLS
How to raise an ActiveRecord::Rollback exeception and return a value together?," I have a model that uses a acts_as_nested_set fork, and I've added a method to the model to save the model and move the node into the set in one transaction. This method calls a validation method to make sure the move is valid, which returns true or false. If the validation fails, I want my save method to raise ActiveRecord::Rollback to rollback the transaction, but also return false to the caller.My model looks like this: However, when I call save in a situation that would fail, the transaction is rolled back but the function returns nil: <code>  class Category < ActiveRecord::Base acts_as_nested_set :dependent => :destroy, :scope => :journal def save_with_place_in_set(parent_id) Category.transaction do return false if !save_without_place_in_set if !validate_move parent_id raise ActiveRecord::Rollback and return false else place_in_nested_set parent_id return true end end end alias_method_chain :save, :place_in_set def validate_move(parent_id) # return true or false if the move is valid # ... end def place_in_nested_set(parent_id) # place the node in the correct place in the set # ... endend >> c = Category.new(:name => ""test"") => #<Category id: nil, name: ""test"" parent_id: nil, lft: nil, rgt: nil>>> c.save_with_place_in_set 47=> nil>> c.errors.full_messages=> [""The specified parent is invalid""]",How to raise an ActiveRecord::Rollback exception and return a value together?
Can I document Ruby code using Doxygen?," Question: How can I document Ruby code using Doxygen?Disclaimer: I know ruby already has a system for documentation built in and there are probably other ways to do it as well, but the specific constraint I am operating under is how to get Doxygen to do the job (assuming it is possible).  <code> ",How to document Ruby code using Doxygen?
Identying last loop when using for each," I want to do something different with the last loop iteration when performing 'foreach' on an object. I'm using Ruby but the same goes for C#, Java etc. The output desired is equivalent to: The obvious workaround is to migrate the code to a for loop using 'for i in 1..list.length', but the for each solution feels more graceful. What is the most graceful way to code a special case during a loop? Can it be done with foreach? <code>  list = ['A','B','C'] list.each{|i| puts ""Looping: ""+i # if not last loop iteration puts ""Last one: ""+i # if last loop iteration } Looping: 'A' Looping: 'B' Last one: 'C'",Identifying last loop when using for each
gem install of mongrel," I initiated myself into rails development yesterday.I installed ruby 1.9.1, rubygems and rails.Running gem install mongrel worked fine and ostensibly installed mongrel too. I am slightly puzzled because:script/server starts webrick by defaultwhich mongrel returns nothinglocate mongrel returns lots of entries like Does look like I have mongrel installed (both the default installation and my custom install). So why doesn't which mongrel return something.Also trying to reinstall mongrel using gem install mongrel returns throws its own set of exceptions: <code>  /Developer/SDKs/MacOSX10.5.sdk/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.0.1/Developer/SDKs/MacOSX10.5.sdk/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/Developer/SDKs/MacOSX10.5.sdk/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.../usr/local/bin/mongrel_rails/usr/local/lib/ruby/gems/1.9.1/cache/mongrel-1.1.5.gem/usr/local/lib/ruby/gems/1.9.1/doc/actionpack-2.3.2/rdoc/files/lib/action_controller/vendor/rack-1_0/rack/handler/evented_mongrel_rb.html/usr/local/lib/ruby/gems/1.9.1/doc/actionpack-2.3.2/rdoc/files/lib/action_controller/vendor/rack-1_0/rack/handler/mongrel_rb.html/usr/local/lib/ruby/gems/1.9.1/doc/actionpack-2.3.2/rdoc/files/lib/action_controller/vendor/rack-1_0/rack/handler/swiftiplied_mongrel_rb.html/usr/local/lib/ruby/gems/1.9.1/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/handler/evented_mongrel.rb/usr/local/lib/ruby/gems/1.9.1/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/handler/mongrel.rb/usr/local/lib/ruby/gems/1.9.1/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/handler/swiftiplied_mongrel.rb/usr/local/lib/ruby/gems/1.9.1/gems/mongrel-1.1.5... Building native extensions. This could take a while...ERROR: Error installing mongrel: ERROR: Failed to build gem native extension./usr/local/bin/ruby extconf.rb install mongrelchecking for main() in -lc... yescreating Makefilemakegcc -I. -I/usr/local/include/ruby-1.9.1/i386-darwin9.7.0 -I/usr/local/include/ruby-1.9.1/ruby/backward -I/usr/local/include/ruby-1.9.1 -I. -D_XOPEN_SOURCE -D_DARWIN_C_SOURCE -fno-common -D_XOPEN_SOURCE=1 -O2 -g -Wall -Wno-parentheses -fno-common -pipe -fno-common -o http11.o -c http11.chttp11.c: In function 'http_field':http11.c:77: error: 'struct RString' has no member named 'ptr'http11.c:77: error: 'struct RString' has no member named 'len'http11.c:77: warning: left-hand operand of comma expression has no effecthttp11.c:77: warning: statement with no effecthttp11.c: In function 'header_done':http11.c:172: error: 'struct RString' has no member named 'ptr'http11.c:174: error: 'struct RString' has no member named 'ptr'http11.c:176: error: 'struct RString' has no member named 'ptr'http11.c:177: error: 'struct RString' has no member named 'len'http11.c: In function 'HttpParser_execute':http11.c:298: error: 'struct RString' has no member named 'ptr'http11.c:299: error: 'struct RString' has no member named 'len'make: *** [http11.o] Error 1",gem install mongrel fails with ruby 1.9.1
`gem install mongrel` fails with ruby 1.9.1," I initiated myself into rails development yesterday.I installed ruby 1.9.1, rubygems and rails.Running gem install mongrel worked fine and ostensibly installed mongrel too. I am slightly puzzled because:script/server starts webrick by defaultwhich mongrel returns nothinglocate mongrel returns lots of entries like Does look like I have mongrel installed (both the default installation and my custom install). So why doesn't which mongrel return something.Also trying to reinstall mongrel using gem install mongrel returns throws its own set of exceptions: <code>  /Developer/SDKs/MacOSX10.5.sdk/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.0.1/Developer/SDKs/MacOSX10.5.sdk/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/Developer/SDKs/MacOSX10.5.sdk/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8/gems/mongrel-1.0.1/lib/mongrel.../usr/local/bin/mongrel_rails/usr/local/lib/ruby/gems/1.9.1/cache/mongrel-1.1.5.gem/usr/local/lib/ruby/gems/1.9.1/doc/actionpack-2.3.2/rdoc/files/lib/action_controller/vendor/rack-1_0/rack/handler/evented_mongrel_rb.html/usr/local/lib/ruby/gems/1.9.1/doc/actionpack-2.3.2/rdoc/files/lib/action_controller/vendor/rack-1_0/rack/handler/mongrel_rb.html/usr/local/lib/ruby/gems/1.9.1/doc/actionpack-2.3.2/rdoc/files/lib/action_controller/vendor/rack-1_0/rack/handler/swiftiplied_mongrel_rb.html/usr/local/lib/ruby/gems/1.9.1/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/handler/evented_mongrel.rb/usr/local/lib/ruby/gems/1.9.1/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/handler/mongrel.rb/usr/local/lib/ruby/gems/1.9.1/gems/actionpack-2.3.2/lib/action_controller/vendor/rack-1.0/rack/handler/swiftiplied_mongrel.rb/usr/local/lib/ruby/gems/1.9.1/gems/mongrel-1.1.5... Building native extensions. This could take a while...ERROR: Error installing mongrel: ERROR: Failed to build gem native extension./usr/local/bin/ruby extconf.rb install mongrelchecking for main() in -lc... yescreating Makefilemakegcc -I. -I/usr/local/include/ruby-1.9.1/i386-darwin9.7.0 -I/usr/local/include/ruby-1.9.1/ruby/backward -I/usr/local/include/ruby-1.9.1 -I. -D_XOPEN_SOURCE -D_DARWIN_C_SOURCE -fno-common -D_XOPEN_SOURCE=1 -O2 -g -Wall -Wno-parentheses -fno-common -pipe -fno-common -o http11.o -c http11.chttp11.c: In function 'http_field':http11.c:77: error: 'struct RString' has no member named 'ptr'http11.c:77: error: 'struct RString' has no member named 'len'http11.c:77: warning: left-hand operand of comma expression has no effecthttp11.c:77: warning: statement with no effecthttp11.c: In function 'header_done':http11.c:172: error: 'struct RString' has no member named 'ptr'http11.c:174: error: 'struct RString' has no member named 'ptr'http11.c:176: error: 'struct RString' has no member named 'ptr'http11.c:177: error: 'struct RString' has no member named 'len'http11.c: In function 'HttpParser_execute':http11.c:298: error: 'struct RString' has no member named 'ptr'http11.c:299: error: 'struct RString' has no member named 'len'make: *** [http11.o] Error 1",gem install mongrel fails with ruby 1.9.1
How to download a picture using ruby , I want to download this picture using Ruby. How do I do that? I am using Mac OS. <code>  http://farm1.static.flickr.com/92/218926700_ecedc5fef7_o.jpg,How do I download a picture using Ruby?
How do I download a picture using ruby?, I want to download this picture using Ruby. How do I do that? I am using Mac OS. <code>  http://farm1.static.flickr.com/92/218926700_ecedc5fef7_o.jpg,How do I download a picture using Ruby?
Object deserialization in Ruby," In general, how can I get a reference to an object whose name I have in a string?More specifically, I have a list of the parameter names (the member variables - built dynamically so I can't refer to them directly).Each parameter is an object that also has an from_s method.I want to do something like the following (which of course doesn't work...): <code>  define_method(:from_s) do | arg | @ordered_parameter_names.each do | param | instance_eval ""field_ref = @#{param}"" field_ref.from_s(param) endend",Get the value of an instance variable given its name
Rails and XML," I have a function that outputs an XML string: I have a view called genxml.xml.erb, and a redirect to mysite.com:3000/genxml.xml.I need this because flex requires an XML file to be passed. However, what I get is: So, basically, Rails forces my XML string to be HTML.How do I generate a dynamic XML page using my string? Or, how do I turn my XML string into an XML page that is dynamically generated? I don't want to create static files, these files need to be generated on the fly because the data in the XML sets will be private information for each user. <code>  <expensesAC> <cashflow> <month>6</month> <cash>300</cash> <projected>null</projected> </cashflow> <cashflow> <month>6</month> <cash>300</cash> <projected>null</projected> </cashflow> <cashflow> <month>6</month> <cash>300</cash> <projected>null</projected> </cashflow></expensesAC> <body><expensesAC> <cashflow> <month>6</month> <cash>300</cash> <projected>null</projected> </cashflow></expensesAC> <cashflow> <month>6</month> <cash>300</cash> <projected>null</projected> </cashflow> <cashflow> <month>6</month> <cash>300</cash> <projected>null</projected> </cashflow></body>",How do I generate a dynamic XML page using Rails?
Ruby: obtaining number of block parameters," I need to obtain the number of parameters a given block takes. For example: This is possible in the 1.9 trunk, but not in any official release. I was hoping if there's any way to do this without having to download a separate gem/extension module. <code>  foobar(1,2,3) { |a, b, c|}def foobar(x, y, z, &block) # need to obtain number of arguments in block # which would be 3 in this exampleend",Obtaining number of block parameters
Is there a rails trick to adding commas to large numbers?," Is there a way to have rails print out a number with commas in it?For example, if I have a number 54000000.34, I can run <%= number.function %>, which would print out ""54,000,000.34"" thanks! <code> ",Rails: Is there a rails trick to adding commas to large numbers?
"(Ruby,Rails) How do I retrieve specific attributes of a relationship/collection?"," Is there a good way to retrieve all of a specific attribute from a relationship/collection? For instance, I want a list of all the names of a person's cars. Obviously I can't do the following:Person.Cars.Name(s)...but does something of that nature exist in ruby (or is there an ActiveRecord helper method) that handles that? Obviously I could iterate over all the cars and append to an array, but I'd like something a bit cleaner. Any ideas?Best. <code> ",How do I retrieve specific attributes of a relationship/collection?
link_to around some html ruby code," How do I wrap a link around view code? I can't figure out how to pass multiple lines with ruby code to a single link_to method. The result I am looking for is that you click the column and get the show page: <code>  <div class=""subcolumns""> <div class=""c25l""> <div class=""subcl""> <%= image_tag album.photo.media.url(:thumb), :class => ""image"" rescue nil %> </div> </div> <div class=""c75r""> <div class=""subcr""> <p><%= album.created_at %></p> <%= link_to h(album.title), album %> <p><%= album.created_at %></p> <p><%= album.photo_count %></p> </div> </div></div>",How do I wrap link_to around some html ruby code?
"Nicely formating output to console, specificing number of tabs"," I am generating a script that is outputting information to the console. The information is some kind of statistic with a value. So much like a hash.So one value's name may be 8 characters long and another is 3. when I am looping through outputting the information with two \t some of the columns aren't aligned correctly.So for example the output might be as such: I want all the values lined up correctly. Right now I am doing this: How could I say for long names, to only use one tab? Or is there another solution? <code>  long value name 14short 12little 13tiny 123421long name again 912421 puts ""#{value_name} - \t\t #{value}""","Nicely formatting output to console, specifying number of tabs"
method with same name and different parameters in Ruby," I have this code: vel is a Command2D class that has 3 attributes, is Comparable and defines + , basically is a convenient class for me to manage those 3 attributes, so I want to use it internally in my library (dont want to make them private, either give them weird names). But Ruby seems to keep only the last setVelocity even when the number of parameters is different. so when I call setVelocity with 3 parameters will say that I need to call that method with only one parameter.  <code>  def setVelocity (x, y, yaw) setVelocity (Command2d.new(x,y,yaw))enddef setVelocity (vel)......end ",method with same name and different parameters(Method Overloading) in Ruby
Installing Tuby 1.9.1 on Ubuntu?," I wonder about installing the latest version of Ruby on Ubuntu 9.04. Now I can run through the ./configure and make stuff fine, but what I wonder about: how to avoid conflicts with the packaging system? For example if some other package I install depends on Ruby, wouldn't the package manager install the (outdated) Ruby package and in the worst case overwrite my files?So I think I need some way to tell Ubuntu that Ruby is in fact already installed? <code> ",Installing Ruby 1.9.1 on Ubuntu?
Guids in Ruby," I have a problem that is really easily solved with GUIDs.In particular, for a password reset workflow, I would like to send a GUID token to a user's email and have them reset their password using the token. Since GUIDs are unique, this is pretty secure and saves me emailing people passwords, which is risky.I noticed there is one uuid gem @ rubyforge but it looks quite old, and it writes stuff to the file system.Does anyone know of any other gems that can create a globally unique identifier?I know I can just fall back to: But it does not really seem like a proper GUID ... <code>  (0..16).to_a.map{ |a| rand(16).to_s(16) }.join ",Generating GUIDs in Ruby
Generating Guids in Ruby," I have a problem that is really easily solved with GUIDs.In particular, for a password reset workflow, I would like to send a GUID token to a user's email and have them reset their password using the token. Since GUIDs are unique, this is pretty secure and saves me emailing people passwords, which is risky.I noticed there is one uuid gem @ rubyforge but it looks quite old, and it writes stuff to the file system.Does anyone know of any other gems that can create a globally unique identifier?I know I can just fall back to: But it does not really seem like a proper GUID ... <code>  (0..16).to_a.map{ |a| rand(16).to_s(16) }.join ",Generating GUIDs in Ruby
What is problem? when undefined method `bytesize' for #.," I'd like to store and update blogger labels to datastore in GAE.When I run that code, I get this error: The Code and run by cron job does '/job' Where is the problem? Please teach me.But when run cron job first time, label data was stored, even occur that error.Could not update data. <code>  javax.servlet.ServletContext log: Application Error/base/data/home/apps/yet-another-problem/1.334886515480009498/WEB-INF/gems/gems/sinatra-0.9.2/lib/sinatra/base.rb:45:in `each': undefined method `bytesize' for #<Hash:0x86684c> (NoMethodError) class Labels class LabelData include Bumble ds :blog_element_labels end def update response = URLFetch.get($label_url) result = response.to_s result_headless = result.gsub(""listLabels("",'') pure_result = result_headless.gsub("");"",'') json_to_yaml = YAML::load(pure_result)['entry']['category'] json_to_yaml.each do |label| @label = LabelData.find(:blog_element_labels => label['term']) @label = LabelData.create(:blog_element_labels => label['term']) if @label.nil? end endend get '/job' do @labels = Labels.new @labels.updateend",Undefined method `bytesize' for #<Hash>
solr santizing query," I am using solr with ruby on rails.It's all working well, I just need to know if there's any existing code to sanitize user input, like a query starting with ? or * <code> ",solr sanitizing query
What is the best way to get a temporary directory in Ruby on Rails?, What is the best way to get a temporary directory with nothing in it using Ruby on Rails? I need the API to be cross-platform compatible. The stdlib tmpdir won't work. <code> ,What is the best way to get an empty temporary directory in Ruby on Rails?
drop to irb prompt from ruby," Can I drop to an IRB prompt from a running Ruby script?I want to run a script, but then have it give me an IRB prompt at a point in the program with the current state of the program, but not just by running rdebug and having a breakpoint. <code> ",How do I drop to the IRB prompt from a running script?
initializing and incremening a variable in one line of code," Is this the DRYest way to do it in ruby? which initializes ""n"" to '1"" and increments it as the loop progresses (and prints it out) since this is in one my app's views <code>  <% for item in @items %> <%= n = n + 1 rescue n = 1 %><% end %>",initializing and incrementing a variable in one line of code
Nokogiri oddness?," Here's a sample of some oddness: Running this returns: Without the read returns XML, and with it is HTML? The web page is defined as ""XHTML transitional"", so at first I thought Nokogiri must have been reading OpenURI's ""content-type"" from the stream, but that returns 'text/html': which is what the server is returning. So, now I'm trying to figure out why Nokogiri is returning two different values. It doesn't appear to be parsing the text and using heuristics to determine whether the content is HTML or XML.The same thing is happening with the ATOM feed pointed to by that page: I need to be able to parse a page without knowing what it is in advance, either HTML or a feed (RSS or ATOM) and reliably determine which it is. I asked Nokogiri to parse the body of either a HTML or XML feed file, but I'm seeing those inconsistent results. I thought I could write some tests to determine the type but then I ran into xpaths not finding elements, but regular searches working: I figured xpaths would work with XML but the results don't look trustworthy either.These tests were all done on my Ubuntu box, but I've seen the same behavior on my Macbook Pro. I'd love to find out I'm doing something wrong, but I haven't seen an example for parsing and searching that gave me consistent results. Can anyone show me the error of my ways? <code>  #!/usr/bin/rubyrequire 'rubygems'require 'open-uri'require 'nokogiri'print ""without read: "", Nokogiri(open('http://weblog.rubyonrails.org/')).class, ""\n""print ""with read: "", Nokogiri(open('http://weblog.rubyonrails.org/').read).class, ""\n"" without read: Nokogiri::XML::Documentwith read: Nokogiri::HTML::Document (rdb:1) doc = open(('http://weblog.rubyonrails.org/'))(rdb:1) doc.content_type""text/html"" (rdb:1) doc = Nokogiri.parse(open('http://feeds.feedburner.com/RidingRails'))(rdb:1) doc.classNokogiri::XML::Document(rdb:1) doc = Nokogiri.parse(open('http://feeds.feedburner.com/RidingRails').read)(rdb:1) doc.classNokogiri::HTML::Document (rdb:1) doc = Nokogiri.parse(open('http://feeds.feedburner.com/RidingRails'))(rdb:1) doc.classNokogiri::XML::Document(rdb:1) doc.xpath('/feed/entry').length0(rdb:1) doc.search('feed entry').length15",How can I get Nokogiri to parse and return an XML document?
rails many to many table," I have two models, Users and Groups. Each group can have many users and each user can be in many groups.I currently have something simple like:User: Group: So I have a groups_users table which is just creating rows with group_id and user_id.I want to add another column to this, (which I have), the question is how do I access it from a model without using a custom SQL call? In the group model I can go self.users and in user I can go self.groupsIs there a way to change the third column in this table from a user model?Sorry if this is confusing, please advise on this <code>  has_many :groups has_many :users",Rails (ActiveRecord) many to many table
transform datetime into local time in Ruby on Rails," Right now I have:Time.strftime(""%I:%M%p"") which gives me the hr:min AM/PM format which I need. However it's coming back in UTC and I need it local time zone.How do I change it to local time zone and keep that same format for time? <code> ",transform time into local time in Ruby on Rails
Dynamic find condtions in active record, I have an index action in rails that can handle quite a few params eg: When finding users I would like to AND all the conditions that are not nil. This gives me 8 permutations of the find conditions. How can I can I keep my code DRY and flexible and not end up with a bunch of if statements just to build the conditions for the find. Keep in mind that if no conditions are specified I just want to return User.all  <code>  params[:first_name] # can be nil or first_nameparams[:age] # can be nil or age params[:country] # can be nil or country,Dynamic find conditions in active record
Ruby: Struct vs OpenStruct," In general, what are the advantages and disadvantages of using an OpenStruct as compared to a Struct? What type of general use-cases would fit each of these? <code> ",When should I use Struct vs. OpenStruct?
Is there a way in Ruby/Rails to execude code that is in a string?, So I have a database of different code samples (read snippets). The code samples are created by users. Is there a way in Rails to execute it?So for example I have the following code in my database (with id=123): Is there a way for me to execute it? Something like: So the result would be 'olleH' <code>  return @var.reverse @var = 'Hello'@result = exec(CodeSample.find(123)),Is there a way in Ruby/Rails to execute code that is in a string?
Clearing the test database between unit and functional tests in Rails," Recently I switched from fixtures to factory_girl to test my Ruby on Rails application. If I run rake test:units, to run the tests in my /units directory, they all run perfectly. The same is true if I run my functional tests (in my /functional directory) with rake test:functionals.However, if I simply run rake test, to run both my unit and functional tests together, my validation fails on the second group of tests (functional, in this case), with the message ""Validation failed: Name has already been taken.""I believe this is caused by the functional tests creating objects with the same parameters as the objects that were created in the unit tests -- leading me to believe that the test database isn't cleared in between the unit and functional tests. I use factory_girl's sequencing to have unique attributes for objects, which means that factory_girl is being reset between tests, while the database is not. What can I do to solve this problem? Is there a way to clear the database between my two test packages? <code> ",Clearing the test database between unit and functional tests in Rails (factory_girl)
What does map(&:name) mean in Ruby?, I found this code in a RailsCast: What does the (&:name) in map(&:name) mean? <code>  def tag_names @tag_names || tags.map(&:name).join(' ')end,What does &: (ampersand colon/pretzel colon) mean in Ruby?
IO.popen - how to wait for process to finish?, I'm using IO.popen in Ruby to run a series of command line commands in a loop. I then need to run another command outside of the loop. The command outside of the loop cannot run until all of the commands in the loop have terminated. How do I make the program wait for this to happen? At the moment the final command is running too soon.An example: So all cmd_foos need to return before another_cmd is run. <code>  for foo in bar IO.popen(cmd_foo)endIO.popen(another_cmd),How to wait for process to finish using IO.popen?
Access data warehouse-style tables with ActiveRecord?," As my Rails app matures, it's becoming increasingly apparent that it has a strong data warehouse flavour, lacking only a facts table to make everything explicit.On top of that, I just read Chapters 2 (Designing Beautiful APIs) and 3 (Mastering the Dynamic Toolkit) of Ruby Best Practices.Now I'm trying to figure out how best to design the fact-retrieving part...Say I have the following dimensions (existing Models in the app): Product (contains funds)FundMeasure (e.g. total holding, average holding, average exposure)... and a good old general-purpose Fact:Fact (date, value, plus a foreign-key NULLable column for each of my dimensions)Some aspects on which I'd be grateful to get some advice:What might constitute a flexible retrieval interface? What happens if I have Facts with both NULL (i.e. all, or don't care) and NOT NULL (specific) values for a dimension? A pseudo-value like :all? Or should some convention apply?How to select only a subset of dimension values? Or exclude a subset? :only and :exclude?Has anyone had experience with creating named_scopes to deal with this? There's the obvious attraction of being able to chain one for each dimension of interest, but does it get too clunky if we get to 7 or 8 dimensions?(I'm aware that an acts_as_fact plugin is reputed to exist in some form (at least, there was some small buzz at RailsConf 2006) but I couldn't find any code or description of how it might have worked.)Versions: Rails, ActiveRecord 2.1.2, Oracle Enhanced Adapter 1.2.0EDIT: I looked at ActiveWarehouse and have some reservations: - the main branch hasn't had a commit since Nov-08 and no there's activity at all since Jan-09; - the tutorial dates to 2006, is admitted to be out of date, and 404s on me; - it seems to be wanting to get away from ActiveRecord - much of my app will stay in AR and I think at present that I want an AR solution.So I'll steer clear of that one, thanks! <code> ",Talk to data warehouse-style tables with ActiveRecord?
how to i work with to different databases in rails with active records?, I need to use different database connections in different Rails models. Is there a not-so-hacky way to do that?Any links or search keywords would be great :) <code> ,How do i work with two different databases in rails with active records?
how do i work with to different databases in rails with active records?, I need to use different database connections in different Rails models. Is there a not-so-hacky way to do that?Any links or search keywords would be great :) <code> ,How do i work with two different databases in rails with active records?
Ruby equivalent of Perl's mdy() DateTime instance method?," In Perl you can do: What's the easiest way to do this in Ruby? <code>  my $current_time = DateTime->now();my $mdy = $current_time->mdy(""/"");",How do I format a date to mm/dd/yyyy in Ruby?
How do I get the data in mm/dd/yyyy form in Ruby?," In Perl you can do: What's the easiest way to do this in Ruby? <code>  my $current_time = DateTime->now();my $mdy = $current_time->mdy(""/"");",How do I format a date to mm/dd/yyyy in Ruby?
When to use a lambda in rails?," When should a lambda or proc be used? I have seen them described as anonymous functions, but I am struggling to understand this concept. I would appreciate any links to or examples of when you might use one in Ruby, but especially in Ruby on Rails. <code> ",When to use a lambda in Ruby on Rails?
Ruby gsub modifiers?," Where can I find the documentation on the modifiers for gsub? \a \b \c \1 \2 \3 %a %b %c $1 $2 %3 etc.?Specifically, I'm looking at this code... something.gsub(/%u/, unit) what's the %u? <code> ",Ruby gsub / regex modifiers?
What is the difference between Ruby and Ruby on rails?, I have been studying Ruby for the past few days and I have noticed there is Ruby on Rails. What is the difference between the two? Do they work together? Is the syntax the same? <code> ,What is the difference between Ruby and Ruby on Rails?
Ruby: How do I get the target of a symlink?," I have a string containing the file system path to an existing symlink. I want to get the path that this link points to.Basically I want the same that I'd get through this bit of hackery: but I want to do it without shelling out. <code>  s = ""path/to/existing/symlink""`ls -ld #{s}`.scan(/-> (.+)/).flatten.last",How do I get the target of a symlink?
A copy of ApplicationController has been removed from the module tree but is still active!," Whenever two concurrent HTTP requests go to my Rails app, the second always returns the following error: A copy of ApplicationController has been removed from the module tree but is still active!From there it gives an unhelpful stack trace to the effect of ""we went through the standard server stuff, ran your first before_filter on ApplicationController (and I checked; it's just whichever filter runs first)"", then offers the following: /home/matchu/rails/torch/vendor/rails/activesupport/lib/active_support/dependencies.rb:414:in `load_missing_constant' /home/matchu/rails/torch/vendor/rails/activesupport/lib/active_support/dependencies.rb:96:in `const_missing'which I'm assuming is a generic response and doesn't really say much.Google seems to tell me that people developing Rails Engines will encounter this, but I don't do that. All I've done is upgrade my Rails app from 2.2 (2.1?) to 2.3.What are some possible causes for this error, and how can I go about tracking down what's really going on? I know this question is vague, so would any other information be helpful?More importantly: I tried doing a test run in a ""production"" environment just now, and the error doesn't seem to persist. Does this only affect development, then, and need I not worry too much? <code> ",A copy of ApplicationController has been removed from the module tree but is still active
What is the difference between build and new on RAILS, Can anyone tell me what is the difference between build and new command on Rails? <code> ,What is the difference between build and new on Rails?
Ruby: Boolean attribute naming convention and use.," Learning ruby. I'm under the impression that boolean attributes should be named as follows: However, I get syntax errors when attempting to do the following: Apparently ruby is hating the ""?"". Is this the convention? What am I doing wrong? <code>  my_boolean_attribute? class MyClass attr_accessor :my_boolean_attribute? def initialize :my_boolean_attribute? = false endend",Ruby: Boolean attribute naming convention and use
Getting an ascii character code in ruby - ? fails," I'm in a situation where I need the ASCII value of a character (for Project Euler question #22, if you want to get specific) and I'm running into an issue.Being new to ruby, I googled it, and found that ? was the way to go: ?A or whatever. But when I incorporate it into my code, the result of that statement is the string ""A""no character code. Same issue with [0] and slice(0), both of which should theoretically return the ASCII code.The only thing I can think of is that this is a ruby version issue. I'm using 1.9.1-p0, having upgraded from 1.8.6 this afternoon. I cheated a little going from a working version of Ruby, in the same directory, I figured I probably already had the files that don't come bundled with the .zip file, so I didn't download them.So why exactly are all my ASCII codes being turned into actual characters? <code> ",Getting an ASCII character code in Ruby using `?` (question mark) fails
What is an EOFError in Ruby file !/O?," The official documentation doesn't specify. I understand EOFError means ""End of file error"", but what exactly does that mean? If a file reader reaches the end of a file, that doesn't sound like an error to me. <code> ",What is an EOFError in Ruby file I/O?
Ruby: Search file text for a pattern and replace it with a given value?," I'm looking for a script to search a file (or list of files) for a pattern and, if found, replace that pattern with a given value.Thoughts? <code> ",How to search file text for a pattern and replace it with a given value
Ruby: what does %w(array) mean?," I'm looking at the documentation for FileUtils. I'm confused by the following line: What does the %w mean? Can you point me to the documentation?  <code>  FileUtils.cp %w(cgi.rb complex.rb date.rb), '/usr/lib/ruby/1.6'",What does %w(array) mean?
Sort array returned by activerecord by date (or any other column), How can I sort an array returned by an ActiveRecord query by a created_at date column?This occurs once the query has been executed. Please don't tell me to do it in the query because I need this to happen in the view. <code> ,Sort array returned by ActiveRecord by date (or any other column)
Keep getting OAuth::Unauthorized error when using oauth and twitter.," I am using the ruby twitter gem and oauth to gain access to users twitter accounts. In my code, I have: where token and secret have my actual token and secret inserted. When I click on the link to the @twitter_auth_url, I am taken to twitter and asked to grant access. I click allow and then twitter redirects me to my callback URL http://www.mydomain.com/twitter_callback/?oauth_token=fmy2aMvnjVgaFrz37bJ4JuB8r5xN79gsgDQRG4BNY which then hits this code: The twitter request token and secret are being set just fine. However I end up with an authorization error: The code is failing at this line: when it tries to get an access token. You can see the source code of authorize_from_request here. I am not sure why this is happening. Anyone have ideas? <code>  unless @user.twitter_authd? oauth = Twitter::OAuth.new('token', 'secret') session[:twitter_request_token] = oauth.request_token.token session[:twitter_request_secret] = oauth.request_token.secret @twitter_auth_url = oauth.request_token.authorize_url end oauth = Twitter::OAuth.new('token', 'secret') logger.info(""session[:twitter_request_token] = #{session[:twitter_request_token]}"") logger.info(""session[:twitter_request_secret] = #{session[:twitter_request_secret]}"") oauth.authorize_from_request(session[:twitter_request_token], session[:twitter_request_secret]) session[:twitter_request_token] = nil session[:twitter_request_secret] = nil @user.update_attributes({ :twitter_token => oauth.access_token.token, :twitter_secret => oauth.access_token.secret, }) redirect_to root_path OAuth::Unauthorized in MainController#twitter_callback401 UnauthorizedRAILS_ROOT: /Users/TAmoyal/Desktop/RoR_Projects/mlsApplication Trace | Framework Trace | Full Trace/Library/Ruby/Gems/1.8/gems/oauth-0.3.4/lib/oauth/consumer.rb:167:in `token_request'/Library/Ruby/Gems/1.8/gems/oauth-0.3.4/lib/oauth/tokens/request_token.rb:14:in `get_access_token'/Library/Ruby/Gems/1.8/gems/erwaller-twitter-0.6.13.1/lib/twitter/oauth.rb:29:in `authorize_from_request'/Users/TAmoyal/Desktop/RoR_Projects/mls/app/controllers/main_controller.rb:70:in `twitter_callback' oauth.authorize_from_request(session[:twitter_request_token], session[:twitter_request_secret])",Keep getting OAuth::Unauthorized error when using oauth and twitter ruby gems
Advantage of JAVA over Ruby/JRuby," I am learning Java.I have learned and used Ruby. The Ruby books always tell the advantages of Ruby over Java. But there must be some advantages, that's why lots of people (especially companies) use Java and not Ruby.Please tell the absolute(not philosophical!) advantages of Java over Ruby. <code> ",Advantages of Java over Ruby/JRuby
Advantage of Java over Ruby/JRuby," I am learning Java.I have learned and used Ruby. The Ruby books always tell the advantages of Ruby over Java. But there must be some advantages, that's why lots of people (especially companies) use Java and not Ruby.Please tell the absolute(not philosophical!) advantages of Java over Ruby. <code> ",Advantages of Java over Ruby/JRuby
Advantage of Java over Ruby/JRuby," I am learning Java.I have learned and used Ruby. The Ruby books always tell the advantages of Ruby over Java. But there must be some advantages, that's why lots of people (especially companies) use Java and not Ruby.Please tell the absolute(not philosophical!) advantages of Java over Ruby. <code> ",Advantages of Java over Ruby/JRuby
How do I tell what modules have been mixed into a class?, I have a class that has a number of modules that are mixed in with it based on some runtime criteria.I want to be able to get a list of which modules have been mixed into this class. How can you do that?UPDATESo when I said class I meant object as it is the object that is being extended at runtime using: obj.included_modules and obj.ancestors don't exist so you can't get the modules that have been mixed in from there. <code>  obj.extend(MyModule),How do I tell which modules have been mixed into a class?
How do you convience your manager that your project needs a huge refactoring?," I have joined a rails project as a contractor. The project has been going for more than a year. The code is written by about 10 different developers and most of them are contractors as well. They have different code style. Some of them came from Java. The code has horrible scores with metric_fu. Many functions are very long (100 - 300 lines). Some functions have insane amount of logical branches, loops, and recursions. Each request generates a ton of sql queries. Performance is very bad. Many obsolete code that are never used but never got the chance to be cleaned up. The core architecture is plain wrong or over engineered. Code coverage is only about 25%. Views and partials are chaotic and terrible to read and understand.The manager is in a position trying to satisfy the CEO by continuously adding new features, however newer features are increasingly hard to get implemented correctly without breaking something else. He knows the code is bad, but doesn't want to put too much effort in fixing them as refactoring will take too long.As a contractor / developer, what is a good way to clear this situation and convenience the Manager or CEO to partition some time for refactoring? Related QuestionsHow can I convince skeptical management and colleagues to allow refactoring of awful code?How to refactor on a budgetDealing with illogical managers <code> ",How do you convince your manager that your project needs a huge refactoring?
"split("","")  not working in ruby"," String isex=""test1, test2, test3, test4, test5""when I use it returns Now I want to get the remaining items, i.e. `""test2, test3, test4, test5"". If I use it returns only How to get all the remaining items skipping first one? <code>  ex.split("","").first ""test1"" ex.split("","").last ""test5""",How to split a string in Ruby and get all items except the first one?
How to use String#split() in Ruby?," String isex=""test1, test2, test3, test4, test5""when I use it returns Now I want to get the remaining items, i.e. `""test2, test3, test4, test5"". If I use it returns only How to get all the remaining items skipping first one? <code>  ex.split("","").first ""test1"" ex.split("","").last ""test5""",How to split a string in Ruby and get all items except the first one?
How do I get the contents of an http request in Ruby," In PHP I can do this: How would I do the same thing in Ruby (or some Rails method?)I've been googling for a half an hour and coming up completely short. <code>  $request = ""http://www.example.com/someData"";$response = file_get_contents($request);",How do I get the contents of an http request in Ruby?
Sudo gem update --dry-run ???," Is there a way to make RubyGems tell if there are any updates available? I find myself constantly running sudo gem update -- often several times every day. If I could run the command with a flag like --dry-run, then I could asses if the changed gems were significant to add (and also only run it when my tests on my current project were green.Any suggestions? <code> ",Sudo gem update --dry-run?
Average from a Ruby Array ," How would get find an average from an array?If I have the array: Averaging would give me 3.375. <code>  [0,4,8,2,5,0,2,6]",How do I create an average from a Ruby array?
Are there any good tutorials/help sites for cucumber.vim? ," I've loaded the cucumber.vim files into ftplugin and the other directories per instructions, but I don't understand the ftplugin syntax enough to figure out how to get the full benefits.From what I can tell, the plugin is supposed to be able to jump between step definitions and feature files, but I can't figure out what's wrong with my mapping. It looks as if the mapping is supposed to be the usual ctag map Ctrl+], but that's not working.Any ideas how to make those mappings work?Here's a link to the plugin:http://github.com/tpope/vim-cucumber/tree/masterCheerio! <code> ",How does one use Tim Pope's cucumber.vim plugin for vim?
"How do you read the vim ftplugin files, are there any good tutorials?"," I've loaded the cucumber.vim files into ftplugin and the other directories per instructions, but I don't understand the ftplugin syntax enough to figure out how to get the full benefits.From what I can tell, the plugin is supposed to be able to jump between step definitions and feature files, but I can't figure out what's wrong with my mapping. It looks as if the mapping is supposed to be the usual ctag map Ctrl+], but that's not working.Any ideas how to make those mappings work?Here's a link to the plugin:http://github.com/tpope/vim-cucumber/tree/masterCheerio! <code> ",How does one use Tim Pope's cucumber.vim plugin for vim?
Ruby question mark, What is the purpose of the question mark operator in Ruby?Sometimes it appears like this: sometimes it's in an if construct. <code>  assert !product.valid?,What does the question mark at the end of a method name mean in Ruby?
Ruby question mark usage, What is the purpose of the question mark operator in Ruby?Sometimes it appears like this: sometimes it's in an if construct. <code>  assert !product.valid?,What does the question mark at the end of a method name mean in Ruby?
What does the question mark operator mean in Ruby?, What is the purpose of the question mark operator in Ruby?Sometimes it appears like this: sometimes it's in an if construct. <code>  assert !product.valid?,What does the question mark at the end of a method name mean in Ruby?
Round a ruby integer up to the nearest 0.05, I'm getting numbers like How would I get Ruby to round these numbers up (or down) to the nearest 0.05? <code>  2.363636363636364.5675631.23456646544846510.5857447736,Round a ruby float up or down to the nearest 0.05
Round a ruby integer up or down to the nearest 0.05, I'm getting numbers like How would I get Ruby to round these numbers up (or down) to the nearest 0.05? <code>  2.363636363636364.5675631.23456646544846510.5857447736,Round a ruby float up or down to the nearest 0.05
How do I create a reusable block/proc/lamda in Ruby?," I want to create a filter, and be able to apply it to an array or hash. For example: The I want to be able to use it like so: This seems like it should be straight forward, but I can't figure out what I need to do it get it to work. <code>  def isodd(i) i % 2 == 1end x = [1,2,3,4]puts x.select(isodd)x.delete_if(isodd)puts x",How do I create a reusable block/proc/lambda in Ruby?
Why do Ruby developers not use UML?, I always hear about UML being used in Java projects but never in Ruby ones. Is this just a cultural difference or is there less of a need for modeling in Ruby development because it's part of a more 'agile' culture? <code> ,Why do Ruby developers appear not to use UML?
Rails Rake: How to pass in arguments to a task with :environment," I am able to pass in arguments as follows: I am also able to load the current environment for a Rails application What I would like to do is be able to have variables and environment But that is not a valid task call. Does anyone know how I can achieve this? <code>  desc ""Testing args""task: :hello, :user, :message do |t, args| args.with_defaults(:message => ""Thanks for logging on"") puts ""Hello #{args[:user]}. #{:message}""end desc ""Testing environment""task: :hello => :environment do puts ""Hello #{User.first.name}.""end desc ""Testing environment and variables""task: :hello => :environment, :message do |t, args| args.with_defaults(:message => ""Thanks for logging on"") puts ""Hello #{User.first.name}. #{:message}""end",How to pass arguments into a Rake task with environment in Rails?
datamapper mulifield unique index," In Datamapper, how would one specify the the combination of two fields must be unique. For example categories must have unique names within a domain: <code>  class Category include DataMapper.resource property :name, String, :index=>true #must be unique for a given domain belongs_to :domainend",datamapper multi-field unique index
Does ruby have the ability to split a directory string?," In ruby, I'm able to do and get but now I'd like to split up that directory string into the individual folder components, ie something like Is there a way to do that other than using  <code>  File.dirname(""/home/gumby/bigproject/now_with_bugs_fixed/32/FOO_BAR_2096.results"") ""/home/gumby/bigproject/now_with_bugs_fixed/32"" [""home"", ""gumby"", ""bigproject"", ""now_with_bugs_fixed"", ""32""] directory.split(""/"")[1:-1]",How to split a directory string in Ruby?
What is the Algorithm that SO Uses to Diff the Two Strings in the Version Page?," I'm trying to diff two strings by phrase, similar to the way that StackOverflow diffs the two strings on the version edits page. What would be an algorithm to do this? Are there gems, or other standard libraries that accomplish this?EDIT: I've seen other diffing algorithms (Differ with Ruby) and they seem to result in the following: Note how the words are diffed on a per word basis? I'd like some way of diffing more by phrase, so the above code output: Am I hoping for too much? <code>  >> o = 'now is the time when all good men.'>> p = 'now some time the men time when all good men.'>> Differ.diff_by_word(o,p).format_as(:html)=> ""now <del class=\""differ\"">some</del><ins class=\""differ\"">is</ins> <del class=\""differ\"">time </del>the <del class=\""differ\"">men </del>time when all good men."" => ""now <del class=\""differ\"">some time the men</del><ins class=\""differ\"">is the</ins> time when all good men.""",What is an Algorithm to Diff the Two Strings in the Same Way that SO Does on the Version Page?
How to render all records from an nested set into a real html tree," I'm using the awesome_nested_set plugin in my Rails project. I have two models that look like this (simplified): The tree in the database is constructed as expected. All the values of parent_id, lft and rgt are correct. The tree has multiple root nodes (which is of course allowed in awesome_nested_set).Now, I want to render all categories of a given customer in a correctly sorted tree like structure: for example nested <ul> tags. This wouldn't be too difficult but I need it to be efficient (the less sql queries the better).Update: Figured out that it is possible to calculate the number of children for any given Node in the tree without further SQL queries: number_of_children = (node.rgt - node.lft - 1)/2. This doesn't solve the problem but it may prove to be helpful. <code>  class Customer < ActiveRecord::Base has_many :categoriesendclass Category < ActiveRecord::Base belongs_to :customer # Columns in the categories table: lft, rgt and parent_id acts_as_nested_set :scope => :customer_id validates_presence_of :name # Further validations...end",How to render all records from a nested set into a real html tree
How do you call a method from the view in raiis?," Let's say I did this:script/generate controller homeAnd in the home controller made a the method.. How would I call that method in the index.html.erb?When learning ruby it just said to run the whatever.rb in the terminalto run what ever code you wrote within that file. Just curious on howthat would work with rails. <code>  def say puts ""You are here""end",How do you call a method from the view in rails?
conditional statement and assigning value in ruby," Why does the last statement (with ""if (tmp2 = foo)"" at the end of the statement) fail? <code>  def foo;5;end# this one worksif (tmp = foo) puts tmp.to_send# why this one failsputs tmp2.to_s if (tmp2 = foo) #=> undefined local variable or method tmp2 for main:Object","Why does conditional statement and assigning value in ruby fails if the ""if"" statement is at end of clause?"
How to make --no-ri --no-rdoc default for gem install?," I don't use the RI or RDoc output from the gems I install in my machine or in the servers I handle (I use other means of documentation).Every gem I install installs RI and RDoc documentation by default, because I forget to set --no-ri --no-rdoc.Is there a way to make those two flags the default? <code> ",How to make --no-ri --no-rdoc the default for gem install?
How to enable auto compleation in Ruby's IRB," When I use Merb's built in console, I get tab auto-completion similar to a standard bash prompt. I find this useful and would like to enable it in non-merb IRB sessions. How do I get auto-completion in IRB?  <code> ",How to enable auto completion in Ruby's IRB
Rendering HAML partials from within HAMLoutside of Rails," I'm using HAML to generate some static html pages for a site, and I was wanting to split out common components into partials that I can include in multiple pages, just like in Rails. However I don't want to use the whole Rails stack to do this as it seems like overkill.I've looked around on the Internet but haven't found anything, better than just doing something like: Is there a nicer way of including so-called partials from within HAML? An existing filter or command that I'm missing? <code>  Haml::Engine.new(IO.read(""header.haml"")).render",Rendering HAML partials from within HAML outside of Rails
Thread.exclusive in Ruby and threading model in Rails controllers," Are Rails controllers multithreaded? If so, can I protect a certain piece of code (which fires only once every ten minutes) from being run from multiple threads by simply doing on do I need to somehow synchronize on a monitor? <code>  require 'thread'Thread.exclusive do # stuff hereend",Are rails controllers multithreaded? Thread.exclusive in controllers
What does the operator ||= stands for in ruby?," Possible Duplicate: What does ||= (or equals) mean in Ruby? It's hard to search this in Google because it is a symbol, not text. What does ||= stand for? And how does it work? <code> ",What does the operator ||= stand for in Ruby?
How to set file programmatically using Paperclip," I have a rake task to seed an application with random data using the faker gem. However, we also have images (like logos) that we want uploaded in this rake task.We already have Paperclip set up, but don't have a way to upload them programmatically in a rake task. Any ideas? <code> ",How to set a file upload programmatically using Paperclip
"how to calculate next, previous business day in rails", How to calculate next and previous business days in Rails? <code> ,"How to calculate next, previous business day in Rails?"
what are the advantages of mocha over rspec's built in mocking framework?," I notice that a lot of people prefer Mocha over RSpec's built in mocking framework. Can someone explain the advantages of Mocha, or any alternative, over RSpec's built in a mocking framework? <code> ",What are the advantages of Mocha over RSpec's built in mocking framework?
Calling a Function From a String With the Function's Name in Ruby," How can I do what they are talking about here, but in Ruby?How would you do the function on an object? and how would you do a global function (see jetxee's answer on the post mentioned)?EXAMPLE CODE: UPDATE:How do you get to the global methods? or my global functions?I tried this additional line and load and row_change where not listed.  <code>  event_name = ""load""def load() puts ""load() function was executed.""enddef row_changed() puts ""row_changed() function was executed.""end #something here to see that event_name = ""load"" and run load() puts methods",Calling a Method From a String With the Method's Name in Ruby
Which Ruby classes support .clone ?," Ruby defines #clone in Object.To my suprise, some classes raise Exceptions when calling it.I found NilClass, TrueClass, FalseClass, Fixnum having this behaviour.1) Does a complete list of classes (at least core-classes) exist, which do not allow #clone ?Or is there a way to detect if a specific class supports #clone ?2) What is wrong with 42.clone ? <code> ",Which Ruby classes support .clone?
is there a .NET framework similar to Ruby's Sinatra?," Does anyone know if there is a .NET library/API similar to Ruby's Sinatra?Just wondering since with the new Routing API in ASP.NET MVC, WCF and .NET 3.5, it seems like a possibility. UPDATED: Best answer link is stale so check out Nancy @ https://github.com/NancyFx/Nancy <code> ",Is there a .NET framework similar to Ruby's Sinatra?
Using will_paginate without :total_entires to improve a lengthy query," I have a current implementation of will_paginate that uses the paginate_by_sql method to build the collection to be paginated. We have a custom query for total_entries that's very complicated and puts a large load on our DB. Therefore we would like to cut total_entries from the pagination altogether. In other words, instead of the typical pagination display of 'previous 1 [2] 3 4 5 next', we would simply like a 'next - previous' button only. But we need to know a few things.Do we display the previous link? This would only occur of course if records existing prior to the ones displayed in the current selectionDo we display the next link? This would not be displayed if the last record in the collection is being displayedFrom the docs A query for counting rows will automatically be generated if you dont supply :total_entries. If you experience problems with this generated SQL, you might want to perform the count manually in your application.So ultimately the ideal situation is the following.Remove the total_entries count because it's causing too much load on the databaseDisplay 50 records at a time with semi-pagination using only next/previous buttons to navigate and not needing to display all page numbers availableOnly display the next button and previous button accordinglyHas anyone worked with a similar issue or have thoughts on a resolution? <code> ",Using will_paginate without :total_entries to improve a lengthy query
"string formatting, remove trailing chars"," I have a string like this: 00:11:40 or 00:02:40 how do I formated so that I can always get rid of the leading zero(s) and colon(s), so it looks like this 11:40 or 2:40 <code> ","string formatting, remove leading chars"
"Is there any wisdom behide ""and"", ""or"" operator in Ruby ?"," I wonder why ruby give and, or less precedence than &&, || , and assign operator? Is there any reason? <code> ","Is there any wisdom behind ""and"", ""or"" operators in Ruby ?"
Is it a big deal that Git replaced all of my LF with CRLF when I added the Ruby files and Gems to my project?," I just ran a on my first git project.I got back about a thousand responses: ""warning: LF will be replaced by CRLF""as it went through each file (Ruby files, some are gems). I deleted my .git directory and tried to disable this default setting by typing this command: Then I tried to add the files again: But I got the same result. Help! <code>  git add -A git config core.autocrlf false git add -A",Git replaced all of my LF with CRLF - How do I fix this?
Git replaced all of my LF with CRLF - How do I undo?," I just ran a on my first git project.I got back about a thousand responses: ""warning: LF will be replaced by CRLF""as it went through each file (Ruby files, some are gems). I deleted my .git directory and tried to disable this default setting by typing this command: Then I tried to add the files again: But I got the same result. Help! <code>  git add -A git config core.autocrlf false git add -A",Git replaced all of my LF with CRLF - How do I fix this?
Nokogiri: How to select nodes by matching text?," If I have a bunch of elements like: Is there a built-in method in Nokogiri that would get me all p elements that contain the text ""Apple""? (The example element above would match, for instance). <code>  <p>A paragraph <ul><li>Item 1</li><li>Apple</li><li>Orange</li></ul></p>",How to select nodes by matching text
Cumulative sum in Ruby," What is the slickest, most Ruby-like way of calculating the cumulative sum of an array?Example: should return <code>  [1,2,3,4].cumulative_sum [1,3,6,10]",Cumulative array sum in Ruby
What is the equivalent of Java CLASSPATH in Ruby ?, I would like to run ruby programs from anywhere.I think I have understood it is RUBYLIB. But I can't make it work. Could you give examples ? <code> ,What is the equivalent of Java CLASSPATH in Ruby?
Why does Ruby on Rails use http://0.0.0.0:3000 instead of http://localhost:3000 ?," I am very new to Ruby on Rails so when I tried to follow the official ""Getting Started"" ruby on rails tutorial, I was a bit disappointed because it went wrong very quickly. Basically it said :navigate to http://localhost:3000. You should see Rails default information page.But when I follow the instructions, I get After trying both addresses, I know that they point to the same thing, but can someone explain to me why Ruby on Rails uses http://0.0.0.0:3000 instead of http://localhost:3000?Is there a way to always have the WEBrick server use localhost? <code>  => Rails 2.3.4 application starting on http://0.0.0.0:3000",Why does Ruby on Rails use http://0.0.0.0:3000 instead of http://localhost:3000?
Limited matricies in Ruby," How come the Matrix class has no methods to edit its vectors and components? It seems like everything inside a matrix can be read but not written. Am I mistaken? Is there some third-party elegant Matrix-like class that would allow me to delete rows and intentionally edit them?Please, notify me if there is no such class I will stop searching. <code> ",Limited matrices in Ruby
Ruby: Shortest/most idiomatic way of determining whether a variable is any one of a list of values," This seems a ridiculously simple question to be asking, but what's the shortest/most idiomatic way of rewriting this in Ruby? I saw this solution: but this isn't always functionally equivalent - I believe Array#include? actually looks to see if the variable object is contained in the list; it doesn't take into account that the object may implement its own equality test with def ==(other).As observed by helpful commentators below, that explanation isn't correct. include? does use == but it uses the == method of the items in the array. In my example, it's the symbols, rather than the == method of the variable. That explains why it's not equivalent to my first code example.(Take, for example, Rails' Mime::Type implementation: request.format == :html may return true, but [:html].include?(request.format) will return false, as request.format is an instance of Mime::Type, not a symbol.)The best I have so far is: but it seems somewhat cumbersome to me. Does anyone have better suggestions? <code>  if variable == :a or variable == :b or variable == :c or variable == :d # etc. if [:a, :b, :c, :d].include? variable if [:a, :b, :c, :d].select {|f| variable == f}.any?",What is the shortest/most idiomatic way of determining whether a variable is any one of a list of values?
Colorized Ruby output," Using Ruby, how can I perform background and foreground text colorization for output in the terminal?I remember, when programming Pascal we all used to write our own textcolor() procedures to make our small educational programs look more pretty and presentational.How would I go about coding an equivalent of that in Ruby? Is there any built-in support in the core library that lends itself to this? If not, what would be an idiomatic way to add it? <code> ",How can I use Ruby to colorize the text output to a terminal?
Colorized Ruby output to the terminal," Using Ruby, how can I perform background and foreground text colorization for output in the terminal?I remember, when programming Pascal we all used to write our own textcolor() procedures to make our small educational programs look more pretty and presentational.How would I go about coding an equivalent of that in Ruby? Is there any built-in support in the core library that lends itself to this? If not, what would be an idiomatic way to add it? <code> ",How can I use Ruby to colorize the text output to a terminal?
Rake: How to specify that a task has multiple dependencies?," I would like to specify that::output_core depends on :build_core:build_extension depends on :build_core:output_extension depends on both :build_extension and :output_core.How would I specify that last one? That in order to run the :output_extensions task, both :build_extensions and :output_core must be completed? <code> ",Specifying that a task has multiple dependencies
Operators as method parameters in C# and the thrush combinator," I don't think it's possible to use operators as a parameters to methods in C# 3.0 but is there a way to emulate that or some syntactic sugar that makes it seem like that's what's going on?I ask because I recently implemented the thrush combinator in C# but while translating Raganwald's Ruby example Which reads ""Take the numbers from 1 to 100, keep the odd ones, take the sum of those, and then answer the square of that number.""I fell short on the Symbol#to_proc stuff. That's the &: in the select(&:odd?) and the inject(&:+) above. <code>  (1..100).select(&:odd?).inject(&:+).into { |x| x * x }",Operators as method parameters in C#
How does one use rescue in Rails without the begin and end block., I know of the standard technique of having a begin rescue endHow does one just use the rescue block on its own.How does it work and how does it know which code is being monitored? <code> ,How does one use rescue in Ruby without the begin and end block
Testing modules in rspec, What are the best practices on testing modules in RSpec? I have some modules that get included in few models and for now I simply have duplicate tests for each model (with few differences). Is there a way to DRY it up? <code> ,Testing modules in RSpec
How can I ouput leading zeros in Ruby?," I'm outputting a set of numbered files from a Ruby script. The numbers come from incrementing a counter, but to make them sort nicely in the directory, I'd like to use leading zeros in the filenames. In other words file_001...instead of file_1Is there a simple way to add leading zeros when converting a number to a string? (I know I can do ""if less than 10.... if less than 100""). <code> ",How can I output leading zeros in Ruby?
combination of a two array (ruby)," What is the Ruby way to achieve following? I want an array:  <code>  a = [1,2]b = [3,4] => [f(1,3) ,f(1,4) , f(2,3) ,f(2,4)]",Combination of two arrays in Ruby
"Building multi-line strings, programatically, in Ruby"," Here's something I often do when programming: Is there some better way than having << ""\n"" or + ""\n"" on every line? This seems quite inefficient.I'm interested in Ruby solutions, in particular. I'm thinking something like <code>  code = ''code << ""next line of code #{something}"" << ""\n""code << ""another line #{some_included_expression}"" << ""\n"" code = string.multiline do ""next line of code #{something}"" ""another line #{some_included_expression}""end","Building multi-line strings, programmatically, in Ruby"
The Rails record method. What does this do, I came across this method called record that Ryan bates uses in his authlogic Railscast and can't seem to understand what it does. I have been through the documentation but I can't seem to follow how that helper is useful. What I want to know is does this simply fetch the record from the database and why is it different from the standard way of fetching data from the database.Thank you. <code>  def current_user return @current_user if defined?(@current_user) current_user_session && current_user_session.recordend,The Authlogic record method. What does this do
Is a Ruby DSL better refered to as a Modern API design, What are some defining characteristics of a Ruby DSL that separate it from just a regular API?  <code> ,What separates a Ruby DSL from an ordinary API
What seperates a Ruby DSL from an ordinary API, What are some defining characteristics of a Ruby DSL that separate it from just a regular API?  <code> ,What separates a Ruby DSL from an ordinary API
Ruby: delete multiple hash keys," I often find myself writing this: The trail of deletes doesn't feel right and neither does: Is there anything simpler and cleaner? <code>  params.delete(:controller) params.delete(:action) params.delete(:other_key) redirect_to my_path(params) [:controller, :action, :other_key].each do |k| params.delete(k)end",Ruby on Rails: Delete multiple hash keys
how to specifiy Daemons log and pid directories," Using Daemons, how do I specify that my script's log goes in /log/ and its pid goes in /tmp/pids/?I've read the docs, and I see :dir/:dir_mode, but I can only make it do one or the other, not both -- seems like a really bad set of options if you ask me. <code> ",How to specify daemon's log and pid directories?
Easy way to determine leap year in ruby ?, Is there an easy way to determine if a year is a leap year? <code> ,Easy way to determine leap year in ruby?
Access to current_user from within a model in Ruby on Rails," I need to implement fine-grained access control in a Ruby on Rails app. The permissions for individual users are saved in a database table and I thought that it would be best to let the respective resource (i.e. the instance of a model) decide whether a certain user is allowed to read from or write to it. Making this decision in the controller each time certainly wouldnt be very DRY.The problem is that in order to do this, the model needs access to the current user, to call something like may_read?(current_user, attribute_name). Models in general do not have access to session data, though. There are quite some suggestions to save a reference to the current user in the current thread, e.g. in this blog post. This would certainly solve the problem. Neighboring Google results advised me to save a reference to the current user in the User class though, which I guess was thought up by someone whose application does not have to accommodate a lot of users at once. ;)Long story short, I get the feeling that my wish to access the current user (i.e. session data) from within a model comes from me doing it wrong.Can you tell me how Im wrong? <code> ",Rails: Access to current_user from within a model in Ruby on Rails
differences between ruby file access mode r+ and w+," When using files in Ruby, what is the difference between the r+ and w+ modes? What about the a+ mode? <code> ","Difference between the access modes of the `File` object (ie. w+, r+)"
How to find last occurence of a number in a string using Ruby?," Using Ruby... given the following string: How do I remove all text after the last number/digit?I thought the easiest way to do this might be by finding the index of last occurrence and then removing everything after that index. However, I can't seem to figure out how to obtain that index. All my attempts at using regex have failed. <code>  x = ""blah_blah.do.dah[4543]junk_junk""",How to find last occurrence of a number in a string using Ruby?
ruby 1.9 ri problem," I'm using Windows XP SP2, and installed Ruby through Ruby 1.9 one click installer. Then when I try to using ri, I get the following response, can anyone help me with my problem? By the way, when I try to use gem, I got the following error messages too, anyone can explain it? <code>  C:\Documents and Settings\eyang>ruby --versionruby 1.9.1p243 (2009-07-16 revision 24175) [i386-mingw32]C:\Documents and Settings\eyang>ri --versionri 2.2.2C:\Documents and Settings\eyang>ri StringUpdating class cache with 0 classes...Nothing known about StringC:\Documents and Settings\eyang>riUpdating class cache with 0 classes...No ri data foundIf you've installed Ruby yourself, you need to generate documentation using: make install-docfrom the same place you ran `make` to build ruby.If you installed Ruby from a packaging system, then you may need toinstall an additional package, or ask the packager to enable ri generation.C:\Documents and Settings\eyang> C:\Documents and Settings\eyang>gem --version1.3.5C:\Documents and Settings\eyang>gem query --remote*** REMOTE GEMS ***ERROR: While executing gem ... (Errno::ENOMEM) Not enough space - <STDOUT>C:\Documents and Settings\eyang>",ruby 1.9 ri on Windows knows nothing about any classes
How to encode/decode html entities in ruby," I am trying to decode some HTML entities, such as '&amp;lt;' becoming '<'.I have an old gem (html_helpers) but it seems to have been abandoned twice.Any recommendations? I will need to use it in a model. <code> ",How do I encode/decode HTML entities in Ruby?
Odd ( or even ) entries in a Ruby array," Is there a quick way to get every other entry in an Array in Ruby? Either the odd or even entries values with 0 included in the odd. I'd like to be able to use it like this: or for exampleUpdateThis give exactly what I'm after but I'm sure there is a shorter version. <code>  array1 += array2.odd_values puts array2.odd_values.join(""-"") array1.each_with_index do |item,index| if (index %2 ==0) then array2.push(item) endend",Odd (or even) entries in a Ruby Array
Odd ( or even ) entries in a Ruby Array," Is there a quick way to get every other entry in an Array in Ruby? Either the odd or even entries values with 0 included in the odd. I'd like to be able to use it like this: or for exampleUpdateThis give exactly what I'm after but I'm sure there is a shorter version. <code>  array1 += array2.odd_values puts array2.odd_values.join(""-"") array1.each_with_index do |item,index| if (index %2 ==0) then array2.push(item) endend",Odd (or even) entries in a Ruby Array
What does the syntax ?. mean in this Ruby example? ," I am learning Ruby and found this code sample in some documentation: The purpose is to sum up the file sizes of all files in a tree, excluding directories that start with a dot. The line if File.basename(path)[0] == ?. is obviously performing the directory name test. I would have written it like this: What does ?. do? (Could be a typo, I suppose.) I have not seen this syntax described elsewhere. <code>  require 'find' total_size = 0 Find.find(ENV[""HOME""]) do |path| if FileTest.directory?(path) if File.basename(path)[0] == ?. Find.prune # Don't look any further into this directory. else next end else total_size += FileTest.size(path) end end if File.basename(path)[0] == "".""",What does the syntax ?. mean in this Ruby example?
Ge the most recent date from a list - Ruby, I have an array of Ruby Date objects. How can I find the newest datetime and the oldest datetime? <code> ,Get the newest and oldest date from a list - Ruby
Turninng a Hash of Arrays into an Array of Hashs in Ruby," We have the following datastructures: And I want to turn that into And then back into the first form. Anybody with a nice looking implementation? <code>  {:a => [""val1"", ""val2""], :b => [""valb1"", ""valb2""], ...} [{:a => ""val1"", :b => ""valb1""}, {:a => ""val2"", :b => ""valb2""}, ...]",Turning a Hash of Arrays into an Array of Hashes in Ruby
Ruby: Get list of changed properties in an object," Helo,I am pretty new to Ruby (using 1.8.6) and need to know whether the following functionality is available automatically and if not, which would be the best method to implement it.I have class Car.And have two objects: Is there any way I could do a compare and find what properties differ in one of the objects as compared to the other one?For example, then doing a should give me: or something to that effect? <code>  car_a and car_b car_a.color = 'Red'car_a.sun_roof = truecar_a.wheels = 'Bridgestone'car_b.color = 'Blue'car_b.sun_roof = falsecar_b.wheels = 'Bridgestone' car_a.compare_with(car_b) {:color => 'Blue', :sun_roof => 'false'}",Ruby: Get list of different properties between objects
[Ruby]: Can Ruby be used to develop simple Windows applications?, I've been developing Windows based applications for a long time and most of my present clients still desire a desktop or client/server Windows application. Is it possible to use Ruby for such applications as opposed to its primary purpose of being a Web-programming language? <code> ,Can Ruby be used to develop simple Windows applications?
when to use nil blank empty? (Rails)," Is there any guidelines on how to differentiate between .nil?, .blank? and .empty??I'm generally always confused as to when to use them in my application as they all seem to mean the same thing but have different meanings.Does anyone have any cheat sheet on the gory details? <code> ","When to use nil, blank, empty?"
printing a ruby block, I have a method that takes a block.Obviously I don't know what is going to be passed in and for bizarre reasons that I won't go into here I want to print the contents of the block.Is there a way to do this? <code> ,Printing the source code of a Ruby block
printing the source code of a Ruby block, I have a method that takes a block.Obviously I don't know what is going to be passed in and for bizarre reasons that I won't go into here I want to print the contents of the block.Is there a way to do this? <code> ,Printing the source code of a Ruby block
Listing the Accessors in a Ruby Class," Is there a simple way to list the accessors/readers that have been set in a Ruby Class? What I'm really trying to do is to allow initialize to accept a Hash with any number of attributes in, but only commit the ones that have readers already defined. Something like: Any other suggestions? <code>  class Test attr_reader :one, :two def initialize # Do something end def three endendTest.new=> [one,two] def initialize(opts) opts.delete_if{|opt,val| not the_list_of_readers.include?(opt)}.each do |opt,val| eval(""@#{opt} = \""#{val}\"""") endend","Initialize a Ruby class from an arbitrary hash, but only keys with matching accessors"
Instant variable self vs @, Here is some code: What I want to know is the difference between using @age and self.age in age_difference_with method. <code>  class Person def initialize(age) @age = age end def age @age end def age_difference_with(other_person) (self.age - other_person.age).abs end protected :ageend,Instance variable: self vs @
Detecting that a method is defined in the superclass," Say, I have the following 2 classes: Is it possible to detect from within (an instance of) class B that method a_method is only defined in the superclass, thus not being overridden in B?Update: the solutionWhile I have marked the answer of Chuck as ""accepted"", later Paolo Perrota made me realize that the solution can apparently be simpler, and it will probably work with earlier versions of Ruby, too.Detecting if ""a_method"" is overridden in B: And for class methods we use singleton_methods similarly: <code>  class A def a_method endendclass B < Aend B.instance_methods(false).include?(""a_method"") B.singleton_methods(false).include?(""a_class_method"")",Detecting that a method was not overridden
how to replace array's element ?," How can I substitue an element in an array? I need to replace 5 with [11,22,33,44].flatten!so that a now becomes <code>  a = [1,2,3,4,5] a = [1,2,3,4,11,22,33,44]",How do I replace an array's element?
How do I replace an array's element ?," How can I substitue an element in an array? I need to replace 5 with [11,22,33,44].flatten!so that a now becomes <code>  a = [1,2,3,4,5] a = [1,2,3,4,11,22,33,44]",How do I replace an array's element?
Sinatra + Bundler ?, I'm wondering how one can use Bundler with Sinatra. The idea is to use the gems that Bundler downloads inside the .gems folder. <code> ,Sinatra + Bundler?
removing node with nokogiri," How can I remove <img> tags using Nokogiri?I have the following code but it wont work: <code>  # str = '<img src=""canadascapital.gc.ca/data/2/rec_imgs/5005_Pepsi_H1NB.gif""/; testt<a href=""#"">test</a>tfbu' f = Nokogiri::XML.fragment(str)f.search('//img').each do |node| node.removeendputs f",How do I remove a node with Nokogiri?
Ruby: two dimensional array," I wonder if there's a possibility to create a two dimensional array and to quickly access any horizontal or vertical sub array in it? I believe we can access a horizontal sub array in the following case: But as far as I understand, we cannot access it like this: How can I avoid or hack this limit? <code>  x = Array.new(10) { Array.new(20) }x[6][3..8] = 'something' x[3..8][6]",Create two-dimensional arrays and access sub-arrays in Ruby
Active Record with Delegate and conditions ," Is it possible to use delegate in your Active Record model and use conditions like :if on it? <code>  class User < ApplicationRecord delegate :company, :to => :master, :if => :has_master? belongs_to :master, :class_name => ""User"" def has_master? master.present? endend",Active Record with Delegate and conditions
How to use rspec's should_raise with any kind of exception?," I'd like to do something like this: How should I do this? ... doesn't work. <code>  some_method.should_raise <any kind of exception, I don't care> some_method.should_raise exception",How to use RSpec's should_raise with any kind of exception?
Whats the difference between Ruby and JRuby?," Can anyone please provide me in layman's terms the difference between developing a JRuby and a Ruby, Rails application?I use NetBeans as my Ruby on Rails IDE and every-time I create a project is asks me that question - and I don't really get the difference. Are there any pro and cons? <code> ",What's the difference between Ruby and JRuby?
Find value in Array," In Ruby, how can I find a value in an array? <code> ",Find value in an array
Why doesn't Nokogiri xpath like xmlns declarations," I'm using Nokogiri::XML to parse responses from Amazon SimpleDB. The response is something like: If I just hand the response straight over to Nokogiri, all XPath queries (e.g. doc/""//Item/Attribute[Name='Foo']/Value"") return an empty array. But if I remove the xmlns attribute from the SelectResponse tag, it works perfectly.Is there some extra thing I need to do to account for the namespace declaration? This workaround feels horribly like a hack. <code>  <SelectResponse xmlns=""http://sdb.amazonaws.com/doc/2007-11-07/""> <SelectResult> <Item> <Attribute><Name>Foo</Name><Value>42</Value></Attribute> <Attribute><Name>Bar</Name><Value>XYZ</Value></Attribute> </Item> </SelectResult></SelectResponse>",How to use xmlns declarations with XPath in Nokogiri
How do I convert a ruby hash to XML?," Here is the specific XML I ultimately need: But say I have a controller (Ruby on Rails) that is sending the data to a method. I'd prefer to send it as a hash, like so: So, how can I convert the hash to that XML format? <code>  <?xml version=""1.0"" encoding=""UTF-8""?><customer> <email>joe@example.com</email> <first_name>Joe</first_name> <last_name>Blow</last_name></customer> :first_name => 'Joe',:last_name => 'Blow',:email => 'joe@example.com'",How do I convert a Ruby hash to XML?
"Are there any ""simple"" explanations of what procs and lamdbas are in Ruby?"," Are there any ""simple"" explanations of what procs and lambdas are in Ruby? <code> ","Are there any ""simple"" explanations of what procs and lambdas are in Ruby?"
if else syntax nesting for static ruby build," What I want is both whats in ""if"" and whats in ""else"" to include #main-block. What happens currently is, if @transparency is defined, #main-block is not nested inside #content-inner. <code>  - if @transparency #content-inner{:style => ""background: url(../../../images/illustrations/"" + @transparency + "") no-repeat 88% 50%""}- else #content-inner #main-block",conditional haml - if else nesting
conditional haml - if else nesting for static ruby build," What I want is both whats in ""if"" and whats in ""else"" to include #main-block. What happens currently is, if @transparency is defined, #main-block is not nested inside #content-inner. <code>  - if @transparency #content-inner{:style => ""background: url(../../../images/illustrations/"" + @transparency + "") no-repeat 88% 50%""}- else #content-inner #main-block",conditional haml - if else nesting
Integration Testing for  a Wep App," I want to do full integration testing for a web application. I want to test many things like AJAX, positioning and presence of certain phrases and HTML elements using several browsers. I'm seeking a tool to do such automated testing.On the other hand; this is my first time using integration testing. Are there any specific recommendations when doing such testing? Any tutorial as well?(As a note: My backend code is done using Perl, Python and Django.)Thanks!  <code> ",Integration Testing for a Web App
How can ruby do this task?," I have some problem with replace string in Ruby.My Original string : What the human does is not like what animal does.I want to replace to: ==What== the human does is not like ==what== animal does.I face the problem of case sensitive when using gsub. (eg. What , what) I want to keep original text.any solution? <code> ",How can ruby do this task (Case-insensitive string search & replace in Ruby)?
Using Sinatra and MongoDB - what's the best way to manage the connection lifetime for performance?," I've used ASP.NET and now I'm working on a Sinatra/MongoDB app. With ASP.NET architecture, the connection to the database a given request uses comes from a pool of connections that the ADO.NET manages. The connections are kept alive in the pool between requests so that the cost of building and tearing down the connection isn't paid for each http request.Is there a similar mechanism in a Sinatra MongoDB app, or will I need to connect/disconnect with each request? If there is a mechanism, what does the code look like?EDIT1: The following does NOT work. Each HTTP request that the browser sends hits the new.db line, including requests for css, js, jpeg files. <code>  require 'mongo'include Mongodb = Mongo::Connection.new.db(""MyDb"")class MyApp < Sinatra::Base get '/' do etc","Using Sinatra and MongoDB - what's the recommended way to ""keep alive"" the mongodb connection between http requests?"
How to I control the order in which Test::Unit tests are run?," For example, when these tests are run, I want to ensure that test_fizz always runs first. Update: Why do I want to do this? My thought is that early failure by certain tests (those testing the simpler, more fundamental methods) will make it easier to track down problems in the system. For example, the success of bar hinges on fizz working correctly. If fizz is broken, I want to know that right off the bat, because there's no need to worry about bar, which will fail too, but with much more complicated output in the test results. <code>  require 'test/unit'class FooTest < Test::Unit::TestCase def test_fizz puts ""Running fizz"" assert true end def test_bar puts ""Running bar"" assert true endend","In Ruby, how to I control the order in which Test::Unit tests are run?"
difference between modules and classes," Consider the following code: If we replace module with class, we can do the following: Modules cannot be instanced, though. Is there a way to call the aux method on the module? <code>  module ModName def aux puts 'aux' endend ModName.new.aux",Instance methods in modules
instance method.. in ruby module?," Consider the following code: If we replace module with class, we can do the following: Modules cannot be instanced, though. Is there a way to call the aux method on the module? <code>  module ModName def aux puts 'aux' endend ModName.new.aux",Instance methods in modules
Changing Index Page - Ruby on Rails - Easy Question (I think)...," I am new to rails so go easy. I have developed my blog and deployed it successfully. The entire app is based out of the post_controller. I am wondering how I can reroute the users path to default to the post_controller vs. the app controller. To illustrate, if you go to http://mylifebattlecry.heroku.com you will see the default rails page. If you go to http://mylifebattlecry.heroku.com/posts you will see the the app. Once I complete this I will change my domain of http://www.mylifebattlecry.com to map to Heroku but need to know how to get the /posts to be where the visitor is sent.  <code> ",Changing Index Page - Ruby on Rails
Can anyone explain the following to me?," just wondering the difference between the presence of the last comma in the array, if there is any at all The second array still works, no exception raisedThanks <code>  >> [1,2,3]=> [1, 2, 3]>> [1,2,3,]=> [1, 2, 3]",Can anyone explain this array declaration to me?
how do you refer to a symbol from another ruby module?," I'm trying to write code like this: ExtractionFailed is a trivial subclass of Exception, and under test/unit, I'm trying to assert that it is thrown when I call unit.extract_from(... bad data...) I've moved ExtractionFailed into the SemanticText module, so now test/unit says: I tried writing assert_throws(:SemanticText::ExtractionFailed) {...} but I got the rather confusing message: TypeError: SemanticText is not a class/moduleI can make it work by doing the following (although it seems like a hack): So what's the right way to say this assertion in ruby? <code>  assert_throws(:ExtractionFailed) { unit.extract_from('5 x 2005')} <:ExtractionFailed> expected to be thrown but<:""SemanticText::ExtractionFailed""> was thrown. assert_throws(SemanticText::ExtractionFailed.to_s.to_sym) { unit.extract_from('5 x 2005')}",how do you assert an exception from another ruby module is thrown? (using assert_throws)
Regular expression in Ruby to convert uppercase title into lowercase," I'm trying to convert an all-uppercase string in Ruby into a lower case one, but with each word's first character being upper case. Example:convert ""MY STRING HERE"" to ""My String Here"". I know I can use the .downcase method, but that would make everything lower case (""my string here""). I'm scanning all lines in a file and doing this change, so is there a regular expression I can use through ruby to achieve this?Thanks! <code> ",Converting upper-case string into title-case using Ruby
how to dynamicaly call a method while repecting privacy, Using dynamic method calls (#send or #method) the methods' visibility is ignored.Is there a simple way to dynamically call a method that will fail calling a private method?  <code> ,how to dynamically call a method while respecting privacy
how to dynamicaly call a method while respecting privacy, Using dynamic method calls (#send or #method) the methods' visibility is ignored.Is there a simple way to dynamically call a method that will fail calling a private method?  <code> ,how to dynamically call a method while respecting privacy
check if url is valid ruby," How can I check if a string is a valid URL?For example: If this is a valid URL how can I check if this is relative to a image file? <code>  http://hello.it => yeshttp:||bra.ziz, => no",How to check if a URL is valid
Ruby: converting a Date to a UNIX timestamp," How would I get a UNIX timestamp (number of seconds since 1970 GMT) from a Date object in a Rails app?I know Time#to_i returns a timestamp, but doing Date#to_time and then getting the timestamp results in something that's off by about a month (not sure why...). Any help is appreciated, thanks!Edit: OK, I think I figured it out- I was processing a date several times in a loop, and each time the date was moved a little because of a time zone mismatch, ultimately leading to my timestamp being a month off. Still, I'd be interested in knowing if there's any way to do this without relying on Date#to_time. <code> ",Ruby/Rails: converting a Date to a UNIX timestamp
(ruby) Broken pipe (Errno::EPIPE)," i have a Broken pipe (Errno::EPIPE) error popping up and i don't understand what it is or how to fix it. the full error is: line 19 of my code is: <code>  example.rb:19:in `write': Broken pipe (Errno::EPIPE) from example.rb:19:in `print' from example.rb:19 vari.print(""x="" + my_val + ""&y=1&z=Add+Num\r\n"")",Broken pipe (Errno::EPIPE)
"How do I create a variable in a Sinatra ""configure"" block so that I can reference it in a route handler?"," I don't know if this is a ruby question or a Sinatra question, because I'm new to both. The following code does not work, and I understand why, because the first my_variable is local to its block. I just don't know the syntax for getting it right. EDIT1 - the following works, but then I guess I'm confused about the proper purpose of the configure block. <code>  require 'rubygems'require 'sinatra'configure do my_variable = ""world""endget '/' do ""Hello "" + my_variableend require 'rubygems'require 'sinatra'my_variable = ""world""get '/' do ""Hello "" + my_variableend",Where do I put code in Sinatra (ruby web framework) that I just want to execute once?
Return index of all occurances of a character in a string in ruby," I am trying to return the index's to all occurrences of a specific character in a string using Ruby. A example string is ""a#asg#sdfg#d##"" and the expected return is [1,5,10,12,13] when searching for # characters. The following code does the job but there must be a simpler way of doing this? <code>  def occurances (line) index = 0 all_index = [] line.each_byte do |x| if x == '#'[0] then all_index << index end index += 1 end all_indexend",Return index of all occurrences of a character in a string in ruby
Why does Hash.new(Hash.new({})) hide hash members?," Ok, so I wanted to create a hash which has an empty hash as the default value. A bit weird, I know, but let's say that I thought it might be useful.So here's what I did: In other words, I don't see hash member when I inspect the hash, but I can access it by its key.Is this expected behavior? What is going on here?BTW, this is Ruby 1.9.1, haven't tried earlier versions.Edit: simplified example as it doesn't have to be a hash of hashes of hashes... <code>  >> a = Hash.new({})=> {}>> a[:a][:b] = 5=> 5>> a=> {}>> a[:a]=> {:b=>5}>> a.keys=> []>> a.size=> 0>> a[:a].size=> 1",Why does Hash.new({}) hide hash members?
How to make a modulino in Ruby ? ," I'm trying to include the unit tests for a module in the same source file as the module itself, following the Perl modulino model. Now, I can run the unit-tests executing this source file.But, they are also run when I require/load them from another script. How can this be avoided ? Is there a more idiomatic way to achieve this with Ruby, unless this practice is discouraged ? <code>  #! /usr/bin/env rubyrequire 'test/unit'module Modulino def modulino_function return 0 endendclass ModulinoTest < Test::Unit::TestCase include Modulino def test_modulino_function assert_equal(0, modulino_function) endend",How to include unit tests in a ruby module ? 
Creating an XML document with a namespaced root element with Nokogiri builder," I'm implementing an exporter for XML data that requires namespaces. I'm using Nokogiri's XML Builder (version 1.4.0) to do this, however, I can't get Nokogiri to create a root node with a namespace.This works: As does this: However, I need something like <foo:root> and this doesn't work: Namespaces have to be defined before use, apparently, so there's no way to add one to the root node. I found ""Define root node with a namespace?"" on the Nokogiri mailing list, but it had no replies. Does anyone have a solution? <code>  Nokogiri::XML::Builder.new { |xml| xml.root('xmlns:foobar' => 'my-ns-url') }.to_xml<?xml version=""1.0""?><root xmlns:foobar=""my-ns-url""/> Nokogiri::XML::Builder.new do |xml| xml.root('xmlns:foobar' => 'my-ns-url') { xml['foobar'].child }end.to_xml<?xml version=""1.0""?><root xmlns:foobar=""my-ns-url""> <foobar:child/></root> Nokogiri::XML::Builder.new { |xml| xml['foobar'].root('xmlns:foobar' => 'my-ns-url') }.to_xmlNoMethodError: undefined method `namespace_definitions' for #<Nokogiri::XML::Document:0x11bfef8 name=""document"">",How to create an XML document with a namespaced root element with Nokogiri Builder
Ruby - Operator precedence ?  And/&&," I have a question regarding the and/&&/= keywords in Ruby.The ruby docs say that the precedence for the mentioned keywords is: (1)&&, (2)=, (3)and.I have this snippet of code I wrote: The output is:1) 2 4 [Expected]2) 4 4 [Why?]For some reason using the && causes both a and b to evaluate to 4? <code>  def f(n) nendif a = f(2) and b = f(4) then puts ""1) #{a} #{b}"" endif a = f(2) && b = f(4) then puts ""2) #{a} #{b}"" end",Operator precedence for  And/&& in Ruby
WARNING:  RubyGems 1.2+ index not found for:    RubyGems will revert to legacy indexes degrading performance.," WARNING: RubyGems 1.2+ index not found for:RubyGems will revert to legacy indexes degrading performance.If anyone can walk me through this problem I will give them $50.00I've exhausted google, have reinstalled everything.All i want to to is gem install ...that's it <code> ",WARNING:  RubyGems 1.2+ index not found for:    RubyGems will revert to legacy indexes degrading performance
Is Ruby's (implementation of AES-256-CBC enryption broken?  (Or is it PHP?)," I'm generating data to send from a Ruby stack to a PHP stack. I'm using the OpenSSL::Cipher library on the Ruby side and the 'mcrypt' library in PHP. When I encrypt using 'aes-256-cbc' (256-bit block size) in Ruby I need to use MCRYPT_RIJNDAEL_128 (128-bit block size) in PHP to decrypt it. I suspect the Ruby code that is broken, because the cipher.iv_len is 16; I believe it should be 32: So here's my test. On the Ruby side, first I generate the key and iv: Then I use those keys to do the encryption: Here's the PHP decryption: I'd prefer to use the longer block size. Clearly I'm misunderstanding the APIs. Help? <code>  >> cipher = OpenSSL::Cipher::Cipher.new('aes-128-cbc')=> #<OpenSSL::Cipher::Cipher:0x3067c5c>>> cipher.key_len=> 16>> cipher.iv_len=> 16>> cipher = OpenSSL::Cipher::Cipher.new('aes-256-cbc')=> #<OpenSSL::Cipher::Cipher:0x306de18>>> cipher.key_len=> 32>> cipher.iv_len=> 16 >> cipher = OpenSSL::Cipher::Cipher.new('aes-256-cbc')>> cipher.encrypt>> iv = cipher.random_iv>> iv64 = [iv].pack(""m"").strip=> ""vCkaypm5tPmtP3TF7aWrug=="">> key = cipher.random_key>> key64 = [key].pack(""m"").strip=> ""RIvFgoi9xZaHS/0Bp0J9WDRyND6Z7jrd3btiAfcQ8Y0="" >> plain_data = ""Hi, Don, this is a string."">> cipher = OpenSSL::Cipher::Cipher.new('aes-256-cbc')>> cipher.encrypt>> cipher.key = Base64.decode64(key64)>> cipher.iv = Base64.decode64(iv64)>> encrypted_data = cipher.update(plain_data)>> encrypted_data << cipher.final>> crypt64 = [encrypted_data].pack(""m"").strip=> ""5gfC/kJcnAV2fJI0haxnLcdraIKWgtu54UoznVxf8K0="" $ruby_crypt = ""5gfC/kJcnAV2fJI0haxnLcdraIKWgtu54UoznVxf8K0="";$encrypted_data = base64_decode($ruby_crypt);$key = base64_decode(""RIvFgoi9xZaHS/0Bp0J9WDRyND6Z7jrd3btiAfcQ8Y0="");$iv = base64_decode(""vCkaypm5tPmtP3TF7aWrug=="");$result = mcrypt_decrypt(MCRYPT_RIJNDAEL_128, $key, $encrypted_data, MCRYPT_MODE_CBC, $iv);$unencrypt = rtrim($result, ""\x00..\x1F"");print ""\nUnencrypted token:\n'$unencrypt'\n"";RESULT:Unencrypted token:'Hi, Don, this is a string.'",How to make Ruby AES-256-CBC  and PHP MCRYPT_RIJNDAEL_128 play well together
"How to make Ruby AES-256-CBC and PHP MCRYPT_RIJNDAEL_128 play well together, part II"," This question is a continuation of my last one, regarding How to make Ruby AES-256-CBC and PHP MCRYPT_RIJNDAEL_128 play well together. I've got that working now, but I'm still struggling to go the other direction. The PHP generated cryptogram appears to have all the information that was provided, but I cannot get the Ruby code to decrypt it without error.Here's the PHP code I'm using to generate the cryptogram: Then here's the attempt to decrypt in Ruby: What's really frustrating about this is that it's possible to get the entire cleartext out of that encrypted string. Repeating the above, but adding a nonsense pad to the cryptogram: In my actual use case the cleartext is structured (a JSON string, since you ask), so I feel comfortable a this point that I could tell use this scheme and detect poorly encrypted input without performing the cipher.final. However, I can't tolerate this sort of kludge in my code, so I'd like to understand how to make the ruby code handle the final block gracefully. <code>  $cleartext = ""Who's the clever boy?"";$key = base64_decode(""6sEwMG/aKdBk5Fa2rR6vVw==\n"");$iv = base64_decode(""vCkaypm5tPmtP3TF7aWrug=="");$cryptogram = mcrypt_encrypt(MCRYPT_RIJNDAEL_128, $key, $cleartext, MCRYPT_MODE_CBC, $iv);$result = base64_encode($cryptogram);print ""\n'$result'\n"";RESULT'JM0OxMINPTnF1vwXdI3XdKI0KlVx210CvpJllFja+GM=' >> cipher = OpenSSL::Cipher::Cipher.new('aes-128-cbc')>> cipher.key = Base64.decode64(""6sEwMG/aKdBk5Fa2rR6vVw==\n"")>> cipher.iv = Base64.decode64(""vCkaypm5tPmtP3TF7aWrug=="")>> cryptogram = Base64.decode64('JM0OxMINPTnF1vwXdI3XdKI0KlVx210CvpJllFja+GM=')>> cleartext = cipher.update(cryptogram)=> ""Who's the clever"">> cleartext << cipher.finalOpenSSL::Cipher::CipherError: bad decrypt from (irb):100:in `final' from (irb):100 >> cleartext = cipher.update(cryptogram + 'pad') => ""Who's the clever boy?\000\000\000\000\000\000\000\000\000\000\000"" >> cleartext << cipher.final OpenSSL::Cipher::CipherError: bad decrypt from (irb):119:in `final' from (irb):119",Part II: How to make Ruby AES-256-CBC and PHP MCRYPT_RIJNDAEL_128 play well together
Ruby pass by reference or by value," @user object adds errors to the lang_errors variable in the update_lanugages method.when I perform a save on the @user object I lose the errors that were initially stored in the lang_errors variable.Though what I am attempting to do would be more of a hack (which does not seem to be working). I would like to understand why the variable values are washed out. I understand pass by reference so I would like to know how the value can be held in that variable without being washed out. <code>  @user.update_languages(params[:language][:language1], params[:language][:language2], params[:language][:language3])lang_errors = @user.errorslogger.debug ""--------------------LANG_ERRORS----------101-------------"" + lang_errors.full_messages.inspectif params[:user] @user.state = params[:user][:state] success = success & @user.saveendlogger.debug ""--------------------LANG_ERRORS-------------102----------"" + lang_errors.full_messages.inspectif lang_errors.full_messages.empty?",Is Ruby pass by reference or by value?
What are the pro's and con's of asset_packager and Jammit?," At a glance they seem to be pretty much the same solution to the same problem, but Jammit must have some key difference or improvement that I haven't picked up on, or its author would have just used asset_packager. :-)Can anyone enlighten me? <code> ",What are the pros and cons of asset_packager and Jammit?
including rake tasks in gems," 1) Is there a 'best' place for rake tasks inside of gems? I've seen them in /tasks, /lib/tasks, and I've seen them written as *.rb and *.rake -- not sure which (if any) is 'correct'2) How do I make them available to the app once the gem is configured in the environment? <code> ",Including rake tasks in gems
What does ActiveRecord::Base.connection.execute returns in Rails," I want to run a raw SQL query as following: Can I capture any errors that happen while executing the query? If yes, how?Does execute returns anything? It doesn't say in the documentation.Cheers <code>  ActiveRecord::Base.connection.execute(some_query);",How to capture errors from ActiveRecord::Base.connection.execute in Rails?
What does ActiveRecord::Base.connection.execute return in Rails?," I want to run a raw SQL query as following: Can I capture any errors that happen while executing the query? If yes, how?Does execute returns anything? It doesn't say in the documentation.Cheers <code>  ActiveRecord::Base.connection.execute(some_query);",How to capture errors from ActiveRecord::Base.connection.execute in Rails?
making ruby 1.9 the default ruby on ubuntu," Is there any way, on Ubuntu 9.04, to install Ruby 1.8 as ruby1.8 (or get rid of it altogether) and have Ruby 1.9 be the default ruby? <code> ",How do I make Ruby 1.9 the default Ruby on Ubuntu?
Nokogiri pretty printing," I wrote a web crawler in Ruby and I'm using Nokogiri::HTML to parse the page. I need to print the page out and while messing around in IRB I noticed a pretty_print method. However it takes a parameter and I can't figure out what it wants.My crawler is caching the HTML of the webpages and writing it to files on my local machine. I would like to ""pretty print"" the HTML so that it looks nice and properly formatted when I do so. <code> ",How do I pretty-print HTML with Nokogiri?
Nokogiri Pretty Printing HTML," I wrote a web crawler in Ruby and I'm using Nokogiri::HTML to parse the page. I need to print the page out and while messing around in IRB I noticed a pretty_print method. However it takes a parameter and I can't figure out what it wants.My crawler is caching the HTML of the webpages and writing it to files on my local machine. I would like to ""pretty print"" the HTML so that it looks nice and properly formatted when I do so. <code> ",How do I pretty-print HTML with Nokogiri?
When is `eval` in Ruby justified," ""Is 'eval' supposed to be nasty?"" inspired this one:Mostly everybody agrees that eval is bad, and in most cases there is more elegant/safer replacement.So I wanted to ask: if eval is misused that often, is it really needed as a language feature? Is it doing more evil than good?Personally, the only place I find it useful is to interpolate strings provided in config file.Edit: The intention of this question is to get as many real-life cases as possible when eval is the only or the best solution. So please, don't go into ""should a language limit a programmer's creativity"" direction.Edit2: And when I say eval, of course I refer to evaling string, not passing ruby block to instance_eval or class_eval. <code> ",When is `eval` in Ruby justified?
Testing Authorization," I know how to run functional/integration tests in Rails, this question is about best practices. Let's say authorization is performed using four distinct user roles:basiceditoradminsuperThis means that for each action there are up to five different behaviors possible (4 roles + unauthenticated/anonymous). One approach I've taken is to test every role on every action, for example:test_edit_by_anonymous_usertest_edit_by_basic_usertest_edit_by_editor_usertest_edit_by_admin_usertest_edit_by_super_userBut this obviously leads to a lot of tests (every controller action on the site really needs to be tested five times). The opposite approach would be to test the authorization mechanism in isolation and then authenticate as super before testing every action (on setup), and only test one version of each page.I've tried several approaches with varying degrees of specificity but haven't been completely satisfied with anything. I feel more comfortable when I'm testing more cases, but the amount of test code and difficulty of abstraction has been a turn-off. Does anyone have an approach to this problem that they're satisfied with? <code> ",Functional Testing of Authorization In Rails
Testing Authorization In Rails," I know how to run functional/integration tests in Rails, this question is about best practices. Let's say authorization is performed using four distinct user roles:basiceditoradminsuperThis means that for each action there are up to five different behaviors possible (4 roles + unauthenticated/anonymous). One approach I've taken is to test every role on every action, for example:test_edit_by_anonymous_usertest_edit_by_basic_usertest_edit_by_editor_usertest_edit_by_admin_usertest_edit_by_super_userBut this obviously leads to a lot of tests (every controller action on the site really needs to be tested five times). The opposite approach would be to test the authorization mechanism in isolation and then authenticate as super before testing every action (on setup), and only test one version of each page.I've tried several approaches with varying degrees of specificity but haven't been completely satisfied with anything. I feel more comfortable when I'm testing more cases, but the amount of test code and difficulty of abstraction has been a turn-off. Does anyone have an approach to this problem that they're satisfied with? <code> ",Functional Testing of Authorization In Rails
Ruby 1.9: how to properly upcase/downcase multibyte strings?," So matz made the decision to keep upcase and downcase limited to /[A-Z]/i in ruby 1.9.1.ActiveSupport::Multibyte has long had great i18n case jiggering in ruby 1.8.x via String#mb_chars.However, when tried under ruby 1.9.1, it doesn't seem to work. Here's a simple test script I wrote, along with the output I'm getting: So, how do I get internationalized upcase and downcase with ruby 1.9.1?updateI should add that I also tested with ActiveSupport from the current master, 2-3-* and 3-0-unstable rails branches at GitHub. Same results. <code>  $ cat test.rb# encoding: UTF-8puts(""@ #{RUBY_VERSION} "" + (__ENCODING__ rescue $KCODE).to_s)sd, su = ""Itrntinliztin"", ""ITRNTINLIZTIN""def ps(u, d, k); puts ""%-30s: %24s / %-24s"" % [k, u, d] endps sd.upcase, su.downcase, ""Plain ruby""require 'rubygems'; require 'active_support'ps sd.upcase, su.downcase, ""With active_support""ps sd.mb_chars.upcase.to_s, su.mb_chars.downcase.to_s, ""With active_support mb_chars""$ ruby -KU test.rb@ 1.8.7 UTF8Plain ruby : ITRNTINLIZTIN / itrntinliztinWith active_support : ITRNTINLIZTIN / itrntinliztinWith active_support mb_chars : ITRNTINLIZTIN / itrntinliztin$ ruby1.9 test.rb@ 1.9.1 UTF-8Plain ruby : ITRNTINLIZTIN / itrntinliztinWith active_support : ITRNTINLIZTIN / itrntinliztinWith active_support mb_chars : ITRNTINLIZTIN / itrntinliztin",Ruby 1.9: how can I properly upcase & downcase multibyte strings?
Need a concise way to generate combinations in Ruby..," I have been searching everywhere, including the Stack Overflow archives, for an answer of how to do this, I tried rolling my own, but have come up short, so I decided I would post my request here.I need to take an arbitrary (even) number of items in an array and return with item paired with another item in the array. I need the output of the code to be the same as the output example I have included below.Input: Output: Any ideas?Here's what I have done so far. It's a bit dirty, and it's not returning in the order I need. The output is close, but not in the right order: You'll notice that my code gets me two D<->H combinations (last line and second line) and that won't work.My understanding of the OP's requirements [FM]:Given N teams (for example, 8teams: A..H).Create a tournament schedule,consisting of R rounds of play (7in our example) and G games (28 inour example).Where every team plays every other team exactly once.Where every team plays once in each round.And (the hard part) where theordering of games within a roundworks like this:The top-ranked team (A) plays thelow-ranked team (H) first.If a candidate matchup is rejectedfor violating the no-repeat rule, putthe low-ranked team on the""back-burner"" and form the othermatchups first. Then matchup theback-burner teams using the samerules. (For example: in Round 2, thefirst candidate matchup, A-H, isrejected as a repeat, so Game 1 willbe A-G, and H will sit on the backburner, to be paired with D as thelast game in the round).When adding teams to the back-burner,add them to the front of that list(i.e., preserve rank ordering on theback-burner as well).Note: Round 5 is the tricky one. Thefirst 2 games are straightforward.The 3rd game would then be E-H;however, that creates a scenariowhere the 4th game would be a repeat(F-G). So the algorithm needs tobacktrack, reject the E-H pairingand instead go for E-G in the 3rdgame. <code>  ('A'..'H').to_a [[['A','H'], ['B','G'], ['C','F'], ['D','E']], [['A','G'], ['B','F'], ['C','E'], ['D','H']], [['A','F'], ['B','E'], ['C','D'], ['G','H']], [['A','E'], ['B','D'], ['C','H'], ['F','G']], [['A','D'], ['B','C'], ['E','G'], ['F','H']], [['A','C'], ['B','H'], ['D','G'], ['E','F']], [['A','B'], ['C','G'], ['D','F'], ['E','H']]] items = ('A'..'H').to_acombinations = []1.upto(7) do |index| curitems = items.dup combination = [] 1.upto(items.size / 2) do |i| team1 = curitems.delete_at(0) team2 = curitems.delete_at(curitems.size - index) || curitems.delete_at(curitems.size - 1) combination << [team1, team2] end combinations << combinationendpp combinations [[[""A"", ""H""], [""B"", ""G""], [""C"", ""F""], [""D"", ""E""]], [[""A"", ""G""], [""B"", ""F""], [""C"", ""E""], [""D"", ""H""]], [[""A"", ""F""], [""B"", ""E""], [""C"", ""D""], [""G"", ""H""]], [[""A"", ""E""], [""B"", ""D""], [""C"", ""H""], [""F"", ""G""]], [[""A"", ""D""], [""B"", ""C""], [""E"", ""G""], [""F"", ""H""]], [[""A"", ""C""], [""B"", ""H""], [""D"", ""E""], [""F"", ""G""]], [[""A"", ""B""], [""C"", ""G""], [""D"", ""H""], [""E"", ""F""]]]",How do I generate a tournament schedule in Ruby?
RAILS - How do you insert a variable into a regular expression (Regex) for instance assert_match," I want to do something like but I'm not having any luck with it working.What am I doing wrong here? <code>  assert_match /blah blah blah #{@user}/, @some_text",Rails - How do you insert a variable into a regular expression (Regex) for instance assert_match
Nokogiri::XML::Builder with hypen in element name," I am trying to build an XML document using Nokogiri. Some of the elements have hyphens in them. Here's an example: Which produces: However, when I try: I get: Now I realise this is because the hyphen is being interpreted as foo MINUS bar.How should I do this? <code>  require ""nokogiri""builder = Nokogiri::XML::Builder.new do |xml| xml.foo_bar ""hello""endputs builder.to_xml <?xml version=""1.0""?><foo_bar>hello</foo_bar> builder = Nokogiri::XML::Builder.new do |xml| xml.foo-bar ""hello""end syntax error, unexpected tSTRING_BEG, expecting kDO or '{' or '(' xml.foo-bar ""hello""",How do I create XML using Nokogiri::XML::Builder with a hyphen in the element name?
Insttaled rails but rails command says its not installed.," I'm using Ubuntu 9.10 Karmic Koala and Ruby 1.9.1.I installed Rails using sudo gem install rails, which installed all the libraries for me.When I type rails in the terminal it says.The program 'rails' is currently not installed. You can install it by typing:sudo apt-get install railsrails: command not foundI can find rake, which is under rake1.9.1, but Rails is nowhere to be found, can someone point me in the right direction?Edit: path to ruby isn't the problem, the problem is where is rails? how do I execute it? rails just doesn't work, where does the exectuable lives? <code> ",Installed Rails but the rails command says it's not installed.
"Ruby.sort {|x,y| letters <=> numbers }", I want to sort an array by strings first and then numbers. How do I do this? <code> ,Sort strings and numbers in Ruby
Suppressing the output of a command run using 'system' method while running it in a ruby script., I am not sure if this makes sense but I am thinking if there is a way to suppress the output shown for a command when run using the system method in ruby? I mean it should just output true or false to STDOUT and not the output of the command. What I think is it can just only be done if the command can run silently and not from the system method. Can someone provide a bit more insight? <code> ,Suppressing the output of a command run using 'system' method while running it in a ruby script
return the two and more values from the method," Is there any possibility to return multiple values from method? Something like this: <code>  def someMethod() return [""a"", 10, SomeObject.new]end[a, b, c] = someMethod",Return two and more values from a method
How does the Ruby ampersand operator work?," Possible Duplicate: What does map(&:name) mean in Ruby? In Ruby, I know that if I do: It's the same as That is, &:foo creates the block { |obj| obj.foo }, turns it into a Proc, and passes it to each. Why does this work? Is it just a Ruby special case, or is there reason why this works as it does? <code>  some_objects.each(&:foo) some_objects.each { |obj| obj.foo }",Ruby ampersand colon shortcut
Ruby/Ruby on Rails ampersand colon shortcut," Possible Duplicate: What does map(&:name) mean in Ruby? In Ruby, I know that if I do: It's the same as That is, &:foo creates the block { |obj| obj.foo }, turns it into a Proc, and passes it to each. Why does this work? Is it just a Ruby special case, or is there reason why this works as it does? <code>  some_objects.each(&:foo) some_objects.each { |obj| obj.foo }",Ruby ampersand colon shortcut
RSpec: pecifying multiple calls to a method with different argument each time," In rspec (1.2.9), what is the correct way to specify that an object will receive multiple calls to a method with a different argument each time?I ask because of this confusing result: I expected the last failure message to be ""expected: (2)"", not ""expected (1)"". Have I used rspec incorrectly? <code>  describe Object do it ""passes, as expected"" do foo = mock('foo') foo.should_receive(:bar).once.ordered.with(1) foo.should_receive(:bar).once.ordered.with(2) foo.bar(1) foo.bar(2) end it ""fails, as expected"" do foo = mock('foo') foo.should_receive(:bar).once.ordered.with(1) # => Mock ""foo"" expected :bar with (1) once, but received it twice foo.should_receive(:bar).once.ordered.with(2) foo.bar(1) foo.bar(1) foo.bar(2) end it ""fails, as expected"" do foo = mock('foo') foo.should_receive(:bar).once.ordered.with(1) foo.should_receive(:bar).once.ordered.with(2) foo.bar(2) # => Mock ""foo"" received :bar out of order foo.bar(1) end it ""fails, as expected, but with an unexpected message"" do foo = mock('foo') foo.should_receive(:bar).once.ordered.with(1) foo.should_receive(:bar).once.ordered.with(2) foo.bar(1) foo.bar(999) # => Mock ""foo"" received :bar with unexpected arguments # => expected: (1) # => got (999) endend",RSpec: specifying multiple calls to a method with different argument each time
How can I merge two array without overwritten duplicate keys in ruby?," Is there an easy or elegant way to merge two hashes without overwriting duplicate keys?That is, if the key is present in the original hash I don't want to change its value. <code> ",How can I merge two hashes without overwritten duplicate keys in Ruby?
How can I merge two hashes without overwritten duplicate keys in ruby?," Is there an easy or elegant way to merge two hashes without overwriting duplicate keys?That is, if the key is present in the original hash I don't want to change its value. <code> ",How can I merge two hashes without overwritten duplicate keys in Ruby?
check if value exists in array in ruby," I have a value 'Dog' and an array ['Cat', 'Dog', 'Bird']. How do I check if it exists in the array without looping through it? Is there a simple way of checking if the value exists, nothing more? <code> ",How to check if a value exists in an array in Ruby
check if value exists in array in Ruby," I have a value 'Dog' and an array ['Cat', 'Dog', 'Bird']. How do I check if it exists in the array without looping through it? Is there a simple way of checking if the value exists, nothing more? <code> ",How to check if a value exists in an array in Ruby
Check if a value exists in an array in Ruby," I have a value 'Dog' and an array ['Cat', 'Dog', 'Bird']. How do I check if it exists in the array without looping through it? Is there a simple way of checking if the value exists, nothing more? <code> ",How to check if a value exists in an array in Ruby
create regular express from string ," Is there any way to create the regex /func:\[sync\] displayPTS/ from string func:[sync] displayPTS?The story behind this question is that I have serval string pattens to search against in a text file and I don't want to write the same thing again and again. Instead , I want to have a function to do the job: <code>  File.open($f).readlines.reject {|l| not l =~ /""#{string1}""/} File.open($f).readlines.reject {|l| not l =~ /""#{string2}""/} def filter string #build the reg pattern from string File.open($f).readlines.reject {|l| not l =~ pattern} end filter string1 filter string2",Create regular expression from string
Ruby - split a string," I have a string like "" This is a test "". I want to split the string by the space character. I do it like this: The result is: This is a test This is a testWhy is there the last line ""This is a test""?And I need, that if there are two or more space characters between two words, that this should not return a ""row"".I only want to get the words splitted in a given string.Does anyone have an idea? <code>  puts "" This is a test "".strip.each(' ') {|s| puts s.strip}",How to split a string and skip whitespace?
Learn Go Or Improve My Python Knowledge," I was reading about Go, and I can see that it's very good and can be a language used by many developers in some months, but I want to decide a simple thing: Learn Go or improve my Python or Ruby knowledge?Years developing with Python: 1Years developing with Ruby: 0.3 <code> ",Learn Go Or Improve My Python/Ruby Knowledge
"Ruby 1.9.x, Rails 3, Merb"," I need to spend some serious time reading about changes in Ruby 1.9.1 and upcoming Rails 3/Merb. Can people suggest any articles to read?Not really looking for one answer, just kinda looking for a compilation of resources people are using to keep up with what's coming and what currently exists, so if you stop by, let me know what you're looking at. Thanks! <code> ","Starting with Ruby 1.9.x, Rails 3, and/or Merb"
Ruby: Nicer way of doing this : script to run against stdin if no arg; otherwise input file =ARGV[0].," This works quite nicely - just wondered if there are any improvements to shorten it ? <code>  if (ARGV[0].nil?) then input=$<else input=File.new(ARGV[0],""r"");end...# Do something with the input here, for example:input.each_line do |line| puts lineend",Script to run against stdin if no arg; otherwise input file =ARGV[0]
String Comparison in ruby," I am using the following code to compare strings but it always takes me to the else. Why? I also have tried .eql?(""string"") but I get the same result. <code>  print(""Enter your state abbreviation: "")state_abbreviation = getsif state_abbreviation.upcase == ""NC"" puts(""North Carolina"")elsif state_abbreviation.upcase == ""SC"" puts(""Sourth Carolina"")elsif state_abbreviation.upcase == ""GA"" puts(""Georgia"")elsif state_abbreviation.upcase == ""FL"" puts(""Florida"")elsif state_abbreviation.upcase == ""AL"" puts(""Alabama"")else puts(""You have enter wrong abbreviation"")end",How do I do String comparison in Ruby?
Noob Ruby notation," I've been using Ruby for a while now, and I keep seeing this: What is it? <code>  foo ||= bar",What does ||= do in Ruby
Ruby syntax problems...., How do I do this type of for loop in Ruby? <code>  for(int i=0; i<array.length; i++) {},Syntax for a for loop in ruby
Translating function for finding all partitions of a set from python to ruby," I have the following python function to recursively find all partitions of a set: Can someone help me to translate this into ruby? This is what I have so far: I get the error ""LocalJumpError: no block given"". I guess this is because the yield functions work differently in Python and Ruby. <code>  def partitions(set_): if not set_: yield [] return for i in xrange(2**len(set_)/2): parts = [set(), set()] for item in set_: parts[i&1].add(item) i >>= 1 for b in partitions(parts[1]): yield [parts[0]]+bfor p in partitions([""a"", ""b"", ""c"", ""d""]):print(p) def partitions(set) if not set yield [] return end (0...2**set.size/2).each { |i| parts = [Set.new, Set.new] set.each { |item| parts[i&1] << item i >>= 1 } partitions(parts[1]).each { |b| yield [parts[0]] << b } }endp partitions([1, 2, 3, 4].to_set)",Translating function for finding all partitions of a set from Python to Ruby
How do you escape Ruby string interpolation?," Given this code: The #{id} part is being prematurely interpolated.How do I escape it? <code>  has_many :foos, :finder_sql = <<-SQL select * from foos where bars = #{id}SQL",How do I escape Ruby string interpolation?
Rails BigDecimal Round: Is this an error?," While writing a test with a value that gets represented as a BigDecimal, I ran into something weird and decided to dig into it. In brief, '0.00009' when rounded to two decimal places is returned as 0.01 instead of 0.00. Really. Here's my script/console capture: Oh, and I get the same results if I use the default mode, like so: Here are my versions: Has anyone seen anything like this?  <code>  >> bp = BigDecimal('0.09')=> #<BigDecimal:210fe08,'0.9E-1',4(8)>>> bp.round(2,BigDecimal::ROUND_HALF_DOWN).to_f=> 0.09>> bp = BigDecimal('0.009')=> #<BigDecimal:210bcf4,'0.9E-2',4(8)>>> bp.round(2,BigDecimal::ROUND_HALF_DOWN).to_f=> 0.01>> bp = BigDecimal('0.0009')=> #<BigDecimal:2107a8c,'0.9E-3',4(12)>>> bp.round(2,BigDecimal::ROUND_HALF_DOWN).to_f=> 0.0>> bp = BigDecimal('0.00009')=> #<BigDecimal:2103428,'0.9E-4',4(12)>>> bp.round(2,BigDecimal::ROUND_HALF_DOWN).to_f=> 0.01>> bp = BigDecimal('0.000009')=> #<BigDecimal:20ff0f8,'0.9E-5',4(12)>>> bp.round(2,BigDecimal::ROUND_HALF_DOWN).to_f=> 0.0 >> bd = BigDecimal('0.00009')=> #<BigDecimal:2152ed8,'0.9E-4',4(12)>>> bd.round(2).to_f=> 0.01 ruby 1.8.6 (2008-03-03 patchlevel 114) [i686-darwin9.2.2]Rails 2.3.4",Ruby BigDecimal Round: Is this an error?
rounding float in ruby," I'm having problems rounding. I have a float, which I want to round to the hundredth of a decimal. However, I can only use .round which basically turns it into an int, meaning 2.34.round # => 2. Is there a simple effect way to do something like 2.3465 # => 2.35 <code> ",Ruby: Rounding float in Ruby
Rounding float in Ruby," I'm having problems rounding. I have a float, which I want to round to the hundredth of a decimal. However, I can only use .round which basically turns it into an int, meaning 2.34.round # => 2. Is there a simple effect way to do something like 2.3465 # => 2.35 <code> ",Ruby: Rounding float in Ruby
Accessing the version of a gem with ruby," How can I get the version of a gem using just Ruby? I'd rather not use a system call and grep it the shells output like: Can't I just get it somehow with: I just don't know how to specify the gem I want, like in this case I want to get the Passenger gem's newest version. <code>  `gem search passenger`.scan(/(?:\(|, *)([^,)]*)/).flatten.first=> ""2.2.9"" Gem::Version",How to access the version of a gem from within Ruby?
was does !! do in ruby?," I am using some code that uses this syntax (restful authentication). Tried googling for this but it just seems to ignore ""!!"", will accept an answer that can tell me how to find info about searching for strings such as !! in google. <code>  def logged_in? !!current_user()end",what does !! do in ruby?
[Ruby] How to do a newline in output," How do I make \n actually work in my output? At the moment it just writes it all in 1 long block. Thanks for any help <code>  Dir.chdir 'C:/Users/name/Music'music = Dir['C:/Users/name/Music/*.{mp3, MP3}']puts 'what would you like to call the playlist?'@new = ''playlist_name = gets.chomp + '.m3u'music.each do |z| @new += z + '\n'endFile.open playlist_name, 'w' do |f| f.write @newend",How to do a newline in output
"How to rescue from a requre ""gem_name"" when the gem is not installed"," I'm writing a library that depend on a specific gem. I require the gem and use it in my code and everything is hunky-dory as long as the gem is installed on the user's machine. but what if it is not?!I thought it's fine cause I can rescue from the require command and print a message to the output to inform the user about the lacking gem and finish it gracefully but I get an error!Could you tell me how it should be done or what is wrong with this piece of code:  <code>  begin require ""some_gem""rescue puts ""please install some_gem first!"" end","How to rescue from a require ""gem_name"" when the gem is not installed"
"How to rescue from a reqiure ""gem_name"" when the gem is not installed"," I'm writing a library that depend on a specific gem. I require the gem and use it in my code and everything is hunky-dory as long as the gem is installed on the user's machine. but what if it is not?!I thought it's fine cause I can rescue from the require command and print a message to the output to inform the user about the lacking gem and finish it gracefully but I get an error!Could you tell me how it should be done or what is wrong with this piece of code:  <code>  begin require ""some_gem""rescue puts ""please install some_gem first!"" end","How to rescue from a require ""gem_name"" when the gem is not installed"
Ruby Nokogiri Parsing HTML table II," I installed Ruby and Mechanize. It seems to me that it is posible in Nokogiri to do what I want to do but I do not know how to do it.What about this table? It is just part of the HTML of a vBulletin forum site. I tried to keep the HTML structure but delete some text and tag attributes. I want to get some details per thread like: Title, Author, Date, Time, Replies, and Views.Please note that there are few tables in the HTML document? I am after one particular table with its tbody, <tbody id=""threadbits_forum_251"">. The name will be always the same (I hope). Can I use the tbody and the name in the code?  <code>  <table > <tbody> <tr> <!-- table header --> </tr> </tbody> <!-- show threads --> <tbody id=""threadbits_forum_251""> <tr> <td></td> <td></td> <td> <div> <a href=""showthread.php?t=230708"" >Vb4 Gold Released</a> </div> <div> <span><a>Paul M</a></span> </div> </td> <td> 06 Jan 2010 <span class=""time"">23:35</span><br /> by <a href=""member.php?find=lastposter&amp;t=230708"">shane943</a> </div> </td> <td><a href=""#"">24</a></td> <td>1,320</td> </tr> </tbody></table>",How do I parse an HTML table with Nokogiri?
How to cast 1 and 0 to true and false in Ruby.," I need to index into a hash that I have defined in terms of ""true"" and ""false"" For testing purposes, I am indexing with rand(2) and that fails. If I index with true it works.I was looking for something likerand(2).logicalbut find nothing. <code>  colorHash = Hash.new { |hash, key| hash[key] = {} }colorHash[""answers""][true] = ""#00CC00""colorHash[""answers""][false] = ""#FFFFFF""",How to cast 1 and 0 to true and false in Ruby.  Want a boolean or logical out.
mocking specific things about an error/exception in rspec_rails," I have a block of code like this: I want to test what's going on in that if e.response_code.to_i == 503 section. I can mock do_some_stuff to throw the right type of exception: but how do I mock the error object itself to return 503 when it receives ""response_code""? <code>  def some_method begin do_some_stuff rescue WWW::Mechanize::ResponseCodeError => e if e.response_code.to_i == 503 handle_the_situation end endend whatever.should_receive(:do_some_stuff).and_raise(WWW::Mechanize::ResponseCodeError)",mocking an error/exception in rspec (not just its type)
Removing/undefining a class method," You can dynamically define a class method for a class like so: But how do you do the opposite: remove/undefine a class method? I suspect Module's remove_method and undef_method methods might be able to be used for this purpose, but all of the examples I've seen after Googling for hours have been for removing/undefining instance methods, not class methods. Or perhaps there's a syntax you can pass to instance_eval to do this as well.Thanks in advance. <code>  class Fooendbar = %q{def bar() ""bar!"" end}Foo.instance_eval(bar)",Remove/undef a class method
how to use xpath? (nokogiri)," I have not found any documentation nor tutorial for that. Does anything like that exist? The code above will get me any table, anywhere, that has a tbody child with the attribute id equal to ""threadbits_forum_251"". But why does it start with double //? Why there is /tr at the end? See ""Ruby Nokogiri Parsing HTML table II"" for more details.Can anybody tell me how to extract href, id, alt, src, etc., using Nokogiri? How can I extract other things? <code>  doc.xpath('//table/tbody[@id=""threadbits_forum_251""]/tr') td[3]/div[1]/a/text()' <--- extracts text",How do I use XPath in Nokogiri?
Ruby: difference between || and 'or', What's the difference between the or and || operators in Ruby? Or is it just preference? <code> ,"Difference between ""or"" and || in Ruby?"
Capturing Control-C in ruby," I was passed a long running legacy ruby program, which has numerous occurrences of throughout it. Without tracking down every single possible exception these each could be handling (at least not immediately), I'd still like to be able to shut it down at times with CtrlC.And I'd like to do so in a way which only adds to the code (so I don't affect the existing behavior, or miss an otherwise caught exception in the middle of a run.)[CtrlC is SIGINT, or SystemExit, which appears to be equivalent to SignalException.new(""INT"") in Ruby's exception handling system. class SignalException < Exception, which is why this problem comes up.]The code I would like to have written would be: EDIT: This code works, as long as you get the class of the exception you want to trap correct. That's either SystemExit, Interrupt, or IRB::Abort as below.  <code>  begin #dosomethingrescue Exception => e #halt the exception's progressend begin #dosomethingrescue SignalException => e raise erescue Exception => e #halt the exception's progressend",Capturing Ctrl-c in ruby
"Ruby rescues are cumulative, not independent like case. (Was ""Ctrl-c in ruby"")"," I was passed a long running legacy ruby program, which has numerous occurrences of throughout it. Without tracking down every single possible exception these each could be handling (at least not immediately), I'd still like to be able to shut it down at times with CtrlC.And I'd like to do so in a way which only adds to the code (so I don't affect the existing behavior, or miss an otherwise caught exception in the middle of a run.)[CtrlC is SIGINT, or SystemExit, which appears to be equivalent to SignalException.new(""INT"") in Ruby's exception handling system. class SignalException < Exception, which is why this problem comes up.]The code I would like to have written would be: EDIT: This code works, as long as you get the class of the exception you want to trap correct. That's either SystemExit, Interrupt, or IRB::Abort as below.  <code>  begin #dosomethingrescue Exception => e #halt the exception's progressend begin #dosomethingrescue SignalException => e raise erescue Exception => e #halt the exception's progressend",Capturing Ctrl-c in ruby
check if value is a number ruby," I want to simply check if a returned value from a form text field is a number i.e.: 12 , 12.5 or 12.75. Is there a simple way to check this, especially if the value is pulled as a param? <code> ",How can I check if a value is a number?
[Rails] How to associate a new model with existing models using has_and_belongs_to_many," I have two models with a many to many relationship using has_and_belongs_to_many. Like so: If we assume that I have already created several Competitions in the database, when I create a new Team, I would like to use a nested form to associate the new Team with any relevant Competitions.It's at this point onwards that I really do need help (have been stuck on this for hours!) and I think my existing code has already gone about this the wrong way, but I'll show it just in case: And the view... this is where I'm really stuck so I won't both posting my efforts so far. What I'd like it a list of checkboxes for each competition so that the user can just select which Competitions are appropriate, and leave unchecked those that aren't.I'm really stuck with this one so appreciate any pointing in the right direction you can provide :) <code>  class Competition < ActiveRecord::Base has_and_belongs_to_many :teams accepts_nested_attributes_for :teamsendclass Team < ActiveRecord::Base has_and_belongs_to_many :competitions accepts_nested_attributes_for :competitionsend class TeamsController < ApplicationController def new @team = Team.new @competitions.all @competitions.size.times {@team.competitions.build} end def create @team = Team.new params[:team] if @team.save # .. usual if logic on save end endend",How to associate a new model with existing models using has_and_belongs_to_many
how to use nokogiri methods .xpath & .at_xpath," I'm learning how to use Nokogiri and few questions came to me based on this code: Is it better to use // or / in XPath? @AnthonyWJones says that ""the use of an unprefixed //"" is not such a good idea.I had to remove tbody from any working XPath otherwise I got a nil result. How is possible to remove an element from the XPath to get things to work?Do I have to use xpath twice to extract data if not using a full XPath?Why can't I make at_xpath work to extract data? It works nicely in ""How do I parse an HTML table with Nokogiri?"". What is the difference? <code>  require 'rubygems'require 'mechanize'post_agent = WWW::Mechanize.newpost_page = post_agent.get('http://www.vbulletin.org/forum/showthread.php?t=230708')puts ""\nabsolute path with tbody gives nil""puts post_page.parser.xpath('/html/body/div/div/div/div/div/table/tbody/tr/td/div[2]').xpath('text()').to_s.strip.inspectputs ""\n.at_xpath gives an empty string""puts post_page.parser.at_xpath(""//div[@id='posts']/div/table/tr/td/div[2]"").at_xpath('text()').to_s.strip.inspectputs ""\ntwo lines solution with .at_xpath gives an empty string""rows = post_page.parser.xpath(""//div[@id='posts']/div/table/tr/td/div[2]"")puts rows[0].at_xpath('text()').to_s.strip.inspectputsputs ""two lines working code""rows = post_page.parser.xpath(""//div[@id='posts']/div/table/tr/td/div[2]"")puts rows[0].xpath('text()').to_s.stripputs ""\none line working code""puts post_page.parser.xpath(""//div[@id='posts']/div/table/tr/td/div[2]"")[0].xpath('text()').to_s.stripputs ""\nanother one line code""puts post_page.parser.at_xpath(""//div[@id='posts']/div/table/tr/td/div[2]"").xpath('text()').to_s.stripputs ""\none line code with full path""puts post_page.parser.xpath(""/html/body/div/div/div/div/div/table/tr/td/div[2]"")[0].xpath('text()').to_s.strip",How to use Nokogiri's xpath and at_xpath methods
Using do block vs brackets {}," New to ruby, put on your newbie gloves.Is there any difference (obscure or practical) between the following two snippets? I realize the brace syntax would allow you to place the block on one line but outside of that are there any compelling reasons to use one syntax over the other? <code>  my_array = [:uno, :dos, :tres]my_array.each { |item| puts item}my_array = [:uno, :dos, :tres]my_array.each do |item| puts itemend my_array.each { |item| puts item }",Using do block vs braces {}
How do I hmtl_escape text data in a sinatra app?, I have a small Sinatra app which generates html fragments for me from an ERB template.How do I html_escape the output?The <%=h somestring %> helper does not exist in Sinatra. <code> ,How do I html_escape text data in a sinatra app?
Machnist vs FactoryGirl - pros and contras," I'm working with factory_girl, but looking at the machinist gem. Could you tell me please - what are the pros and cons of migrating to machinist? Have you compared those libs? <code> ",Machinist vs FactoryGirl - pros and cons
Is there any build-in method in RoR to fill zero for integer?," If I want ""00001"" instead of ""1"", apart from writing my own filling zero method, is there any built in method can help me fill in zero for the integer?  <code> ",Is there any built-in method in RoR to fill zero for integer?
How do you source environment variables for the command shell in a ruby script.," I'm trying to run some third party bash scripts from within my ruby program. Before I can run them they require me to source a file. On the command line it all works fine but within Ruby it doesn't work. I've found out that system commands will open a new child shell process and any sourcing will be done in that and can't be seen from the parent shell process running the Ruby script. When the system call ends, the child shell is also killed. How do i get round this problem? <code> ",How do I source environment variables for a command shell in a Ruby script?
Sorting an enumerable by two values," Suppose I have I want to sort this array by the first value of each inner array, and then by the second (so the sorted array should look like this: [[1, 2], [1, 3], [1, 4], [2, 1], [2, 3]])What's the most readable way to do this? <code>  an_array = [[2, 3], [1, 4], [1, 3], [2, 1], [1, 2]]",Sorting an array by two values
what is the most elegant way in ruby to remove a parameter from url?," I would like to take out a parameter from a URL by its name without knowing which parameter it is, and reassemble the URL again.I guess it is not that hard to write something on my own using CGI or URI, but I imagine such functionality exists already. Any suggestions?In: Out: <code>  http://example.com/path?param1=one&param2=2&param3=something3 http://example.com/path?param2=2&param3=something3",What is the most elegant way in Ruby to remove a parameter from a URL?
"In Ruby, what is the cleanest way of obtaining the index of the largest value in an array? "," If a is the array, I want a.index(a.max), but something more Ruby-like. It should be obvious, but I'm having trouble finding the answer at so and elsewhere. Obviously, I am new to Ruby. <code> ","In Ruby, what is the cleanest way of obtaining the index of the largest value in an array?"
How to get current URL in Rails?, How can I get the current absolute URL in my Ruby on Rails view?The request.request_uri only returns the relative URL. <code> ,How do I get the current absolute URL in Ruby on Rails?
How do I  get the current URL in Ruby on Rails?, How can I get the current absolute URL in my Ruby on Rails view?The request.request_uri only returns the relative URL. <code> ,How do I get the current absolute URL in Ruby on Rails?
Ruby ternary operator without else.," Is there a ruby idiom for ""If do-this,"" and ""do-this"" just as a simple command?for example, I'm currently doing to leave the else clause empty, but I feel like there's probably a more idiomatic way of doing this that doesn't involve having to specify a nil at the end. (and alternatively, I feel like taking up multiple lines of code would be wasteful in this case. <code>  object.method ? a.action : nil",Ruby ternary operator without else
how's ruby and rails related?," First of all, i want some clarification :)1) Is RoR like a server scripting language? 2) Can it be used as an alternative to php?I started learning Ruby from The Ruby Programming Language book and haven't yet come across something which relates to the web. Is Ruby for desktop apps and Rails for web apps?Thanks <code> ",How are Ruby and Rails related?
"Begin, Rescue and Ensure in Ruby"," I've recently started programming in Ruby, and I am looking at exception handling.I was wondering if ensure was the Ruby equivalent of finally in C#? Should I have: or should I do this? Does ensure get called no matter what, even if an exception isn't raised? <code>  file = File.open(""myFile.txt"", ""w"")begin file << ""#{content} \n""rescue #handle the error hereensure file.close unless file.nil?end #store the filefile = File.open(""myFile.txt"", ""w"")begin file << ""#{content} \n"" file.closerescue #handle the error hereensure file.close unless file.nil?end","Begin, Rescue and Ensure in Ruby?"
ruby - can't modify frozen string (TypeError), Got... '[]=': can't modify frozen string (TypeError)when trying to modify what I thought was a copy of ARGV[0].Same results for each of <code>  arg = ARGV[ 0 ]arg_cloned = ARGV[ 0 ].clonearg_to_s = ARGV[ 0 ].to_sarg[ 'x' ] = 'y'arg_cloned[ 'x' ] = 'y'arg_to_s[ 'x' ] = 'y',Ruby - can't modify frozen string (TypeError)
Private method error !gsub - Rails," I have a controller: It takes in a start and end time and calculates the duration between the times.When I run this I get the following error: private method `gsub!' called for Thu Feb 04 16:12:09 UTC 2010:TimeWhy is this happening? <code>  class StatsController < ApplicationController require 'time' def index @started = ""Thu Feb 04 16:12:09 UTC 2010"" @finished = ""Thu Feb 04 16:13:44 UTC 2010"" @duration_time = stats_duration(@started, @finished) end private def stats_duration(started, finished) time_taken = distance_of_time_in_words(Time.parse(started), Time.parse(finished)) time_taken endend",Getting Private Method error in Ruby on Rails
What does the opposite of url_for in Rails? Takes a path and generates the interpreted route?," Brain's a little fried....How do I get a hash of the :controller and :action from a relative_path?This is basically the opposite of url_for. in the example below, ""some_function"" is the mystery function name I'm looking for...I know it's easy, just can't remember or seem to be able to find it in the docs.Like so: <code>  some_function('/posts/1/edit')=> {:controller => 'posts', :action => 'edit', :id => '1'}",What is the opposite of url_for in Rails? A function that takes a path and generates the interpreted route?
Dynamically requiring in ruby," Does anyone know enough about Ruby's require to tell me if the following is valid syntax: If so, will the require place the gem into the global namespace as it would when at the top of the file? <code>  class Something def initialize(mode) case mode when :one then require 'some_gem' when :two then require 'other_gem' end endends = Something.new",Dynamically requiring files?
What does string * '' mean in Ruby?," I was looking through some Rails source code and came across What does the * '' do? Is that multiplication by an empty string...? And why would you do that. <code>  # File vendor/rails/activesupport/lib/active_support/vendor/builder-2.1.2/builder/css.rb, line 129129: def target!130: @target * ''131: end",What does array * string mean in Ruby?
What does string * array mean in Ruby?," I was looking through some Rails source code and came across What does the * '' do? Is that multiplication by an empty string...? And why would you do that. <code>  # File vendor/rails/activesupport/lib/active_support/vendor/builder-2.1.2/builder/css.rb, line 129129: def target!130: @target * ''131: end",What does array * string mean in Ruby?
Ruby hash keys as methods on a class," I have a class and a hash. How can I get the members of the hash to dynamically become methods on the class with the key as the method name? For example, I would like to be able to have the following output Doe: <code>  class User def initialize @attributes = {""sn"" => ""Doe"", ""givenName"" => ""John""} endend u = User.newputs u.sn",How do I use hash keys as methods on a class?
Rails Array Merge (Union)," I have two array I need to merge, and using the Union (|) operator is PAINFULLY slow.. are there any other ways to accomplish an array merge?Also, the arrays are filled with objects, not strings. An Example of the objects within the array Where source is a short piece of XML.EDITSorry! By 'merge' I mean I need to not insert duplicates. Understanding that the integers are actually Article objects, and the Union operator appears to take forever <code>  #<Article id: 1, xml_document_id: 1, source: ""<article><domain>events.waikato.ac</domain><excerpt..."", created_at: ""2010-02-11 01:32:46"", updated_at: ""2010-02-11 01:41:28""> A => [1, 2, 3, 4, 5]B => [3, 4, 5, 6, 7]A.magic_merge(B) #=> [1, 2, 3, 4, 5, 6, 7]",Array Merge (Union)
Nested forms in rails = has_many :confusions :(," I have a user and a profile model. One user can have many profiles. I need to access only one information from the profiles section (viz the phone number) in my user model during the user creation process. Hence I'm trying to get it done through attr_accessible. My user.rb looks like this. The problem that I'm facing is that when I try to call the getter method profile_mobile_number in a method in user.rb (the method is private, though I think it doesn't matter), I'm getting a null value. I use the following in my users/new.html.erb form My question is what is the right way to do this? Should I use <% f.fields_for :profile do |ff| -%> or <% f.fields_for :profiles do |ff| -%> (notice that the second one is plural). When I use the plural :profiles, I don't even see the fields on the form. What am I missing here? And what is the tense that needs to be used in model user.rb? :profile_phone_number or :profiles_phone_number? Thanks. <code>  has_many :profilesattr_accessible :handle, :email, :password, :profile_mobile_numberattr_accessor : :profile_mobile_number",Nested forms in rails - accessing attribute in has_many relation
Ruby on rails: put a link in a flash[:notice]," I am learning Ruby and Rails.I have a Ruby on Rails project that tracks jobs a server is running. Right now, when I manually create a new job, it announces: I would like to turn the #{update.id} into a link to the job on the job list. The URL for going to the job is jobs/list?job=1234 where 1234 is the update.id that is displayed in the flash notice. Is it possible to put a link into a flash[:notice] statement? Or do I need to re-work how this message is being displayed in order to turn it into a link? <code>  flash[:notice] = ""Created job job number #{update.id}.""",Put a link in a flash[:notice]
What is rack middleware?," What is Rack middleware in Ruby? I couldn't find any good explanation for what they mean by ""middleware"". <code> ",What is Rack middleware?
Static typing in Groovy: sometimes or never?," [Later: Still can't figure out if Groovy has static typing (seems that it does not) or if the bytecode generated using explicit typing is different (seems that it is). Anyway, on to the question]One of the main differences between Groovy and other dynamic languages -- or at least Ruby -- is that you can statically explicitly type variables when you want to.That said, when should you use static typing in Groovy? Here are some possible answers I can think of:Only when there's a performance problem. Statically typed variables are faster in Groovy. (or are they? some questions about this link)On public interfaces (methods, fields) for classes, so you get autocomplete. Is this possible/true/totally wrong?Never, it just clutters up code and defeats the purpose of using Groovy.Yes when your classes will be inherited or used I'm not just interested in what YOU do but more importantly what you've seen around in projects coded in Groovy. What's the norm?Note: If this question is somehow wrong or misses some categories of static-dynamic, let me know and I'll fix it. <code> ",Explicit typing in Groovy: sometimes or never?
Explicit (Static?) typing in Groovy: sometimes or never?," [Later: Still can't figure out if Groovy has static typing (seems that it does not) or if the bytecode generated using explicit typing is different (seems that it is). Anyway, on to the question]One of the main differences between Groovy and other dynamic languages -- or at least Ruby -- is that you can statically explicitly type variables when you want to.That said, when should you use static typing in Groovy? Here are some possible answers I can think of:Only when there's a performance problem. Statically typed variables are faster in Groovy. (or are they? some questions about this link)On public interfaces (methods, fields) for classes, so you get autocomplete. Is this possible/true/totally wrong?Never, it just clutters up code and defeats the purpose of using Groovy.Yes when your classes will be inherited or used I'm not just interested in what YOU do but more importantly what you've seen around in projects coded in Groovy. What's the norm?Note: If this question is somehow wrong or misses some categories of static-dynamic, let me know and I'll fix it. <code> ",Explicit typing in Groovy: sometimes or never?
How do I download a binary file over HTTP using Ruby? , How do I download and save a binary file over HTTP using Ruby?The URL is http://somedomain.net/flv/sample/sample.flv.I am on the Windows platform and I would prefer not to run any external program. <code> ,How do I download a binary file over HTTP?
emacs is ignoring my path when it runs a compile command," I'm trying to get a compile command (rake cucumber) to run with a specific ruby version on my Mac OS X system, I use rvm to do this currently in the terminal. My ~/.MacOSX/environment.plist has the correct path in it, but emacs insists on prepending to this path and therefore making it useless. I've also tried: It was the desperate attempt of an emacs beginner to get what I wanted. It still prepends in front of it, so my path ends up being: I don't want /usr/bin and others prepending, I want my path first and the emacs prepended path to be at the end, I reckon this would fix my problem.I test this by simply opening Aquamacs and running meta-x compile and then echo $PATH.Any ideas? <code>  (when (equal system-type 'darwin) (setenv ""PATH"" (concat ""/Users/fearoffish/.rvm/bin:/Users/fearoffish/.rvm/rubies/ruby-1.8.7-p249/bin:/Users/fearoffish/.rvm/gems/ruby-1.8.7-p249/bin:/Users/fearoffish/.rvm/gems/ruby-1.8.7-p249%global/bin:/Users/fearoffish/.rvm/bin"")) (push ""/Users/fearoffish/.rvm/bin"" exec-path) (push ""/Users/fearoffish/.rvm/rubies/ruby-1.8.7-p249/bin"" exec-path) (push ""/Users/fearoffish/.rvm/gems/ruby-1.8.7-p249/bin"" exec-path) (push ""/Users/fearoffish/.rvm/gems/ruby-1.8.7-p249%global/bin"" exec-path) (push ""/Users/fearoffish/.rvm/bin"" exec-path)) /usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin:/usr/X11/bin:/Users/fearoffish/.rvm/bin:/Users/fearoffish/.rvm/rubies/ruby-1.8.7-p249/bin:/Users/fearoffish/.rvm/gems/ruby-1.8.7-p249/bin:/Users/fearoffish/.rvm/gems/ruby-1.8.7-p249%global/bin",Emacs is ignoring my path when it runs a compile command
"Is there a Ruby database migration gem, that helps you move from an old structure to a new structure?"," Are there any Ruby gems/libraries that help you migrate from an old DB structure to a new structure? ActiveRecord migrations do a good job keeping track of a new db structure, but I wonder if there's something that helps you migrate an entire legacy db to a new structure: (I realize you could do these transforms just as easily with AR, but I'm hoping the magic library would have many more transforms.Berns <code>  transfer_from(:source_table => 'person', :destination_table => 'dudes_and_dudets') do from :name, :to => :full_name from :dob, :to => :age do |dob| # this would, for example, load the result (Date.today - dob)/60/60/24/365 # of the block into :age endend","Is there a Ruby database migration gem, that helps you move content from an old structure to a new structure?"
How to include a YAML file inside a YAML file?, Is there a custom tag in YAML for ruby to include a YAML file inside a YAML file? A similar question was asked some time ago and there was no relevant answer.I am wondering if there is some custom tag for Ruby similar to this one for Python.  <code>  #E.g.: --- !includefilename: another.yml,How to include a YAML file inside a YAML file in Ruby
next verus if in a .each loop?," I have a text processing thing I'm doing in Ruby. Basically, I have to implement a simple state machine (with one character look-behind).My code at the moment looks like this: Is this proper? Or should it rather be implemented like: Is there a right way or is it just preference? Which one blends more with ""the ruby way"" of doing things? <code>  text.each{ |c| ... ... ... ... if @state!=:some_state next end #processing stuff for if in :some_state mode ... ... ... ... ...} text.each{ |c| ... ... ... ... if @state==:some_state #processing stuff for if in :some_state mode ... ... ... ... ... end}",next versus if in a .each loop?
Nokogiri Case Insensitive Xpath Selector," I'm using nokogiri to select the 'keywords' attribute like this: One of the pages I'm working with has the keywords label with a capital ""K"" which has motivated me to make the query case insensitive. So, my question is: What is the best way to make a nokogiri selection case insensitive? EDIT Tomalak's suggestion below works great for this specific problem. I'd like to also use this example to help understand nokogiri better though and have a couple issues that I'm wondering about and have not been successful searching for. For example, are the regex 'pseudo classes' Nokogiri Docs appropriate for a problem like this?I'm also curious about the matches?() method in nokogiri. I have not been able to find any clarification on the method. Does it have anything to do with the 'matches' concept in XPath 2.0 (and therefore could it be used to solve this problem)? Thanks very much. <code>  puts page.parser.xpath(""//meta[@name='keywords']"").to_html <meta name=""keywords""> AND <meta name=""Keywords""> ",How can I create a nokogiri case insensitive Xpath selector?
Why this code does not work?," If a block is a closure, why does this code does not work, and how to make it work? <code>  def R(arg) Class.new do def foo puts arg end endendclass A < R(""Hello!"")endA.new.foo #throws undefined local variable or method `arg' for #<A:0x2840538>",Closure doesn't work
What's going on here in ruby?," What's going on here? What is the subtle difference between the two forms of ""unless""? thx <code>  > irb(main):001:0> foo = true unless defined?(foo)=> nil irb(main):002:0> unless defined?(fooo) ; fooo = false ; end=> false ",In Ruby why won't `foo = true unless defined?(foo)` make the assignment?
undefined method `request_uri' for #," I'm trying to use Ruby to load a webpage over HTTP and check what its status code is. My code looks like this: However, for some URLs (mostly ones pointing to weird stuff like web counters that won't give a proper response) I'm getting an undefined method request_uri for # exception. I've traced it back to line 380 of http.rb (I'm running Ruby 1.8), where it says: I'm quite lost as to what causes this exception. I would expect a URI::InvalidURIError, but not this. <code>  require ""net/http"" @r = Net::HTTP.get_response(URI.parse(myURL)) return @r.code def HTTP.get_response(uri_or_host, path = nil, port = nil, &block) if path host = uri_or_host new(host, port || HTTP.default_port).start {|http| return http.request_get(path, &block) } else uri = uri_or_host new(uri.host, uri.port).start {|http| return http.request_get(uri.request_uri, &block) <--- LINE 380 } endend","While loading webpage: ""undefined method `request_uri' for #"""
Ruby Generate Long String," What is the best way to generate a long string quickly in ruby? This works, but is very slow: I've also noticed that creating a string of a decent length and then appending that to an existing string up to the desired length works much faster: Any other suggestions? <code>  str = """"length = 100000(1..length).each {|i| str += ""0""} str = """"incrementor = """"length = 100000(1..1000).each {|i| incrementor += ""0""}(1..100).each {|i| str += incrementor}",In Ruby how do I generate a long string of repeated text?
Ruby URL regex matcher," I have some text content with a list of URLs contained in it.I am trying to grab all the URLs out and put them in an array.I have this code I am trying to get the end results to be: The above code does not seem to be working correctly. Does anyone know what I am doing wrong?Thanks <code>  content = ""Here is the list of URLs: http://www.google.com http://www.google.com/index.html""urls = content.scan(/^(http|https):\/\/[a-z0-9]+([\-\.]{1}[a-z0-9]+)*\.[a-z]{2,5}(([0-9]{1,5})?\/.*)?$/ix) ['http://www.google.com', 'http://www.google.com/index.html']",Extract all urls inside a string in Ruby
can variable name be a variable? (ruby)," How can I make the code below work, so that both puts display 1? <code>  video = []name = ""video""name[0] = 1puts name[0] #gives me 1puts video[0] #gives me nil",How can I use a variable as a variable name in Ruby?
Rails or Ruby method to auto wrap lines for plain text email," 1) I want to auto wrap a text by words so that each line does not exceed 56 characters. Is there a method for doing this, or do I need to roll my own? My view: would render: 2) I want to indent the text by 4 spaces so that: would render: <code>  @comment_text = ""Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua."" <%= @comment_text.cool_string_function( 56 ) %> Lorem ipsum dolor sit amet, consectetur adipisicingelit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. <%= @comment_text.cool_string_function( {:width => 56, :indent => 4} ) %> Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.",Wrapping text into lines at word boundaries
How to judge the time is today in ruby?," I have a settlement, I want to judge if the return_service_date is today, how to do this?This is my code (rails): Is there a better way to do this? <code>  if settlement.return_service_date && settlement.return_service_date.to_s(:date) == Time.now.to_s(:date)","How to judge whether a time/date is today, in ruby?"
"How to access a toplevel entity in ruy, from inside a module which defines the same name."," Inside a module I have a class named Process. This raises NoMethodError.How do I access the toplevel Process from inside the module? Is this at all possible, without renaiming my class? <code>  module M Process= Class.new Process::wait(0)end","How to access a toplevel entity in ruby, from inside a module which defines the same name"
"How to access a toplevel entity in ruby, from inside a module which defines the same name."," Inside a module I have a class named Process. This raises NoMethodError.How do I access the toplevel Process from inside the module? Is this at all possible, without renaiming my class? <code>  module M Process= Class.new Process::wait(0)end","How to access a toplevel entity in ruby, from inside a module which defines the same name"
C# equivalent of the Ruby symbol.," I'm developing a little C# application for the fun. I love this language but something disturb me ...Is there any way to do a #define (C mode) or a symbol (ruby mode).The ruby symbol is quite useful. It's just some name preceded by a "":"" (example "":guy"") every symbol is unique and can be use any where in the code.In my case I'd like to send a flag (connect or disconnect) to a function.What is the most elegant C# way to do that ?Here is what i'd like to do : At this point the my favorite answer is the enum solution ;) <code>  BgWorker.RunWorkersAsync(:connect)//...private void BgWorker_DoWork(object sender, DoWorkEventArgs e){ if (e.Arguement == :connect) //Do the job}",C# equivalent of the Ruby symbol
javascript prototype observer does not work in IE," In my ruby on rails app I am trying to use a Prototype Form.Element.Observer to run a count of the characters in a message. This works fine on Firefox/Safari/Chrome, but not on IE. On IE the observer simply does not fire. Is there a fix or a different way of doing this?My ruby tag looks like this: The countdown_field function looks like this: The resultant HTML looks like this: <code>  <%= countdown_field('txtmsg[memo]','memo-counter', 141, :frequency => 0.10) %> def countdown_field(field_id,update_id,max,options = {}) function = ""$('#{update_id}').innerHTML = (#{max} - $F('#{field_id}').length);"" count_field_tag(field_id,function,options) end def count_field_tag(field_id,function,options = {}) out = javascript_tag function, :defer => 'defer' out += observe_field(field_id, options.merge(:function => function)) return out end <textarea class=""memo-tag text txtmsg-memo"" id=""txtmsg[memo]"" name=""txtmsg[memo]"" /><p>You have <span id=""memo-counter"">...</span> characters left.</p><script defer=""defer"" type=""text/javascript""> $('memo-counter').innerHTML = (141 - $F('txtmsg[memo]').length);</script><script type=""text/javascript""> new Form.Element.Observer('txtmsg[memo]', 0.1, function(element, value) { $('memo-counter').innerHTML = (141 - $F('txtmsg[memo]').length);})</script>",observer does not work in IE
One-liner to Recursively List Directories in Ruby?," What is the fastest, most optimized, one-liner way to get an array of the directories (excluding files) in Ruby? How about including files? <code> ",One-liner to recursively list directories in Ruby?
Which key value store is the most promising/stable?," I'm looking to start using a key/value store for some side projects (mostly as a learning experience), but so many have popped up in the recent past that I've got no idea where to begin. Just listing from memory, I can think of:CouchDBMongoDBRiakRedisTokyo CabinetBerkeley DBCassandraMemcacheDBAnd I'm sure that there are more out there that have slipped through my search efforts. With all the information out there, it's hard to find solid comparisons between all of the competitors. My criteria and questions are:(Most Important) Which do you recommend, and why?Which one is the fastest?Which one is the most stable?Which one is the easiest to set up and install?Which ones have bindings for Python and/or Ruby?Edit:So far it looks like Redis is the best solution, but that's only because I've gotten one solid response (from ardsrk). I'm looking for more answers like his, because they point me in the direction of useful, quantitative information. Which Key-Value store do you use, and why?Edit 2:If anyone has experience with CouchDB, Riak, or MongoDB, I'd love to hear your experiences with them (and even more so if you can offer a comparative analysis of several of them) <code> ",Which key/value store is the most promising/stable?
Ruby Array find_first object ?," Am I missing something in the Array documentation? I have an array which contains up to one object satisfying a certain criterion. I'd like to efficiently find that object. The best idea I have from the docs is this: But I am unsatisfied for two reasons:That select made me traverse the whole array, even though we could have bailed after the first hit.I needed a line of code (with a condition) to flatten the candidates. Both operations are wasteful with foreknowledge that there's 0 or 1 satisfying objects.What I'd like is something like: which returns nil or the first object for which the block evaluates to true, ending the traversal at that object.Must I write this myself? All those other great methods in Array make me think it's there and I'm just not seeing it. <code>  candidates = my_array.select { |e| e.satisfies_condition? }found_it = candidates.first if !candidates.empty? array.find_first(block)",Ruby Array find_first object?
Test nested layout helper with RSpec and Hamlwhich," In ApplicationHelper I have such code: which behaves like this:application.html.haml: common_pages.html.haml: Then common_pages layout render within application layout.How I can test this helper with RSpec?When I call inside_layout from spec file: RSpec says error: But application works fine. <code>  def inside_layout layout = 'application', &block @template.instance_variable_set '@content_for_layout', capture(&block) concat \ @template.render :file => ""layouts/#{layout}"", :use_full_path => trueend !!!%html %head ... %body = yield - inside_layout do ... helper.inside_layout { } ActionView::MissingTemplate in 'ApplicationHelper inside_layout should render nested layout within application layout'Missing layout layouts/application.erb in view path",Test nested layout helper with RSpec and Haml
Is the bitnami Redmine package any good?," I am looking to set up a Redmine server on a Windows virtual machine on my local workstation. (Background in this related question.) I have zero knowledge of Ruby nor Rails, and while Redmine may be the opportunity to dip into those platforms somewhat, my first goal is to get it running as quickly and easily as possible. For that, I am eyeing the Bitnami Redmine Package. It promises point-and-click install, and a self-contained environment with everything you need.Apart from the learning factor, are there any serious limitations this method implies? Any serious cutdowns in customizability? I will be wanting to customize the template right away, for example, and install plugins. The package looks o.k. to me but before I install it, I was curious to know whether anybody would advise against it and why. Edit: The first impression is great. From 0 to a working Redmine installation in twelve minutes! Wow. <code> ",Anything speaking against the bitnami.org Ruby/Rails/Redmine Stack?
Calling Python from Ruby," Would it be possible to integrate Python (and/or Perl) and Ruby? I've looked at http://www.goto.info.waseda.ac.jp/~fukusima/ruby/python/doc/ and http://code.google.com/p/ruby-perl/ , but they both seem rather outdated.Has someone generated a Ruby interface for Python's C API?Edit: Python can be integrated with many other languages according to http://wiki.python.org/moin/IntegratingPythonWithOtherLanguages . However, that list doesn't include Ruby. <code> ",Would it be possible to integrate Python or Perl with Ruby?
Calling Perl and/or Python from Ruby," Would it be possible to integrate Python (and/or Perl) and Ruby? I've looked at http://www.goto.info.waseda.ac.jp/~fukusima/ruby/python/doc/ and http://code.google.com/p/ruby-perl/ , but they both seem rather outdated.Has someone generated a Ruby interface for Python's C API?Edit: Python can be integrated with many other languages according to http://wiki.python.org/moin/IntegratingPythonWithOtherLanguages . However, that list doesn't include Ruby. <code> ",Would it be possible to integrate Python or Perl with Ruby?
Would it be possible to transparently integrate Python or Perl with Ruby?," Would it be possible to integrate Python (and/or Perl) and Ruby? I've looked at http://www.goto.info.waseda.ac.jp/~fukusima/ruby/python/doc/ and http://code.google.com/p/ruby-perl/ , but they both seem rather outdated.Has someone generated a Ruby interface for Python's C API?Edit: Python can be integrated with many other languages according to http://wiki.python.org/moin/IntegratingPythonWithOtherLanguages . However, that list doesn't include Ruby. <code> ",Would it be possible to integrate Python or Perl with Ruby?
Writing a web simple webserver in Ruby," I want to create an extremely simple web server for development purposes in Ruby (no, dont want to use ready solutions).Here is the code: The idea is to run this script from the command line, providing another script, which will get the request on its standard input, and gives back the complete response on its standard output.So far so good, but this turns out to be really fragile, as it breaks on the second request with the error: Any idea how to improve the above code to be sufficient for easy use?Versions: Ubuntu 9.10 (2.6.31-20-generic), Ruby 1.8.7 (2009-06-12 patchlevel 174) [i486-linux] <code>  #!/usr/bin/rubyrequire 'socket'server = TCPServer.new('127.0.0.1', 8080)while connection = server.accept headers = [] length = 0 while line = connection.gets headers << line if line =~ /^Content-Length:\s+(\d+)/i length = $1.to_i end break if line == ""\r\n"" end body = connection.readpartial(length) IO.popen(ARGV[0], 'r+') do |script| script.print(headers.join + body) script.close_write connection.print script.read end connection.closeend /usr/bin/serve:24:in `write': Broken pipe (Errno::EPIPE) from /usr/bin/serve:24:in `print' from /usr/bin/serve:24 from /usr/bin/serve:23:in `popen' from /usr/bin/serve:23",Writing a simple webserver in Ruby
Run 2 threads in ruby at the same time," Is there some way to run 2 threads at the same time?I want to have my app run its current function and then bring up another thread running another function, that can change variables in the first thread. <code> ",How do I run two threads in Ruby at the same time?
Closest Ruby representation of a 'public static final' class variable in Java?," Given the Java code below, what's the closest you could represent these two static final variables in a Ruby class? And, is it possible in Ruby to distinguish between private static and public static variables as there is in Java? <code>  public class DeviceController{ ... private static final Device myPrivateDevice = Device.getDevice(""mydevice""); public static final Device myPublicDevice = Device.getDevice(""mydevice""); ... public static void main(String args[]) { ... }}",Closest Ruby representation of a 'private static final' and 'public static final' class variable in Java?
"Rails or Sinatra? which is good to start learning, for a php programmer?"," I've been working far too long with PHP and getting bored with it. I also want to learn a new language. I've been using Ruby and like it. I have to decide between Rails and Sinatra, so which one would you recommend? Is it true that Sinatra can't be used to build complex apps, and it's only for simple apps? <code> ",Rails or Sinatra? Which is good to start learning for a PHP programmer?
pluralize function in ruby NOT RAILS!," I am writing some Ruby code, not Rails, and I need to handle something like this: I have Rails installed so maybe I might be able to add a require clause at the top of the script, but does anyone know of a RUBY method that pluralizes strings? Is there a class I can require that can deal with this if the script isn't Rails but I have Rails installed?Edit: All of these answers were close but I checked off the one that got it working for me.Try this method as a helper when writing Ruby, not Rails, code: <code>  found 1 matchfound 2 matches def pluralize(number, text) return text.pluralize if number != 1 textend",Is there a pluralize  function in Ruby NOT Rails?
[Ruby] How can I randomly iterate through a large Range?," I would like to randomly iterate through a range. Each value will be visited only once and all values will eventually be visited. For example: where f(x) is some function that operates on each value. A Fisher-Yates shuffle is used to efficiently provide random ordering.My problem is that shuffle needs to operate on an array, which is not cool because I am working with astronomically large numbers. Ruby will quickly consume a large amount of RAM trying to create a monstrous array. Imagine replacing (0..9) with (0..99**99). This is also why the following code will not work: This code is very naive and quickly runs out of memory as tried obtains more entries.What sort of algorithm can accomplish what I am trying to do?[Edit1]: Why do I want to do this? I'm trying to exhaust the search space of a hash algorithm for a N-length input string looking for partial collisions. Each number I generate is equivalent to a unique input string, entropy and all. Basically, I'm ""counting"" using a custom alphabet.[Edit2]: This means that f(x) in the above examples is a method that generates a hash and compares it to a constant, target hash for partial collisions. I do not need to store the value of x after I call f(x) so memory should remain constant over time.[Edit3/4/5/6]: Further clarification/fixes.[Solution]: The following code is based on @bta's solution. For the sake of conciseness, next_prime is not shown. It produces acceptable randomness and only visits each number once. See the actual post for more details. <code>  class Array def shuffle ret = dup j = length i = 0 while j > 1 r = i + rand(j) ret[i], ret[r] = ret[r], ret[i] i += 1 j -= 1 end ret endend(0..9).to_a.shuffle.each{|x| f(x)} tried = {} # store previous attemptsbigint = 99**99bigint.times { x = rand(bigint) redo if tried[x] tried[x] = true f(x) # some function} N = size_of_rangeQ = ( 2 * N / (1 + Math.sqrt(5)) ).to_i.next_primeSTART = rand(N)x = STARTnil until f( x = (x + Q) % N ) == START # assuming f(x) returns x",How can I randomly iterate through a large Range?
Passing multiple codeblocks as arguments," I have a method which takes a code block. and I call it like this:opportunity { @some_array.empty? }But how do I pass it more than one code block so that I could use yield twice, something like this: and: I am aware that this example could be done without yield, but it's just to illustrate. <code>  def opportunity @opportunities += 1 if yield @performances +=1 endend def opportunity if yield_1 @opportunities += 1 end if yield_2 @performances +=1 endend opportunity {@some_other_array.empty?} { @some_array.empty? }",Passing multiple code blocks as arguments in Ruby
Dynamic Variable Names in Included Module in Ruby?," I'm hoping to implement something like all of the great plugins out there for ruby, so that you can do this: But I have one constraint: That helper method can only include a module; it can't define any variables or methods.The reason for this is because, I want the options hash to define something like type, and that could be converted into one of say 20 different 'workhorse' modules, all of which I could sum up in a line like this: Then those 'workhorses' would handle the options, doing things like: Here's what the structure looks like, and I'm wondering if you know the missing piece in the puzzle: That %Q? I'm not totally sure how to use, but I'm basically just wanting to somehow be able to pass the options hash from that helper method into the workhorse module. Is that possible? That way, the workhorse module could define all sorts of functionality, but I could name the variables whatever I wanted at runtime. <code>  acts_as_commentablehas_attached_file :avatar def dynamic_method(options = {}) include (""My::Helpers::#{options[:type].to_s.camelize}"").constantize(options)end has_many ""#{options[:something]}"" # 1 - The workhorse, encapsuling all dynamic variablesmodule My::Module def self.included(base) base.extend ClassMethods base.class_eval do include InstanceMethods end end module InstanceMethods self.instance_eval %Q? def #{options[:my_method]} ""world!"" end ? end module ClassMethods endend# 2 - all this does is define that helper methodmodule HelperModule def self.included(base) base.extend(ClassMethods) end module ClassMethods def dynamic_method(options = {}) # don't know how to get options through! include My::Module(options) end endend# 3 - send it to active_recordActiveRecord::Base.send(:include, HelperModule)# 4 - what it looks likeclass TestClass < ActiveRecord::Base dynamic_method :my_method => ""hello""endputs TestClass.new.hello #=> ""world!""",Pass Arguments to Included Module in Ruby?
Ruby: opening files relative to home directory," The following fails with Errno::ENOENT: No such file or directory, even if the file exists: However, I can do this: I have two questions:Why doesn't open process the tilde as pointing to the home directory?Is there a slicker way than File.expand_path? <code>  open('~/some_file') open(File.expand_path('~/some_file'))",How to open files relative to home directory
I want to download a file from a URL to save it. Any Rails way to do this or can I Ruby File Handling ?," I have a URL to an image which i want to save locally, so that I can use Paperclip to produce a thumbnail for my application. What's the best way to download and save the image? (I looked into ruby file handling but did not come across anything.)  <code> ",How can I download a file from a URL and save it in Rails?
I want to download a file from a URL to save it. Any Rails way to do this or can I do with Ruby File Handling?," I have a URL to an image which i want to save locally, so that I can use Paperclip to produce a thumbnail for my application. What's the best way to download and save the image? (I looked into ruby file handling but did not come across anything.)  <code> ",How can I download a file from a URL and save it in Rails?
Is this the best way to grab Common element from a Hash of arrays?," I'm trying to get a common element from a group of arrays in Ruby. Normally, you can use the & operator to compare two arrays, which returns elements that are present or common in both arrays. This is all good, except when you're trying to get common elements from more than two arrays. However, I want to get common elements from an unknown, dynamic number of arrays, which are stored in a hash. I had to resort to using the eval() method in ruby, which executes a string as actual code. Here's the function I wrote: This works and is great, but I'm wondering...eval, really? Is this the best way to do it? Are there even any other ways to accomplish this(besides a recursive function, of course). If anyone has any suggestions, I'm all ears. Otherwise, Feel free to use this code if you need to grab a common item or element from a group or hash of arrays, this code can also easily be adapted to search an array of arrays. <code>  def get_common_elements_for_hash_of_arrays(hash) # get an array of common elements contained in a hash of arrays, for every array in the hash. # [""1"",""2"",""3""] & [""2"",""4"",""5""] & [""2"",""5"",""6""] # => [""2""] # eval(""[\""1\"",\""2\"",\""3\""] & [\""2\"",\""4\"",\""5\""] & [\""2\"",\""5\"",\""6\""]"") # => [""2""] eval_string_array = Array.new # an array to store strings of Arrays, ie: ""[\""2\"",\""5\"",\""6\""]"", which we will join with & to get all common elements hash.each do |key, array| eval_string_array << array.inspect end eval_string = eval_string_array.join("" & "") # create eval string delimited with a & so we can get common values return eval(eval_string) endexample_hash = {:item_0 => [""1"",""2"",""3""], :item_1 => [""2"",""4"",""5""], :item_2 => [""2"",""5"",""6""] }puts get_common_elements_for_hash_of_arrays(example_hash) # => 2",Is this the best way to grab common elements from a Hash of arrays?
string multiplication, When I type this: I get: But it's not working if I do this: Why? <code>  puts 'repeat' * 3 >> repeat repeat repeat puts 3 * 'repeat',"Why isn't `""repeat"" * 3` the same as `3 * ""repeat""` in Ruby?"
how to manually add a cookie to Mechanize state?," I'm working in Ruby, but my question is valid for other languages as well.I have a Mechanize-driven application. The server I'm talking to sets a cookie using JavaScript (rather than standard set-cookie), so Mechanize doesn't catch the cookie. I need to pass that cookie back on the next GET request. The good news is that I already know the value of the cookie, but I don't know how to tell Mechanize to include it in my next GET request. <code> ",How to manually add a cookie to Mechanize state?
How to use becomes in Rails., I have a Post Class and a Comment Class. I have a post object and want to convert it to a Comment object. I went through Rails api and found becomes(klass).For now there is not association between a Post and Comment. So i tried but becomes method could not be found for @post object. Am i missing something ? <code>  @post.becomes(Comment),How to use becomes in Rails
How do I call a super class method ," I have two classes A, and B. Class B overrides the foo method of class A. Class B has a bar method where I want to call the foo method of the super class. What is the syntax for such a call? For class methods I can call the methods up the inheritance chain by explicitly prefixing the class name. I wonder if there is a similar idiom for instance methods. EditMy use case is general. For a specific case I know I can use alias technique. This is a common feature in Java or C++, so I am curious to know if it is possible to do this without adding extra code. <code>  class A def foo ""hello"" end endclass B < A def foo super + "" world"" end def bar # how to call the `foo` method of the super class? # something similar to super.foo endend class P def self.x ""x"" endendclass Q < P def self.x super + "" x"" end def self.y P.x endend",How do I call a super class method
What Great Ruby and Rails Developers Ought To Know," What should someone know as an Entry Level, Mid-level, and Senior Developer working with Rails? Across the board: theoretical knowledge, development tools, gems and more. What issues usually are at the interview? <code> ",What Ruby and Rails Developers Ought To Know?
implicit argument passing of super from method defined by define_method() is not supported. Specify all arguments explicitly. (ActionView::TemplateError)," In ""Agile Web Development with Rails"" (third edition) page 537 - 541 it has ""Custom Form Builders"" code as follows: This code doesn't work with Ruby 1.9.1. It returns error as follows:implicit argument passing of super from method defined by define_method() is not supported. Specify all arguments explicitly. (ActionView::TemplateError)My question is: What should I change in the code to fix this? <code>  class TaggedBuilder < ActionView::Helpers::FormBuilder # <p> # <label for=""product_description"">Description</label><br/> # <%= form.text_area 'description' %> #</p> def self.create_tagged_field(method_name) define_method(method_name) do |label, *args| @template.content_tag(""p"" , @template.content_tag(""label"" , label.to_s.humanize, :for => ""#{@object_name}_#{label}"") + ""<br/>"" + super) end end field_helpers.each do |name| create_tagged_field(name) end end",Implicit argument passing of super from method defined by define_method() is not supported
Nokogiri and Special Characters," I'm using Nokogiri and open-uri to grab the contents of the title tag on a webpage, but am having trouble with accented characters. What's the best way to deal with these? Here's what I'm doing: At this point, the title looks like this: Rag\303\271Instead of: RagHow can I have nokogiri return the proper character (e.g. in this case)?Here's an example URL:http://www.epicurious.com/recipes/food/views/Tagliatelle-with-Duck-Ragu-242037 <code>  require 'open-uri'require 'nokogiri'doc = Nokogiri::HTML(open(link))title = doc.at_css(""title"")","Nokogiri, open-uri, and Unicode Characters"
Start or ensulre that Delayed Job runs when an application/server restarts.," We have to use delayed_job (or some other background-job processor) to run jobs in the background, but we're not allowed to change the boot scripts/boot-levels on the server. This means that the daemon is not guaranteed to remain available if the provider restarts the server (since the daemon would have been started by a capistrano recipe that is only run once per deployment).Currently, the best way I can think of to ensure the delayed_job daemon is always running, is to add an initializer to our Rails application that checks if the daemon is running. If it's not running, then the initializer starts the daemon, otherwise, it just leaves it be.The question, therefore, is how do we detect that the Delayed_Job daemon is running from inside a script? (We should be able to start up a daemon fairly easily, bit I don't know how to detect if one is already active).Anyone have any ideas?Regards,BernieBased on the answer below, this is what I came up with. Just put it in config/initializers and you're all set: <code>  #config/initializers/delayed_job.rbDELAYED_JOB_PID_PATH = ""#{Rails.root}/tmp/pids/delayed_job.pid""def start_delayed_job Thread.new do `ruby script/delayed_job start` endenddef process_is_dead? begin pid = File.read(DELAYED_JOB_PID_PATH).strip Process.kill(0, pid.to_i) false rescue true endendif !File.exist?(DELAYED_JOB_PID_PATH) && process_is_dead? start_delayed_jobend",Start or ensure that Delayed Job runs when an application/server restarts.
Sintra app in a gem," I have a Sinatra application I've created and I'd like to package it as a gem-based binary.I have my gemspec and gem set up to generate a suitable executable that points to the my_sinatra_app.rb (which is executable) but the sinatra server never runs. Any ideas why and how to make it work?my_sinatra_app executable: <code>  #!/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/bin/ruby## This file was generated by RubyGems.require 'rubygems'version = "">= 0""if ARGV.first =~ /^_(.*)_$/ and Gem::Version.correct? $1 then version = $1 ARGV.shiftendgem 'my_sinatra_app', versionload Gem.bin_path('my_sinatra_app', 'my_sinatra_app', version)",Sinatra app in a gem
Digitally sign email in ruby with S/MIME, Is there a way in Ruby to digitally sign email messages with S/MIME? Our group uses PKI and our users are conditioned to expect digital signatures for important messages.I know I can invoke the openssl command line tool: but I am hoping to utilize a Ruby solution. <code>  openssl smime -sign -signer $CERT_FILE -passin pass:$CERT_PASS -in $UNSIGNED_MAIL -out $SIGNED_MAIL -certfile $CERT_CA_FILE -from 'your ' -to 'recipients <email@address>' -subject 'The Subject',Digitally sign email in Ruby with S/MIME
Problem with mysql gem," When I try rake db:migrate, I get the following error: And when I try to gem install mysql $ sudo gem install mysql -- --with-mysql-config=/usr/local/mysql/bin/mysql_confighas also been tried but same error. I'm on a Fedora 10. Help will be much appreciated.Cheers! <code>  The bundled mysql.rb driver has been removed from Rails 2.2.Please install the mysql gem and try again: gem install mysql.rake aborted! no such file to load -- mysql Building native extensions. This could take a while... ERROR: Error installingmysql: ERROR: Failed to build gem native extension. /usr/bin/ruby extconf.rbCan't find header files for ruby. Gem files will remain installed in/usr/lib/ruby/gems/1.8/gems/mysql-2.8.1 for inspection.",Problem installing MySQL gem on Fedora
Running a Ruby interpreter on the iPad," I'll be taking a trip soon with my iPad, without my laptop. I'd like to continue to tinker with Ruby while I'm on the road. I have an iPhone developer program membership, and I'm not interested in submitting this stuff to the app store.I found the shinycocos project, which appears to embed a Ruby interpreter in an app. But I can't get it to run, and it seems pretty customized for running cocos2d stuff.My first goal is to run an interactive command line like Try Ruby!. After that, I'd like to enter small programs in a UITextView and run them. I'd appreciate any clues, tips, or existing projects you might know of. <code> ",Running a Ruby interpreter on iPad
Why are my basic Heroku Apps Taking 2 seconds to load?," I created two very simple Heroku apps to test out the service, but it's often taking several seconds to load the page when I first visit them:Cropify - Basic Sinatra App (on github)Textile2HTML - Even more basic Sinatra App (on github)All I did was create a simple Sinatra app and deploy it. I haven't done anything to mess with or test the Heroku servers. What can I do to improve response time? It's very slow right now and I'm not sure where to start. The code for the projects are on github if that helps. <code> ",Why are my basic Heroku apps taking two seconds to load?
system call in Ruby," I'm a beginner in ruby and in programming as well and need help with system call for moving a file from source to destination like this: Is it possible to do this in Ruby? If so, what is the correct syntax? <code>  system(mv ""#{@SOURCE_DIR}/#{my_file} #{@DEST_DIR}/#{file}"")",System call in Ruby
Drying repeated specs in RSpec," In the test below, the Bar and Baz blocks contain identical specs.Leaving aside why such repetition was necessary in the first place, I'm wondering how one could dry this up.I tried turning the blocks into objects and calling them under Bar and Baz, but possibly because I did not get the scopes right, I have not been able to make it work. <code>  describe Foo do describe Bar do before(:each) do prepare end it ""should do something"" do true end it ""should do something else"" do true end end describe Baz do before(:each) do prepare_something_else end it ""should do something"" do true end it ""should do something else"" do true end endend",DRYing repeated specs in RSpec
How do I order by foreign attribute for belongs_to refernece where there are 2 keys to foreign table," I have a Model which has a belongs_to association with another Model as follows If I wanted to find all articles for a particular genre ordered by author I would do something like the following However if Article happens to have two references to User how can I sort on :author? I have tried My first attempted solution A half solution is as follows. It was not totally obvious but looking at my logs I figured it out. Basically you need to do the followingarticles = Article.all(:include => [:editor,:author], :order => 'articles_authors.name') It is the naming of the alias that I missed (articles_authors)The issue with this is that the following does not work although it seems like it should.articles = Article.all(:include => [:editor,:author], :order => 'authors_articles.name') This may be an issue if you have a UI table and want to send the order field to the controller. So you may want to first order on author then editor. But it would fail for for one of the queries (unless you dynamically change the include too) <code>  class Article belongs_to :author, :class_name => ""User""end articles = Article.all(:includes => [:author], :order => ""users.name"") class Article belongs_to :editor, :class_name => ""User"" belongs_to :author, :class_name => ""User""end articles = Article.all(:includes => [:author], :order => ""users.name"") #=> incorrect resultsarticles = Article.all(:includes => [:author], :order => ""authors.name"") #=> Exception Thrown class Article belongs_to :editor, :class_name => ""User"" belongs_to :author, :class_name => ""User""end articles = Article.all(:include => [:editor,:author], :order => 'authors_articles.name') articles = Article.all(:include => [:editor,:author], :order => 'editors_articles.name')",How do I order by foreign attribute for belongs_to reference where there are 2 keys to foreign table
How to tell a connect timeout error from a read timeout errror in Ruby's Net::HTTP," My question is related to How to rescue timeout issues (Ruby, Rails).Here's the common way to rescue from a timeout: I'd like to determine if the exception was raised while trying to connect to the host, or if it was raised while trying to read from the host. Is this possible? <code>  def action # Post using Net::HTTPrescue Timeout::Error => e # Do somethingend",How to tell a connect timeout error from a read timeout error in Ruby's Net::HTTP
Why ruby object has two to_s and inspect methods that (looks like) do the same thing?," Why do this Ruby object both a to_s and inspect methods that appear to do the same thing?The p method calls inspect and puts/print calls to_s for representing the object.If I run I get Then, why does Ruby have two functions do the same thing? What is the difference between to_s and inspect?And what's the difference between puts, print, and p?If I comment out the to_s or inspect function, I get as follows. <code>  class Graph def initialize @nodeArray = Array.new @wireArray = Array.new end def to_s # called with print / puts ""Graph : #{@nodeArray.size}"" end def inspect # called with p ""G"" endendif __FILE__ == $0 gr = Graph.new p gr print gr puts grend GGraph : 0Graph : 0 #<Graph:0x100124b88>#<Graph:0x100124b88>",Why do this Ruby object have both to_s and inspect methods that appear to do the same thing?
"Why ruby object has two to_s and inspect methods that do the same thing? Or, so it seems."," Why do this Ruby object both a to_s and inspect methods that appear to do the same thing?The p method calls inspect and puts/print calls to_s for representing the object.If I run I get Then, why does Ruby have two functions do the same thing? What is the difference between to_s and inspect?And what's the difference between puts, print, and p?If I comment out the to_s or inspect function, I get as follows. <code>  class Graph def initialize @nodeArray = Array.new @wireArray = Array.new end def to_s # called with print / puts ""Graph : #{@nodeArray.size}"" end def inspect # called with p ""G"" endendif __FILE__ == $0 gr = Graph.new p gr print gr puts grend GGraph : 0Graph : 0 #<Graph:0x100124b88>#<Graph:0x100124b88>",Why do this Ruby object have both to_s and inspect methods that appear to do the same thing?
"Why do this Ruby object have two to_s and inspect methods that do the same thing? Or, so it seems."," Why do this Ruby object both a to_s and inspect methods that appear to do the same thing?The p method calls inspect and puts/print calls to_s for representing the object.If I run I get Then, why does Ruby have two functions do the same thing? What is the difference between to_s and inspect?And what's the difference between puts, print, and p?If I comment out the to_s or inspect function, I get as follows. <code>  class Graph def initialize @nodeArray = Array.new @wireArray = Array.new end def to_s # called with print / puts ""Graph : #{@nodeArray.size}"" end def inspect # called with p ""G"" endendif __FILE__ == $0 gr = Graph.new p gr print gr puts grend GGraph : 0Graph : 0 #<Graph:0x100124b88>#<Graph:0x100124b88>",Why do this Ruby object have both to_s and inspect methods that appear to do the same thing?
"Why do this Ruby object have two to_s and inspect methods that do the same thing? Or, so it seems"," Why do this Ruby object both a to_s and inspect methods that appear to do the same thing?The p method calls inspect and puts/print calls to_s for representing the object.If I run I get Then, why does Ruby have two functions do the same thing? What is the difference between to_s and inspect?And what's the difference between puts, print, and p?If I comment out the to_s or inspect function, I get as follows. <code>  class Graph def initialize @nodeArray = Array.new @wireArray = Array.new end def to_s # called with print / puts ""Graph : #{@nodeArray.size}"" end def inspect # called with p ""G"" endendif __FILE__ == $0 gr = Graph.new p gr print gr puts grend GGraph : 0Graph : 0 #<Graph:0x100124b88>#<Graph:0x100124b88>",Why do this Ruby object have both to_s and inspect methods that appear to do the same thing?
Why do this Ruby object have two to_s and inspect methods that seems do the same thing?," Why do this Ruby object both a to_s and inspect methods that appear to do the same thing?The p method calls inspect and puts/print calls to_s for representing the object.If I run I get Then, why does Ruby have two functions do the same thing? What is the difference between to_s and inspect?And what's the difference between puts, print, and p?If I comment out the to_s or inspect function, I get as follows. <code>  class Graph def initialize @nodeArray = Array.new @wireArray = Array.new end def to_s # called with print / puts ""Graph : #{@nodeArray.size}"" end def inspect # called with p ""G"" endendif __FILE__ == $0 gr = Graph.new p gr print gr puts grend GGraph : 0Graph : 0 #<Graph:0x100124b88>#<Graph:0x100124b88>",Why do this Ruby object have both to_s and inspect methods that appear to do the same thing?
Calling another ruby script from a ruby script," In ruby, is it possible to specify to call another ruby script using the same ruby interpreter as the original script is being run by?For example, if a.rb runs b.rb a couple of times, is it possible to replace with something like so that if you used ruby1.9.1 a.rb on the original, ruby1.9.1 would be used on b.rb, but if you just used ruby a.rb on the original, ruby would be used on b.rb?I'd prefer not to use shebangs, as I'd like it to be able to run on different computers, some of which don't have /usr/bin/env.Edit: I didn't mean load or require and the like, but spawning new processes (so I can use multiple CPUs). <code>  system(""ruby"", ""b.rb"", ""foo"", ""bar"") run_ruby(""b.rb"", ""foo"", ""bar"")",Running another ruby script from a ruby script
Sorting an array in descending order in Ruby.," I have an array of hashes: I am trying to sort this array in descending order according to the value of :bar in each hash.I am using sort_by to sort above array: However, this sorts the array in ascending order. How do I make it sort in descending order?One solution was to do following: But that negative sign does not seem appropriate. <code>  [ { :foo => 'foo', :bar => 2 }, { :foo => 'foo', :bar => 3 }, { :foo => 'foo', :bar => 5 },] a.sort_by { |h| h[:bar] } a.sort_by { |h| -h[:bar] }",How to sort an array in descending order in Ruby
"Count the number of lines in a file with Ruby, without reading entire file into memory"," I'm processing huge data files (millions of lines each). Before I start processing I'd like to get a count of the number of lines in the file, so I can then indicate how far along the processing is. Because of the size of the files, it would not be practical to read the entire file into memory, just to count how many lines there are. Does anyone have a good suggestion on how to do this? <code> ",Count the number of lines in a file without reading entire file into memory?
alternative to rescue in ruby ?, It seems like I have begin ... rescue ... end statements everywhere in my code! This doesn't seem like the correct thing to do.Can anyone suggest how I can catch any exceptions without having to place everything inside begin ... rescue ... end? Any way to just tell Ruby to shut up and just keep going even if an exception is raised? <code> ,Alternative to rescue in Ruby?
Adding images and embedding video - Ruby on Rails Blog, What is the best way to allow for the adding of images and embedding of video in the body:text field of a Ruby on Rails blog. I understand that I can use an attachment like Paperclip to add a photo to a record but I am wondering how to get images/vids into the actual body of the post.  <code> ,What is the best WYSIWYG for Rails - Ruby on Rails Blog
Rails debugging rails tasks," When I write debugger it does not start: If I run rake my:task --debugger,it returns me to console immediately. How is it possible to debug rake tasks? <code>  NoMethodError: undefined method `run_init_script' for Debugger:Modulefrom /usr/local/lib/ruby/gems/1.8/gems/ruby-debug-base-0.10.3/lib/ruby-debug-base.rb:239:in `debugger'from (irb):4",Ruby on Rails: debugging rake tasks
What is the best place to store globals in Rails app?," I was wondering if there is the best practice on where to store global settings in a rails app. What I mean by that is i.e: I have a few globals defined that may change, but not likely and it seems inappropriate to store them in DB since they are used so much. For instance I have SYSTEM_EMAIL & SYSTEM_EMAIL_SIGNATURE & SYSTEM_STORAGE_ROOT. Right now I keep them in environment.rb, but I'm not sure if this is the right palce to store them.Thank youEDIT:Accepted answer still stands as appropriate, however I since moved on to using https://github.com/markbates/configatron , there are other options but I like configatron the most. <code> ",Where is the best place to store globals in Rails app?
Beginner to RUBY - require_relative problem," I'm learning Ruby (using version 1.8.6) on Windows 7.When I try to run the stock_stats.rb program below, I get the following error: I have three v.small code files:stock_stats.rb csv_reader.rb book_in_stock.rb Thanks in advance for any help. <code>  C:\Users\Will\Desktop\ruby>ruby stock_stats.rbstock_stats.rb:1: undefined method `require_relative' for main:Object (NoMethodError) require_relative 'csv_reader'reader = CsvReader.newARGV.each do |csv_file_name| STDERR.puts ""Processing #{csv_file_name}"" reader.read_in_csv_data(csv_file_name)endputs ""Total value = #{reader.total_value_in_stock}"" require 'csv' require_relative 'book_in_stock'class CsvReader def initialize @books_in_stock = [] end def read_in_csv_data(csv_file_name) CSV.foreach(csv_file_name, headers: true) do |row| @books_in_stock << BookInStock.new(row[""ISBN""], row[""Amount""]) end end # later we'll see how to use inject to sum a collection def total_value_in_stock sum = 0.0 @books_in_stock.each {|book| sum += book.price} sum end def number_of_each_isbn # ... endend require 'csv' require_relative 'book_in_stock'class CsvReader def initialize @books_in_stock = [] end def read_in_csv_data(csv_file_name) CSV.foreach(csv_file_name, headers: true) do |row| @books_in_stock << BookInStock.new(row[""ISBN""], row[""Amount""]) end end # later we'll see how to use inject to sum a collection def total_value_in_stock sum = 0.0 @books_in_stock.each {|book| sum += book.price} sum end def number_of_each_isbn # ... endend ",Why doesn't relative_require work on Ruby 1.8.6?
ruby: sum corresponding members of two arrays," I've got two (or more) arrays with 12 integers in each (corresponding to values for each month). All I want is to add them together so that I've got a single array with summed values for each month. Here's an example with three values:[1,2,3] and [4,5,6] => [5,7,9]The best I could come up with was: Is there a better way of doing this? It just seems such a basic thing to want to do. <code>  [[1,2,3],[4,5,6]].transpose.map{|arr| arr.inject{|sum, element| sum+element}} #=> [5,7,9]",ruby: sum corresponding members of two or more arrays
RubyGems installation errors when using 'sudo' or not," I have a machine that is running Ubuntu Hardy, which provides its own RubyGems package. Unfortunately that version of RubyGems (1.1.1) is too old to do anything useful with, so I decided to manually update RubyGems to the current version (1.3.6). That part went smoothly, and if I do gem -v, I get 1.3.6 which is expected. The problem is when I try to do: sudo gem install rack, it returns this error: Usually when I install gems as root, it knows to install it into /usr/lib/ruby/gems, so why is it checking my home directory at all? Another quirk is when I do gem install rack (not as root), it says: which is where I want it to go. I've already tried clearing source_caches, trying different versions of RubyGems (1.3.5), forcing installation into /usr/lib with -i to no avail. Any ideas on why RubyGems is so insistent on checking my /home directory when installing as root? <code>  ERROR: While executing gem ... (Errno::EACCES)Permission denied - /home/username/.gem ERROR: While executing gem ... (Gem::FilePermissionError)You don't have write permissions into the /usr/lib/ruby/gems/1.8 directory.",RubyGems installation errors both when using 'sudo' and not using sudo
Silencing Deprecation warinings in Rails 3, Can anyone tell me how to silence deprecation warinings in Rails 3?I have a few situations where it is throwing false positives. Namely using - for loops in haml and f.error_messages from the dynamic_form plugin.Thanks <code> ,Silencing Deprecation warnings in Rails 3
Dropbox like service with git, Do you have any advice as how to setup a Dropbox like service using git?Do you think git is the right tool for this?I was thinking about using a git + rush solution what do you think about it? <code> ,Dropbox like service with git -- no with rsync and inotify
 how to tell bulider to not to escape values," Builder is escaping the content and is converting the b tag into an escaped value. How do I tell Builder to not escape it? I am using Ruby 1.8.7. <code>  ruby-1.8.7-p249 > xml = Builder::XmlMarkup.new => <inspect/> ruby-1.8.7-p249 > xml.foo '<b>wow</b>' => ""<inspect/><foo>&lt;b&gt;wow&lt;/b&gt;</foo>"" ruby-1.8.7-p249 > ",How to tell Builder to not to escape values
What are :+ and &+ in ruby?," I've seen these several times but I can't figure out how to use them. The pickaxe says that these are special shortcuts but I wasn't able to find the syntactical description.I've seen them in such contexts: to calculate sum for example. <code>  [1,2,3].inject(:+)",What are :+ and &#38;:+ in Ruby?
What are :+ and &+ in Ruby?," I've seen these several times but I can't figure out how to use them. The pickaxe says that these are special shortcuts but I wasn't able to find the syntactical description.I've seen them in such contexts: to calculate sum for example. <code>  [1,2,3].inject(:+)",What are :+ and &#38;:+ in Ruby?
What are :+ and &:+ in Ruby?," I've seen these several times but I can't figure out how to use them. The pickaxe says that these are special shortcuts but I wasn't able to find the syntactical description.I've seen them in such contexts: to calculate sum for example. <code>  [1,2,3].inject(:+)",What are :+ and &#38;:+ in Ruby?
What are `:+` and `&:+` in Ruby?," I've seen these several times but I can't figure out how to use them. The pickaxe says that these are special shortcuts but I wasn't able to find the syntactical description.I've seen them in such contexts: to calculate sum for example. <code>  [1,2,3].inject(:+)",What are :+ and &#38;:+ in Ruby?
Strange ruby behavior when using Hash.new([])," Consider this code: Thats all fine, but: At this point I expect the hash to be: but its far from that. What is happening and how can I get the behavior I expect? <code>  h = Hash.new(0) # New hash pairs will by default have 0 as valuesh[1] += 1 #=> {1=>1}h[2] += 2 #=> {2=>2} h = Hash.new([]) # Empty array as default valueh[1] <<= 1 #=> {1=>[1]} Okh[2] <<= 2 #=> {1=>[1,2], 2=>[1,2]} Why did `1` change?h[3] << 3 #=> {1=>[1,2,3], 2=>[1,2,3]} Where is `3`? {1=>[1], 2=>[2], 3=>[3]}","Strange, unexpected behavior (disappearing/changing values) when using Hash default value, e.g. Hash.new([])"
"Strange ruby behavior when using Hash default value, e.g. Hash.new([])"," Consider this code: Thats all fine, but: At this point I expect the hash to be: but its far from that. What is happening and how can I get the behavior I expect? <code>  h = Hash.new(0) # New hash pairs will by default have 0 as valuesh[1] += 1 #=> {1=>1}h[2] += 2 #=> {2=>2} h = Hash.new([]) # Empty array as default valueh[1] <<= 1 #=> {1=>[1]} Okh[2] <<= 2 #=> {1=>[1,2], 2=>[1,2]} Why did `1` change?h[3] << 3 #=> {1=>[1,2,3], 2=>[1,2,3]} Where is `3`? {1=>[1], 2=>[2], 3=>[3]}","Strange, unexpected behavior (disappearing/changing values) when using Hash default value, e.g. Hash.new([])"
"Strange behavior when using Hash default value, e.g. Hash.new([])"," Consider this code: Thats all fine, but: At this point I expect the hash to be: but its far from that. What is happening and how can I get the behavior I expect? <code>  h = Hash.new(0) # New hash pairs will by default have 0 as valuesh[1] += 1 #=> {1=>1}h[2] += 2 #=> {2=>2} h = Hash.new([]) # Empty array as default valueh[1] <<= 1 #=> {1=>[1]} Okh[2] <<= 2 #=> {1=>[1,2], 2=>[1,2]} Why did `1` change?h[3] << 3 #=> {1=>[1,2,3], 2=>[1,2,3]} Where is `3`? {1=>[1], 2=>[2], 3=>[3]}","Strange, unexpected behavior (disappearing/changing values) when using Hash default value, e.g. Hash.new([])"
Ruby IRB - Requires and Scope," The file welcome.rb contains: But in IRB, I can't access the variable I just created: What is the best way to bring in predefined variables and have initialization work done when you require something into your IRB session? Global variables don't seem like the right path. <code>  welcome_message = ""hi there"" require './welcome.rb'puts welcome_message # => undefined local variable or method `welcome_message' for main:Object",How can I access a variable defined in a Ruby file I required in IRB?
How to split a Ruby array into X parts," I have an array How can I split or ""chunk"" this into smaller arrays? <code>  foo = %w(1 2 3 4 5 6 7 8 9 10) class Array def chunk(size) # return array of arrays endendfoo.chunk(3)# => [[1,2,3],[4,5,6],[7,8,9],[10]]",How to split (chunk) a Ruby array into parts of X elements?
How to split a Ruby array into parts of X elements," I have an array How can I split or ""chunk"" this into smaller arrays? <code>  foo = %w(1 2 3 4 5 6 7 8 9 10) class Array def chunk(size) # return array of arrays endendfoo.chunk(3)# => [[1,2,3],[4,5,6],[7,8,9],[10]]",How to split (chunk) a Ruby array into parts of X elements?
Encryption-Decreyption in Rails, I am using require 'digest/sha1' to encrypt my password and save into database. During login I authenticate by matching the encrypted password saved in database and again encrypted the one use enter in password field. As of now everything works fine but now I want to do 'Forgot Password' functionality. To do this I need to decrypt the password which is saved in database to find original one. How to decrypt using digest/sha1?Or does anyone know any algorithm which supports encryption & decryption as well?I am using ruby on rails so I need Ruby way to accomplish it. <code> ,Encryption-Decryption in Rails
emacs-rails vs rinari??, I'm just coming back to rails coding after a long hiatus. I was using rinari previously but noticed that there's a new version of emacs-rails. Is anyone using either? Any preferences for one over the other? What are people using for their rails projects within emacs these days? <code> ,emacs-rails vs rinari?
watermark existing pdf with  ruby, I would like to add a dynamically generated text. Is there a way to watermark an existing PDF in Ruby? <code> ,Watermark in existing PDF in Ruby
win32 ruby1.9 regexp and cyrillic string," The question is why \w ignore cyrillic characters?I have installed latest ruby package from http://rubyinstaller.org/. Here is my output of ruby -v As far as i know 1.9 oniguruma regular expression library has full support for unicode characters. <code>  #coding: utf-8str2 = ""asdf""p str2.encoding #<Encoding:UTF-8> p str2.scan /\p{Cyrillic}/ #found all cyrillic charactersstr2.gsub!(/\w/u,'') #removes only latin charactersputs str2 ruby 1.9.1p378 (2010-01-10 revision 26273) [i386-mingw32]",How to specify Regexp for unicode cyrillic characters in Ruby 1.9
urldecode in ruby ?, How do I transform into its original format? Is there a urldecode? <code>  www.bestbuy.com/site/Electronics\Audio\abcat0200000.c=3fid=3dabcat0200000 www.bestbuy.com/site/Electronics/Audio/abcat0200000.c?id=abcat0200000,urldecode in ruby?
Would a Centralized Blogging Service Work?," If there's a better place to ask this, please let me know.Every time I build a new website/blog/shopping-cart/etc., I keep trying to do the following:Extract out common functionality into reusable code (Rubygems and jQuery plugins mostly)If possible, convert that gem into a small service so I never have to deal with a database for the objects involved (by service, I mean something lean and mean, usually built with the Sinatra Web Framework with a few core models).My assumption is, if I can remove dependencies on local databases, that will make it easier and more scalable in the long run (scalable in terms of reusability and manageability, not necessarily database/performance). I'm not sure if that's a good or bad assumption yet. What do you think?I've made this assumption because of the following reason: Most serious database/model functionality has been built on the internet somewhere.Just to name a few:Social Network API: FacebookMessaging API: TwitterMailing API: GoogleEvent API: EventbriteShopping API: ShopifyComment API: DisqusForm API: WufooImage API: PicasaVideo API: Youtube...Each of those things are fairly complicated to build from scratch and to make as optimized, simple, and easy to use as those companies have made them.So if I build an app that shows pictures (picasa) on an Event page (eventbrite), and you can see who joined the event (facebook events), and send them emails (google apps api), and have them fill out monthly surveys (wufoo), and watch a video when they're done (youtube), all integrated into a custom, easy to use website, and I can do that without ever creating a local database, is that a good thing?I ask because there's two things missing from the puzzle that keep forcing me to create that local database:Post APIRESTful/Pretty Url APIWhile there's plenty of Blogging systems and APIs for them, there is no one place where you can just write content and have it part of some massive thing. For every app, I have to use code for creating pretty/restful urls, and that saves posts. But it seems like that should be a service!Question is, is that what the website is? ...That place to integrate the worlds services for my specific cause... and, sigh, to store posts that only my site has access to. Will everyone always need ""their own blog""? Why not just have a profile and write lots of content on an established platform like StackOverflow or Facebook?... That way I can write apps entirely without a database and know that I'm doing it right.Note: Of course at some point you'd need a database, if you were doing something unique or new. But for the case where you're just rewiring information or creating things like videos, events, and products, is it really necessary anymore?? <code> ",Do Websites need Local Databases Anymore?
devise register confirmation," I have a User and an Admin role in my project. I created my authentication with Devise. In my admin role I don't have any confirmation. In my User model I have the following: My migration looks like: In my routes.rb I added following statements: After user registration I am redirected to the controller main with the flash notice, ""You have signed up successfully,"" and I am logged in. But I dont want to be logged in, because I have not confirmed my new user account yet. If I open the console I see in the logs the confirmation mail text, but I am already logged in. I cant explain why. Does anyone have an idea? If I copy out the confirmation-token from the logs and confirm my account, I can log in, but if I dont confirm, I also can log in. <code>  devise :database_authenticatable, :confirmable, :recoverable, :rememberable, :trackable, :validatable, :timeoutable, :registerable# Setup accessible (or protected) attributes for your modelattr_accessible :email, :username, :prename, :surname, :phone, :street, :number, :location, :password, :password_confirmation class DeviseCreateUsers < ActiveRecord::Migration def self.up create_table(:users) do |t| t.database_authenticatable :null => false t.confirmable t.recoverable t.rememberable t.trackable t.timeoutable t.validateable t.string :username t.string :prename t.string :surname t.string :phone t.string :street t.integer :number t.string :location t.timestamps end add_index :users, :email, :unique => true add_index :users, :confirmation_token, :unique => true add_index :users, :reset_password_token, :unique => true add_index :users, :username, :unique => true add_index :users, :prename, :unique => false add_index :users, :surname, :unique => false add_index :users, :phone, :unique => false add_index :users, :street, :unique => false add_index :users, :number, :unique => false add_index :users, :location, :unique => false end def self.down drop_table :users endend map.devise_for :adminsmap.devise_for :users, :path_names => { :sign_up => ""register"", :sign_in => ""login"" }map.root :controller => ""main""",Devise registration confirmation
"In Ruby, why does a method invocation not be able to be treated as a unit when ""do"" and ""end"" is used?"," The following question is related to the question ""Ruby Print Inject Do Syntax"". My question is, can we insist on using do and end and make it work with puts or p?This works: so, is it correct to say, inject is an instance method of the Array object, and this instance method takes a block of code, and then returns a number. If so, then it should be no different from calling a function or method and getting back a return value: or In the above two cases, we can directly say so, there is no way to make it work directly by using the following 2 ways: but it gives grouping the method call using ( ) doesn't work either: and this gives: finally, the following version works: but why doesn't the grouping of the method invocation using ( ) work in the earlier example? What if a programmer insist that he uses do and end, can it be made to work? <code>  a = [1,2,3,4]b = a.inject do |sum, x| sum + xendputs b # prints out 10 b = foo(3)puts b b = circle.getRadius()puts b puts foo(3)puts circle.getRadius() a = [1,2,3,4]puts a.inject do |sum, x| sum + xend ch01q2.rb:7:in `inject': no block given (LocalJumpError) from ch01q2.rb:4:in `each' from ch01q2.rb:4:in `inject' from ch01q2.rb:4 a = [1,2,3,4]puts (a.inject do |sum, x| sum + x end) ch01q3.rb:4: syntax error, unexpected kDO_BLOCK, expecting ')'puts (a.inject do |sum, x| ^ch01q3.rb:4: syntax error, unexpected '|', expecting '='puts (a.inject do |sum, x| ^ch01q3.rb:6: syntax error, unexpected kEND, expecting $end end) ^ a = [1,2,3,4]puts a.inject { |sum, x| sum + x}","In Ruby, why is a method invocation not able to be treated as a unit when ""do"" and ""end"" is used?"
"In Ruby, why is a method invocation not be able to be treated as a unit when ""do"" and ""end"" is used?"," The following question is related to the question ""Ruby Print Inject Do Syntax"". My question is, can we insist on using do and end and make it work with puts or p?This works: so, is it correct to say, inject is an instance method of the Array object, and this instance method takes a block of code, and then returns a number. If so, then it should be no different from calling a function or method and getting back a return value: or In the above two cases, we can directly say so, there is no way to make it work directly by using the following 2 ways: but it gives grouping the method call using ( ) doesn't work either: and this gives: finally, the following version works: but why doesn't the grouping of the method invocation using ( ) work in the earlier example? What if a programmer insist that he uses do and end, can it be made to work? <code>  a = [1,2,3,4]b = a.inject do |sum, x| sum + xendputs b # prints out 10 b = foo(3)puts b b = circle.getRadius()puts b puts foo(3)puts circle.getRadius() a = [1,2,3,4]puts a.inject do |sum, x| sum + xend ch01q2.rb:7:in `inject': no block given (LocalJumpError) from ch01q2.rb:4:in `each' from ch01q2.rb:4:in `inject' from ch01q2.rb:4 a = [1,2,3,4]puts (a.inject do |sum, x| sum + x end) ch01q3.rb:4: syntax error, unexpected kDO_BLOCK, expecting ')'puts (a.inject do |sum, x| ^ch01q3.rb:4: syntax error, unexpected '|', expecting '='puts (a.inject do |sum, x| ^ch01q3.rb:6: syntax error, unexpected kEND, expecting $end end) ^ a = [1,2,3,4]puts a.inject { |sum, x| sum + x}","In Ruby, why is a method invocation not able to be treated as a unit when ""do"" and ""end"" is used?"
how can multiple trailing slashes can be removed from an url in Ruby," What I'm trying to achieve here is lets say we have two example URLs: How can I extract the striped down URLs? URI.parse in Ruby sanitizes certain type of malformed URL but is ineffective in this case.If we use regex then /^(.*)\/$/ removes a single slash / from url1 and is ineffective for url2. Is anybody aware of how to handle this type of URL parsing? The point here is I don't want my system to have http://www.example.com/ and http://www.example.com being treated as two different URLs. And same goes for http://emy.dod.com/kaskaa/dkaiad/amaa//// and http://emy.dod.com/kaskaa/dkaiad/amaa/. <code>  url1 = ""http://emy.dod.com/kaskaa/dkaiad/amaa//////////""url2 = ""http://www.example.com/"" url1 = ""http://emy.dod.com/kaskaa/dkaiad/amaa""url2 = ""http://http://www.example.com""",How can multiple trailing slashes can be removed from a URL in Ruby
Escape doube and single backslashes in a string in Ruby," I'm trying to access a network path in my ruby script on a windows platform in a format like this. Now If I try to use this as a path, it won't work. Single backslashes are not properly escaped for this script. I tried everything I could think of to properly escape slashes in the path. However I can't escape that single backslash - because of it's special meaning. I tried single quotes, double quotes, escaping backslash itself, using alternate quotes such as %Q{} or %q{}, using ascii to char conversion. Nothing works in a sense that I'm not doing it right. :-) Right now the temp solution is to Map a network drive N:\ pointing to that path and access it that way, but that not a solution.Does anyone have any idea how to properly escape single backslashes?Thank you <code>  \\servername\some windows share\folder 1\folder2\ path = ""\\servername\some windows share\folder 1\folder2\""d = Dir.new(path)",Escape double and single backslashes in a string in Ruby
how to write to file in ruby on rail?, I need to read the data out of database and then save it in a text file.How can I do that in Ruby? Is there any file management system in Ruby? <code> ,How to write to file in Ruby?
"What database to use with Ruby on Rails, based on actual Hosting services ?"," I've been looking for hosting services and I still don't know what kind of database is the most commom. It seems to be MySql and PostgreSql. So, I'm not sure about how much traffic and data my website will have (it's just a project), but I would like to be prepared. I've worked in some projects with Oracle (PL/SQL) and I know something from MySql. Thank you !ps. 4 years later, I've been coding RoR mostly with PostgreSQL. SQLite by default when I need simple apps, but PostgreSQL otherwise.  <code> ","What databases should I use with Ruby on Rails, based on current Hosting services?"
"What database to use with Ruby on Rails, based on actual Hosting services?"," I've been looking for hosting services and I still don't know what kind of database is the most commom. It seems to be MySql and PostgreSql. So, I'm not sure about how much traffic and data my website will have (it's just a project), but I would like to be prepared. I've worked in some projects with Oracle (PL/SQL) and I know something from MySql. Thank you !ps. 4 years later, I've been coding RoR mostly with PostgreSQL. SQLite by default when I need simple apps, but PostgreSQL otherwise.  <code> ","What databases should I use with Ruby on Rails, based on current Hosting services?"
"Cucumber, capybara and selenium - Submiting a form without a button"," I have a test using Cucumber, capybara and selenium driver. This test should go to a form and submit it. The normal text would be The problem is that I don't have the OK button in the form I need a way to do the ""form.submit"", without clicking any button or link - the same as happens when you press ENTER when you are in a form field using the browser.I don't know how to tell capybara to submit a form. How can I do it? <code>  Scenario: Fill form Given I am on the Form page When I fill in ""field1"" with ""value1"" And I fill in ""field2"" with ""value2"" And I press ""OK"" Then I should see ""Form submited""","Cucumber, capybara and selenium - Submitting a form without a button"
How Do You Test Your Non-Rails Rubygems?," I am trying to get the whole setup working with Autotest/Growl/Shoulda on my Mac to test a gem I'm working on for Authlogic. I've used RSpec in the past quite a bit but would like to switch to Shoulda.This gem is going to work with Rails, but others gems I've made are just plain old ruby libraries with no dependencies on Rails modules. What's the recommended way to test rubygems?ZenTest seems to be focused largely on Rails, as I have yet to find a gem that makes it so calling autotest automagically runs all my TestUnit tests no matter if I'm using Rails, Sinatra, or just making a gem.Question is, what is your setup/workflow for running tests on gems you are building? Do you have any resources that would help me out?Or a more specific, testable question: How do I run the test suite for Paperclip or Authlogic with Autotest?I've been using these as resources so far:Paperclip Tests on GithubAutotest Without RailsShoulda, Autotest, Redgreen, with Growl notificationsAuthlogic Tests on GithubGetting Started with AutotestThanks so much. Want to make testing a core part of my workflow. <code> ","Autotest, Shoulda, Ruby - The Setup?"
What Test Environment Setup do Top Project Committers Use in the Ruby Community?," Today I am going to get as far as I can setting up my testing environment and workflow. I'm looking for practical advice on how to setup the test environment from you guys who are very passionate and versed in Ruby Testing.By the end of the day (6am PST?) I would like to be able to:Type one 1-command to run test suites for ANY project I find on Github.Run autotest for ANY Github project so I can fork and make TESTABLE contributions.Build gems from the ground up with Autotest and Shoulda. For one reason or another, I hardly ever run tests for projects I clone from Github. The major reason is because unless they're using RSpec and have a Rake task to run the tests, I don't see the common pattern behind it all.I have built 3 or 4 gems writing tests with RSpec, and while I find the DSL fun, it's less than ideal because it just adds another layer/language of methods I have to learn and remember. So I'm going with Shoulda. But this isn't a question about which testing framework to choose.So the questions are:What is your, the SO reader and Github project committer, test environment setup using autotest so that whenever you git clone a gem, you can run the tests and autotest-develop them if desired?What are the guys who are writing the Paperclip Tests and Authlogic Tests doing? What is their setup?Thanks for the insight. There are tons of resources describing how to use the different testing frameworks, but almost nothing on the actual setup and workflow. Looking for answers that will make me a more effective tester. <code> ",What Test Environment Setup do Committers Use in the Ruby Community?
How do I add information to an exception message without changing its class in ruby?," How do I add information to an exception message without changing its class in ruby?The approach I'm currently using is Ideally, I would also like to preserve the backtrace.Is there a better way? <code>  strings.each_with_index do |string, i| begin do_risky_operation(string) rescue raise $!.class, ""Problem with string number #{i}: #{$!}"" endend",How do I add information to an exception message in Ruby?
What's the difference between URI.escape and CGI::escape, What's the difference between URI.escape and CGI.escape and which one should I use? <code> ,What's the difference between URI.escape and CGI.escape?
"ruby get instance variables in hash, not an array? how to do it?"," I have a Ruby class. I want to get an instance variable from an argument to a method in that class. I can do get all of the instance variables as an array: However, I want to get the instance variable named arg, specifically: How do I compute hash_of_instance_variables? <code>  self.instance_variables class MyClass def get_instance_variable(arg) hash_of_instance_variables[arg] endendobject.get_instance_variable('my_instance_var')","In Ruby, how can I get instance variables in a hash instead of an array?"
Closures in Ruby," I'm kind of new to Ruby and some of the closure logic has me a confused. Consider this code: This makes sense to me because i is bound outside the loop, so the same variable is captured by each trip through the loop. It also makes sense to me that using an each block can fix this: ...because i is now being declared separately for each time through. But now I get lost: why can't I also fix it by introducing an intermediate variable? Because j is new each time through the loop, I'd think a different variable would be captured on each pass. For example, this is definitely how C# works, and how -- I think-- Lisp behaves with a let. But in Ruby not so much. What's really happening?Edit: See comments in the answers; the problem seems to be that j is still in scope outside the loop. How does scope in loops really work?Edit: I guess I still don't understand; if loops don't create new scopes, why this: <code>  array = []for i in (1..5) array << lambda {i}endarray.map{|f| f.call} # => [5, 5, 5, 5, 5] array = [](1..5).each{|i| array << lambda {i}}array.map{|f| f.call} # => [1, 2, 3, 4, 5] array = []for i in 1..5 j = i array << lambda {j}endarray.map{|f| f.call} # => [5, 5, 5, 5, 5] for i in 1..5 puts j if i > 1 #undefined local variable or method `j' for main:Object (NameError) j = iend",Closures and for loops in Ruby
"x=[""key"" => ""value""]. How does it work in Ruby?"," Ok, so I was comparing some stuff in my own DSL to Ruby. One construct they both support is this Knowing the difference between arrays and hashes, I would think this to be illegal, but the result in Ruby is Why is this? And with this kinda syntax why can't you do Why is an array a special case for implicitly created hashes?  <code>  x=[""key"" => ""value""] [{""key"" => ""value""}] x=(""key"" => ""value"") ",Inconsistent implicit hash creation in Ruby? 
Ruby string compare regardless of string case," I want apple and Apple comparison to be true.Currently <code>  ""Apple"" == ""Apple"" # returns TRUE""Apple"" == ""APPLE"" # returns FALSE",How to compare strings ignoring the case
Why is sqrt() not a method on Float?," In Ruby everything is an object. That's why I don't understand why we have the Math module. It seems to me that most (all?) of the functions in the Math module should have been methods on the numeric types like Integer, Float and so on.E.g. instead of it would make more sense to have The same goes for sin, cos, tan, log10 and so on.Does anyone know why all these functions ended up in the Math module? <code>  Math.sqrt(5) 5.sqrt",Why is sqrt() not a method on Numeric?
"Open payment gateway libraries for Java, Python, Ruby, and PHP"," I'm looking for generic and open source payment libraries that support many different payment processor APIs. In other words, I'd like to develop an application using a single payment processing API, but be able to easily switch between payment gateways, such as Authorize.Net, Payflow Pro, Braintree, PayPal, Google, Amazon, etc.This question gives some Java solutions, but the suggestions all look horrible. Isn't there anything more like ActiveMerchant for Java? I really need a good Java solution, to the point of building my own if necessary. But I don't want to reinvent the wheel if it exists.Are there any solutions for Python, Node.JS, or PHP?Ideally, I'd like to find something similar to Ruby's ActiveMerchant, which looks exceptionally complete. Are there any other Ruby solutions? <code> ","Open payment gateway libraries for Java, Python, Ruby, Node.JS, and PHP"
How will Arel affect rails' includes() 's capabilities.," I've looked over the Arel sources, and some of the activerecord sources for Rails 3.0, but I can't seem to glean a good answer for myself as to whether Arel will be changing our ability to use includes(), when constructing queries, for the better.There are instances when one might want to modify the conditions on an activerecord :include query in 2.3.5 and before, for the association records which would be returned. But as far as I know, this is not programmatically tenable for all :include queries: (I know some AR-find-includes make t#{n}.c#{m} renames for all the attributes, and one could conceivably add conditions to these queries to limit the joined sets' results; but others do n_joins + 1 number of queries over the id sets iteratively, and I'm not sure how one might hack AR to edit these iterated queries.)Will Arel allow us to construct ActiveRecord queries which specify the resulting associated model objects when using includes()?Ex: <code>  User :has_many posts( has_many :comments)User.all(:include => :posts) #say I wanted the post objects to have their #comment counts loaded without adding a comment_count column to `posts`.#At the post level, one could do so by: posts_with_counts = Post.all(:select => 'posts.*, count(comments.id) as comment_count', :joins => 'left outer join comments on comments.post_id = posts.id', :group_by => 'posts.id') #i believe#But it seems impossible to do so while linking these post objects to each #user as well, without running User.all() and then zippering the objects into #some other collection (ugly) #OR running posts.group_by(&:user) (even uglier, with the n user queries)",How will ActiveRelation affect rails' includes() 's capabilities?
Ruby:  convert int to time?, We can do this: for example current: can I convert i back to time? <code>  i = Time.now.to_i i = 1274335854,Ruby / Rails: convert int to time OR get time from integer?
where to put snippets of code in rails?," I have this code snippets that generates a signature for POSTs. The detail of it is not important, but what I want to know is: since it is not a model-related chunk of code, it really can be use anywhere: in controllers, in models, in view helpers; even in views. So I am unsure where and, even bigger of a problem, how to activate the use of it once I place it in some location.Is it what those ""require"" statements are all about? That you can acquire some functionality through a ""require"" statement in the current file you are working on? Just so that we have an example to talk about, say, I have a little snippet of code that does cubing: I know that I will be using it in various places across the application, so where should I put it? and when I do need to use it, how can I ""summon"" it?Thank You <code>  def cube_it(num) num**3end",Where to put code snippets in Rails?
What is called a rakefile ?," I have started learning Ruby and just tried out my first hello world program in NetBeans IDE. I have one doubt, I can see that the new project wizard created set of package structure. It had one ""Rakefile"" in it. What does that mean and what is the use of it? <code> ",What is a Rakefile?
What is called a rakefile?," I have started learning Ruby and just tried out my first hello world program in NetBeans IDE. I have one doubt, I can see that the new project wizard created set of package structure. It had one ""Rakefile"" in it. What does that mean and what is the use of it? <code> ",What is a Rakefile?
nokogiri vs hpricot?," Which one would you choose? My important attributes are (not in order):Support and future enhancements.Community and general knowledge base (on the Internet).Comprehensive (I.E., proven to parse a wide range of *.*ml pages).Performance.Memory footprint (runtime, not the code-base). <code> ",Nokogiri vs Hpricot?
In Ruby or Python can the very idea of Class be rewritten?," first time at stack overflow.I'm looking into using some of the metaprogramming features provided by Ruby or Python, but first I need to know the extent to which they will allow me to extend the language. The main thing I need to be able to do is to rewrite the concept of Class. This doesn't mean that I want to rewrite a specific class during run time, but rather I want to make my own conceptualization of what a Class is. To be a smidge more specific here, I want to make something that is like what people normally call a Class, but I want to follow an ""open world"" assumption. In the ""closed world"" of normal Classes, if I declare Poodle to be a subclass of Dog to be a subclass of Animal, then I know that Poodle is not going to also be a type of FurCoat. However, in an open world Class, then the Poodle object I've defined may or may not be and object of type FurCoat and we won't know for sure until I explain that I can wear the poodle. (Poor poodle.) This all has to do with a study I'm doing concerning OWL ontologies.Just so you know, I've tried to find information online, but due to the overloading of terms here I haven't found anything helpful.Super thanks,JohnUPDATE: I just thought of a good use case for my open-world concept of Class. Perhaps this will provide a better understanding of what I really wish to do. I want to be able to ""describe"" a Class rather than define it. For instance, I want to be able to say that a Dog is anything that a) has four legs b) barks. Then I want to be able to create an object of unspecified Class, and describe that this object has four legs. At this point the object is still of unspecified type. Then I want to say that the object barks. At this point, the object will be known to be (possibly among other things) a Dog. <code> ",In Ruby or Python can the very concept of Class be rewritten?
"What quality, parser-generator options exist for ruby?"," What open source (preferably gem-based) parser-generator options do I have in Ruby?I've used (flex&bison)|(lex&yacc) from C in the past, and I'm comfortable with BNF-style specifications. I've heard of treetop, but it looks a bit alien and verbose compared to yacc...Purpose: I want to convert my text markup language to a BNF and generate the parsing code.  <code> ",What grammar based parser-generator tools exist for ruby?
Rails before_filter on subclasses beeing called twice," I'm at Rails 2.3.5 and I have this problem: The problem is that on ChildController, the :foo before filter gets called twice.I've tried a number of workarounds around this problem. If I don't include the :index action in the child, it never gets called for that action.The solution I found works, but I think it's very very ugly Is there a better way to solve this problem? <code>  class BaseController < ApplicationController before_filter :foo, :only => [:index]endclass ChildController < BaseController before_filter :foo, :only => [:index, :show, :other, :actions]end skip_before_filter :foobefore_filter :foo, :only => [:index, :show, :other, :actions]",Why is Rails before_filter called twice when the controller is subclassed?
Ruby generic filesystem," I am looking for a ""Virtual File System"" type library for ruby. I want to be able to have a completely generic file system that I can easily switch between using Local files and using S3 or using FTP or something like that. (Identical to VFS for Java)Has anybody used any type of generic file system for ruby (I just need it to support local files and Amazon S3)Any pointers would be much appreciated. <code> ",Ruby generic filesystem libraries
Sharing large objects between ruby processes without a performance hit," I have a Ruby hash that reaches approximately 10 megabytes if written to a file using Marshal.dump. After gzip compression it is approximately 500 kilobytes.Iterating through and altering this hash is very fast in ruby (fractions of a millisecond). Even copying it is extremely fast.The problem is that I need to share the data in this hash between Ruby on Rails processes. In order to do this using the Rails cache (file_store or memcached) I need to Marshal.dump the file first, however this incurs a 1000 millisecond delay when serializing the file and a 400 millisecond delay when serializing it.Ideally I would want to be able to save and load this hash from each process in under 100 milliseconds.One idea is to spawn a new Ruby process to hold this hash that provides an API to the other processes to modify or process the data within it, but I want to avoid doing this unless I'm certain that there are no other ways to share this object quickly.Is there a way I can more directly share this hash between processes without needing to serialize or deserialize it?Here is the code I'm using to generate a hash similar to the one I'm working with: Update:Since my original question did not receive many responses, I'm assuming there's no solution as easy as I would have hoped.Presently I'm considering two options:Create a Sinatra application to store this hash with an API to modify/access it.Create a C application to do the same as #1, but a lot faster.The scope of my problem has increased such that the hash may be larger than my original example. So #2 may be necessary. But I have no idea where to start in terms of writing a C application that exposes an appropriate API.A good walkthrough through how best to implement #1 or #2 may receive best answer credit.Update 2I ended up implementing this as a separate application written in Ruby 1.9 that has a DRb interface to communicate with application instances. I use the Daemons gem to spawn DRb instances when the web server starts up. On start up the DRb application loads in the necessary data from the database, and then it communicates with the client to return results and to stay up to date. It's running quite well in production now. Thanks for the help! <code>  @a = []0.upto(500) do |r| @a[r] = [] 0.upto(10_000) do |c| if rand(10) == 0 @a[r][c] = 1 # 10% chance of being 1 else @a[r][c] = 0 end endend@c = Marshal.dump(@a) # 1000 millisecondsMarshal.load(@c) # 400 milliseconds",Working with a large data object between ruby processes
how to call nslookup from ruby, I need to get the txt field from the DNS record.Is there any ruby api to do something like this? <code>  nslookup -q=txt xxxx.com,Getting a DNS TXT record in Ruby
How to convert a string to a class method in Ruby? ," This is how to convert a string to a class in Rails/Ruby: But what if I am retrieving a method from an array/active record object like: but it could be where anything is a string like anything = ""description"".This is helpful since I want to refactor a very large class and reduce lines of code and repetition. How can I make it work?  <code>  p = ""Post""Kernel.const_get(p)eval(p)p.constantize Post.description Post.anything",How do I convert a string to a class method? 
IronRuby as scripting language in .net," I want to use IronRuby as a scripting language (as Lua, for example) in my .NET project.For example, I want to be able to subscribe from a Ruby script to specific events, fired in the host application, and call Ruby methods from it.I'm using this code for instantiating the IronRuby engine: Supposing index.rb contains: How do I:Make C# method Subscribe (defined in host application) visible from index.rb?Invoke later handler method from the host application? <code>  Dim engine = Ruby.CreateEngine()Dim source = engine.CreateScriptSourceFromFile(""index.rb"").Compile()' Execute itsource.Execute() subscribe(""ButtonClick"", handler)def handler puts ""Hello there""end",IronRuby as a scripting language in .NET
is it right to assigning multiple variable like this a = b = c = d = 5 in ruby?," I found there is no problem with the assigning of values like this. My question is should one assign like the one given above or like this?  <code>  a = b = c = d = 5puts (a) >> 5puts (b) >> 5puts (b) >> 5puts (b) >> 5a= a+1puts (a) >> 6puts (b) >> 5 a , b, c, d = 5, 5, 5, 5",Is it right to assign multiple variables like this a = b = c = d = 5?
rails - named scoped help," I want to write a named scope to get a record from its id. For example, I have a model called Event, and I want to simulate Event.find(id) with use of named_scope for future flexibility.I used this code in my model: and I call it from my controller like Event.from_id(id). But my problem is that it returns an array of Event objects instead of just one object.Thus if I want to get event name, I have to write while what I want is Am I doing something wrong here? <code>  named_scope :from_id, lambda { |id| {:conditions => ['id= ?', id] } } event = Event.from_id(id)event[0].name event = Event.from_id(id)event.name",How can I make named_scope in Rails return one value instead of an array?
How to get timestamp in ruby?, How to get UTC timestamp in Ruby? <code> ,How to get UTC timestamp in Ruby?
How to get UTC timestamp in ruby?, How to get UTC timestamp in Ruby? <code> ,How to get UTC timestamp in Ruby?
"In Ruby, given an array, how do I construct a hash according to a simple rule?"," I have a simple array: I also have a function f that will perform an operation on a single string input and return a value. This operation is very expensive, so I would like to memoize the results in the hash.I know I can make the desired hash with something like this: What I'd like to do is not have to initialize h, so that I can just write something like this: Can that be done? <code>  arr = [""apples"", ""bananas"", ""coconuts"", ""watermelons""] h = {}arr.each { |a| h[a] = f(a) } h = arr.(???) { |a| a => f(a) }","In Ruby, how do I make a hash from an array?"
Ruby Mechnize: user agents?, How many user agents are there in Mechanize? Is there a handy list of all the user agent options anywhere? <code> ,Ruby Mechanize: user agents?
Anything like bpython for Ruby?," IRb is pretty plain compared to bpython, even when using wirble.Is there any ruby equivalent of bpython? <code> ",Is there something like bpython for Ruby?
Is there a way to use a loop inside of HAML's :javascript region?," Inside of HAML, can we have a loop inside the :javascript region?This will work: and this will not: can the code above also be made to work as well? <code>  - 10.upto(20) do |i| :javascript document.getElementById('aDiv').innerHTML += '#{i}'; :javascript - 10.upto(20) do |i| document.getElementById('aDiv').innerHTML += '#{i}';",Is there a way to use a Ruby loop inside of HAML's :javascript region?
beginner's ruby question: how to use erb to output file after binding," I got the following example: accompanied by it prints nicely to screen.what is the simplest way to output to another file: ""text2.txt"" instead of to the screen?I know this is really a piece of cake for most of you experienced ruby masters, but for me who just picked up a Beginning Ruby from Novice...it's challenging now...but I want to use the code for real life purpose...thank you!!! <code>  require 'erb' names = []names.push( { 'first' => ""Jack"", 'last' => ""Herrington"" } )names.push( { 'first' => ""LoriLi"", 'last' => ""Herrington"" } )names.push( { 'first' => ""Megan"", 'last' => ""Herrington"" } )myname = ""John Smith""File.open( ARGV[0] ) { |fh|erb = ERB.new( fh.read )print erb.result( binding ) text.txt<% name = ""Jack"" %>Hello <%= name %><% names.each { |name| %>Hello <%= name[ 'first' ] %> <%= name[ 'last' ] %><% } %>hi, my name is <%= myname %>}",how to use erb to output file after binding
Convert .doc to images using RMagick & Ruby," I'd like to take a PDF file and convert it to images, each PDF page becoming a separate image.""Convert a .doc or .pdf to an image and display a thumbnail in Ruby?"" is a similar post, but it doesn't cover how to make separate images for each page. <code> ",How to convert PDF files to images using RMagick and Ruby
Convert .pdf to images using RMagick & Ruby," I'd like to take a PDF file and convert it to images, each PDF page becoming a separate image.""Convert a .doc or .pdf to an image and display a thumbnail in Ruby?"" is a similar post, but it doesn't cover how to make separate images for each page. <code> ",How to convert PDF files to images using RMagick and Ruby
Unable to have Rails ignore the i18n gem," I have a Rails 2.3.5 project that uses the localization features of Rails. I also happen to have Rails 3 beta installed (which depends on the i18n gem). Rails 2.3.5 will happily handle localization on it's own (without i18n installed), however if the i18n gem is available, it makes use of it.Recently I upgraded my gems and now have version 0.3.7 and 0.4.0 of i18n installed. Rails, of course, wants to load and use the latest version which is causing errors in my project. I tried setting the gem version to 0.3.7 which gets around the errors in the web app. However, we're using resque and resque_mailer to delay the sending of messages. When the worker picks up the mailer job from the queue, it ignores my config.gem requirement in environment.rb and uses version 0.4.0 anyway.Ideally, I'd like to tell Rails to just not use the i18n gem at all. How do I do that?Update: As of beta 4, Rails 3 now requires i18n version 0.4.1. I don't see how more people aren't running into this problem as it would seem now if you have both Rails 2 and Rails 3 installed, you're going to run into this. <code> ",Have Rails 2.3.x ignore the i18n gem
"I'm confused with block in ruby, compared to smalltalk."," What does block in Ruby mean? It looks similar with Smalltalk, but you can't send messages to it.For example, in smalltalk: returns 6. But in ruby: will cause SyntaxError.Well, you can pass messages to lambda in ruby, though: So in Ruby, block is not a block, but lambda is a block? Is this true? I mean, are there any differences between ruby lambda and smalltalk block? If this is true, then what is a ruby block?Update: From the comment and answer below, together with some googling, I guess Ihave more understanding of Ruby block. In Ruby, usually a piece of code evaluates an value, and every value is an object. But, block doesn't evaluate an value. So it's not an object. Instead it can act as part of an object. For example, in {|x| x + 3} can act as a part of the object proc {|x| x + 3 }.But it did confuse me. In smalltalk, almost every expression can be divided into objects (binding to variables are exceptions). It seems in Ruby, there are more exceptions. <code>  [:x | x + 3] value: 3 {|x| x + 3}.call 3 irb(main):025:0> ->(x){x+3}.call 3=> 6",Block in Ruby compared to Smalltalk
Database-independant SQL String Concatenation in Rails," I want to do a database-side string concatenation in a Rails query, and do it in database-independent way.SQL-92 specifies double-bar (||) as the concatenation operator. Unfortunately it looks like MS SQL Server doesn't support it; it uses + instead.I'm guessing that Rails' SQL grammar abstraction has solved the db-specific operator problem already. If it does exist, how do I use it? <code> ",Database-independent SQL String Concatenation in Rails
initializing hashes," I frequently write something like this: There ought to be a better way to do this, but I can't find it. <code>  a_hash['x'] ? a_hash['x'] += ' some more text' : a_hash['x'] = 'first text'",Initializing hashes
class_eval in ruby?, I don't understand class_eval. What does the % mean?What does class_eval do?And where is (val) coming from? <code>  class Module def attr_ (*syms) syms.each do |sym| class_eval %{def #{sym}= (val) @#{sym} = val end} end endend,How do I use class_eval?
What is Ruby's double-colon (::) all about? ," What is this double-colon ::? E.g. Foo::Bar.I found a definition: The :: is a unary operator that allows: constants, instance methods and class methods defined within a class or module, to be accessed from anywhere outside the class or module.What good is scope (private, protected) if you can just use :: to expose anything? <code> ",What is Ruby's double-colon `::`?
What is Ruby's double-colon (::) all about?," What is this double-colon ::? E.g. Foo::Bar.I found a definition: The :: is a unary operator that allows: constants, instance methods and class methods defined within a class or module, to be accessed from anywhere outside the class or module.What good is scope (private, protected) if you can just use :: to expose anything? <code> ",What is Ruby's double-colon `::`?
define method for instance of class," Let there be class Example defined as: On calling Example.new; Example.new I get a warning: method redefined; discarding old say_hello. This, I conclude, must be because it defines a method in the actual class (which makes sense, from the syntax). And that, of course, would prove disastrous should there be multiple instances of Example with different values in their methods.Is there a way to create methods just for the instance of a class from inside that instance? <code>  class Example def initialize(test='hey') self.class.send(:define_method, :say_hello, lambda { test }) endend",Is there a way to create methods just for the instance of a Ruby class from inside that instance?
Check if Ruby object is a Boolean, I can't seem to check if an object is a boolean easily. Is there something like this in Ruby? Right now I'm doing this and would like to shorten it: <code>  true.is_a?(Boolean)false.is_a?(Boolean) some_var = rand(1) == 1 ? true : false(some_var.is_a?(TrueClass) || some_var.is_a?(FalseClass)),How to check if a Ruby object is a Boolean
Save JSON outputed from a URL to a file," How would I save JSON outputted by an URL to a file? e.g from the Twitter search API (this http://search.twitter.com/search.json?q=hi)Language isn't important.edit // How would I then append further updates to EOF?edit 2// Great answers guys really, but I accepted the one I thought was the most elegant. <code> ",Save JSON outputted from a URL to a file
Set Rack session cookie expiration programatically," I'm using Rack to try to implement ""Remember Me"" functionality in my Sinatra app.I'm able to set the session cookie to expire when the session ends or in X seconds time but I'd like to do both.For example, if a user has clicked ""remember me"" then I wish for their session to end after X seconds. Eg, my app.rb has a line that looks like this: I've tried to do the following when the user logs in: However, this does not set the cookie value. How to set this? <code>  use Rack::Session::Cookie, :expire_after => 2592000, #30 days in seconds :secret => MY_SECRET if (!remember_me) env['rack.session.options'][:expire_after] = nilend",Set Rack session cookie expiration programmatically
[Ruby] Restrict a number to upper/lower bounds?," Is there a built-in way or a more elegant way of restricting a number num to upper/lower bounds in Ruby or in Rails?e.g. something like: <code>  def number_bounded (num, lower_bound, upper_bound) return lower_bound if num < lower_bound return upper_bound if num > upper_bound numend",Restrict a number to upper/lower bounds?
Overriding rubies spaceship operator <=>," I am trying to override Ruby's <=> (spaceship) operator to sort apples and oranges so that apples come first sorted by weight, and oranges second, sorted by sweetness. Like so: But this does not work, can someone tell what I am doing wrong here, or a better way to do this? <code>  module Fruity attr_accessor :weight, :sweetness def <=>(other) # use Array#<=> to compare the attributes [self.weight, self.sweetness] <=> [other.weight, other.sweetness] end include Comparableendclass Appleinclude Fruitydef initialize(w) self.weight = wendendclass Orangeinclude Fruitydef initialize(s) self.sweetness = sendendfruits = [Apple.new(2),Orange.new(4),Apple.new(6),Orange.new(9),Apple.new(1),Orange.new(22)]p fruits#should work?p fruits.sort",Overriding Ruby's spaceship operator <=>
Why Eventmachine Defer slower than Ruby Thread?," I have two scripts which use Mechanize to fetch a Google index page. I assumed EventMachine will be faster than a Ruby thread, but it's not.EventMachine code costs: ""0.24s user 0.08s system 2% cpu 12.682 total""Ruby Thread code costs: ""0.22s user 0.08s system 5% cpu 5.167 total ""Am I using EventMachine in the wrong way? EventMachine: Ruby Thread: <code>  require 'rubygems'require 'mechanize'require 'eventmachine'trap(""INT"") {EM.stop}EM.run do num = 0 operation = proc { agent = Mechanize.new sleep 1 agent.get(""http://google.com"").body.to_s.size } callback = proc { |result| sleep 1 puts result num+=1 EM.stop if num == 9 } 10.times do EventMachine.defer operation, callback endend require 'rubygems'require 'mechanize'threads = []10.times do threads << Thread.new do agent = Mechanize.new sleep 1 puts agent.get(""http://google.com"").body.to_s.size sleep 1 endendthreads.each do |aThread| aThread.joinend",Why is EventMachine's defer slower than a Ruby Thread?
Blocks and Yields in Ruby, I am trying to understand blocks and yield and how they work in Ruby.How is yield used? Many of the Rails applications I've looked at use yield in a weird way.Can someone explain to me or show me where to go to understand them? <code> ,Blocks and yields in Ruby
rails custom validation :on => :create not working," I have a custom validation method that I only want executed on create: However, it's getting fired on update (in addition to on create).Does the :on => :create option not work with custom validation methods? <code>  validate :post_count, :on => :createdef post_count # validate stuffend ",Custom validation :on => :create not working
How do i change column type in Heroku?," I am trying to rake the db:migrations into my heorku instance and I get an error. The FAQ described my error as below: Cannot change column type Example: PGError: ERROR: column verified_at cannot be cast to type date Cause: PostgreSQL doesnt know how to cast all the rows in that table to the specified type. Most likely it means you have an integer or a string in that column. Solution: Inspect your records and make sure they can be converted to the new type. Sometimes its easier to just avoid using change_column, renaming/creating a new column instead.How do I change this migration now. This is the problem that I have. For my Contacts table, I created the following: In a later migration, I do the following: This change_column appears to be the problem.Should I...change by hand that migration? Is there a way I can clean the data in my tables (I didn't know Heroku would recognize the data in the table because I'm doing a rake).I obviously need to change this value and it is used throughout my application. Thanks.This is what I am trying...thoughts? <code>  t.string :date_entered change_column :contacts, :date_entered, :date def self.up #change_column :contacts, :date_entered, :date #this fails in postgres, so trying the same outcome rename_column :contacts, :date_entered, :date_entered_old add_column :contacts, :date_entered, :date remove_column :contacts, :date_entered_oldenddef self.down add_column :contacts, :date_entered_old remove_column :contacts, :date_entered rename_column :contacts, :date_entered_old, :date_enteredend",How do I change column type in Heroku?
"diffrence between ruby if statments with ""then"" at the end?"," What's the difference between these two Ruby if statements when we put a then at the end of the if statement? and  <code>  if(val == ""hi"") then something.meth(""hello"")else something.meth(""right"")end if(val == ""hi"") something.meth(""hello"")else something.meth(""right"")end","What is the difference between ""if"" statements with ""then"" at the end?"
"difference between ruby if statements with ""then"" at the end?"," What's the difference between these two Ruby if statements when we put a then at the end of the if statement? and  <code>  if(val == ""hi"") then something.meth(""hello"")else something.meth(""right"")end if(val == ""hi"") something.meth(""hello"")else something.meth(""right"")end","What is the difference between ""if"" statements with ""then"" at the end?"
How do I do multiple lines of Ruby in html.erb file, I'm using Ruby on Rails and need to run a block of Ruby code in one of my html.erb files. Do I do it like this: or like this: Thanks for reading. <code>  <% def name %><% name = username %><%= name %> <% def namename = username %><%= name %>,How do I run multiple lines of Ruby in html.erb file
Storing arrays in database using rails, I am on rails 2.3.8 & I am using mysql as db adapter. I want to store arrays in my database. After searching I could come up with this very useful article.Now I need to use GUI for input & not only server console. So say I have a text field called nums which logically should have int array. What should be the format of nums so that it becomes easy to retrieve & store the array out of that string ? <code> ,Storing arrays in database using ActiveRecord
"ruby meta programming, how does rspec's shoud work?"," I was reading up on RSpec and I was trying to figure out how RSpec's ""should"" was implemented.Could someone give a hand on how the meta nature of this function works?The code is located here:http://github.com/dchelimsky/rspec/blob/master/lib/spec/expectations/extensions/kernel.rbTIA,-danielClarification: How did target's value get passed along to ""should"", which in turn was ""==""'d against 5? <code>  target.should == 5","Ruby metaprogramming, how does RSpec's 'should' work?"
"Ruby metaprogramming, how does rspec's 'should' work?"," I was reading up on RSpec and I was trying to figure out how RSpec's ""should"" was implemented.Could someone give a hand on how the meta nature of this function works?The code is located here:http://github.com/dchelimsky/rspec/blob/master/lib/spec/expectations/extensions/kernel.rbTIA,-danielClarification: How did target's value get passed along to ""should"", which in turn was ""==""'d against 5? <code>  target.should == 5","Ruby metaprogramming, how does RSpec's 'should' work?"
Mocha expectation bleeds ," I have been following the 15 TDD steps to create a Rails application guide - but have run into an issue I cannot seem to resolve. For the functional test of the WordsController, I have the following code: In the Word class I have the following code: When I run the tests, I experience the following error (shortened for brevity): I have tried changing changing the order of the tests along with a multitude of other things, but time and time again I continue to receive the same test failure - that Word.random() has already been invoked.I'm running Rails 3.0 beta 4 and Mocha 0.9.8. I've searched long and hard for a solution to my problem, but I can't seem to find it. I'm new to Ruby/Rails so am rather unfamiliar with the language and the frameworks.Thanks in advance! <code>  class WordsControllerTest < ActionController::TestCase test ""should get learn"" do get 'learn' assert_response :success end test ""learn passes a random word"" do some_word = Word.new Word.expects(:random).returns(some_word) get 'learn' assert_equal some_word, assigns('word') endend class Word < ActiveRecord::Base def self.random all = Word.find :all all[rand(all.size)] endend 1) Failure: unexpected invocation: Word(...).random() satisfied expectations:- expected exactly once, already invoked once: Word(...).random()",Mocha Mock Carries To Another Test
How would I go about programatically interacting with VST(i) Plugins to synthesize audio?," Take, for example, the VSTi Triforce, by Tweakbench. When loaded up in any VST host on the market, it allows the host to send a (presumably MIDI) signal to the VSTi. The VSTi will then process that signal and output synthesized audio as created by a software instrument within the VSTi.For example, sending an A4 (MIDI note, I believe) to the VSTi will cause it to synthesize the A above Middle C. It sends the audio data back to the VST Host, which then could either play it on my speakers or save it to .wav or some other audio file format.Let's say I have Triforce, and am trying to write a program in my language of choice that could interact with the VSTi by sending in an A4 note to be synthesized, and automatically saving it to a file on the system?Eventually, I'd like to be able to parse an entire one-track MIDI file (using established, stable libraries already available for this purpose) and send it to the VSTi to ""render""/synthesize it into an audio file.How would I go about this, and in what language should I look to build the core framework? Ultimately, it will be used in a Ruby-based project, so any pointers to specific Ruby resources would be nice as well.However, I'm just trying to understand basically how the API of a VSTi works. (I've realized that this question is very much related to the question of building a VST host in the first place, albeit one that can only save VST outputs to file and not play them back, and with considerably smaller scope) <code> ",How would I go about programmatically interacting with VST(i) Plugins to synthesize audio?
What's the history for the # convention of identifying methods in Ruby?," For example, I've always seen methods referred to as String#split, but never String.split, which seems slightly more logical. Or maybe even String::split, because you could consider #split to be in the namespace of String. I've even seen the method alone, when the class is assumed/implied (#split).I understand that this is the way methods are identified in ri. Which came first?Is this to differentiate, for example, methods from fields?I've also heard that this helps differentiates instance methods from class methods. But where did this start? <code> ",What's the rationale/history for the # convention of identifying methods in Ruby?
can one yaml object refer to another?," I'd like to have one yaml object refer to another, like so: The above syntax is just an example of how it might work (it's also how it seems to work in this cpan module.)I'm using the standard ruby yaml parser.Is this possible? <code>  intro: ""Hello, dear user.""registration: $intro Thanks for registering!new_message: $intro You have a new message!",Can one YAML object refer to another?
Using polymorphic paths with nested associations.," I have a polymorphic association that looks like this: I'd like a simple way to create a new Line from the parent Item. So, I might be editing a view for a Work object, and want to have a link that creates a new Line object. Normally, I would do this: And the helper would work the route for this. However, this requires that I check which parent the Line belongs to in the controller, defeating the purpose of polymorphism (I could have used two references if that were the case). So, my question is, how do I get the path to work polymorphically like a normal path helper? <code>  class Line < ActiveRecord::Base belongs_to :item, :polymorphic => trueendclass Education < ActiveRecord::base has_many :lines, :as => :itemendclass Work < ActiveRecord::base has_many :lines, :as => :itemend <%= link_to ""New Line"", new_work_line_path(@work) %>",Using polymorphic paths with nested associations
Albacore: including only certain files/folders in a zip," I'm trying to zip up the artifacts of a rake build, using Albacore's ZipTask. The solution I'm building has three projects that have artifacts that need to be zipped up individually, but only the ASP.NET MVC project will be mentioned here. Here's the directory structure of the solution: At first I wrote this task: Problem is, the output of this task is a zip file containing the contents of those folders, not the folders themselves, which is obviously undesirable.Next, I tried flipping the flatten_zip field to false (which is not a documented field but you can find it in the source). This produced a zip that contained the above folders, but at the bottom of the whole ./src/website/ folder hierarchy. I want the above folders at the root of the zip, so that's not working either.So my next shot was this, using exclusions, which is also not documented: This worked for me, but when I recently added /AutoMapper/ and /StructureMap/ to the exclusions array, it also caused AutoMapper.dll and StructureMap.dll to (of course) also be excluded from the bin folder.How should I edit any of the above tasks to have only the folders and files I want at the root of my zip? <code>  rakefile.rbsolution.slnsrc/ (other projects that are not relevant) website/ (various folders I don't want included in the artifacts) bin/ Content/ Scripts/ Views/ Default.aspx Global.asax web.config website_directory = File.join '.', 'src', 'website'website_project_name = 'website'zip :zip => [ :run_unit_tests, :less ] do |zip| zip.directories_to_zip = [ 'bin', 'Content', 'Scripts', 'Views' ].map{ |folder| File.join website_directory, folder } zip.additional_files = [ 'Default.aspx', 'favicon.ico', 'Global.asax', 'web.config'].map{ |file| File.join website_directory, file } zip.output_file = get_output_file_name zip.output_path = get_artifacts_output_path website_project_nameend zip :zip => [ :run_unit_tests, :less ] do |zip| zip.directories_to_zip website_directory zip.exclusions = [ /.git/, /.+\.cs/, /App_Data/, /Attributes/, /AutoMapper/, /Controllers/, /Diagrams/, /Extensions/, /Filters/, /Helpers/, /Models/, /obj/, /Properties/, /StructureMap/, /Templates/, /CompTracker.Web.csproj/, /Default.aspx.cs/, /Global.asax.cs/, /Publish.xml/, /pdb/ ] zip.output_file = get_output_file_name zip.output_path = get_artifacts_output_path website_project_nameend",How do I write an Albacore zip task that includes only certain folders and the folders themselves?
Sort an array of hashes by a value in the hash," This Ruby code is not behaving as I would expect: I'm looking to sort the array of hashes by the key ""value"", but they are printed unsorted. <code>  # create an array of hashessort_me = []sort_me.push({""value""=>1, ""name""=>""a""})sort_me.push({""value""=>3, ""name""=>""c""})sort_me.push({""value""=>2, ""name""=>""b""})# sortsort_me.sort_by { |k| k[""value""]}# same order as above!puts sort_me",How do I sort an array of hashes by a value in the hash?
Ruby: sort an array of hashes by a value in the hash," This Ruby code is not behaving as I would expect: I'm looking to sort the array of hashes by the key ""value"", but they are printed unsorted. <code>  # create an array of hashessort_me = []sort_me.push({""value""=>1, ""name""=>""a""})sort_me.push({""value""=>3, ""name""=>""c""})sort_me.push({""value""=>2, ""name""=>""b""})# sortsort_me.sort_by { |k| k[""value""]}# same order as above!puts sort_me",How do I sort an array of hashes by a value in the hash?
how does load differ from require in ruby?, Is there any major difference between load and require in the Ruby on Rails applications? Or do they both have the same functionality? <code> ,How does load differ from require in Ruby?
how to sort a ruby array of strings by length," How do I sort this: Into this? <code>  arr = [""aaa"",""aa"",""aaaa"",""a"",""aaaaa""]; arr = [""a"",""aa"",""aaa"",""aaaa"",""aaaaa""];",How do I sort a Ruby array of strings by length?
require a file again if its changed," I've written a gem that looks in config/ for a config file. This works fine but if the user changes any config they have to stop the program and start it again before my gem loads the new config. This would require them to restart the whole rails app on every change, which isn't ideal.Is there a way to ""re-require"" a file so that it loads it up fresh instead of using the cached version. <code> ",Ruby: Require a file again if it is changed
How to split an array in ruby?," Given an array: Whats the best way to split it into two arrays?For example from the array above I want to get the following two arrays: Can i do this using collect? <code>  arr = [['a', '1'], ['b','2'], ['c', '3']] first = ['a','b','c'] second = ['1', '2', '3'] ",How to split an array?
how to convert a ruby hash object to JSON," How to convert a ruby hash object to JSON? So I am trying this example below & it doesn't work?I was looking at the RubyDoc and obviously Hash object doesn't have a to_json method. But I am reading on blogs that Rails supports active_record.to_json and also supports hash#to_json. I can understand ActiveRecord is a Rails object, but Hash is not native to Rails, it's a pure Ruby object. So in Rails you can do a hash.to_json, but not in pure Ruby?? <code>  car = {:make => ""bmw"", :year => ""2003""}car.to_json",How to convert a ruby hash object to JSON?
Ruby String: how to insert tag every 5 characters, I would like to insert a <wbr> tag every 5 characters. Input: s = 'HelloWorld-Hello guys'Expected outcome: Hello<wbr>World<wbr>-Hell<wbr>o guys <code> ,How to insert tag every 5 characters in a Ruby String?
How to replace the last occurence of a substring in ruby?," I want to replace the last occurrence of a substring in Ruby. What's the easiest way?For example, in abc123abc123, I want to replace the last abc to ABC. How do I do that? <code> ",How to replace the last occurrence of a substring in ruby?
How simplify this code? (is object belong to class)," How to rewrite this line using an iterator? My attempt that dosen't work: <code>  actor.inspect if actor.is_a? Array || actor.is_a? Hash actor.inspect if [Array, Hash].each { |c| actor.is_a? c }",Simplify multiple is_a? calls on object
How to simplify multiple is_a? call on the object," How to rewrite this line using an iterator? My attempt that dosen't work: <code>  actor.inspect if actor.is_a? Array || actor.is_a? Hash actor.inspect if [Array, Hash].each { |c| actor.is_a? c }",Simplify multiple is_a? calls on object
ruby - why TrueClass and FalseClass instead of Boolean?," I was working on serializing values when found out about this one. Ruby has a TrueClass class, and a FalseClass class, but it has no Boolean class. I'd like to know why is this.I see some advantages in using a Boolean; for example, string parsing could be centralized on it.Ruby developers are smarter than me, so there must be a lot of good reasons that I just don't see. But right now it looks to me like having OneClass and a TwoClass instead of Fixnum. <code> ",Why does Ruby have TrueClass and FalseClass instead of a single Boolean class?
ruby soap client without wsdl," I need to write a soap client that is capable of sending and receiving soap messages.This soap service does not have an associated WSDL file and soap4r and savon both seem to require one.I have an example of what I need to do in Java, see the link below.http://community.cecid.hku.hk/index.php/product/article/writing_hermes_2_ws_client_under_java/#ebms-2_0-sender-wsI could use java for this, at this point it seems like it would be easier. However I personally prefer coding in ruby and our company has more ruby resources than java.Can anyone confirm thats its possible to do something similar to java example in ruby without writing my own specialised soap library?. I need to be able to send a payload, which I believe is usually in the form of a soap attachment.I am particularly interested in seeing soap4r examples that don't use a WSDL as I have had trouble finding any with google.Any help much appreciated. <code> ",How do I create a Ruby SOAP client without using a WSDL?
How can you find the most recently modified file/folder in a directory using Ruby?, How can you find the most recently modified folder (NOT A FILE) in a directory using Ruby? <code> ,How can you find the most recently modified folder in a directory using Ruby?
Coneverting Time in UTC to Pacific time in ruby?," I get a string from a external method with a time and date like so ""07/09/10 14:50"" is there any way I can convert that time in ruby to 'Pacific US' time knowing its 'UTC' time? with changes accounted for in the date? I.e if the time difference results in the day being different. <code> ",Converting Time in UTC to Pacific time
Converting Time in UTC to Pacific time in ruby?," I get a string from a external method with a time and date like so ""07/09/10 14:50"" is there any way I can convert that time in ruby to 'Pacific US' time knowing its 'UTC' time? with changes accounted for in the date? I.e if the time difference results in the day being different. <code> ",Converting Time in UTC to Pacific time
Ruby Meta-Programming: output method body as text," I'm dynamically defining a method in a module, and I'd like to check that once the method is bound to a class instance that the body of the method is what I'm expecting. Is there a way to output (as text) of the body of a method?Module controller_mixins.rb: class being mixed with: So I'd like to see the implementation of the mixin when applied to VendorOrdersControllerprobably via script/console for convenience.UPDATE: Per @~/ I saved the string to a variable and puts'd it. That worked perfectly. Which brought to light an error in my code (the reason I wanted to see the code in the first place). Code below is much better, and works as expected. <code>  module ControllerMixin instance_eval ""def search_by_vendor (*args) \n"" \ "" @#{self.class.name.sub(/Controller/, '').tableize} = #{self.class.name.sub(/Controller/, '')}.find_all_by_vendor_id(params[:vendor_id]) \n""\ ""respond_to do |format| \n"" \ "" format.html { render :template=>'/#{self.class.name.sub(/Controller/, '').tableize}/index', :layout=>'vendor_info'} \n"" \ "" format.xml { render :xml => @#{self.class.name.sub(/Controller/, '').tableize} } \n"" \ ""end \n""\ ""end \n""end class VendorOrdersController < ApplicationController # GET /vendor_orders # GET /vendor_orders.xml require 'controller_mixins' include ControllerMixin <rest of class> module ControllerMixin def self.included(mod) method_body = ""def search_by_vendor \n"" \ "" @#{mod.name.sub(/Controller/, '').tableize} = #{mod.name.sub(/Controller/, '')}.find_all_by_vendor_id(params[:vendor_id]) \n""\ ""respond_to do |format| \n"" \ "" format.html { render :template=>'/#{mod.name.sub(/Controller/, '').tableize}/index', :layout=>'vendor_info'} \n"" \ "" format.xml { render :xml => @#{mod.name.sub(/Controller/, '').tableize} } \n"" \ ""end \n""\ ""end \n"" puts method_body mod.class_eval(method_body) endend",Meta-programming: output method body as text
Ruby (Rails) #inject on hashes - good style?," Inside the Rails code, people tend to use the Enumerable#inject method to create hashes, like this: While this appears to have become a common idiom, does anyone see an advantage over the ""naive"" version, which would go like: The only advantage I see for the first version is that you do it in a closed block and you don't (explicitly) initialize the hash. Otherwise it abuses a method unexpectedly, is harder to understand and harder to read. So why is it so popular? <code>  somme_enum.inject({}) do |hash, element| hash[element.foo] = element.bar hash end hash = {}some_enum.each { |element| hash[element.foo] = element.bar }",Is #inject on hashes considered good style?
"Defining ""method_called"".. ?"," I want to make a hook method which gets called everytime any function of a class gets called.I have tried method_added, but it executes only once at the time of class definition, but my requirement is that any function of a class that gets called anywhere in the program triggers the ""method_called"", hook method. If there is any defined existing hook method that works just the same, then please tell about it.Thanks in advance.. <code>  class Base def self.method_added(name) p ""#{name.to_s.capitalize} Method's been called!!"" end def a p ""a called."" end def b p ""b called."" endendt1 = Base.newt1.at1.bt1.at1.bOutput:""A Method's been called!!""""B Method's been called!!""""a called.""""b called.""""a called.""""b called."" Expected Output:""A Method's been called!!""""a called.""""B Method's been called!!""""b called.""""A Method's been called!!""""a called.""""B Method's been called!!""""b called.""","Defining ""method_called"".. How do I make a hook method which gets called every time any function of a class gets called?"
Customising attr_reader," (Big edit, I got part of the way there)I've been hacking away and I've come up with this as a way to specify things that need to be done before attributes are read: But changethings isn't being recognised as a method anyone got any ideas? <code>  class Class def attr_reader(*params) if block_given? params.each do |sym| define_method(sym) do yield self.instance_variable_get(""@#{sym}"") end end else params.each do |sym| attr sym end end endendclass Test attr_reader :normal attr_reader(:jp,:nope) { changethings if @nope.nil? } def initialize @normal = ""Normal"" @jp = ""JP"" @done = false end def changethings p ""doing"" @jp = ""Haha!"" @nope = ""poop"" endendj = Test.newp j.normalp j.jp",Customising attr_reader to do lazy instantiation of attributes
Get The Name Of An Instance Variable," When developing & debugging, I sometimes wish I could write a 1-liner that dumped the names, types & values of a bunch of variables. The problem is I don't know how to access the name of a variable, if I can at all.Here is a first attempt: I'd like the output of this program to be something like: I don't know what ??? should be above. Can this be done? <code>  foo = 1bar = ""42""baz = Hash.new[foo, bar, baz].each do |v| puts ""#{v.???} = (#{v.class}) #{v}"" end foo = (Fixnum) 1 bar = (String) 42 baz = (Hash) ...",Get The Name Of A Local Variable
Using Nokogiri to replace a node with a Rails call," I have created a text node and inserted into my document like so: When I try to save the document with this: I get this in the actual document: Is there a way to disable the escaping and save my page with my erb tags intact?Thanks! <code>  #<Nokogiri::XML::Text:0x3fcce081481c ""<%= stylesheet_link_tag 'style'%>"">]> File.open('ng.html', 'w+'){|f| f << page.to_html} &lt;%= stylesheet_link_tag 'style'%&gt;",Preventing Nokogiri from escaping characters?
Ruby - update class attributes hash when a property changes," I'm trying to write a Ruby class that works similarly to Rails AactiveRecord model in the way that attributes are handled: What I mean is that when I init the class, an ""attributes"" hash is updated with the relevant attributes: So far so good. What I want to happen is for the attributes hash to update when I set an individual property: I could do that by writing a setter and getter for every attribute instead of using attr_accessor, but that'll suck for a model that has a lot of fields. Any quick way to accomplish this? <code>  class Person attr_accessor :name, :age # init with Person.new(:name => 'John', :age => 30) def initialize(attributes={}) attributes.each { |key, val| send(""#{key}="", val) if respond_to?(""#{key}="") } @attributes = attributes end # read attributes def attributes @attributes end # update attributes def attributes=(attributes) attributes.each do |key, val| if respond_to?(""#{key}="") send(""#{key}="", val) @attributes[key] = name end end endend >>> p = Person.new(:name => 'John', :age => 30)>>> p.attributes => {:age=>30, :name=>""John""}>>> p.attributes = { :name => 'charles' }>>> p.attributes => {:age=>30, :name=>""charles""} >>> p.attributes => {:age=>30, :name=>""John""}>>> p.name => ""John"">>> p.name = 'charles' # <--- update an individual property => ""charles"">>> p.attributes => {:age=>30, :name=>""John""} # <--- should be {:age=>30, :name=>""charles""}",Update Ruby class attributes hash when a property changes
Ruby require 'file' and relative location...," So I'm writing some rspec tests and I'm embarrassed at my lack of Ruby understanding.I have a file structure that looks like the following:GUI_Tests/Tests/test_spec.rb GUI_Tests/windows_gui.rb GUI_Tests/upload_tool.rbwhen I run spec for the test_spec.rb file, I require the upload_tool file to be included like so: Then, the upload_tool requires windows_gui.rb, like so: My question is, why so I have to reference windows_gui.rb relative to test_spec.rb (requiring the ../) rather than the upload_tool.rb? This feels wrong to me, I'll want to use the upload_tool.rb out of context of the test specs, which means changing the requires each time.Clearly I'm missing something, but if I don't reference relative to the test spec I get a file not found error.Sorry for being so ignorant here, but I'm coming up empty handed. Any thoughts appreciated.BB <code>  spec -r ../upload_tool -fs test_spec.rb require '../windows_gui'",Ruby require 'file' and relative location
Is there something similar to JLS for Ruby," Is there a definitive specification for Ruby, akin to the Java Language Specification for Java. Googling ruby language specification provides http://ruby-std.netlab.jp/ as a result, but the site is down and i am not sure whether it is current <code> ",Is there a formal specification (like the Java Language Specification (JLS)) for Ruby?
What does the 't()' tag mean in ruby on rails?," I came across some opensource code in views, with a t() tag similar to the HTML escape sequence h(). What does t() mean? <code>  <%= f.label :password, t(:password, :scope => ""activerecord.attributes.user"") -%>",What does the 't()' tag mean in Ruby on Rails?
Date time function in rub/rails," I was wondering if there's a way in Rails to calculate time stamp like - half a minute ago, 2 minute ago, 1 day ago etc. Something like twitter real time date stamp.I want to know if Ruby/Rails has a built-in function for such date-time conversion? <code> ","""Ago"" date/time functions in Ruby/Rails"
Date time function in ruby/rails," I was wondering if there's a way in Rails to calculate time stamp like - half a minute ago, 2 minute ago, 1 day ago etc. Something like twitter real time date stamp.I want to know if Ruby/Rails has a built-in function for such date-time conversion? <code> ","""Ago"" date/time functions in Ruby/Rails"
Ruby on Rails - generating bit.ly style uuids," I'm trying to generate UUIDs with the same style as bit.ly urls like: or cloudapp ones: which are even smallerhow can I do it?I'm now using UUID gem for ruby but I'm not sure if it's possible to limitate the length and get something like this.I am currently using this: But I would like to have even smaller and knowing that it will be unique.Any help would be pretty much appreciated :)edit note: replaced dot letters with [dot] for workaround of banned short link <code>  http://bit [dot] ly/aUekJP http://cl [dot] ly/1hVU UUID.generate.split(""-"")[0] => b9386070",Ruby on Rails - generating bit.ly style identifiers
returning an array and hash in ruby method?," HIis it possible to return an array that contains an array and hash from a method in ruby?i.e and to retrieve the array: thanks <code>  def somethingarray_new = [another_thing, another_thing_2]hash_map = get_hash()return [array_new, hash_map]end some_array, some_hash = something()",returning an array that contains an array and hash in ruby method?
Is this a Bug in the Array.fill method in Ruby?," Should this be the case i.e. I am misunderstanding, or is it a bug? should it not result in: <code>  a = Array.new(3, Array.new(3))a[1].fill('g')=> [[""g"", ""g"", ""g""], [""g"", ""g"", ""g""], [""g"", ""g"", ""g""]] => [[nil, nil, nil], [""g"", ""g"", ""g""], [nil, nil, nil]]",Is this a bug in the Array.fill method in Ruby?
Ruby equivalent to python __main__," If in a ruby file I define a function like so: is there an equivalent to python's main? Is it to simply call the function inside the file? <code>  def tell_the_truth() puts ""truth""end if __name__ == ""__main__"": tell_the_truth() tell_the_truth",Ruby equivalent to Python __main__
Ruby - What's the reverse of Math Power (**)," I was wondering how to get the inverse of power in Ruby? and then I would like to get the inverse of it, and I'm not sure which operator to use <code>  2 ** 4 # => 16 16 ?? 2 # => 4",What's the reverse of Math Power (**) in Ruby?
How to avoid putting the magic encoding comment on top of every UTF-8 file in Ruby 1.9?," I have a Rails project with a lot of Cyrillic strings in it. It worked fine on Ruby 1.8, but Ruby 1.9 assumes source files are US-ASCII-encoded unless you provide an # encoding: utf-8 comment at the top of the source file. At that point the files are not considered US-ASCII.Is there a simpler way to tell Ruby ""This application is UTF8-encoded. Please consider all and any included source files as UTF8 unless declared otherwise""?UPDATE: I wrote ""How to insert the encoding: UTF-8 directive automatically in Ruby 1.9 files"" which appends the encoding directive automatically if it's needed. <code> ",How can I avoid putting the magic encoding comment on top of every UTF-8 file in Ruby 1.9?
For Each in Ruby, I just had a quick question regarding loops in Ruby. Is there a difference between these two ways of iterating through a collection? Just wondering if these are exactly the same or if maybe there's a subtle difference (possibly when @collection is nil). <code>  # way 1@collection.each do |item| # do whateverend# way 2for item in @collection # do whateverend,"""for"" vs ""each"" in Ruby"
for vs each in Ruby, I just had a quick question regarding loops in Ruby. Is there a difference between these two ways of iterating through a collection? Just wondering if these are exactly the same or if maybe there's a subtle difference (possibly when @collection is nil). <code>  # way 1@collection.each do |item| # do whateverend# way 2for item in @collection # do whateverend,"""for"" vs ""each"" in Ruby"
Unit testing and SAP," I am looking for some tutorials and guides for unit testing on SAP platform.So far, I have found some mention of ABAP Unit and of Ruby programming language being implemented on SAP software, making it much more interesting option for unit testing SAP software. However, the information is quite scarce and I would appreciate some help on the subject. <code> ",Unit testing and SAP software
"Ruby formating '1' as '1st', '2' as '2nd'  etc.."," Is anything baked into ruby or rails to handle formatting for ordinals: '1' as '1st', '2' as '2nd', etc.? <code> ","Ruby formatting for ordinals: '1' as '1st', '2' as '2nd' etc"
"Ruby formating for ordinals:  '1' as '1st', '2' as '2nd'  etc"," Is anything baked into ruby or rails to handle formatting for ordinals: '1' as '1st', '2' as '2nd', etc.? <code> ","Ruby formatting for ordinals: '1' as '1st', '2' as '2nd' etc"
How do you create a datetime object in ruby?, I'd like to write a simple function to say in hours:How much time has passed since this has been created?My attempts: Does anyone know how to do this in Ruby on Rails? <code>  -time = DateTime.now.hour - (self.created_at.hour),How do you subtract from a datetime?
what is <= operator," following snippet is from rails code Notice the operator <=what is that? <code>  def rescue_from(*klasses, &block) options = klasses.extract_options! unless options.has_key?(:with) if block_given? options[:with] = block else raise ArgumentError, ""Need a handler. Supply an options hash that has a :with key as the last argument."" end end klasses.each do |klass| key = if klass.is_a?(Class) && klass <= Exception klass.name elsif klass.is_a?(String) klass else raise ArgumentError, ""#{klass} is neither an Exception nor a String"" end # put the new handler at the end because the list is read in reverse self.rescue_handlers += [[key, options[:with]]] end endend",What is the <= operator on Ruby Classes?
what is the <= operator on Ruby Classes?," following snippet is from rails code Notice the operator <=what is that? <code>  def rescue_from(*klasses, &block) options = klasses.extract_options! unless options.has_key?(:with) if block_given? options[:with] = block else raise ArgumentError, ""Need a handler. Supply an options hash that has a :with key as the last argument."" end end klasses.each do |klass| key = if klass.is_a?(Class) && klass <= Exception klass.name elsif klass.is_a?(String) klass else raise ArgumentError, ""#{klass} is neither an Exception nor a String"" end # put the new handler at the end because the list is read in reverse self.rescue_handlers += [[key, options[:with]]] end endend",What is the <= operator on Ruby Classes?
regex to get the domain name from a url in ruby, I am trying to construct a regex to extract a domain given a url.for: should give: <code>  http://www.abc.google.com/http://abc.google.com/https://www.abc.google.com/http://abc.google.com/ abc.google.com,What regex can I use to get the domain name from a url in Ruby?
How to Read whole file in ruby?," Is there an in-built function in Ruby to read the whole file without using any loop? So far, I have only come across methods that read in chunks (line or character). <code> ",How to read whole file in Ruby?
How to read whole file in Ruby," Is there an in-built function in Ruby to read the whole file without using any loop? So far, I have only come across methods that read in chunks (line or character). <code> ",How to read whole file in Ruby?
What is the equivalent of preg_quote()?," In PHP you need to use preg_quote() to escape all the characters in a string that have a particular meaning in a regular expression, to allow (for example) preg_match() to search for those special characters.What is the equivalent in Ruby of the following code? <code>  // The content of this variable is obtained from user input, in example.$search = ""$var = 100"";if (preg_match('/' . preg_quote($search, '/') . "";/i"")) { // }",What is the Ruby equivalent of preg_quote()?
Can anybody tell me Please How can I use PHP 5.3 Closures like We use Blocks in Ruby," How can I use PHP 5.3 Closures like We use Blocks in Ruby.I never used 'for' Loop in Ruby due to using Blocks with 'each' 'find_all' 'inject' Methods.How can I use PHP 5.3 Closures like Ruby Blocks and say bye-bye to 'for' Loops :)Like Between { and } is a Closure(or Block or Anonymous Function) I do it in PHP this way, Is there a way to do this the Ruby way using PHP Closures as PHP 5.3 supports it. <code>  fruit = %w[apple banana orange]fruit.each { |f| print ""#{f}, "" } $fruit = array('apple', 'banana', 'orange');foreach ($fruit as $f) { print ""$f, ""; }",How can I use PHP 5.3 Closures like We use Blocks in Ruby
list of ruby operators that can be overloaded, Is there a list anywhere of all ruby operators that can be overridden? (Not the ones that can't!) <code> ,list of ruby operators that can be overridden/implemented
What does send() do in rails?," Can someone please tell me what is and does? <code>  send(""#{Model.find...}"")",What does send() do in Ruby?
One liner nested hash creation in ruby? (I come from perl), I am a Perl person and I have made Hashes like this for a while: Now I am learning Ruby and I have so far found that using this tree is the way to do many keys and a value. Is there any way to use the simple format that I use with Perl using one line? <code>  my %date;#Assume the scalars are called with 'my' earlier$date{$month}{$day}{$hours}{$min}{$sec}++ @date = { month => { day => { hours => { min => { sec => 1 } } } } } ,One liner nested hash creation in Ruby? (I come from Perl)
how to check if my array includes an object - rails," I have an array @horses = [] that I fill with some random horses.How can I check if my @horses array includes a horse that is already included (exists) in it?I tried something like: I also tried with include? but I saw it was for strings only. With exists? I get the following error: So the question is how can I check if my array already has a ""horse"" included so that I don't fill it with the same horse? <code>  @suggested_horses = [] @suggested_horses << Horse.find(:first,:offset=>rand(Horse.count)) while @suggested_horses.length < 8 horse = Horse.find(:first,:offset=>rand(Horse.count)) unless @suggested_horses.exists?(horse.id) @suggested_horses<< horse end end undefined method `exists?' for #<Array:0xc11c0b8>",How do I check to see if my array includes an object?
Using Net SSH to execute commands with sudo," I've been trying to write a small library using Thor to help assist me in quick creating new projects and sites. I wrote this small method: to just assist me in running quick commands on remote servers when needed. The problem is when I need to run a command under sudo on the remote end, the script just seems to hang on me. For example when executing this... The script will prompt me for a password But then the whole thing hhangs after typing it in.Would anyone happen to know why it hangs exactly, and what I can do to run sudo command on a remote server under Net::SSH (or some alternative)?*note: Before suggested, I had originally started writing this library as a recipe under Capistrano, until I came upon Thor, and thought it would be a good chance to try it out. I'm not against having to switch the whole thing back to Capistrano if needed, but I'd just be really surprised if there isn't an easy way to run sudo commands on a remote server. <code>  def ssh(cmd) Net::SSH.start( server_ip, user, :port => port) do |session| session.exec cmd endend ssh(""sudo cp #{file_from_path} #{file_to_path}"" ) [sudo] password for user:",Net::SSH sudo command hangs after entering password
How to update ruby-interpreters with RVM?," I installed RVM with a few versions of Ruby-interpreters some time ago.How I can to update it, because new versions are already released?I found only one way: rvm install 1.9.2-rc1 && rvm remove 1.9.2-preview1, but my gems are lost.Can I update branches time to time? I haven't found any tips in the documentation. <code> ",How do I update Ruby-interpreters with RVM?
PHP eqiuvalent for Ruby's or-equals (foo ||=bar)?," In PHP I often write lines like In ruby there is a brilliant shortcut for that, called or equals Does PHP have such an operator, shortcut or method call? I cannot find one, but I might have missed it. <code>  isset($foo)? NULL : $foo = 'bar' foo ||= 'bar'",PHP equivalent for Ruby's or-equals (foo ||=bar)?
What is current_ability in cancan's accessible_by (fetching records)?," In the documentation of CanCan it shows how to fetch all accessible records in this way: but what is current_ability? I've tried passing the current user which I'm using for authentication and authorization, but I've got this error: Any ideas what should I pass to accessible_by or what's wrong here? <code>  @articles = Article.accessible_by(current_ability) NoMethodError: undefined method `conditions' for #<User:0x1092a3b90>",What is current_ability in CanCan's accessible_by (fetching records)?
How to setup a Sinatra app under Apache with Passenger?," Let's say I have the simplest single-file Sinatra app. The hello world on their homepage will do. I want to run it under Apache with Phusion Passenger, AKA mod_rails.What directory structure do I need?What do I have to put in the vhost conf file?I understand I need a rackup file. What goes in it and why? <code> ",How do I set up a Sinatra app under Apache with Passenger?
How to tell bunlder where the Gemfile is?," I'm trying to run a Ruby script from cron.The script uses Bundler to manage gem dependencies. Since cron does not run in $PWD I get a 'Could not locate Gemfile' error from Bundler everytime, which makes sense since Gemfile is not in the currrent path when running from cron.Is there a way to tell Bundler to use a Gemfile not in the current path? <code> ",How to tell bundler where the Gemfile is?
How to Block images in watir ?, I am using Watir for a data fetching job where I don't need any images to be loaded. Is it possible to block them? <code> ,How to block images in Watir?
How can I get source code of a methods dynamically and also which file is this method locate in ," I would like to know whether I can get source code a method on the fly, and whether I can get which file is this method in.like  <code>  A.new.method(:a).SOURCE_CODEA.new.method(:a).FILE",How can I get source code of a method dynamically and also which file is this method locate in
Simple printing key in ruby hash ?," I want to print a key from a given hash key but I can't find a simple solution: Is there any other way? <code>  myhash = Hash.newmyhash[""a""] = ""bar""# not workingmyhash.fetch(""a""){|k| puts k } # working, but uglyif myhash.has_key(""a"")? puts ""a""end",Simple printing key of a hash?
How to judge whether a method has defined in a class? ," So, how to judge whether a method has defined or not? <code>  class C1 unless method_defined? :hello # Certainly, it's not correct. I am asking to find something to do this work. def_method(:hello) do puts 'Hi Everyone' end endend",How to judge whether a method has defined in a class?
Rails XML parsing...," Can anybody tell me how to parse this on rails. I have no control on this xml, but I hope I can make the parameter looks like this before saving to my database here is the parameter I received when it access my method <code>  <?xml version=""1.0"" encoding=""utf-8""?><message> <param> <name>messageType</name> <value>SMS</value> </param> <param> <name>id</name> <value>xxxxxxxxxxxxxx</value> </param> <param> <name>source</name> <value>xxxxxxxxxxx</value> </param> <param> <name>target</name> <value>xxxxxxxxxxxxx</value> </param> <param> <name>msg</name> <value>xxxxxxxxxxxxx</value> </param> <param> <name>udh</name> <value></value> </param></message> message""=>{""msg""=>""sampler"", ""id""=>""1"", ""target""=>""23123"", ""source""=>""312321312""} message""=>{""param""=>[{""name""=>""id"", ""value""=>""2373084120100804002252""}, {""name""=>""messageType"", ""value""=>""SMS""}, {""name""=>""target"", ""value""=>""23730841""}, {""name""=>""source"", ""value""=>""09156490046""}, {""name""=>""msg"", ""value""=>""Hello world via iPhone""}, {""name""=>""udh"", ""value""=>nil}]}",Rails XML parsing
Meaning of ~> in version requirement, What's the meaning of ~> version requirement in gem specs?  <code>  hanna-0.1.12 depends on [haml (~> 2.2.8)],Meaning of tilde-greater-than (~>) in version requirement?
Prevent Rails 2 from caching of Lib/ Classes, Does anyone know how to instruct rails to NOT cache classes that are included within the lib folder? <code> ,Prevent Rails 2/3 from caching of Lib/ Classes
Ruby on Rails: how do I check if a variable in an instance of a class?," In Java, you can do instanceof. Is there a Ruby equivalent?  <code> ",How do I check if a variable is an instance of a class?
How do I check if a variable in an instance of a class?," In Java, you can do instanceof. Is there a Ruby equivalent?  <code> ",How do I check if a variable is an instance of a class?
Rails: how does one comment in an erb template?," I have some trivial markup that looks like the following: Is there a trivial way to comment that out? Just wrapping <!-- --> around the block will still leave the ruby code available to the template. This means I have to comment out the HTML and Ruby specific code separately.What's the best way to comment out all three lines with the least amount of markup? <code>  <li class=""someclass""> <=% t'model.attr' %></li>",How does one comment in an erb template?
Ruby: How to cast from a class to another using ActiveRecord, I'm currently using ActiveRecord single table inheritance.How can I cast one of my models from type A to B? They have the same parent. <code> ,How to cast an ActiveRecord object to another class when using STI?
Ruby - how does object_id assignment work?," I'm playing around with Ruby's .object_id and noticed that, in several sequential sessions of irb, I get these identical results: In fact, every integer's object_id seems to be ((value * 2) + 1).On the other hand, a given string's object_id is never the same after exiting and re-running irb.This raises several questions for me:Is there a known scheme by which certain object_ids are determined? Are others basically random?The ids for true, false, and nil, aren't sequential. Is there a way to ask what object is represented by a given id? (I'm curious what the other single-digit and ids are tied to.)Could you (not that you should) write obfuscated Ruby where you use known object ids to refer to objects without naming them, like ""object of id 201 + object of id 19"" to mean ""100 + 9""?UpdateUsing Andrew Grimm's suggestion, I tried discovering other ""low id"" objects, but found that:There don't appear to be any more even-numbered objects in this sequence - ids 6, 8, 10, etc don't point to anything.As implied by my earlier experiment, all the odd-numbered ids belong to numbers. Specifically, id 1 points to the number 0, 3 points to 1, 5 points to 2, and so forth. <code>  false.object_id // 0true.object_id // 2nil.object_id // 4100.object_id // 201",How does object_id assignment work?
setting action mailer default url options," I am trying to set the :host for action mailer default url options.I have the below set in all the environment files I want to make it more dynamic by providing the request host.when I try to set it by OR It throws error... doesn't recognize ""request"" objectis there any way I can set this to the request host, not by hardcoding...? <code>  config.action_mailer.default_url_options = { :host => ""localhost""} config.action_mailer.default_url_options = { :host => request.domain} config.action_mailer.default_url_options = { :host => request.env[""SERVER_NAME""]}",How to set the ActionMailer default_url_options's :host dynamically to the request's hostname?
action mailer default url options and request host," I am trying to set the :host for action mailer default url options.I have the below set in all the environment files I want to make it more dynamic by providing the request host.when I try to set it by OR It throws error... doesn't recognize ""request"" objectis there any way I can set this to the request host, not by hardcoding...? <code>  config.action_mailer.default_url_options = { :host => ""localhost""} config.action_mailer.default_url_options = { :host => request.domain} config.action_mailer.default_url_options = { :host => request.env[""SERVER_NAME""]}",How to set the ActionMailer default_url_options's :host dynamically to the request's hostname?
Accessnig Ruby Class Variables with class_eval and instance_eval," I have the following: Why does following work: But I can't access @@b directly? Likewise, the following works but the following fails I don't understand why I can't access the Class Variables directly from the instance_eval blocks. <code>  class Test @@a = 10 def show_a() puts ""a: #{@@a}"" end class << self @@b = '40' def show_b puts ""b: #{@@b}"" end endend Test.instance_eval{show_b}b: 40=> nil Test.instance_eval{ @@b }NameError: uninitialized class variable @@b in Object t = Test.newt.instance_eval{show_a}a: 10=> nil t.instance_eval{ @@a }NameError: uninitialized class variable @@a in Object",Accessing Ruby Class Variables with class_eval and instance_eval
Ruby: Removing all empty elements from a hash / YAML?, How would I go about removing all empty elements (empty list items) from a nested Hash or YAML file? <code> ,Removing all empty elements from a hash / YAML?
Append class if condition is true in Haml (with Rails)," If post.published? Otherwise I've implemented this with rails helper and it seems ugly. Second variant: Is there a more simple and haml-specific way?UPD. Haml-specific, but still not simple: <code>  .post / Post stuff .post.gray / Post stuff = content_tag :div, :class => ""post"" + ("" gray"" unless post.published?).to_s do / Post stuff = content_tag :div, :class => ""post"" + (post.published? ? """" : "" gray"") do / Post stuff %div{:class => ""post"" + ("" gray"" unless post.published?).to_s} / Post stuff",Haml: Append class if condition is true in Haml
Append class if condition is true in Haml," If post.published? Otherwise I've implemented this with rails helper and it seems ugly. Second variant: Is there a more simple and haml-specific way?UPD. Haml-specific, but still not simple: <code>  .post / Post stuff .post.gray / Post stuff = content_tag :div, :class => ""post"" + ("" gray"" unless post.published?).to_s do / Post stuff = content_tag :div, :class => ""post"" + (post.published? ? """" : "" gray"") do / Post stuff %div{:class => ""post"" + ("" gray"" unless post.published?).to_s} / Post stuff",Haml: Append class if condition is true in Haml
How to copy file across buckets using aws-s3 gem," The aws-s3 documentation says: But how do I copy heashot.jpg from the photos bucket to the archive bucket for exampleThanks!Deb <code>  # Copying an object S3Object.copy 'headshot.jpg', 'headshot2.jpg', 'photos'",How to copy file across buckets using aws-s3 or aws-sdk gem in ruby on rails
Rails object relationships and rendering to JSON question," Disclaimer, I know very little about Rails. I'll try to be succinct.Given the following model relations in Rails: When calling the show action of the ModelA controller the returned JSON should show all ObjectAs that are children of the ObjectB of which the ObjectA in question is a child of.So if I have an ObjectB that contains ObjectA's of ID 1, 2 and 3 and then access: /modela/1.jsonI should see:  <code>  class ModelA < ActiveRecord::Base belongs_to :ModelB...class ModelB < ActiveRecord::Base has_many :ModelA { ""modelb"": { ""id"": ""1"", ""modela"": [insert the ModelA JSON for ID's 1, 2 and 3] }}",Rails Object Relationships and JSON Rendering
ROR operation in Ruby, Is there a Rotate Bits Right in Ruby ?Or how can I do that please.Thanks <code> ,Rotate Bits Right operation in Ruby
appending to rake db:seed in rails and running it," Rake db:seed populates your db with default database values for an app right? So what if you already have a seed and you need to add to it(you add a new feature that requires the seed). In my experience, when I ran rake db:seed again, it added the existing content already so existing content became double.What I need is to add some seeds and when ran, it should just add the newest ones, and ignore the existing seeds. How do I go about with this? (the dirty, noob way I usually do it is to truncate my whole db then run seed again, but that's not very smart to do in production, right?) <code> ",appending to rake db:seed in rails and running it without duplicating data
Combining ruby array to array of consecutive pairs," What is the easiest way to convert a ruby array to an array of consecutive pairs of its elements?I mean: Expected result: <code>  x = [:a, :b, :c, :d] y #=> [[:a, :b], [:c, :d]]",Converting ruby array to array of consecutive pairs
Ruby - pick randomly from an array," I want to know if there is a much cleaner way of doing this. Basically, I want to pick a random element from an array of variable length. Normally, I would do it like this: Is there something that is more readable / simpler to replace the second line? Or is that the best way to do it. I suppose you could do myArray.shuffle.first, but I only saw #shuffle a few minutes ago on SO, I haven't actually used it yet. <code>  myArray = [""stuff"", ""widget"", ""ruby"", ""goodies"", ""java"", ""emerald"", ""etc"" ]item = myArray[rand(myarray.length)]",How do I pick randomly from an array?
"in a rails migration, how can you remove the limit of a field"," Is the following correct? <code>  change_column :tablename, :fieldname, :limit => null","In a rails migration, how can you remove the limit of a field"
embed ruby code in html," In PHP, it is possible to do this: Is it possible to embed Ruby in HTML like that with or without Rails? <code>  <input type=""text"" value="" <?php echo ""Hello world""; ?> "">",Embedding Ruby code in HTML?
How to dynamiclly define a class method which will refer to a local variable outside?," I know, this is not correct, because the def created a new scope.I also know that use define_method can create a instance method without creating a new scope, but my point is how to define a class method. <code>  class Cendvar = ""I am a local var outside""C.class_eval do def self.a_class_method puts var endend",How to dynamically define a class method which will refer to a local variable outside?
Searching a folder and all of its subfolders for files of a certain type.," I am trying to search for all files of a given type in a given folder and copy them to a new folder.I need to specify a root folder and search through that folder and all of its subfolders for any files that match the given type.How do I search the root folder's subfolders and their subfolders? It seems like a recursive method would work, but I cannot implement one correctly. <code> ",How to search a folder and all of its subfolders for files of a certain type
 if counter % 2 == 1 - in this code in ruby what does the % symbol do or mean, if counter % 2 == 1 I am trying to decode this line - it's a Rails project and I am trying to figure out what the % does in this if statement. <code> ,What does the % operator do in Ruby in N % 2?
What does the % symbol do or mean in Ruby?, if counter % 2 == 1 I am trying to decode this line - it's a Rails project and I am trying to figure out what the % does in this if statement. <code> ,What does the % operator do in Ruby in N % 2?
"Rspec is giving an error with my layout links from the rails tutorial: ""Failure/Error: Unable to find matching line from backtrace"""," I'm following the rails tutorial here: http://railstutorial.org/chapters/filling-in-the-layout#topWhen I run ""rspec spec/"", I get a bunch of errors that look like this: But when I go in my web browser to localhost:3000/ and localhost:3000/contact, the pages are there and the correct titles are there. Here is my myrailsroot\spec\requests\layout_links_spec.rb file: Any ideas would be great, thanks <code>  1) LayoutLinks should have a Home page at '/' Failure/Error: Unable to find matching line from backtrace stack level too deep # C:/Ruby19/lib/ruby/1.9.1/forwardable.rb:1852) LayoutLinks should have a Contact page at '/contact' Failure/Error: Unable to find matching line from backtrace stack level too deep # C:/Ruby19/lib/ruby/1.9.1/forwardable.rb:185 require 'spec_helper'describe ""LayoutLinks"" do it ""should have a Home page at '/'"" do get '/' response.should have_selector('title', :content => ""Home"") end it ""should have a Contact page at '/contact'"" do get '/contact' response.should have_selector('title', :content => ""Contact"") end it ""should have an About page at '/about'"" do get '/about' response.should have_selector('title', :content => ""About"") end it ""should have a Help page at '/help'"" do get '/help' response.should have_selector('title', :content => ""Help"") end it ""should have a signup page at '/signup'"" do get '/signup' response.should have_selector('title', :content => ""Sign up"") endend","Why is Rspec saying ""Failure/Error: Unable to find matching line from backtrace""?"
Rails: find out if an IP is within a range of IPs," How can you tell if an ip, say 62.156.244.13 is within the range of 62.0.0.0 and 62.255.255.255 <code> ",Find out if an IP is within a range of IPs
[ruby] get index of string scan results," I want to get the index as well as the results of a scan I would like to have not only but also the index of those matches any suggestion? <code>  ""abab"".scan(/a/) => [""a"", ""a""] [1, 3]",Get index of string scan results in ruby
Rake vs Thor for automation scripts?," I want to automate things like:Creating a new Ruby on Rails application with pre-selected database, Git initialize it, create a Heroku project, commit all files, etc.Upload all files in folder to another computer through SSH, but do not overwrite files.Upgrade Ubuntu, install all basic packages through apt-get.From what I understand, tools for this are Rake and Thor, however, which one should I use?Rake seems to me more de-facto and popular. I have heard people recommending Thor.How do these stand to each other in a rundown? <code> ",Rake vs. Thor for automation scripts?
ruby array select elements by index range," I have an array with let's say, 500 elements. I know I can select the first 100 by doing .first(100), my question is how do I select elements from 100 to 200? <code> ",How to select array elements in a given range in Ruby?
How to automatically set all links to nofolow in Rails," I know I can pass :rel => ""nofollow"" to link_to but is there a way to set that by default so I don't have to make changes in each link_to tag?  <code> ",How to automatically set all links to nofollow in Rails
is there a limit to the number of threads that ruby can ruin at once?   ," If not whats the maximum while still remaining efficient? I'm creating 14 threads, each of which opens a list of URLs(about 500) creates a new thread for each one, which then downloads it, and adds it to a MySQL db. The MySQL pool size is set to 50.This is a rake task in RoR.Would this work better using Kernal#fork or some other method? <code> ",is there a limit to the number of threads that ruby can run at once?
is there a limit to the number of threads that ruby can run at once?   ," If not whats the maximum while still remaining efficient? I'm creating 14 threads, each of which opens a list of URLs(about 500) creates a new thread for each one, which then downloads it, and adds it to a MySQL db. The MySQL pool size is set to 50.This is a rake task in RoR.Would this work better using Kernal#fork or some other method? <code> ",is there a limit to the number of threads that ruby can run at once?
Should I learn MacRuby+IronRuby or JRuby for Desktop Applications?," For Web Applications I use Ruby on Rails. And now it's time to see if I can code Desktop Applications with Ruby.So I wonder which one I should choose.The way I see it is MacRuby+IronRuby vs JRuby.The former lets me have desktop applications for both Mac and Windows while the latter lets be have in both, but only learning one tool.Is there strong arguments to use the former than the latter?Will JRuby Desktop Applications be as native (or near-enough-native) as MacRuby+IronRuby Desktop Applications?What are the pros and cons for each solution?Im very new too Desktop development. Share your thoughts and experience! <code> ",MacRuby+IronRuby or JRuby for Desktop Applications?
Ruby - why put a module inside a class?," In Ruby, I see that it can be useful to put classes inside modules for the sake of namespacing. I also see that it's possible to put modules inside classes. But I don't see why you'd do that.Modules are generally mixed into classes, right? So, what would be the purpose of defining a module inside a class? <code> ",Why would we put a module inside a class in Ruby?
ruby on rails get url string parameters," I have this URL in my database, in the ""location"" field: I can get it with @object.location, but how can I get the value of v? I mean, get ""xxxxxxxxxxxx"" from the URL string? <code>  http://www.youtube.com/watch?v=xxxxxxxxxxxxxxxxxxx",Get URL string parameters?
how remove rvm (ruby version manager) in my system?, How can I remove RVM (Ruby Version Manager) from my system? <code> ,How to remove RVM (Ruby Version Manager) from my system
How to remove rvm (ruby version manager) from my system?, How can I remove RVM (Ruby Version Manager) from my system? <code> ,How to remove RVM (Ruby Version Manager) from my system
How can I remove RVM (Ruby Version Manager) from my system?, How can I remove RVM (Ruby Version Manager) from my system? <code> ,How to remove RVM (Ruby Version Manager) from my system
"parse a CSV, update a field, then save"," I need to read a CSV file, update a field, then save the changes. I have everything working fine except saving my changes to the field I'm updating: What do I do here? How do I save the changes I made and update the file? <code>  require 'csv'@parsed_file = CSV::Reader.parse(File.open(""#{RAILS_ROOT}/doc/some.csv""))@parsed_file.each_with_index do |row, x| address = row[5] l = Location.address_find(address) if l != nil puts ""#{l.name} at #{l.address}"" row[14] = l.store_code puts row[14] else puts ""No matching address Found!!!"" end #What do I do here? Something like this? CSV::Writer.generate(@parsed_file) end","How to parse a CSV file, update a field, then save"
"Parse a CSV file, update a field, then save"," I need to read a CSV file, update a field, then save the changes. I have everything working fine except saving my changes to the field I'm updating: What do I do here? How do I save the changes I made and update the file? <code>  require 'csv'@parsed_file = CSV::Reader.parse(File.open(""#{RAILS_ROOT}/doc/some.csv""))@parsed_file.each_with_index do |row, x| address = row[5] l = Location.address_find(address) if l != nil puts ""#{l.name} at #{l.address}"" row[14] = l.store_code puts row[14] else puts ""No matching address Found!!!"" end #What do I do here? Something like this? CSV::Writer.generate(@parsed_file) end","How to parse a CSV file, update a field, then save"
Odd Nokogiri and XPath error," Admittedly, I'm a Nokogiri newbie and I must be missing something...I'm simply trying to print the author > name node out of this XML: I'm trying to using this, but it prints nothing. Seemingly no node (even '*') returns nothing. <code>  <?xml version=""1.0"" encoding=""UTF-8""?><entry xmlns:gd=""http://schemas.google.com/g/2005"" xmlns:docs=""http://schemas.google.com/docs/2007"" xmlns=""http://www.w3.org/2005/Atom"" gd:etag=""""> <category term=""http://schemas.google.com/docs/2007#document"" scheme=""http://schemas.google.com/g/2005#kind""/> <author> <name>Matt</name> <email>Darby</email> </author> <title>Title</title></entry> Nokogiri::XML(@xml_string).xpath(""//author/name"").each do |node| puts node end",Nokogiri and XPath help
using xpath on single Nokogiri node returns elements in all nodes," I am parsing an XML doc that looks something like this: I use xpath to pull out the MyBook nodes and iterate through them like so: the output looks like this: as if the node is really the whole xmldoc. However if I print out the node within the iterator, each time it is what I expect, just a single MyBook node. I need to be able to pull out the child nodes from each node successively, not all of the same kind of child node from the whole document. What am I doing wrong? <code>  <MyBook> <title>Favorite Poems</title> <issn>123-456</issn> <pages>45</pages></MyBook><MyBook> <title>Chocolate Desserts</title> <issn>654-098</issn> <pages>100</pages></MyBook><MyBook> <title>Jabberwocky</title> <issn>454-545</issn> <pages>19</pages></MyBook> xmldoc.xpath(""//MyBook"").each do |node| mytitle=node.xpath(""//title"").text puts mytitleend Favorite PoemsChocolateDessertsJabberwockyFavorite PoemsChocolateDessertsJabberwockyFavorite PoemsChocolateDessertsJabberwocky",Using XPath on single node returns elements in all nodes
How do I convert a string text into a class name -- ruby," I have a string as using this I want to create an object of the Text classNow when I try doing this I get the Text as a module and not as a class.Please suggest something.Thanks and regardsRohit <code>  classname = ""Text"" classname = classname.constantize",How do I convert a string text into a class name
Find a process id by name in Ruby," How can I find a pid by name or full command line in Ruby, without calling an external executable?I am sending SIGUSR2 to a process whose command line contained ruby job.rb. I would like to do the following without the call to pgrep: <code>  uid = Process.uidpid = `pgrep -f ""ruby job.rb"" -u #{uid}`.split(""\n"").first.to_iProcess.kill ""USR2"", pid",Find a process ID by name
Javascript Array: get 'range' of items.," Is there an equivalent for ruby's array[n..m] in JavaScript?For example: <code>  >> a = ['a','b','c','d','e','f','g']>> a[0..2]=> ['a','b','c']","JavaScript Array: get ""range"" of items"
add existing classes into a Ruby module," I have some existing ruby classes in a app/classes folder: I'd like to group those classes in a module MyModuleI know I could do like: but is there a meta programming shortcut that could do the same so I could ""import"" all the existing classes ?Thanks,Luc <code>  class A ...endclass B ...end module MyModule class A ... end class B ... endend",Add existing classes into a module
Using Nokogiri and XPath to get nodes with multiple attributes," I'm trying to use Nokogiri to parse an HTML file with some fairly eccentric markup. Specifically, I'm trying to grab divs which have both ids, multiple classes and styles defined. The markup looks something like this: I'm attempting to grab the <dl> which sits inside the problem <div>. I can get divs with a single id attribute with no problem, but I can't figure out a way of getting Nokogiri to grab divs with both ids and classes. So these work fine: But these don't return anything: Is there something obvious that I'm missing here? <code>  <div id=""foo""> <div id=""bar"" class=""baz bang"" style=""display: block;""> <h2>title</h2> <dl> List of stuff </dl> </div></div> content = @doc.xpath(""//div[id='foo']"")content = @doc.css('div#foo') content = @doc.xpath(""//div[id='bar']"")content = @doc.xpath(""div#bar"")",How to use Nokogiri and XPath to get nodes with multiple attributes
Installing mysql2 gem for Rails 3, I am having some problems when trying to install mysql2 gem for Rails. When I try to install it by running bundle install or gem install mysql2 it gives me the following error: Error installing mysql2: ERROR: Failed to build gem native extension.How can I fix this and successfully install mysql2? <code> ,Error installing mysql2: Failed to build gem native extension
Ruby on Rails: easiest way to remove the first char from a string.," Example: What is the fastest, most efficient way to remove the ""["",using maybe a chop() but for the first character? <code>  [12,23,987,43",What is the easiest way to remove the first character from a string?
Ruby: easiest way to remove the first char from a string.," Example: What is the fastest, most efficient way to remove the ""["",using maybe a chop() but for the first character? <code>  [12,23,987,43",What is the easiest way to remove the first character from a string?
Ruby on Rails - Distinct difference between collection and each?, Using arrays what's the main difference between collect and each? Preference?  <code>  some = []some.collect do {|x| puts x}some.each do |x| puts xend,Distinct difference between collect and each?
Ruby - Distinct difference between collection and each?, Using arrays what's the main difference between collect and each? Preference?  <code>  some = []some.collect do {|x| puts x}some.each do |x| puts xend,Distinct difference between collect and each?
Distinct difference between collection and each?, Using arrays what's the main difference between collect and each? Preference?  <code>  some = []some.collect do {|x| puts x}some.each do |x| puts xend,Distinct difference between collect and each?
How do I check whether a vlue in a string is an IP address," when I do this I get the client's IP address it it. But what if I want to validate whether the value in the variable is really an IP?How do I do that?Please help.Thanks in advance. And sorry if this question is repeated, I didn't take the effort of finding it...EDITWhat about IPv6 IP's?? <code>  ip = request.env[""REMOTE_ADDR""]",How do I check whether a value in a string is an IP address
Is there a full implementation for ISO-8601 date parsing for Ruby," The Time.iso8601 method is a restricted subset of ISO-8601. What are its limitations?Does anyone know of a full implementation for Ruby? I'm using MRI 1.8.7.UpdateIt looks like there isn't a single class that handles all of the various 8601 date and date/time combinations. However, I have managed to work around the problems by using both the Date.parse and Time.iso8601 methods. The downside is that you need to decide in code whether the input looks like a date or a date/time.Warning : Timezone differencesTime.iso8601 and Time.parse behave differently. Differences between Time.iso8601 and ISO-8601This document touches on the differences between what is in ISO-8601 and what is supported by Ruby. The short answer is that the number of possible formats is restricted. <code>  >> Time.parse(""2010-09-06T12:27:00.10-05:00"")=> Mon Sep 06 18:27:00 +0100 2010>> Time.iso8601(""2010-09-06T12:27:00.10-05:00"")=> Mon Sep 06 17:27:00 UTC 2010",Is there a full implementation for ISO-8601 date parsing for Ruby?
"Can optparse skip unknown options, to be processed later in a ruby program?"," Is there any way to kick off OptionParser several times in one Ruby program, each with different sets of options?For example: Here, myscript.rb would use subsys1 and subsys2, delegating their options handling logic to them, possibly in a sequence where 'a' is processed first, followed by 'b' in separate OptionParser object; each time picking options only relevant for that context.A final phase could check that there is nothing unknown left after each part processed theirs.The use cases are:In a loosely coupled front-end program, where various components have different arguments, I don't want 'main' to know about everything, just to delegate sets of arguments/options to each part.Embedding some larger system like RSpec into my application, and I'd to simply pass a command-line through their options without my wrapper knowing those.I'd be OK with some delimiter option as well, like -- or --vmargs in some Java apps.There are lots of real world examples for similar things in the Unix world (startx/X, git plumbing and porcelain), where one layer handles some options but propagates the rest to the lower layer.Out of the box, this doesn't seem to work. Each OptionParse.parse! call will do exhaustive processing, failing on anything it doesn't know about.I guess I'd happy to skip unknown options.Any hints, perhaps alternative approaches are welcome. <code>  $ myscript.rb --subsys1opt a --subsys2opt b","Can OptionParser skip unknown options, to be processed later in a Ruby program?"
How to porperly pass collection for input in Formtastic," I need to pass a collection to the standard select input in Formtastic: The problem is, though that I need Formtastic to access a different method than name. Now this is really a problem. I can always pass the Array The problem is, that after this I will get strings in the controller instead of IDs which is not desired. I tried to pass Hash instead: Now the problem is, that since I am using Ruby 1.8.7, the Hash order is unspecified and I of course need ordered input... I can imagine some solutions, but all of those require unnecessary code.Any idea how to solve this right? <code>  f.input :apple, :as => :select, :collection => Apple.all f.input :apple, :as => :select, :collection => Apple.map { |a| a.format_name } options = Hash.newApple.each { |a| Apple.store(a.format_name, a.id) }f.input :apple, :as => :select, :collection => options",How to properly pass collection for input in Formtastic
What is ri and rdoc for ruby on rails, Whenever I install gems I see ri and rdoc follow. I know this is documentation but what is the difference between the two and how to use them? <code> ,What is the difference between ri and rdoc
Install Rails 3 on OSX," Trying to install the new Rails 3 release on OSX 10.6.Have never touched Ruby or Rails on this machine since purchased.I was able to get rvm and get Ruby 1.9.2. installed. From there, I am stuck.I tried: And I get the same result error each time: If I do gem list, it says LOCAL GEMS and doesn't list anything.I have read a few walkthroughs but honestly none of them address this issue and its kind of pissing me off. Why is this so difficult to install? Would love to learn it if someone could help me get it running.I was trying to follow this:http://eddorre.com/posts/installing-rails-3-beta-4-using-rvmand this:http://hivelogic.com/articles/compiling-ruby-rubygems-and-rails-on-snow-leopardWhich is actually linked from the ROR guides website. Am I missing dependencies? How do I get them in?If I do rails -v I get: <code>  rvmsudo gem install rails -v 3.0.0sudo gem install rails --presudo gem install railssudo gem update rails ERROR: While executing gem ... (Errno::ENOENT) No such file or directory - /Users/kevin/.rvm/gems/ruby-1.9.2-head@rails3/cache/activesupport-3.0.0.gem rails -v/Library/Ruby/Site/1.8/rubygems.rb:779:in `report_activate_error': Could not find RubyGem rails (>= 0) (Gem::LoadError) from /Library/Ruby/Site/1.8/rubygems.rb:214:in `activate' from /Library/Ruby/Site/1.8/rubygems.rb:1082:in `gem' from /usr/bin/rails:18",Install Rails 3 on OSX with RVM
How do you initialize variables in rails?, Are there any differences between the following ways of initialization of variables? Please share your way initializing a variable and state the pros & cons. <code>  @var ||= []@var = [] if @var.nil?@var = @var || [],How do you initialize variables in Ruby?
Simple Conversion Of String To UTF-8 in Ruby 2.8, I know that in Ruby 1.9 you can easily re-encode a string like this. What is the equivalent in Ruby 1.8? What require lines does it need.All the tutorials I have seen are needlessly complicated and I don't understand what is going on. <code>  s = s.encode('UTF-8'),Simple Conversion Of String To UTF-8 in Ruby 1.8
Extract url from text, How do I extract all URLs from a plain text file in Ruby?I tried some libraries but they fail in some cases. What's the best way? <code> ,How to extract URLs from text
Calculate percentage in rails ??, Is there any method available to calculate percentage in rails or ruby ??EDIT:I am looking for a function like ..100000.percent(10) will return me 10000.100000 is value ..(value is BigDecimal)10 % ..result = 100000 * 10 / 100result = 10000 .. <code> ,Calculate percentage in ruby ??
What is require_relative in Ruby?, What is the difference between require_relative and require in Ruby? <code> ,What is the difference between require_relative and require in Ruby?
Ruby on Rails and Google Book Search," I'm trying to get started using the Google Data API for Google Book Search in my Ruby on Rails 3 application, and I don't even understand how to get started. What gems do I need? What do I need to do in order to do something simple like searching for books with a title of Foobar? <code> ",Ruby on Rails 3 and Google Book Search
How to get all class names in namespace in ruby?," I have a module Foo, that it is the namespace for many classes like Foo::Bar, Foo::Baz and so on.Is there an way to return all class names namespaced by Foo? <code> ",How to get all class names in a namespace in Ruby?
Ruby multiline blocl without do end," Im a beginner in Ruby, so Im sorry to ask something so simple, but is there anything wrong with this code or It works well enough, but most of the code samples I see use the syntax of is it just the convention to only use curly braces for single statements? Coming from C/C# the first seems more natural to me, but when in Rome! <code>  3.upto(9) { print ""Hello"" puts "" World""} 3.upto(9) { |n| print ""Hello "" puts n} 3.upto(9) do |n| print ""Hello "" puts nend",Ruby multiline block without do end
File.open modes and options?, Ruby's File.open takes modes and options as arguments. Where do I find a complete list of modes and options? <code> ,What are the Ruby File.open modes and options?
How to strip out invalid UTF-8 characters in Ruby 1.9," I just upgraded from Ruby 1.8 to 1.9, and most of my text processing scripts now fail with the error invalid byte sequence in UTF-8. I need to either strip out the invalid characters or specify that Ruby should use ASCII encoding instead (or whatever encoding the C stdio functions write, which is how the files were produced) -- how would I go about doing either of those things? Preferably the latter, because (as near as I can tell) there's nothing wrong with the files on disk -- if there are weird, invalid characters they don't appear in my editor... <code> ",Reading ASCII-encoded files with Ruby 1.9 in a UTF-8 environment
Basic_auth with rest-client?, Does anyone know how to do basic authentication with RestClient?I need to create a private repository on GitHub through their RESTful API. <code> ,How do I do basic authentication with RestClient?
Yard is not the same as Rdoc?," Correct me if I'm wrong, is YARD not the same as RDoc?It's not based on RDoc but a total rewrite?So if I'm using YARD, I don't have to bother with RDoc right? <code> ",YARD is not the same as RDoc?
Installing rmagick on Ubuntu ," I'm trying to get RMagick setup on Ubuntu 10.04. Looked here but had no joy. I even compiled and installed ImageMagick from source, but the instructions here still didn't help me when I try to install RMagick using RubyGems. I got this error: What does it all mean? :) I'm new to Ruby and RubyGems so please be gentle. My setup is as follows: I'm pretty much out of ideas (and tired too!). I tired to compile RMagick from source using the link above but it failed as there was no ./configure script :( Any and all help appreciated! <code>  carcher@carcher-laptop:~/Code/temp/RMagick-2.13.1$ sudo gem install rmagickBuilding native extensions. This could take a while...ERROR: Error installing rmagick: ERROR: Failed to build gem native extension./usr/bin/ruby1.8 extconf.rbextconf.rb:1:in `require': no such file to load -- mkmf (LoadError) from extconf.rb:1Gem files will remain installed in /usr/lib/ruby/gems/1.8/gems/rmagick-2.13.1 for inspection.Results logged to /usr/lib/ruby/gems/1.8/gems/rmagick-2.13.1/ext/RMagick/gem_make.outcarcher@carcher-laptop:~/Code/temp/RMagick-2.13.1$ Ruby: 1.8.7RubyGems: 1.3.7",Ruby: Installing rmagick on Ubuntu
Ruby parse csv file with header fields as attributes for each row," I would like to parse a CSV file so that each row is treated like an object with the header-row being the names of the attributes in the object. I could write this, but I'm sure its already out there.Here is my CSV input: The code would look something like this: With Ruby's CSV module I believe I can only access the fields by index. I think the above code would be a bit more readable. Any ideas? <code>  ""foo"",""bar"",""baz""1,2,3""blah"",7,""blam""4,5,6 CSV.open('my_file.csv','r') do |csv_obj| puts csv_obj.foo #prints 1 the 1st time, ""blah"" 2nd time, etc puts csv.bar #prints 2 the first time, 7 the 2nd time, etcend",Parse CSV file with header fields as attributes for each row
How does one submit a form via AJAX in rails?," I have an email form. But I'm making a test email form where a user can add a unique email, and have the email test send it to that particular email. To make it easy, I decided to make the test email perform via ajax, and stick the whole thing inside of the other email form.I can't figure out how to send the variables from my HAML to my controllernew.html.haml JS Controller routes.rb I apologize ahead of time if this is a dumb newbie question. :( <code>  - form_tag admin_email_blast_path do Subject %br = text_field_tag 'subject', :class => ""mass_email_subject"" %br Body %br = text_area_tag 'message', '', :name => 'editor1', :class => ""mass_email_body"" %br/ = submit_tag 'Send Email', :class => 'button' .grid_3.right.align_right.suffix_1 # <= TEST EMAIL :D = text_field_tag 'email', nil, :style => ""width: 150px;"", :class => ""test_email_address"" = link_to 'Test Email', test_email_admin_email_blast_path, :class => 'button test_email' $("".test_email"").live(""click"", function() { var email = $("".test_email_address"") var subject = $("".mass_email_subject""); var body = $("".mass_email_body""); data = ""email="" + email.val() + ""&subject"" + subject.val() + ""&body"" + body.val(); $.ajax({type: ""GET"", url: $(this).attr(""href""), dataType: ""script"" data: data }); return false;}); def test_email debugger email = params[:email] subject = params[:subject] body = params[:body] Notifier.deliver_email_blast(email, subject, body)end admin.resource :email_blast, :member => { :test_email => :get }",How does one pass AJAX vars from jQuery to their controller?
Capitalize first letter in ruby," The upcase method capitalizes the entire string, but I need to capitalize only the first letter.Also, I need to support several popular languages, like German and Russian.How do I do it? <code> ",How to capitalize the first letter in a String in Ruby
"Am I abusing of ""rescue""?"," I use rescue for everything, not just for ""rescuing"" exceptions. I mean, I just love the way it spares me verification and double checking data.By example, lets say I have a model Item what may or may not have a User. Then, when I want to get the owner's name of the item I write: instead of something like It makes the same think, since nil.name trigger an exception that I rescue with """", but I'm not pretty sure this is good practice. It makes what I want to, and it makes it with less code, but... I don't know, all that rescue words here and there makes me feel insecure.Is it a bad practice or is it valid abusing of the rescue keyword? <code>  item.user.name rescue """" item.user.nil? ? """" : item.user.name","Am I abusing ""rescue"" for nil checks?"
Confusing behaviour of Array# bang methods," Some bang version of Array methods are like compact!, reject!, flatten!, uniq! return nil if no changes were made: If they did it this way, there has to be a reason. Any ideas what it might be? <code>  [1,[2]].flatten!# => [1, 2][1,2].flatten!# => nil[1,[2]].flatten# => [1, 2][1,2].flatten# => [1, 2][1,2,nil].compact!# => [1, 2][1,2].compact!# => nil[1,2,nil].compact# => [1, 2][1,2].compact# => [1, 2]",Behaviour of Array bang methods
Require file without executing codes?," Here I have two files:file.rb main.rb When running main.rb it will load all the code inside file.rb so I will get ""This will be outputted."" on the screen.Is it possible to load a file without having it to run the code?Cause I want to load all the methods (in modules and classes too) without having to execute code outside these scopes. <code>  def method puts ""This won't be outputted.""endputs ""This will be outputted."" require ""./file""",Require file without executing code?
Magic $-prefixed variables in Ruby; is there a complete reference somewhere?, I've seen magic variables like this used in Ruby. $_ $' $0Is there a complete reference for what all of them mean and how they are set? <code> ,What are the magic $-prefixed variables in Ruby?
$-prefixed variables in Ruby; is there a complete reference somewhere?, I've seen magic variables like this used in Ruby. $_ $' $0Is there a complete reference for what all of them mean and how they are set? <code> ,What are the magic $-prefixed variables in Ruby?
$-prefixed variables in Ruby; Is there a complete reference somewhere?, I've seen magic variables like this used in Ruby. $_ $' $0Is there a complete reference for what all of them mean and how they are set? <code> ,What are the magic $-prefixed variables in Ruby?
How to prevent pipe character from causing a Bad UI Error in Rails 3/Ruby 1.9.2?," In implementing OAuth2 in my app, I need to handle URIs like:http://localhost:3000/sessions/create/?code=lorem|ipsumNot sure if it's a Rails 3 or Ruby 1.9.2 problem (maybe URI.parse), but in any event, WEBrick kicks Error bad URI.Anyone know of a workaround? Thanks. <code> ",How to prevent pipe character from causing a Bad URI Error in Rails 3/Ruby 1.9.2?
How do I avoid cross-thread violations in Ruby?," I'm writing a C extension, providing an interface between Ruby and an asynchronous I/O library. When running the tests over my code, I frequently get errors including (but not limited to): Asynchronous IO means my C extension will need to deliver messages to ruby from multiple threads (not the main interpreter thread). How do I avoid these thread-safety violations, in the process? <code>  [BUG] cross-thread violation in rb_thread_schedule()",How do I avoid cross-thread violations in a Ruby extension?
Is there any method available to find changed attributes for the objects., I want to fetch only changed attributes of an object. Is there any method available which returns all the updated attributes? <code> ,Is there any method available to find changed attributes for objects?
how do i remove leading whitespace chars from ruby heredoc," I'm having a problem with a Ruby heredoc i'm trying to make. It's returning the leading whitespace from each line even though i'm including the - operator, which is supposed to suppress all leading whitespace characters. my method looks like this: and my output looks like this: this, of course, is right in this specific instance, except for all the spaces between the first "" and \t. does anyone know what i'm doing wrong here? <code>  def distinct_count <<-EOF \tSELECT \t CAST('#{name}' AS VARCHAR(30)) as COLUMN_NAME \t,COUNT(DISTINCT #{name}) AS DISTINCT_COUNT \tFROM #{table.call} EOFend => "" \tSELECT\n \t CAST('SRC_ACCT_NUM' AS VARCHAR(30)) asCOLUMN_NAME\n \t,COUNT(DISTINCT SRC_ACCT_NUM) AS DISTINCT_COUNT\n \tFROM UD461.MGMT_REPORT_HNB\n""",How do I remove leading whitespace chars from Ruby HEREDOC?
Using Modules in Rails Application," I have a model that requires loading external data from an auxiliary source. A number of web services exist that my model can fetch the data from (swappable), but I don't want to create code that will make it difficult to change services (costs significantly differ based on variable and fixed usage and it is likely changing will be required).I would like to create a driver to perform the interaction (and then create further custom drivers if the service requires switching). Unfortunately, due to the tight coupling of the driver and model, it does not makes sense to extract the code into a plugin or gem. I have extracted all the code into a module (see example), and currently have the code declared above my model. Does Rails (3.0.0) have a convention for storing modules tightly coupled with models? Should I be using a plugin to do this? Is this associated with the 'app/helpers' directory? If not, where is the most appropriate place to store the code? Thanks! <code>  module Synchronize def refresh self.attributes = ... self.save endendclass Data < ActiveRecord::Base include Synchronizeend",Model Using Modules in Rails Application
Format ruby code in vim," Just moving over to Vim at the moment. In TextMate I could format code by hitting Cmd-Alt-[. How do I achieve the same in Vim?See the answer below for the command. I found I also needed the following in my .vimrc so that Vim knew how to autoindent Ruby. <code>  if has(""autocmd"") filetype indent onendif",Format Ruby code in Vim
Why @@class_variable syntax should be avoided in Ruby?, I know that some say that class variables (e.g. @@class_var) should be avoid in Ruby and should use the an instance variable (e.g. @instance_var) in the class scope instead: Why is the use of class variables frowned upon in Ruby? <code>  def MyClass @@foo = 'bar' # Should not do this. @foo = 'bar' # Should do this.end,Why should @@class_variables be avoided in Ruby?
Dumping all key/value pairs in a Redis db," I'm using an ORM called Ohm in Ruby that works on top of Redis and am curious to find out how the data is actually stored. I was wondering if there is way to list all the keys/values in a Redis db.Any lead will go a long way in helping me out (I'm basically stuck atm). Thanks in advance!Update:A note for others trying this out using redis-cli, use this: Thanks @antirez and @hellvinz! <code>  $ redis-cli keys* (press * followed by Ctrl-D)... (prints a list of keys and exits)$",Retrieving/Listing all key/value pairs in a Redis db
setting SSLContext options in ruby," I need to create an SSLSocket in Ruby 1.8+ to talk to an encrypted service. I want to set SSL options on the SSLContext object (it eventually calls SSL_CTX_set_options in the underlying OpenSSL library). I am not seeing any obvious way to do this.This is using the OpenSSL::SSL::SSLContext interface.As a point of reference, this is analogous to calling the set_options() in Python's pyOpenSSL library. <code> ",How to set SSLContext options in Ruby
"In Ruby, always use ""&&"", ""||"" instead of ""and"", ""or"" unless for special situations?"," Is it true that in most cases, in Ruby, it is best to use &&, || instead of and, or, unless it is some special situations.I think one of Ruby's design principles is to have least surprises as possible, so using and, or or actually have some surprises... such as and not having a higher precedence than or, while && has a higher precedence than ||.So I think in most cases, use &&, ||. In know in some special situations, it may require using and, or, but I think if those are intermixed with &&, ||, sooner or later it may create bugs when your coworkers who started in Ruby not so long ago need to edit your code. <code> ","In Ruby, should we always use ""&&"", ""||"" instead of ""and"", ""or"" unless for special situations?"
Ruby Question one line if statement," I was thinking of something like this? But it doesn't work. Ruby has the ||= but I""m not even sure how to use that thing.  <code>  <%if @item.rigged %>Yes<%else%>No<%end%> if @item.rigged ? ""Yes"" : ""No"" ",One line if statement not working
tackle different types of utf hyphens in ruby 1.8.7 ," We have different types of hyphens/dashes (in some text) populated in db. Before comparing them with some user input text, i have to normalize any type of dashes/hyphens to simple hyphen/minus (ascii 45). The possible dashes we have to convert are: These all have to be converted to Hyphen-minus(-) using gsub.I've used CharDet gem to detect the character encoding type of the fetched string. It's showing windows-1252. I've tried Iconv to convert the encoding to ascii. But it's throwing an exception Iconv::IllegalSequence.ruby -v => ruby 1.8.7 (2009-06-12 patchlevel 174) [i686-darwin9.8.0]rails -v => Rails 2.3.5mysql encoding => 'latin1'Any idea how to accomplish this? <code>  Minus() U+2212 &minus; or &#x2212; or &#8722;Hyphen-minus(-) U+002D &#45;Hyphen(-) U+2010Soft Hyphen U+00AD &shy;Non-breaking hyphen U+2011 &#8209Figure dash() U+2012 (8210) &#x2012; or &#8210;En dash() U+2013 (8211) &ndash;, &#x2013; or &#8211;Em dash() U+2014 (8212) &mdash;, &#x2014; or &#8212;Horizontal bar() U+2015 (8213) &#x2015; or &#8213;",tackle different types of utf hyphens in ruby 1.8.7
"ruby: Range is empty, but slicing with it produces elements?"," I'm learning Ruby and have just gotten into some stuff about arrays and ranges. I've run into something about slices that, while it makes sense at first glance, confuses me a bit when I look deeper into it.IRB says that (2..-1).to_a is an empty array, meaning no values in the range, right?But if I use that same range in [:a, :b, :c, :d, :e][2..-1], I get back [:c, :d, :e] rather than an empty array.Now, I'm aware that -1 represents the last element of the array, so it kind of makes sense that what got picked, did. But if the range itself would be empty, how is it selecting anything? <code> ","Ruby: Range is empty, but slicing with it produces elements"
Is there a way to set up simple http authentication for an app on heroku?, I want to set up a private staging server on heroku using simple http authentication. Is that possible? <code> ,Is there a way to set up simple http authentication for a Ruby on Rails app on heroku?
Resque Scheduler on Heroku... Do it remotly ?," I'm adding Resque-Scheduler in my app on HerokuSo... I need ONE alone and distinct worker acting as the scheduler andmany doing the jobs.This is how I've done it :I've a distinct Heroku App which does nothing but has 1 resque-scheduler worker, running 24/7, adding Resque tasks to the Redis DB of the ""distant"" main App.(I do that mapping jobs:work task to resque:scheduler or resque:work)Is this the best way to do it on the Heroku's platform ; or am I doing it totally wrong ? Thanks ! EDIT: minimal app for scheduling on Heroku :http://github.com/clmntlxndr/heroku-schedulerUPDATE: With the new CEDAR stack on Heroku and Procfiles, it's possible to start a distinct task for each worker. http://devcenter.heroku.com/articles/procfile <code>  web: bundle exec rails server -p $PORTscheduler: bundle exec rake resque:schedulerworker: bundle exec rake jobs:work",Resque Scheduler on Heroku... Do it remotely?
Resque Scheduler on Heroku... Do it remotely ?," I'm adding Resque-Scheduler in my app on HerokuSo... I need ONE alone and distinct worker acting as the scheduler andmany doing the jobs.This is how I've done it :I've a distinct Heroku App which does nothing but has 1 resque-scheduler worker, running 24/7, adding Resque tasks to the Redis DB of the ""distant"" main App.(I do that mapping jobs:work task to resque:scheduler or resque:work)Is this the best way to do it on the Heroku's platform ; or am I doing it totally wrong ? Thanks ! EDIT: minimal app for scheduling on Heroku :http://github.com/clmntlxndr/heroku-schedulerUPDATE: With the new CEDAR stack on Heroku and Procfiles, it's possible to start a distinct task for each worker. http://devcenter.heroku.com/articles/procfile <code>  web: bundle exec rails server -p $PORTscheduler: bundle exec rake resque:schedulerworker: bundle exec rake jobs:work",Resque Scheduler on Heroku... Do it remotely?
Why does Ruby have Numeric#new ?, I can't imagine a use case for this. Can you? <code>  a = Numeric.new # doesn't take an argument,Why does Ruby have Numeric.new ?
What's the best way to build a facebook application using rails?," I have a rails application using the Facebook API. I've seen several different Ruby gems for integrating with Facebook, but they look dated. Is it best to write low-level calls myself? Is there a decent and current gem available?Have any of these gems changed recently?I'm beginning a new project -- which gem should I use as of September, 2012? <code> ",Which Ruby gems support the Facebook API?
Which ruby gems support the Facebook social graph api? ," I have a rails application using the Facebook API. I've seen several different Ruby gems for integrating with Facebook, but they look dated. Is it best to write low-level calls myself? Is there a decent and current gem available?Have any of these gems changed recently?I'm beginning a new project -- which gem should I use as of September, 2012? <code> ",Which Ruby gems support the Facebook API?
Which Ruby gems support the Facebook social graph API? ," I have a rails application using the Facebook API. I've seen several different Ruby gems for integrating with Facebook, but they look dated. Is it best to write low-level calls myself? Is there a decent and current gem available?Have any of these gems changed recently?I'm beginning a new project -- which gem should I use as of September, 2012? <code> ",Which Ruby gems support the Facebook API?
Bundler: Trace and check dependencies in bundled ruby gems," Bundler will automatically install any dependencies for the specified gems, however it doesn't output which dependencies map to which gems in the standard output. That information is useful when one of the dependencies fails the installation.Is there a way to set Bundler to be more verbose and inform about the dependencies while installing?I am using Bundler 1.0.2 <code> ",How to trace and check dependencies in bundled Ruby gems
Trace and check dependencies in bundled ruby gems," Bundler will automatically install any dependencies for the specified gems, however it doesn't output which dependencies map to which gems in the standard output. That information is useful when one of the dependencies fails the installation.Is there a way to set Bundler to be more verbose and inform about the dependencies while installing?I am using Bundler 1.0.2 <code> ",How to trace and check dependencies in bundled Ruby gems
RDoc Syntax Reference," I'm looking for a good, solid reference for proper RDoc syntax. Recommendations? I can't seem to find anything that clearly shows:How to document class methods and their parametersHow to document what a class or class method does. <code> ","Is there a good, solid reference for proper RDoc syntax?"
Best way to find a sub string in a string," I have a problem where I am trying to search for a substring in string. That substring may or may not be in the string. Two ways which I know if can be done are:string.indexOf(""how are"")regexBut, is there any other ""optimized"" way? What would you have done?Can Ruby provide a better answer? Since we use jRuby the answer can be in Ruby or Java. <code>  str = ""hello how are you?""substr = ""how are""",Best way to find a substring in a string
How to parse a YAML file in Ruby," I would like to know how to parse a YAML file with the following contents: Currently I am trying to parse it this way: But it doesn't seem to work and gives me an error that the value is nil. If I try this, it puts out the entire string (fo_globallazyload-minholla-min): <code>  --- javascripts: - fo_global: - lazyload-min - holla-min @custom_asset_packages_yml = (File.exists?(""#{RAILS_ROOT}/config/asset_packages.yml"") ? YAML.load_file(""#{RAILS_ROOT}/config/asset_packages.yml"") : nil) if !@custom_asset_packages_yml.nil? @custom_asset_packages_yml['javascripts'].each{ |js| js['fo_global'].each{ |script| script } } end You have a nil object when you didn't expect it!You might have expected an instance of Array.The error occurred while evaluating nil.each if !@custom_asset_packages_yml.nil? @custom_asset_packages_yml['javascripts'].each{ |js| js['fo_global'] } end",How do I parse a YAML file in Ruby?
How do I parse a YAML file?," I would like to know how to parse a YAML file with the following contents: Currently I am trying to parse it this way: But it doesn't seem to work and gives me an error that the value is nil. If I try this, it puts out the entire string (fo_globallazyload-minholla-min): <code>  --- javascripts: - fo_global: - lazyload-min - holla-min @custom_asset_packages_yml = (File.exists?(""#{RAILS_ROOT}/config/asset_packages.yml"") ? YAML.load_file(""#{RAILS_ROOT}/config/asset_packages.yml"") : nil) if !@custom_asset_packages_yml.nil? @custom_asset_packages_yml['javascripts'].each{ |js| js['fo_global'].each{ |script| script } } end You have a nil object when you didn't expect it!You might have expected an instance of Array.The error occurred while evaluating nil.each if !@custom_asset_packages_yml.nil? @custom_asset_packages_yml['javascripts'].each{ |js| js['fo_global'] } end",How do I parse a YAML file in Ruby?
Ruby equivalent of Python None or JavaScript undefined," How does Ruby's nil manifest in code? For example, in Python you might use None for a default argument when it refers to another argument, but in Ruby you can refer to other arguments in the arg list (see this question). In JS, undefined pops up even more because you can't specify default arguments at all. Can you give an example of how RubyNone pops up and how it's dealt with?I'm not looking for just an example using nil. Preferably it would be a real code snippet which had to use nil for some reason or other. <code> ","Ruby use case for nil, equivalent to Python None or JavaScript undefined"
Grouping a ruby array," I have a Ruby array and I want a list with the counts like this: So ideally I want a hash that will give me the count and notice how I have Enter Sandman and enter sandman so I need it case insensitive. I am pretty sure I can loop through it but is there a cleaner way? <code>  > list = Request.find_all_by_artist(""Metallica"").map(&:song)=> [""Nothing else Matters"", ""Enter sandman"", ""Enter Sandman"", ""Master of Puppets"", ""Master of Puppets"", ""Master of Puppets""] {""Nothing Else Matters"" => 1, ""Enter Sandman"" => 2, ""Master of Puppets"" => 3}",Ruby: How to group a Ruby array?
"What's the javascript equivalent of ruby's ""inspect""?"," In Ruby, you can do foo.inspect and it outputs something sane for any object pretty much regardless of type.How do I achieve the same thing in JavaScript? <code> ","What's the JavaScript equivalent of Ruby's ""inspect""?"
hash in a external file used as settings? (ruby)," Can I somehow use this in a external file as settings? How can I include this into my script? <code>  settings = { 'user1' => { 'path' => '/','days' => '5' }, 'user2' => { 'path' => '/tmp/','days' => '3' }}",How do I save settings as a hash in a external file?
is there a chatbot framework avialble ," I am trying to create an program similar to ELIZA. My preference is to implement this project in a general language such as ruby, java, C++.is there some framework (open source would be great) available for any of these languages ? <code> ",Is there a chatbot framework available?
"Seeding file uploads with CarrierWave, Rails 3."," I'm trying to seed a database in Rails 3 with images using CarrierWave, however nothing I try seems to work short of having to upload them all by hand. Anybody know how to seed using CarrierWave at all? <code>  pi = ProductImage.new(:product => product)pi.image = File.open(File.join(Rails.root, 'test.jpg'))pi.store_image! # tried with and without thisproduct.product_images << piproduct.save!","Seeding file uploads with CarrierWave, Rails 3"
Good & Simple Ruby XML writer?, Does anyone know of an easy to use Ruby XML writer out there? I just need to write some simple XML and I'm having trouble finding one that's straightforward. <code> ,Good and simple Ruby XML writer?
Rails validates_numericality_of virtual attribute throws error., I this model: Whenever I submit a form to create this model I get the following error:undefined method `number_before_type_cast' for #<Bunny:0x103624338> <code>  class Bunny < ActiveRecord::Base attr_accessor :number validates_presence_of :number validates_numericality_of :numberend,Rails validating virtual attributes.
"Ruby - .round doesn't work, say me Wrong number of arguments"," I am trying to convert a temperature from Fahrenheit to Celsius: I use the correct formula for converting Fahrenheit to Celcius: Celsius = Fahrenheit - 32 / 1.8However, when I run this in the console, it gives me the following error: `round': wrong number of arguments (1 for 0) (ArgumentError)I've tried different things but I don't understand why this doesn't work. <code>  puts 'Convertir grados Fahrenheit a Celcius'STDOUT.flushx = gets.chompaprox = (x * 100.0).round(2) / 100.0resultado = (aprox-32)/1.8puts resultado","""wrong number of arguments"" ArgumentError when using round"
Trying to understand/decouple types and OO," Trying to understand if types imply OO and vice versa.Questions: What exactly is a type ? Can a class in ruby be called a 'type'. In javascript, the native functions/objects like Array,String,Function ... Are they types ? Is a C struct a type ? How is it that a language can be typed even when it doesn't support OO ? For e.g. Haskell. Is it that types in such langs are ""data"" types without behavior(methods) in objects/classes in OOPL ? What are the significant differences in types between langs that have types but no OO and langs that support OO.If classes/objects are types, doesn't OO imply types ? Can you have a type system without the typical hierarchies seen in OO langs ? Since clojure supports type hints, can it be called typed in some sense? it is not statically typed.Do the words 'untyped' and 'dynamically typed' mean the same thing ? <code> ",Are types and OO coupled ?
remove whitespace from each array item rails," I found this code: ...but it is for a hash, whereas I am trying to do the same with an array. <code>  .each_key {|a| self[a].strip! if self[a].respond_to? :strip! }",Ruby (Rails): remove whitespace from each array item
Custom URL's in a Rails App," I want users of my service to be able to add their own custom domains. For example, www.[their domain].com should be able to access their application's index and show pages. My service is implemented in Rails 3.I've seen apps like Tumblr offer this functionality for their front facing blogs. Although I have seen apps for Rails that implement sub domains in the way that Basecamp does, I have not found a resource for fully custom domains. <code> ",Custom domains in a Rails App
Custom URLs in a Rails App," I want users of my service to be able to add their own custom domains. For example, www.[their domain].com should be able to access their application's index and show pages. My service is implemented in Rails 3.I've seen apps like Tumblr offer this functionality for their front facing blogs. Although I have seen apps for Rails that implement sub domains in the way that Basecamp does, I have not found a resource for fully custom domains. <code> ",Custom domains in a Rails App
"Simulate a browser in ruby, with cookies"," It is possible to simulate a browser in Ruby? I know about OpenURI, but I want to simulate even the cookies behavior, etc. <code> ","Simulate a browser in Ruby, with cookies?"
how does ruby handle array range accessing?," In a 0-index setting where index 2, 3, and 4 are all in fact out of bounds of the 2-item array, why would these return different values?  <code>  ruby-1.8.7-p174 > [0,1][2..3] => [] ruby-1.8.7-p174 > [0,1][3..4] => nil",How does ruby handle array range accessing?
Howto Uninstall RVM, Possible Duplicate: How to remove rvm (ruby version manager) from my system? How can I uninstall (or reinstall) RVM on Ubuntu 9.10? I messed up my current installation. <code> ,How to Uninstall RVM?
Rails - how to count lins of code?, I tried rake stats but that seems highly inaccurate. Perhaps it ignores several directories? <code> ,How to count lines of code?
Rails - how to count lines of code?, I tried rake stats but that seems highly inaccurate. Perhaps it ignores several directories? <code> ,How to count lines of code?
Ruby 1.9 to_s behaves differently?," i wrote a quick little application that takes a base file of code with some keywords, a file of replacements for the keywords, and outputs a new file with the keywords replaced.When i was using Ruby 1.8, my outputs would look fine. Now when using Ruby 1.9, my replaced code has the newline characters in it instead of line feeds. For example, i see something like: instead of: i use a hash of replacements {""KEYWORD""=>[""1"",""2"",""3""]} and an array of the replaced lines.i use this block to finish the replacement: My hunch is that i'm printing out the array instead of the strings within the array. Any suggestions on a fix. When i debug and print my replaced string using puts, the output looks correct. When i use the to_s method (which is how my app writes the output to the output file), my output looks wrong.A fix would be nice, but what i really want to know is what changed between Ruby 1.8 and 1.9 that causes this behavior. Has the to_s method changed somehow in Ruby 1.9?*i'm inexperienced in Ruby <code>  [""\r\nDim RunningNormal_1 As Boolean"", ""\r\nDim RunningNormal_2 As Boolean"", ""\r\nDim RunningNormal_3 As Boolean""] Dim RunningNormal_1 As BooleanDim RunningNormal_2 As BooleanDim RunningNormal_3 As Boolean resultingLibs.each do |x| libraryString.sub!(/(<REPEAT>(.*?)<\/REPEAT>)/im) do |match| x.each do |individual| individual.to_s end endend#for each resulting group of the repeatable pattern,# #Write out the resulting libs to a combined string",Ruby 1.9 Array.to_s behaves differently?
Ruby: block for min / max function," Let's say I have the following array: and I want to find the minimum element, comparing the second element of the elements. The minimum element will be [5, 1] since 1 is less than 7. I can use the following code: For calculating the maximum, I can do the same: That gives [2, 7].I use the same block all the time. I would like to have that block somewhere and provide it to the min/max function. I hoped something like: would work, but it didn't. Any idea on how I can do this? <code>  arr = [[5, 1], [2, 7]] arr.min {|a,b| a[1] <=> b[1]} arr.max {|a,b| a[1] <=> b[1]} blo = lambda {|a,b| a[1] <=> b[1]}arr.min blo",Provide a proc to a method as a block
How to increase max pool size in active record," I get the error: How do I increase the max pool size? <code>  Error ""ActiveRecord::ConnectionTimeoutError - could not obtain a database connection within 5 seconds. The max pool size is currently 5; consider increasing it."" # DB CONNECTIONDB_CONN = ActiveRecord::Base.establish_connection(:adapter => ""sqlite3"", :dbfile => DB_FILE)",How to increase max pool size in ActiveRecord?
rendering a partial from a haml file," I have a simple sinatra app that uses haml and sass for the views. One of the views (located in the views folder) is a partial for my navigation menu. I am trying to render it from index.haml but I get the following error: wrong number of arguments (1 for 2)I am trying to render it with the following lines in index.haml <code>  .navigation = render :partial => ""nav""",How to render a partial in sinatra view (haml in haml)?
rails 3 Tree Data Structure, I have bees searching for a good solution for Tree Data Structure in Rails 3.I'm trying to build a Tree menu.What do you use and what would you recommend? <code> ,Rails 3 Tree Data Structure
"Ruby, !! operator"," Possible Duplicate: What does !! mean in ruby? Hi,I'm new to Ruby and can't find anywhere description of what ""!!"" means. Here's an example: If this is a double negative, why not to say: Please help. <code>  def signed_in? !!current_userend def signed_in? current_userend","Ruby, !! operator (a/k/a the double-bang)"
Ruby unc path access on windows, I'm trying to access a UNC share via irb on Windows. In the Windows shell it would be I tried escaping all of the backslashes. and using the IP address instead of the name <code>  \\server\share irb(main):016:0> Dir.entries '\\\\server\share'Errno::ENOENT: No such file or directory - \\server\share irb(main):017:0> Dir.entries '\\\\192.168.10.1\share'Errno::ENOENT: No such file or directory - \\192.168.10.1\share,How do I address a UNC path in Ruby on Windows?
RVM and global gems," I'm running Mac OSX 10.6.4 and have installed RVM. Its been great so far, I really love the way it lets me manage having multiple versions of rails and ruby on the same machine without headaches!However, I don't want to have to install certain gems (such as passenger) for each setup. Is there a way to share gems between gemsets? I have a 1.8.7@rails2.3.8 and 1.9.2@rails3, can I have gems such as passenger, mysql, and capistrano installed once and used with all versions? <code> ",How do I use RVM and create globally available gems?
How can I get an ordered list of middleware in use in a generic rack application?," The functionality I am looking for is similar to the rake middleware command in Rails, except for a generic rack application. <code> ",Get ordered list of middleware in a generic rack application?
File creation time in ruby on windows, How can I get the file creation time in Ruby on Windows? File.ctime is supposed to return change time.dir /tc in cmd.exe returns creation time with bunch of other stuff. Is there a better way than exec'ing it and parsing? <code> ,How do I get the file creation time in Ruby on Windows?
File creation time in Ruby on Windows, How can I get the file creation time in Ruby on Windows? File.ctime is supposed to return change time.dir /tc in cmd.exe returns creation time with bunch of other stuff. Is there a better way than exec'ing it and parsing? <code> ,How do I get the file creation time in Ruby on Windows?
Ruby getting a particular line from a file?," Is it possible to extract a particular line from a file knowing its line number? For example, just get the contents of line N as a string from file ""text.txt""? <code> ",How to get a particular line from a file
Problem running Mongrel with Rails3 and Ruby 1.9.2," I am new to programming (previously only did html/css/design) trying to start learning RoR via the book Simply Rails 2. However I want to start with the most recent versions of Ruby(1.9.2) and Rails (3) so I am forced to get everything configured without the book. I have looked a lot via google and on stackoverflow. When I run rails server it automatically uses Webrick, but I want to be using Mongrel. I installed the prerelease Mongrel via gem install mongrel --pre and removed the previous version. I read that in order to get Mongrel to work with rails server I had to add gem 'mongrel' to the Gemfile, but I do not know which one I should be adding it to (I tried several but nothing changed). So I decided to look at mongrel documentation via git and learned about mongrel_rails start when I run that I get this: My best guess is thatC:/Ruby192/lib/ruby/gems/1.9.1/gems/bundler-1.0.0.rc.6/lib/bundler/runtime.rb:27:in'block in setup': You have already activated mongrel 1.2.0.pre2, but your Gemfile requires mongrel 1.1.5. Consider using bundle exec. is the key but I have not been able to solve it.I would appreciate any help so that I can get on to actually learningthe language!EDIT: I was able to get past the above issue thanks to @duddle but now I have another issue...I am getting this error: My best guess at this point (1am...very tired) is that I am missing a file or something is not named as it should be..maybe i need to use the :require action in my Gemfile..maybe I just need to sleep on it. Ha.Again, thanks a ton @duddle for getting me past the first error! Any more help is greatly appreciated! <code>  C:\Ruby192\shovell>mongrel_rails start ** Starting Mongrel listening at 0.0.0.0:3000 ** Starting Rails with development environment... C:/Ruby192/lib/ruby/gems/1.9.1/gems/bundler-1.0.0.rc.6/lib/bundler/runtime.rb:27:in'block in setup': You have already activated mongrel 1.2.0.pre2, but your Gemfile requires mongrel 1.1.5. Consider using bundle exec. (Gem::LoadError) from C:/Ruby192/lib/ruby/gems/1.9.1/gems/bundler-1.0.0.rc.6/lib/bundler/spec_set.rb:12:in'block in each' from C:/Ruby192/lib/ruby/gems/1.9.1/gems/bundler-1.0.0.rc.6/lib/bundler/spec_set.rb:12:in'each' from C:/Ruby192/lib/ruby/gems/1.9.1/gems/bundler-1.0.0.rc.6/lib/bundler/spec_set.rb:12:in'each' from C:/Ruby192/lib/ruby/gems/1.9.1/gems/bundler-1.0.0.rc.6/lib/bundler/runtime.rb:17:in'setup' from C:/Ruby192/lib/ruby/gems/1.9.1/gems/bundler-1.0.0.rc.6/lib/bundler.rb:100:in'setup' from C:/Ruby192/shovell/config/boot.rb:8:in '<top (required)>' from <internal:lib/rubygems/custom_require>:29:in 'require' from <internal:lib/rubygems/custom_require>:29:in 'require' from C:/Ruby192/shovell/config/application.rb:1:in '<top (required)>' from <internal:lib/rubygems/custom_require>:29:in 'require' from <internal:lib/rubygems/custom_require>:29:in 'require' from C:/Ruby192/shovell/config/environment.rb:2:in '<top (required)>' from <internal:lib/rubygems/custom_require>:29:in 'require' from <internal:lib/rubygems/custom_require>:29:in 'require' from C:/Ruby192/lib/ruby/gems/1.9.1/gems/mongrel-1.2.0.pre2-x86-mingw32/lib/mongrel/rails.rb:147:in'rails' from C:/Ruby192/lib/ruby/gems/1.9.1/gems/mongrel-1.2.0.pre2-x86-mingw32/bin/mongrel_rails:116:in'block (2 levels) in run' from C:/Ruby192/lib/ruby/gems/1.9.1/gems/mongrel-1.2.0.pre2-x86-mingw32/lib/mongrel/configurator.rb:149:in'call' from C:/Ruby192/lib/ruby/gems/1.9.1/gems/mongrel-1.2.0.pre2-x86-mingw32/lib/mongrel/configurator.rb:149:in'listener' from C:/Ruby192/lib/ruby/gems/1.9.1/gems/mongrel-1.2.0.pre2-x86-mingw32/bin/mongrel_rails:102:in'block in run' from C:/Ruby192/lib/ruby/gems/1.9.1/gems/mongrel-1.2.0.pre2-x86-mingw32/lib/mongrel/configurator.rb:50:in'call' from C:/Ruby192/lib/ruby/gems/1.9.1/gems/mongrel-1.2.0.pre2-x86-mingw32/lib/mongrel/configurator.rb:50:in'initialize' from C:/Ruby192/lib/ruby/gems/1.9.1/gems/mongrel-1.2.0.pre2-x86-mingw32/bin/mongrel_rails:86:in'new' from C:/Ruby192/lib/ruby/gems/1.9.1/gems/mongrel-1.2.0.pre2-x86-mingw32/bin/mongrel_rails:86:in'run' from C:/Ruby192/lib/ruby/gems/1.9.1/gems/mongrel-1.2.0.pre2-x86-mingw32/lib/mongrel/command.rb:210:in'run' from C:/Ruby192/lib/ruby/gems/1.9.1/gems/mongrel-1.2.0.pre2-x86-mingw32/bin/mongrel_rails:282:in'<top (required)>' from C:/Ruby192/bin/mongrel_rails:19:in 'load' from C:/Ruby192/bin/mongrel_rails:19:in '<main>'` C:\Ruby192\shovell>mongrel_rails start ** Starting Mongrel listening at 0.0.0.0:3000 ** Starting Rails with development environment... C:/Ruby192/lib/ruby/gems/1.9.1/gems/activesupport-3.0.0.rc2/lib/active_support/dependencies.rb:239:in'req uire': no such file to load -- dispatcher (LoadError) from C:/Ruby192/lib/ruby/gems/1.9.1/gems/activesupport-3.0.0.rc2/lib/active_support/dependencies.rb:239:in 'block in require' from C:/Ruby192/lib/ruby/gems/1.9.1/gems/activesupport-3.0.0.rc2/lib/active_support/dependencies.rb:225:in 'block in load_dependency' from C:/Ruby192/lib/ruby/gems/1.9.1/gems/activesupport-3.0.0.rc2/lib/active_support/dependencies.rb:591:in 'new_constants_in' from C:/Ruby192/lib/ruby/gems/1.9.1/gems/activesupport-3.0.0.rc2/lib/active_support/dependencies.rb:225:in 'load_dependency' from C:/Ruby192/lib/ruby/gems/1.9.1/gems/activesupport-3.0.0.rc2/lib/active_support/dependencies.rb:239:in 'require' from C:/Ruby192/lib/ruby/gems/1.9.1/gems/mongrel-1.2.0.pre2-x86-mingw32/lib/mongrel/rails.rb:148:in 'rails' from C:/Ruby192/lib/ruby/gems/1.9.1/gems/mongrel-1.2.0.pre2-x86-mingw32/bin/mongrel_rails:116:in' block (2 levels) in run' from C:/Ruby192/lib/ruby/gems/1.9.1/gems/mongrel-1.2.0.pre2-x86-mingw32/lib/mongrel/configurator.rb:149:in 'call' from C:/Ruby192/lib/ruby/gems/1.9.1/gems/mongrel-1.2.0.pre2-x86-mingw32/lib/mongrel/configurator.rb:149:in 'listener' from C:/Ruby192/lib/ruby/gems/1.9.1/gems/mongrel-1.2.0.pre2-x86-mingw32/bin/mongrel_rails:102:in' block in run' from C:/Ruby192/lib/ruby/gems/1.9.1/gems/mongrel-1.2.0.pre2-x86-mingw32/lib/mongrel/configurator.rb:50:in 'call' from C:/Ruby192/lib/ruby/gems/1.9.1/gems/mongrel-1.2.0.pre2-x86-mingw32/lib/mongrel/configurator.rb:50:in 'initialize' from C:/Ruby192/lib/ruby/gems/1.9.1/gems/mongrel-1.2.0.pre2-x86-mingw32/bin/mongrel_rails:86:in 'new' from C:/Ruby192/lib/ruby/gems/1.9.1/gems/mongrel-1.2.0.pre2-x86-mingw32/bin/mongrel_rails:86:in'run' from C:/Ruby192/lib/ruby/gems/1.9.1/gems/mongrel-1.2.0.pre2-x86-mingw32/lib/mongrel/command.rb:210:in 'run' from C:/Ruby192/lib/ruby/gems/1.9.1/gems/mongrel-1.2.0.pre2-x86-mingw32/bin/mongrel_rails:282:in '<top (required)>' from C:/Ruby192/bin/mongrel_rails:19:in 'load' from C:/Ruby192/bin/mongrel_rails:19:in '<main>",LoadError running Mongrel with Rails3 and Ruby 1.9.2
Array to Hash Ruby," Convert this Array: ...to a Hash: i.e. elements at even indexes are keys and odd ones are values. <code>  a = [""item 1"", ""item 2"", ""item 3"", ""item 4""] { ""item 1"" => ""item 2"", ""item 3"" => ""item 4"" }","Ruby: Array to Hash, first item as key, second item as value"
How to write fast XML parsers in ruby?," I am using Nokogiri which works for small documents well. But for a 180KB HTML file I have to increase the process stack size, via ulimit -s, and the parsing and XPath queries take a long time.Are there faster methods available using a stock Ruby distribution?I am getting used to XPath, but the solution does not necessarily need to support XPath.The criteria are:Fast to write.Fast execution.Robust resulting parser. <code> ",What are fast XML parsers for Ruby?
What does --pre do in gem install rails --pre ?, What does --pre do in gem install rails --pre ? <code> ,What does --pre do in gem install rails --pre?
How to change all the keys of a hash by a new set of given keys ?, How do I change all the keys of a hash by a new set of given keys?Is there a way to do that elegantly? <code> ,How to change all the keys of a hash by a new set of given keys
How calculate the day of the with of a date in ruby?," How can I calculate the day of the week of a date in Ruby? For example, October 28 of 2010 is = Thursday  <code> ",How can I calculate the day of the week of a date in ruby?
How calculate the day of the week of a date in ruby?," How can I calculate the day of the week of a date in Ruby? For example, October 28 of 2010 is = Thursday  <code> ",How can I calculate the day of the week of a date in ruby?
save image from url by paperclip , Please suggest me a way to save an image from an URL by Paperclip. <code> ,Save image from URL by paperclip
save image from url by paperclip, Please suggest me a way to save an image from an URL by Paperclip. <code> ,Save image from URL by paperclip
Rails - command for displaying a gem's dependencies?," Is there a command that tells you the other gems that a gem depends on?Also, is there a way to auto install the gem's dependencies? <code> ",Command for displaying a gem's dependencies?
Why some Ruby code run twice as fast on a 2.53GHz vs 2.2GHz Core 2 Duo processor?," (This question attempts to find out why the running of a program can be different on different processors, so it is related to the performance aspect of programming.)The following program will take 3.6 seconds to run on a Macbook that has 2.2GHz Core 2 Duo, and 1.8 seconds to run on a Macbook Pro that has 2.53GHz Core 2 Duo. Why is that? That's a bit weird... why doubling the speed when the CPU is only 15% faster in clock speed? I double checked the CPU meter to make sure none of the 2 cores are in 100% usage (so as to see the CPU is not busy running something else). Could it be because one is Mac OS X Leopard and one is Mac OS X Snow Leopard (64 bit)? Both are running Ruby 1.9.2. The following are just output of the program:On 2.2GHz Core 2 Duo: (Update: Macbook identifier: MacBook3,1, therefore probably is Intel Core 2 Duo (T7300/T7500)) 2.53GHz Intel Core 2 Duo: (Update: Macbook identifier: MacBookPro5,4, therefore probably is Intel Core 2 Duo Penryn with 3 MB on-chip L2 cache) Test run on Windows 7: Intel Q6600 Quad Core 2.4GHz running Windows 7, 64-bit: Intel 920 i7 2.67GHz running Windows 7, 64-bit: It is also strange why an i7 with 2.67GHz is slower than a 2.53GHz Core 2 Duo. <code>  p RUBY_VERSIONp RUBY_DESCRIPTION if defined? RUBY_DESCRIPTIONn = 9_999_999p nt = 0; 1.upto(n) {|i| t += i if i%3==0 || i%5==0}; p t $ time ruby 1.rb""1.9.2""""ruby 1.9.2p0 (2010-08-18 revision 29036) [i386-darwin9.8.0]""999999923333331666668real 0m3.784suser 0m3.751ssys 0m0.021s $ time ruby 1.rb""1.9.2""""ruby 1.9.2p0 (2010-08-18 revision 29036) [x86_64-darwin10.4.0]""999999923333331666668real 0m1.893suser 0m1.809ssys 0m0.012s time_start = Time.nowp RUBY_VERSIONp RUBY_DESCRIPTION if defined? RUBY_DESCRIPTIONn = 9_999_999p nt = 0; 1.upto(n) {|i| t += i if i%3==0 || i%5==0}; p tprint ""Took #{Time.now - time_start} seconds to run\n"" C:\> ruby try.rb""1.9.2""""ruby 1.9.2p0 (2010-08-18) [i386-mingw32]""999999923333331666668Took 3.248186 seconds to run C:\> ruby try.rb""1.9.2""""ruby 1.9.2p0 (2010-08-18) [i386-mingw32]""999999923333331666668Took 2.044117 seconds to run",Why does some Ruby code run twice as fast on a 2.53GHz than on a 2.2GHz Core 2 Duo processor?
can anyone tell me why [].all?{|a| a.include?('_')} return true?, Why does return true? <code>  [].all?{|a| a.include?('_')} ,Why does [].all?{|a| a.include?('_')} return true?
Can we use Ruby on rails to develop a mobile app?," Since Rails uses MVC architecture. I was wondering that if we can use Rails to develop a mobile app or any web app.Out of MVC the 'M' and 'C' won't change to develop the mobile app right?I mean the models and controllers will remain the same.Only the view portion should be changed such that, instead of using html.erb files I want Java or Android SDK or whatever, to provide the UI for the mobile user.Can someone enlighten me on this perspective?Also I have been hearing about jRuby does it come into play for our mobile app development requirement? <code> ",Can we use Ruby on Rails to develop a mobile app?
How to use rails or ruby documentation?," I'm coming from C#, and recently I started to write some Ruby on Rails applications. My biggest problem with it is the documentation because I find it extremly difficult to use. For example, finding out how to call generator from my controller took me about 2 hours and then 15 minutes after that I found Rails::Generators.invoke method to figure out what arguments should I pass to this function. Maybe I use the documentation the wrong way; First I take a wild guess and search in the Netbeans code completion, which is rarely helpful, then I search in Google, then go with the API.Can some experienced Rails programmer give me some advice? <code> ",How to use Rails or Ruby documentation?
sum 2 hashes attributes with the same key," I have 2 hashes, for example: where a, b and c are objects. How can I sum those hashes' keys to get a new hash like: <code>  {'a' => 30, 'b' => 14}{'a' => 4, 'b' => 23, 'c' => 7} {'a' => 34, 'b' => 37, 'c' => 7}",Sum 2 hashes attributes with the same key
How to make a class method in python?, In ruby you can do this: How can this be done in python. I need a method of a class to be called without it being called on an instance of the class. When I try to do this I get this error: This is what I tried: <code>  class A def self.a 'A.a' endendputs A.a #-> A.a unbound method METHOD must be called with CLASS instance as first argument (got nothing instead) class A def a(): return 'A.a'print A.a(),What is the Python equivalent of a Ruby class method?
Ruby: Dynamic Class Definition WITH A Class Name," How do I dynamically define a class in Ruby WITH a name?I know how to create a class dynamically without a name using something like: But you can't specify a class name. I want to create a class dynamically with a name. Here's an example of what I want to do but of course it doesn't actually work.(Note that I am not creating an instance of a class but a class definition) Actual output: Desired output: ======================================================Answer: A totally dynamic solution using sepp2k's method <code>  dynamic_class = Class.new do def method1 endend class TestEval def method1 puts ""name: #{self.name}"" endendclass_name = ""TestEval""dummy = eval(""#{class_name}"")puts ""dummy: #{dummy}""dynamic_name = ""TestEval2""class_string = """"""class #{dynamic_name} def method1 endend""""""dummy2 = eval(class_string)puts ""dummy2: #{dummy2}"" # doesn't work dummy: TestEvaldummy2: dummy: TestEvaldummy2: TestEval2 dynamic_name = ""TestEval2""Object.const_set(dynamic_name, Class.new) # If inheriting, use Class.new( superclass )dummy2 = eval(""#{dynamic_name}"")puts ""dummy2: #{dummy2}""",Dynamic Class Definition WITH a Class Name
extract substring from string ruby," How can I extract a substring from within a string in Ruby?Example: I want to extract substring from String1 (i.e. everything within the last occurrence of < and >). <code>  String1 = ""<name> <substring>""",Extract a substring from a string in Ruby using a regular expression
Extract substring from string ruby," How can I extract a substring from within a string in Ruby?Example: I want to extract substring from String1 (i.e. everything within the last occurrence of < and >). <code>  String1 = ""<name> <substring>""",Extract a substring from a string in Ruby using a regular expression
Ruby Gem mysql2 Install Failing," When I try to install the mysql2 gem, it fails with no apparent errors. Does anyone know what to do to work around this so mysql2 installs? <code>  $ sudo gem install mysql2Building native extensions. This could take a while...ERROR: Error installing mysql2: ERROR: Failed to build gem native extension./System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/bin/ruby extconf.rbchecking for rb_thread_blocking_region()... nochecking for mysql_query() in -lmysqlclient... nochecking for main() in -lm... yeschecking for mysql_query() in -lmysqlclient... nochecking for main() in -lz... yeschecking for mysql_query() in -lmysqlclient... nochecking for main() in -lsocket... nochecking for mysql_query() in -lmysqlclient... nochecking for main() in -lnsl... nochecking for mysql_query() in -lmysqlclient... nochecking for main() in -lmygcc... nochecking for mysql_query() in -lmysqlclient... no*** extconf.rb failed ***Could not create Makefile due to some reason, probably lack ofnecessary libraries and/or headers. Check the mkmf.log file for moredetails. You may need configuration options.Provided configuration options: --with-opt-dir --without-opt-dir --with-opt-include --without-opt-include=${opt-dir}/include --with-opt-lib --without-opt-lib=${opt-dir}/lib --with-make-prog --without-make-prog --srcdir=. --curdir --ruby=/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/bin/ruby --with-mysql-config --without-mysql-config --with-mysql-dir --without-mysql-dir --with-mysql-include --without-mysql-include=${mysql-dir}/include --with-mysql-lib --without-mysql-lib=${mysql-dir}/lib --with-mysqlclientlib --without-mysqlclientlib --with-mlib --without-mlib --with-mysqlclientlib --without-mysqlclientlib --with-zlib --without-zlib --with-mysqlclientlib --without-mysqlclientlib --with-socketlib --without-socketlib --with-mysqlclientlib --without-mysqlclientlib --with-nsllib --without-nsllib --with-mysqlclientlib --without-mysqlclientlib --with-mygcclib --without-mygcclib --with-mysqlclientlib --without-mysqlclientlibGem files will remain installed in /Library/Ruby/Gems/1.8/gems/mysql2-0.2.6 for inspection.Results logged to /Library/Ruby/Gems/1.8/gems/mysql2-0.2.6/ext/mysql2/gem_make.out",Ruby gem mysql2 install failing
Uninstalling Ruby on Rails for a Fresh Start on Mac OSX," I am following a tutorial about Ruby on Rails, and the tutorial got updated to a new version of Rails, so I can't follow it anymore because I have an older version.I would like to start new and uninstall Ruby on Rails and any related software on my Mac OS X 10.5.8, and follow it from ground up. If anyone would be willing to help me uninstall Ruby and Ruby on Rails, it would be much appreciated. <code> ",How can I uninstall Ruby on Rails on Mac OS X?
"Ruby doesn't have a string.startswith(""abc"") built in method?"," Does Ruby have a some_string.starts_with(""abc"") method that's built in? <code> ","Does Ruby have a string.startswith(""abc"") built in method?"
 web crawler in ruby , What is your recommendation of writing a web crawler in Ruby? Any lib better than mechanize? <code> ,Web crawler in ruby 
Are there mixins for modules?," Lets say I have two modules. Is it possible to include a module inside another one that would behave like a mixin?For example: Edit: I realized I originally copied the code down wrong. The methods need to be static. The corrected code is above(and does not work). <code>  module A def self.foo puts ""foo"" bar endendmodule B include A def self.bar puts ""bar"" endendB.barB.foo",How do I get module mixins to work for static methods?
Ruby: Escaping special characters in a string.," I am trying to write a method that is the same as mysqli_real_escape_string in PHP. It takes a string and escapes any 'dangerous' characters. I have looked for a method that will do this for me but I cannot find one. So I am trying to write one on my own.This is what I have so far (I tested the pattern at Rubular.com and it worked): And I am using start_string as the string I want to change, and correct_string as what I want start_string to turn into: Can somebody try and help me determine why I am not getting my desired output (correct_string) or tell me where I can find a method that does this, or even better tell me both? Thanks a lot! <code>  # Finds the following characters and escapes them by preceding them with a backslash. Characters: ' "" . * / \ -def escape_characters_in_string(string) pattern = %r{ (\'|\""|\.|\*|\/|\-|\\) } string.gsub(pattern, '\\\0') # <-- Trying to take the currently found match and add a \ before it I have no idea how to do that).end start_string = %(""My"" 'name' *is* -john- .doe. /ok?/ C:\\Drive)correct_string = %(\""My\"" \'name\' \*is\* \-john\- \.doe\. \/ok?\/ C:\\\\Drive)",Ruby: Escaping special characters in a string. 
How do I test an array by regex in rspec," I am testing validation of my models with rspec and am expecting an error message. However, the exact text of the message is likely to change, so I want to be a bit more forgiving and only check for a partial message. Since the Spec::Matchers::include method only works for strings and collections, I'm currently using this construct: This works but seems a bit cumbersome to me. Is there a better (i.e., faster or more ruby-like) way to check an array for the inclusion of a string by regex, or perhaps an rspec matcher that does just this? <code>  @user.errors[:password].any?{|m|m.match(/is too short/)}.should be_true",RSpec: Match an array of strings by regex
I don't understand ruby local scope.," In this example, Then foo(6) Outputs: 100and foo(3) outputs nothing.However if i changed the definition to I get an ""undefined local variable or method"" error. So my question is why I am not getting this error when I call foo(3) and bar is never set? <code>  def foo(x) if(x > 5) bar = 100 end puts barend def foo(x) if(x > 5) bar = 100 end puts bobend",I don't understand ruby local scope
How to attach message to rspec check?," In RSpec: Can I attach a message to a check the same way as I would do in xUnit style test frameworks? How? <code>  assert_equal value1, value2, 'something is wrong'",How to attach a message to RSpec check?
"How can I remove the string ""\n"" from a Ruby string?"," I have this string: I need to remove the ""\n"" from it. I've tried but it doesn't work. How do I do it? Thanks for reading. <code>  ""some text\nandsomemore"" ""some text\nandsomemore"".gsub('\n','')","How can I remove the string ""\n"" from within a Ruby string?"
Dynamic routes width Rails 3," I have a task to develop a rails application following the model for routing.I need to have PageController and Page model. Page urls must be like /contacts, /shipping, /some_page.Also i need have CatalogController and Category model. Categories urls must be like /laptops, /smartphones/android.And it will be ProductsController and Product model, urls of products must be line /laptops/toshiba_sattelite_l605, /smartphones/android/htc_magicI understand that this problem can be solved by using URLs like/page/shipping/catalog/smartphones/androidBut the customer does not want to see the insertion of ""/page"" or ""/catalog"" in the URL.Please tell me the direction for solving this problem.Sorry for my bad English. <code> ",Dynamic routes with Rails 3
Complex Rails application," For my self-education purposes, I would like to investigate the code of a complex Ruby On Rails (preferably 3) business application(s) so that I can get the feel of how to do things in the real world with Rails.There are tons of ""another blog"" or ""another CMS"", but I am really looking into a Rails app with pretty high complexity (in terms of business rules), but not only the CRUDs.Something like Real-estate systems must be complex enough. Or maybe in the government area (which is always complex by definition :) ).Thanks. <code> ",Real-world Complex Rails applications?
"Setting HTTP Headers in Ruby App, sing Sinatra, hosted on Heroku"," I've got a working app based in Ruby and Sinatra that is deployed on Heroku.I want to take advantage of the HTTP caching available on Heroku, which uses Varnish.I'm not sure what the best way to set the headers is, and the correct syntax.Any thoughts on the best approach and syntax?  <code>  before do headers ""Content-Type"" => ""text/html; charset=utf8""endget '/' do headers['Cache-Control'] = 'public, max-age=600' # SOME STUFF HERE haml :home, {:layout => :layout_minfooter}end","How do I set HTTP Headers in Ruby/Sinatra app, hosted on Heroku?"
"Setting HTTP Headers in Ruby App, using Sinatra, hosted on Heroku"," I've got a working app based in Ruby and Sinatra that is deployed on Heroku.I want to take advantage of the HTTP caching available on Heroku, which uses Varnish.I'm not sure what the best way to set the headers is, and the correct syntax.Any thoughts on the best approach and syntax?  <code>  before do headers ""Content-Type"" => ""text/html; charset=utf8""endget '/' do headers['Cache-Control'] = 'public, max-age=600' # SOME STUFF HERE haml :home, {:layout => :layout_minfooter}end","How do I set HTTP Headers in Ruby/Sinatra app, hosted on Heroku?"
ruby array.include? in javascript," I have an array tempArray = [""Kathmandu"",""Pokhara"",""Dharan""]. To make sure that ""Pokhara"" is in tempArry, I have to use loop and check every element of tempArray.Is there a way to implement Ruby's Array.include? so that I don't need to use a loop? <code> ",How can I implement Ruby's Array.include? in JavaScript?
Is there priority queue data structure implementation in ruby standard library?, Does Ruby's standard library have a priority queue implementation? <code> ,Is there priority queue data structure implementation in Ruby's standard library?
"On ruby, why include is private and extent is public?"," On ruby, what is the reason for include is private, while Object#extend is public? <code> ","On ruby, why include is private and extend is public?"
"ruby, using regex to find something in between to strings"," Using Ruby + regex, given:starting-middle+31313131313@mysite.comI want to obtain just: 31313131313ie, what is between starting-middle+ and mysite.comHere's what I have so far: <code>  to = 'starting-middle+31313131313@mysite.com'to.split(/\+/@mysite.com.*/).first.strip","ruby, using regex to find something in between two strings"
question about block in Ruby," I have a question about Block, do the two codes mean the same?code 1 code 2 <code>  File::open('yozloy.txt','w') do |f| f << 'Some contains'end newFile = File::open('yozloy.txt','w')newFile << 'Some contains'",File.open with block vs without
"In Ruby, how do I skip a loop in a .each loop, similiar to 'continue'"," In Ruby, how do I skip a loop in a .each loop, similar to continue in other languages? <code> ","In Ruby, how do I skip a loop in a .each loop, similar to 'continue'"
Best way to override Rails ActiveRecord destroy behavior," I have an application where I would like to override the behavior of destroy for many of my models. The use case is that users may have a legitimate need to delete a particular record, but actually deleting the row from the database would destroy referential integrity that affects other related models. For example, a user of the system may want to delete a customer with whom they no longer do business, but transactions with that customer need to be maintained.It seems I have at least two options: Duplicate data into the necessarily models effectively denormalizing my data model so that deleted records won't affect related data.Override the ""destroy"" behavior of ActiveRecord to do something like set a flag indicating the user ""deleted"" the record and use this flag to hide the record. Am I missing a better way?Option 1 seems like a horrible idea to me, though I'd love to hear arguments to the contrary. Option 2 seems somewhat Rails-ish but I'm wondering the best way to handle it. Should I create my own parent class that inherits from ActiveRecord::Base, override the destroy method there, then inherit from that class in the models where I want this behavior? Should I also override finder behavior so records marked as deleted aren't returned by default? If I did this, how would I handle dynamic finders? What about named scopes? <code> ",What is the best way to override Rails ActiveRecord destroy behavior?
Activesupport coreextension of Fixnum on a mac (Time), I have Active Support 3.0.3 installed and Rails 3.0.3 with Ruby 1.8.7.When I try to use 1.week.ago I get The other core extensions seem to work. I tried it on a friend's computer (same install specs and legacy versions are on his) with the same results.What gives?All of this is in IRB. <code>  NoMethodError: undefined method 'week' for 1:Fixnumfrom (irb):2,How to use Active Support core extensions
How do I use ActiveSupport core extensions?, I have Active Support 3.0.3 installed and Rails 3.0.3 with Ruby 1.8.7.When I try to use 1.week.ago I get The other core extensions seem to work. I tried it on a friend's computer (same install specs and legacy versions are on his) with the same results.What gives?All of this is in IRB. <code>  NoMethodError: undefined method 'week' for 1:Fixnumfrom (irb):2,How to use Active Support core extensions
How do I use Active Support core extensions?, I have Active Support 3.0.3 installed and Rails 3.0.3 with Ruby 1.8.7.When I try to use 1.week.ago I get The other core extensions seem to work. I tried it on a friend's computer (same install specs and legacy versions are on his) with the same results.What gives?All of this is in IRB. <code>  NoMethodError: undefined method 'week' for 1:Fixnumfrom (irb):2,How to use Active Support core extensions
Can someone explain Ruby's use of pipe characters in a block? ex. 25.times { | i | puts i }, Can someone explain to me Ruby's use of pipe characters in a block? I understand that it contains a variable name that will be assigned the data as it iterates. But what is this called? Can there be more than one variable inside the pipes? Anything else I should know about it? Any good links to more information on it?For example: <code>  25.times { | i | puts i },Can someone explain Ruby's use of pipe characters in a block?
Pass variables to ruby script via command line, I've installed RubyInstaller on Windows and I'm running IMAP Sync but I need to use it to sync hundreds of accounts. If I could pass these variables to it via command line I could automate the whole process better. <code>  # Source server connection info.SOURCE_NAME = 'username@example.com'SOURCE_HOST = 'mail.example.com'SOURCE_PORT = 143SOURCE_SSL = falseSOURCE_USER = 'username'SOURCE_PASS = 'password'# Destination server connection info.DEST_NAME = 'username@gmail.com'DEST_HOST = 'imap.gmail.com'DEST_PORT = 993DEST_SSL = trueDEST_USER = 'username@gmail.com'DEST_PASS = 'password',Pass variables to Ruby script via command line
Is it a good idea to purge old Rails migration files," I have been running a big Rails application for over 2 years and, day by day, my ActiveRecord migration folder has been growing up to over 150 files.There are very old models, no longer available in the application, still referenced in the migrations. I was thinking to remove them.What do you think? Do you usually purge old migrations from your codebase? <code> ",Is it a good idea to purge old Rails migration files?
Ruby equivalent of the PHP substr," What is the Ruby equivalent of the PHP statement<?php echo substr(""abcdefghijklm"", 0, 5); ?> <code> ",What is the Ruby equivalent of the PHP substr()?
conditional operator (? :)  in Ruby?," How is the conditional operator (? :) used in Ruby?For example, is this correct? <code>  <% question = question.size > 20 ? question.question.slice(0, 20)+""..."" : question.question %>",How do I use the conditional operator (? :) in Ruby?
How do I use the conditional operator (? :)  in Ruby?," How is the conditional operator (? :) used in Ruby?For example, is this correct? <code>  <% question = question.size > 20 ? question.question.slice(0, 20)+""..."" : question.question %>",How do I use the conditional operator (? :) in Ruby?
RUBY: Download multiple FTP files like d*.TXT ," I need to connect to a ftp site and download a bunch of files( max 6) named as D*.txt.could you please help me code this in Ruby ?The following code just Thanks <code>  ftp = Net::FTP::new(""ftp_server_site"")ftp.login(""user"", ""pwd"")ftp.chdir(""/RemoteDir"")fileList= ftp.nlstftp.getbinaryfile(edi, edi)ftp.close",Download multiple FTP files like d*.txt in ruby
dynamic constant definition in rails," I'm defining a constant in an initializer in Rails using the following syntax: It works, if I start a console and write I receive foobar as expected.The problem is, when I try to call it in a Model the constant is not there.Where should D dynamically define my constant that it can be available as well in my models? If I statically define it in my lib/mymodule.rb it works but I would like to define some constants at runtime. <code>  MyModule.const_set('MYCONSTANT','foobar') MyModule::MYCONSTANT ",Dynamic constant definition in Rails
How do I nudge ruby to parse time as if it were in a different time zone," I'm parsing something like this: which has no time zone associated with it, but I know it's in the UTC time zone (while I'm not). How can I get Ruby to parse this as if it were in the UTC timezone? <code>  11/23/10 23:29:57",How do I get Ruby to parse time as if it were in a different time zone?
Convert JSON to XML in Ruby, Is there any way to convert JSON to XML in Ruby? <code> ,How can I convert JSON to XML in Ruby?
Ruby : Return index of all occurances of a pattern in a string (or Text)," This only match the first occurrence it seems.string.scan does the job partially but it doesn't tell anything about the index of the matched pattern.How do i get a list of all the matched instances of the pattern and their indices (positions)? <code>  string = ""Jack and Jill went up the hill to fetch a pail of water. Jack fell down and broke his crown. And Jill came tumbling after. ""d = string.match(/(jack|jill)/i) # -> MatchData ""Jill"" 1:""Jill""d.size # -> 1",How to get indexes of all occurrences of a pattern in a string
How to get ndexes of all occurrences of a pattern in a string," This only match the first occurrence it seems.string.scan does the job partially but it doesn't tell anything about the index of the matched pattern.How do i get a list of all the matched instances of the pattern and their indices (positions)? <code>  string = ""Jack and Jill went up the hill to fetch a pail of water. Jack fell down and broke his crown. And Jill came tumbling after. ""d = string.match(/(jack|jill)/i) # -> MatchData ""Jill"" 1:""Jill""d.size # -> 1",How to get indexes of all occurrences of a pattern in a string
Advantages of storing session in database?, I'm just wondering why storing session in database? Is there any advantage to storing session in database? <code> ,Rails: Advantages of storing session in database?
STDIN vs $stdin in Ruby," Ruby has two ways of referring to the standard input: The STDIN constant , and the $stdin global variable.Aside from the fact that I can assign a different IO object to $stdin because it's not a constant (e.g. before forking to redirect IO in my children), what's the difference between STDIN and $stdin? When should I use each in my code?If I reassign $stdin, does it affect STDIN?And does this also apply to STDOUT/$stdout and STDER/$stderr? <code> ",What is the difference between STDIN and $stdin in Ruby?
Rails 3: Enumeration column in migration?, How do I describe an enumeration column in a Rails 3 migration? <code> ,How do I describe an enumeration column in a Rails 3 migration?
What is the difference between ~> and => when specifying rubygem in Gemfile?," I often see the following notation(~>) in Gemfile. I know the sign (>=) is just greater or equal to, but what does the (~>) notation mean?Are they both same or has any significant difference? <code>  gem ""cucumber"", ""~>0.8.5""gem ""rspec"", ""~>1.3.0""",What is the difference between ~> and >= when specifying rubygem in Gemfile?
Ruby: how to check if all elements in the hash are not nil?, What is the best way to check if all the objects in the Ruby hash are defined (not nil)? The statement should return false if at least one element in the hash is nil. <code> ,How do I confirm all elements in a hash are defined?
Problem with understanding private methods in Ruby," This of course will not work, because we specified explicit receiver - instance of Example (e), and that is against a ""private rule"".But I cannot understand, why one cannot do in Ruby this: The current object inside public_m method definition (i.e. self) is the instance of Foo. So why it is not allowed? To fix that I have to change self.private_m to just private_m. But why this differ, isn't the self an instance of Foo inside public_m? And who is the receiver of bare-word private_m call? Isn't that self - what actually you omit because, Ruby will do it for you (will call private_m on self)?I hope I didn't confuse it too much, I am still fresh to Ruby. EDIT:Thank you for all the answers. Putting them all together I was able (finally) to grok the obvious (and not so obvious for someone, who have never seen things like Ruby): that self itself can beexplicit and implicit receiver and that make the difference. So there are two rules, if you want to call a private method: self must be implicit receiver, and that self must be an instance of current class (Example in that case - and that takes place only when self if inside instance method definition, during this method execution). Please correct me if I am wrong. Message for anyone who could find this question during the google trails: this may be helpful - http://weblog.jamisbuck.org/2007/2/23/method-visibility-in-ruby <code>  class Example private def example_test puts 'Hello' endende = Example.newe.example_test class Foo def public_m self.private_m # <= end private def private_m puts 'Hello' endendFoo.new.public_m class Example # self as an explicit receiver (will throw an error) def explicit self.some_private_method end # self as an implicit receiver (will be ok) def implicit some_private_method end private def some_private_method; endendExample.new.implicit",Understanding private methods in Ruby
webrick how to visit for another pc, I used: But I could't reach the web application from another PC.How can I achieve this in Rails 3? <code>  rails s run webrick on 0.0.0.0:3000,Access WEBrick from a different PC
How do I access WEBrick from a different PC?, I used: But I could't reach the web application from another PC.How can I achieve this in Rails 3? <code>  rails s run webrick on 0.0.0.0:3000,Access WEBrick from a different PC
Deep copy a Proc in ruby," Is there a straightforward way in Ruby to produce a copy of a Proc? I have a Proc called @foo. I want another method to periodically augment @foo with additional logic. For example: I don't want the second line that does the augmentation to produce a recursive function. Instead, I want @foo to be bound by value into the lexical scope of the new @foo definition, producing a function that looks more like this: I get an infinite recursion and an eventual stack overflow instead, due to the resulting function looking like this: I'd like the code to be like this: but clone doesn't work on Procs. Additionally, the standard Ruby deep copy hack, using marshal and unmarshal, doesn't work on Procs either. Is there some way to do this? <code>  # create initial Proc@foo = lambda { |x| x }# augment with more logic@foo = lambda { |x| x > 1 ? x*x : @foo[x] } @foo = lambda { |x| x > 1 ? x*x : lambda{ |x| x }[x] } @foo = lambda { |x| x > 1 ? x*x : lambda { |x| x > 1 ? x*x : { lambda |x| # etc... # augment with more logic@foo = lambda { |x| x > 1 ? x*x : (@foo.clone)[x] }",How do I deep copy a Proc in Ruby?
ArgumentError: invalid date error," On this line of code: I get this error: Here are the parameters: What is causing this error? Thanks for reading. <code>  @note.date = Date.strptime(params[:custom_date], '%d-%m-%Y') unless params[:custom_date].blank? ArgumentError: invalid date/usr/ruby1.9.2/lib/ruby/1.9.1/date.rb:1022 { ""commit"" => ""Create"", ""utf8"" => ""\342\234\223"", ""authenticity_token"" => ""RKYZNmRaElg/hT5tlmLcqnstnOapdhiaWmDcjNDtSOI="", ""action"" => ""create"", ""note"" => { ""name""=>""note1"", ""detail""=>""detail"" }, ""controller"" => ""notes"", ""custom_date"" => ""03-03-2010""}",What is causing this invalid date error?
MySQL - Failed to build gem native extension, I am using Fedora 14 and I have MySQL and MySQL server 5.1.42 installed and running.Now I tried to do this as root user: But I get this error: What's wrong here? In installed ruby 1.8.7. and the latest rubygems 1.3.7. <code>  gem install mysql Building native extensions. This could take a while...ERROR: Error installing mysql: ERROR: Failed to build gem native extension./usr/bin/ruby extconf.rbmkmf.rb can't find header files for ruby at /usr/lib/ruby/ruby.hGem files will remain installed in /usr/lib/ruby/gems/1.8/gems/mysql-2.8.1 for inspection.Results logged to /usr/lib/ruby/gems/1.8/gems/mysql-2.8.1/ext/mysql_api/gem_make.out,gem install: Failed to build gem native extension (can't find header files)
saving object to file," I would like to save an object to a file, and then read it from the file easily. As a simple example, lets say I have the following 3d array: Is there an easy Ruby API that I can use to achieve this without programming a parser to interpret the data from the file? In the example I give it is easy, but as the objects become more complicated, it gets annoying to make objects persistent. <code>  m = [[[0, 0, 0], [0, 0, 0], [0, 0, 0]],[[0, 0, 0], [0, 0, 0], [0, 0, 0]]]",How can I save an object to a file?
Ruby convert all array values to a given type, I need to convert fixnums to strings. My solution is: Is there a better way? <code>  arr.map {|a| a.to_s},"Using Ruby, how do I convert all array values to a given type?"
"ruby script/generate does not work, says ""No such file or directory"""," I am having trouble using script/generate. I am following the tree based navigation tutorial, which says to use script/plugin install git://github.com/rails/acts_as_tree.git or script/generate nifty_layout.I keep getting: No such file or directory -- script/pluginI've tried these variations: and they all tell me: -bash: script/generate: No such file or directoryAm I missing something? Total ruby nuby here and I just can't seem to find an answer.edit: rails 3 on Mac OS X 10.6 <code>  script/generate nifty_layoutrails generate nifty_layoutruby script/generate nifty_layoutruby generate nifty_layout","Why does Ruby ""script/generate"" return ""No such file or directory""?"
"What the ""yield"" keyword does in the following Ruby code ?"," I encountered the following Ruby code: What does the each method do? In particular, I don't understand what yield does. <code>  class MyClass attr_accessor :items ... def each @items.each{|item| yield item} end ...end","What does the ""yield"" keyword do in Ruby?"
Ruby Savon: `connect': SSL_connect returned=1 errno=0 state=SSLv3 read server certificate B: certificate verify failed (OpenSSL::SSL::SSLError)," I'm having a terrible time getting SSL to verify a certificate. I'm completely ignorant on how certificates work so that's a major handicap to begin with. Here's the error I get when running the script: Here's the relevant code: Any help is appreciated.  <code>  c:/Ruby191/lib/ruby/1.9.1/net/http.rb:611:in `connect': SSL_connect returned=1 errno=0 state=SSLv3 read server certificate B: certificate verify failed (OpenSSL::SSL::SSLError) client = Savon::Client.new order_svcrequest = client.create_empty_cart { |soap, http| http.auth.ssl.cert_file = 'mycert.crt' http.auth.ssl.verify_mode = :none http.read_timeout = 90 http.open_timeout = 90 http.headers = { ""Content-Length"" => ""0"", ""Connection"" => ""Keep-Alive"" } soap.namespaces[""xmlns:open""] = ""http://schemas.datacontract.org/2004/07/Namespace"" soap.body = { ""wsdl:brand"" => brand, ""wsdl:parnter"" => [ {""open:catalogName"" => catalogName, ""open:partnerId"" => partnerId } ] }.to_soap_xml }",connect: SSL_connect returned=1 errno=0 state=SSLv3 read server certificate B: certificate verify failed (OpenSSL::SSL::SSLError)
What's a good way to test 'link_to' and other view helpers from the rails console?," In rails 2, I use the console a lot and was wondering what the best way to test view helpers such as 'link_to' or 'url_for' using it.What's the best way to do this? <code> ",Rails 2: test 'link_to' and other view helpers from the rails console?
display rvm ruby & gemset in Terminal prompt," I'm using rvm-prompt. It seems the interpreter, the version, the patchlevel, and the gemset should all displayed by default.If I call the prompt, it accurately returns the current ruby and gemset: But my gemset isn't reflected in my prompt: I tried calling the gemset explicitly in .bash_profile with: but it doesn't change the prompt. <code>  $ rvm-promptruby-1.8.7-p302@rails125 ruby-1.8.7-p302 MacBook:~ subpixel$ PS1=""\$(~/.rvm/bin/rvm-prompt i v p g) $PS1""",How do I display RVM's current Ruby and gemset in the Terminal prompt?
Is Ruby's code block same as C#'s lamda expression?, Are these two essentially the same thing? They look very similar to me. Did lambda expression borrow its idea from Ruby? <code> ,Is Ruby's code block same as C#'s lambda expression?
conditional statement in here-doc, Can you put a conditional statement inside a here-doc?IE: Thanks <code>  sky = 1str = <<EOFThe sky is #{if sky == 1 then blue else green end}EOF,Can you put a conditional statement inside a here-doc?
Check array for duplicates, I've got an array A. I'd like to check if it contains duplicate values. How would I do so? <code> ,How do I check an array for duplicates?
symbol to string issue," Following code fails Following code works Why?Using ruby 1.8.7 <code>  world = :worldresult = 'hello' + worldputs result #=> can't convert Symbol into String world = :worldresult = ""hello #{world}""puts result #=> hello world",Symbol to string issue
Learn Ruby without Poignancy," I suppose this is two very closely related questions:Everyone says to start with Why's (Poignant) Guide to Ruby, and I can't stand that book; what's another good starting point for an experienced programmer that has a more serious tone?If I'm not the sort of person who appreciates _why, should I skip Ruby because the community will not be to my taste? <code> ",Learn Ruby Without Poignancy
rails errors.full_messages does not replace attribute and message variables," Having a strange problem with a rails model I just created.Here are my validations: I'm having issues using errors.full_messages as well as f.error_messages in my form: I'm just getting ""{{attribute}} {{message}}"". Any ideas?UPDATE: I've uninstalled rails 3 and all the gems that were installed with it and that made the problem go away. It's not a fix though... I would still like to have rails 3 installed.UPDATE: Sounds like upgrading to 2.3.9 fixes the problem. Unfortunately, I've given up for now, but sometime in the future I will try that. <code>  validates_presence_of :from_name, :message => 'Please provide a from name.'validates_presence_of :from_emailvalidates_presence_of :giftition_plan_id g = Giftition.createg.errors.first=> [""from_name"", ""Please provide a from name.""]>> g.errors.full_messages=> [""{{attribute}} {{message}}"", ""{{attribute}} {{message}}"", ""{{attribute}} {{message}}""]","Why doesn't Rails' ""errors.full_messages"" replace attribute and message variables?"
Attr_Accessors in Ruby, I am having a hard time understanding attr_accessor in Ruby.Can someone explain this to me? <code> ,What is attr_accessor in Ruby?
attr_accessor in Ruby, I am having a hard time understanding attr_accessor in Ruby.Can someone explain this to me? <code> ,What is attr_accessor in Ruby?
Looking for a Good Way to Avoid Hash Conditionals in Ruby," I'm looking for a good way to avoid checking for nil at each level in deeply nested hashes. For example: This requires three checks, and makes for very ugly code. Any way to get around this? <code>  name = params[:company][:owner][:name] if params[:company] && params[:company][:owner] && params[:company][:owner][:name]","How to avoid NoMethodError for missing elements in nested hashes, without repeated nil checks?"
Build in capistrano variables," Does anybody know a listing of all build-in Capistrano variables, like current_path and etc.? <code> ",Built in capistrano variables
"[Ruby] is ""ruby script/plugin"" a command?"," I was following an online tutorial to create an Ruby on Rails application on App Engine.There is one command which other people can run, but it didn't run on my Ubuntu 10.10: When I try to run it, it complains: ruby1.8: No such file or directory script/plugin (LoadError)What is wrong with my computer? <code>  ruby script/plugin install http://svn.avdi.org/nulldb/trunk/ ruby -v ==> 1.8.7rails -v ==> 2.3.10 gem -v ==> 1.3.7","Is ""ruby script/plugin"" a command?"
ruby savon nested attributes! hash," I'm looking at using Ruby savon for SOAP. For purely masochistic reasons I have to deal with SOAP elements having attributes.So, no problem, there is an example on the savon docs site which highlights this ability: My problem is how do I set attributes on child elements, for example, say I add an address child element to person: Now I want to add an id attribute to the address element:It's no go if I nest address in the attributes hash: So my question is, how can I get this? <code>  { :person => ""Eve"", :attributes! => { :person => { :id => 666 } } }.to_soap_xml""<person id=\""666\"">Eve</person>"" { :person => {:address => """"}, :attributes! => { :person => { :id => 666 } } }.to_soap_xml { :person => {:address => """"}, :attributes! => { :person => { :id => 666, :address => {:id => 44 }} }}.to_soap_xml <person id=666><address id=44></address></person>",How do I use savon nested attributes! hash?
Array.join versus String Concatenation (Efficiency), I recall getting a scolding for concatenating Strings in Python once upon a time. I was told that it is more efficient to create an List of Strings in Python and join them later. I carried this practice over into JavaScript and Ruby although I am unsure if this has the same benefit in latter. Can anyone tell me if it is more efficient (resource and execution-wise) to join a Array of Strings and call :join on them or to concatenate a string as needed in the Ruby programming language?Thanks. <code> ,Ruby - Array.join versus String Concatenation (Efficiency)
Parsing with Ruby, What's the best (most efficient) way to parse a tab-delimited file in Ruby? <code> ,What's the best way to parse a tab-delimited file in Ruby?
What is this ruby function doing? confused on how it returns," I am confused on how this returns: It first sets the ENV variable, then sets 'res' to the local value, then re-assignes ENV variable, then returns res?Not sure I understand how this is convering from UTC to the user time zone? <code>  def utc2user(t) ENV[""TZ""] = current_user.time_zone_name res = t.getlocal ENV[""TZ""] = ""UTC"" resend",What is this Ruby function doing?
"Algorithms to efficiently ""scale"" or ""resize"" of an array of numbers"," Doing audio processing (though it could just as well be image processing) I have a one-dimensional array of numbers. (They happen to be 16-bit signed integers representing audio samples, this question could apply to floats or integers of different sizes equally.)In order to match audio with different frequencies (e.g. blend a 44.1kHz sample with a 22kHz sample), I need to either stretch or squash the array of values to meet a specific length.Halving the array is simple: drop every other sample. Doubling the array width is slightly less simple: double each entry in place (or optionally perform some interpolation between neighboring 'real' samples). What I want is an efficient, simple algorithm that handles any scaling factor, and (ideally) optionally supports performing interpolation of one kind or another in the process.My use case happens to be using Ruby arrays, but I'll happily take answers in most any language or pseudo-code. <code>  [231, 8143, 16341, 2000, -9352, ...] => [231, 16341, -9352, ...] [231, 8143, 16341, 2000, -9352, ...] => [231, 4187, 8143, 12242, 16341, ...]","Algorithms to efficiently ""scale"" or ""resize"" of an array of numbers (audio resampling)"
Structuring of layout template in Haml," I have a web page that uses Haml for layouts. ""layout.haml"" is a separate layout file which is used when rendering any actual Haml page. layout.haml looks something like: This is of course already in the document's",How to structure a layout template in Haml
"rails ""missing partial"" when calling render in rspec test"," I'm trying to test for the presence of a form. I'm new to Rails.My new.html.erb_spec.rb file's contents are: The view itself, new.html.erb, has the code: When I run rspec, it fails as so: Does anyone know what the problem is?Thanks! <code>  require 'spec_helper'describe ""messages/new.html.erb"" do it ""should render the form"" do render '/messages/new.html.erb' reponse.should have_form_putting_to(@message) with_submit_button endend <%= form_for(@message) do |f| %> <%= f.label :msg %> <br /> <%= f.text_area :msg %> <%= f.submit ""Submit"" %><% end %> 1) messages/new.html.erb should render the form Failure/Error: render '/messages/new.html.erb' Missing partial /messages/new.html with {:handlers=>[:erb, :rjs,:builder,:rhtml, :rxml], :formats=>[:html,:text, :js, :css, :ics, :csv, :xml, :rss, :atom, :yaml, :multipart_form, :url_encoded_form, :json], :locale=>[:en, :en]} in view paths ""/Users/tristanmartin/whisperme/app/views"" # ./spec/views/messages/new.html.erb_spec.rb:5:in `block (2 levels) in <top (required)>'","Rails: ""missing partial"" when calling 'render' in RSpec test"
how to use number_with_precision on controller on rails3, I want to use this helper method on controller. Any way to achieve this? <code> ,Using number_with_precision on controller in rails3
Ruby 1.9: Convert byte array to string with multibyte UTF-8 characters.," I am trying to find a way in Ruby to take a UTF-8 byte array and transform it back to a string.In irb (Ruby 1.9.2 preview 3) I can create the correct byte array from UTF-8 string: However, I can't find a way to roundtrip from bytes back to an array. I tried to use Array.pack with the U* option, but that doesn't work for multibyte characters. Does anybody know a way to take a UTF-8 byte array with multibyte characters and convert it back to a string?Thanks. <code>  ruby-1.9.2-preview3 > 'Caf'.bytes.to_a => [67, 97, 102, 195, 169] ruby-1.9.2-preview3 > [67, 97, 102, 195, 169].pack('U*') => ""Caf""",Ruby 1.9: Convert byte array to string with multibyte UTF-8 characters
Rails Paperclip how to delete attachment," I am using Paperclip (w/ Amazon s3) on Rails 3. I want to delete an existing attachment without replacing it using an update action.I've only found one example of this here and could not get that to work, it just wouldn't delete and there was nothing in the logs to say why. I wanted to do something like this on the form: (page is the name of the model, image is the attribute name which holds the attachment)But how do I detect that checkbox and more importantly, how do I delete the image? I appreciate any help! <code>  <%- unless @page.new_record? || !@page.image? -%> <%= f.check_box :image_delete, :label => 'Delete Image' %><%- end -%>",Rails Paperclip how to delete attachment?
Validating min and max length of a string but allowing it to be blank...," I have a field that I would like to validate. I want the field to be able to be left blank, but if a user is entering data I want it to be in a certain format. Currently I am using the below validations in the model, but this doesn't allow the user to leave it blank: How do I write this to accomplish my goal? <code>  validates_length_of :foo, :maximum => 5validates_length_of :foo, :minimum => 5",Rails: Validating min and max length of a string but allowing it to be blank
Does Ruby 1.8 and 1.9 have the same hash code for one string," I want to use String.hash to generate the hash code, but I'm worried that if some time later I upgrade the version from 1.8 to 1.9, the hash code generated will also change.Do Ruby 1.8 and 1.9 have the same hash code for a string?  <code> ",Do Ruby 1.8 and 1.9 have the same hash code for a string?
Ruby: group hashes by keys and sum the values," I have an array of hashes: I need to use inject here I think but I've really been struggling.I want a new hash that reflects the sum of the previous hash's duplicate keys: I'm in control of the code that outputs this hash so I can modify it if necessary. The results were mainly hashes because this could end up nested any number of levels deep and then it's easy to call flatten on the array but not flatten the keys/values of the hash too: <code>  [{""Vegetable""=>10}, {""Vegetable""=>5}, {""Dry Goods""=>3>}, {""Dry Goods""=>2}] [{""Vegetable""=>15}, {""Dry Goods""=>5}] def recipe_pl(parent_percentage=nil) ingredients.collect do |i| recipe_total = i.recipe.recipeable.total_cost recipe_percentage = i.ingredient_cost / recipe_total if i.ingredientable.is_a?(Purchaseitem) if parent_percentage.nil? {i.ingredientable.plclass => recipe_percentage} else sub_percentage = recipe_percentage * parent_percentage {i.ingredientable.plclass => sub_percentage} end else i.ingredientable.recipe_pl(recipe_percentage) end endend ",Group hashes by keys and sum the values
Why is this respond_with method call not working in rails?," I have a post method called join that should do the following:1) create a new object2) respond with a json objectHere is my code: For some reason, the respond_with call always fails with this error: If I change the respond_with call to something simpler I still get errors, eg: yields this error: What am I doing wrong?? I just want to send them a JSON object back!PS, my routes file looks like this: <code>  class GameController < ApplicationController respond_to :json def join @p = Player.new(:name => params[:name]) @p.save! respond_with({:uuid => @p.uuid}) endend undefined method `model_name' for NilClass:Class respond_with ""hello"" undefined method `hello_url' for #<GameController:0x1035a6730> match 'join' => 'game#join', :via => :post",respond_with not working in ruby on rails. Why?
How do i temporarily redirect stderr in Ruby?," I'd like to temporarily redirect stderr in a Ruby script for the duration of a block, ensuring that I reset it to its original value at the end of the block.I had trouble finding how to do this in the ruby docs. <code> ",How do I temporarily redirect stderr in Ruby?
"When monkey patching a method, can you call the overridden method from the new implementation"," Say I am monkey patching a method in a class, how could I call the overridden method from the overriding method? I.e. Something a bit like superE.g.  <code>  class Foo def bar() ""Hello"" endend class Foo def bar() super() + "" World"" endend>> Foo.new.bar == ""Hello World""","When monkey patching an instance method, can you call the overridden method from the new implementation?"
"When monkey patching a method, can you call the overridden method from the new implementation?"," Say I am monkey patching a method in a class, how could I call the overridden method from the overriding method? I.e. Something a bit like superE.g.  <code>  class Foo def bar() ""Hello"" endend class Foo def bar() super() + "" World"" endend>> Foo.new.bar == ""Hello World""","When monkey patching an instance method, can you call the overridden method from the new implementation?"
Ruby/Rails uncapitalize first letter," I'm running Rails 2.3.2.How do I convert ""Cool"" to ""cool""? I know ""Cool"".downcase works, but is there a Ruby/Rails method that does the opposite of capitalize, i.e., uncapitalize or decapitalize? <code> ",Ruby on Rails uncapitalize first letter
Remove substring after a certain character in Ruby?, How do I remove a substring after a certain character in a string using Ruby? <code> ,How do I remove a substring after a certain character in a string using Ruby?
How do I remove substring after a certain character in a string using Ruby?, How do I remove a substring after a certain character in a string using Ruby? <code> ,How do I remove a substring after a certain character in a string using Ruby?
[Ruby] Calling another ruby file that is not a gem," I want to create a static ruby class with a library of function. I am on Vista with ruby 1.9.2My class is this one : in a TestClass.rb file (I assume I am correct as all ruby tutorials on classes are a complete mess putting everything in a single magic something (file?) as if IRB was the begining and the end of all thing).My ruby main() (yes I come from Java) or program entry or wathever it is called in ruby is : But it fails with : How does it work? Is it possible to call other files in Ruby or are you trapped in only one file containing all your classes? <code>  class TestClass def say_hello puts ""say hello"" endend require 'TestClass.rb'puts ""start""say_hello C:\ruby_path_with_all_my_classes>ruby classuser.rb<internal:lib/rubygems/custom_require>:29:in `require': no such file to load -- TestClass.rb (LoadError) from <internal:lib/rubygems/custom_require>:29:in `require' from classuser.rb:1:in `<main>'",Calling another ruby file that is not a gem
object.valid? return false but object.errors.full_messages is empty," I'm confuse about objects that I can't save, simplified model is and in my subscription_controller I tried to use ruby-debug for this adding a breakpoint where i do some tests which explains that ActiveRecord doesn't allow the save method. Unfortunately i can't know why the object is invalid.If you have any idea, thank you.  <code>  class Subscription < ActiveRecord::base belongs_to :user, :class_name => ""User"", :foreign_key => ""user_id""has_many :transactions, :class_name => ""SubscriptionTransaction"" validates_presence_of :first_name, :message => ""ne peut tre vide""validates_presence_of :last_name, :message => ""ne peut tre vide""validates_presence_of :card_number, :message => ""ne peut tre vide""validates_presence_of :card_verification, :message => ""ne peut tre vide""validates_presence_of :card_type, :message => ""ne peut tre vide""validates_presence_of :card_expires_on, :message => ""ne peut tre vide""attr_accessor :card_number, :card_verificationvalidate_on_create :validate_card def validate_card unless credit_card.valid? credit_card.errors.full_messages.each do |message| errors.add_to_base message end endenddef credit_card @credit_card ||= ActiveMerchant::Billing::CreditCard.new( :type => card_type, :number => card_number, :verification_value => card_verification, :month => card_expires_on.month, :year => card_expires_on.year, :first_name => first_name, :last_name => last_name )endend if subscription.save # do somethingelse debugger # means breakpoint where i try subscription.errors.full_messages # do something elseend subscription.valid? #=> false subscription.errors.full_messages #=> []subscription.save! #=> ActiveRecord::RecordInvalid (Validation failed:)",object.valid? returns false but object.errors.full_messages is empty
"Double Pipe Symbols, Ruby Variable Assignment?.", Possible Duplicate: What does ||= mean in Ruby? Forgive me if this is a newby question but im reading a book on rails where the writer used this expression in a helper method: Is this use of double pipes still a Boolean OR statement?If so how does it work? <code>  @current_user ||= User.find_by_id(session[:user_id]),Double Pipe Symbols in Ruby Variable Assignment?
Ruby.. Does it matter if a conditional statement comes before or after?, Sorry if this is a stupid question but I'm a C# guy fumbling his way around ruby..in ruby i notice a lot of people do this: is there any difference (even slight) between that and this: or is it the same thing written for better clarity? <code>  do_something(with params) if 1 = 1 if 1 = 1 do_something(with params),Does it matter if a conditional statement comes before or after the expression?
Find number of Days between two Dates (Ruby), How can I find the number of days between two Date objects? <code> ,How can I find the number of days between two Date objects in Ruby?
Number of days between two Date objects (Ruby), How can I find the number of days between two Date objects? <code> ,How can I find the number of days between two Date objects in Ruby?
Rails map_with_index ?, I have the following: I want this to happen no more than 3 times inside. I tried map_with_index but that did not work.Any suggestions on how I can break after a max of 3 runs in the loop? <code>  :participants => item.item_participations.map { |item| {:item_image => item.user.profile_pic.url(:small)} },Rails map_with_index?
Static in java?, Is static in Java like self in Ruby? <code> ,Java's static vs Ruby's self
static in Java vs self in Ruby?, Is static in Java like self in Ruby? <code> ,Java's static vs Ruby's self
How to add a User Defined Interrupt to an infinitely running Ruby program?," I have a ruby script below which infinitely prints numbers from 1 onward. How can I make the script stop its infinite execution through an interrupt in the terminal like 'Ctrl+C' or key 'q'? Through every iteration, no user input should be asked. <code>  a = 0while( a ) puts a a += 1 # the code should quit if an interrupt of a character is givenend",How can I add a user interrupt to an infinite loop?
Add Dependency for AWS/S3," I'm am adding tests to a Rails app that remotely stores files. I'm using the default Rails functional tests. How can I add file uploads to them? I have: This for some reason uploads a Tempfile and causes the AWS/S3 gem to fail with: Is their any way that I can get the test to use an ActionDispatch::Http::UploadedFile and perform more like it does when testing with the web browser? Is fixture_file_upload the way to test uploading files to a controller? If so why doesn't it work like the browser?As a note, I really don't want to switch testing frameworks. Thanks! <code>  test ""create valid person"" do post(:create, :person => { :avatar => fixture_file_upload('avatar.jpeg') })end NoMethodError: undefined method `bytesize' for Tempfile",Rails Functional Test Case and Uploading Files to ActionDispatch::Http::UploadFile
Rails Functional Test Case and Uploading Files," I'm am adding tests to a Rails app that remotely stores files. I'm using the default Rails functional tests. How can I add file uploads to them? I have: This for some reason uploads a Tempfile and causes the AWS/S3 gem to fail with: Is their any way that I can get the test to use an ActionDispatch::Http::UploadedFile and perform more like it does when testing with the web browser? Is fixture_file_upload the way to test uploading files to a controller? If so why doesn't it work like the browser?As a note, I really don't want to switch testing frameworks. Thanks! <code>  test ""create valid person"" do post(:create, :person => { :avatar => fixture_file_upload('avatar.jpeg') })end NoMethodError: undefined method `bytesize' for Tempfile",Rails Functional Test Case and Uploading Files to ActionDispatch::Http::UploadFile
How do I write a spec for a Rails 3 route that does redirecting?," I am using Omniauth in my Rails project, and I'd like to hide ""/auth/facebook"" behind a ""/login"" route.In fact, I wrote a route: and this actually works, i.e. a link to login_path will redirect to /auth/facebook.However, how can I write a (RSpec) spec to test this route (specifically, the redirect)?Do note that /login is not an actual action nor method defined in the application.Thanks in advance!  <code>  match ""/login"", :to => redirect(""/auth/facebook""), :as => :login",Rails: How do I write a spec for a route that does a redirect?
How do I write a spec for a Rails route that does redirecting?," I am using Omniauth in my Rails project, and I'd like to hide ""/auth/facebook"" behind a ""/login"" route.In fact, I wrote a route: and this actually works, i.e. a link to login_path will redirect to /auth/facebook.However, how can I write a (RSpec) spec to test this route (specifically, the redirect)?Do note that /login is not an actual action nor method defined in the application.Thanks in advance!  <code>  match ""/login"", :to => redirect(""/auth/facebook""), :as => :login",Rails: How do I write a spec for a route that does a redirect?
How do we take user input for a character in Ruby?," I know this question is a fundamental one. I am able to take user input for a string and for an integer using: But I want to read from the String(say which is in my case more than a line in length) character by character and count the number of characters from the first to the very last for every character encountered in the string. I know this can be achieved through: str.lengthI want to count it character wise as I am trying to implement word wrap in Ruby, wherein say within the line width(which would be a user defined number input) I would want to print only those words which are not continuing over to the next line i.e. I don't want to split a continuous word over two lines. Such words should be taken to the new line.Thanks for you time..!! <code>  str = gets()num = gets().to_i",Read a Ruby string one character at a time (for word wrapping)
Creating Signature and Nonce for OmniAuth (Ruby)," I'm looking to access SmugMug's API from my application to grab users' albums and images (the users have been authenticated via ruby's OmniAuth).According to SmugMug's OAuth API, OAuth requires six parameters.I can get the token with OmniAuth, and the timestamp should be easy (Time.now.to_i right?). There are two things that I don't know how to generate -- the oauth_nonce and the oauth_signature.According to the oauth docs, I generate the nonce via the timestamp, but how exactly would I do that? Does it need to be a certain length and limited to certain characters?And of course the signature. How would I generate a HMAC-SHA1 sig with ruby? I know the oauth gem can do it, but I'd rather generate it myself to use with OmniAuth. Looking at the code, I'm having trouble deciphering how the oauth gem generates the sig.Thank you for any help. <code> ",Creating Signature and Nonce for OAuth (Ruby)
Check specifc key is present in a array or not?," I want to check whether the ""user"" key is present or not in the session hash. How can I do this?Note that I don't want to check whether the key's value is nil or not. I just want to check whether the ""user"" key is present. <code> ",How to check if a specific key is present in a hash or not?
Check specifc key is present in a hash or not?," I want to check whether the ""user"" key is present or not in the session hash. How can I do this?Note that I don't want to check whether the key's value is nil or not. I just want to check whether the ""user"" key is present. <code> ",How to check if a specific key is present in a hash or not?
Check if a specific key is present in a hash or not?," I want to check whether the ""user"" key is present or not in the session hash. How can I do this?Note that I don't want to check whether the key's value is nil or not. I just want to check whether the ""user"" key is present. <code> ",How to check if a specific key is present in a hash or not?
rspec and #initialize method," How can I specify #initialize behaviour with RSpec? For example here:generator.rb generator_spec.rb I'd like to set expectation that pick_seed method called from #initialize method. <code>  class Generator attr_accessor :seed def initialize(seed = nil) @seed = seed || pick_seed end def pick_seed Time.now.to_i endend require 'generator'describe Generator it ""calls 'pick_seed' method unless seed specified"" do endend",Rails / RSpec: How to test #initialize method?
Ruby documentation (beginner's question)," I'm relatively new to Ruby and have limited time therefore I try out simple things.Recently I needed to create a file and because I'm lazy as hell, I run to Google. The result: Shame on me, it is very straightforward, should have done it myself. Then I wanted to check what ruby magic the File class' methods offer or if there's any 'simplification' when invoking those methods, so I headed for the documentation here, and checked for the File class.1.8.6 documentation presents me with ""ftools.rb: Extra tools for the File class"" under 'File' class, which is not what I'm looking for.1.8.7 documentation seems OK for 'File' class, there are a plethora of methods. Except 'open'.1.9 documentation finally shows me the 'open' method.And I had an almost same tour with Net::HTTP.Do I exaggerate when I think good old Turbo Pascal's 7.0 documentation was better organized than Ruby documentation is right now? Is there any other source for the uninitiated to collect knowledge? Or is it possible that I just tumbled into a documentation hole and the rest are super-brilliant-five-star organized?Thanks <code>  File.open(local_filename, 'w') {|f| f.write(doc) }",Ruby core documentation quality
translating html to content_tag," How would you convert this HTML into the Rails content_tag helper syntax/format? <code>  <p class=""msg""> <span class=""strong"">Most people enjoy the inferiority of their best friends.</span> <br> <span class=""emphasize""> - Lord Chesterfield</span></p>",Converting HTML to content_tag in Ruby on Rails
regenerate ctags in vim using RVM," I have the following code in my .vimrc: This generates ctags for my current directory.I'm using RVM, I'm working on different projects, with different ruby versions (trough RVM gemsets.I have a different $GEM_PATH per project, and I want to generate the ctags for the gems in this path too.How should the above line be to test if the $GEM_PATH variable is set, and processing these paths too?Or better still how to check if I have an .rvmrc file, and generate ctags depending of the contents of this file? <code>  map <Leader>rt :!ctags --extra=+f -R *<CR><CR>",Regenerate ctags in vim using RVM
Serialize ruby object to json and back," I want to serialize an object to JSON, write it to file and read it back. Now I'd expect something like in .net where you have json.net or something like that and you do: and be done with it. You get back the JSON string.How do I do this in Ruby? No Rails, no ActiveRecord, no nothing. Is there a gem I can't find?I installed the JSON gem and called: where obj is an object like: All I get back is: What am I doing wrong? <code>  JsonSerializer.Serialize(obj); puts JSON.generate([obj]) class CrawlStep attr_accessor :id, :name, :next_step def initialize (id, name, next_step) @id = id @name = name @next_step = next_step endendobj = CrawlStep.new(1, 'step 1', CrawlStep.new(2, 'step 2', nil)) [""#<CrawlStep:0x00000001270d70>""]",Serialize Ruby object to JSON and back?
Why is it not a good idea to dynamically create a lot of symbols in ruby?, What is the function of symbol in ruby? what's difference between string and symbol?Why is it not a good idea to dynamically create a lot of symbols?  <code> ,Why is it not a good idea to dynamically create a lot of symbols in ruby (for versions before 2.2)?
How do you merge repeating elements in an array?," I need to merge consecutive repeating elements in an array, such that becomes #uniq doesn't work for this purpose. Why? Because #uniq will produce this: <code>  [1, 2, 2, 3, 1] [1, 2, 3, 1] [1, 2, 3]",How do you merge consecutive repeating elements in an array?
How make a HTTP GET request using Ruby on Rails?," I would like to take information from another website. Therefore (maybe) I should make a request to that website (in my case a HTTP GET request) and receive the response. How can I make this in Ruby on Rails?If it is possible, is it a correct approach to use in my controllers? <code> ",How to make a HTTP request using Ruby on Rails?
How make a HTTP request using Ruby on Rails?," I would like to take information from another website. Therefore (maybe) I should make a request to that website (in my case a HTTP GET request) and receive the response. How can I make this in Ruby on Rails?If it is possible, is it a correct approach to use in my controllers? <code> ",How to make a HTTP request using Ruby on Rails?
"Ruby, Rails - how to check if a var is an Integer"," Does Rails 3 or Ruby have a built-in way to check if a variable is an integer?For example, <code>  1.is_an_int #=> true""dadadad@asdasd.net"".is_an_int #=> false?",Checking if a variable is an integer
Coverting Ruby hashes to arrays," I have a Hash which is of the form {:a => {""aa"" => 11,""ab"" => 12}, :b => {""ba"" => 21,""bb"" => 22}}How do i convert it to the form {:a => [[""aa"",11],[""ab"",12]],:b=>[[""ba"",21],[""bb"",22]]} <code> ",Converting Ruby hashes to arrays
Rails: How to make Date strftime aware of the default locale ?," I have my default locale set in the environment.rb as de (German).I also see all the error messages in German, so the locale is picked up by the server. But when I try to print date with strftime like following: It prints in English (January, 11), and not the expected German (Januar, 11).How can I print the date according to the default locale? <code>  some_date.strftime('%B, %y')",Rails: How to make Date strftime aware of the default locale?
rails 3 w Devise for Authentication - How to manually create a user," I would like to manually create new Users, without forcing them to verify their email address.The idea is to allow existing users to automatically add their friends without requiring their registration. It makes sense for the business case I'm working to solve.How can this be achieved with Devise? <code> ",Rails 3 with Devise for Authentication - How do I manually create a user?
Rails 3 with Devise for Authentication - How do I manually create an user?," I would like to manually create new Users, without forcing them to verify their email address.The idea is to allow existing users to automatically add their friends without requiring their registration. It makes sense for the business case I'm working to solve.How can this be achieved with Devise? <code> ",Rails 3 with Devise for Authentication - How do I manually create a user?
capistrano deploy problem," I am having an issue with my deployi ran cap deploy and got this here is my deploy.rb please help <code>  Warning: Permanently added 'github.com,207.97.227.239' (RSA) to the list of known hosts.** [174.143.150.79 :: out] Permission denied (publickey).** fatal: The remote end hung up unexpectedlycommand finished*** [deploy:update_code] rolling back* executing ""rm -rf /home/deploy/transprint/releases/20110105034446; true""servers: [""174.143.150.79""][174.143.150.79] executing command set :application, ""transprint""set :domain, ""174.149.150.79""set :user, ""deploy""set :use_sudo, falseset :scm, :gitset :deploy_via, :remote_cacheset :app_path, ""production""set :rails_env, 'production'set :repository, ""git@github.com:myname/something.git""set :scm_username, 'deploy'set :deploy_to, ""/home/deploy/#{application}""role :app, domainrole :web, domainrole :db, domain, :primary => true",Why is capistrano acting up like this?
what is the point of return in ruby?," What is the difference between return and just putting a variable such as the following:no return return <code>  def write_code(number_of_errors) if number_of_errors > 1 mood = ""Ask me later"" else mood = ""No Problem"" end moodend def write_code(number_of_errors) if number_of_errors > 1 mood = ""Ask me later"" else mood = puts ""No Problem"" end return moodend",what is the point of return in Ruby?
"Ruby gems, bundler and RVM confusion "," I read ""Relationships between Rubygems, Bundler, and RVM"" before asking it again. Well, there are many questions like this, but people who answered say they work with Rubygems, RVM and Bundler, and they have not explained how each of these work in isolation. I am really confused with how the three work in isolation when we are installing gems. Please do not tell me how you work, which will help me, but I won't learn what is happening when we play with them.My confusion can be broken down into these questions. Where is a gem installed when:I just have Rubygems (without RVM or Bundler)?Rubygems and RVM are installed?Rubygems, RVM and Bundler are installed?Please help me understand this stuff with either resources on the web or by your detailed answers. <code> ","Rubygems, Bundler and RVM confusion"
Aks the user ruby thor," I want to somehow ask the user to say their flickr_id, flickr_apikey and that stuff, but id' be most happy to do it under my install command so it dosn't end up being such a long and heavy line because of alle the arguments.so something like and so on? Do you get the idea, and can it be done? <code>  $ thor PhotoonRails:installWe're about to install your system.. blaa, blaa, blaa...We have to know you're Flick ID, get i here http://idgettr.com/Flickr ID: {here you should type your id}We also has to know you're flick api key, make one here ...API Key: {here you should type your key}",Interactive prompt with thor
Ruby case insensitive ," I need to look for all occurrences of a word in a line, but the search must be case insensitive. What else do I need to add to my regular expression?  <code>  arr = line.scan(/\s+#{word}\s+/)",Find case-insensitive word matches in a line
"Good Rspec2 example usage? (Also: Cucumber, Pickle, Capybara)"," I'm looking for a rather recent open source application that uses Rspec 2 as test library.I'd like to see how an experienced developer utilizes the library properly to test the full stack, since I'm constantly in doubt concerning my own knowledge (coming from testunit and partly due to the rather sparse documentation of the latest Rspec release, even though it is constantly improved).If a project would use Cucumber, Pickle and/or Capybara as well together with Rspec 2, you'd have me jumping for joy.Any pointers?Cheers! <code> ","Rails: Good Rspec2 example usage? (Also: Cucumber, Pickle, Capybara)"
How can you check for STDIN input in a Ruby 1.9.2 script?," I need to check for the presence of STDIN input in a Ruby script, like the mysql command can. If nothing is being directed to STDIN, then the script should not attempt to read STDIN. How can this be done in a cross-platform way? <code> ",How can you check for STDIN input in a Ruby script?
"Ruby: How to pass a custom comparator to ""sort"" ?", Class A has the following comparator: I would like to use this comparator to sort an array where each item is of class A: How should I pass my_comparator to sort!? <code>  class A attr_accessor x def my_comparator(a) x**2 <=> (a.x)**2 endend class B def my_method items.sort!(<how can I pass my_comparator here ?>) endend,"How to pass a custom comparator to ""sort""?"
[Ruby] How can I reload a script in IRB?," I am writing a Ruby script for use in the Rails environment, but I chose to run it from irb because reloading the Rails console can be a pain. Now the wait time is much shorter from irb, but I'm bothered that I have to restart irb and require the script everytime I make a change. Is there a simpler way of reloading a script from irb? I found a method in this thread, but that only applies to gem files apparently. My require statement looks like this EDIT: Having tried load rather than require, I still couldn't get it to work. I can't get a stop on these errors. <code>  require ""#{File.expand_path(__FILE__)}/../lib/query"" ruby-1.9.2-p0 > load ""#{File.expand_path(__FILE__)}/../lib/query.rb""LoadError: no such file to load -- /Users/newuser/Dropbox/Sites/rails/hacknyc/(irb)/../lib/query.rb",How can I reload a script in IRB?
Ruby Timeout::timeout is driving me crazy," I have this piece of code: I then launch the method containing this code, and well, here is the beginning of a stack trace: So I naively thinks that my call timed out, but 'Print me something please' is never printed and complete_results which is suppose to be the timeout status return value (either true or false, as mentioned in the documentation), is definitively not a boolean.Am I doing something wrong? <code>  begin complete_results = Timeout.timeout(4) do results = platform.search(artist, album_name) endrescue Timeout::Error puts 'Print me something please'end Exception message : execution expiredException backtrace : /***/****/.rvm/rubies/ruby-1.8.7-p302/lib/ruby/1.8/timeout.rb:64:i",Ruby Timeout::timeout doesn't fire Exception and doesn't return what documented
"self.send(method, =, value) does not work!"," I am trying to create a Ruby class where the initialize method takes a hash of options. I then have those options as attr_accessors for the class. Now, I could do something like but it doesn't feel very DRY to me. Instead, I would like to do but I cannot get the syntax to work!What am I doing wrong? <code>  class User attr_accessor :name, :email, :phone def initialize(options) self.name = options[:name] self.email = options[:email] self.phone = options[:phone] endendUser.new(:name => 'Some Name', :email => 'some-name@some-company.com', :phone => 435543093) class User attr_accessor :name, :email, :phone def initialize(options) options.each do |option_name, option_value| # Does not work!! self.send(option_name, '=', option_value) # Does not work either!! self.send(option_name, '=' + option_value) end endendUser.new(:name => 'Some Name', :email => 'some-name@some-company.com', :phone => 435543093)","self.send(method, =, value) does not work"
Ruby: .self vs @, Can anyone explain the difference between accessing an instance attribute via self.attribute and by @attribute? <code> ,Directly accessing an instance variable vs. Using an accessor method
Ruby: self. vs @, Can anyone explain the difference between accessing an instance attribute via self.attribute and by @attribute? <code> ,Directly accessing an instance variable vs. Using an accessor method
Raisl 3: RoutingError Page 404, I have an exception ActionController::RoutingError when the user tries to access a non existing route. How can I redirect the user to the 404.html page or render an error on that page?e.g: when I try to access https://github.com/someuser I get a 404 page on that URL.I've tried this in application controller with no success: <code>  rescue_from ActionController::RoutingError do |exception| render '/public/404.html'end,RoutingError Page 404
"Newbie's question (Rails): what does ""class << self"" means?", Possible Duplicates: class << self idiom in Ruby Can someone please explain class << self to me? I would like to know what does class << self statement mean in a model class? And how does the statement inside it differ from those outside from it. For example: What does class << self mean?What are the differences between method search(q) and search2(qq) ? <code>  class Post < ActiveRecord::Base class << self def search(q) # search from DB end end def search2(qq) # search from DB endend,"what does ""class << self"" mean in Rails?"
Forming sanitary shell commands in Ruby," I'm building a daemon that will help me manage my server(s). Webmin works fine, as does just opening a shell to the server, but I'd prefer to be able to control server operations from a UI I design, and also expose some functionality to end users.The daemon will pick up actions from a queue and execute them. However, since I'll be accepting input from users, I want to make sure they're not permitted to inject something dangerous into a privileged shell command.Here's a fragment that exemplifies my problem: A gist that explains more: https://gist.github.com/773292I'm not positive if typical escaping and sanitizing of inputs is enough for this case, and being a designer, I don't have a ton of security-related experience. I know that this is something that should probably be obvious to me, but its not!How can I ensure that the web application that will create and serialize the actions can't pass dangerous text into the privileged process that receives the actions?Thanks for the helparb <code>  def perform system ""usermod -p #{@options['shadow']} #{@options['username']}""end",Forming sanitary shell commands or system calls in Ruby
ruby send vs __send__, I understand the concept of some_instance.send but I'm trying to figure out why you can call this both ways. The Ruby Koans imply that there is some reason beyond providing lots of different ways to do the same thing. Here are the two examples of usage: Anyone have any idea about this? <code>  class Foo def bar? true endendfoo = Foo.newfoo.send(:bar?)foo.__send__(:bar?),Ruby send vs __send__
How to count the length (number of lines) of a csv file in Rails?," I have a form (Rails) which allows me to load a .csv file using the file_field.In the view: Clicking Submit redirects me to another page (create.html.erb). The file was loaded fine, and I was able to read the contents just fine in this second page. I am trying to show the number of lines in the .csv file in this second page. My controller (semi-pseudocode): Both file.length and file.size returns '91' when my file only contains 7 lines. From the Rails documentation that I read, once the Submit button is clicked, Rails creates a temp file of the uploaded file, and the params[:upcsv][:filename] contains the contents of the temp/uploaded file and not the path to the file. And I don't know how to extract the number of lines in my original file. What is the correct way to get the number of lines in the file? My create.html.erb: I'm really new at Rails (just started last week), so please bear with my stupid questions. Thank you!Update: apparently that number '91' is the number of individual characters (including carriage return) in my file. Each line in my file has 12 digits + 1 newline = 13. 91/13 = 7. <code>  <% form_for(:upcsv, :html => {:multipart => true}) do |f| %> <table> <tr> <td><%= f.label(""File:"") %></td> <td><%= f.file_field(:filename) %></td> </tr> </table> <%= f.submit(""Submit"") %> <% end %> class UpcsvController < ApplicationController def index end def create file = params[:upcsv][:filename] ... #params[:upcsv][:file_length] = file.length # Show number of lines in the file #params[:upcsv][:file_length] = file.size ... endend <table> <tr> <td>File length:</td> <td><%= params[:upcsv][:file_length] %></td> </tr></table>",Count the length (number of lines) of a CSV file?
[Ruby] How do I inspect the methods of a Ruby object?," I am wondering if there is a Ruby method call that shows only the methods defined by the Ruby object it's called from, as opposed to all the methods defined by its ancestor classes, which is what methods seems to do. <code> ",How do I inspect the methods of a Ruby object?
How to see mysql queries in rails console, Is there a way to see which MySQL queries are fired from ActiveRecord in the rails console? <code> ,How to see MySQL queries in rails console
How do I set a an option as selected using selenium-webdriver (selenium 2.0) client in ruby," I am trying to get familiar with the new ruby selenium-webdriver as it appears more intuitive mostly than the previous version of selenium and the ruby driver that went with it. Also, i had trouble getting the old selenium to work with ruby 1.9.1 in windows so I thought i'd look for an alternative. So far i've done this with my script: So basically I'm logging into my site and trying to add an education entry to my user profile.. I have a reference to a select box with options (in the country_select variable) and now i want to select an option with a given value.. I don't see how to do this in the new client.. The only thing I can think of doing is looping through all the options until I find the one I want, and then call execute_script:http://selenium.googlecode.com/svn/trunk/docs/api/rb/Selenium/WebDriver/Driver.html#execute_script-class_methodmethod to set the selectedIndex.Is there any other way to do this?In the java api for selenium 2.0/webdriver here: http://seleniumhq.org/docs/09_webdriver.htmlthere is an example of doing this It doesn't appear that the ruby version has this feature though unless I'm missing something.Any help would be appreciated. <code>  require ""selenium-webdriver""driver = Selenium::WebDriver.for :firefoxdriver.get ""https://example.com""element = driver.find_element(:name, 'username')element.send_keys ""mwolfe""element = driver.find_element(:name, 'password')element.send_keys ""mypass""driver.find_element(:id, ""sign-in-button"").clickdriver.find_element(:id,""menu-link-my_profile_professional_info"").clickdriver.find_element(:id,""add_education_btn"").clickcountry_select = driver.find_element(:name, ""address_country"") Select select = new Select(driver.findElement(By.xpath(""//select"")));select.deselectAll();select.selectByVisibleText(""Edam"");",How do I set an option as selected using Selenium WebDriver (selenium 2.0) client in ruby
How can I detect CJK characters in a string in Ruby?," Given a string in Ruby 1.8.7 (without the awesome Oniguruma regular expression engine that supports Unicode properties with \p{}), I would like to be able to determine if the string contains one or more Chinese, Japanese, or Korean characters; i.e. I suspect that this will boil down to seeing if any of the characters in the string are in the Unihan CJKV Unicode blocks, but I figured it was worth asking if anyone knows of an existing solution in Ruby. <code>  class String def contains_cjk? ... endend>> ''.contains_cjk?=> true>> ' '.contains_cjk?=> true>> ''.contains_cjk?=> true>> 'Watashi ha bakana gaijin desu.'.contains_cjk?=> false",How can I detect certain Unicode characters in a string in Ruby?
Is there an Asian equivalent to English fixed with fonts? How do you align columns of Asian and English characters?," Using Ruby, I have to output strings in an columnar format to the terminal. Something like this: I can do this fine with Latin UTF8 characters using String#ljust and %s.But a problem arises when the characters are Korean, Chinese, etc. The columns simply won't align when there are rows of English interspersed with rows containing Korean, etc. How can I get column alignment here? Is there a way to output Asian characters in the equivalent of a fixed-width font? How about for documents that are meant to be displayed and edited in Vim? <code>  | row 1 | a string here | etc| row 2 | another string | etc",Ruby: Checking for East Asian Width (Unicode)
Is there an Asian equivalent to English fixed-width fonts? How do you align columns of Asian and English characters?," Using Ruby, I have to output strings in an columnar format to the terminal. Something like this: I can do this fine with Latin UTF8 characters using String#ljust and %s.But a problem arises when the characters are Korean, Chinese, etc. The columns simply won't align when there are rows of English interspersed with rows containing Korean, etc. How can I get column alignment here? Is there a way to output Asian characters in the equivalent of a fixed-width font? How about for documents that are meant to be displayed and edited in Vim? <code>  | row 1 | a string here | etc| row 2 | another string | etc",Ruby: Checking for East Asian Width (Unicode)
Ruby: How do I pass all parameters and blocks recieved by one method to another?," I am writing a helper that adds an HTML attribute to a link_to tag in rails. So, my thinking is that my helper method should accept any parameters or blocks passed to it, call link_to with those same parameters, add it's attribute to what is returned, and return the result to the caller.Like this: So, as you can see, there seems to be no way (that doesn't involve lots of code and conditional branching) to pass what myhelper has received to link_to without turning all of the parameters back into what they looked like before they got to my method.Is there a more 'Ruby-like' solution to this problem? <code>  def link_to(*args, &block) ... rails code in link_to ...enddef myhelper(*args, &block) # Notice that at this point, 'args' has already link_to() # become an array of arguments and 'block' has ... my code ... # already been turned into a Proc.endmyhelper() # Any arguments or blocks I pass with this call should make # it all the way through to link_to.",Ruby: How do I pass all parameters and blocks received by one method to another?
How do i add a span in a link_to with an image," So I have this: Which works, but I need a span in between also like this: How do I add to the link_to? <code>  <%= link_to(image_tag(@model.picture.url(:thumb), :alt => ''), ""/pages/you/#{something.id}"", {:id => ""y_link_#{something.id}""}) %> <a id=""y_link_2"" href=""/pages/you/2"" class=""""> <span>Apples</span> <img src=""another_small.jpg?1236340989"" alt=""""> </a> <span>Apples</span>",How do I add a span in a link_to with an image
Ruby: How do you select every nth item in an array?," I'm looking to find a way in Ruby to select every nth item in an array. For instance, selecting every second item would transform: into: Is there a Ruby method to do so, or is there any other way to do it?I tried using something like: but that only works for an array with integers, not strings. <code>  [""cat"", ""dog"", ""mouse"", ""tiger""] [""dog"", ""tiger""] [1,2,3,4].select {|x| x % 2 == 0}# results in [2,4]",How do you select every nth item in an array?
ruby 1.9 regex expression named capture how to fetch all matches," I have a string: I tried using Ruby 1.9's new feature ""named groups"" to fetch all named group info: Is there an API like Python's findall which returns a matchdata collection? In this case I need to return two matches, because 123 and abc repeat twice. Each match data contains of detail of each named capture info so I can use m['number'] to get the match value. <code>  s=""123--abc,123--abc,123--abc"" /(?<number>\d*)--(?<chars>\s*)/",Regex with named capture groups getting all matches in Ruby
building Hash from array of objects," I'm wondering if there is a more canonical way to do this in ruby 1.9I have an array with a bunch of objects and I want to group them into a Hash using a property of each object in the array.Very simplified example: I tried this, but its output is wrong (as you can see): <code>  > sh = {} => {} > aers = %w(a b c d ab bc de abc) => [""a"", ""b"", ""c"", ""d"", ""ab"", ""bc"", ""de"", ""abc""] > aers.each do |aer|> sh[aer.size] = [] if sh[aer.size].nil?> sh[aer.size] << aer> end=> [""a"", ""b"", ""c"", ""d"", ""ab"", ""bc"", ""de"", ""abc""] > sh => {1=>[""a"", ""b"", ""c"", ""d""], 2=>[""ab"", ""bc"", ""de""], 3=>[""abc""]} sh = Hash.new([]) => {} > aers.each do |aer|> sh[aer.size] << aer> end => [""a"", ""b"", ""c"", ""d"", ""ab"", ""bc"", ""de"", ""abc""] > sh => {} ",Building Hash by grouping array of objects based on a property of the items
Event Driven Ruby on Rails," I have an application that lends itself to an event/listener model. Several different kinds of data get published (event), then many different things may or may not need to act on that data (listeners). There's no specific order the listeners need to happen in and each listener would determine whether or not it needs to act on the event.What tools for Rails apps are there to accomplish this task? I'm hoping to not have to do this myself (although, I can. It's not THAT big a deal.)Edit: Observer pattern might be a better choice for this <code> ",Event/Observer Driven Ruby on Rails
How to map with index in Ruby ?," What is the easiest way to convert to <code>  [x1, x2, x3, ... , xN] [[x1, 2], [x2, 3], [x3, 4], ... , [xN, N+1]]",How to map with index in Ruby?
Rails: Is that possible to define a static method in a module ?," Say there are three classes: A, B & C. I want each class to have a class method, say self.foo, that has exactly the same code for A, B & C.Is it possible to define self.foo in a module and include this module in A, B & C? I tried to do so and got an error message saying that foo is not recognized. <code> ",Ruby: Is it possible to define a class method in a module?
Rails: Is that possible to define a class method in a module ?," Say there are three classes: A, B & C. I want each class to have a class method, say self.foo, that has exactly the same code for A, B & C.Is it possible to define self.foo in a module and include this module in A, B & C? I tried to do so and got an error message saying that foo is not recognized. <code> ",Ruby: Is it possible to define a class method in a module?
Is that possible to define a class method in a module?," Say there are three classes: A, B & C. I want each class to have a class method, say self.foo, that has exactly the same code for A, B & C.Is it possible to define self.foo in a module and include this module in A, B & C? I tried to do so and got an error message saying that foo is not recognized. <code> ",Ruby: Is it possible to define a class method in a module?
Ruby and methods," This is not specific for Rails - I am just using Rails as an example. I have a model in Rails: (Let's assume that the Item model (class) has a method called name.) When do I need to use self.name and when can I just use name (e.g., #{name})? <code>  class Item < ActiveRecord::Base def hello puts ""Hello, #{self.name}"" endend",When to use `self.foo` instead of `foo` in Ruby methods
When to use `self.foo` instead of `foo` in Ruby methods ," This is not specific for Rails - I am just using Rails as an example. I have a model in Rails: (Let's assume that the Item model (class) has a method called name.) When do I need to use self.name and when can I just use name (e.g., #{name})? <code>  class Item < ActiveRecord::Base def hello puts ""Hello, #{self.name}"" endend",When to use `self.foo` instead of `foo` in Ruby methods
"Pass an variable into a partial, rails 3?"," I have a loop like such: Then in my middle partial, how do I access the current post? <code>  <% @posts.each do |post| %> <% render middle %><% end %>","Pass a variable into a partial, rails 3?"
"What does ([^:""]+) do in a Ruby regular expression?"," I can't find a good reference for the apparently special uses of the ^, :, and "" characters.  <code> ","What does ([^:""]+) do in a Ruby regular expression?"
"What does `([^:""]+)` do in a Ruby regular expression?"," I can't find a good reference for the apparently special uses of the ^, :, and "" characters.  <code> ","What does ([^:""]+) do in a Ruby regular expression?"
What is the meaning of *nix ? And what is it's relation with Ruby ?," What is the meaning of *nix, and what is its relation with Ruby?Just saw that in an interview question... I think there is something to do with UNIX distros, but I am not sure.Could not find it here or in the Wikipedia, so I am asking.What is the meaning ?And what is its relation with Ruby ? because the question was about Ruby. <code> ",What is the meaning of *nix?
What is the meaning of *nix ? And what is it's relation with Ruby?," What is the meaning of *nix, and what is its relation with Ruby?Just saw that in an interview question... I think there is something to do with UNIX distros, but I am not sure.Could not find it here or in the Wikipedia, so I am asking.What is the meaning ?And what is its relation with Ruby ? because the question was about Ruby. <code> ",What is the meaning of *nix?
remove double quotes from string in Ruby," I'm trying to grab data from a MySQL database and use Ruby to reformat it into a flat text file. Some of my MySQL data contains double quotes like so: Matthew ""Matt"" Perryand I need to remove those quotes and replace them with something else, | for instance.I found another post on stackoverflow about removing quotes that suggested the following: but that returns the string intact (with double quotes). How can I get Matthew |Matt| Perryinstead? <code>  s.scan(/'(.+?)'|""(.+?)""|([^ ]+)/).flatten.compact",Remove double quotes from string
Istalling Ruby 1.9.2 thorough RVM never works for me!," When I do >rvm install 1.9.2 it all goes well. Then I do >rvm use 1.9.2 and that goes well too. When It comes to ruby -v though.. What on earth do I do? I've been trying for a few hours now :P--Edit--Here is my rvm info output: <code>  sam@sjones:~$ rvm install 1.9.2/home/sam/.rvm/rubies/ruby-1.9.2-p136, this may take a while depending on your cpu(s)...ruby-1.9.2-p136 - #fetchingruby-1.9.2-p136 - #downloading ruby-1.9.2-p136, this may take a while depending on your connection...% Total % Received % Xferd Average Speed Time Time Time Current Dload Upload Total Spent Left Speed100 8612k 100 8612k 0 0 562k 0 0:00:15 0:00:15 --:--:-- 1305kruby-1.9.2-p136 - #extracting ruby-1.9.2-p136 to /home/sam/.rvm/src/ruby-1.9.2-p136ruby-1.9.2-p136 - #extracted to /home/sam/.rvm/src/ruby-1.9.2-p136ruby-1.9.2-p136 - #configuringruby-1.9.2-p136 - #compilingruby-1.9.2-p136 - #installingruby-1.9.2-p136 - updating #rubygems for /home/sam/.rvm/gems/ruby-1.9.2-p136@globalruby-1.9.2-p136 - updating #rubygems for /home/sam/.rvm/gems/ruby-1.9.2-p136ruby-1.9.2-p136 - adjusting #shebangs for (gem).ruby-1.9.2-p136 - #importing default gemsets (/home/sam/.rvm/gemsets/)Install of ruby-1.9.2-p136 - #completesam@sjones:~$ rvm use 1.9.2Using /home/sam/.rvm/gems/ruby-1.9.2-p136sam@sjones:~$ ruby -v-bash: ruby: command not found rvm info system: system: uname: ""Linux sjones 2.6.18-194.8.1.el5.028stab070.2 #1 SMP Tue Jul 6 14:55:39 MSD 2010 x86_64 GNU/Linux"" bash: ""/bin/bash => GNU bash, version 3.2.39(1)-release (x86_64-pc-linux-gnu)"" zsh: "" => not installed"" rvm: version: ""rvm 1.2.2 by Wayne E. Seguin (wayneeseguin@gmail.com) [http://rvm.beginrescueend.com/]"" homes: gem: ""not set"" ruby: ""not set"" binaries: ruby: """" irb: ""/usr/local/bin/irb"" gem: """" rake: ""/usr/bin/rake"" environment: PATH: ""/usr/local/bin:/usr/bin:/bin:/usr/games:/home/sam/.rvm/bin:/home/sam/.rvm/bin"" GEM_HOME: """" GEM_PATH: """" MY_RUBY_HOME: """" IRBRC: """" RUBYOPT: """" gemset: """"",Installing Ruby 1.9.2 through RVM never works!
Installing Ruby 1.9.2 thorough RVM never works for me!," When I do >rvm install 1.9.2 it all goes well. Then I do >rvm use 1.9.2 and that goes well too. When It comes to ruby -v though.. What on earth do I do? I've been trying for a few hours now :P--Edit--Here is my rvm info output: <code>  sam@sjones:~$ rvm install 1.9.2/home/sam/.rvm/rubies/ruby-1.9.2-p136, this may take a while depending on your cpu(s)...ruby-1.9.2-p136 - #fetchingruby-1.9.2-p136 - #downloading ruby-1.9.2-p136, this may take a while depending on your connection...% Total % Received % Xferd Average Speed Time Time Time Current Dload Upload Total Spent Left Speed100 8612k 100 8612k 0 0 562k 0 0:00:15 0:00:15 --:--:-- 1305kruby-1.9.2-p136 - #extracting ruby-1.9.2-p136 to /home/sam/.rvm/src/ruby-1.9.2-p136ruby-1.9.2-p136 - #extracted to /home/sam/.rvm/src/ruby-1.9.2-p136ruby-1.9.2-p136 - #configuringruby-1.9.2-p136 - #compilingruby-1.9.2-p136 - #installingruby-1.9.2-p136 - updating #rubygems for /home/sam/.rvm/gems/ruby-1.9.2-p136@globalruby-1.9.2-p136 - updating #rubygems for /home/sam/.rvm/gems/ruby-1.9.2-p136ruby-1.9.2-p136 - adjusting #shebangs for (gem).ruby-1.9.2-p136 - #importing default gemsets (/home/sam/.rvm/gemsets/)Install of ruby-1.9.2-p136 - #completesam@sjones:~$ rvm use 1.9.2Using /home/sam/.rvm/gems/ruby-1.9.2-p136sam@sjones:~$ ruby -v-bash: ruby: command not found rvm info system: system: uname: ""Linux sjones 2.6.18-194.8.1.el5.028stab070.2 #1 SMP Tue Jul 6 14:55:39 MSD 2010 x86_64 GNU/Linux"" bash: ""/bin/bash => GNU bash, version 3.2.39(1)-release (x86_64-pc-linux-gnu)"" zsh: "" => not installed"" rvm: version: ""rvm 1.2.2 by Wayne E. Seguin (wayneeseguin@gmail.com) [http://rvm.beginrescueend.com/]"" homes: gem: ""not set"" ruby: ""not set"" binaries: ruby: """" irb: ""/usr/local/bin/irb"" gem: """" rake: ""/usr/bin/rake"" environment: PATH: ""/usr/local/bin:/usr/bin:/bin:/usr/games:/home/sam/.rvm/bin:/home/sam/.rvm/bin"" GEM_HOME: """" GEM_PATH: """" MY_RUBY_HOME: """" IRBRC: """" RUBYOPT: """" gemset: """"",Installing Ruby 1.9.2 through RVM never works!
Working with decimals in Ruby on Rails three," I'm trying to calculate the average net price of a product. I have, in my Product model :total_sold and :total_net_revenue. Doing straight division in the method seems to always result in 0. I resorted to using BigDecimal as I figured that was the problem ... but with my latest iteration of the code below, I'm still getting zero when the answer comes out to a decimal. Net revenue is in cents, which is why I divide by 100. Can someone point out what I'm doing wrong or should do? <code>  def avg_price BigDecimal(total_sold.to_s) / (BigDecimal(total_net_revenue.to_s) / 100)end ",Working with decimals in Ruby on Rails 3
How to order files by creation time in ruby?," How to get files in last modified time order in ruby? I was able to smash my keyboard enough to achieve this: But I wonder if there is more sophisticated way to do this? <code>  file_info = Hash[*Dir.glob(""*"").collect {|file| [file, File.ctime(file)]}.flatten]sorted_file_info = file_info.sort_by { |k,v| v}sorted_files = sorted_file_info.collect { |file, created_at| file }",How to order files by last modified time in ruby?
What is the proper way to check for existance of objects in Rails / Ruby ?," I have a lot of models and relations. Due to this fact, there is lot of calls in views/controllers, which look like this: Some part of the chain can end up being nil, which is perfectly ok. What is the proper/clean/fast way to check for the existence of the terminal object?Is calling something like: Considered ok? <code>  @object.something.with_something.value @object.something.with_something.value if defined? @object.something.with_something.value ",What is the proper way to check for existence of objects in Rails / Ruby ?
testing if a hash has any of a number of keys., I was wondering if there was a better way to test if a hash has any keys from an array. I want to use it something like this: Or am I going to have to loop this? <code>  keys = %w[k1 k2 k5 k6]none = true if hash.key?(keys),Testing if a hash has any of a number of keys
Ruby: Should I use alias & alias_method?," I found a blog post on alias vs. alias_method. As shown in the example given in that blog post, I simply want to alias a method to another within the same class. Which should I use? I always see alias used, but someone told me alias_method is better.Usage of alias Usage of alias_method Blog post link here <code>  class User def full_name puts ""Johnnie Walker"" end alias name full_nameendUser.new.name #=>Johnnie Walker class User def full_name puts ""Johnnie Walker"" end alias_method :name, :full_nameendUser.new.name #=>Johnnie Walker",Should I use alias or alias_method?
Ruby: Should I use alias or alias_method?," I found a blog post on alias vs. alias_method. As shown in the example given in that blog post, I simply want to alias a method to another within the same class. Which should I use? I always see alias used, but someone told me alias_method is better.Usage of alias Usage of alias_method Blog post link here <code>  class User def full_name puts ""Johnnie Walker"" end alias name full_nameendUser.new.name #=>Johnnie Walker class User def full_name puts ""Johnnie Walker"" end alias_method :name, :full_nameendUser.new.name #=>Johnnie Walker",Should I use alias or alias_method?
catching command-line errors using %x," Whenever you want to execute something on the command line, you can use the following syntax: However, I want to catch an error or at least get the response so I can parse it correctly. I tried setting: and using a try-catch to no avail. How can I capture the results instead of having them printed out? <code>  %x(command to run) result = %x(command to run) begin %x(command to run)rescue ""didn't work""end",Catching command-line errors using %x
how to run all the tests with minitest?," I downloaded source code for a project, found a bug, and fixed it.Now I want to run tests to find out if I have broken anything.The Tests are in minitest DSL.How do I run them all at once?I searched for applicable rake tasks etc, but I didn't find any. <code> ",How to run all tests with minitest?
Bundler: What is the :require => false on the gemfile means?," Does this: mean that the gem needs to be installed, or does it mean it is not required? <code>  gem 'whenever', require: false",Ruby: What does 'require: false' in Gemfile mean?
Bundler: What does :require => false in a Gemfile mean?," Does this: mean that the gem needs to be installed, or does it mean it is not required? <code>  gem 'whenever', require: false",Ruby: What does 'require: false' in Gemfile mean?
What does 'require: false' in Gemfile mean?," Does this: mean that the gem needs to be installed, or does it mean it is not required? <code>  gem 'whenever', require: false",Ruby: What does 'require: false' in Gemfile mean?
Difference - unless/if, Can anyone explain me the difference between if and unless and when to use it? <code> ,Difference - unless / if
Check and modify elements of a string," Hi i have a string like this: i have to transform it in a string like this: so how i can get every element and transform it?thanks <code>  ""<p class='video'>http://vimeo/2342343</p><p class='image'>http://nerto.it/logo.png</p><p class='text'>try to write</p><p class='video'>http://vimeo/2234923</p>"" ""<p class='video'><a href='http://vimeo/2342343'>http://vimeo/2342343</a></p><p class='image'><img src='http://nerto.it/logo.png' /></p><p class='text'>try to write</p><p class='video'><a href='http://vimeo/2234923'>http://vimeo/2234923</a></p>""",Automatically link URLs and images within html string
Double colons rails," I have seen a lot usage of double colons in Rails before class names.For example: I know what Module::Class::Constant means, but ::Class ? <code>  require ::File.expand_path('../config/environment', __FILE__)",Double colons before class names in Ruby?
Rake task in loop - executes only first task," I have rails application that connects to multiple databases. I wrote custom rake task that looks like this: The problem is that task executes db:migrate only for users[0] user (first user in collection) and there is no errors, just stoppes silently...Here's output from rake --trace I have no idea why the rest of users don't get migrated. <code>  task :migrate_accounts_schema => [:environment] do |t| users = User.find :all, :conditions => [""state = 2""], :order => ""id asc"" users.each do |user| if user.state == 2 ActiveRecord::Base.establish_connection( :adapter => ""postgresql"", :host => user.database_host, :port => user.database_port, :username => user.subdomain, :password => ""#{user.database_password}"", :database => user.database_name ) Rake::Task[""db:migrate""].invoke end endend ** Invoke app:migrate_accounts_schema (first_time)** Invoke environment (first_time)** Execute environment** Execute app:migrate_accounts_schema ** Invoke db:migrate (first_time)** Invoke environment ** Execute db:migrate** Invoke db:schema:dump (first_time)** Invoke environment ** Execute db:schema:dump** Invoke db:migrate ",Why does a Rake task in a loop execute only once?
Inscrutable Ruby: Assignment," Consider the following: I would anticipate the following to have the same result: In the first example, the second assignment refers to the value of a before the assignment was made. In the second example, the second assignment performs a recursive assignment. This feels like different behavior to me. Is this behavior in fact consistent? If so can someone please explain why? <code>  a=[0,1] #our starting valuea=[a,1] #=> [[0,1],1] as expected a=[0,1] #same starting placea[0]=a #should make a the same thing as it was above, right?a #=> [[...],1] !!!",Inscrutable Ruby: Vector Assignment Example
Inscrutable Ruby: Vector Assignment," Consider the following: I would anticipate the following to have the same result: In the first example, the second assignment refers to the value of a before the assignment was made. In the second example, the second assignment performs a recursive assignment. This feels like different behavior to me. Is this behavior in fact consistent? If so can someone please explain why? <code>  a=[0,1] #our starting valuea=[a,1] #=> [[0,1],1] as expected a=[0,1] #same starting placea[0]=a #should make a the same thing as it was above, right?a #=> [[...],1] !!!",Inscrutable Ruby: Vector Assignment Example
What is a good place to keep custom Exception definitions in a rails project?, When making one's own custom exceptions like Where is a good place to keep these? I was considering lib/exceptions.rb and also pondering if it would be more appropriate to somehow put them closer to the code that uses them. <code>  class ThingExploded < StandardError; endclass ThingIsMissing < StandardError; end,What is a conventional place to keep custom Exception definitions in a rails project?
Rails perform one validation only if all other validations pass," I am building a custom validation that checks a bank account number and sort code with an external API to test if they exist (i.e. is a proper valid UK bank account). As this is an expensive operation I don't want to bother hitting the API unless the account number and sort code pass Rails' built in validations.For example, I have these basic validations: Then I have my custom validation: What I want to ensure is that the custom validation is only performed if the rest of the model is valid. No point paying 25p to be told no account number was provided when I can work that out myself!I am aware I could write some logic that checks that the two attributes are not blank and matches them against the regex manually... but that doesn't seem a very Rails way. <code>  validates_presence_of :sort_code, :account_numbervalidates_format_of :sort_code, :with => Regexes::SORT_CODEvalidates_format_of :account_number, :with => Regexes::ACCOUNT_NUMBER validate :check_valid_bank_accountdef check_valid_bank_account # code here is irrelevant, but essentially this hits the API # if it's a valid UK bank account all is OK, if not we add an errorend",perform one validation only if all other validations pass
add new object to existing array in RUBY?," I'm trying to add an object to my array, however the array seems to always reset, instead of adding. What am I doing wrong? I think it has to do with if(defined? libraryshelf) then, What I'm trying to do here is find out of the array exists or not (if this is the first add or not).. my add_book.js.erb file @listofbooks only shows the title of the book I last added..  <code>  def add_book @listofbooks ||= Array.new @listofbooks.push(params[:booktitle]) @listofbooks respond_to do |format| format.html { redirect_to(:back) } format.js endend alert('<%= @listofbooks %>');","Problems keeping an object in an array, Ruby issues and Rails issues"
How do I add a new object to an existing array in Ruby?," I'm trying to add an object to my array, however the array seems to always reset, instead of adding. What am I doing wrong? I think it has to do with if(defined? libraryshelf) then, What I'm trying to do here is find out of the array exists or not (if this is the first add or not).. my add_book.js.erb file @listofbooks only shows the title of the book I last added..  <code>  def add_book @listofbooks ||= Array.new @listofbooks.push(params[:booktitle]) @listofbooks respond_to do |format| format.html { redirect_to(:back) } format.js endend alert('<%= @listofbooks %>');","Problems keeping an object in an array, Ruby issues and Rails issues"
How do I persist an object in my list in Rails?," I'm trying to add an object to my array, however the array seems to always reset, instead of adding. What am I doing wrong? I think it has to do with if(defined? libraryshelf) then, What I'm trying to do here is find out of the array exists or not (if this is the first add or not).. my add_book.js.erb file @listofbooks only shows the title of the book I last added..  <code>  def add_book @listofbooks ||= Array.new @listofbooks.push(params[:booktitle]) @listofbooks respond_to do |format| format.html { redirect_to(:back) } format.js endend alert('<%= @listofbooks %>');","Problems keeping an object in an array, Ruby issues and Rails issues"
What is the meaning of Do ||?," While reading some Ruby code I saw this: What is this notation |variable|? What does that do? And also, where do I find help for these specific subjects like | |, #{}, and so on? <code>  create_table :talks do |t|","What is the meaning of ""do | |"" in Ruby?"
What is the meaning of do || in Ruby?," While reading some Ruby code I saw this: What is this notation |variable|? What does that do? And also, where do I find help for these specific subjects like | |, #{}, and so on? <code>  create_table :talks do |t|","What is the meaning of ""do | |"" in Ruby?"
Ruby: How do create an array with values that ," What is an easy way to generate an array that has values with a fixed distance between them?For example: I need to be able to set start, end, and step distance.  <code>  1, 4, 7, 10,... etc",Create an array with evenly-spaced values
How I can set 'attr_accessible' in order to NOT allow access to ANY of the fields FOR that model using Ruby on Rails?, If in a model file I have just this code: what this means? All attributes related to the model are accessible or not?How I can set 'attr_accessible' in order to not allow access to any of the fields for that model? <code>  class Users < ActiveRecord::Baseend,How I can set 'attr_accessible' in order to NOT allow access to ANY of the fields FOR a model using Ruby on Rails?
ruby idiom method call or else default," What's the proper way of doing this in Ruby? <code>  def callOrElse(obj, method, default) if obj.respond_to?(method) obj.__send__(method) else default endend",Ruby idiom: method call or else default
Rails 3 Date.today.month," I'm using Date.today.month to display the month number. Is there a command to get the month name, or do I need to make a case to get it? <code> ",Name of this month (Date.today.month as name)
How to efficiently parse large text file in Ruby," I'm writing an import script that processes a file that has potentially hundreds of thousands of lines (log file). Using a very simple approach (below) took enough time and memory that I felt like it would take out my MBP at any moment, so I killed the process. This file in particular has 642,868 lines: Does anyone know of a more efficient (memory/cpu) way to process each line in this file?UPDATEThe code inside of the f.each_line from above is simply matching a regex against the line. If the match fails, I add the line to a @skipped array. If it passes, I format the matches into a hash (keyed by the ""fields"" of the match) and append it to a @results array. I'm completely open to this being an inefficient process. I could make the code inside of convert_to_hash use a precomputed lambda instead of figuring out the computation each time. I guess I just assumed it was the line iteration itself that was the problem, not the per-line code. <code>  #...File.open(file, 'r') do |f| f.each_line do |line| # do stuff here to line endend $ wc -l nginx.log /code/src/myimport 642868 ../nginx.log # regex built in `def initialize` (not on each line iteration)@regex = /(\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}) - (.{0})- \[([^\]]+?)\] ""(GET|POST|PUT|DELETE) ([^\s]+?) (HTTP\/1\.1)"" (\d+) (\d+) ""-"" ""(.*)""/#... loop linesmatch = line.match(@regex)if match.nil? @skipped << lineelse @results << convert_to_hash(match)end",How to efficiently parse large text files in Ruby
"Ruby, for each letter in alphabet?"," Using ruby, is it possible to make an array of each letter in the alphabet and 0-9 easily? <code> ",Generate array of all letters and digits
For each letter in alphabet?," Using ruby, is it possible to make an array of each letter in the alphabet and 0-9 easily? <code> ",Generate array of all letters and digits
Devise call backs.," Does devise have call backs when a user signs in and out?This is what I came up with: This is what I came with to track users that are currently signed in. <code>  Warden::Manager.after_authentication do |user,auth,opts| user.update_attribute(:currently_signed_in, true)endWarden::Manager.before_logout do |user,auth,opts| user.update_attribute(:currently_signed_in, false)end",Devise call backs
Remove a non-brekaiong space in Ruby," I have a string that looks like this: When I check the length, it says that it is 7 characters long. I checked online and found out that it is a non-breaking space. Could someone show me how to remove all the non-breaking spaces in a string?  <code>  d = ""foo\u00A0\bar""",How do I remove a non-breaking space in Ruby
Remove a non-breaking space in Ruby," I have a string that looks like this: When I check the length, it says that it is 7 characters long. I checked online and found out that it is a non-breaking space. Could someone show me how to remove all the non-breaking spaces in a string?  <code>  d = ""foo\u00A0\bar""",How do I remove a non-breaking space in Ruby
Getting the absolute URL when extracting links using Nokogiri, I'm using Nokogiri to extract links from a page but I would like to get the absolute path even though the one on the page is a relative one. How can I accomplish this? <code> ,How can I get the absolute URL when extracting links using Nokogiri?
Getting the absolute URL when extracting links, I'm using Nokogiri to extract links from a page but I would like to get the absolute path even though the one on the page is a relative one. How can I accomplish this? <code> ,How can I get the absolute URL when extracting links using Nokogiri?
Ruby Rhetorical Question.. Is it possible to have Methods inside Methods ?, I have a method inside of a method. The interior method depends on a variable loop that is being run. Is that a bad idea? <code> ,Is it possible to have Methods inside Methods?
Ruby Theoretical Question.. Is it possible to have Methods inside Methods ?, I have a method inside of a method. The interior method depends on a variable loop that is being run. Is that a bad idea? <code> ,Is it possible to have Methods inside Methods?
 Get the final url after redirect(s) using Ruby," If http://foo.com redirects to 1.2.3.4 which then redirects to http://finalurl.com, how can I use Ruby to find out the landing URL ""http://finalurl.com""? <code> ",How can I get the final URL after redirects using Ruby?
Force browser to download file instead of opening it [Ruby/Sinatra]," I would like to download http://foobar.com/song.mp3 as song.mp3, instead of having Chrome open it in its native <audio> player in the browser.How can I accmplish this?  <code> ",Force browser to download file instead of opening it
"Lisp Atoms, Ruby Symbols, Erlang Atoms. How useful are they?"," How useful is the feature of having an atom data type in a programming language?A few programming languages have the concept of atom or symbol to represent a constant of sorts. There are a few differences among the languages I have come across (Lisp, Ruby and Erlang), but it seems to me that the general concept is the same. I am interested in programming language design, and I was wondering what value does having an atom type provide in real life. Other languages such as Python, Java, C# seem to be doing quite well without it.I have no real experience of Lisp or Ruby (I know the syntaxes, but haven't used either in a real project). I have used Erlang enough to be used to the concept there. <code> ","Lisp and Erlang Atoms, Ruby and Scheme Symbols. How useful are they?"
Ruby Regex: Rejecting whole worlds," I know that in Regex, you can reject lists of symbols, such as [^abc]. I'd like to reject upon seeing an entire word in the middle of my input.To be more precise, I'd like to reject ""print <Anything except ""all"">"".A few examples: <code>  print all - matchfrokenfooster - no matchprint all nomnom - no matchprint bollocks - no matchprint allpies - no match",Ruby Regex: Rejecting whole words
How to update a single attribute without touch updated_at attribute?," How can I achieve this?tried to create 2 methods, called and the update method itself: turn timestamps on and off using callbacks like: but it's not updating anything, even the desired attribute (pagehit).Any advice? I don't want to have to create another table just to count the pagehits. <code>  def disable_timestamps ActiveRecord::Base.record_timestamps = falseenddef enable_timestamps ActiveRecord::Base.record_timestamps = trueend def increment_pagehit update_attribute(:pagehit, pagehit+1)end before_update :disable_timestamps, :only => :increment_pagehitafter_update :enable_timestamps, :only => :increment_pagehit",How to update a single attribute without touching the updated_at attribute?
Rails - Outputting a list of items with a comment after each record excluding the last," I'm doing the following right now in one of my user mailer views: I want a comma after every record except for the last, I suppose I could add an if block to see if the current record is the last, but that seems like a lot of code. Does rails have a better way to output a comma after every item excluding the last. Thanks <code>  <% @participants.each do |participant| %> <%=participant.user.full_name%><% end %> Good: XXXXX, XXXXXX, XXXXXBad: XXX,XXX,XXXX,",Rails - Outputting a list of items with a comma after each record excluding the last
"EASY ruby question: how test if variable matches any of several strings w/o long if-elsif chain, or case-when"," I assume there is a nice one-line way to say in ruby but cannot find how to do that in the online references I normally consult... Thanks! <code>  if mystr == ""abc"" or ""def "" or ""ghi"" or ""xyz""","Test if variable matches any of several strings w/o long if-elsif chain, or case-when"
Ruby: How do you check if an array's values includes one or multiple values?," I'm looking to see if an array has one or more values inside it. For instance, something like so: Of course, the ""include?"" method can only check one value. Is there a method to check for multiple values? <code>  [1,2,3,4,5,6].include?([4,1]) # => true[4,1,6,2].include?([4,1]) # => true[3,4,7].include?([4,1]) # => false",How do you check if an array's values includes one or multiple values?
which is faster ruby or jruby (ruby vs jruby)," If I am using Ruby on Rails, should I install MRI/YARV Ruby or JRuby? Which is faster? <code> ",Which is faster: MRI Ruby or JRuby?
Remove repetitious spaces in Ruby string," I have a string: ""foo (2 spaces) bar (3 spaces) baaar (6 spaces) fooo""How do I remove repetitious spaces in it so there should be no more than one space between any two words? <code> ",How do I remove repeated spaces in a string?
Remove repeated spaces in Ruby string," I have a string: ""foo (2 spaces) bar (3 spaces) baaar (6 spaces) fooo""How do I remove repetitious spaces in it so there should be no more than one space between any two words? <code> ",How do I remove repeated spaces in a string?
How to automatically escape html content using Jekyll and Markdown?," In foo.markdown I have the following: Well, I want Jekyll to automatically html escape the greater than and less than characters. I'm seriously fatigued after today's apprentice training and I'm just too lazy to manually html escape myself: >h3<Is there a config option or something to automatically escape Jekyll markdown content? <code>  ---layout: defaulttitle: Snarky little Ewok---A little Ewok is sometimes referred too as <h3>. But pappa Ewok is called <h1> - if you know what's good for you.",How can I automatically escape HTML content using Jekyll and Markdown?
Ruby access Array," I have the following hash: How would I print the value of pageviews? <code>  {""title""=>""ga:browser=Firefox"", ""dimensions""=>[{:browser=>""Firefox""}], ""metrics""=>[{:pageviews=>25474}], ""id""=>""http://www.google.com/analytics/feeds/data?ids=ga:3906565&amp;ga:browser=Firefox&amp;start-date=2010-02-06&amp;end-date=2011-02-06"", ""updated""=>#<DateTime: 212163710400001/86400000,-1/3,2299161>}",Ruby access hash element
RVM installed by ruby not working ?," I installed RVM using the single instruction mentioned at the RVM website (using git).Then I installed Ruby version 1.9.2 and 1.8.7 using: However, I cannot find the Ruby binary. When I try to execute the command, I get the following error: Here is the output of rvm info: <code>  rvm install 1.9.2rvm install 1.8.7 [root@server1 support]# rvm use 1.9.2Using /usr/local/rvm/gems/ruby-1.9.2-p136[root@server1 support]# ruby-bash: ruby: command not found [root@server1 support]# rvm infosystem: system: uname: ""Linux server1.myserver.com 2.6.18-194.26.1.el5.028stab070.14 #1 SMP Thu Nov 18 16:34:01 MSK 2010 x86_64 x86_64 x86_64 GNU/Linux"" bash: ""/bin/bash => GNU bash, version 3.2.25(1)-release (x86_64-redhat-linux-gnu)"" zsh: "" => not installed"" rvm: version: ""rvm 1.2.6 by Wayne E. Seguin (wayneeseguin@gmail.com) [http://rvm.beginrescueend.com/]"" homes: gem: ""not set"" ruby: ""not set"" binaries: ruby: """" irb: """" gem: """" rake: """" environment: PATH: ""/usr/kerberos/sbin:/usr/kerberos/bin:/usr/local/sbin:/usr/local/bin:/sbin:/bin:/usr/sbin:/usr/bin:/root/bin:/usr/local/rvm/bin"" GEM_HOME: """" GEM_PATH: """" MY_RUBY_HOME: """" IRBRC: """" RUBYOPT: """" gemset: """"[root@server1 support]#",RVM installed by Ruby not working?
How to learn TDD," I have been using ruby exclusively for about a month and I really love it. However, I am having an incredibly hard time using, or even learning TDD. My brain just doesn't function that way...I really, really want to learn TDD but to be honest I am a bit confused. All the articles that I find when Googling around are mostly specific to Rails, which is not interesting to me because I want to learn how to do efficient testing for any ruby application, from the simple one-file script to the complicated gem, not for Web apps. Also, there are so many frameworks and so few tutorials to get started.Could anybody give me any advice on how to learn TDD so that I can at least start to consider myself an aspiring rubyist? <code> ",How to learn TDD with Ruby?
Nested Hash Ruby," I'm being sent a nested hash that needs to be sorted by its values. For example: When running the following: I get: This is great, it's exactly what I want. The problem is I'm not always going to know what all the keys are that are being sent to me so I need some sort of loop. I tried to do the following: This to me makes sense since if I manually call @foo.first[0] I get and @foo.first[1] returns but for some reason this isn't sorting properly (e.g. at all). I assume this is because the each is calling sort on the entire hash object rather than on ""a""'s values. How do I access the values of the nested hash without knowing what it's key is? <code>  @foo = {""a""=>{""z""=>5, ""y""=>3, ""x""=>88}, ""b""=>{""a""=>2, ""d""=>-5}} @foo[""a""].sort{|a,b| a[1]<=>b[1]} [[""y"", 3], [""z"", 5], [""x"", 88]] @foo.each do |e| e.sort{|a,b| a[1]<=>b[1]}end ""a"" {""z""=>5, ""y""=>3, ""x""=>8}",Sort items in a nested hash by their values
Capistrano Multi-stage Checking for undefined variable," In Capistrano using the Multi-stage extension I have two environments: prod and testing.I need a few variables in testing.rb that are not needed in prod.rb and I want some of my tasks to be able to check if the variable is defined and use it if it is, but ignore it if it is not set.So, in testing.rb I would have something like: prod.rb wouldn't have any reference to :foo since it doesn't need it. In one of my tasks, I would like to do something like: But I keep getting the error: Is there a way to test for undefined global variables in the task? Or do I have to do something like: In all my environments that don't need the :foo variable? <code>  set :foo, 'bar' if defined?(foo) # do something with fooelse # do something without fooend undefined local variable or method 'foo' set :foo, ''",Capistrano Checking for undefined variable in Task
Comparing two ruby hashes," I am trying to compare two Ruby Hashes using the following code: The output to the screen is the full file from file2. I know for a fact that the files are different, but the script doesn't seem to pick it up. <code>  #!/usr/bin/env rubyrequire ""yaml""require ""active_support""file1 = YAML::load(File.open('./en_20110207.yml'))file2 = YAML::load(File.open('./locales/en.yml'))arr = []file1.select { |k,v| file2.select { |k2, v2| arr << ""#{v2}"" if ""#{v}"" != ""#{v2}"" }}puts arr",How do I compare two hashes?
Underscore in numbers, What does that mean?0.0..10_000.0 <code> ,What does the underscore mean in literal numbers?
"TextMate, RVM and testing in Ruby"," I have set up RVM and made individual gemsets for my projects as per the RVM best practices. Now running a test file in TextMate dosen't work and I have read here what to do. The problem is that it won't work because the guide expects me to have just one gemset (they call it ""Rails3""). I normally have 2-3 projects open at a time (using different gemsets) so I can't effectively use this approach. Have any of you solved that problem? <code> ",Using RVM with different gemsets in TextMate
why use sql builders? Arel v. Sequel v. T-SQL," I'm trying to understand the benefits of building SQL via an object-oriented builder DSL vs. parameterizing a raw SQL string. After researching/implementing the same query three ways, I notice that the raw SQL is by far the easiest to read. This begs the question, ""why jump through a hoop?"" Why not just declare and use raw SQL?Here's what I've come up:First, I guess it makes the SQL more portable as it could then be utilized by any DB with an adapter. I guess this is the biggie, right? Still, isn't most T-SQL intelligible to most databases?Second, it provides a query object that can be reused--as the basis for other queries, named-scope chaining, etc. What's the main return on investment you realize by building your SQL instead of declaring it? I totally appreciate named scopes and see how chaining them can be beneficial. I'm not worried about accessing related records via a model. I'm purely talking about building a complex query. <code>  def instances_of_sql(ttype_id) #raw sql ttype_id = get(ttype_id).try(:id) ti = get('tmdm:type-instance') inst = get('tmdm:instance') type = get('tmdm:type') self.class.send :sanitize_sql, [%{ SELECT t.* FROM associations a JOIN roles type ON type.association_id = a.id AND type.ttype_id = ? JOIN roles inst ON inst.association_id = a.id AND inst.ttype_id = ? JOIN topics t ON t.id = inst.topic_id WHERE a.topic_map_id IN (?) AND a.ttype_id = ? AND type.topic_id = ? }, type.id, inst.id, self.ids, ti.id, ttype_id]enddef instances_of_sql(ttype_id) #sequel ttype_id = get(ttype_id).try(:id) ti = get('tmdm:type-instance') ir = get('tmdm:instance') tr = get('tmdm:type') DB.from(:associations.as(:a)). join(:roles.as(:tr), :tr__association_id => :a__id, :tr__ttype_id => tr[:id]). join(:roles.as(:ir), :ir__association_id => :a__id, :ir__ttype_id => ir[:id]). join(:topics.as(:t), :t__id => :ir__topic_id). where(:a__topic_map_id => self.ids). where(:a__ttype_id => ti[:id]). where(:tr__topic_id => ttype_id). select(:t.*).sqlenddef instances_of_sql(ttype_id) #arel ttype_id = get(ttype_id).try(:id) ti = get('tmdm:type-instance') inst = get('tmdm:instance') type = get('tmdm:type') #tables t = Topic.arel_table a = Association.arel_table tr = Role.arel_table ir = tr.alias a. join(tr).on(tr[:association_id].eq(a[:id]),tr[:ttype_id].eq(type[:id])). join(ir).on(ir[:association_id].eq(a[:id]),ir[:ttype_id].eq(inst[:id])). join(t).on(t[:id].eq(ir[:topic_id])). where(a[:topic_map_id].in(self.ids)). where(a[:ttype_id].eq(ti[:id])). where(tr[:topic_id].eq(ttype_id)). project('topics.*').to_sqlend",Why use SQL builders? Arel v. Sequel v. T-SQL
Why use sql builders? Arel v. Sequel v. T-SQL," I'm trying to understand the benefits of building SQL via an object-oriented builder DSL vs. parameterizing a raw SQL string. After researching/implementing the same query three ways, I notice that the raw SQL is by far the easiest to read. This begs the question, ""why jump through a hoop?"" Why not just declare and use raw SQL?Here's what I've come up:First, I guess it makes the SQL more portable as it could then be utilized by any DB with an adapter. I guess this is the biggie, right? Still, isn't most T-SQL intelligible to most databases?Second, it provides a query object that can be reused--as the basis for other queries, named-scope chaining, etc. What's the main return on investment you realize by building your SQL instead of declaring it? I totally appreciate named scopes and see how chaining them can be beneficial. I'm not worried about accessing related records via a model. I'm purely talking about building a complex query. <code>  def instances_of_sql(ttype_id) #raw sql ttype_id = get(ttype_id).try(:id) ti = get('tmdm:type-instance') inst = get('tmdm:instance') type = get('tmdm:type') self.class.send :sanitize_sql, [%{ SELECT t.* FROM associations a JOIN roles type ON type.association_id = a.id AND type.ttype_id = ? JOIN roles inst ON inst.association_id = a.id AND inst.ttype_id = ? JOIN topics t ON t.id = inst.topic_id WHERE a.topic_map_id IN (?) AND a.ttype_id = ? AND type.topic_id = ? }, type.id, inst.id, self.ids, ti.id, ttype_id]enddef instances_of_sql(ttype_id) #sequel ttype_id = get(ttype_id).try(:id) ti = get('tmdm:type-instance') ir = get('tmdm:instance') tr = get('tmdm:type') DB.from(:associations.as(:a)). join(:roles.as(:tr), :tr__association_id => :a__id, :tr__ttype_id => tr[:id]). join(:roles.as(:ir), :ir__association_id => :a__id, :ir__ttype_id => ir[:id]). join(:topics.as(:t), :t__id => :ir__topic_id). where(:a__topic_map_id => self.ids). where(:a__ttype_id => ti[:id]). where(:tr__topic_id => ttype_id). select(:t.*).sqlenddef instances_of_sql(ttype_id) #arel ttype_id = get(ttype_id).try(:id) ti = get('tmdm:type-instance') inst = get('tmdm:instance') type = get('tmdm:type') #tables t = Topic.arel_table a = Association.arel_table tr = Role.arel_table ir = tr.alias a. join(tr).on(tr[:association_id].eq(a[:id]),tr[:ttype_id].eq(type[:id])). join(ir).on(ir[:association_id].eq(a[:id]),ir[:ttype_id].eq(inst[:id])). join(t).on(t[:id].eq(ir[:topic_id])). where(a[:topic_map_id].in(self.ids)). where(a[:ttype_id].eq(ti[:id])). where(tr[:topic_id].eq(ttype_id)). project('topics.*').to_sqlend",Why use SQL builders? Arel v. Sequel v. T-SQL
"Ruby, how do you submit a form with a text link?"," I am trying to get this form to submit correctly. Here's what I have so far: and the button renders with this code: I am using action create, is this correct? Here is the rendered form tag: What am I missing? Thanks for your help! <code>  <% form_for(:user, :url => update_user_setting_path, :remote => true, :html => {:method => :post, :class => ""search_form general_form""}) do |f| %> <li><%= link_to raw(""<span class='button approve'><span><span>SAVE</span></span></span>""), :action => 'create' %></li> <form method=""post"" data-remote=""true"" class=""search_form general_form"" action=""/settings/2/update_user"" accept-charset=""UTF-8"">","Rails, how do you submit a form with a text link?"
Is there a method I can use to check if the RUBY_VERSION is greater than a certain version?," Before I split the RUBY_VERSION string on a period and convert the bits into integers and so on, is there a simpler way to check from a Ruby program if the current RUBY_VERSION is greater than X.X.X? <code> ",How to check if the RUBY_VERSION is greater than a certain version?
"rails 3, using open-uri, how encode/escape to remove spaces etc in url"," How do I encode or 'escape' the URL before I use OpenURI to open(url)?We're using OpenURI to open a remote url and return the xml: The problem is the URL contains some user-input text that contains spaces and other characters, including ""+"", ""&"", ""?"", etc. potentially, so we need to safely escape the URL. I saw lots of examples when using Net::HTTP, but have not found any for OpenURI.We also need to be able to un-escape a similar string we receive in a session variable, so we need the reciprocal function. <code>  getresult = open(url).read","In Ruby/Rails, how can I encode/escape special characters in URLs?"
"In Ruby/rails, how can I encode/escape special characters in URLs?"," How do I encode or 'escape' the URL before I use OpenURI to open(url)?We're using OpenURI to open a remote url and return the xml: The problem is the URL contains some user-input text that contains spaces and other characters, including ""+"", ""&"", ""?"", etc. potentially, so we need to safely escape the URL. I saw lots of examples when using Net::HTTP, but have not found any for OpenURI.We also need to be able to un-escape a similar string we receive in a session variable, so we need the reciprocal function. <code>  getresult = open(url).read","In Ruby/Rails, how can I encode/escape special characters in URLs?"
Ruby method with maximum number of paramters," I have a method, that should accept maximum 2 arguments. Its code is like this: Is there more elegant way to specify it? <code>  def method (*args) if args.length < 3 then puts args.collect else puts ""Enter correct number of arguments"" endend",Ruby method with maximum number of parameters
delayed_job gem," Is it possible to use the delayed_job gem outside of Rails? Or put another way, can it be used in a pure Ruby project?If so, how?  <code> ",Can the delayed_job gem be used outside of Rails?
How do i group by day instead of date?," ok so i have and then the problem is I have a few Sun, 09 Jan and a couple for the 10th, instead of one like this this is what i need <code>  >> list = Request.find_all_by_artist(""someBand"")=> [#<Request id: 1, artist: ""someBand"", song: ""someSong"", venue: ""Knebworth - Stevenage, United Kingdom"", showdate: ""2011-07-01"", amount: nil, user_id: 2, created_at: ""2011-01-01 18:14:08"", updated_at: ""2011-01-01 18:14:09""............. list.group_by(&:created_at).map {|k,v| [k, v.length]}.sort=> [[Sat, 01 Jan 2011 18:14:08 UTC +00:00, 10], [Sun, 09 Jan 2011 18:34:19 UTC +00:00, 1], [Sun, 09 Jan 2011 18:38:48 UTC +00:00, 1], [Sun, 09 Jan 2011 18:51:10 UTC +00:00, 1], [Sun, 09 Jan 2011 18:52:30 UTC +00:00, 1], [Thu, 10 Feb 2011 02:22:08 UTC +00:00, 1], [Thu, 10 Feb 2011 20:02:20 UTC +00:00, 1]] => [[Sat, 01 Jan 2011 18:14:08 UTC +00:00, 10], [Sun, 09 Jan 2011 18:34:19 UTC +00:00, 4], [Thu, 10 Feb 2011 20:02:20 UTC +00:00, 2]]",How do I group by day instead of date?
"Rails shorthand for ""use this if it isn't blank, otherwise use that""", I have the following code: Is there a shorter way to write this?Thanks! <code>  url = file.s3_url.blank? ? file.url : file.s3_url,"Ruby shorthand for ""use this if it isn't blank, otherwise use that"""
"Does Ruby has container like stack, queue, and linked-list, map, set?", I checked several Ruby tutorials online and they seemed to use array for everything. So how could I implement the following data structures in Ruby?StacksQueuesLinked listsMapsSets <code> ,"Does Ruby have containers like stacks, queues, linked-lists, maps, or sets?"
python vs. ruby - description," In Python, you can access an object's docstring by using obj.__doc__. What is the equivalent action in Ruby? <code> ",What is the equivalent of a Python docstring in Ruby?
What is Ruby 1.9 standard csv library?," When I try the FasterCSV gem on my application I get this error: By the way, I'm using Rails 3, Ruby 1.9.2, and Rubygems 1.4.Can someone explain to me please how to use the standard CSV library for Ruby 1.9. I don'thave any idea at all because I'm very new to Rails. <code>  Please switch to Ruby 1.9's standardCSV library. It's FasterCSV plussupport for Ruby 1.9's m17n encodingengine.",What is Ruby 1.9 standard CSV library?
Ruby: remove Byte-Order Marker (BOM) from file read," Is there a way to remove the BOM from a UTF-8 encoded file?I know that all of my JSON files are encoded in UTF-8, but the data entry person who edited the JSON files saved it as UTF-8 with the BOM.When I run my Ruby scripts to parse the JSON, it is failing with an error.I don't want to manually open 58+ JSON files and convert to UTF-8 without the BOM. <code> ",Is there a way to remove the BOM from a UTF-8 encoded file? 
Using Sinatra for larger projects," It seems that in Sinatra all route handlers are being written into a single file, if I understand right it acts as a one large/small controller. Is there any way to split it into separate independent files, so when let's say somebody calls ""/"" - one action is executed, and if smth like ""/posts/2"" is received then another action - similar logic that is applied in PHP? <code> ",Using Sinatra for larger projects via multiple files
What are the most concise Clojure equivalent for Ruby's Dir.glob()?," What's the easiest way to do something like this in Clojure? <code>  require 'csv'Dir[""data/*.csv""].each do |file| File.readlines(file).each do |line| x, y, z = *CSV.parse_line(line) # process this data endend",What is the most concise Clojure equivalent for Ruby's Dir.glob()?
Parsing structured text in Ruby ," There are several questions on SO about parsing structured text in Ruby, but none of them apply to my case.I'm the author of the Ruby Whois library. The library includes several parsers to parse a WHOIS response and extract the properties from the content.So far, I used two approaches:Regular expressions for base parsers (e.g. whois.aero)StringScanner for advanced parsers (e.g. whois.nic.it)Regular expressions are not efficient because if I need to extract 15 properties, I need to scan the same response at least 15 times.StringScanner is a nice library, but creating an efficient scanner is not that simple.I was wondering if is there some other Ruby tools you suggest to implement a WHOIS record parser. I was reading about Treetop but because WHOIS records lack of a specification, I believe Treetop is not the right solution.Any suggestion? <code> ",Parsing structured text in Ruby
How should I handle two routes for a single collection?," I have a pretty common case for nested routes, I feel like, that looks something like this (in some sort of pseudonotation): In a nutshell: I have users. They have photos. I want to be able to show their photos on their page. I also want to be able to show all photos, regardless of the user. I'd like to keep my routes RESTful and using the built-in resource methods feels like the right way to do it.Option 1 for doing this is to have PhotosController#index use a conditional to check which params are given and get the list of photos and set the view (different for a user's photos than for all photos). It's even easy to route it: Boom. It'd seem like Rails was setup for this. After the routes, though, things get more complicated. That conditional back in the PhotosController#index action is just getting more and more bloated and is doing an awful lot of delgation. As the application grows and so do the number of ways I want to show photos, it is only going to get worse.Option 2 might be to have a User::PhotosController to handle user photos, and a PhotosController to handle showing all photos. That generates the following routes: This works pretty well, I think, but everything is under a User module and I feel like that might end up causing problems when I integrate it with other things.QuestionsDoes anybody have experience with something like this?Can anybody share a better way of handling this?Any additional pros and cons to consider with either of these options?Update: I've gone ahead implementing Option 2 because it feels cleaner allowing Rails' logic to work rather than overriding it. So far things are going well, but I also needed to rename my namespace to :users and add an :as => :user to keep it from clashing with my User model. I've also overridden the to_param method on the User model to return the username. Path helpers still work this way, too.I'd still appreciate feedback on this method. Am I doing things the expected way, or am I misusing this functionality? <code>  '/:username/photos' => Show photos for User.find_by_username'/photos' => Show photos for User.all resources :photos, :only => [:index]scope ':/username' do resources :photosend resources :photos, :only => [:index]namespace :user, :path => '/:username' do resources :photosend photos GET /photos(.:format) {:action=>""index"", :controller=>""photos""} user_photos GET /:username/photos(.:format) {:action=>""index"", :controller=>""user/photos""} POST /:username/photos(.:format) {:action=>""create"", :controller=>""user/photos""} new_user_photo GET /:username/photos/new(.:format) {:action=>""new"", :controller=>""user/photos""} edit_user_photo GET /:username/photos/:id/edit(.:format) {:action=>""edit"", :controller=>""user/photos""} user_photo GET /:username/photos/:id(.:format) {:action=>""show"", :controller=>""user/photos""} PUT /:username/photos/:id(.:format) {:action=>""update"", :controller=>""user/photos""} DELETE /:username/photos/:id(.:format) {:action=>""destroy"", :controller=>""user/photos""}",Routing nested resources in Rails 3
Connecting to web services using Ruby on Rails (HTTP requests)," I am using Ruby on Rails 3 and I am trying to implement APIs to retrieve account information from a web service. That is, I would like to connect to a web service that has the Account class and get information from the show action routed at the URI http://<site_name>/accounts/1.At this time, in the web service accounts_controller.rb file I have: Now I need some advice for connecting to the web service. In the client application, I should have a HTTP GET request, but here is my question: What is ""the best"" approach to connect to a web service making HTTP requests? This code in the client application works: but, is the above code ""the way"" to implement APIs? Is it advisable to use third-party plugins and gems? <code>  class AccountsController < ApplicationController def show @account = Account.find(params[:id]) respond_to do |format| format.html format.js format.json { render :json => @account.to_json } end endend url = URI.parse('http://<site_name>/accounts/1.json')req = Net::HTTP::Get.new(url.path)res = Net::HTTP.start(url.host, url.port) {|http| http.request(req)}@output = JSON(res.body)[""account""]",Connecting to web services using Rails (HTTP requests)?
About Ruby's attribute accessors...," Ruby has this handy and convenient way to share instance variables by using keys like Why would I choose attr_reader or attr_writer if I could simply use attr_accessor? Is there something like performance (which I doubt)? I guess there is a reason, otherwise they wouldn't have made such keys. <code>  attr_accessor :varattr_reader :varattr_writer :var","Why use Ruby's attr_accessor, attr_reader and attr_writer?"
Dynamicly load Google Maps Markers with gmaps4rails," How do I load only markers that are inside the map bounds with gmaps4rails? And of course load new ones after pan and/or zoom. Directly related to that, how can I get the current boundaries and zoomlevel of the map? <code> ",Dynamically load Google Maps Markers with gmaps4rails
How to select the last date in a table?," How do I select the last date in a table where the column name is Lars.I have tried this: I have tried this: Output:[#<Reklamer dato: ""2011-02-15 23:53:28"">] I need just a datetime format like: 2011-02-15 23:53:28How do I do that? <code>  <%= Reklamer.where("":dato => :dato, AND :name => :name"", :date => Date.last, :name => ""Lars"") %> <%= Reklamer.where(name: 'Lars').order('dato ASC').limit(1).select('dato').inspect %>",Rails - How to select the last date in a table?
I can't install sqlite3 gem," I use apt-get to install sqlite3 in my VPS which is running Ubuntu 10. I can run sqlite3 with no problem. But when I try to use gem install sqlite3, I got this error: Any advice? <code>  root@makserver:/# gem install sqlite3Building native extensions. This could take a while...ERROR: Error installing sqlite3: ERROR: Failed to build gem native extension. /usr/local/bin/ruby extconf.rbchecking for sqlite3.h... nosqlite3.h is missing. Try 'port install sqlite3 +universal'or 'yum install sqlite3-devel' and check your shared library search path (thelocation where your sqlite3 shared library is located).*** extconf.rb failed ***Could not create Makefile due to some reason, probably lack ofnecessary libraries and/or headers. Check the mkmf.log file for moredetails. You may need configuration options.Provided configuration options: --with-opt-dir --without-opt-dir --with-opt-include --without-opt-include=${opt-dir}/include --with-opt-lib --without-opt-lib=${opt-dir}/lib --with-make-prog --without-make-prog --srcdir=. --curdir --ruby=/usr/local/bin/ruby --with-sqlite3-dir --without-sqlite3-dir --with-sqlite3-include --without-sqlite3-include=${sqlite3-dir}/include --with-sqlite3-lib --without-sqlite3-lib=${sqlite3-dir}/libGem files will remain installed in /usr/local/lib/ruby/gems/1.9.1/gems/sqlite3-1.3.3 for inspection.Results logged to /usr/local/lib/ruby/gems/1.9.1/gems/sqlite3-1.3.3/ext/sqlite3/gem_make.out",I can't install sqlite3 gem for Ubuntu 10
Ruby assignment while looping an array.," The above code outputs: but why not? I thought that colour was a reference to the current element in the array, and whatever i did to it would effect that array element? <code>  arr = [""red"",""green"",""blue"",""yellow""]arr.each do |colour| if colour == ""red"" colour = ""green"" endendputs arr.inspect [""red"", ""green"", ""blue"", ""yellow""] [""green"", ""green"", ""blue"", ""yellow""]",Changing entry in an array while looping through it
"In Ruby, what do you use self. in your classes?", When do you use self.property_name in Ruby? <code> ,"In Ruby, when should you use self. in your classes?"
Rspec Verbose Mode," When I run rspec with rake rspec and my tests are not ok, I get an error message. However, when my tests are ok, I just get '..'. No other output. How can I get it to print something like: <code>  A User .... can only have one nameA User .... can ...",Rspec Output Format: Documentation
Wich is the shorter way to silently ignore a Ruby exception, I'm looking for something like this: But the shortest way I've found is this: <code>  raise Exception rescue nil begin raise Exceptionrescue Exceptionend,Which is the shortest way to silently ignore a Ruby exception
how to start thin in default port," I'm learning thin server, by now I can use thin start to fire up the server, but the port is 3000, I should type the localhost:3000 in the browser to get the webpage.I want to take off the 3000 port as we normally do with other site. So I set use the command thin -p 80 start to use the default http port. But I got this error: <code>  root@makserver:~/apps/videosite# thin --port 80 start>> Using rack adapter>> Thin web server (v1.2.7 codename No Hup)>> Maximum connections set to 1024>> Listening on 0.0.0.0:80, CTRL+C to stop/usr/local/lib/ruby/gems/1.9.1/gems/eventmachine-0.12.10/lib/eventmachine.rb:572:in `start_tcp_server': no acceptor (RuntimeError) from /usr/local/lib/ruby/gems/1.9.1/gems/eventmachine-0.12.10/lib/eventmachine.rb:572:in `start_server' from /usr/local/lib/ruby/gems/1.9.1/gems/thin-1.2.7/lib/thin/backends/tcp_server.rb:16:in `connect' from /usr/local/lib/ruby/gems/1.9.1/gems/thin-1.2.7/lib/thin/backends/base.rb:49:in `block in start' from /usr/local/lib/ruby/gems/1.9.1/gems/eventmachine-0.12.10/lib/eventmachine.rb:256:in `call' from /usr/local/lib/ruby/gems/1.9.1/gems/eventmachine-0.12.10/lib/eventmachine.rb:256:in `run_machine' from /usr/local/lib/ruby/gems/1.9.1/gems/eventmachine-0.12.10/lib/eventmachine.rb:256:in `run' from /usr/local/lib/ruby/gems/1.9.1/gems/thin-1.2.7/lib/thin/backends/base.rb:57:in `start' from /usr/local/lib/ruby/gems/1.9.1/gems/thin-1.2.7/lib/thin/server.rb:156:in `start' from /usr/local/lib/ruby/gems/1.9.1/gems/thin-1.2.7/lib/thin/controllers/controller.rb:80:in `start' from /usr/local/lib/ruby/gems/1.9.1/gems/thin-1.2.7/lib/thin/runner.rb:177:in `run_command' from /usr/local/lib/ruby/gems/1.9.1/gems/thin-1.2.7/lib/thin/runner.rb:143:in `run!' from /usr/local/lib/ruby/gems/1.9.1/gems/thin-1.2.7/bin/thin:6:in `<top (required)>' from /usr/local/bin/thin:19:in `load' from /usr/local/bin/thin:19:in `<main>'",How to start thin on the default port?
How to get the name of the calling method in Ruby ?, is there a way in Ruby to find the calling method name inside of a method?For example: <code>  class Test def self.foo Fooz.bar endendclass Fooz def self.bar # get Test.foo or foo endend,How to get the name of the calling method?
Ruby - objectspace - what is it and how do people use it?," Ruby-doc has this description: The ObjectSpace module contains a number of routines that interact with the garbage collection facility and allow you to traverse all living objects with an iterator. ObjectSpace also provides support for object finalizers, procs that will be called when a specific object is about to be destroyed by garbage collection.Can anyone explain this in a simpler language, if not, atleast provide info on where this is used? <code> ",ObjectSpace - what is it and how do people use it?
Build MCV structure on top of Sinatra, I'm learning Sinatra and I was wondering if someone knows a good way to make an MVC structure for a project with Sinatra. I've got some ideas but they seems too much cumbersome to me. <code> ,Build MVC structure on top of Sinatra
Rails 3 view encoding (1.9.2)," In my controller, the following works (prints ""ok"") But this doesn't (renders ""ok\u00e9"") Apparently the to_json method escapes unicode characters. Is there an option to prevent this? <code>  puts obj.inspect render :json => obj","JSON encoding wrongly escaped (Rails 3, Ruby 1.9.2)"
My naive maximal clique finding algorithm runs faster than Bron Kerbosch. What's wrong?," In short, my naive code (in Ruby) looks like: And my Bron Kerbosch implementation: I also implemented pivoting and degeneracy ordering, which cut down on bron_kerbosch execution time, but not enough to overtake my initial solution. It seems wrong that this is the case; what algorithmic insight am I missing? Here is a writeup with more detail if you need to see fully working code. I've tested this on pseudo-random sets up to a million or so edges in size. <code>  # $seen is a hash to memoize previously seen sets# $sparse is a hash of usernames to a list of neighboring usernames# $set is the list of output clusters$seen = {}def subgraph(set, adj) hash = (set + adj).sort return if $seen[hash] $sets.push set.sort.join("", "") if adj.empty? and set.size > 2 adj.each {|node| subgraph(set + [node], $sparse[node] & adj)} $seen[hash] = trueend$sparse.keys.each do |vertex| subgraph([vertex], $sparse[vertex])end def bron_kerbosch(set, points, exclude) $sets.push set.sort.join(', ') if set.size > 2 and exclude.empty? and points.empty? points.each_with_index do |vertex, i| points[i] = nil bron_kerbosch(set + [vertex], points & $sparse[vertex], exclude & $sparse[vertex]) exclude.push vertex endendbron_kerbosch [], $sparse.keys, []",My naive maximal clique finding algorithm runs faster than Bron-Kerbosch's. What's wrong?
what is this doing: $:.unshift File.dirname(__FILE__)," What is the following doing, and why is it at the top of the page? https://github.com/mojombo/jekyll/blob/master/lib/jekyll.rb <code>  $:.unshift File.dirname(__FILE__)",What is '$:.unshift File.dirname(__FILE__)' doing?
Ruby on Rails: Why use Proc.new to call a method?," in all the tutorials for RoR I see instances where the coder chose to use Proc.new when seemingly it is both unnecessary and rather unattractive.Example, here is a callback for placed in a model, one using Proc.new the other presumably doing the same thing: So what's the difference? Why use the Proc? Don't they both call the ""paid_with_card?"" method?Thanks in advance <code>  class Order < ActiveRecord::Base before_save :normalize_card_number, :if => Proc.new { |order| order.paid_with_card? } endclass Order < ActiveRecord::Base before_save :normalize_card_number, :if => ""paid_with_card?""end",Why use Proc.new to call a method in a Rails callback?
List of installed ruby gems, Is there a Ruby method I can call to get the list of installed gems?I want to parse the output of gem list. Is there a different way to do this? <code> ,List of installed gems?
Ruby - adding a directory to $loadpath - what does it do?," This is actually a question about this question: Adding a directory to $LOAD_PATH (Ruby)What happens when you add a directory to the $LOAD_PATH? Is it like adding a script file to the execution context as in JavaScript? (You can access global methods/objects in another files) If not, how do I call the methods of other ruby files in the current directory? <code> ",Ruby - adding a directory to $LOAD_PATH - what does it do?
"select mailbox ""sent mail"" or ""all mail"" in ruby net::map"," I'm trying to use Net::IMAP in Ruby to search all mail sent by me, but I'm having trouble selecting anything other than INBOX. works fine, but as shown on the Net::IMAP documentation gives me ""Unknown Mailbox"".Incidentally, this is to be used with gmail.I also tried adding ""in"", ""anywhere"" to my imap.search(), but that didn't parse. Current code: <code>  imap.select('INBOX') imap.select('Mail/sent-mail') imap.select('INBOX')now = Time.now.localtime - 1209600 #two weekssince = now.day.to_s() + ""-"" + Date::MONTHNAMES[now.month] + ""-"" + now.year.to_s()puts ""since""puts sincebegin mail_ids = imap.search([""FROM"", ""me"", ""SINCE"", since]) mail_ids.each do |id| text = imap.fetch(id, 'BODY[HEADER.FIELDS (SUBJECT)]').to_s.split(""{"").second.chop puts text endend","Select mailbox ""sent mail"" or ""all mail"" in Ruby Net::IMAP"
ROR migration change a column type from Date to DateTime, I need to change my column type from date to datetime for an app I am making. I don't care about the data as its still being developed.How can I do this?  <code> ,Change a column type from Date to DateTime during ROR migration
ActiveSupport::JSON decode hash losing tokens," I'm trying to serialize and deserialize a hash. When the hash is deserailized, the keys are de-symbolized; e.g. not more :one, rather ""one"".From rails console: I've switched to using Marshal.dump/load for now. However, I wanted to throw this out there to see if there was a way to keep this in JSON (just for readability). <code>  >>h = { :one =>1, :two => ""two""}{:one=>1, :two=>""two""}>>j = ActiveSupport::JSON.encode(h)""{\""one\"":1,\""two\"":\""two\""}"">>h2 = ActiveSupport::JSON.decode(j){""one""=>1, ""two""=>""two""}>>h2[:one]nil>>h[:one]1",ActiveSupport::JSON decode hash losing symbols
Ruby Gsub question of the day ;)," I am trying to simply add a '/' at the end of this string. What is the best way to do this? I would like to make params[:id] == ""shirts/"" . How do I add a / at the end of that string? <code>  >> params[:id]""shirts""",How to append a string in Ruby
What is a Illegal octal digit?," I'm trying to make an array of zip codes. This returns : Never seen this before. Any workarounds? <code>  array = [07001, 07920] array = [07001, 07920] ^ from (irb):12 from :0",What is an Illegal octal digit?
ruby/rails - How to remove duplicates in a HASH?," I have a hash like so: What I would like to learn how to do is how to remove a record if it is duplicate. Meaning, see how there are several ""brad@intuit.com"" how can I remove the duplicate records, meaning remove all the others that have an email of ""brad@intuit.com"".... Making email the key not the other fields? <code>  [ { :lname => ""Brown"", :email => ""james@intuit.com"", :fname => ""James"" }, { :lname => nil, :email => ""brad@intuit.com"", :fname => nil }, { :lname => ""Smith"", :email => ""brad@intuit.com"", :fname => ""Brad"" }, { :lname => nil, :email => ""brad@intuit.com"", :fname => nil }, { :lname => ""Smith"", :email => ""brad@intuit.com"", :fname => ""Brad"" }, { :lname => nil, :email => ""brad@intuit.com"", :fname => nil }]",How to remove duplicates in a hash in Ruby on Rails?
What means `:location => ...` and `head :ok` in the 'respond_to' format statement?," I am using Ruby on Rails 3 and I would like to know what the :location => ... and head :ok statements mean in following code, how they work and how I can\should use those. <code>  respond_to do |format| format.xml { render :xml => @user, :status => :created, :location => @user }endrespond_to do |format| format.xml { head :ok }end",What does `:location => ...` and `head :ok` mean in the 'respond_to' format statement?
installing json," I need to install json because I get this error:Could not find json-1.4.6 in any of the sourcesI ran gem install json and bundle install but I was only able to install json-1.5.1 when I need json-1.4.6I have gem 'json', '1.4.6' in my gemfile, so I'm not sure what's going on...UPDATEI get this error: Installing json (1.4.6) /System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/fileutils.rb:1216:in `chmod': Operation not permitted - /Library/Ruby/Gems/1.8/gems/json-1.4.6/CHANGES (Errno::EPERM) <code> ",Can't install JSON gem
Ruby: How to solve that rounded % doesn't sum up to 100% ?," Suppose we have a list of items with an integer: If we calculate the percentage of each value against the sum over the whole list, we get: and if we round it, we get: The sum 43+29+29 = 101 is not 100, and it looks a little bit strange to the user of the software. How would you solve this problem? <code>  USA: 3 peopleAustralia: 2 peopleGermany: 2 people USA: 3/(3+2+2)*100 = 42.857...%Australia: 2/(3+2+2)*100 = 28.571...%Germany: 2/(3+2+2)*100 = 28.571...% USA: 43%Australia: 29%Germany: 29%",How to deal with the sum of rounded percentage not being 100?
How can I find out what is causing my gem bundle to have a gem locked at an specific version?," I'm trying to specify a version of the thrift gem in my gem file. When I trying to run bundle install, I get this error: How can I find out what is causing it to be locked at the earlier version? Would it be in the requirements of another gem I have listed in the gem file?Or is it just being caused by the fact that the installed version is 0.5.0, and specifying a version in the gem file won't update an installed gem? <code>  gem 'thrift', ""~> 0.6.0"" You have requested: thrift ~> 0.6.0The bundle currently has thrift locked at 0.5.0.Try running `bundle update thrift`",How can I find out why a gem bundle has locked a gem at a specific version?
REGEX - Conditional regex," To match the following: I have the following regular expression: Is there a way to make the at optional? so if it's there great, if not, it still matches? <code>  On Mar 3, 2011 11:05 AM, ""mr person"" wrote: /(On.* (?:Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) \d{1,2}, [12]\d{3}.* at \d{1,2}:\d{1,2} (?:AM|PM),.*wrote:)/m",How do I make part of a regular expression optional in Ruby?
How do I do a conditional regular expression in Ruby?," To match the following: I have the following regular expression: Is there a way to make the at optional? so if it's there great, if not, it still matches? <code>  On Mar 3, 2011 11:05 AM, ""mr person"" wrote: /(On.* (?:Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) \d{1,2}, [12]\d{3}.* at \d{1,2}:\d{1,2} (?:AM|PM),.*wrote:)/m",How do I make part of a regular expression optional in Ruby?
cant include module in model, I'm using I have a method called alive in every model of my rails app: I don't want to copy this code in every model so I made a /lib/life_control.rb and in my model (for example client.rb) I wrote: and in my config/enviroment.rb I wrote this line: but now I get a no method error: what am I doing wrong? <code>  Ruby version 1.8.7Rails version 3.0.3 def alive where('deleter is null') end module LifeControl def alive where('deleter is null') end def dead where('deleter is not null') end end class Client < ActiveRecord::Base include LifeControl end require 'lib/life_control' NoMethodError inClientsController#indexundefined method `alive' for#<Class:0x10339e938>app/controllers/clients_controller.rb:10:in`index',Cannot include module in model
How do I turn on SQL debug logging for ActiveRecord in rspec tests?, I have some RSpec tests for my models and I would like to turn on SQL ActiveRecord logging just like I see in the Rails server mode. How to do that?I start my tests with Thanks <code>  RAILS_ENV=test bundle exec rspec my/test_spec.rb,How do I turn on SQL debug logging for ActiveRecord in RSpec tests?
What does it mean the presence of a *simbol near a function argument?," I am using Ruby on Rails 3 and I would like to know what means the presence of a * operator near a function argument and to understand its usages in others scenarios.Example scenario (this method was from the Ruby on Rails 3 framework): <code>  def find(*args) return to_a.find { |*block_args| yield(*block_args) } if block_given? options = args.extract_options! if options.present? apply_finder_options(options).find(*args) else case args.first when :first, :last, :all send(args.first) else find_with_ids(*args) end endend",What does the * (asterisk) symbol do near a function argument and how to use that in others scenarios?
What does it mean the presence of a *simbol near a function argument and how to use that in others scenarios?," I am using Ruby on Rails 3 and I would like to know what means the presence of a * operator near a function argument and to understand its usages in others scenarios.Example scenario (this method was from the Ruby on Rails 3 framework): <code>  def find(*args) return to_a.find { |*block_args| yield(*block_args) } if block_given? options = args.extract_options! if options.present? apply_finder_options(options).find(*args) else case args.first when :first, :last, :all send(args.first) else find_with_ids(*args) end endend",What does the * (asterisk) symbol do near a function argument and how to use that in others scenarios?
What does the * symbol do near a function argument and how to use that in others scenarios?," I am using Ruby on Rails 3 and I would like to know what means the presence of a * operator near a function argument and to understand its usages in others scenarios.Example scenario (this method was from the Ruby on Rails 3 framework): <code>  def find(*args) return to_a.find { |*block_args| yield(*block_args) } if block_given? options = args.extract_options! if options.present? apply_finder_options(options).find(*args) else case args.first when :first, :last, :all send(args.first) else find_with_ids(*args) end endend",What does the * (asterisk) symbol do near a function argument and how to use that in others scenarios?
Ruby - Difference between map and collect?," I have Googled this and got patchy / contradictory opinions - is there actually any difference between doing a map and doing a collect on an array in Ruby/Rails? The docs don't seem to suggest any, but are there perhaps differences in method or performance? <code> ",Difference between map and collect in Ruby?
How do I install SQlite3 for Ruby," I am new to programming and Ruby on Rails. Setting up my dev environment has been hell. My present issue is installing Sqlite 3.When I do I get I am using Ubuntu 10.10 <code>  $ bundle install Fetching source index for http://rubygems.org/Using rake (0.8.7) Using abstract (1.0.0) Using activesupport (3.0.1) Using builder (2.1.2) Using i18n (0.4.2) Using activemodel (3.0.1) Using erubis (2.6.6) Using rack (1.2.1) Using rack-mount (0.6.13) Using rack-test (0.5.7) Using tzinfo (0.3.24) Using actionpack (3.0.1) Using mime-types (1.16) Using polyglot (0.3.1) Using treetop (1.4.9) Using mail (2.2.15) Using actionmailer (3.0.1) Using arel (1.0.1) Using activerecord (3.0.1) Using activeresource (3.0.1) Using bundler (1.0.10) Using thor (0.14.6) Using railties (3.0.1) Using rails (3.0.1) Installing sqlite3 (1.3.3) with native extensions /home/oo/.rvm/rubies/ruby-1.9.2-p180/lib/ruby/site_ruby/1.9.1/rubygems/installer.rb:533:in `rescue in block in build_extensions': ERROR: Failed to build gem native extension. (Gem::Installer::ExtensionBuildError) /home/oo/.rvm/rubies/ruby-1.9.2-p180/bin/ruby extconf.rb checking for sqlite3.h... nosqlite3.h is missing. Try 'port install sqlite3 +universal'or 'yum install sqlite3-devel' and check your shared library search path (thelocation where your sqlite3 shared library is located).*** extconf.rb failed ***Could not create Makefile due to some reason, probably lack ofnecessary libraries and/or headers. Check the mkmf.log file for moredetails. You may need configuration options.Provided configuration options: --with-opt-dir --without-opt-dir --with-opt-include --without-opt-include=${opt-dir}/include --with-opt-lib --without-opt-lib=${opt-dir}/lib --with-make-prog --without-make-prog --srcdir=. --curdir --ruby=/home/oo/.rvm/rubies/ruby-1.9.2-p180/bin/ruby --with-sqlite3-dir --without-sqlite3-dir --with-sqlite3-include --without-sqlite3-include=${sqlite3-dir}/include --with-sqlite3-lib --without-sqlite3-lib=${sqlite3-dir}/libGem files will remain installed in /home/oo/.rvm/gems/ruby-1.9.2-p180@rails3tutorial/gems/sqlite3-1.3.3 for inspection.Results logged to /home/oo/.rvm/gems/ruby-1.9.2-p180@rails3tutorial/gems/sqlite3-1.3.3/ext/sqlite3/gem_make.out from /home/oo/.rvm/rubies/ruby-1.9.2-p180/lib/ruby/site_ruby/1.9.1/rubygems/installer.rb:511:in `block in build_extensions' from /home/oo/.rvm/rubies/ruby-1.9.2-p180/lib/ruby/site_ruby/1.9.1/rubygems/installer.rb:486:in `each' from /home/oo/.rvm/rubies/ruby-1.9.2-p180/lib/ruby/site_ruby/1.9.1/rubygems/installer.rb:486:in `build_extensions' from /home/oo/.rvm/rubies/ruby-1.9.2-p180/lib/ruby/site_ruby/1.9.1/rubygems/installer.rb:159:in `install' from /home/oo/.rvm/gems/ruby-1.9.2-p180@rails3tutorial/gems/bundler-1.0.10/lib/bundler/source.rb:96:in `install' from /home/oo/.rvm/gems/ruby-1.9.2-p180@rails3tutorial/gems/bundler-1.0.10/lib/bundler/installer.rb:55:in `block in run' from /home/oo/.rvm/gems/ruby-1.9.2-p180@rails3tutorial/gems/bundler-1.0.10/lib/bundler/spec_set.rb:12:in `block in each' from /home/oo/.rvm/gems/ruby-1.9.2-p180@rails3tutorial/gems/bundler-1.0.10/lib/bundler/spec_set.rb:12:in `each' from /home/oo/.rvm/gems/ruby-1.9.2-p180@rails3tutorial/gems/bundler-1.0.10/lib/bundler/spec_set.rb:12:in `each' from /home/oo/.rvm/gems/ruby-1.9.2-p180@rails3tutorial/gems/bundler-1.0.10/lib/bundler/installer.rb:44:in `run' from /home/oo/.rvm/gems/ruby-1.9.2-p180@rails3tutorial/gems/bundler-1.0.10/lib/bundler/installer.rb:8:in `install' from /home/oo/.rvm/gems/ruby-1.9.2-p180@rails3tutorial/gems/bundler-1.0.10/lib/bundler/cli.rb:226:in `install' from /home/oo/.rvm/gems/ruby-1.9.2-p180@rails3tutorial/gems/bundler-1.0.10/lib/bundler/vendor/thor/task.rb:22:in `run' from /home/oo/.rvm/gems/ruby-1.9.2-p180@rails3tutorial/gems/bundler-1.0.10/lib/bundler/vendor/thor/invocation.rb:118:in `invoke_task' from /home/oo/.rvm/gems/ruby-1.9.2-p180@rails3tutorial/gems/bundler-1.0.10/lib/bundler/vendor/thor.rb:246:in `dispatch' from /home/oo/.rvm/gems/ruby-1.9.2-p180@rails3tutorial/gems/bundler-1.0.10/lib/bundler/vendor/thor/base.rb:389:in `start' from /home/oo/.rvm/gems/ruby-1.9.2-p180@rails3tutorial/gems/bundler-1.0.10/bin/bundle:13:in `<top (required)>' from /home/oo/.rvm/gems/ruby-1.9.2-p180@rails3tutorial/bin/bundle:19:in `load' from /home/oo/.rvm/gems/ruby-1.9.2-p180@rails3tutorial/bin/bundle:19:in `<main>'",How do I install SQlite3 for Ruby on Rails while using RVM
Create a table in rails and add foreign key constrain," I have a table students with field ward_id and I have to create a table named guardian_users with fields id,ward_id,email,guardian_id,hashed_password etc.Now I have to add constraint foreign key. Any update/delete/edit/insertion in students should have same effect on guardian_users.How can I do that in rails 2.3.5?Table students exists but other one doesn't exist yet. <code> ",Create a table in rails and add foreign key constraint
Protect sensitive attributes w/ declarative_authorization," What's a cool way to protect attributes by role using declarative_authorization? For example, a user can edit his contact information but not his role. My first inclination was to create multiple controller actions for different scenarios. I quickly realized how unwieldy this could become as the number of protected attributes grows. Doing this for user role is one thing, but I can imagine multiple protected attributes. Adding a lot controller actions and routes doesn't feel right.My second inclination was to create permissions around specific sensitive attributes and then wrap the form elements with View hepers provided by declarative_authorizations. However, the model and controller aspect of this is a bit foggy in my mind. Suggestions would be awesome.Please advise on the best way to protect attributes by role using declarative_authorizations. <code> ",Protect sensitive attributes with declarative_authorization
.rotate equivalent in ruby 1.8.7," #rotate is a method of Array in Ruby 1.9. I want this functionality in Ruby 1.8.7. What is the ideal code? <code>  a = [ ""a"", ""b"", ""c"", ""d"" ]a.rotate #=> [""b"", ""c"", ""d"", ""a""]",Array#rotate equivalent in ruby 1.8.7
[Ruby] Default Ruby version on OSX Lion ? Still 1.8.x or 1.9.x ?, What's the default Ruby version on OSX Lion ? Still 1.8.x or 1.9.x ? <code> ,Default Ruby version on OSX Lion ? Still 1.8.x or 1.9.x ?
Ruby range step method equals very slow execution," I've got this block of code: Technically, the code works, outputting: But the execution time is complete rubbish! It takes approximately four seconds to compute each week.Is there some grotesque inefficiency that I'm missing in this code? It seems straight-forward enough.I'm running Ruby 1.8.7 with Rails 3.0.3. <code>  date_counter = Time.mktime(2011,01,01,00,00,00,""+05:00"")@weeks = Array.new(date_counter..Time.now).step(1.week) do |week| logger.debug ""WEEK: "" + week.inspect @weeks << weekend Sat Jan 01 00:00:00 -0500 2011Sat Jan 08 00:00:00 -0500 2011Sat Jan 15 00:00:00 -0500 2011etc.",Ruby's range step method causes very slow execution?
"How to extract orientation information from MOV videos created on the iPhone using ffmeg, ruby or objectivec?"," After surfing through tons of documentation on the web it seems that the iPhone always shoots the video at a 480x360 aspect ratio and applies a transformation matrix on the video track. (480x360 may change but its always the same for a given device)Here is a way of modifying the ffmpeg source within a iOS project and accessing the matrix http://www.seqoy.com/correct-orientation-for-iphone-recorded-movies-with-ffmpeg/Here is a cleaner way of finding the transformation matrix in iOS-4How to detect (iPhone SDK) if a video file was recorded in portrait orientation, or landscape.How can the orientation of the video be extracted in either of the options below - - iOS 3.2 - ffmpeg (through the command line server side) - ruby Any help will be appreciated. <code> ",How to extract orientation information from videos?
what is the difference between exit and exit! in ruby ?, What is the difference between exit and exit! in ruby? <code> ,what is the difference between exit and exit! in ruby?
How can i define/name a block in ruby?, Because the syntax is more concise. I there a way to do this without having to use def + end? <code>  numbers = 1..10print numbers.map {|x| x*x}# I want to do:square = {|x| x*x}print numbers.map square,How can I define/name a block in Ruby?
Handling an hash as a function argument," I am using Ruby on Rails 3 and I am trying to handle a hash as a function argument.For example, if I state a function this way: I would like to pass to the function_name a hash like and then use that inside the function. What is the best\common (Rails) way to do that?P.S.: I have seen the extract_option! method somewhere, but I don't know where I can find some documentation and whether I need that in order to accomplish what I aim. <code>  def function_name(options = {}) ...end {""key1""=>""value_1"", ""key2""=>""value2"", ""..."" => ""...""}",Handling a hash as a function argument
Deleting all records in a database, How do I delete all records in one of my database tables in a Ruby on Rails app? <code> ,Deleting all records in a database table
Deleting all records in a table, How do I delete all records in one of my database tables in a Ruby on Rails app? <code> ,Deleting all records in a database table
Rack::Test Cookie help," I'm trying to write RSpec tests for my Sinatra application using Rack::Test. I can't understand how I can use cookies. For example if my application set cookies (not via :session) how can I check whether that cookie is properly set? Also, how can I send requests with that cookie? <code> ",Using Cookies with Rack::Test
How to use the 'cookies.signed' method in a Rack middleware?," I am using Ruby on Rails 3 and I would like to use the cookies.signed method in a Rack middleware. I need that because I would like to authenticate a user directly in the middleware than of using a before_filter in the application_controller.rb file.For example, if I use that method in a controller this way: I get but if I use that in a Rack middleware (of the same application) this way: I get So, how can I make it possible to use that method in a middleware? How can I get the user id so that I can authenticate that?Maybe I have to include\extend, for example, the ActionDispatch... if so, how? <code>  cookies.signed[:user_id'] --- - 1 # This is the id of the current signed in user- a64ee3asdtjhcc7b35fcb280956be00ba27f94d48dfe4291c06db7d57577d5893 # This is the cookie salt request = Rack::Request.new(env)request.cookies.signed[:user_id'] NoMethodErrorundefined method `signed' for #<Hash:0x00000103333d40>",How to use cookies in a Rack middleware?
Unknown key(s): counter_cache," I get the error Unknown key(s): counter_cache when trying to implement a counter cache column in my RoR app.I implemented the model associations in this question: Model association questionHere's my migration: However, after watching http://media.railscasts.com/videos/023_counter_cache_column.mov I thought that maybe I had to move :counter_cache => true into the VideoVote model after belongs_to :video. However, when I do that, I get the error:wrong number of arguments (2 for 1)What am I doing wrong? <code>  class AddVideoVotesCountToVideos < ActiveRecord::Migration def self.up add_column :videos, :video_votes_count, :integer, :default => 0 Video.reset_column_information Video.find(:all).each do |p| p.update_attributes :videos_votes_count, p.video_votes.length end end def self.down remove_column :videos, :video_votes_count endend",Ruby on Rails counter cache error
Ruby daemons and JRuby - alternative options...," I have an app that I am migrating from Ruby to JRuby (due to need for better Web Service Security support via Java). One of the gems I use is daemons to create a background job.The issue is that it use fork+exec to create the background process, but thats a no-no with JRuby.So - is there an alternative gem/wrapper for creating background jobs?My current thoughts are to just call rake from a shell script and let the rake task run forever...Thanks in advance, Chris.UPDATEWe are currently using a couple of Java threading related wrappers, namely https://github.com/jmettraux/rufus-scheduler and https://github.com/philostler/acts_as_executor <code> ",Ruby daemons and JRuby - alternative options
Ruby Net::HTTP#set_debug_output security hole, There is a very useful method in Net::HTTP library that gives ability to debug HTTP requests.Here is what documentation says about that:set_debug_output(output)WARNING This method causes serious security hole. Never use this method in production code.Set an output stream for debugging.http://ruby-doc.org/stdlib/libdoc/net/http/rdoc/classes/Net/HTTP.html#M001371What security hole is mentioned here? <code> ,Why is Net::HTTP's set_debug_output dangerous if used in production?
Rails wraps fileds with errors by div," How can I stop Rails to change my code when validation isn't passed.Every time rails wraps my field with I can edit fields_with_error class which works, but it is hacky <code>  <div class='field_with_error'>...</div> .fields_with_error{ display: inline }",Rails wraps fields with errors by div
When to use rspec let()?," I tend to use before blocks to set instance variables. I then use those variables across my examples. I recently came upon let(). According to RSpec docs, it is used to ... to define a memoized helper method. The value will be cached across multiple calls in the same example but not across examples.How is this different from using instance variables in before blocks? And also when should you use let() vs before()? <code> ",When to use RSpec let()?
What is a simple / elegant way in Ruby to tell if a particular variable is a Hash or an Array?," To check what @some_var is, I am doing a I am sure there is a more elegant way to check if @some_var is a Hash or an Array. <code>  if @some_var.class.to_s == 'Hash' ",What is a elegant way in Ruby to tell if a variable is a Hash or an Array?
Unable to install mysql2 gem on windows 7 i am using ruby 1.9.2p136 (2010-12-25) [i386-mingw32]," I am getting the following error message while installing, let me know if I need to post more details. I followed instructions from the following location: https://github.com/oneclick/rubyinstaller/wiki/Development-KitI am using ruby 1.9.2p136 (2010-12-25) [i386-mingw32].Here is what I get: <code>  E:\work_desk\trunk>gem install mysql2 -v 0.2.4Temporarily enhancing PATH to include DevKit...Building native extensions. This could take a while...ERROR: Error installing mysql2: ERROR: Failed to build gem native extension.C:/Ruby192/bin/ruby.exe extconf.rbchecking for rb_thread_blocking_region()... yeschecking for main() in -llibmysql... no*** extconf.rb failed ***Could not create Makefile due to some reason, probably lack ofnecessary libraries and/or headers. Check the mkmf.log file for moredetails. You may need configuration options.Provided configuration options: --with-opt-dir --without-opt-dir --with-opt-include --without-opt-include=${opt-dir}/include --with-opt-lib --without-opt-lib=${opt-dir}/lib --with-make-prog --without-make-prog --srcdir=. --curdir --ruby=C:/Ruby192/bin/ruby --with-mysql-dir --without-mysql-dir --with-mysql-include --without-mysql-include=${mysql-dir}/include --with-mysql-lib --without-mysql-lib=${mysql-dir}/lib --with-libmysqllib --without-libmysqllibGem files will remain installed in C:/Ruby192/lib/ruby/gems/1.9.1/gems/mysql2-0.2.4 for inspection.Results logged to C:/Ruby192/lib/ruby/gems/1.9.1/gems/mysql2-0.2.4/ext/mysql2/gem_make.out",Unable to install MySQL2 gem on Windows 7
Unable to install mysql2 gem on windows 7," I am getting the following error message while installing, let me know if I need to post more details. I followed instructions from the following location: https://github.com/oneclick/rubyinstaller/wiki/Development-KitI am using ruby 1.9.2p136 (2010-12-25) [i386-mingw32].Here is what I get: <code>  E:\work_desk\trunk>gem install mysql2 -v 0.2.4Temporarily enhancing PATH to include DevKit...Building native extensions. This could take a while...ERROR: Error installing mysql2: ERROR: Failed to build gem native extension.C:/Ruby192/bin/ruby.exe extconf.rbchecking for rb_thread_blocking_region()... yeschecking for main() in -llibmysql... no*** extconf.rb failed ***Could not create Makefile due to some reason, probably lack ofnecessary libraries and/or headers. Check the mkmf.log file for moredetails. You may need configuration options.Provided configuration options: --with-opt-dir --without-opt-dir --with-opt-include --without-opt-include=${opt-dir}/include --with-opt-lib --without-opt-lib=${opt-dir}/lib --with-make-prog --without-make-prog --srcdir=. --curdir --ruby=C:/Ruby192/bin/ruby --with-mysql-dir --without-mysql-dir --with-mysql-include --without-mysql-include=${mysql-dir}/include --with-mysql-lib --without-mysql-lib=${mysql-dir}/lib --with-libmysqllib --without-libmysqllibGem files will remain installed in C:/Ruby192/lib/ruby/gems/1.9.1/gems/mysql2-0.2.4 for inspection.Results logged to C:/Ruby192/lib/ruby/gems/1.9.1/gems/mysql2-0.2.4/ext/mysql2/gem_make.out",Unable to install MySQL2 gem on Windows 7
Creating a loop in ruby on rails view," I have a variable ""x"" in my view. I need to display some code ""x"" number of times.I basically want to set up a loop like this: Is there a way to do this? <code>  for i = 1 to x do something on (i)end",How to create an integer-for-loop in Ruby?
Customizing vim for working on Rails and most useful commands," I have got Mac on work, Ubuntu on my notebook, CentOS on my server, Windows at my girlfriend place and my VM. I used to work on gMate (Ubuntu) that is very good and not far from TextMate (on my Mac), e.texteditor (Windows) and nano on CentOs. Now I want to install one editor for all my environments. I can choose vim or emacs. I think vim is more simple to manage :).I know that there are a bunch of rails castomizations (plugins): from Akita, scrooloose, Pope etc. I've tasted all of them sometime ago. All of them was buggy (I think the problem is in my hands).So what I really need now is to choose one plugin which is simple to install. And second big deal is set of your favorite vim commands like:Open folder as project (and open the folder as project and exclude some subfolders from public dir)Fast open file from my projectOpen reffering controller/model/helper/etcExtract partialUsing snippetsCode autocompleteRails console / Terminal / Git supportWorking with tabsand other useful stuff from *Mates.And I want to set vim face: like file manager on the left, console on the bottom etc. What should I do for it.After bounty: Thanks to everybody! Going to win the vim! <code> ",vim and Ruby on Rails
ruby Nokogiri xpath get content of node," I have code like this: How do I get the content of the node instead of something like this: <code>  @doc = Nokogiri::HTML(open(url)@doc.xpath(query).each do |html| puts html # how get content of a nodeend <li class=""stat"">",How to get the content of an XML node using XPath and Nokogiri
"Rails - in Rails Console, when you save and get false, How can you out why?"," In Rails Console, I'm creating a record and then entering @record.save and I get false but I can't figure out why? Is there a way in Rails C to output why the save failed?Thanks <code> ","Rails - in Rails Console, when you save and get false, How can you find out why?"
Because some times it helps - Dynamic Variable Scoping in Ruby 1.9," I'm interested in using dynamic (as opposed to lexical) scoped variables in Ruby.It's seems there isn't a direct built-in way, as with let in Lisp. One possible way to do dynamic scoped variable is suggested by Christian Neukirchen. He creates a ""thread local hash"" in his Dynamic class. I wasn't too crazy about that.Then I remembered that Ruby 1.9 has a tap method. I see a lot of people using tap to print debugging values in a chain of commands. I think it can be used to very nicely mimic a dynamically scoped variable.Below is an an example of a situation in which one would want to use a dynamical scoped variable, and a solution using tap.If I had a blog to post this on, and get some feedback, I would do it there. Instead I come to S/O for criticism of this idea. Post your critique, I'll give the correct answer to the one with the most upvotes.SituationYou have an ActiveRecord object representing an Account, each account has_many Transactions. A Transaction has two attributes:descriptionamountYou want to find the sum of all transactions on the account, keeping in mind that amount can be either nil or a Float (no you can't critique that).Your first idea is: This bombs the first time you have a nil amount: Clean SolutionUse tap to temporarily define amount = 0. We only want this to be temporary in case we forget to set it back and save the transaction with the 0 value still in place. Since the assignment-to-zero-if-nil of amount is within the tap bock, we don't have to worry about forgetting to set it back to nil.What are your thoughts? <code>  def account_value transactions.inject(0){|acum, t| acum += t.amount}end TypeError: nil can't be coerced into Fixnum def account_value transactions.inject(0){|acm, t| t.amount.tap{|amount| amount ||=0; acm+=amount}; acm}end",Dynamic Variable Scoping in Ruby 1.9
(Very) simple ruby misunderstandings.," I've recently started coding Ruby and I'm having a mis-understanding with block parameters.Take the following code for example: I understand the general hash functionality, however I don't understand how value and key are set to anything. They are specified as parameters in the block, but the hash is never associated in any way with these parameters. <code>  h = { # A hash that maps number names to digits:one => 1, # The ""arrows"" show mappings: key=>value:two => 2 # The colons indicate Symbol literals}h[:one] # => 1. Access a value by keyh[:three] = 3 # Add a new key/value pair to the hashh.each do |key,value| # Iterate through the key/value pairs print ""#{value}:#{key}; "" # Note variables substituted into stringend # Prints ""1:one; 2:two; 3:three; """,How does iteration work in Ruby?
How can I generate a dynamic tag with Nokogirl::XML::Builder?," I am looping through a set of tag names in an array, and I want to print each one using builder without resorting to the manual XML of the ""<<"" method.I thought that: would do it, but it just creates tags with the name ""tag"", and puts the tag variable as the text value of the element.Can anyone help? This seems like it should be relatively simple, I have just had trouble finding the answer on search engines. I am probably not asking the question the right way. <code>  builder = Nokogiri::XML::Builder.new do |xml| for tag in tags xml.tag! tag, someval endend",How can I generate a dynamic tag with Nokogiri::XML::Builder?
What does the equals symbol mean after a method definition?," I saw this in a screencast and was just wondering what the '=' symbol does in this case. I would understand if it were something like this - The above (second code snippet) means setting nil as the default value of the tokens parameter. However, in the first code snippet, '=' is outside the brackets. <code>  def express_token=(token)...end def express_token(token = nil) ",What does the equal ('=') symbol do when put after the method name in a method definition?
token_authentication using devise in rails 3, I just created a sample application with devise plugin installed. I have :token_authenticatable in my user model but for some reason when I create a user it creates it with authentication_token column as NULL. It looks like you need to set u.ensure_authentication_token! when creating a new user to generate a token.Am I missing something or I need to override devise's code? <code> ,Devise: authentication_token column in user model is null
Installing openssl on Ubuntu for Rails dev," I am running the latest RVM on Ubuntu 10.10 and I managed to get most of the development environment running, except for OpenSSL.When I try to install the package I get the following error: It seems that the original downloaded file is corrupt when I get it via RVM. So, I downloaded and unpacked it to ~/.rvm/src/openssl0.9.8 and the first error is gone (error running tar zxf), but I still get the other ones.Edit: my Ruby version, if anyone cares, is: <code>  $ rvm package install openssl > errorERROR: Error running 'tar zxf /home/ruby/.rvm/archives/openssl-0.9.8n.tar.gz -C /home/ruby/.rvm/src', please read /home/ruby/.rvm/log/openssl/extract.logERROR: Error running './config -I/home/ruby/.rvm/usr/include -L/home/ruby/.rvm/usr/lib --prefix=/home/ruby/.rvm/usr zlib no-asm no-krb5 shared ', please read /home/ruby/.rvm/log/openssl/configure.logERROR: Error running '/usr/bin/make ', please read /home/ruby/.rvm/log/openssl/make.logERROR: Error running '/usr/bin/make install', please read /home/ruby/.rvm/log/openssl /make.install.log $ ruby -vruby 1.9.2p180 (2011-02-18 revision 30909) [x86_64-linux]",Installing OpenSSL on Ubuntu for Rails development?
Finding occurances in a string in Ruby," I'm looking for the Ruby method (1.9...) that can help me find the number of occurrences of a character in a string. I'm looking for all occurrences, not just the first one.For example: ""Melanie is a noob""There are two occurrences of the letter 'a'.What would be the Ruby method I could use in order to find this?I've been using Ruby-doc.org as a reference and the scan method in the String: class caught my eye. The wording is a bit difficult for me to understand, so I don't really grasp the concept of scan.Edit: I was able to solve this using scan. I shared in a video how I achieved it. <code> ",Finding # occurrences of a character in a string in Ruby
Finding occurrences in a string in Ruby," I'm looking for the Ruby method (1.9...) that can help me find the number of occurrences of a character in a string. I'm looking for all occurrences, not just the first one.For example: ""Melanie is a noob""There are two occurrences of the letter 'a'.What would be the Ruby method I could use in order to find this?I've been using Ruby-doc.org as a reference and the scan method in the String: class caught my eye. The wording is a bit difficult for me to understand, so I don't really grasp the concept of scan.Edit: I was able to solve this using scan. I shared in a video how I achieved it. <code> ",Finding # occurrences of a character in a string in Ruby
Finding occurrences of a character in a string with Ruby," I'm looking for the Ruby method (1.9...) that can help me find the number of occurrences of a character in a string. I'm looking for all occurrences, not just the first one.For example: ""Melanie is a noob""There are two occurrences of the letter 'a'.What would be the Ruby method I could use in order to find this?I've been using Ruby-doc.org as a reference and the scan method in the String: class caught my eye. The wording is a bit difficult for me to understand, so I don't really grasp the concept of scan.Edit: I was able to solve this using scan. I shared in a video how I achieved it. <code> ",Finding # occurrences of a character in a string in Ruby
Installing mysql2 gem Ruby on Rails problem Mac OSX 10.6," I am having a problem installing the mysql2 gem.This comes up when I do gem install mysql2: Also when I use rails server this comes up:  <code>  Marks-MacBook-Pro:~ Mark$ gem install mysql2Building native extensions. This could take a while...ERROR: Error installing mysql2:ERROR: Failed to build gem native extension./Users/useruser/.rvm/rubies/ruby-1.9.2-p136/bin/ruby extconf.rbchecking for rb_thread_blocking_region()... yeschecking for mysql_query() in -lmysqlclient... nochecking for main() in -lm... yeschecking for mysql_query() in -lmysqlclient... nochecking for main() in -lz... yeschecking for mysql_query() in -lmysqlclient... nochecking for main() in -lsocket... nochecking for mysql_query() in -lmysqlclient... nochecking for main() in -lnsl... nochecking for mysql_query() in -lmysqlclient... nochecking for main() in -lmygcc... nochecking for mysql_query() in -lmysqlclient... no*** extconf.rb failed ***Could not create Makefile due to some reason, probably lack ofnecessary libraries and/or headers. Check the mkmf.log file for moredetails. You may need configuration options.Provided configuration options: --with-opt-dir --without-opt-dir --with-opt-include --without-opt-include=${opt-dir}/include --with-opt-lib --without-opt-lib=${opt-dir}/lib --with-make-prog --without-make-prog --srcdir=. --curdir --ruby=/Users/useruser/.rvm/rubies/ruby-1.9.2-p136/bin/ruby --with-mysql-config --without-mysql-config --with-mysql-dir --without-mysql-dir --with-mysql-include --without-mysql-include=${mysql-dir}/include --with-mysql-lib --without-mysql-lib=${mysql-dir}/lib --with-mysqlclientlib --without-mysqlclientlib --with-mlib --without-mlib --with-mysqlclientlib --without-mysqlclientlib --with-zlib --without-zlib --with-mysqlclientlib --without-mysqlclientlib --with-socketlib --without-socketlib --with-mysqlclientlib --without-mysqlclientlib --with-nsllib --without-nsllib --with-mysqlclientlib --without-mysqlclientlib --with-mygcclib --without-mygcclib --with-mysqlclientlib --without-mysqlclientlibGem files will remain installed in /Users/useruser/.rvm/gems/ruby-1.9.2-p136/gems/mysql2-0.2.6 for inspection.Results logged to /Users/useruser/.rvm/gems/ruby-1.9.2-p136/gems/mysql2-0.2.6/ext/mysql2/gem_make.out Could not find gem 'mysql2 (>= 0, runtime)' in any of the gem sources listed in your Gemfile.",Installing mysql2 gem for Ruby on Rails with Mac OSX 10.6
Parsing a string in ruby," I have a string that I want to parse in Ruby: Is there an easy way to extract the data? <code>  string = '{""desc"":{""someKey"":""someValue"",""anotherKey"":""value""},""main_item"":{""stats"":{""a"":8,""b"":12,""c"":10}}}'",Parsing a JSON string in Ruby
Parsing a JSON string in ruby," I have a string that I want to parse in Ruby: Is there an easy way to extract the data? <code>  string = '{""desc"":{""someKey"":""someValue"",""anotherKey"":""value""},""main_item"":{""stats"":{""a"":8,""b"":12,""c"":10}}}'",Parsing a JSON string in Ruby
Parsing an RSS item that has a colon in the tag with Ruby," I'm trying to parse the info from an RSS feed that has this tag structure: using the built in Ruby RSS library. Obviously, doing item.dc:subject is throwing errors, but I can't figure out any way to pull out that info. Is there any way to get this to work? Or is it possible with a different RSS library? <code>  <dc:subject>foo bar</dc:subject>",Parsing an RSS item that has a colon in the tag with Ruby?
additional error with ruby-1.9.2, When I add 0.1+0.2 I am getting 0.30000000000000004 but when I add the same number in ruby 1.8.7 I am getting the correct answer 0.3. I get 0.3 by rounding but I just want to get 0.3 on ruby 1.9.2 by adding 0.1 and 0.2 <code> ,Addition error with ruby-1.9.2
ruby hash to javascript, I have a Ruby hash which is passed to a hidden field. How do I extract this hash into JavaScript arrays that I can work with? I need to access the key/value pairs in JavaScript. <code> ,Ruby hash to JavaScript
ruby regex to remove non letters," I'm trying to remove non-letters from a string. Would this do it: <code>  c = o.replace(o.gsub!(/\W+/, ''))",Regex to remove non letters
stack level too deep error," I'm having a stack level too deep error using Ruby 1.8.7 with Rails3.0.4 and with the rails console I performed the following commands. Here is the object that is having issues.. <code>  leo%>rails consoleLoading development environment (Rails 3.0.4)ruby-1.8.7-head > leo = Organization.find(1)SystemStackError: stack level too deepfrom /app/models/organization.rb:105:in `parents' class Organization < ActiveRecord::Base has_many :group_organizations, :dependent =>:delete_all has_many :groups, :through => :group_organizations has_many :orders has_many :product_contracts has_many :people accepts_nested_attributes_for :people has_many :addresses accepts_nested_attributes_for :addresses has_many :organizations has_many :departments has_many :organization_credits has_many :documents validates_presence_of :name def self.parents @organizations = Organization.where(""is_company = ?"",true) #@organization_parents = [] select_choice = I18n.t(""select"") + "" ""+ I18n.t(""segments.description"") @organization_parents = [select_choice] for organization in @organizations @organization_parents << [organization.name, organization.id] end return @organization_parents end",Stack level too deep error in Ruby on Rails
ruby split problem," I am doing: Result: What is the problem here? how can i get what i expected. <code>  ""b::::c:::"".split(':') [""b"", """", """", """", ""c"", """", """"] # expect[""b"", """", """", """", ""c""] # actual",How do I avoid trailing empty items being removed when splitting strings?
Split problem in Ruby," I am doing: Result: What is the problem here? how can i get what i expected. <code>  ""b::::c:::"".split(':') [""b"", """", """", """", ""c"", """", """"] # expect[""b"", """", """", """", ""c""] # actual",How do I avoid trailing empty items being removed when splitting strings?
Split string in Ruby - How do I avoid trailing empty items being removed," I am doing: Result: What is the problem here? how can i get what i expected. <code>  ""b::::c:::"".split(':') [""b"", """", """", """", ""c"", """", """"] # expect[""b"", """", """", """", ""c""] # actual",How do I avoid trailing empty items being removed when splitting strings?
Hoe to Set the Content Type in a ActionController::TestCase request," I was trying to perform a get in my TestCase like this: Though, it fails with a: Despite that in my controller I have: How the hell should I code the intended request on the TestCase? When I request alarm_events.json in the browser it works fine.Thanks <code>  request.env['CONTENT_TYPE'] = 'application/json'get :index,:application_name=>""Heka"" ActionView::MissingTemplate: Missing template alarm_events/index with {:handlers=>[:builder, :haml, :erb, :rjs, :rhtml, :rxml], :locale=>[:en, :en], :formats=>[:html] respond_to :html, :jsondef index @alarm_events=[...] respond_with @alarm_events do |format| format.json{ render :json=>@alarm_events.map{|e| e.to_portal_representation}.to_json, :content_type=>'application/json' } end end",How to Set the Content Type in a ActionController::TestCase request
How to group by count in array without using loop.," How can I count the array by group value with sorting? I need the following output: <code>  arr = [1,2,1,3,5,2,4] x[1] = 2 x[2] = 2 x[3] = 1 x[4] = 1 x[5] = 1",How to group by count in array without using loop
"That ruby %w ""thing"""," I'm referring to the %w operator/constructor/whatever you may call it, used like this: I have several questions about it:What is the proper name of that %w ""thing""? Operator? Literal? Constructor?Does it matter whether I use {}s instead of []s?Are there any other things like this (for example, one that gives you an array of symbols instead)?Can they be nested (one %w inside another %w, in order to create nested arrays)?Where can I find documentation about it? <code>  %w{ foo bar baz }=> [""foo"", ""bar"", ""baz""]","What is the %w ""thing"" in ruby?"
"in ruby, how sort an array of hashes?"," I have an array, each of whose elements is a hash with three key/value pairs: I'd like to sort the data by zip so all the phones in the same area are together. Does Ruby have an easy way to do that? Can will_paginate paginate data in an array? <code>  :phone => ""2130001111"", :zip => ""12345"", :city => ""sometown""",How to sort an array of hashes in ruby
How to sort an array of hashes," I have an array, each of whose elements is a hash with three key/value pairs: I'd like to sort the data by zip so all the phones in the same area are together. Does Ruby have an easy way to do that? Can will_paginate paginate data in an array? <code>  :phone => ""2130001111"", :zip => ""12345"", :city => ""sometown""",How to sort an array of hashes in ruby
Bug with Ruby Hash or I misunderstood something?," I was adding items to a Hash key. I was expecting to get a structure like this: I used an Array to initialize the Hash. Then started using it: But it turns out: <code>  { 'a' : [1], 'b' : [2, 3, 4]} irb> hash = Hash.new([]) => {} irb> hash['a'] << 1 => [1] irb> hash['b'] << 2 => [1, 2] irb> hash => {}",Can't use an array as default values for Ruby Hash?
Merge array of hashes to get arrays of values," This is the opposite of Turning a Hash of Arrays into an Array of Hashes in Ruby.Elegantly and/or efficiently turn an array of hashes into a hash where the values are arrays of all values: This terse code almost works, but fails to create an array when there are no duplicates: This code works, but can you write a better version? Solutions that only work in Ruby 1.9 are acceptable, but should be noted as such.Here are the results of benchmarking the various answers below (and a few more of my own), using three different arrays of hashes:one where each hash has distinct keys, so no merging ever occurs:[{:a=>1}, {:b=>2}, {:c=>3}, {:d=>4}, {:e=>5}, {:f=>6}, {:g=>7}, ...]one where every hash has the same key, so maximum merging occurs:[{:a=>1}, {:a=>2}, {:a=>3}, {:a=>4}, {:a=>5}, {:a=>6}, {:a=>7}, ...]and one that is a mix of unique and shared keys:[{:c=>1}, {:d=>1}, {:c=>2}, {:f=>1}, {:c=>1, :d=>1}, {:h=>1}, {:c=>3}, ...] The fastest code is this method that I added: I've accepted ""glenn mcdonald's answer"" as it was competitive in terms of speed, reasonably terse, but (most importantly) because it pointed out the danger of using a Hash with a self-modifying default proc for convenient construction, as this may introduce bad changes when the user is indexing it later on.Finally, here's the benchmark code, in case you want to run your own comparisons: <code>  hs = [ { a:1, b:2 }, { a:3, c:4 }, { b:5, d:6 }]collect_values( hs )#=> { :a=>[1,3], :b=>[2,5], :c=>[4], :d=>[6] } def collect_values( hashes ) hashes.inject({}){ |a,b| a.merge(b){ |_,x,y| [*x,*y] } }endcollect_values( hs )#=> { :a=>[1,3], :b=>[2,5], :c=>4, :d=>6 } def collect_values( hashes ) # Requires Ruby 1.8.7+ for Object#tap Hash.new{ |h,k| h[k]=[] }.tap do |result| hashes.each{ |h| h.each{ |k,v| result[k]<<v } } endend user system total realPhrogz 2a 0.577000 0.000000 0.577000 ( 0.576000)Phrogz 2b 0.624000 0.000000 0.624000 ( 0.620000)Glenn 1 0.640000 0.000000 0.640000 ( 0.641000)Phrogz 1 0.671000 0.000000 0.671000 ( 0.668000)Michael 1 0.702000 0.000000 0.702000 ( 0.700000)Michael 2 0.717000 0.000000 0.717000 ( 0.726000)Glenn 2 0.765000 0.000000 0.765000 ( 0.764000)fl00r 0.827000 0.000000 0.827000 ( 0.836000)sawa 0.874000 0.000000 0.874000 ( 0.868000)Tokland 1 0.873000 0.000000 0.873000 ( 0.876000)Tokland 2 1.077000 0.000000 1.077000 ( 1.073000)Phrogz 3 2.106000 0.093000 2.199000 ( 2.209000) def collect_values(hashes) {}.tap{ |r| hashes.each{ |h| h.each{ |k,v| (r[k]||=[]) << v } } }end require 'prime' # To generate the third hashrequire 'facets' # For tokland1's map_byAZSYMBOLS = (:a..:z).to_aTESTS = { '26 Distinct Hashes' => AZSYMBOLS.zip(1..26).map{|a| Hash[*a] }, '26 Same-Key Hashes' => ([:a]*26).zip(1..26).map{|a| Hash[*a] }, '26 Mixed-Keys Hashes' => (2..27).map do |i| factors = i.prime_division.transpose Hash[AZSYMBOLS.values_at(*factors.first).zip(factors.last)] end}def phrogz1(hashes) Hash.new{ |h,k| h[k]=[] }.tap do |result| hashes.each{ |h| h.each{ |k,v| result[k]<<v } } endenddef phrogz2a(hashes) {}.tap{ |r| hashes.each{ |h| h.each{ |k,v| (r[k]||=[]) << v } } }enddef phrogz2b(hashes) hashes.each_with_object({}){ |h,r| h.each{ |k,v| (r[k]||=[]) << v } }enddef phrogz3(hashes) result = hashes.inject({}){ |a,b| a.merge(b){ |_,x,y| [*x,*y] } } result.each{ |k,v| result[k] = [v] unless v.is_a? Array }enddef glenn1(hs) hs.reduce({}) {|h,pairs| pairs.each {|k,v| (h[k] ||= []) << v}; h}enddef glenn2(hs) hs.map(&:to_a).flatten(1).reduce({}) {|h,(k,v)| (h[k] ||= []) << v; h}enddef fl00r(hs) h = Hash.new{|h,k| h[k]=[]} hs.map(&:to_a).flatten(1).each{|v| h[v[0]] << v[1]} henddef sawa(a) a.map(&:to_a).flatten(1).group_by{|k,v| k}.each_value{|v| v.map!{|k,v| v}}enddef michael1(hashes) h = Hash.new{|h,k| h[k]=[]} hashes.each_with_object(h) do |h, result| h.each{ |k, v| result[k] << v } endenddef michael2(hashes) h = Hash.new{|h,k| h[k]=[]} hashes.inject(h) do |result, h| h.each{ |k, v| result[k] << v } result endenddef tokland1(hs) hs.map(&:to_a).flatten(1).map_by{ |k, v| [k, v] }enddef tokland2(hs) Hash[hs.map(&:to_a).flatten(1).group_by(&:first).map{ |k, vs| [k, vs.map{|o|o[1]}] }]endrequire 'benchmark'N = 10_000Benchmark.bm do |x| x.report('Phrogz 2a'){ TESTS.each{ |n,h| N.times{ phrogz2a(h) } } } x.report('Phrogz 2b'){ TESTS.each{ |n,h| N.times{ phrogz2b(h) } } } x.report('Glenn 1 '){ TESTS.each{ |n,h| N.times{ glenn1(h) } } } x.report('Phrogz 1 '){ TESTS.each{ |n,h| N.times{ phrogz1(h) } } } x.report('Michael 1'){ TESTS.each{ |n,h| N.times{ michael1(h) } } } x.report('Michael 2'){ TESTS.each{ |n,h| N.times{ michael2(h) } } } x.report('Glenn 2 '){ TESTS.each{ |n,h| N.times{ glenn2(h) } } } x.report('fl00r '){ TESTS.each{ |n,h| N.times{ fl00r(h) } } } x.report('sawa '){ TESTS.each{ |n,h| N.times{ sawa(h) } } } x.report('Tokland 1'){ TESTS.each{ |n,h| N.times{ tokland1(h) } } } x.report('Tokland 2'){ TESTS.each{ |n,h| N.times{ tokland2(h) } } } x.report('Phrogz 3 '){ TESTS.each{ |n,h| N.times{ phrogz3(h) } } }end",How to merge array of hashes to get hash of arrays of values
Merge array of hashes to get hash of arrays of values," This is the opposite of Turning a Hash of Arrays into an Array of Hashes in Ruby.Elegantly and/or efficiently turn an array of hashes into a hash where the values are arrays of all values: This terse code almost works, but fails to create an array when there are no duplicates: This code works, but can you write a better version? Solutions that only work in Ruby 1.9 are acceptable, but should be noted as such.Here are the results of benchmarking the various answers below (and a few more of my own), using three different arrays of hashes:one where each hash has distinct keys, so no merging ever occurs:[{:a=>1}, {:b=>2}, {:c=>3}, {:d=>4}, {:e=>5}, {:f=>6}, {:g=>7}, ...]one where every hash has the same key, so maximum merging occurs:[{:a=>1}, {:a=>2}, {:a=>3}, {:a=>4}, {:a=>5}, {:a=>6}, {:a=>7}, ...]and one that is a mix of unique and shared keys:[{:c=>1}, {:d=>1}, {:c=>2}, {:f=>1}, {:c=>1, :d=>1}, {:h=>1}, {:c=>3}, ...] The fastest code is this method that I added: I've accepted ""glenn mcdonald's answer"" as it was competitive in terms of speed, reasonably terse, but (most importantly) because it pointed out the danger of using a Hash with a self-modifying default proc for convenient construction, as this may introduce bad changes when the user is indexing it later on.Finally, here's the benchmark code, in case you want to run your own comparisons: <code>  hs = [ { a:1, b:2 }, { a:3, c:4 }, { b:5, d:6 }]collect_values( hs )#=> { :a=>[1,3], :b=>[2,5], :c=>[4], :d=>[6] } def collect_values( hashes ) hashes.inject({}){ |a,b| a.merge(b){ |_,x,y| [*x,*y] } }endcollect_values( hs )#=> { :a=>[1,3], :b=>[2,5], :c=>4, :d=>6 } def collect_values( hashes ) # Requires Ruby 1.8.7+ for Object#tap Hash.new{ |h,k| h[k]=[] }.tap do |result| hashes.each{ |h| h.each{ |k,v| result[k]<<v } } endend user system total realPhrogz 2a 0.577000 0.000000 0.577000 ( 0.576000)Phrogz 2b 0.624000 0.000000 0.624000 ( 0.620000)Glenn 1 0.640000 0.000000 0.640000 ( 0.641000)Phrogz 1 0.671000 0.000000 0.671000 ( 0.668000)Michael 1 0.702000 0.000000 0.702000 ( 0.700000)Michael 2 0.717000 0.000000 0.717000 ( 0.726000)Glenn 2 0.765000 0.000000 0.765000 ( 0.764000)fl00r 0.827000 0.000000 0.827000 ( 0.836000)sawa 0.874000 0.000000 0.874000 ( 0.868000)Tokland 1 0.873000 0.000000 0.873000 ( 0.876000)Tokland 2 1.077000 0.000000 1.077000 ( 1.073000)Phrogz 3 2.106000 0.093000 2.199000 ( 2.209000) def collect_values(hashes) {}.tap{ |r| hashes.each{ |h| h.each{ |k,v| (r[k]||=[]) << v } } }end require 'prime' # To generate the third hashrequire 'facets' # For tokland1's map_byAZSYMBOLS = (:a..:z).to_aTESTS = { '26 Distinct Hashes' => AZSYMBOLS.zip(1..26).map{|a| Hash[*a] }, '26 Same-Key Hashes' => ([:a]*26).zip(1..26).map{|a| Hash[*a] }, '26 Mixed-Keys Hashes' => (2..27).map do |i| factors = i.prime_division.transpose Hash[AZSYMBOLS.values_at(*factors.first).zip(factors.last)] end}def phrogz1(hashes) Hash.new{ |h,k| h[k]=[] }.tap do |result| hashes.each{ |h| h.each{ |k,v| result[k]<<v } } endenddef phrogz2a(hashes) {}.tap{ |r| hashes.each{ |h| h.each{ |k,v| (r[k]||=[]) << v } } }enddef phrogz2b(hashes) hashes.each_with_object({}){ |h,r| h.each{ |k,v| (r[k]||=[]) << v } }enddef phrogz3(hashes) result = hashes.inject({}){ |a,b| a.merge(b){ |_,x,y| [*x,*y] } } result.each{ |k,v| result[k] = [v] unless v.is_a? Array }enddef glenn1(hs) hs.reduce({}) {|h,pairs| pairs.each {|k,v| (h[k] ||= []) << v}; h}enddef glenn2(hs) hs.map(&:to_a).flatten(1).reduce({}) {|h,(k,v)| (h[k] ||= []) << v; h}enddef fl00r(hs) h = Hash.new{|h,k| h[k]=[]} hs.map(&:to_a).flatten(1).each{|v| h[v[0]] << v[1]} henddef sawa(a) a.map(&:to_a).flatten(1).group_by{|k,v| k}.each_value{|v| v.map!{|k,v| v}}enddef michael1(hashes) h = Hash.new{|h,k| h[k]=[]} hashes.each_with_object(h) do |h, result| h.each{ |k, v| result[k] << v } endenddef michael2(hashes) h = Hash.new{|h,k| h[k]=[]} hashes.inject(h) do |result, h| h.each{ |k, v| result[k] << v } result endenddef tokland1(hs) hs.map(&:to_a).flatten(1).map_by{ |k, v| [k, v] }enddef tokland2(hs) Hash[hs.map(&:to_a).flatten(1).group_by(&:first).map{ |k, vs| [k, vs.map{|o|o[1]}] }]endrequire 'benchmark'N = 10_000Benchmark.bm do |x| x.report('Phrogz 2a'){ TESTS.each{ |n,h| N.times{ phrogz2a(h) } } } x.report('Phrogz 2b'){ TESTS.each{ |n,h| N.times{ phrogz2b(h) } } } x.report('Glenn 1 '){ TESTS.each{ |n,h| N.times{ glenn1(h) } } } x.report('Phrogz 1 '){ TESTS.each{ |n,h| N.times{ phrogz1(h) } } } x.report('Michael 1'){ TESTS.each{ |n,h| N.times{ michael1(h) } } } x.report('Michael 2'){ TESTS.each{ |n,h| N.times{ michael2(h) } } } x.report('Glenn 2 '){ TESTS.each{ |n,h| N.times{ glenn2(h) } } } x.report('fl00r '){ TESTS.each{ |n,h| N.times{ fl00r(h) } } } x.report('sawa '){ TESTS.each{ |n,h| N.times{ sawa(h) } } } x.report('Tokland 1'){ TESTS.each{ |n,h| N.times{ tokland1(h) } } } x.report('Tokland 2'){ TESTS.each{ |n,h| N.times{ tokland2(h) } } } x.report('Phrogz 3 '){ TESTS.each{ |n,h| N.times{ phrogz3(h) } } }end",How to merge array of hashes to get hash of arrays of values
How to create a tagging system like on SO or Quora?," I want to create a tagging system like seen here on Stack Overflow or on Quora. It'll be its own model, and I'm planning on using this autocomplete plugin to help users find tags. I have a couple of questions:I want tags to be entirely user-generated. If a user inputs a new tag by typing it and pressing an ""Add"" button, then that tag is added to the db, but if a user types in an existing tag, then it uses that one. I'm thinking of using code like this: Am I on the right track?I'd like to implement something like on Stack Overflow or Quora such that when you click a tag from the suggested list or click an ""Add"" button, that tag gets added right above the text field with ajax. How would I go about implementing something like that?I know this is kind of an open-ended question. I'm not really looking for the exact code as much as a general nudge in the right direction. Of course, code examples wouldn't hurt :)Note I am NOT asking for help on how to set up the jQuery autocomplete plugin... I know how to do that. Rather, it seems like I'll have to modify the code in the plugin so that instead of the tags being added inside the text field, they are added above the text field. I'd appreciate any direction with this. <code>  def create@video.tags = find_or_create_by_name(@video.tags.name)end",How to create a tagging system like on Stack Overflow or Quora
Can't figure out floating point arithmetic in ruby, For example: but I expected 1.8. How can I get the correct decimal (non-integer) result? Why is it returning 1 at all? <code>  9 / 5 #=> 1,Why is division in Ruby returning an integer instead of decimal value?
Why is division in Ruby returning an integer (floating point arithmetic)?, For example: but I expected 1.8. How can I get the correct decimal (non-integer) result? Why is it returning 1 at all? <code>  9 / 5 #=> 1,Why is division in Ruby returning an integer instead of decimal value?
write to json file in correct format - Ruby," I am creating a hash in Ruby and want to write it to a JSON file, in the correct format. Here is my code: And here is the contents of the resulting file: I'm using Sinatra (don't know what version) and Ruby v 1.8.7.How can I write this to the file in the correct JSON format?  <code>  tempHash = { ""key_a"" => ""val_a"", ""key_b"" => ""val_b""}fJson = File.open(""public/temp.json"",""w"")fJson.write(tempHash)fJson.close key_aval_akey_bval_b",How to write to a JSON file in the correct format
How do I convert this string in an array of numbers?," My string: How can this become an array of separate numbers like : <code>  >> pp params[:value]""07016,07023,07027,07033,07036,07060,07062,07063,07065,07066,07076,07081,07083,07088,07090,07092,07201,07202,07203,07204,07205,07206,07208,07901,07922,07974,08812,07061,07091,07207,07902"" [""07016"", ""07023"", ""07033"" ... ]",Split a string into an array of numbers
How to modify a ruby gem, How can I modify an existing *.gem file? I want to modify a Rakefile in a gem so that it will be able to compile on Windows. <code> ,How to modify a Ruby gem
Ruby build dynamic hash," I'm trying to build a hash from a Model.This is the type of hash I want to build. I have tried so many ways now I'm just going around in circles.Here are just some of my poor attempts. Please can some advise.Thank You <code>  {""United Sates"" => ""us"", ""United Kingdom"" => ""uk"" .....} select = Array.newcountries.each do |country| # select.push({country.name => country.code }) # select[country.name][country.code]endh = {}countries.each do |c| # h[] = {c.name => c.code} # h[] ||= {} # h[][:name] = c.name # h[][:code] = c.code #h[r.grouping_id][:name] = r.name # h[r.grouping_id][:description] = r.descriptionend",Build hash from collection of ActiveRecord Models
How to execute Windows CLI commands in Ruby ?," I have a file located in the directory ""C:\Documents and Settings\test.exe"" but when I write the command `C:\Documents and Settings\test.exe in single qoutes(which I am not able to display in this box), used for executing the commands in Ruby, I am not able to do so and the error that I recieve is No file or Directory found. I have tried replacing ""\"" with ""//"" and ""\"" but nothing seems to work. I have also used system, IO.popen and exec commands but all efforts are in vain. Also exec commands makes the program to make an exit which I don't want to happen.Thanks in advance. <code> ",How to execute Windows CLI commands in Ruby?
"Different between rails send_data and send_file, with example", Which one is best for streaming and file downloads?Please provide examples. <code> ,What is the difference between send_data and send_file in Ruby on Rails?
"Difference between rails send_data and send_file, with example", Which one is best for streaming and file downloads?Please provide examples. <code> ,What is the difference between send_data and send_file in Ruby on Rails?
"Clean and clear Array#delete, but return the array?"," Is there a built-in method which performs the same function as Array#delete but returns self? I'd like to do it without using a block and clearer than an_ary.-([el]).I could monkeypatch one, but it seems like a ""compact with arguments"" method would be a relatively common desire? <code> ","Array#delete, but return the array?"
Question about 'mechanize'," I noticed that when I fetch a site that is not responding using Mechanize, it just keeps on waiting. How can I overcome this problem?  <code> ",What can I do about Mechanize waiting on an unresponsive web site?
What can I do about mechanize waiting on an unresponsive web site?," I noticed that when I fetch a site that is not responding using Mechanize, it just keeps on waiting. How can I overcome this problem?  <code> ",What can I do about Mechanize waiting on an unresponsive web site?
can i make ruby print the source code for a dynamic method?," I have investigated getting the source code of a method if it exists as a file, but without this file reference, is it possible to dynamically print a method's source code? It seems I can access the method signatures in the class with self.methods and each method's .arity. I believe the ri_for gem refers to the original source file. A better way to frame this question: If a class is extended at runtime, is its source safe from being investigated? Or is the ability to investigate limited to the method signature and the names of the instance variables, maybe the class variables? Edit: Solution I used: http://seattlerb.rubyforge.org/svn/ruby2ruby/1.2.1/lib/ruby2ruby.rb Paste this in somewhere and you can get a pretty good start on getting the source code out of a class defined at runtime. <code>  class Ruby2Ruby < SexpProcessor def self.translate(klass_or_str, method = nil) sexp = ParseTree.translate(klass_or_str, method) unifier = Unifier.new unifier.processors.each do |p| p.unsupported.delete :cfunc end sexp = unifier.process(sexp) self.new.process(sexp) end end class Module def to_ruby Ruby2Ruby.translate(self) end end ",Can I make ruby print the source code for a dynamic method?
RVM --default does not work (MacOSX)," After using Ruby and Rails for quite some time now, I wanted to try RVM. Everything works fine, except for one thing:In a freshly opened Terminal ruby points to the system's ruby, despite the fact, that I used the rvm --default command. Everything is fine after I call rvm reload I set up my .bash_profile as described in the documentation: That --default does not seem to work for me ... I'm using Mac OS X Snow Leopard (10.6.6) <code>  user@terra ~ $ ruby -vruby 1.8.7 (2010-08-16 patchlevel 302) [i686-darwin10]user@terra ~ $ which ruby/opt/local/bin/rubyuser@terra ~ $ rvm list ruby-1.8.7-p334 [ ]=> ruby-1.9.2-p180 [ ] user@terra ~ $ rvm reloaduser@terra ~ $ ruby -vruby 1.9.2p180 (2011-02-18 revision 30909) [x86_64-darwin10.7.1]tmangner@terra ~ $ which ruby/Users/user/.rvm/rubies/ruby-1.9.2-p180/bin/ruby [[ -s ""/Users/user/.rvm/scripts/rvm"" ]] && source ""/Users/user/.rvm/scripts/rvm"" user@terra ~ $ rvm use 1.9.2 --defaultUsing /Users/user/.rvm/gems/ruby-1.9.2-p180user@terra ~ $ rvm defaultuser@terra ~ $","How to use ""RVM --default"" on MacOSX"
"Why doesn't ""RVM --default"" work for me on MacOSX?"," After using Ruby and Rails for quite some time now, I wanted to try RVM. Everything works fine, except for one thing:In a freshly opened Terminal ruby points to the system's ruby, despite the fact, that I used the rvm --default command. Everything is fine after I call rvm reload I set up my .bash_profile as described in the documentation: That --default does not seem to work for me ... I'm using Mac OS X Snow Leopard (10.6.6) <code>  user@terra ~ $ ruby -vruby 1.8.7 (2010-08-16 patchlevel 302) [i686-darwin10]user@terra ~ $ which ruby/opt/local/bin/rubyuser@terra ~ $ rvm list ruby-1.8.7-p334 [ ]=> ruby-1.9.2-p180 [ ] user@terra ~ $ rvm reloaduser@terra ~ $ ruby -vruby 1.9.2p180 (2011-02-18 revision 30909) [x86_64-darwin10.7.1]tmangner@terra ~ $ which ruby/Users/user/.rvm/rubies/ruby-1.9.2-p180/bin/ruby [[ -s ""/Users/user/.rvm/scripts/rvm"" ]] && source ""/Users/user/.rvm/scripts/rvm"" user@terra ~ $ rvm use 1.9.2 --defaultUsing /Users/user/.rvm/gems/ruby-1.9.2-p180user@terra ~ $ rvm defaultuser@terra ~ $","How to use ""RVM --default"" on MacOSX"
Ruby: string.match(regex) vs regex.match(string), What's the difference between string.match(regex) and regex.match(string) in Ruby? What's the justification for having both those constructs in the language? <code> ,string.match(regex) vs regex.match(string)
Why is writing a C interface easier in Ruby than Perl?," According to the official ruby About page it's easier to extend Ruby with C than Perl. I'm not a (perl) XS guy, but I find it dirt simple to write something quick and simple with Inline::C, so why is it easier in Ruby? Writing C extensions in Ruby is easier than in Perl or Python, with a very elegant API for calling Ruby from C. This includes calls for embedding Ruby in software, for use as a scripting language. A SWIG interface is also available.Any further explanation from those that do more C extensions would be useful. <code> ",How is writing a C interface easier in Ruby than Perl?
How to flatten a array of array - but not all the way down," What's the best way to convert this into in ruby? flatten converts this all the way down to  <code>  [[[""Club three Team one"", 7800], [""Club three Team two"", 7801]], [], [[""Club four Team one"", 7807], [""Club four Team two"", 7808]], []] [[""Club three Team one"", 7800], [""Club three Team two"", 7801], [""Club four Team one"", 7807], [""Club four Team two"", 7808]] [""Club three Team one"", 7303, ""Club three Team two"", 7304, ""Club four Team one"", 7310, ""Club four Team two"", 7311]",How to flatten an array of arrays - but not all the way down
Ruby titlecase odd behavior," Why does the titlecase mess up the name? I have: and it turns it into: Why is there a space added to the last name?Basically I have this in my model: I am trying to make sure that all the names are titlecase in the DB, but in situtations with a camelcase name it fails. Any ideas how to fix this? <code>  John Mark McMillan >> ""john mark McMillan"".titlecase=> ""John Mark Mc Millan"" before_save :capitalize_namedef capitalize_name self.artist = self.artist.titlecaseend",Why does Rails titlecase add a space to a name?
Ruby regex oddity," I have an array of ~1200 ruby objects and I want to loop over them and delete the ones with names that contain words or parts of words.So I tried this: It works, except that it seems to miss some items with names that should match. If I run it again it finds a few more, and if I run it another time it finds a few more. It finds less each time, but I have to run it 3 times in order to delete everything. Why in the world is this happening? <code>  list.each do |item| if item.name =~ /cat|dog|rat/i puts item.name list.delete(item) endend",Deleting items from an array requires multiple passes to remove them all
What's the deal with current_page in Rails 3?," Has anybody experienced routes mysteriously becoming undetectable when using current_page? in Rails 3? Even with a fully generated scaffold complete with routes, a view, and a controller, I am getting a ""No route matches"" error.Here's the code: If I add a ""match"" command to routes.rb, it works fine, but why would I need to do that if the resources have already been created? What am I missing? <code>  if current_page?(:controller => 'users', :action => ""show"")","""No routes matches"" when using current_page in Rails 3"
Problem with Sinatra and session variables which are not being set," For some reason, session variables are not being set in my app. I am using Sinatra 1.2.1.Here is a piece of code: As you can see, session[:user] is not being set, or rather the session hash is being reset after each request. Does anybody know what is going on please? <code>  module GitWiki class App < Sinatra::Base configure do enable :sessions set :app_file, __FILE__ set :root, File.expand_path(File.join(File.dirname(__FILE__), '..', '..')) set :auth do |bool| condition do redirect '/login' unless logged_in? end end end helpers do def logged_in? not @user.nil? end end error PageNotFound do page = request.env[""sinatra.error""].name redirect ""/#{page}/edit"" end before do content_type ""text/html"", :charset => ""utf-8"" @user = session[:user] end get ""/login/?"" do erb :login end post ""/login"" do user = User.get if user.authenticate(params[:username], params[:password]) session[:user] = params[:username] p session # => {:user=>""root""} else # AZIZ! LIGHT! end redirect '/' end get ""/"" do p session # => {} redirect ""/"" + GitWiki.homepage end # ... endend",Sinatra and session variables which are not being set
How to specify local .gem file in my Gemfile?, I have a couple of gem files which I install via gem install xx.gem. Can I tell Bundler to use them? Or do I have to specify the source path? <code> ,How do I specify local .gem files in my Gemfile?
Rails slim template language javascript embed ruby code," One way: or: are there any better solutions for this? <code>  javascript_tag do == ""var all_product_ids = #{existing_ids.to_json};"" == ""var products_json = #{@filter.data.to_json};"" = %Q{var all_product_ids = #{existing_ids.to_json};var products_json = #{@filter.data.to_json};}","How to embed dynamic Ruby code to ""javascript"" section in Slim templates?"
What is the best way to smoke test a staging/production environment in Rails," First, the setup...I am currently developing a Rails 3 application on Mac OS X using Ruby 1.8.7 MRI, running tests and local dev against a MySQL database. I have 3 ""other"" non-local environments that we use at my company for every application called dev, tqa, and prod. These run in Tomcat using JRuby (1.8.7) with Oracle as the backend.As you can see, the environments are quite different, and we've run into some bugs on deployment to an Oracle/JRuby environment that don't exist locally (like date handling and specifying default schemas in Oracle).I love running something like Cucumber/Webrat/Capybara locally to hit every URL exposed in the app to make sure the basic stuff is working (ie; a smoke test). Ideally, it hits every url, and would do some simple things like entering data in forms and clicking on buttons, etc.Ideally, when I deploy to dev/tqa, I would run something similar, except pointed at the deployed app instead of the local application. Cucumber seems optimized to hit a locally running application and integrates well with Rails, but cannot run against what is for all intents an ""external"" application (or at least I can't find an easy way that actually works).Also, when I deploy to prod I'd like a similar suite of smoke tests to run, except it would not change the state of the current production database (ie, would just GET URLs).Something like Selenium could be used, I guess, but I'd really like to just run a rake task and get back the results like I do with Cucumber.Is there any Rails/Ruby way to go about doing this, or does everyone else just roll their own solution using wget or Selenium?A similar question was asked here: Automatically smoke test all webpages in application, after deploymentI'm not sure that the question is exactly what I have in mind, though. <code> ",What is the best way to smoke test a staging/production environment in Rails?
Ruby ActiveRecord tutorials," I am trying to write a ruby script that interacts with a PostgreSQL database. I am trying to piece together how to do this from the documentation, but a nice tutorial or sample code would work wonders to decrease the amount of time to get this working. If anyone has a link, some tips or has some code they could share I would be most grateful. Edit, made this note more clear:Note: this isn't to do with rails ActiveRecord, I am writing a Ruby script that will be involved in a program that is completely independent from Rails.  <code> ",Ruby PostgreSQL tutorials
Making a page with ruby without rails," Im looking for a way to do simple ruby code without rails. Im coming from PHP world, and sometimes, I just build a page with a Mysql connection, run a query and show result in a simple table (for example, a simple log or report).Example: This is just a simple example, but reflects what I need to do with ruby. I dont want all rails framework to just do something like this. How can I achieve this with simple ruby code? <code>  <?php$con = mysql_connect(""localhost"",""user"",""pass"");mysql_select_db(""mydb"");$query = mysql_query(""SELECT * FROM users"");while($data = mysql_fetch_assoc($query) { echo ""<p> $data[name] - $data[age] </p>"";}?>",Making a web page with ruby without rails
How to use omniauth to actually talk to services?," I've received a token / secret from a service using OmniAuth and can store it for users, but I'm stuck as to how to actually use these to call a service.The closest thing I've seen to this question is here but the way he's solved that there doesn't feel right. I feel like OmniAuth likely does this all for you if you know what you're doing. Netflix has a pretty involved auth process, so I was hoping to skirt all of this by using OmniAuth to abstract me from all of this.Given that I have a token and secret for a user, how to use these in calling a service like Netflix?Many thanks :) <code> ",How to use omniauth to make authenticated calls to services?
Ruby: Difference between a for loop and an each loop?," Possible Duplicate: for vs each in Ruby Let's say that we have an array, likesites = %w[stackoverflow stackexchange serverfault]What's the difference between and ?They seem to do the same exact thing, to me, and the syntax of the for loop is clearer to me. Is there a difference? In what situations would this be a big deal? <code>  for x in sites do puts xend sites.each do |x| puts xend",Ruby: What is the difference between a for loop and an each loop?
"Ruby: Intersection, union, subset"," I want to create different methods for a class called Multiset.I have all the required methods, but I'm unsure of how to write intersection, union, and subset methods.For intersection and union, my code starts like this: Here is an example: then the intersection of X and Y is [1, 2].  <code>  def intersect(var) x = Multiset.newend X = [1, 1, 2, 4]Y = [1, 2, 2, 2]","How can I get the intersection, union, and subset of arrays in Ruby?"
Ruby: Run a Command 5 Times," How can I run a command five times in a row? For example: <code>  5 * send_sms_to(""xxx"");",How can I run a command five times using Ruby?
Ruby - String concatenation << and +," Are Strings mutable in Ruby? According to the documentation doing creates a new string object with the value ""hello world"" but when we do It does not mention that it creates a new object, so does it mutate the str object, which will now have the value ""hello world""? <code>  str = ""hello""str = str + "" world"" str = ""hello""str << "" world""",Are strings mutable in Ruby?
NTLM Server Authentication in Ruby/Rack," I write and host web applications on Windows servers for intranet usage. My server stack uses Sinatra (which uses Rack), Thin, and (in some cases) Apache for reverse-proxying only.I want to support Single Sign-on (using NTLM or Kerberos) within our ActiveDirectory-backed domain. I have seen that I can use mod_ntlm or mod_auth_kerb when I'm behind Apache to perform my NTLM authentication. I haven't tried this yet, but I assume it will work.My question is about NTLM or Kerberos authentication when I'm not behind Apache, using only Thin and Sinatra. I've seen rack-ntlm, but the usage details there are exceedingly sparse.Please provide known-working code under Sinatra or Rack that shows how to use NTLM or Kerberos on the server-side, authenticating with ActiveDirectory (presumably via net-ldap).Edit: Emphasized the desired answers, as no answers so far come close to providing the explicit help this question is asking for. Users should be able to find this answer and have a working solution, not pointers to external libraries that they must figure out how to use. <code> ",Single Sign-On Server Authentication in Ruby/Rack
Create method variables in Ruby," Is there any way to create a variable in a module in Ruby that would behave similar to a class variable? What I mean by this is that it would be able to be accessed without initializing an instance of the module, but it can be changed (unlike constants in modules). <code> ",Create module variables in Ruby
"When do we use the ""||="" operator in rails ? What is its significance ?", Possible Duplicate: What does the operator ||= stands for in ruby? I am confused with the usage of ||= operator in Rails. I couldn't locate anything useful on the web. Can anyone please guide me?Do let me know if there are any weblinks that you are aware of.I would like what the following statement means: <code>  @_current_user ||= session[:current_user_id] && User.find(session[:current_user_id]),"When do we use the ""||="" operator in Rails ? What is its significance ?"
Ruby float with double 0?," When printing floats, ruby prints 1234.0 with only one 0 after the period. How can I force ruby to print two 0s? <code> ",Ruby float with double 0
"Groovy and GRails vs Scala, Why Twitter choose Scala ?", I have a very basic question: Why did Twitter choose Scala rather than Groovy to switch from Ruby? I think using Groovy is easier for the Rubyist or Javaman than Scala. Thanks. <code> ,"Groovy and Grails vs Scala, Why Twitter choose Scala ?"
"In Ruby or Rails, hash.merge({:order => 'asc'}) can return a new hash with a new key. What can return a new hash with deleted key?"," In Ruby (or Rails), we can do and now new_params is a hash with an added key :order.But is there a line there can return the hash with a deleted key? The line won't work because the delete method returns the value and that's it. Do we have to do it in 3 steps? Is there a better way? Because I want to do a but the last line above is somewhat clumsy. Is there a better way to do it?(note: because the default order is 'desc', so when there is no order param, that means it is the default and is desc, then toggle it to add order=asc, but otherwise, just remove the param order so that it is back to the default order of desc) <code>  new_params = params.merge({:order => 'asc'}) new_params = params.delete(:order) tmp_params = paramstmp_params.delete(:order)return tmp_params new_params = (params[:order].blank? || params[:order] == 'desc') ? params.merge({:order => 'asc') : (foo = params; foo.delete(:order); foo) # return foo","In Ruby or Rails, hash.merge({:order => 'asc'}) can return a new hash with a new key. What can return a new hash with a deleted key?"
Ruby on Rails method to make a string like 'Hello World' be like 'hello_world', What is the Ruby method to make a string like Hello World be like hello_world. <code> ,Ruby method to make a string like 'Hello World' be like 'hello_world'
generate a random number with 7 digits," How can I produce a random number in a range from 1 million to 10 million?rand(10) works, I tried rand(1..10) and that didn't work. <code> ",Generate a random number with 7 digits
Hacking vim-rails to work with Padrino," I recently cloned rails.vim (vim-rails) hoping to modify it to work with Padrino projects. Currently I'm trying to get the Rcontroller command to look not only in app/controllers (perfect for rails) but also in any folder in the project that has a sub-folder called 'controllers'. So when I type Rcontroller in command-mode and hit tab, I should be able to tab through admin/controllers/base.rb, admin/controllers/accounts.rb, app/controllers/events.rb etc. This will let users of the plugin to jump to controllers in a 'subapp' of a Padrino application. e.g. PADRINO_ROOT/adminThe current controllerList function seems to handle this autocompletion and here's what I have so far (only slightly modified from the original source) I added the wildcard before the controllers directory but this gives results likeRcontroller ers/baseRcontroller ers/sessionsRcontroller s/eventsfor the last one it looks like there is somethings weird going on with string lengths or overlap...Ideally I'd like to get it to the point where typing Rcontroller admin<TAB> should result in autocompletion to Rcontroller admin/controllers/accounts.rb. Likewise, Rcontroller app<TAB> should result in Rcontroller app/controllers/events.rbThe code for the viewList function has something similar to this and its code is as follows: Anyone have any suggestions? Thanks in advance. <code>  function! s:controllerList(A,L,P) let con = padrino#app().relglob(""*/controllers/"",""**/*"","".rb"") call map(con,'s:sub(v:val,""_controller$"","""")') return s:autocamelize(con,a:A) endfunction function! s:viewList(A,L,P) let c = s:controller(1) let top = padrino#app().relglob(""app/views/"",s:fuzzyglob(a:A)) call filter(top,'v:val !~# ""\\~$""') if c != '' && a:A !~ '/' let local = padrino#app().relglob(""app/views/"".c.""/"",""*.*[^~]"") return s:completion_filter(local+top,a:A) endif return s:completion_filter(top,a:A) endfunction",Hacking rails.vim to work with Padrino
"Ruby Dropped in Netbeans 7,how to use it in Netbeans7 ?"," In Netbeans 7, Ruby support was dropped: Although our Ruby support has historically been well received, based on existing low usage trends we are unable to justify the continued allocation of resources to support the feature.How can I use it in Netbeans 7? <code> ","Ruby Dropped in Netbeans 7,How to Use it in Netbeans7?"
Can I install the RubyGem Packaging System With apt-get on Ubuntu?," I am new to Ruby and just diving in. The Ruby tutorial says I should get the packaging system from here: http://rubyforge.org/frs/?group_id=126I am on Ubuntu Linux. The page has a .tar and a .gem option for downloading. Which should I download?Also, are gems exactly analogous to Java jars? And why do I need the gem packaging system if I can just download gems one by one as they are needed? <code> ",Can I install gems with apt-get on Ubuntu?
Parameterized Rake Task Dependencies," I have seen examples where a task has parameters and a dependency task like: How would you pass parameters to the name task if it was a task dependency like: <code>  task :name, [:first_name, :last_name] => [:pre_name] do |t, args| args.with_defaults(:first_name => ""John"", :last_name => ""Dough"") puts ""First name is #{args.first_name}"" puts ""Last name is #{args.last_name}""end task :sendLetter => :name #do somethingend",How do you declare a Rake task that depends on a parameterized task?
How to get rows as Arrays (not Hashes) in Sequel?," In the Sequel ORM for Ruby, the Dataset class has an all method which produces an Array of row hashes: each row is a Hash with column names as keys.For example, given a table T: then: should produce: Is there a way built in to Sequel to instead produce an Array of row Arrays, where each row is an array of only the values in each row in the order specified in the query? Sort of how select_rows works in ActiveRecord? Something like this: which would produce: Note: the expression: produces an array of arrays, but the order of values in the rows is NOT guaranteed to match the order requested in the original query. In this example, aa might look like: <code>  a b c--------------0 22 ""Abe""1 35 ""Betty""2 58 ""Chris"" ds = DB['select a, b, c from T']ah = ds.all # Array of row Hashes [{""a"":0,""b"":22,""c"":""Abe""},{""a"":1,""b"":35,""c"":""Betty""},{""a"":2,""b"":58,""c"":""Chris""}] aa = ds.rows # Array of row Arrays [[0,22,""Abe""],[1,35,""Betty""],[2,58,""Chris""]] aa = ds.map { |h| h.values } [[""Abe"",0,22],[""Betty"",1,35],[""Chris"",2,58]]",How to get rows as Arrays (not Hashes) in Sequel ORM?
Percent(%) Notation in Ruby," Usage: My question is... what's the difference? <code>  %w[ ] Non-interpolated Array of words, separated by whitespace%W[ ] Interpolated Array of words, separated by whitespace p %w{one one two three 0 1 1 2 3} # = > [""one"", ""one"", ""two"", ""three"", ""0"", ""1"", ""1"", ""2"", ""3""]p %W{one one two three 0 1 1 2 3} # = > [""one"", ""one"", ""two"", ""three"", ""0"", ""1"", ""1"", ""2"", ""3""]p %w{C:\ C:\Windows} # => [""C: C:\\Windows""]p %W{C:\ C:\Windows} # => [""C: C:Windows""]",What is the difference between %w{} and %W{} upper and lower case percent W array literals in Ruby?
Ruby on Rails: Propely creating a model instance that has relation to multiple models," Let's say I have a standalone User model and Service model.I also have a Order model that holds the orders created by an user for a service. I'm wondering how I could properly create an order entry in rails.Here is how I'll create an order entry if it refers to only one other model, say user. Now how do I do that if order refers to multiple models (user and service)?Assume that Order model has user_id and service_id attributes and all model objects are properly tagged with belongs_to and has_many relationships. <code>  @order = current_user.orders.build(params[:order])@order.save",Ruby on Rails: Properly creating a model instance that has relation to multiple models
Rails query string with a period.," I am currently trying to get a handle on RoR. I am passing in two strings into my controller. One is a random hex string and the other is an email. The project is for a simple email verification on a database. The problem I am having is when I enter something like below to test my page: All I am getting in my params hash of :email is 'bob'. I left the . between gmail and com out because that would cause the match to not work at all.My routing match is as follows: Which seems simple enough for what I need. I am having a hard time trying to figure out what the deal is and really how to even search for an answer. Any help or guidance would be greatly appreciated. <code>  http://signup.testsite.local/confirm/da2fdbb49cf32c6848b0aba0f80fb78c/bob.villa@gmailcom match ""confirm/:code/:email"" => ""confirm#index""",Rails query string with a period (or full stop).
"HAML problem,don't know how to deal with it"," error_msg: Illegal nesting: content can't be both given on the same line as %td and nested within it.I want those three links--show, edit, and delete--in the same td; how can I do it? <code>  - @subjects.each do |s| %tr %td= s.position %td= s.name %td= s.visible ? ""Yes"" : ""No"" %td= s.pages.size %td= link_to(""Show"", {:action => ""show"", :id => s.id}, :class => ""action show"") = link_to(""Edit"", {:action => ""edit"", :id => s.id}, :class => ""action edit"") = link_to(""Delete"", {:action => ""delete"", :id => s.id}, :class => ""action delete"")","Haml ""Illegal Nesting"" problem; how to place multiple code elements in the same tag?"
Looping from 1-N the Ruby Way, I recently came upon the scary idea that Integer.count loops in Ruby start from 0 and go to n-1 while playing with the Facebook Engineering puzzlers. I did the dirty fix of adding one to the block variable in the beginning so that it would start at one instead.Is there a prettier way?Example:  <code>  10.times do |n| n += 1 puts nend #=> 012345789,Start a loop from 1
How to use GBP pound sterling symbol in Number to currency method (Ruby)," I am quite new to Ruby and Ruby on Rails. While following a Ruby guide to create a small food finding application, the author used the number to currency method from Ruby on Rails. The trouble is the default unit is $ but I would like to change it to . When I did this in it gave me back the following error after I tried to run the code. <code>  number_helper.rb:7 invalid multibyte char (US-ASCII) (SyntaxError)",How do I use GBP pound sterling symbol in Ruby on Rail's number to currency method?
Rails how to update an column after save?," I want to create an after_save method for my rate action. It would divide rating_score/ratings and update the column rating. This is my model: My rails log: How should I create this? <code>  class KonkurrancersController < ApplicationController def rate @konkurrancer = Konkurrancer.find(params[:id]) @container = ""Konkurrancer""+@konkurrancer.id.to_s @konkurrancer.rating_score += params[:vind][:rating].to_i @konkurrancer.ratings += 1 @konkurrancer.save respond_to do |format| format.js end endend class Konkurrancer < ActiveRecord::Base after_save :do_foobar private def do_foobar rating_score = self.rating_score ratings = self.ratings rating = (rating_score/ratings) self.update_attributes(:rating => rating) endend Started POST ""/konkurrancers/rate/46"" for 127.0.0.1 at 2011-04-26 23:40:56 +0200 Processing by KonkurrancersController#rate as */* Parameters: {""utf8""=>"""", ""authenticity_token""=>""MACFM37hX4S6XA9vryn7gtfl21PvcaPBSiKDI8mfurg="", ""vind""=>{""rating""=>""4""}, ""id""=>""46""} [1m[36mKonkurrancer Load (1.0ms)[0m [1mSELECT `konkurrancers`.* FROM `konkurrancers`[0m [1m[35mCACHE (0.0ms)[0m SELECT `konkurrancers`.* FROM `konkurrancers` [1m[36mCACHE (0.0ms)[0m [1mSELECT `konkurrancers`.* FROM `konkurrancers`[0m [1m[35mKonkurrancer Load (1.0ms)[0m SELECT `konkurrancers`.* FROM `konkurrancers` WHERE (`konkurrancers`.`cached_slug` = '46') LIMIT 1 [1m[36mSQL (2.0ms)[0m [1mSELECT sluggable_id FROM slugs WHERE ((slugs.sluggable_type = 'Konkurrancer' AND slugs.name = '46' AND slugs.sequence = 1))[0m [1m[35mKonkurrancer Load (1.0ms)[0m SELECT `konkurrancers`.* FROM `konkurrancers` WHERE (`konkurrancers`.`id` = 46) LIMIT 1 [1m[36mSQL (0.0ms)[0m [1mBEGIN[0m [1m[35mLink Load (1.0ms)[0m SELECT `links`.* FROM `links` WHERE (`links`.konkurrancer_id = 46) LIMIT 1 [1m[36mSQL (0.0ms)[0m [1mROLLBACK[0mRendered konkurrancers/_rating.html.erb (1.0ms)Rendered konkurrancers/rate.js.erb (22.0ms)Completed 200 OK in 606ms (Views: 286.0ms | ActiveRecord: 6.0ms)",Rails how to update a column after saving?
How to express infinity in Ruby?, Is there a keyword to express Infinity in Ruby? <code> ,How to express infinity in Ruby?
How do I express infinity in Ruby?, Is there a keyword to express Infinity in Ruby? <code> ,How to express infinity in Ruby?
"ruby operators question ""=~"""," In ruby, I read some of the operators, but I couldn't find =~. What is =~ for, or what does it mean? The program that I saw has I think it was comparing if somestring equal to digits but, is there any other usage, and what is the proper definition of the =~ operator? <code>  regexs = (/\d+/)a = somestringif a =~ regexs","ruby operator ""=~"""
Change error field name in rails," I'm wondering if there's a way to change the field name for a validation error it's associated with. For example, if I submit First Name (really fname in the table) without any data, it yells Fname can't be blank.Is it possible to change this to First Name can't be blank? <code> ",Change error field name in Rails
ruby deamon with clean shutdown," I would like to make a ruby daemon that would gracefully shutdown with a kill command.I would like to add a signal trap that would wait until #code that could take some time to run finishes before shutting down. How would I add that to something like this: Also, would it be better to have that in a separate script, like a separate kill script instead of having it as part of the daemon code? Like something monit or God would call to stop it?I appreciate any suggestions. <code>  pid = fork do pid_file = ""/tmp/pids/daemon6.pid"" File.open(pid, 'w'){ |f| f.write(Process.pid) } loop do begin #code that could take some time to run rescue Exception => e Notifier.deliver_daemon_rescued_notification(e) end sleep(10) endendProcess.detach pid",Ruby daemon with clean shutdown
[noob] access hashes within an array," I'm trying to use Nokogiri to grab some data from an XML file, then save it into the database.The code I'm using is: In Rails' console, I ran Products.import_from_feed(myfeedgoeshere) and got: Can someone tell me how I can access elements of the array? Loop through so I can get @products.price, @products.description etc?Edit: I've tried @products[0], products[0], I've tried printing key/value pairs without any luck.I'm not asking you to do all the work, I think it's that there are a few concepts at work here - enough to keep me hitting brick walls.Part 2: Extra Credit!Based on the selected answer, this should work, right? I get:  <code>  def self.import_from_feed(feed) doc = Nokogiri::XML(open(feed)) @products = doc.xpath('/merchantProductFeed/merchant/prod').map do |i| { 'name' => i.xpath('text/name').inner_text, 'link' => i.xpath('uri/mLink').inner_text, 'description' => i.xpath('text/desc').inner_text, 'price' => i.xpath('price/buynow').inner_text } endend [{""price""=>""8.00"", ""name""=>""BASIC GIRL BOXER"", ""description""=>""Boxer shorts Elasticated waist with Bench logo Button fly"", ""link""=>""http://www.bench.co.uk/womenswear/underwear/basic-girl-boxer/GY001X/""}, {""price""=>""10.00"", ""name""=>""CMTL PK SPORTY SOCKS"", ""description""=>""Ankle sockBench logo on sole of each sockContrasting stripe around ankle"", ""link""=>""http://www.bench.co.uk/womenswear/underwear/cmtl03593-3-pk-sporty-socks/BK014-SK034/""}, {""price""=>""12.00"", ""name""=>""A PK STRING UNDERWEAR"", ""description""=>""Plain thong Bench logo along waistband Bench tag on front"", ""link""=>""http://www.bench.co.uk/womenswear/underwear/a4771-3pk-string-underwear/PK023-BK001-WH001/""}, {""price""=>""8.00"", ""name""=>""BASIC GIRL BOXER"", ""description""=>""Boxer shorts Elasticated waist with Bench logo Button fly"", ""link""=>""http://www.bench.co.uk/womenswear/underwear/basic-girl-boxer/WH001/""}, {""price""=>""45.00"", ""name""=>""OSPREY TRAINER"", ""description""=>""Lace up trainers Bench logo on tongue and back of heelBench logo on end of trainer"", ""link""=>""http://www.bench.co.uk/menswear/footwear/osprey-trainer/WH001-BL081/""}, {""price""=>""45.00"", ""name""=>""OSPREY TRAINER"", ""description""=>""Lace up trainers Bench logo on tongue and back of heelBench logo on said of trainer"", ""link""=>""http://www.bench.co.uk/menswear/footwear/osprey-trainer/WH001-GR128/""}, {""price""=>""90.00"", ""name""=>""META TRENCH"", ""description""=>""Vintage look leather bootLace upFabric sidesPull on tab on heel"", ""link""=>""http://www.bench.co.uk/womenswear/footwear/meta-trench/BK001/""}](^ Truncated) @products.each do |h| h.save end NoMethodError: undefined method `save' for #<Hash:0x10388c7d8>",How can I access hashes within an array?
[rvm] - error on install ruby," --> --> --> If I try to launch I get the same error.But if I remove '--no-same-owner' the promlem dissapeared.How can I fix the error? <code>  [root@arch ~]# rvm install 1.8.7 ruby-1.8.7-p334 - #fetching ruby-1.8.7-p334 - #extracting ruby-1.8.7-p334 to /usr/local/rvm/src/ruby-1.8.7-p334ERROR: Error running 'bunzip2 < '/usr/local/rvm/archives/ruby-1.8.7-p334.tar.bz2' | tar xf --no-same-owner - -C /usr/local/rvm/tmp/rvm_src_6986', please read /usr/local/rvm/log/ruby-1.8.7-p334/extract.logERROR: There has been an error while trying to extract the source. Halting the installation.ERROR: There has been an error fetching the ruby interpreter. Halting the installation. [root@arch ~]# cat /usr/local/rvm/log/ruby-1.8.7-p334/extract.log [2011-04-27 13:47:58] bunzip2 < '/usr/local/rvm/archives/ruby-1.8.7-p334.tar.bz2' | tar xf --no-same-owner - -C /usr/local/rvm/tmp/rvm_src_6726tar: --no-same-owner: Cannot open: No such file or directorytar: Error is not recoverable: exiting now[2011-04-27 13:48:12] bunzip2 < '/usr/local/rvm/archives/ruby-1.8.7-p334.tar.bz2' | tar xf --no-same-owner - -C /usr/local/rvm/tmp/rvm_src_6835tar: --no-same-owner: Cannot open: No such file or directorytar: Error is not recoverable: exiting now[2011-04-27 13:48:22] bunzip2 < '/usr/local/rvm/archives/ruby-1.8.7-p334.tar.bz2' | tar xf --no-same-owner - -C /usr/local/rvm/tmp/rvm_src_6910tar: --no-same-owner: Cannot open: No such file or directorytar: Error is not recoverable: exiting now bunzip2 < '/usr/local/rvm/archives/ruby-1.8.7-p334.tar.bz2' | tar xf --no-same-owner - -C /usr/local/rvm/tmp/rvm_src_6726",Error on installing ruby with RVM
Customize error message with simple_fom, I'm using the simple_form gem. I want to customize the error message displayed when a user fails validations. How can I accomplish this? <code> ,Customize error message with simple_form
trailing zeros in rails," I have fields hr and min, both integers in my application. For hr field, if the user enters ""1"" I would like Rails to automatically pad it to ""01"" before saving it to the database. Also for the min field if the user enter ""0"" it should put in as ""00"".How can I do this? <code> ",leading zeros in rails
ImageMagick/Rmagick gem - CORE_RL_magick_.dll not found," I'm working on a Rail3 app.After struggling for several hours and finally installing the rmagick 2.13.1 gem without errors on win7x64 / ruby 1.9.2, I've run into another error. Yeah, I've heard that rails experience in windows could be painfull...I use carrierwave to process and upload images to AWS S3.Processing looks like When I trigger file upload on my development machine, it throws me a windows popup, saying CORE_RL_magick_.dll not foundGoogle wasn't really helpful on this one.I have my PATH variable set to C:/ruby192/ImageMagick - its where I have installed ImageMagick to. And this folder has several CORE_RL dlls including the magick one. The DLL's themselves are not missing!irb > require 'rmagick' returns trueand convert -version outputs this: So I have several question.How do I solve this?elseif I don't, are there any other gems and/or graphic libraries that are supported by both windows and heroku?else maybe there is a way to configure carrierwave, not to process images in dev environmentSo far I've tried ImageMagick v 6.6.9 32bit dll, which gives the CORE_RL dll error,64 bit static, which doesn't have dev headers to compile the rmagick gem, and 64 bit dynamic, which gives me tonns of undefined reference errors during the gem compilation, every test, except the first one: Thanks everyone. <code>  class IconUploader < CarrierWave::Uploader::Baserequire 'rmagick'include CarrierWave::RMagick... process :resize_to_fit => [100, 100]process :convert => :png... Version: ImageMagick 6.6.9-6 2011-04-14 Q16 http://www.imagemagick.orgCopyright: Copyright (C) 1999-2011 ImageMagick Studio LLCFeatures: OpenMP checking for snprintf() in assert.h,ctype.h,stdio.h,stdlib.h,math.h,time.h,stdint.h,sys/types.h,wand/MagickWand.h... yeschecking for AcquireImage() in assert.h,ctype.h,stdio.h,stdlib.h,math.h,time.h,stdint.h,sys/types.h,wand/MagickWand.h... noand so on...","ImageMagick - ""CORE_RL_magick_.dll not found"" or how to install RMagick on windows with ruby 1.9.2"
"Google Maps, Ruby on Rails, Handling invalid addresses"," I am adding google maps support with apneadiving / Google-Maps-for-Rails (thanks awesome gem)I am finding one slight glitch, however, which very likely is my fault. auto_zoom works great when there are multiple markers. However, when there is only one marker it is zoomed in to the max level which is not pretty. ""zoom"" will only work when auto_zoom is false, so that's not what I want. So therefore you could use ""maxZoom"" but now users cannot zoom in manually beyond that point which is not what I want. Is there a way around this? Is my explanation making sense? Is this a limitation of Google Maps API? Thanks... <code> ","Google Maps, Ruby on Rails, Zoom level with one marker"
"Been using RVM, should I also use Bundler?"," I am not sure what the differences are between these two tools. There seems to be a big overlap, but I have been using RVM and facing some miss-compatibility issues.What does Bundler do that RVM does not?  <code> ",What does Bundler offer over RVM?
smtp settings using Godaddy mail with Rails 3, How should I set up my SMTP settings in my initializer file using Godaddy mail? <code> ,SMTP settings using Godaddy mail with Rails 3
Nested form using paperclip in rails3," I have a model called posts, and it has many attachments.The attachments model is using paperclip.I made a standalone model for creating attachments which works just fine, this is the view as instructed here (https://github.com/thoughtbot/paperclip): The nested form in posts looks like this: An attachment record is created, but its empty. The file is not uploaded. The post meanwhile, is successfully created...Any ideas? <code>  <% form_for :attachment, @attachment, :url => @attachment, :html => { :multipart => true } do |form| %> <%= form.file_field :pclip %> <%= form.submit %><% end %> <% @attachment = @posts.attachments.build %><%= form_for(@posts) do |f| %> <% if @posts.errors.any? %> <div id=""error_explanation""> <h2><%= pluralize(@posts.errors.count, ""error"") %> prohibited this post from being saved:</h2> <ul> <% @posts.errors.full_messages.each do |msg| %> <li><%= msg %></li> <% end %> </ul> </div> <% end %> <div class=""field""> <%= f.label :name %><br /> <%= f.text_field :name %> </div> <div class=""field""> <%= f.label :description %><br /> <%= f.text_area :description %> </div> <div class=""field""> <%= f.fields_for :attachments, @attachment, :url => @attachment, :html => { :multipart => true } do |at_form| %> <%= at_form.file_field :pclip %> <% end %> </div> <div class=""actions""> <%= f.submit %> </div><% end %>",Nested form using paperclip
before_filter OR syntax, is it possible to have:before_filter :authenticate_user! || :authenticate_admin! <code> ,before_filter running multiple methods
How to make an dead link reporter?," I want to make a button on my website that a user can click on to report at external dead link. The link do I have in my link column that is in my item table. I want to create an simple email notice that have the ID of the item and the link.I was thinking creating an form and some sort of controller that could handle the form.My view should look something like this: The id and the url inputs should not be viewable just a link like ""report broken link"". A controller should take the two params and send me an email.How do I create a simple dead external links reporter? <code>  <% for items in @items %> <%= simple_form_for @items] do |f| %> <%= f.hidden field :id, :value => 'item.id' %> <%= f.hidden field :url, :value => 'item.link %> <%= f.button :submit, :value => 'report broken link' %> <% end %> <% end %>",How to make a dead link reporter?
Ruby - String Concatination Syntax Error?," I ran into a syntax error. I accept that it's a syntax error, but I'm somewhat curious as to why it's a syntax error.This works exactly as you'd expect it to: This throws an error: The error: Oddly, I can move the second plus sign wherever and Ruby seems to have no problem with it, but if that first one happens to touch the double quote, I get a syntax error.Why exactly does this happen? <code>  (0..9).each { |n| puts n.to_s + ""^2 = "" + (n**2).to_s } (0..9).each { |n| puts n.to_s +""^2 = ""+ (n**2).to_s } NoMethodError: undefined method '+@' for ""^2 = "":String",String Concatenation Error
accidentaly ran 'sudo bundle install dir_name'," I accidentally ran sudo bundle install smtp_mail and now all my gems are in this directory called smtp_mail inside my Rails app.I'm not sure about the default location of gems? And, my Rails app is complaining when it starts. Is there a way I can revert back? <code> ",How can I fix an accidental 'sudo bundle install dir_name'?
How to build a JSON object," Currently I build a JSON object by doing: My challenge is I now want to include records from the @contacts table that have a different set of fields than the User model.I tried doing But that did not work. What's the best way to combine two similar models into one JSON object? <code>  @users = User.all@users.each do |user| @userlist << { :id => user.id, :fname => user.fname, :lname => user.lname, :photo => user.profile_pic.url(:small) }end @users = User.all@contacts = current_user.contacts@users << @contacts",How do I build a JSON object?
"how to assing hash[""a""][""b""]= ""c"" if hash[""a""] doesn't exist?", Is there any way simpler than <code>  if hash.key?('a') hash['a']['b'] = 'c' else hash['a'] = {} hash['a']['b'] = 'c' end,How to assign hash['a']['b']= 'c' if hash['a'] doesn't exist?
"How to assign hash[""a""][""b""]= ""c"" if hash[""a""] doesn't exist?", Is there any way simpler than <code>  if hash.key?('a') hash['a']['b'] = 'c' else hash['a'] = {} hash['a']['b'] = 'c' end,How to assign hash['a']['b']= 'c' if hash['a'] doesn't exist?
Ruby Array - removing blank elements," I have the following array I want to remove blank elements from the array and want the following result: Is there any method like compact that will do it without loops?  <code>  cities = [""Kathmandu"", ""Pokhara"", """", ""Dharan"", ""Butwal""] cities = [""Kathmandu"", ""Pokhara"", ""Dharan"", ""Butwal""]",How do I remove blank elements from an array?
How to return the adverbial form of the word in the string in ruby?, I am wondering if there is a method in Ruby to turn a word such as month to monthly.Similar to pluralize(word) <code> ,How to return the adverbial form of the word
"Ruby double at sign variables @@, what do they mean?"," What are Ruby variables preceded with double at signs (@@)? My understanding of a variable preceded with an at sign is that it is an instance variable, like this in PHP:PHP version Ruby equivalent What does the double at sign @@ mean, and how does it differ from a single at sign? <code>  class Person { public $name; public function setName($name) { $this->name = $name; } public function getName() { return $this->name; }} class Person def set_name(name) @name = name end def get_name() @name endend",What does @@variable mean in Ruby?
Standalone ruby -- How to load different database.yml environments," I have a background process that modifies records in a database. The models connect to the database using something like this: All model classes have those lines at the top. I agree that's a bad way of doing it.Is there a better way to get a connection to a model class? How do I pass the connection to the model?I want to be able to run my background process with a different environment, say ""production"".How do I achieve that? <code>  dbconfig = YAML::load(File.open('database.yml'))ActiveRecord::Base.establish_connection(dbconfig[""development""])class Clcar < ActiveRecord::Base ....end",Standalone ruby -- How to load different environments from database.yml
how to compile ruby?," Is there a tool that can allow me to compile Ruby code so that it runs somewhat faster? For example, I have heard that there is a tool for Python called ""pyc"" that allows us to compile the code, so that it runs 10 times faster. <code> ",How to compile Ruby?
Uninstall old ruby gem's versions," I have several versions of a Ruby gem: How can I remove old versions but keep the most recent? <code>  $ gem listrjb (1.3.4, 1.3.3, 1.1.9)",Uninstall old versions of Ruby gems
check url exists in ruby on rails," How would I go about checking if a URL exists using Ruby?For example, for the URL the result should be truthy, but for the URLs or the result should be falsey <code>  https://google.com https://no.such.domain https://stackoverflow.com/no/such/path",Check if URL exists in Ruby
How to avoid this message?," After gem update --system, when I do something related to rubygems, I receive this message:NOTE: Gem::Specification#default_executable= is deprecated with no replacement. It will be removed on or after 2011-10-01.Gem::Specification#default_executable= called from /usr/lib/ruby/gems/1.8/specifications/rubygems-update-1.7.2.gemspec:11.How can I avoid it? I've tried to remove rubygems and reinstall, but that didn't fix it. <code> ",How to avoid deprecation messages from RubyGems?
Run a command line with specific environment variable," In Ruby, I want to be able to:run a command line (via shell)capture both stdout and stderr (preferably as single stream) without using >2&1 (which fails for some commands here)run with additional enviornment variables (without modifying the environment of the ruby program itself)I learned that Open3 allows me to do 1 and 2. I also learned that popen allows you to pass an environment but not when specifying the commandline.How do I write code that does all the three?...Put differently, what is the Ruby equivalent of the following Python code? <code>  cmd = 'a_prog --arg ... --arg2 ...' Open3.popen3(""#{cmd}"") { |i,o,e| output = o.read() error = e.read() # FIXME: don't want to *separate out* stderr like this repr = ""$ #{cmd}\n#{output}"" } >>> import os, subprocess>>> env = os.environ.copy()>>> env['MYVAR'] = 'a_value'>>> subprocess.check_output('ls -l /notexist', env=env, stderr=subprocess.STDOUT, shell=True)",Run a command line with custom environment
disable a group of tests in rspec," I have a test spec which describes a class and within that has various contexts each with various it blocks.Is there a way I can disable a context temporarily?I tried adding a pending ""temporarily disabled"" call at the very top within a context I want to disable, and I did see something about pending when I ran the spec but then it just continued to run the rest of the tests.This is what I kind of had: but like I said it just went on to run the tests underneath the pending call.Searching led me to this mailing list thread in which the the creator (?) of rspec says it's possible in rspec 2, which I'm running. I guess it did work but it didn't have the desired effect of disabling all of the following tests, which is what I think of when I see a pending call.Is there an alternative or am I doing it wrong? <code>  describe Something context ""some tests"" do it ""should blah"" do true end end context ""some other tests"" do pending ""temporarily disabled"" it ""should do something destructive"" do blah end endend",Disable a group of tests in rspec?
How to disable a group of tests in rspec," I have a test spec which describes a class and within that has various contexts each with various it blocks.Is there a way I can disable a context temporarily?I tried adding a pending ""temporarily disabled"" call at the very top within a context I want to disable, and I did see something about pending when I ran the spec but then it just continued to run the rest of the tests.This is what I kind of had: but like I said it just went on to run the tests underneath the pending call.Searching led me to this mailing list thread in which the the creator (?) of rspec says it's possible in rspec 2, which I'm running. I guess it did work but it didn't have the desired effect of disabling all of the following tests, which is what I think of when I see a pending call.Is there an alternative or am I doing it wrong? <code>  describe Something context ""some tests"" do it ""should blah"" do true end end context ""some other tests"" do pending ""temporarily disabled"" it ""should do something destructive"" do blah end endend",Disable a group of tests in rspec?
How do we use a string as a variable in Ruby?," I'm new to this but I have the following code: I would like to use $1 as a variable that I can call methods on, currently the interpreter returns a ""NoMethodError: undefined method 'description' for ""Door"":String"".Edit:For example: <code>  when /^read (.+)$/ puts ""Reading #{$1}:"" puts $1.description.downcase door = Item.new( :name => ""Door"", :description => ""a locked door"" )key = Item.new( :name => ""Key"", :description => ""a key"" )",Use a string to access a local variable by name
Ruby DateTime.now to local time," I have a date string 20101129220021, so I will use This part works fine, and I get a date, which is in UTC.My question is, how can I convert this into my local time? I tried many methods like extracting the time part using d.to_time and manipulate the result, but it didn't work. As far as I know, DateTime object is immutable. Can I please get some help? <code>  require 'date'd = DateTime.parse('20101129220021')",Ruby DateTime.Parse to local time
[Rails] Why no one use global ($) variable ?," I'm hacking around Rails for a year and half now, and I quite enjoy it! :)In rails, we make a lots of use of local variables, instance variables (like @user_name) and constants defined in initializers (like FILES_UPLOAD_PATH). But why doesn't anyone use global ""dollarized"" variables ($) like $dynamic_cluster_name? Is it because of a design flaw? Is it performance related? A security weakness? <code> ",Why aren't global (dollar-sign $) variables used?
[Rails] Why no one use global (dollar-sign $) variable ?," I'm hacking around Rails for a year and half now, and I quite enjoy it! :)In rails, we make a lots of use of local variables, instance variables (like @user_name) and constants defined in initializers (like FILES_UPLOAD_PATH). But why doesn't anyone use global ""dollarized"" variables ($) like $dynamic_cluster_name? Is it because of a design flaw? Is it performance related? A security weakness? <code> ",Why aren't global (dollar-sign $) variables used?
how to set a variable to divide and round up to 0 decimal places?," In Ruby, how can I do: where per_page = 100, and records = 1050, and then round up so there are no decimals? So, instead of 10.5 it equals 11? <code>  number_total = records / per_page",How can I set a variable to divide and round up to 0 decimal places?
Ruby - overriding method by another defined in module," I want to define an instance method Date#next which returns the next day. So I made a DateExtension module, like this: Using it: Calling the method d.next(:week) makes Ruby throw an error ArgumentError: wrong number of arguments (1 for 0).How can I override the default next method from Date class with the one declared in DateExtension module? <code>  module DateExtension def next(symb=:day) dt = DateTime.now {:day => Date.new(dt.year, dt.month, dt.day + 1), :week => Date.new(dt.year, dt.month, dt.day + 7), :month => Date.new(dt.year, dt.month + 1, dt.day), :year => Date.new(dt.year + 1, dt.month, dt.day)}[symb] endend class Date include DateExtensionend",Overriding method by another defined in module
How can I get a substring from position N to the last char in Ruby 1.8.7?, I'd like to get a substring from a string from position N to the end of the string.What's the way to do it in Ruby? <code> ,How can I get a substring from position N to the last char in Ruby?
[Ruby] Recent depreciation warnings when requiring gems.," I have recently run updates: Now, I come with a lot of deprecation warnings each time I load a gem. For example, rails console: I use RVM, Ruby 1.9.2 and Rubygems 1.8.1. Any way to get around this problem? Revert to an older version of rubygems? <code>  gem update --systemgem update NOTE: Gem::Specification#default_executable= is deprecated with no replacement. It will be removed on or after 2011-10-01.Gem::Specification#default_executable= called from /Users/user/.rvm/gems/ruby-1.9.2-p180@global/specifications/rake-0.8.7.gemspec:10.NOTE: Gem::Specification#default_executable= is deprecated with no replacement. It will be removed on or after 2011-10-01.Gem::Specification#default_executable= called from /Users/user/.rvm/gems/ruby-1.9.2-p180@global/specifications/rake-0.8.7.gemspec:10.NOTE: Gem::Specification#default_executable= is deprecated with no replacement. It will be removed on or after 2011-10-01.Gem::Specification#default_executable= called from /Users/user/.rvm/gems/ruby-1.9.2p180@global/specifications/rake-0.8.7.gemspec:10.Loading development environment (Rails 3.0.7)ruby-1.9.2-p180 :001 > exit",How do I fix Rubygems recent deprecation warning?
[Ruby Gems] Recent Deprecation Warning.," I have recently run updates: Now, I come with a lot of deprecation warnings each time I load a gem. For example, rails console: I use RVM, Ruby 1.9.2 and Rubygems 1.8.1. Any way to get around this problem? Revert to an older version of rubygems? <code>  gem update --systemgem update NOTE: Gem::Specification#default_executable= is deprecated with no replacement. It will be removed on or after 2011-10-01.Gem::Specification#default_executable= called from /Users/user/.rvm/gems/ruby-1.9.2-p180@global/specifications/rake-0.8.7.gemspec:10.NOTE: Gem::Specification#default_executable= is deprecated with no replacement. It will be removed on or after 2011-10-01.Gem::Specification#default_executable= called from /Users/user/.rvm/gems/ruby-1.9.2-p180@global/specifications/rake-0.8.7.gemspec:10.NOTE: Gem::Specification#default_executable= is deprecated with no replacement. It will be removed on or after 2011-10-01.Gem::Specification#default_executable= called from /Users/user/.rvm/gems/ruby-1.9.2p180@global/specifications/rake-0.8.7.gemspec:10.Loading development environment (Rails 3.0.7)ruby-1.9.2-p180 :001 > exit",How do I fix Rubygems recent deprecation warning?
Using ruby 19 csv to get table and column data," I've been trying to work with getting a single column out of a csv file. I've gone through the documentation, http://www.ruby-doc.org/stdlib/libdoc/csv/rdoc/index.htmlbut still don't really understand how to use it.If I use CSV.table, the response is incredibly slow compared to CSV.read. I admit the dataset I'm loading is quite large, which is exactly the reason I only want to get a single column from it.My request is simply currently looks like this and when I debug I get a response of The documentation says I should be able to use by_col(), but when I try to output It gives me ""undefined method 'col' error""Can somebody explain to me how I'm supposed to use CSV? and if there is a way to get columns faster using 'read' instead of 'table'?I'm using Ruby 1.92, which says that it is using fasterCSV, so I don't need to use the FasterCSV gem.  <code>  @dataTable = CSV.table('path_to_csv.csv') #<CSV::Table mode:col_or_row row_count:2104 > <%= debug @dataTable.by_col('col_name or index') %>",Using Ruby CSV to extract one column
Validation nested model objects within a wizard workflow," I am writing a wizard form in rails; e.g. multiple input pages for one model object. The basics of my approach are those described in Ryan Bates' Multistep form railscast : http://railscasts.com/episodes/217-multistep-forms (in case anyone wants to know the WHY behind some of the code below).The objects under scrutiny here are ""Participant"", which has one ""Address""My problem is that I only want to validate the nested object (Address) when the user is trying to progress past the address input screen. This is currently tracked via an attribute on the Participant model called ""current_step""So I have a Participant: And an Address: The principle of this approach is the ""create"" action is called on the controller (not shown) for each step of the wizard, and it only validates a subset of the model when each step is processed.Currently, when I complete the first screen (""name"") and try and go onto the address step, the address validation is getting triggered, and I get sent back to the ""name"" screen with validation errors for blank address details.So I have tried a number of approaches here, the final part of which was the commented out condition on Address validation shown above - this I've found doesn't work as I'm only building Participant->Address objects, but not saving them. Therefore @participant.address gets me the address object, but @participant.address.participant is null as the Address does not yet have a participant_id foreign key to lookup it's parent.The reason for my struggles appears to be the inclusion of the super-handy accepts_nested_attributes_for method. I was expecting to use a validates_associated to be doing the validation, but I see that the accepts_nested_attributes_for tag both propagates form parameters nicely to create nested model objects, but also ensures the participant#valid? method calls down to the address validation in ALL situations.So my dilemma is how to best use the participant#valid? method to valid the partially complete model, based off the current_step parameter in the participant ? EDIT - updated to remove extra info, and distill down to the core problem <code>  class Participant < ActiveRecord::Base has_one :address accepts_nested_attributes_for :address validates_presence_of :first_name, :last_name, :if => self.current_step == ""name"" ... def steps = %w[ name address confirm ] # the steps the wizard will followend class Address < ActiveRecord::Base belongs_to :participant validates_presence_of :address1, :state, :suburb, :postcode #, :if => participant.current_step == ""address""end",How to validate a nested model object based on the state of the parent object?
Validating nested model objects within a wizard workflow," I am writing a wizard form in rails; e.g. multiple input pages for one model object. The basics of my approach are those described in Ryan Bates' Multistep form railscast : http://railscasts.com/episodes/217-multistep-forms (in case anyone wants to know the WHY behind some of the code below).The objects under scrutiny here are ""Participant"", which has one ""Address""My problem is that I only want to validate the nested object (Address) when the user is trying to progress past the address input screen. This is currently tracked via an attribute on the Participant model called ""current_step""So I have a Participant: And an Address: The principle of this approach is the ""create"" action is called on the controller (not shown) for each step of the wizard, and it only validates a subset of the model when each step is processed.Currently, when I complete the first screen (""name"") and try and go onto the address step, the address validation is getting triggered, and I get sent back to the ""name"" screen with validation errors for blank address details.So I have tried a number of approaches here, the final part of which was the commented out condition on Address validation shown above - this I've found doesn't work as I'm only building Participant->Address objects, but not saving them. Therefore @participant.address gets me the address object, but @participant.address.participant is null as the Address does not yet have a participant_id foreign key to lookup it's parent.The reason for my struggles appears to be the inclusion of the super-handy accepts_nested_attributes_for method. I was expecting to use a validates_associated to be doing the validation, but I see that the accepts_nested_attributes_for tag both propagates form parameters nicely to create nested model objects, but also ensures the participant#valid? method calls down to the address validation in ALL situations.So my dilemma is how to best use the participant#valid? method to valid the partially complete model, based off the current_step parameter in the participant ? EDIT - updated to remove extra info, and distill down to the core problem <code>  class Participant < ActiveRecord::Base has_one :address accepts_nested_attributes_for :address validates_presence_of :first_name, :last_name, :if => self.current_step == ""name"" ... def steps = %w[ name address confirm ] # the steps the wizard will followend class Address < ActiveRecord::Base belongs_to :participant validates_presence_of :address1, :state, :suburb, :postcode #, :if => participant.current_step == ""address""end",How to validate a nested model object based on the state of the parent object?
Converting a hexadecimal no. to binary in ruby," I am trying to convert a hex value to a binary value (each bit in the hex string should have an equivalent four bit binary value). I was advised to use this: This gives me the correct output 000011111111. I am confused with how this works, especially %0#{num.size*4}b. Could someone help me with this? <code>  num = ""0ff"" # (say for eg.)bin = ""%0#{num.size*4}b"" % num.hex.to_i",Converting a hexadecimal number to binary in ruby
ruby regex for Date, I want to match dates with format mm/dd/yy or mm/dd/yyyy but it should not pick 23/09/2010 where month is 23 which is invalid nor some invalid date like 00/12/2020 or 12/00/2011. <code> ,Regex to match Date
Jeweler adds self referencing dependency to my gem," Gem's(gemfoo) jeweler declaration in Rakefile looks like that: The problem is that it generates the following dependencies in the gemfoo.gemspec file:s.add_runtime_dependency(%q<gemfoo>, ["">= 0""])s.add_runtime_dependency(%q<nokogiri>, [""~> 1.4.1""])s.add_development_dependency(%q<jeweler>, ["">= 0""])Which won't stop you from releasing your rubygem but won't allow you to install it: How can I fix that?jeweler 1.6.0 <code>  Jeweler::Tasks.new do |gem| #truncated gem.add_runtime_dependency 'nokogiri', '~> 1.4.1' gem.add_development_dependency 'jeweler'end gem install gemfooERROR: Error installing gemfoo: gemfoo requires gemfoo (>= 0)",Jeweler adds circular dependency to my gem
Can somebody explain what the unary asterisk is doing in this Ruby line?," NOTE: mischa's splat on GitHub has lots of cool interactive examples of * in action.By googling, I found that one way to iterate over a range of numbers in Ruby (your classic C-style for loop) is to do something like this But what exactly is going on with that [*first..last] syntax? I played around with irb and I see this: Everything I've read online discusses the unary asterisk as being useful for expanding and collapsing arguments passed to a method, useful for variable length argument lists and I get that, but I don't see how it applies to the expansion being done in my block example above.To be clear, I know that The Ruby Way is to iterate over an array or collection, not to use the array length and iterate with an integer index. However, in this example, I really am dealing with a list of integers. :) <code>  for (i = first; i <= last; i++) { whatever(i);} [*first..last].each do |i| whatever iend ruby-1.9.2-p180 :001 > 0..5 => 0..5 ruby-1.9.2-p180 :002 > [0..5] => [0..5] ruby-1.9.2-p180 :003 > [*0..5] => [0, 1, 2, 3, 4, 5] ruby-1.9.2-p180 :004 > *0..5SyntaxError: (irb):4: syntax error, unexpected tDOT2, expecting tCOLON2 or '[' or '.'*0..5 ^ def foo(*bar) bar endfoo 'tater' # => [""tater""]foo 'tater', 'tot' # => [""tater"", ""tot""]",What does the syntax [*a..b] mean in Ruby?
What does the syntax [*a..b] mean?," NOTE: mischa's splat on GitHub has lots of cool interactive examples of * in action.By googling, I found that one way to iterate over a range of numbers in Ruby (your classic C-style for loop) is to do something like this But what exactly is going on with that [*first..last] syntax? I played around with irb and I see this: Everything I've read online discusses the unary asterisk as being useful for expanding and collapsing arguments passed to a method, useful for variable length argument lists and I get that, but I don't see how it applies to the expansion being done in my block example above.To be clear, I know that The Ruby Way is to iterate over an array or collection, not to use the array length and iterate with an integer index. However, in this example, I really am dealing with a list of integers. :) <code>  for (i = first; i <= last; i++) { whatever(i);} [*first..last].each do |i| whatever iend ruby-1.9.2-p180 :001 > 0..5 => 0..5 ruby-1.9.2-p180 :002 > [0..5] => [0..5] ruby-1.9.2-p180 :003 > [*0..5] => [0, 1, 2, 3, 4, 5] ruby-1.9.2-p180 :004 > *0..5SyntaxError: (irb):4: syntax error, unexpected tDOT2, expecting tCOLON2 or '[' or '.'*0..5 ^ def foo(*bar) bar endfoo 'tater' # => [""tater""]foo 'tater', 'tot' # => [""tater"", ""tot""]",What does the syntax [*a..b] mean in Ruby?
Rails audit system," I have a huge project with both of ActiveRecord and ActiveResource models. I need to implement logging of user activity with these models and also to log changes of model attributes (save object state or somthing like that). Changes can made by users or cron rake tasks. I also must have possibility to search any data by date , any field ..etcWill be nice also to generate readable messages with last activity , for example User Bob change his password to * and email to ** at 2011-08-12 08:12 Staff Jeff added new partner: Company name at 2011-08-12 08:13 Admin Jack deleted product : Product name at 2011-09-12 11:11 Client Sam ordered new service : Service name at 2011-09-12 11:12 Does anybody implement such logging? Ideas? Advices?should I use gems or can I do all the logic with observers not changing models?I liked gem https://github.com/airblade/paper_trail can anybody say how can I make it work with activeresource ? <code> ",Rails audit system with both ActiveResource and ActiveRecord
Using Nokogiri and Ruby to grab some ugly data from Php," I am trying to extract the name, ID, Phone, Email, Gender, Ethnicity, DOB, Class, Major, School and GPA from a page I am parsing with Nokogiri.I tried some different xpath's but everything I try grabs much more than I want: <code>  <span class=""subTitle""><b>Recruit Profile</b></span><br><table border=""0"" width=""100%""><tr><td> <table bgcolor=""#afafaf"" border=""0"" cellpadding=""0"" width=""100%""><tr><td> <table bgcolor=""#cccccc"" border=""0"" cellpadding=""2"" cellspacing=""2"" width=""100%""><tr><td bgcolor=""#dddddd""><b>Name</b></td> <td bgcolor=""#dddddd"">Some Person</td> </tr><tr><td bgcolor=""#dddddd""><b>EDU ID</b></td> <td bgcolor=""#dddddd"">A12345678</td> </tr><tr><td bgcolor=""#dddddd""><b>Phone</b></td> <td bgcolor=""#dddddd"">123-456-7890</td> </tr><tr><td bgcolor=""#dddddd""><b>Address</b></td> <td bgcolor=""#dddddd"">1234 Somewhere Dr.<br>City ST, 12345</td> </tr><tr><td bgcolor=""#dddddd""><b>Email</b></td> <td bgcolor=""#dddddd"">someone@email.com</td> </tr><tr><td bgcolor=""#dddddd""><b>Gender</b></td> <td bgcolor=""#dddddd"">Female</td> </tr><tr><td bgcolor=""#dddddd""><b>Ethnicity</b></td> <td bgcolor=""#dddddd"">Unknown</td> </tr><tr><td bgcolor=""#dddddd""><b>Date of Birth</b></td> <td bgcolor=""#dddddd"">Jan 1st, 1901</td> </tr><tr><td bgcolor=""#dddddd""><b>Class</b></td> <td bgcolor=""#dddddd"">Sophomore</td> </tr><tr><td bgcolor=""#dddddd""><b>Major</b></td> <td bgcolor=""#dddddd"">Biology</td> </tr><tr><td bgcolor=""#dddddd""><b>School</b></td> <td bgcolor=""#dddddd"">University of Somewhere</td> </tr><tr><td bgcolor=""#dddddd""><b>GPA</b></td> <td bgcolor=""#dddddd"">0.00</td> </tr><tr><td bgcolor=""#dddddd"" valign=""top""><b>Availability</b></td> <td bgcolor=""#dddddd""> <table border=""0"" cellspacing=""0"" cellpadding=""0""><tr>",How do I use Nokogiri and Ruby to scrape values from HTML with nested tables?
Using Nokogiri and Ruby to scrape values from HTML with nested tables," I am trying to extract the name, ID, Phone, Email, Gender, Ethnicity, DOB, Class, Major, School and GPA from a page I am parsing with Nokogiri.I tried some different xpath's but everything I try grabs much more than I want: <code>  <span class=""subTitle""><b>Recruit Profile</b></span><br><table border=""0"" width=""100%""><tr><td> <table bgcolor=""#afafaf"" border=""0"" cellpadding=""0"" width=""100%""><tr><td> <table bgcolor=""#cccccc"" border=""0"" cellpadding=""2"" cellspacing=""2"" width=""100%""><tr><td bgcolor=""#dddddd""><b>Name</b></td> <td bgcolor=""#dddddd"">Some Person</td> </tr><tr><td bgcolor=""#dddddd""><b>EDU ID</b></td> <td bgcolor=""#dddddd"">A12345678</td> </tr><tr><td bgcolor=""#dddddd""><b>Phone</b></td> <td bgcolor=""#dddddd"">123-456-7890</td> </tr><tr><td bgcolor=""#dddddd""><b>Address</b></td> <td bgcolor=""#dddddd"">1234 Somewhere Dr.<br>City ST, 12345</td> </tr><tr><td bgcolor=""#dddddd""><b>Email</b></td> <td bgcolor=""#dddddd"">someone@email.com</td> </tr><tr><td bgcolor=""#dddddd""><b>Gender</b></td> <td bgcolor=""#dddddd"">Female</td> </tr><tr><td bgcolor=""#dddddd""><b>Ethnicity</b></td> <td bgcolor=""#dddddd"">Unknown</td> </tr><tr><td bgcolor=""#dddddd""><b>Date of Birth</b></td> <td bgcolor=""#dddddd"">Jan 1st, 1901</td> </tr><tr><td bgcolor=""#dddddd""><b>Class</b></td> <td bgcolor=""#dddddd"">Sophomore</td> </tr><tr><td bgcolor=""#dddddd""><b>Major</b></td> <td bgcolor=""#dddddd"">Biology</td> </tr><tr><td bgcolor=""#dddddd""><b>School</b></td> <td bgcolor=""#dddddd"">University of Somewhere</td> </tr><tr><td bgcolor=""#dddddd""><b>GPA</b></td> <td bgcolor=""#dddddd"">0.00</td> </tr><tr><td bgcolor=""#dddddd"" valign=""top""><b>Availability</b></td> <td bgcolor=""#dddddd""> <table border=""0"" cellspacing=""0"" cellpadding=""0""><tr>",How do I use Nokogiri and Ruby to scrape values from HTML with nested tables?
Copying file contents to another file," As basic as this seems, I simply can't manage to copy the contents of one file to another. Here is my code thus far: <code>  #!/usr/bin/rubyDir.chdir( ""/mnt/Shared/minecraft-server/plugins/Permissions"" )flist = Dir.glob( ""*"" )flist.each do |mod| mainperms = File::open( ""AwesomeVille.yml"" ) if mod == ""AwesomeVille.yml"" puts ""Shifting to next item..."" shift else File::open( mod, ""w"" ) do |newperms| newperms << mainperms end end puts ""Updated #{ mod } with the contents of #{ mainperms }.""end",How do I copy file contents to another file?
Ruby gets / puts only for strings?," I'm new to Ruby and am currently working on some practice code which looks like the following: This code however just puts ten copies of the num variable and doesn't actually multiply the number so I assume I need to make the 'num' variable an integer? I've had no success with this so can anyone show me where I'm going wrong please? <code>  puts 'Hello there, Can you tell me your favourite number?'num = gets.chompputs 'Your favourite number is ' + num + '?'puts 'Well its not bad but ' + num * 10 + ' is literally 10 times better!'",Ruby gets/puts only for strings?
How could a ruby process put limit to its cpu usage?, Let say I want a Ruby process to not use more than 15% of the CPU. Is it possible? How? <code> ,How could a Ruby process put limit to its CPU usage?
ruby gsub: limit replacements," How do you limit the number of replacements made by String#gsub in Ruby?In PHP this can be easy done with preg_replace which takes a parameter for limiting replacements, but I can't figure out how to do this in Ruby. <code> ",How do I limit the number of replacements when using gsub?
read lines of a file in ruby," I was trying to use the following code to read lines from a file. But when reading a file, the contents are all in one line: But this file prints each line separately.I have to use stdin, like ruby my_prog.rb < file.txt, where I can't assume what the line-ending character is that the file uses. How can I handle it? <code>  line_num=0File.open('xxx.txt').each do |line| print ""#{line_num += 1} #{line}""end",How to read lines of a file in Ruby
Help parsing Google search results with Nokogiri," I need help pulling URLs from Google search results and was told to use Nokogiri. I installed it and read over the Nokogiri docs, but have no idea where to start -- it's all Greek to me.I know what I am looking for is the URL of each result, each existing between a <cite> tag. So far all I was able to figure out how to do is pull the search results but I just don't know how to go about pulling specific data from the file. Here is the teeny-tiny bit of code I do have: <code>  serp = Nokogiri::HTML(open(""http://www.google.com/search?num=100&q=stackoverflow""))",How do I parse Google search results with Nokogiri?
How to combine overlapping time ranges? (time ranges union)," I have an array with several time ranges inside: I want to get the same array with the overlapping time ranges combined, so the output for this case will be: So it creates a new time range when to time ranges overlap, and so on. If they dont overlap the will be keep separated. Another example:Input: Output (will be the same because they dont overlap): I was thinking in some recursive approach, but I need some guidance here... <code>  [Tue, 24 May 2011 08:00:00 CEST +02:00..Tue, 24 May 2011 13:00:00 CEST +02:00, Tue, 24 May 2011 16:30:00 CEST +02:00..Tue, 24 May 2011 18:00:00 CEST +02:00, Tue, 24 May 2011 08:00:00 CEST +02:00..Tue, 24 May 2011 09:00:00 CEST +02:00, Tue, 24 May 2011 15:30:00 CEST +02:00..Tue, 24 May 2011 18:00:00 CEST +02:00] [Tue, 24 May 2011 08:00:00 CEST +02:00..Tue, 24 May 2011 13:00:00 CEST +02:00, Tue, 24 May 2011 15:30:00 CEST +02:00..Tue, 24 May 2011 18:00:00 CEST +02:00] [Tue, 24 May 2011 08:00:00 CEST +02:00..Tue, 24 May 2011 13:00:00 CEST +02:00, Tue, 24 May 2011 16:00:00 CEST +02:00..Tue, 24 May 2011 18:00:00 CEST +02:00] [Tue, 24 May 2011 08:00:00 CEST +02:00..Tue, 24 May 2011 13:00:00 CEST +02:00, Tue, 24 May 2011 16:00:00 CEST +02:00..Tue, 24 May 2011 18:00:00 CEST +02:00]",How to combine overlapping time ranges (time ranges union)
Rails hash direct access vs merge, Is there any difference between: and <code>  @attr[:field] = new_value @attr.merge(:field => new_value),Ruby hash direct access vs merge
Converting a binary value to hexadecimal in ruby," I have a situation where I need to convert a binary value to hex in Ruby. My situation is as follows:When bin = ""0000111"", my output should be: hex = ""07"".When bin = ""010001111"", my output should be: hex = ""08f"".Could someone help me out on how to do this? Thanks in advance. <code> ",Converting a binary value to hexadecimal in Ruby
"generate video pixel by pixel, programatically."," I'd like to generate an animation pixel by pixel programmatically. Preferably in Hi-Def, in Python or in Ruby. I thought about using PIL to make each frame and then convert the frames into video. Is there a better way to do this?EDIT: Clarification, this is 2D and I need the pixels to be precise. EDITEDIT:Something like this: Would be awesome.  <code>  frame = Frame()frame.draw(0, 0, 'red')frame.draw(0, 1, 'blue')...frame = Frame()...","generate video pixel by pixel, programmatically"
How can i escape % characters in YAML?, How can I escape % characters in YAML? <code> ,How can I escape % characters in YAML?
"undefined method `name' for ""SystemTimer"":String"," I am having a problem getting an old Ruby on Rails 2 app that hasn't worked in a year to work.I'm trying to run rake test:functionals in the root of my project directory, but am getting undefined method 'name' for ""SystemTimer"":String.I've pasted everything that I believe relevant to the problem here:http://pastebin.com/NgBvystZAlso, when I run rake itself, I getErrors running test:units!Not sure how to debug that.I have copied and pasted everything that I think would be useful to understanding this problem. Your time is greatly appreciated. Thank you. <code> ","Undefined method `name' for ""SystemTimer"":String"
Ruby - remove one level of a nested array," How can you change this array: to this? ClarificationMy apologies for giving an invalid second version. This is what I'm really going for:I want to add [""0"",""zero""] to the beginning of [[""1"",""one""], [""2"",""two""], [""3"",""three""]], to get: I have tried: The above approach produces this, which contains a nesting I don't want: <code>  [[""1"",""one""], [""2"",""two""], [""3"",""three""]] [""1"",""one""], [""2"",""two""], [""3"",""three""] [[""0"",""zero""], [""1"",""one""], [""2"",""two""], [""3"",""three""]] [""0"",""zero""] << [[""1"",""one""], [""2"",""two""], [""3"",""three""]] [[""0"",""zero""], [[""1"",""one""], [""2"",""two""], [""3"",""three""]]]",Remove one level of a nested array
"Ruby/Rails: Is that possible to include multiple modules in a single ""include"" statement ?", Is there a shorter way to do the following? <code>  class MyClass include MyModule1 include MyModule2 include MyModule3end,"Is it possible to include multiple modules in a single ""include"" statement?"
"has_one, :trough => model VS simple method"," I have some issues using has_one, through => model. The best is to show you my case. Everthing works fine. I can do comment.category. The problem is when I create a new comment and set up its article, I have so save the comment to make the association works. Example : has_one, through => model anyway do not set up, build constructor and create method. So, I want to replace my comment model by : Sounds a good idea ? <code>  class Category has_many :articlesendclass Article has_many :comments belongs_to :categoryendclass Comment belongs_to :article has_one :category, :through => :articlesend >> comment = Comment.new >> comment.article = Article.last >> comment.category -> nil >> comment.article.category -> the category >> comment.save >> comment.category -> nil >> comment.reload >> comment.category -> the category class Comment belongs_to :article def category article.category endend","has_one, :through => model VS simple method ?"
"has_one, :through => model VS simple method"," I have some issues using has_one, through => model. The best is to show you my case. Everthing works fine. I can do comment.category. The problem is when I create a new comment and set up its article, I have so save the comment to make the association works. Example : has_one, through => model anyway do not set up, build constructor and create method. So, I want to replace my comment model by : Sounds a good idea ? <code>  class Category has_many :articlesendclass Article has_many :comments belongs_to :categoryendclass Comment belongs_to :article has_one :category, :through => :articlesend >> comment = Comment.new >> comment.article = Article.last >> comment.category -> nil >> comment.article.category -> the category >> comment.save >> comment.category -> nil >> comment.reload >> comment.category -> the category class Comment belongs_to :article def category article.category endend","has_one, :through => model VS simple method ?"
STI's or CTI's? Single Table Inheritance or Class Table Inheritance?," I'm reading about Class Table Inheritance (CTI) and finding I prefer it overall. The question I have is, is there any specific use case for Single Table Inheritance (STI) where you'd use that over CTI?I read http://rhnh.net/2010/07/02/3-reasons-why-you-should-not-use-single-table-inheritance and as far as I know, it's solid. The use case for STI being a difference in behaviour but not data. <code> ",Single Table Inheritance or Class Table Inheritance?
How to calculate number of equal chars in a string?," How would you calculate the intersection of characters between two strings?For example (assuming we would have a method called String.intersection): Ok, boys and girls, thanks for your massive feedback. Some more examples: Some more notes:Wikipedia defines intersection as follows: Intersection of the sets A and B, denoted A B, is the set of all objects that are members of both A and B. The intersection of {1, 2, 3} and {2, 3, 4} is the set {2, 3} <code>  ""abc"".intersection(""ab"") = 2""hello"".intersection(""hallo"") = 4 ""aaa"".intersection(""a"") = 1""foo"".intersection(""bar"") = 0""abc"".intersection(""bc"") = 2""abc"".intersection(""ac"") = 2""abba"".intersection(""aa"") = 2",How to calculate number of chars common to two strings?
Ruby - Why my recursive method from helper does'nt return every value?," I want to display a tree of categories managed with the gem ancestry. I would like to use a helper which will recursively go through the tree and return the categories one by one, for the moment without html tags or content. The category argument is one of the root categories. What should it return?In the web page:It displays only the root level category Sport Beauty AutomobileIn the console: Men Indoor Women Children Water sport GarageIf get them, then it means that the recursion works, but it does not. Why does it return only the first iteration?Also I would like to get them in the following order: but if I want to return category.name, it should be in the last position. Could you please give me your comments?PS: I just found out (during adding tags) that I was using the word ""recursivity"" all along my searches but it doesn't exist, even if many people are using it on stackOveflow ;o) -> ""recursion"", but still I'm stuck** EDIT **Now I use this code: which gives me: But that html is not interpreted and the same code is shown in the displayed webpage. I mean that I see I probably missed something... maybe knowledge oOThx <code>  module CategoriesHelper def display_tree(category) if category.has_children? category.children.each do |sub_category| display_tree(sub_category) puts(sub_category.name) # to check if it goes here end end category.name endend root/child/child-of-child module CategoriesHelper def display_tree(category) tree = ""<div class =\""nested_category\"">#{category.name}"" if category.has_children? category.children.each do |sub_category| tree += ""#{display_tree(sub_category)}"" end end tree += ""</div>"" end end <div class =""nested_category"">Sport <div class =""nested_category"">Men</div> <div class =""nested_category"">Women <div class =""nested_category"">Indoor</div> </div> <div class =""nested_category"">Children</div> <div class =""nested_category"">Water sport</div> </div> <div class =""nested_category"">Beauty</div> <div class =""nested_category"">Automobile <div class =""nested_category"">Garage</div> </div>",Why does my recursive method from helper not return every value?
Is it possible to configure the IRB prompt to change dynamically," I'd like to navigate around the filesystem in IRB and have the prompt change to reflect the current working directory, but I can't figure out how to make the prompt update after each command. Ultimately I'd like to use IRB in day to day work a lot more and let bash slip away. I tried this in my .irbrc: But the IRB prompt is not updated: I'd really like the prompt to change. <code>  require 'fileutils'include FileUtilsIRB.conf[:PROMPT][:CUSTOM] = { :PROMPT_N => ""\e[1m:\e[m "", :PROMPT_I => ""\e[1m#{pwd} >\e[m "", :PROMPT_S => ""FOO"", :PROMPT_C => ""\e[1m#{pwd} >\e[m "", :RETURN => """"}IRB.conf[:PROMPT_MODE] = :CUSTOM julianmann@mango:~ > irb/users/julianmann > puts pwd/users/julianmann/users/julianmann > cd 'dev'/users/julianmann > puts pwd/users/julianmann/dev/users/julianmann > ",Is it possible to configure the IRB prompt to change dynamically?
Is there something like Ruby's interactive shell (irb) for Java?," I spent the last year doing Ruby development, and during that time I discovered irb, which makes running little ""code experiments"" easy and fun. I've recently switched teams and am now doing Java development, and I've found that I really miss my irb window. I would like to do the same thing for Java, but I don't know how.I'm using Eclipse (groan), but Eclipse's bells and whistles are not the same thing. <code> ",How can I obtain an interactive shell (like Ruby's irb) for Java?
Configuring a Redis-backed library on Ruby on Rails with RVM," I'm following the configuration guidelines for installing resque. I'm met with a (OpenURI::HTTPError). I'm using RVM 1.9.2-p180, rails 3.0.6, and POW.'resque-web' fails to start with a 500 Server Error. What the heck is going on here?To replicate problem:Start redis with $ redis-serverStart a worker with $ VVERBOSE=1 QUEUE=file_serve rake environment resque:workTry to start Resque-Web with: RAILS_ENV=development resque-web config/initializers/resque.rbconfig/resque.yml initializers/resque.rb: Terminal: Redis-server (I am connecting an extra client when I hit localhost:6379. Initializers/redis.rb Terminal: (proof of $redis) <code>  development: localhost:6379test: localhost:6379staging: localhost:6379fi: localhost:6379 rails_root = ENV['RAILS_ROOT'] || File.dirname(__FILE__) + '/../..'rails_env = ENV['RAILS_ENV'] || 'development'require 'resque'# require 'yaml'unless defined?($redis) $redis = Redis.new($redis = Redis.new(:host => 'localhost', :port => 6379))endResque.redis = $redis master ~/projects/MyApp $ RAILS_ENV=development resque-web config/initializers/resque.rb[2011-05-20 11:42:48 -0700] Starting 'resque-web'.../Users/boris/.rvm/rubies/ruby-1.9.2-p180/lib/ruby/1.9.1/open-uri.rb:346:in `open_http': 500 Internal Server Error (OpenURI::HTTPError) from /Users/boris/.rvm/rubies/ruby-1.9.2-p180/lib/ruby/1.9.1/open-uri.rb:769:in `buffer_open' from /Users/boris/.rvm/rubies/ruby-1.9.2-p180/lib/ruby/1.9.1/open-uri.rb:203:in `block in open_loop' from /Users/boris/.rvm/rubies/ruby-1.9.2-p180/lib/ruby/1.9.1/open-uri.rb:201:in `catch' from /Users/boris/.rvm/rubies/ruby-1.9.2-p180/lib/ruby/1.9.1/open-uri.rb:201:in `open_loop' from /Users/boris/.rvm/rubies/ruby-1.9.2-p180/lib/ruby/1.9.1/open-uri.rb:146:in `open_uri' from /Users/boris/.rvm/rubies/ruby-1.9.2-p180/lib/ruby/1.9.1/open-uri.rb:671:in `open' from /Users/boris/.rvm/rubies/ruby-1.9.2-p180/lib/ruby/1.9.1/open-uri.rb:33:in `open' from /Users/boris/.rvm/gems/ruby-1.9.2-p180/gems/vegas-0.1.8/lib/vegas/runner.rb:142:in `port_open?' from /Users/boris/.rvm/gems/ruby-1.9.2-p180/gems/vegas-0.1.8/lib/vegas/runner.rb:159:in `check_for_running' from /Users/boris/.rvm/gems/ruby-1.9.2-p180/gems/vegas-0.1.8/lib/vegas/runner.rb:104:in `start' from /Users/boris/.rvm/gems/ruby-1.9.2-p180/gems/vegas-0.1.8/lib/vegas/runner.rb:77:in `initialize' from /Users/boris/.rvm/gems/ruby-1.9.2-p180/gems/resque-1.16.1/bin/resque-web:13:in `new' from /Users/boris/.rvm/gems/ruby-1.9.2-p180/gems/resque-1.16.1/bin/resque-web:13:in `<top (required)>' from /Users/boris/.rvm/gems/ruby-1.9.2-p180/bin/resque-web:19:in `load' from /Users/boris/.rvm/gems/ruby-1.9.2-p180/bin/resque-web:19:in `<main>' [33324] 20 May 11:02:08 - 1 clients connected (0 slaves), 932400 bytes in use[33324] 20 May 11:02:12 - Accepted 127.0.0.1:53028[33324] 20 May 11:02:13 - DB 0: 7 keys (0 volatile) in 8 slots HT.[33324] 20 May 11:02:13 - 2 clients connected (0 slaves), 942976 bytes in use[33324] 20 May 11:02:18 - DB 0: 7 keys (0 volatile) in 8 slots HT. $redis = Redis.new(:host => 'localhost', :port => 6379) > $redis#<Redis client v2.2.0 connected to redis://localhost:6379/0 (Redis v2.2.5)>ruby-1.9.2-p180 :003 > $redis.set('pepper', 'bacon') #=> ""OK""ruby-1.9.2-p180 :004 > $redis.get('pepper') #=> ""bacon""",resque-web fails to start with a 500 Server Error 
How to visit a URL with Ruby via http and read the output," So far I have been able to stitch this together :) But how do I read the output of the service that I would be calling?  <code>  begin open(""http://www.somemain.com/"" + path + ""/"" + blah) rescue OpenURI::HTTPError @failure += painting.permalink else @success += painting.permalink end",How to visit a URL with Ruby via http and read the output?
Problem setting up rspec2 task in Rakefile," I have a Rakefile that looks like this: This isn't working though. For example, if I try to run ""rake -T"", I get: Any thoughts?In case it might be helpful here's the Gemfile: Oh and some versions:Ruby: 1.9.2p180Rake: 0.8.7Bundler: 1.0.13RubyGems: 1.7.2 <code>  require 'rspec/core/rake_task'desc ""Run all RSpec tests""RSpec::Core::RakeTask.new(:spec) code/projects/bellybuster[master]% rake -T --trace(in /Users/craig/code/projects/bellybuster)rake aborted!no such file to load -- rspec/core/rake_task/Users/craig/.rvm/rubies/ruby-1.9.2-p180/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'/Users/craig/.rvm/rubies/ruby-1.9.2-p180/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'/Users/craig/code/projects/bellybuster/Rakefile:1:in `<top (required)>'/Users/craig/.rvm/gems/ruby-1.9.2-p180/gems/rake-0.8.7/lib/rake.rb:2383:in `load' source :rubygemsgemspec",Ssetting up rspec2 task in Rakefile
Rail's 'Gotchas' and learning curve - will ever stop?," I've been developing a new rails project for a few weeks, and while I am amazed at the awesome plugins and some of the really great features in the frameworks... I am a little disappointed too. And I am worried.I think I made a mistake.Should I press on, or go back to what I was familiar with? (Java/Spring)It seems that unless you are looking for ""simple examples"", googling for the exceptions to the rule, special cases and so on really hampers productivity and is increasingly becoming the norm for me.Documentation and examples from the main site, blogs, screencasts, etc. are mostly out of date. For every 5-10 examples that are out there, 1 of them is actually correct.Doing anything new that should ""just work"" almost never does. I try and following documentation and examples, but my results seem to vary and I discover problems never mentioned in the documentation and examples. This seems to happen all the time actually.My experience with trying out CoffeeScript and it's integration with Rails was a disaster. Not being able to see what the problem is whenever a ""compiler error"" occurs is beyond frustrating.ActiveRelation is really awesome, until you need to make a query that joins 7 tables. Then it starts to break down. I think it's possible that you can get that 7-table join query done in Hibernate quicker and finished reliably the first time you are learning it.Testing is actually really hard in Rails. There's just too much ""Magic"" going on. Since Ruby is dynamic, I have no idea what I need to call to test something appropriately. There always seems to be exceptions to the rule. For example, Devise works like you would expect... until you want to test Devise in helpers. It just won't work, so you have to invent the Devise-generated methods in your tests to make the tests pass. You don't need to do this for controllers.There are some blogs that teach how to test using Rails, but they are extremely trivial and not very helpful. Some of them are just bad actually. I found how to effective test validations in a far superior manner than many of the blogs I found for example. I just find that I am often on my own when it comes to testing.Why does images and stylesheets not work properly when you switch to production for? This is insane. Tons of people ask this if you google it... yet the framework doesn't ""just work"".I am scared to death to deploy this application eventually. The production version doesn't seem to work anything like the development version would. Scary.For some reason, after adding jquery-rails and devise, the authentication token wasn't getting passed during ajax requests. I had to add the 4 lines of javascript code to make it work. This took me 5 hours. In Java, because you have proper sessions, you never even need to think about this type of stuff.Tests run really slow. I have about 780 tests, and it already takes much longer than a Java project which has 1800 tests.Testing the application in the browser is really slow. It takes like 1/4 of a second to render some of the pages... and there isn't even that much ORM action going on! Even for pages with 1 database query, it takes 100-200 milliseconds. This is crazy.Documentation is often out of date. For example, trying to override things in Devise was a pain because the documentation actually told me to do the wrong thing. Only after hours of googling and waiting 48 hours on another forum was I able to have someone tell me what I needed to do. All I wanted to do was have the login form reject a user where User.enabled was false. That's it. It turns out, I was overriding ""active?"" instead of ""active_for_authentication?"" - which was an error in the RDoc's.The ORM behaves in really strange ways that are not intuitive at all. Inserts/updates work differently when you are associating new objects. It also doesn't cascade like Hibernate would... which makes me suspect that it's not tracking dirty objects? If it is... then why isn't cascading set by default? Things like this are hardly good defaults. Isn't Rails supposed to be great at good defaults?After 2 weeks, the number of ""gotchas"" hasn't really slowed down. I am really worried and scared. I know Java isn't immune to gotchas and problems, but I generally ran into problems about 2-3 times a month - not 30 in one week.I am almost thinking the lack of agility when using Java/Spring is not much of a burden now when you consider how stable, fast and predictable the platform is. You maybe write a bit more code, but you know exactly what's going on... you never really deal with silent failures... and things do tend to work a lot more reliably. I am starting to question using Rails for this new project. <code> ",Rail's 'Gotchas' and learning curve - will it ever stop?
nokogiri ruby xpath - get all elements by partial match," I'm trying to use Nokogiri to display results from a URL. (essentially scraping a URL). I have some HTML which is similar to: So I need to then find all the elements which begin with the word ""matt"". What I need to do is save the value of the element and the element name so I can reference it next time.. so I need to capture I haven't worked out how to capture the element HTML, but here's what I have so far for the element (It doesnt work!) <code>  <p class=""mattFacer"">Matty</p><p class=""mattSmith"">Matthew</p><p class=""suzieSmith"">Suzie</p> ""Matty"" and ""<p class='mattFacer'>""""Matthew"" and ""<p class='mattSmith'>"" doc = Nokogiri::HTML(open(url))tmp = """"doc.xpath(""[class*=matt"").each do |item| tmp += item.textend@testy2 = tmp",Get all elements by partial match of class attribute
fastercsv error with ruby 1.9.2 -- please help," I have an existing rails application I'm running on ruby 1.9.2 and linux its rails version is and it has a GEMFILE as well, in its vendor/gems directory it has 'fastercsv-1.5.4' gemand in its migrations (in two migrations) it has required the gem 'fastercsv' But when I do it fails the migration claiming ""Please switch to Ruby 1.9's standard CSV library. It's FasterCSV plus support for Ruby 1.9's m17n encoding engine.""and I have found out the message comes from gems 'faster_csv.rb' file. as it has a condition to check the ruby version Can someone tell me how to fix this issue. Please note 'fastercsv' has not been added to the GEMFILE. <code>  rails 2.3.8 require 'fastercsv' rake db:migrate if RUBY_VERSION >= ""1.9"" class FasterCSV def self.const_missing(*_) raise NotImplementedError, ""Please switch to Ruby 1.9's standard CSV "" + ""library. It's FasterCSV plus support for "" + ""Ruby 1.9's m17n encoding engine."" end def self.method_missing(*_) const_missing end def method_missing(*_) self.class.const_missing end end-- and more code",fastercsv error with ruby 1.9.2
"Ruby, how I can check all elements in an array have the value 9 ? (Fastest method)"," I need a very fast way to determine if an array consits only of integers with the value of 9. Here is my current solution: Can you do it faster? <code>  input = [9,9,9,9,9,9,9,9,9,9,9,9]input.uniq == [9]",Fastest method to see if all elements in an array have a particular value
Tutorials or screencasts on building a REST api on Rails," I am looking to build a REST webservice on Rails to serve as the server side component to my mobile app. Can someone point out some tutorials or screencasts on building REST webservices for someone who is learning Rails?The main features I am looking for are:Authorization(user id and password validation).Posting data from the client (mobile app) to the server database using REST APII am also okay if you could point me to some book where content on creating a rest api is available.It would also be great if someone could post a bit of code to get me started on this.I am relatively new to Rails and have almost finished the book ""Ruby on Rails Tutorials"" by Michael Hartl. This is my only experience with Rails, so far.Thanks. <code> ",Tutorials or screencasts on building a REST web service on Rails
Tutorials or screencasts on building a REST api(Web service) on Rails," I am looking to build a REST webservice on Rails to serve as the server side component to my mobile app. Can someone point out some tutorials or screencasts on building REST webservices for someone who is learning Rails?The main features I am looking for are:Authorization(user id and password validation).Posting data from the client (mobile app) to the server database using REST APII am also okay if you could point me to some book where content on creating a rest api is available.It would also be great if someone could post a bit of code to get me started on this.I am relatively new to Rails and have almost finished the book ""Ruby on Rails Tutorials"" by Michael Hartl. This is my only experience with Rails, so far.Thanks. <code> ",Tutorials or screencasts on building a REST web service on Rails
Strip non alphanumeric characters from a string & Keep spaces," I want to create a regex that removes all non-alphanumber characters but keeps spaces. This is to clean search input before it hits the db. Here's what I have so far: Problem here is it removes all the spaces. Solutions on how to retain spaces? <code>  @search_query = @search_query.gsub(/[^0-9a-z]/i, '')",How do I strip non alphanumeric characters from a string and keep spaces?
way to see which rails controller/model is serving the page?," This might be a slightly odd question, but I was wondering if anyone know a Rails shortcut/system variable or something which would allow me to keep track of which controller is serving a page and which model is called by that controller. Obviously I am building the app so I know, but I wanted to make a more general plugin that would able to get this data retroactively without manually going through it.Is there any simple shortcut for this? <code> ",Way to see which rails controller/model is serving the page?
"In a Sinatra App on Heroku, Session Is Not Shared Across Dynos.", Which makes sense. But what are some preferred work arounds for this issue? <code> ,"In a Sinatra App on Heroku, Session Is Not Shared Across Dynos"
rspec how to run a single test?," I have the following file: What command in terminal do I use to run just that spec and in what directory do I run the command?My gem file: Spec file: <code>  /spec/controllers/groups_controller_spec.rb # Test ENVIRONMENT GEMSgroup :development, :test do gem ""autotest"" gem ""rspec-rails"", ""~> 2.4"" gem ""cucumber-rails"", "">=0.3.2"" gem ""webrat"", "">=0.7.2"" gem 'factory_girl_rails' gem 'email_spec'end require 'spec_helper'describe GroupsController do include Devise::TestHelpers describe ""GET yourgroups"" do it ""should be successful and return 3 items"" do Rails.logger.info 'HAIL MARRY' get :yourgroups, :format => :json response.should be_success body = JSON.parse(response.body) body.should have(3).items # @user1 has 3 permissions to 3 groups end endend",How to run a single RSpec test?
what's the equivalent of ruby's pnormaldist in haskell?," As seen here: http://www.evanmiller.org/how-not-to-sort-by-average-rating.htmlHere's the Ruby code itself, implemented in the Statistics2 library: <code>  # inverse of normal distribution ([2])# Pr( (-\infty, x] ) = qn -> xdef pnormaldist(qn) b = [1.570796288, 0.03706987906, -0.8364353589e-3, -0.2250947176e-3, 0.6841218299e-5, 0.5824238515e-5, -0.104527497e-5, 0.8360937017e-7, -0.3231081277e-8, 0.3657763036e-10, 0.6936233982e-12] if(qn < 0.0 || 1.0 < qn) $stderr.printf(""Error : qn <= 0 or qn >= 1 in pnorm()!\n"") return 0.0; end qn == 0.5 and return 0.0 w1 = qn qn > 0.5 and w1 = 1.0 - w1 w3 = -Math.log(4.0 * w1 * (1.0 - w1)) w1 = b[0] 1.upto 10 do |i| w1 += b[i] * w3**i; end qn > 0.5 and return Math.sqrt(w1 * w3) -Math.sqrt(w1 * w3)end",What's the equivalent of Ruby's pnormaldist statistics function in Haskell?
Why does the =~ operator only sometiems have side effects?," I've noticed a side effect in Ruby/Oniguruma that is only present in 1 out of 4 seemingly equivalent statements. Why is the variable day defined in 009, but not in 003, 005 or 007? nb#1: It's the same regex and the same string in all four cases.nb#2: I've verified the behavior in MS Windows and Ubuntu Linux. <code>  irb(main):001:0> r = /(?<day>\d\d):(?<mon>\d\d)/=> /(?<day>\d\d):(?<mon>\d\d)/irb(main):002:0> r =~ ""24:12""=> 0irb(main):003:0> dayNameError: undefined local variable or method `day' irb(main):004:0> ""24:12"" =~ r=> 0irb(main):005:0> dayNameError: undefined local variable or method `day'irb(main):006:0> ""24:12"" =~ /(?<day>\d\d):(?<mon>\d\d)/=> 0irb(main):007:0> dayNameError: undefined local variable or method `day'irb(main):008:0> /(?<day>\d\d):(?<mon>\d\d)/ =~ ""24:12""=> 0irb(main):009:0> day=> ""24""",Why does the =~ operator only sometimes have side effects?
What is the proper way to sign_in as a Devise user for controller tests in Rails?," I am on a quest to make my Rails tests faster. I only have 520 tests, but they take 62 seconds to run in bash, and 82 seconds to run in Rubymine.As an example of a typical controller test, I was using this code to sign_in as a @user and create the basic @comment in a CommentsController for my RSpec controller tests: As you might realize... this is slow. It builds a @user, but also builds the associations for that user. Same for the @comment.So I thought calling Factory.build(:user) would solve it... but I get weird errors. For example, current_user returns nil.So... I decided to use Factory.build() and stub out all the before filters in my parent controller. However, my rspec log still says a TON of inserts are hitting the database when I inspect the RSPec log afterwards (we are talking hundreds of lines of code for just 3 tests!) The sad fact is, the above before(:each) block has ZERO effect on test performance. As I discovered, calling Factory.build() will still internally call Factory.create() on the child associations.Here is a before(:each) block that effectively removes the junk produced in the RSpec log. It gave me a 35-40% test performance boost This makes the tests run faster, but it's also ugly as sin. We can't seriously write this for every test... do we? That's nuts. I'm not doing it.I also want to point out that any one of these Factory.build() lines still takes about .15 seconds even though they are NOT hitting the database! Running only 3 tests still results in about .3 to .35 seconds of time taken up by factory_girl PER test! I think that is totally unacceptable. If you remove the Factory.build() lines, the tests run in 0.00001 seconds.I think the jury is in: factory_girl is one really slow library. Is the only solution to not use it?Here is my factories.rb: And interesting benchmark. It takes .1 to .14 seconds on average to make a call to Factory.create(:user): Even a Factory.build(:user) takes forever... and this is with :default_strategy => :build turned on! Clearly this is evidence that something is wrong with factory_girl. The solution is to get rid of it or make sure it's using Factory.build. That is the answer.Since I have basically solved my own problem, I am wondering why Factory_girl is so popular, and why is it ""common wisdom""? One can objectively conclude that whatever benefits may be gained by using Factory Girl - and there's a lot of nice things about it - it is not worth the performance cost. I am sure a better factory gem could be developed that is much more performant... but factory_girl is unfortunately and regretfully not it.My solution below uses basic object instantiation and stubs, and the tests continue to pass. I think using basic Ruby, stubs and filling in the object values manually on a per-test basis is the 'right' thing to do if you want to avoid fixtures and also get high performance when running tests. <code>  before(:each) do @user = Factory.create(:user) sign_in @user @comment = Factory.create(:comment)end before(:each) do @user = Factory.build(:user) #sign_in @user controller.stub(:authenticate_user!) #before_filter controller.stub(:add_secure_model_data) #before_filter controller.stub(:current_user).and_return(@user) @comment = Factory.build(:comment) end before(:each) do @user = Factory.build(:user, :role => Factory.build(:role)) #sign_in @user controller.stub(:authenticate_user!) controller.stub(:add_secure_model_data) controller.stub(:current_user).and_return(@user) # both of these are still super slow. WTF?! @site_update = Factory.build(:site_update, :id => 5, :author => Factory.build(:user, :role => Factory.build(:role))) @comment = Factory.build(:comment, :author => Factory.build(:user, :role => Factory.build(:role)), :commentable => @site_update) end Factory.define :role do |f| f.name ""Admin""endFactory.define :user do |f| f.first_name ""Banoo"" f.last_name ""Smith"" f.sequence(:email) { |n| ""Banoo.Smith#{n}@gmail.com"" } f.password ""secretpassword"" f.association :roleendFactory.define :admin do |f| f.first_name ""Banoo"" f.last_name ""Smith"" f.sequence(:email) { |n| ""admin#{n}@gmail.com"" } f.password ""secretpassword"" f.association :roleendFactory.define :course_provider do |f| f.first_name ""Josh"" f.last_name ""Bolson"" f.sequence(:email) { |n| ""josh.bolson#{n}@gmail.com"" } f.password ""secretpassword"" f.association :roleendFactory.define :director do |f| f.first_name ""Director"" f.last_name ""Dude"" f.sequence(:email) { |n| ""director#{n}@gmail.com"" } f.password ""secretpassword"" f.association :roleendFactory.define :instructor do |f| f.first_name ""Instructor"" f.last_name ""Dude"" f.sequence(:email) { |n| ""instructor#{n}@gmail.com"" } f.password ""secretpassword"" f.association :roleendFactory.define :trainee do |f| f.first_name ""Trainee"" f.last_name ""Dude"" f.sequence(:email) { |n| ""trainee#{n}@gmail.com"" } f.password ""secretpassword"" f.association :roleendFactory.define :private_message do |f| f.subject ""Subject"" f.content ""content"" f.is_deleted_by_sender false f.association :sender, :factory => :userendFactory.define :recipient do |f| f.is_read false f.is_deleted false f.association :receiver, :factory => :user f.association :private_messageendFactory.define :course_template do |f| f.name ""name"" f.description ""description"" f.association :course_providerendFactory.define :site_update do |f| f.subject ""Subject"" f.intro ""intro"" f.content ""content"" f.association :author, :factory => :userendFactory.define :comment do |f| f.content ""content"" f.association :author, :factory => :user f.association :commentable, :factory => :site_updateendFactory.define :country do |f| f.name ""Liberty""endFactory.define :province do |f| f.name ""Freedom"" f.association :countryendFactory.define :payment_plan do |f| f.name ""name"" f.monthly_amount 79 f.audience ""Enterprises"" f.active_courses ""500-2000""endFactory.define :company do |f| f.name ""name"" f.phone_number ""455-323-2132"" f.address ""address"" f.postal_code ""N7G-5F4"" f.association :province f.association :payment_planendFactory.define :company_user do |f| f.first_name ""Dan"" f.last_name ""Grayson"" f.sequence(:email) { |n| ""dan.grayson#{n}@gmail.com"" } f.password ""secretpassword"" f.association :role f.association :companyendFactory.define :course do |f| f.notes ""notes"" f.difficulty 100 f.association :course_template f.association :instructor, :factory => :company_userendFactory.define :study_group do |f| f.name ""name""endFactory.define :help_category do |f| f.name ""name""endFactory.define :help_document do |f| f.question ""question"" f.content ""content"" f.association :category, :factory => :help_categoryendFactory.define :tag do |f| f.name ""name""endFactory.define :partial_mapping do |f| f.from_suffix ""ing"" f.to_suffix ""ing""endFactory.define :newsletter do |f| f.subject ""subject"" f.content ""content""endFactory.define :press_contact do |f| f.full_name ""Banoo Smith"" f.email 'Banoo.Smith@gmail.com' f.phone_number ""455-323-2132"" f.address ""address"" f.postal_code ""N9B-3W5"" f.association :provinceendFactory.define :press_release do |f| f.headline ""Headline"" f.origin ""origin"" f.intro ""intro"" f.body ""body"" f.association :contact, :factory => :press_contactendFactory.define :theme do |f|end $ rails runner 'Benchmark.bm {|x| x.report { 100.times { Factory.create(:user) } } }' user system total real 9.940000 0.080000 10.020000 ( 14.872736) $ rails runner 'Benchmark.bm {|x| x.report { 100.times { Factory.build(:user) } } }' user system total real 9.350000 0.030000 9.380000 ( 11.798339)",How can I get Factory Girl to NEVER hit the database if I am calling Factory.build in order to make my controller tests FAST?
How do you test controllers FAST in Rails using Devise? Mine are sooo SLOW - 1.2 seconds for 3 tests!," I am on a quest to make my Rails tests faster. I only have 520 tests, but they take 62 seconds to run in bash, and 82 seconds to run in Rubymine.As an example of a typical controller test, I was using this code to sign_in as a @user and create the basic @comment in a CommentsController for my RSpec controller tests: As you might realize... this is slow. It builds a @user, but also builds the associations for that user. Same for the @comment.So I thought calling Factory.build(:user) would solve it... but I get weird errors. For example, current_user returns nil.So... I decided to use Factory.build() and stub out all the before filters in my parent controller. However, my rspec log still says a TON of inserts are hitting the database when I inspect the RSPec log afterwards (we are talking hundreds of lines of code for just 3 tests!) The sad fact is, the above before(:each) block has ZERO effect on test performance. As I discovered, calling Factory.build() will still internally call Factory.create() on the child associations.Here is a before(:each) block that effectively removes the junk produced in the RSpec log. It gave me a 35-40% test performance boost This makes the tests run faster, but it's also ugly as sin. We can't seriously write this for every test... do we? That's nuts. I'm not doing it.I also want to point out that any one of these Factory.build() lines still takes about .15 seconds even though they are NOT hitting the database! Running only 3 tests still results in about .3 to .35 seconds of time taken up by factory_girl PER test! I think that is totally unacceptable. If you remove the Factory.build() lines, the tests run in 0.00001 seconds.I think the jury is in: factory_girl is one really slow library. Is the only solution to not use it?Here is my factories.rb: And interesting benchmark. It takes .1 to .14 seconds on average to make a call to Factory.create(:user): Even a Factory.build(:user) takes forever... and this is with :default_strategy => :build turned on! Clearly this is evidence that something is wrong with factory_girl. The solution is to get rid of it or make sure it's using Factory.build. That is the answer.Since I have basically solved my own problem, I am wondering why Factory_girl is so popular, and why is it ""common wisdom""? One can objectively conclude that whatever benefits may be gained by using Factory Girl - and there's a lot of nice things about it - it is not worth the performance cost. I am sure a better factory gem could be developed that is much more performant... but factory_girl is unfortunately and regretfully not it.My solution below uses basic object instantiation and stubs, and the tests continue to pass. I think using basic Ruby, stubs and filling in the object values manually on a per-test basis is the 'right' thing to do if you want to avoid fixtures and also get high performance when running tests. <code>  before(:each) do @user = Factory.create(:user) sign_in @user @comment = Factory.create(:comment)end before(:each) do @user = Factory.build(:user) #sign_in @user controller.stub(:authenticate_user!) #before_filter controller.stub(:add_secure_model_data) #before_filter controller.stub(:current_user).and_return(@user) @comment = Factory.build(:comment) end before(:each) do @user = Factory.build(:user, :role => Factory.build(:role)) #sign_in @user controller.stub(:authenticate_user!) controller.stub(:add_secure_model_data) controller.stub(:current_user).and_return(@user) # both of these are still super slow. WTF?! @site_update = Factory.build(:site_update, :id => 5, :author => Factory.build(:user, :role => Factory.build(:role))) @comment = Factory.build(:comment, :author => Factory.build(:user, :role => Factory.build(:role)), :commentable => @site_update) end Factory.define :role do |f| f.name ""Admin""endFactory.define :user do |f| f.first_name ""Banoo"" f.last_name ""Smith"" f.sequence(:email) { |n| ""Banoo.Smith#{n}@gmail.com"" } f.password ""secretpassword"" f.association :roleendFactory.define :admin do |f| f.first_name ""Banoo"" f.last_name ""Smith"" f.sequence(:email) { |n| ""admin#{n}@gmail.com"" } f.password ""secretpassword"" f.association :roleendFactory.define :course_provider do |f| f.first_name ""Josh"" f.last_name ""Bolson"" f.sequence(:email) { |n| ""josh.bolson#{n}@gmail.com"" } f.password ""secretpassword"" f.association :roleendFactory.define :director do |f| f.first_name ""Director"" f.last_name ""Dude"" f.sequence(:email) { |n| ""director#{n}@gmail.com"" } f.password ""secretpassword"" f.association :roleendFactory.define :instructor do |f| f.first_name ""Instructor"" f.last_name ""Dude"" f.sequence(:email) { |n| ""instructor#{n}@gmail.com"" } f.password ""secretpassword"" f.association :roleendFactory.define :trainee do |f| f.first_name ""Trainee"" f.last_name ""Dude"" f.sequence(:email) { |n| ""trainee#{n}@gmail.com"" } f.password ""secretpassword"" f.association :roleendFactory.define :private_message do |f| f.subject ""Subject"" f.content ""content"" f.is_deleted_by_sender false f.association :sender, :factory => :userendFactory.define :recipient do |f| f.is_read false f.is_deleted false f.association :receiver, :factory => :user f.association :private_messageendFactory.define :course_template do |f| f.name ""name"" f.description ""description"" f.association :course_providerendFactory.define :site_update do |f| f.subject ""Subject"" f.intro ""intro"" f.content ""content"" f.association :author, :factory => :userendFactory.define :comment do |f| f.content ""content"" f.association :author, :factory => :user f.association :commentable, :factory => :site_updateendFactory.define :country do |f| f.name ""Liberty""endFactory.define :province do |f| f.name ""Freedom"" f.association :countryendFactory.define :payment_plan do |f| f.name ""name"" f.monthly_amount 79 f.audience ""Enterprises"" f.active_courses ""500-2000""endFactory.define :company do |f| f.name ""name"" f.phone_number ""455-323-2132"" f.address ""address"" f.postal_code ""N7G-5F4"" f.association :province f.association :payment_planendFactory.define :company_user do |f| f.first_name ""Dan"" f.last_name ""Grayson"" f.sequence(:email) { |n| ""dan.grayson#{n}@gmail.com"" } f.password ""secretpassword"" f.association :role f.association :companyendFactory.define :course do |f| f.notes ""notes"" f.difficulty 100 f.association :course_template f.association :instructor, :factory => :company_userendFactory.define :study_group do |f| f.name ""name""endFactory.define :help_category do |f| f.name ""name""endFactory.define :help_document do |f| f.question ""question"" f.content ""content"" f.association :category, :factory => :help_categoryendFactory.define :tag do |f| f.name ""name""endFactory.define :partial_mapping do |f| f.from_suffix ""ing"" f.to_suffix ""ing""endFactory.define :newsletter do |f| f.subject ""subject"" f.content ""content""endFactory.define :press_contact do |f| f.full_name ""Banoo Smith"" f.email 'Banoo.Smith@gmail.com' f.phone_number ""455-323-2132"" f.address ""address"" f.postal_code ""N9B-3W5"" f.association :provinceendFactory.define :press_release do |f| f.headline ""Headline"" f.origin ""origin"" f.intro ""intro"" f.body ""body"" f.association :contact, :factory => :press_contactendFactory.define :theme do |f|end $ rails runner 'Benchmark.bm {|x| x.report { 100.times { Factory.create(:user) } } }' user system total real 9.940000 0.080000 10.020000 ( 14.872736) $ rails runner 'Benchmark.bm {|x| x.report { 100.times { Factory.build(:user) } } }' user system total real 9.350000 0.030000 9.380000 ( 11.798339)",How can I get Factory Girl to NEVER hit the database if I am calling Factory.build in order to make my controller tests FAST?
"rails 3: is there a ruby shortcut for ""if (number in range) then..."""," Is there a Ruby shortcut for the following? I thought I saw something to that effect, but cannot find a reference to it. Of course it's hard to lookup when you don't know what operator you're looking for. <code>  if (x > 2) and (x < 10) do_something_hereend","Ruby shortcut for ""if (number in range) then..."""
Ruby: Retrivng part of a string/text value?, I want a way to only display a set number of characters from a string/text value. I want it to work in a way that if my_string.length > 40 then only get first 40 characters from my_string? <code> ,Ruby: How do I retrieve part of a string?
Ruby: Retrieving part of a string/text value?, I want a way to only display a set number of characters from a string/text value. I want it to work in a way that if my_string.length > 40 then only get first 40 characters from my_string? <code> ,Ruby: How do I retrieve part of a string?
How to find each instance of a class in ruby," Is there a way to get all the objects that are of a certain class in Ruby?To clarify: So, is there a way I could somehow retrieve references those two objects (pikatchu and charmander)?I actually thought of shoving it all into a class array via initialize, but that could potentially grow big, and I am assuming there might be a native Ruby approach to it. <code>  class Pokemonendpikatchu = Pokemon.newcharmander = Pokemon.new",How to find each instance of a class in Ruby
Correct way to TDD methods that call other methods," I need some help with some TDD concepts. Say I have the following code Now I'm not sure what to write my unit tests for. If I write unit tests for the execute method doesn't that pretty much cover my tests for create_new_character and display_inventory? Or am I testing the wrong stuff at that point? Should my test for the execute method only test that execution is passed off to the correct methods and stop there? Then should I write more unit tests that specifically test create_new_character and display_inventory? <code>  def execute(command) case command when ""c"" create_new_character when ""i"" display_inventory endenddef create_new_character # do stuff to create new characterenddef display_inventory # do stuff to display inventoryend",Correct way to TDD methods that calls other methods
":Could not find bundler"" error"," When I try to do bundler update I get this error: I'm new to Ruby, can someone tell me what would cause this? Rake 0.8.7 is installed. <code>  .rvm/rubies/ruby-1.9.2-p180/lib/ruby/site_ruby/1.9.1/rubygems/dependency.rb:247:in`to_specs': Could not find bundler (>= 0) amongst[rake-0.8.7, rake-0.8.7, rubygems-update-1.8.4] (Gem::LoadError)","Rails: ""Could not find bundler"" (2.2.11) required by Gemfile.lock. (Gem::GemNotFoundException)"
"""Could not find bundler"" error"," When I try to do bundler update I get this error: I'm new to Ruby, can someone tell me what would cause this? Rake 0.8.7 is installed. <code>  .rvm/rubies/ruby-1.9.2-p180/lib/ruby/site_ruby/1.9.1/rubygems/dependency.rb:247:in`to_specs': Could not find bundler (>= 0) amongst[rake-0.8.7, rake-0.8.7, rubygems-update-1.8.4] (Gem::LoadError)","Rails: ""Could not find bundler"" (2.2.11) required by Gemfile.lock. (Gem::GemNotFoundException)"
"Ruby - What is the difference between using pipes, curley braces, square brackets, and parentheses for percent functions?"," I have seen different people use different types of braces/brackets for this. I tried them out in script console, and they all work. Why do they all work and does it matter which is used? Actually, much more varaiety of characters can be used. Any non-alphanumeric character except = can be used. <code>  %w|one two|%w{one two}%w[one two]%w(one two) %w!a!%w@b@%w#c#%w$d$%w%e%%w^f^%w&g&%w*h*%w(i)%w_j_%w-k-%w+l+%w\m\%w|n|%w`o`%w~p~%w[q]%w{r}%w;s;%w:t:%w'u'%w""v""%w,w,%w<x>%w.y.%w/z/%w?aa?",Why are different delimiters used in percent notation?
Rails. Insert ruby code in html tags.," I have a partial like: How can I insert a value like o.office into an attribute? value=""#{o.office}"" does not work. <code>  <% office.map do |o| %> <input id='city' name='company[company_office][0][city]' value=.... type='text' /><% end %>",How do I insert variable values into HTML tags in ERB templates?
Rails caches_page conditional," Suppose that I have controller home_controller.rb with action index.I want to cache index page so I'm doing: but want it to cache only for users that are not signed in. If I'll make conditional like: Page will be cached while first not logged in user comes. Now every logged in user also see not-logged in content. Is there a way to separate this action without changing url? <code>  caches_page :index caches_page :index, :if => :user_not_signed_in?",Conditional Page Caching [Solution: Conditional Fragment Caching]
using negative conditions within gsub expressions," Is it possible to use negative matches within gsub expressions?I want to replace strings starting by hello except those starting by hello Peter What should I put instead of the @? <code>  my-string.gsub(/^hello@/i, '')",using negative conditions within regular expressions
Ruby class inheritance: Double less than?," What is this << for? I searched, but the results only tell me about string concatenation... <code>  class << Awesomeness",Ruby class inheritance: What is `<<` (double less than)?
Ruby class inheritance: What is `<<` (double less than) ?," What is this << for? I searched, but the results only tell me about string concatenation... <code>  class << Awesomeness",Ruby class inheritance: What is `<<` (double less than)?
Ruby - When to use nested classes and classes nested in modules?," I'm pretty familiar with when to use subclasses and modules, but more recently I've been seeing nested classes like this: As well as classes nested in modules like so: Either documentation and articles are sparse or I'm not educated on the subject enough to grope for the right search terms, but I can't seem to locate much information on the topic.Could somebody provide examples or links to posts on why/when those techniques would be used? <code>  class Foo class Bar # do some useful things endend module Baz class Quux # more code endend",When to use nested classes and classes nested in modules?
[Debian] Can't Install Curb - Having problems with native extensions.," I'm trying to install the curb gem on my Debian machine but I'm having a hard time building the gem with native extensions. I'm using RVM.Just a list of things I'm using:debianbundlerrvmruby-1.9.2-p180curb I'm told I have to install the following packages and I've done so: When I go ahead and do as such:gem install curb checking for curl-config... yeschecking for curlinfo_redirect_time... * extconf.rb failed *Could not create Makefile due to some reason, probably lack ofnecessary libraries and/or headers. Check the mkmf.log file for moredetails. You may need configuration options.Provided configuration options: --with-opt-dir --without-opt-dir --with-opt-include --without-opt-include=${opt-dir}/include --with-opt-lib --without-opt-lib=${opt-dir}/lib --with-make-prog --without-make-prog --srcdir=. --curdir --ruby=/usr/local/rvm/rubies/ruby-1.9.2-p180/bin/ruby --with-curl-dir --with-curl-include --without-curl-include=${curl-dir}/include --with-curl-lib --without-curl-lib=${curl-dir}/lib/usr/local/rvm/rubies/ruby-1.9.2-p180/lib/ruby/1.9.1/mkmf.rb:368:in try_do': The complier failed to generate an executable file. (RuntimeError)You have to install development tools first. from /usr/local/rvm/rubies/ruby-1.9.2-p180/lib/ruby/1.9.1/mkmf.rb:446:intry_compile' from extconf.rb:51:in block in have_constant' from /usr/local/rvm/rubies/ruby-1.9.2-p180/lib/ruby/1.9.1/mkmf.rb:693:inblock in checking_for' from /usr/local/rvm/rubies/ruby-1.9.2-p180/lib/ruby/1.9.1/mkmf.rb:280:in block (2 levels) in postpone' from /usr/local/rvm/rubies/ruby-1.9.2-p180/lib/ruby/1.9.1/mkmf.rb:254:inopen' from /usr/local/rvm/rubies/ruby-1.9.2-p180/lib/ruby/1.9.1/mkmf.rb:280:in block in postpone' from /usr/local/rvm/rubies/ruby-1.9.2-p180/lib/ruby/1.9.1/mkmf.rb:254:inopen' from /usr/local/rvm/rubies/ruby-1.9.2-p180/lib/ruby/1.9.1/mkmf.rb:276:in postpone' from /usr/local/rvm/rubies/ruby-1.9.2-p180/lib/ruby/1.9.1/mkmf.rb:692:inchecking_for' from extconf.rb:43:in have_constant' from extconf.rb:60:in'I don't any way around this, any ideas?Thanks buds. <code>  sudo apt-get install libcurl3 libcurl3-gnutls libcurl4-openssl-dev Building native extensions. This could take a while...ERROR: Error installing curb: ERROR: Failed to build gem native extension. /usr/local/rvm/rubies/ruby-1.9.2-p180/bin/ruby extconf.rb",Can't Install Curb - Having problems with native extensions.
Can you use mutiple conditonals in SASS/SCSS CSS," I am using SCSS code for styling my ruby app and am trying to write my own ""rounded"" mixin to help out with multi-browser border rounding.Currently I have the following: However, it appears that SASS can only handle one conditional in the if statements? Is there a way round this or do I have to do four if statements for each rounded corner? <code>  @mixin rounded($corner: all , $radius: 8px) { @if $corner==all || $corner==bottom || $corner == right || $corner==bottom-right{webkit-border-bottom-right-radius: $radius;} @if $corner==all || $corner==bottom || $corner == left || $corner==bottom-left{-webkit-border-bottom-left-radius: $radius;} @if $corner==all || $corner==top || $corner == right || $corner==top-right{-webkit-border-top-right-radius: $radius;} @if $corner==all || $corner==bottom || $corner == left || $corner==top-left{-webkit-border-top-left-radius: $radius;} @if $corner==all || $corner==bottom || $corner == right || $corner==bottom-right{-khtml-border-radius-bottomright: $radius;} @if $corner==all || $corner==bottom || $corner == left || $corner==bottom-left{-khtml-border-radius-bottomleft: $radius;} @if $corner==all || $corner==top || $corner == right || $corner==top-right{-khtml-border-radius-topright: $radius;} @if $corner==all || $corner==bottom || $corner == left || $corner==top-left{-khtml-border-radius-topleft: $radius;} @if $corner==all || $corner==bottom || $corner == right || $corner==bottom-right{-moz-border-radius-bottomright: $radius;} @if $corner==all || $corner==bottom || $corner == left || $corner==bottom-left{-moz-border-radius-bottomleft: $radius;} @if $corner==all || $corner==top || $corner == right || $corner==top-right{-moz-border-radius-topright: $radius;} @if $corner==all || $corner==bottom || $corner == left || $corner==top-left{-moz-border-radius-topleft: $radius;} @if $corner==all || $corner==bottom || $corner == right || $corner==bottom-right{border-bottom-right-radius: $radius;} @if $corner==all || $corner==bottom || $corner == left || $corner==bottom-left{border-bottom-left-radius: $radius;} @if $corner==all || $corner==top || $corner == right || $corner==top-right{border-top-right-radius: $radius;} @if $corner==all || $corner==bottom || $corner == left || $corner==top-left{border-top-left-radius: $radius;}}",Can you use multiple conditionals in SASS/SCSS CSS
Ruby: Dir.glob - guaranteed order?," Ruby docs don't mention this.Does Dir.glob(""*"") guarantee the order of the files it returns, or do I need to sort them myself to be certain? <code> ",Does Dir.glob guarantee the order?
Sinatra/rake base url rewrite, Is it possible to to rewrite the base URL? E.g. instead of www.host.com/ to use www.host.com/blah/ as a base url and so: would work for www.host.com/blah/ I could append to all my routes '/blah/..' but any gems etc.would fail to work as well. This can be done in Rails easily and I would like to have it in Sinatra as well. <code>  get '/' do ...end,Is it possible to to rewrite the base URL in Sinatra? 
Is there a way for mongoid to use default integer as id rather than long hash value?," I just want to have default characteristic of ActiveRecord which uses incremental integers as id to reduce the length of the url. For example, first article created will have url like ""app.com/articles/1"" which is default in ActiveRecord.Is there any gem that supports this in mongoid? <code> ",Is there a way for mongoid to use integer(number) as a default id rather than long hash value?
How to remove a key from Hash in Ruby/Rails ?," To add a new pair to Hash I do: Is there a similar way to delete a key from Hash ?This works: but I would expect to have something like: It is important that the returning value will be the remaining hash, so I could do things like: in one line. <code>  {:a => 1, :b => 2}.merge!({:c => 3}) #=> {:a => 1, :b => 2, :c => 3} {:a => 1, :b => 2}.reject! { |k| k == :a } #=> {:b => 2} {:a => 1, :b => 2}.delete!(:a) #=> {:b => 2} foo(my_hash.reject! { |k| k == my_key })",How to remove a key from Hash and get the remaining hash in Ruby/Rails?
How to remove a key from Hash and get the remaining hash in Ruby/Rails ?," To add a new pair to Hash I do: Is there a similar way to delete a key from Hash ?This works: but I would expect to have something like: It is important that the returning value will be the remaining hash, so I could do things like: in one line. <code>  {:a => 1, :b => 2}.merge!({:c => 3}) #=> {:a => 1, :b => 2, :c => 3} {:a => 1, :b => 2}.reject! { |k| k == :a } #=> {:b => 2} {:a => 1, :b => 2}.delete!(:a) #=> {:b => 2} foo(my_hash.reject! { |k| k == my_key })",How to remove a key from Hash and get the remaining hash in Ruby/Rails?
Rails 3 - problem with 'net/http' about parsing XML document from URL," I am trying to parse an XML file from a URL. When I try something like this: Everything works, but only when I do this outside of my Rails project. If I try including this file in my Rails 3 project and parsing it there, I get the error ""Errno::ECONNREFUSED in [controller]"" - Connection refused - connect(2).My problem is the following: I don't know how to install the net/http component. I am looking for it on http://www.rubygems.org, but I can't find it.  <code>  require 'net/http'require 'rubygems'require 'xmlsimple'url = 'http://my-address.com/xmltest/note.xml'xml_data = Net::HTTP.get_response(URI.parse(url)).body","Why do I get ""Errno::ECONNREFUSED"" with 'net/http' in Rails?"
Crop/truncate string to n words, What's the best way to truncate a string to the first n words? <code> ,Truncate string to the first n words
Parsing plain html table with Nokogiri," I'd like to parse a HTML page with the Nokogiri. There is a table in part of the page which does not use any specific ID. Is it possible to extract something like: From this HTML: <code>  Today,3,455,34Today,1,1300,3664Today,10,100000,3444,Yesterday,3454,5656,3Yesterday,3545,1000,10Yesterday,3411,36223,15 <div id=""__DailyStat__""> <table> <tr class=""blh""><th colspan=""3"">Today</th><th class=""r"" colspan=""3"">Yesterday</th></tr> <tr class=""blh""><th>Qnty</th><th>Size</th><th>Length</th><th class=""r"">Length</th><th class=""r"">Size</th><th class=""r"">Qnty</th></tr> <tr class=""blr""> <td>3</td> <td>455</td> <td>34</td> <td class=""r"">3454</td> <td class=""r"">5656</td> <td class=""r"">3</td> </tr> <tr class=""bla""> <td>1</td> <td>1300</td> <td>3664</td> <td class=""r"">3545</td> <td class=""r"">1000</td> <td class=""r"">10</td> </tr> <tr class=""blr""> <td>10</td> <td>100000</td> <td>3444</td> <td class=""r"">3411</td> <td class=""r"">36223</td> <td class=""r"">15</td> </tr> </table></div>",How do I parse a plain HTML table with Nokogiri?
Quickly get index of array element in Ruby," Given I have a HUGE array, and a value from it. I want to get index of the value in array. Is there any other way, rather then call Array#index to get it? The problem comes from the need of keeping really huge array and calling Array#index enormous amount of times.After a couple of tries I found that caching indexes inside elements by storing structs with (value, index) fields instead of the value itself gives a huge step in performance (20x times win).Still I wonder if there's a more convenient way of finding index of en element without caching (or there's a good caching technique that will boost up the performance). <code> ",Get index of array element faster than O(n)
Check for array not empty: any?," Is it bad to check if an array is not empty by using any? method? Or is it better to use unless a.empty? ? <code>  a = [1,2,3]a.any?=> truea.cleara.any?=> false",Is it ok to use `any?` to check if an array is not empty?
A problem with ActiveAdmin (Comment Model), I created a blog by following the Getting Started with Rails precisely. And then I following the tutorial here to try ActiveAdmin: http://activeadmin.info/documentation.html.It's working fine for the Post and Tag models (I logged in and created/add/edited stuff) but not the Comment model. Then when I try to start the server I get this: Your help would be appreciated. <code>  rails generate active_admin:resource Commentcreate app/admin/comments.rb rails server=> Booting WEBrick=> Rails 3.0.7 application starting in development on http://0.0.0.0:3000=> Call with -d to detach=> Ctrl-C to shutdown server Exiting /usr/local/lib/ruby/gems/1.9.1/gems/activeadmin-0.2.2/lib/active_admin/namespace.rb:116:in`find_or_build_resource': Tried toregister Comment as Comment butalready registered to Comment(ActiveAdmin::ResourceMismatchError) from/usr/local/lib/ruby/gems/1.9.1/gems/activeadmin-0.2.2/lib/active_admin/namespace.rb:45:in`register' from/usr/local/lib/ruby/gems/1.9.1/gems/activeadmin-0.2.2/lib/active_admin.rb:141:in`register' from/Users/myusername/Projects/RoR/blog/app/admin/comments.rb:1:in`<top (required)>' from/usr/local/lib/ruby/gems/1.9.1/gems/activesupport-3.0.7/lib/active_support/dependencies.rb:235:in`load' from/usr/local/lib/ruby/gems/1.9.1/gems/activesupport-3.0.7/lib/active_support/dependencies.rb:235:in`block in load' from/usr/local/lib/ruby/gems/1.9.1/gems/activesupport-3.0.7/lib/active_support/dependencies.rb:225:in`block in load_dependency' from/usr/local/lib/ruby/gems/1.9.1/gems/activesupport-3.0.7/lib/active_support/dependencies.rb:596:in`new_constants_in' from/usr/local/lib/ruby/gems/1.9.1/gems/activesupport-3.0.7/lib/active_support/dependencies.rb:225:in`load_dependency' from/usr/local/lib/ruby/gems/1.9.1/gems/activesupport-3.0.7/lib/active_support/dependencies.rb:235:in`load' from/usr/local/lib/ruby/gems/1.9.1/gems/activeadmin-0.2.2/lib/active_admin.rb:185:in`block in load!' from/usr/local/lib/ruby/gems/1.9.1/gems/activeadmin-0.2.2/lib/active_admin.rb:185:in`each' from/usr/local/lib/ruby/gems/1.9.1/gems/activeadmin-0.2.2/lib/active_admin.rb:185:in`load!' from/usr/local/lib/ruby/gems/1.9.1/gems/activeadmin-0.2.2/lib/active_admin.rb:212:in`routes' from/Users/myusername/Projects/RoR/blog/config/routes.rb:2:in`block in <top (required)>' from/usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.0.7/lib/action_dispatch/routing/route_set.rb:233:in`instance_exec' from/usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.0.7/lib/action_dispatch/routing/route_set.rb:233:in`draw' from/Users/myusername/Projects/RoR/blog/config/routes.rb:1:in`<top (required)>' from/usr/local/lib/ruby/gems/1.9.1/gems/activesupport-3.0.7/lib/active_support/dependencies.rb:235:in`load' from/usr/local/lib/ruby/gems/1.9.1/gems/activesupport-3.0.7/lib/active_support/dependencies.rb:235:in`block in load' from/usr/local/lib/ruby/gems/1.9.1/gems/activesupport-3.0.7/lib/active_support/dependencies.rb:225:in`block in load_dependency' from/usr/local/lib/ruby/gems/1.9.1/gems/activesupport-3.0.7/lib/active_support/dependencies.rb:596:in`new_constants_in' from/usr/local/lib/ruby/gems/1.9.1/gems/activesupport-3.0.7/lib/active_support/dependencies.rb:225:in`load_dependency' from/usr/local/lib/ruby/gems/1.9.1/gems/activesupport-3.0.7/lib/active_support/dependencies.rb:235:in`load' from/usr/local/lib/ruby/gems/1.9.1/gems/railties-3.0.7/lib/rails/application.rb:127:in `block in reload_routes!' from/usr/local/lib/ruby/gems/1.9.1/gems/railties-3.0.7/lib/rails/application.rb:127:in `each' from/usr/local/lib/ruby/gems/1.9.1/gems/railties-3.0.7/lib/rails/application.rb:127:in `reload_routes!' from/usr/local/lib/ruby/gems/1.9.1/gems/activeadmin-0.2.2/lib/active_admin.rb:123:in`block in setup' from/usr/local/lib/ruby/gems/1.9.1/gems/activesupport-3.0.7/lib/active_support/callbacks.rb:420:in`_run_prepare_callbacks' from/usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.0.7/lib/action_dispatch/middleware/callbacks.rb:40:in`initialize' from/usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.0.7/lib/action_dispatch/middleware/stack.rb:33:in`new' from/usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.0.7/lib/action_dispatch/middleware/stack.rb:33:in`build' from/usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.0.7/lib/action_dispatch/middleware/stack.rb:79:in`block in build' from/usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.0.7/lib/action_dispatch/middleware/stack.rb:79:in`each' from/usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.0.7/lib/action_dispatch/middleware/stack.rb:79:in`inject' from/usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.0.7/lib/action_dispatch/middleware/stack.rb:79:in`build' from/usr/local/lib/ruby/gems/1.9.1/gems/railties-3.0.7/lib/rails/application.rb:162:in `app' from/usr/local/lib/ruby/gems/1.9.1/gems/railties-3.0.7/lib/rails/application/finisher.rb:35:in`block in <module:Finisher>' from/usr/local/lib/ruby/gems/1.9.1/gems/railties-3.0.7/lib/rails/initializable.rb:25:in `instance_exec' from/usr/local/lib/ruby/gems/1.9.1/gems/railties-3.0.7/lib/rails/initializable.rb:25:in `run' from/usr/local/lib/ruby/gems/1.9.1/gems/railties-3.0.7/lib/rails/initializable.rb:50:in `block in run_initializers' from/usr/local/lib/ruby/gems/1.9.1/gems/railties-3.0.7/lib/rails/initializable.rb:49:in `each' from/usr/local/lib/ruby/gems/1.9.1/gems/railties-3.0.7/lib/rails/initializable.rb:49:in `run_initializers' from/usr/local/lib/ruby/gems/1.9.1/gems/railties-3.0.7/lib/rails/application.rb:134:in `initialize!' from/usr/local/lib/ruby/gems/1.9.1/gems/railties-3.0.7/lib/rails/application.rb:77:in`method_missing' from/Users/myusername/Projects/RoR/blog/config/environment.rb:5:in`<top (required)>' from/usr/local/lib/ruby/gems/1.9.1/gems/activesupport-3.0.7/lib/active_support/dependencies.rb:239:in`require' from/usr/local/lib/ruby/gems/1.9.1/gems/activesupport-3.0.7/lib/active_support/dependencies.rb:239:in`block in require' from/usr/local/lib/ruby/gems/1.9.1/gems/activesupport-3.0.7/lib/active_support/dependencies.rb:225:in`block in load_dependency' from/usr/local/lib/ruby/gems/1.9.1/gems/activesupport-3.0.7/lib/active_support/dependencies.rb:596:in`new_constants_in' from/usr/local/lib/ruby/gems/1.9.1/gems/activesupport-3.0.7/lib/active_support/dependencies.rb:225:in`load_dependency' from/usr/local/lib/ruby/gems/1.9.1/gems/activesupport-3.0.7/lib/active_support/dependencies.rb:239:in`require' from/Users/myusername/Projects/RoR/blog/config.ru:3:in`block in <main>' from/usr/local/lib/ruby/gems/1.9.1/gems/rack-1.2.1/lib/rack/builder.rb:46:in`instance_eval' from/usr/local/lib/ruby/gems/1.9.1/gems/rack-1.2.1/lib/rack/builder.rb:46:in`initialize' from/Users/myusername/Projects/RoR/blog/config.ru:1:in`new' from/Users/myusername/Projects/RoR/blog/config.ru:1:in`<main>' from/usr/local/lib/ruby/gems/1.9.1/gems/rack-1.2.1/lib/rack/builder.rb:35:in`eval' from/usr/local/lib/ruby/gems/1.9.1/gems/rack-1.2.1/lib/rack/builder.rb:35:in`parse_file' from/usr/local/lib/ruby/gems/1.9.1/gems/rack-1.2.1/lib/rack/server.rb:162:in`app' from/usr/local/lib/ruby/gems/1.9.1/gems/rack-1.2.1/lib/rack/server.rb:248:in`wrapped_app' from/usr/local/lib/ruby/gems/1.9.1/gems/rack-1.2.1/lib/rack/server.rb:213:in`start' from/usr/local/lib/ruby/gems/1.9.1/gems/railties-3.0.7/lib/rails/commands/server.rb:65:in `start' from/usr/local/lib/ruby/gems/1.9.1/gems/railties-3.0.7/lib/rails/commands.rb:30:in`block in <top (required)>' from/usr/local/lib/ruby/gems/1.9.1/gems/railties-3.0.7/lib/rails/commands.rb:27:in`tap' from/usr/local/lib/ruby/gems/1.9.1/gems/railties-3.0.7/lib/rails/commands.rb:27:in`<top (required)>' fromscript/rails:6:in `require' fromscript/rails:6:in `<main>',ActiveAdmin Comment model not working properly
when you do activeRecord.save does the tranasaction commit or is when the method exits ?," In Rails 3, when you do activeRecord.save does the transaction commit or is when the method exits ?so what I'm trying to figure out is if the MySQL is written right after save! or it's save after I exit the define black <code>  def something 1000.times do o = Order.new(:name => ""Tomas"") o.save endend ",when you do activeRecord.save does the transaction commit or is when the method exits?
How to find out which ruby version an existing rails project is based on," I have an existing Ruby on Rails project. How do I find out which version of Ruby is originally used for the application?Edit:To sum up this thread: If there are no ruby-version specific gems, every Ruby should work.All your posts were helpful - Thanks. <code> ",How to find out which Ruby version an existing Rails project is based on?
How to find out which ruby version an existing rails project is based on?," I have an existing Ruby on Rails project. How do I find out which version of Ruby is originally used for the application?Edit:To sum up this thread: If there are no ruby-version specific gems, every Ruby should work.All your posts were helpful - Thanks. <code> ",How to find out which Ruby version an existing Rails project is based on?
Rails: How to find out which ruby version an existing rails project is based on?," I have an existing Ruby on Rails project. How do I find out which version of Ruby is originally used for the application?Edit:To sum up this thread: If there are no ruby-version specific gems, every Ruby should work.All your posts were helpful - Thanks. <code> ",How to find out which Ruby version an existing Rails project is based on?
"how do you pass the string ""*.*"" to ruby as a command line parameter"," code: If I supply the string ""*.*"" (with or without quotes) when I call the above, I get the following output: i.e., a listing of the files in c:\test.Other values, like ""s*.*"" returns somethingelse.TXT, as you'd expect if you were doing file operations -- but I'm not.But this behaves as would have expected: So my question is, how can I make a user-friendly script that will take ""*.*"" (etc) as a command line parameter? In addition, where is this documented/explained?Edit: this happens on windows and linux, 1.8.7 and 1.9.2 <code>  #test_argv.rb puts ""length: #{ARGV.length} "" ARGV.each do |a| puts ""Argument: #{a}"" end C:\test>test_argv *.* length: 5 Argument: afile.TXT Argument: bfile.TXT Argument: cfile.TXT Argument: dfile.TXT Argument: somethingelse.TXT C:\test>test_argv asdf length: 1 Argument: asdf","How do you pass the string ""*.*"" to ruby as a command line parameter?"
Covert Json String to Json Array in rails?," I have a JSON string in rails as shown below: which are the objects of a class content with attributes content and created time.I would like to convert this JSON string to its respective JSON object array so that I can run a loop and decode the JSON to its objects in rails. How can I achieve this? <code>  [{""content"":""1D"",""createdTime"":""09-06-2011 00:59""},{""content"":""2D"",""createdtime"":""09-06-2011 08:00""}]",Convert JSON String to JSON Array in rails?
Covert JSON String to JSON Array in rails?," I have a JSON string in rails as shown below: which are the objects of a class content with attributes content and created time.I would like to convert this JSON string to its respective JSON object array so that I can run a loop and decode the JSON to its objects in rails. How can I achieve this? <code>  [{""content"":""1D"",""createdTime"":""09-06-2011 00:59""},{""content"":""2D"",""createdtime"":""09-06-2011 08:00""}]",Convert JSON String to JSON Array in rails?
Find current RVM version number," I can't seem to find an easy way to identify the latest release of RVM from command line or rvm.beginrescueend.com!?!I currently type rvm get latest every few days or so to update RVM. If version is same, RVM goes through the download & update process regardless. I'd like to be able to first 'see' if there's an update to get.Anyone know how? I'm sure I'm missing the obvious... <code> ",Find latest available RVM version number
JavaScript Unit Testing in Rails," I am wondering what is the easiest way to do the JavaScript Unit testing as part of Rails 3.1 application.I like Jasmine a lot and it works pretty well (although some tricks are required for it to pick up .coffee files).The only problem I have with Jasmine is that it runs all the tests examples inside one huge page which is very problematic as it requires loading ALL of the scripts.The thing I really want is Jasmine + multiple test suites in multiple files (so that it generates multiple html files including spec files).In addition to that, I want to run tests (hopefully easily) in the browsers, headless or inside a JS engine (when possible).Any recommendations? <code> ",JavaScript Unit Testing in Rails 3.1
How well does your language's support unicode in practice?," I'm looking into new languages, kind of craving for one where I no longer need to worry about charset problems amongst inordinate amounts of other niggles I have with PHP for a new project.I tend to find Java too verbose and messy, and my not wanting to touch Windows with a 6-foot pole tends to rule out .Net. That leaves essentially everything else -- except PHP, C and C++ (the latter two of which I know get messy with unicode stuff irrespective of the ICU library).I've short listed a few languages to date, namely Ruby (loved the mixins), Python, Lisp and Javascript (node.js). However, I'm coming with highly inconsistent information on unicode support and I'm dreading (lack of time...) to learn each and every one of them to the point where I can safely break it to rule it out.In so far as I understood, Python 3 seems to have it. As does Ruby 1.9. Lisp not necessarily. Javascript presumably.There's arguably more than unicode support to a language, but in my experience it tends to become a major drawback when dealing with locale.I also realize the question is somewhat subjective. (Please don't close it on that grounds: I'm actually linking to several SO threads which I found unsatisfying.) But... as a user of any of these languages, how well do they support unicode in practice? <code> ",How well does your language support unicode in practice?
how to use a string as a method chain," How can I use a string as a method call? <code>  ""Some Word"".class #=> Stringa = ""class""""Some World"".a #=> undefined method 'a'""Some World"".""#{a}"" #=> syntax error, unexpected tSTRING_BEG",How to turn a string into a method call?
How to turn a string into a method," How can I use a string as a method call? <code>  ""Some Word"".class #=> Stringa = ""class""""Some World"".a #=> undefined method 'a'""Some World"".""#{a}"" #=> syntax error, unexpected tSTRING_BEG",How to turn a string into a method call?
Bundle / Rake error," When running rake I get this error: You have already activated rake 0.9.2, but your Gemfile requires rake 0.8.7. Consider using bundle exec.Using bundle exec rake instead of just rake seems to work, but is it the best way to fix this? <code> ","You have already activated X, but your Gemfile requires Y"
already activated rake error (when not using bundle exec)," When running rake I get this error: You have already activated rake 0.9.2, but your Gemfile requires rake 0.8.7. Consider using bundle exec.Using bundle exec rake instead of just rake seems to work, but is it the best way to fix this? <code> ","You have already activated X, but your Gemfile requires Y"
convert degree to radians in ruby stackoverflow, I have a latitude and longitude in degrees and I want to convert these into radians. How can I do that?P.S. I am using sphinx search engine and it requires values in radians <code> ,Convert degree to radians in ruby
testing with stdin and stdout in RSpec," My Ruby program reads lines from stdin and uses puts to print to stdout (the terminal). Can I use RSpec to test the reads and writes? Can I inject a string to my program like it was written in stdin and at the same time check the output? Also, I have the reads and writes in a loop, until line[0] is ""quit"". Can I test while the loop is running or should I call subject.read_in and subject.write_out? <code>  line = STDIN.read.chomp.split",Can I use RSpec to mock stdin/stdout to test console reads & writes?
i dont understand why string.size returns what it does :-)," that returns 53. Why? The whitespace counts? Even still. how do we get 53?How about this? Is this the case because the %{ case counts each /n as one character and theres considered to be one before the first line, one at the end, and then at the end of the 2nd line, whereas in the EOS case theres just one before the 1st line and one after the 1st line? In other words, why is the former 54 and the latter 53? <code>  long_string = <<EOSIt was the best of times,It was the worst of times.EOS def test_flexible_quotes_can_handle_multiple_lines long_string = %{It was the best of times,It was the worst of times.} assert_equal 54, long_string.size end def test_here_documents_can_also_handle_multiple_lines long_string = <<EOSIt was the best of times,It was the worst of times.EOS assert_equal 53, long_string.size end",I don't understand why string.size returns what it does
Module.nesting within instance_eval/exec or module_eval/exec," I came up with this question when I was trying to answer this. The following is an expected behaviour: But the following: all return []. Why do these not work as the above?Additional QuestionMu is too short suggested an interesting point. If that is correct, then Module.nesting would be one of the methods and variables that are dependent on the literal context like Method#source_location, __FILE__. Is this understanding correct? If so, can someone provide the inventory of these methods/variables that are dependent on the literal context? I think it would be useful for reference. <code>  module A p Module.nestingend# => [A] A.instance_eval{p Module.nesting}A.instance_exec{p Module.nesting}A.module_eval{p Module.nesting}A.module_exec{p Module.nesting}",Module.nesting within instance_eval/exec or module_eval/exec
how to implement a short url like urls in twitter?," If there is a long url, I want to generate a short URL like those in Twitter. Is there some way to implement this in Ruby? <code> ",How to implement a short URL like the URLs in Twitter?
how to check if a value is found in an array of values," I want to perform an if condition where, if linkedpub.LPU_ID is found in an array of values(@associated_linked_pub), do some action.I tried the following but the syntax is not correct.Any suggestion is most welcomed..Thanks a lot <code>  <% for linkedpub in Linkedpub.find(:all) %> <% if linkedpub.LPU_ID IN @associated_linked_pub %> # do action <%end%><%end%>",How would I check if a value is found in an array of values
Why does bundler install gems into a 1.9.1 directory when 1.9.2 is the only ruby version I have installed?," When I install a gem, it gets installed in a directory named 1.9.1, despite that not being the version of Ruby I have installed: Why does this happen? I have no other Ruby versions installed (and certainly not v1.9.1). <code>  $ ruby -vruby 1.9.3p327 (2012-11-10 revision 37606) [x86_64-darwin12.2.0]$ gem which rails.../ruby/gems/1.9.1/gems/railties-3.2.9/lib/rails.rb",Why are gems installed in a directory with a different Ruby version than Im running?
Why are gems installed in a 1.9.1 directory when my Ruby version is different than 1.9.1?," When I install a gem, it gets installed in a directory named 1.9.1, despite that not being the version of Ruby I have installed: Why does this happen? I have no other Ruby versions installed (and certainly not v1.9.1). <code>  $ ruby -vruby 1.9.3p327 (2012-11-10 revision 37606) [x86_64-darwin12.2.0]$ gem which rails.../ruby/gems/1.9.1/gems/railties-3.2.9/lib/rails.rb",Why are gems installed in a directory with a different Ruby version than Im running?
[Rails ] How do we define large integers in Ruby?," Possible Duplicate: Integer out of range on Postgres DB When my code tries to insert big numbers such as 100001857905525 into a database on heroku, I get the error: The column has been defined as an integer. I use a sqlite3 database. My code is deployed to heroku.It works fine when I run on localhost. But I get the above error only when I run the code on heroku.Perhaps I can solve the issue by defining the column as a long integer or a double. How do I do this in Ruby/Rails ? <code>  ActiveRecord::StatementInvalid (PGError: ERROR: integer out of range ) ",How do we define large integers?
Nokogiri for parsing Ruby code?," Nokogiri is awesome. I can do things like #css('.bla') which will return the first matching element.Right now we need to do some parsing of Ruby source code - finding all methods within a class etc. We're using the ruby_parser gem, but all it does is comb your source code and spit out S-expressions. Is there anything like Nokogiri for these S-expressions which can do things like ""return S-expression for first method found named 'foo'""? <code> ",Is there something similar to Nokogiri for parsing Ruby code?
Run Ruby Script on Background, I have a Ruby script that I need to have running all the time in my Linux box. I tried nohup ruby ruby.rb& but it seems it doesn't work.How can I have the script running in background? <code> ,Run Ruby script in the background
"What is the ""equals greater than"" operator => in Ruby on Rails"," In a Ruby on Rails tutorial, I am asked to type: I understand what this does, but I would like to know what the => operator is. In PHP-land, it links a key and a value in an associative array. Is it the same thing here? Is it a Ruby operator or a Rails operator? <code>  class Post < ActiveRecord::Base validates :name, :presence => true validates :title, :presence => true, :length => { :minimum => 5 }end","What is the ""equals greater than"" operator => in Ruby?"
"RoR Question: "" "" vs ' '"," Is there a specific time when I should use """" vs ''?I've been using single quotes most of the time because it's easier to type but I'm not sure if I should.e.g. get 'user/new' vs. get ""user/new"" <code> ",Double vs single quotes
Ruby: double vs single quotes," Is there a specific time when I should use """" vs ''?I've been using single quotes most of the time because it's easier to type but I'm not sure if I should.e.g. get 'user/new' vs. get ""user/new"" <code> ",Double vs single quotes
How can I optimize GraphViz output width ?," I make graphs that have huge width ratio: they are 51706 x 503 pixels in size.How can I tell GraphViz to optimize width ?Note 1: the graph is in fact a tree with each node having a lot of children.Here is a sample.Note 2: I think I use dot :)Note 3: Here is the Ruby code <code>  def graph_node(n, parent=nil, depth=0) #print n, "" "" gn = @g.add_node(n.object_id.to_s, :label=>n.to_graphviz, :shape=>""Mrecord"") if parent e = @g.add_edge(parent, gn) end if n == @current_pos_node gn[:color] = ""brown3"" gn[:style] = ""filled"" elsif @s.tree.pv(@current_pos_node).include?(n) gn[:color] = ""cadetblue"" gn[:style] = ""filled"" elsif @s.tree.pv(@root).include?(n) gn[:color] = ""yellow"" gn[:style] = ""filled"" end return if !n.children # or depth == 2 i = 0 for c in n.children graph_node(c, gn, depth+1) i += 1 #break if i > 2 endenddef graph(name=""tree"", root_node=@current_pos_node) @g = GraphViz::new(""G"") #@g['sep'] = ""10,100"" #@g[""overlap""] = ""compress"" #@g[""rankdir""] = ""BT"" #@g[""ratio""] = ""0.9"" @g[""size""] = ""350,500"" graph_node(root_node) @g.output(:svg => ""#{name}.svg"")end",How can I optimize GraphViz output width?
Ruby on Rails : How to validate a value in a certain range ? Eg: 1 <= val <=2," I want to validate a number :value to be within 1 or 2 However, the above code is failing the validation when value == 1Please ensure that your solution allows me to add a message for the validation. <code>  validates :value, :format => { :with => /1|2/, :message => ""Select number.."" }","Validate that a value is in a certain range, e.g. 1 <= val <=2"
What is Ruby recursion and how does it work?," Could someone please explain what exactly recursion is (and how it works in Ruby, if that's not too much to ask for). I came across a lengthy code snippet relying on recursion and it confused me (I lost it now, and it's not entirely relevant). <code> ",What is recursion and how does it work?
Iterate through every .jpg or .jpeg file in directory and sub directory. Ruby, I want to iterate through every jpg/jpeg file in a directory and every subdirectory and every subdirectory of that sub-directory and so on. I want to be able to go through every single image file in a folder. Is there an easy way to do this or would a recursive method work best? <code> ,Iterate through every .jpg or .jpeg file in directory and sub directory
Ruby - Hash keys to method names??," This is my hash: I need to access the hash keys as a method like: <code>  tempData = {""a"" => 100, ""here"" => 200, ""c"" => ""hello""} tempData.a #100tempData.here # 200",How do I convert hash keys to method names?
Ruby - how to select first chars from string," I am trying to find a function for select e.g. first 100 chars of the string. In PHP, there exists the substr functionDoes Ruby have some similar function? <code> ",Ruby - How to select some characters from string
Ruby - how to select some characters from string," I am trying to find a function for select e.g. first 100 chars of the string. In PHP, there exists the substr functionDoes Ruby have some similar function? <code> ",Ruby - How to select some characters from string
Stuck with Ruby Quiz Problem," I am currently working on a Ruby Problem quiz but I'm not sure if my solution is right. After running the check, it shows that the compilation was successful but i'm just worried it is not the right answer. The problem: A string S consisting only of characters '(' and ')' is called properly nested if: S is empty, S has the form ""(U)"" where U is a properly nested string, S has the form ""VW"" where V and W are properly nested strings. For example, ""(()(())())"" is properly nested and ""())"" isn't. Write a function that given a string S returns 1 if S is properly nested and 0 otherwise. Assume that the length of S does not exceed 1,000,000. Assume that S consists only of characters '(' and ')'. For example, given S = ""(()(())())"" the function should return 1 and given S = ""())"" the function should return 0, as explained above.Solution: <code>  def nesting(s) def nesting ( s ) # write your code here if s == '(()(())())' && s.length <= 1000000 return 1 elsif s == ' ' && s.length <= 1000000 return 1 elsif s == '())' return 0 endend",Checking if a string has balanced parentheses.
How do you access a class' constant variables?," When I have the following: Is there a way to access with Foo::CONSTANT_NAME or do I have to make a class method to access the value?  <code>  class Foo CONSTANT_NAME = [""a"", ""b"", ""c""] ...end",Accessing a class's constants
Accessing a class' constant variables," When I have the following: Is there a way to access with Foo::CONSTANT_NAME or do I have to make a class method to access the value?  <code>  class Foo CONSTANT_NAME = [""a"", ""b"", ""c""] ...end",Accessing a class's constants
Notepad++ Adding Keywords," I am trying to add require and include as Ruby keywords for Notepad++, but I am having some trouble. I modified the langs.model.xml file's ruby language tag as follows: However, even after updating this require and include are still not being highlighted like the other keywords. Can someone please advise? <code>  <Language name=""ruby"" ext=""rb rbw"" commentLine=""#""> <Keywords name=""instre1"">__FILE__ and def end in or self unless __LINE__ begin defined? ensure module redo super until BEGIN break do false next rescue then when END case else for nil retry true while alias class elsif if not return undef yield require include</Keywords> ",Adding Keywords to Ruby syntax highlighting for Notepad++
((0.1+0.7)*10) = 7 in several languages. How to prevent this?," Recently I came across a bug/feature in several languages. I have a very basic knowledge about how it's caused (and I'd like some detailed explanation), but when I think of all the bugs I must have made over the years, the question is how can I determine ""Hey, this might cause a riddiculous bug, I'd better use arbitrary precision functions"", what other languages do have this bug (and those who don't, why). Also, why 0.1+0.7 does this and i.e. 0.1+0.3 doesn't, are there any other well-known examples?PHP Python: Javascript: Ruby: <code>  //the first one actually doesn't make any sense to me,//why 7 after typecast if it's represented internally as 8?debug_zval_dump((0.1+0.7)*10); //double(8) refcount(1)debug_zval_dump((int)((0.1+0.7)*10)); //long(7) refcount(1)debug_zval_dump((float)((0.1+0.7)*10)); //double(8) refcount(1) >>> ((0.1+0.7)*10)7.9999999999999991>>> int((0.1+0.7)*10)7 alert((0.1+0.7)*10); //7.999999999999999alert(parseInt((0.7+0.1)*10)); //7 >> ((0.1+0.7)*10).to_i => 7 >>((0.1+0.7)*10) => 7.999999999999999 ",int((0.1+0.7)*10) = 7 in several languages. How to prevent this?
How to handle the jquery AJAX request and the Ruby on Rails 'render' method togheter," I am using Ruby on Rails 3.0.7 and jQuery 1.6.1 and I would like to know how to handle response xhr, status and ex variables after an AJAX request.The AJAX request is: In the controller I have: How SHOULD be stated in the controller the render method to respond to the AJAX request so that it is possible to handle response values (xhr, status and ex variables) in the error or success section of the AJAX request? Then, how can I handle the response values after I retrieved those (for example to show those values in an alert message)?In few worlds, what I would like to do is (in the controller) to respond to an AJAX request with some data and then (on the other side) handle this data. <code>  $jQuery.ajax({ type: ""POST"", url: ""<request_to_the_controller_method>"", // see the code below error: function(xhr, status, ex) { // handling with 'xhr', 'status' and 'ex' variables } success: function(jqXHR, status, ex) { // handling with 'xhr', 'status' and 'ex' variables }}); respond_to do |format| format.js { render ... # here should be properly stated the Ruby on Rails 'render' method :status => 200 }end",How to use the jQuery AJAX request and the Ruby on Rails 'render' method togheter?
RSpec -- lamda usage," Can someone please explain the difference between the following methods to me? That is the method as it currently stands. Could this also be achieved with the method below? Are these effectively the same? Or does the second not work? Because the tutorial I'm following seems to use response whenever possible, yet did not do it in the above case. Can someone please explain the difference between the two above methods, how lambda and RSpec's response work? Thanks! <code>  it ""should create a user"" do lambda do post :create, :user => @attr end.should change(User, :count).by(1)end it ""should create a user"" do post :create, :user => @attr response.should change(User, :count).by(1)end",RSpec -- lambda usage
Thin doesn't respond to capistrano stop.," bundle exec thin start -p 3111 gives the following output: Using rack adapter Thin web server (v1.2.11 codename Bat-Shit Crazy) Maximum connections set to 1024 Listening on 0.0.0.0:3111, CTRL+C to stop ^C Ctrl-C doesn't do anything (SIGINT). Neither does kill (SIGTERM).I've found a few references to this behavior, but no solutions. The problem seems to be either in eventmachine (bundled with latest thin), in ruby 1.9.2-r290, or in the linux kernel (Ubuntu 10.4 LTS, 2.6.38.3-linode32).It happens with my project, but not with a brand new rails project. References: http://groups.google.com/group/thin-ruby/browse_thread/thread/4b7c28e8964b5001?fwc=2 <code> ",Thin doesn't respond to SIGINT or SIGTERM.
Thin doesn't respond to Ctrl-C," bundle exec thin start -p 3111 gives the following output: Using rack adapter Thin web server (v1.2.11 codename Bat-Shit Crazy) Maximum connections set to 1024 Listening on 0.0.0.0:3111, CTRL+C to stop ^C Ctrl-C doesn't do anything (SIGINT). Neither does kill (SIGTERM).I've found a few references to this behavior, but no solutions. The problem seems to be either in eventmachine (bundled with latest thin), in ruby 1.9.2-r290, or in the linux kernel (Ubuntu 10.4 LTS, 2.6.38.3-linode32).It happens with my project, but not with a brand new rails project. References: http://groups.google.com/group/thin-ruby/browse_thread/thread/4b7c28e8964b5001?fwc=2 <code> ",Thin doesn't respond to SIGINT or SIGTERM.
Ruby - how to format numbers (1000 -> 1 000)," I need a way to format numbers. I stored some numbers in my DB table, e.g. 12500, and would like to print them in this format 12 500 (so there is a space every 3 digits). Is there an elegant way to do this? <code> ","How to format a number 1000 as ""1 000"""
Get class methods list," I have a class: How can I get a list of my methods in this class (method1, method2, method3)? <code>  class TestClass def method1 end def method2 end def method3 endend",Get list of a class' instance methods
Get list of a class' methods," I have a class: How can I get a list of my methods in this class (method1, method2, method3)? <code>  class TestClass def method1 end def method2 end def method3 endend",Get list of a class' instance methods
Testing named scopes with RSpec," I am new to testing Rails web applications and RSpec. I work with legacy code and need to add tests. So what is the best way to test finders and named scopes with RSpec? I find in Google a few approaches but they are not ideal.For example:http://paulsturgess.co.uk/articles/show/93-using-rspec-to-test-a-named_scope-in-ruby-on-rails or http://h1labs.com/notebook/2008/8/21/testing-named-scope-with-rspec I find best approach (IMHO) in ""Rail Test Prescriptions"": where should_match_find_method custom helper method <code>  it ""excludes users that are not active"" do @user = Factory(:user, :active => false) User.active.should_not include(@user)end it ""should have a published named scope that returns ..."" do Post.published.proxy_options.should == {:conditions => {:published => true}}end should_match_find_method :active_only { :active == true }",Rails: Testing named scopes with RSpec
Can someone explain why this simple piece of ruby code is not running properly?," For this piece of code: I am getting an error: When I tryx=myBaseClass.new, I get: Has someone already encountered this problem? I don't think my code can be wrong. <code>  class myBaseClass def funcTest() puts ""baseClass"" endendmyBaseClass.new.funcTest NameError: undefined local variable or method `myBaseClass' for main:Objectfrom c:/Users/Yurt/Documents/ruby/polymorphismTest.rb:9from (irb):145:in `eval'from (irb):145from c:/Ruby192/bin/irb:12:in `<main>'irb(main):152:0> x=myBaseClass.new NameError: undefined local variable or method `myBaseClass' for main:Object from (irb):152",NameError in Ruby
Why is this ruby code is not running properly?," For this piece of code: I am getting an error: When I tryx=myBaseClass.new, I get: Has someone already encountered this problem? I don't think my code can be wrong. <code>  class myBaseClass def funcTest() puts ""baseClass"" endendmyBaseClass.new.funcTest NameError: undefined local variable or method `myBaseClass' for main:Objectfrom c:/Users/Yurt/Documents/ruby/polymorphismTest.rb:9from (irb):145:in `eval'from (irb):145from c:/Ruby192/bin/irb:12:in `<main>'irb(main):152:0> x=myBaseClass.new NameError: undefined local variable or method `myBaseClass' for main:Object from (irb):152",NameError in Ruby
Why doesn't this run properly?," For this piece of code: I am getting an error: When I tryx=myBaseClass.new, I get: Has someone already encountered this problem? I don't think my code can be wrong. <code>  class myBaseClass def funcTest() puts ""baseClass"" endendmyBaseClass.new.funcTest NameError: undefined local variable or method `myBaseClass' for main:Objectfrom c:/Users/Yurt/Documents/ruby/polymorphismTest.rb:9from (irb):145:in `eval'from (irb):145from c:/Ruby192/bin/irb:12:in `<main>'irb(main):152:0> x=myBaseClass.new NameError: undefined local variable or method `myBaseClass' for main:Object from (irb):152",NameError in Ruby
How i can get 1 day before Today's date?," How can I get yesterday's date?maybe: or or 86400 = 1 day, right? (60 * 60 * 24) <code>  @get_time_now = Time.now.strftime('%m/%d/%Y') / 86400 @get_time_now = Time.now.strftime('%m/%d/%Y') - 1.day @get_time_now = Time.now. / 86400 ",Rails: How I can get yesterday's date?
How I can get yesterday's date?," How can I get yesterday's date?maybe: or or 86400 = 1 day, right? (60 * 60 * 24) <code>  @get_time_now = Time.now.strftime('%m/%d/%Y') / 86400 @get_time_now = Time.now.strftime('%m/%d/%Y') - 1.day @get_time_now = Time.now. / 86400 ",Rails: How I can get yesterday's date?
Apply method to array elements," This is my array: I want to apply to_s method to all of my array elements to get array = ['one','two','three'].How can I do this (converting each element of the enumerable to something else)? <code>  array = [:one,:two,:three]",Apply method to each elements in array/enumerable
Prevent JSON pretty_generate from escaping," Is there any way to prevent Ruby's JSON.pretty_generate() method from escaping a Unicode character?I have a JSON object as follows: Running JSON.pretty_generate(my_hash) returns the value as being \\u0423.Is there any way to prevent this behaviour? <code>  my_hash = {""my_str"" : ""\u0423""};",Prevent JSON pretty_generate from escaping Unicode
Ruby Gemspec Dependency: Is possible have a git branch dependency ?," Is possible have a git branch dependency, inside mygem.gemspec?I'm thinking something similar to the following: ... but it doesn't work. <code>  gem.add_runtime_dependency 'oauth2', :git => 'git@github.com:lgs/oauth2.git'",Ruby Gemspec Dependency: Is possible have a git branch dependency?
how to chose to excute a single test using ruby test/unit," Instead of running all the test cases automatically, is there any way to execute a single test under ruby test/unit framework. I know I can achieve that by using Rake but I am not ready to switch to rake at this moment.  <code>  ruby unit_test.rb #this will run all the test caseruby unit_test.rb test1 #this will only run test1",How do I execute a single test using Ruby test/unit?
how to chose to exEcute a single test using ruby test/unit," Instead of running all the test cases automatically, is there any way to execute a single test under ruby test/unit framework. I know I can achieve that by using Rake but I am not ready to switch to rake at this moment.  <code>  ruby unit_test.rb #this will run all the test caseruby unit_test.rb test1 #this will only run test1",How do I execute a single test using Ruby test/unit?
Savon: How to change header from being <env:Header> to <soap:Header> or something different in.," In Savon, is there a way to change to be or anything different?I've tried in the request block putting an additional header tag like this: But that won't work.I've browsed Savon Docs and haven't found anywhere to change that tag, only by manually building the XML. <code>  <env:Header> <soap:Header> soap.header['soap:Header']",Savon: How to change header from being <env:Header> to <soap:Header> or something different
"Ruby, inlcuding module in current directory"," I am currently working through the Well Grounded Rubyist. Great book so far. I am stuck on something I don't quite get with ruby. I have two filesIn ModuleTester.rb In MyFirstModule.rb When I run 'ruby ModuleTester.rb', I get the following message:ModuleTester.rb:2:in <class:ModuleTester>': uninitialized constant ModuleTester::MyFirstModule (NameError) from ModuleTester.rb:1:in'From what I have found online, the current directory isn't in the the namespace, so it can't see the file. But, the include statement doesn't take a string to let me give the path. Since the include statement and require statements do different things, I am absolutely lost as to how to get the include statement to recognize the module. I looked through other questions, but they all seem to be using the require statement. Any hints are greatly appreciated. <code>  class ModuleTester include MyFirstModuleendmt = ModuleTester.newmt.say_hello module MyFirstModule def say_hello puts ""hello"" endend","Ruby, including module in current directory"
How to fire raw mongo queries directly in Ruby," Is there any way that I can fire a raw mongo query directly in Ruby instead of converting them to the native Ruby objects?I went through Ruby Mongo Tutorial, but I cannot find such a method anywhere. If it were mysql, I would have fired a query something like this. My mongo query is a bit large and it is properly executing in the MongoDB console. What I want is to directly execute the same inside Ruby code. <code>  ActiveRecord::Base.connection.execute(""Select * from foo"")",How to fire raw MongoDB queries directly in Ruby
"A folder where to put ""global"" shared partial templates"," I am using Ruby on Rails 3.0.7 and I am planning to use partial templates. All classes in my application would use same partials so I have to decide where to located all those.Is it a good idea to put ""global"" shared partial templates in the lib folder? If no, what is a common practice to choose the folder where to put those? Any advice on how to properly name and load that folder? <code> ","In which folder should I put ""global"" shared partial templates?"
ruby parsing youtube url," I've written a ruby youtube url parser. It's designed to take an input of a youtube url of one of the following structures (these are currently the youtube url structures that I could find, maybe there's more?): The aim is to save just the id of the clip or playlist so that it can be embedded, so if it's a clip: 'sGE4HMvDe-Q', or if it's a playlist: 'p/A0C3C1D163BE880A'The parser I wrote works fine for these urls, but seems a bit brittle and long-winded, I'm just wondering if someone could suggest a nicer ruby approach to this problem? <code>  http://youtu.be/sGE4HMvDe-Qhttp://www.youtube.com/watch?v=Lp7E973zozc&feature=relmfuhttp://www.youtube.com/p/A0C3C1D163BE880A?hl=en_US&#038;fs=1 def parse_youtube a = url.split('//').last.split('/') b = a.last.split('watch?v=').last.split('?').first.split('&').first if a[1] == 'p' url = ""p/#{b}"" else url = b endend",Parsing youtube url
"ruby: how do I say ""if x == A or B or C"" as succinctly as possible?"," I'm pretty sure ruby has an idiom for that.I just have too many places in my code where I say I know I also could do but I prefer using if else if there's a nice idiom to make it more succinct. <code>  if (x == A) || (x == B) || (x ==C) do_somethingelse do_something_elseend case xwhen A, B, C do_somethingelse do_something_elseend","How do I say ""if x == A or B or C"" as succinctly as possible?"
[Ruby] Can I get the date a http file was modified?, I'm trying to check if a file (on web) was modified since the last time I checked. Is it possible to do this by getting http headers to read the last time the file was modified (or uploaded)? <code> ,Can I get the date when an HTTP file was modified?
Interpreted languages," I am going to learn Ruby. I know it is a interpreted language. I know that compiled languages are translated to machine code eventually, but what does the ruby interpreter do? I read that the interpreter was written in C, but does each line of ruby convert to c, which again compiles to machine code? I also heard of JIT, but if that adds much of complexity to the answer you don't need to answer that. What I am looking for is what happens to my Ruby code. <code> ",How are interpreted languages (like Ruby) run?
Ruby: How to store and display a day of the week?," I'm relatively new to Ruby. I need to keep track of a day of the week on my activity model. The code that I have so far doesn't seem like the most elegant solution. I am wondering if there is a better way.So far, this is what I have in my form: And when I need to display the day of the week: How can I do this better? Feel free to mention any library/gem that I may not be aware of.Solution:Ruby provides the Date::DAYNAMES constant which is an array of days of the week. We can reuse that in our code: <code>  <%= form_for(@activity) do |f| %> <div class=""field""> <%= f.label :day %><br /> <%= f.select :day, [['Sunday', 0], ['Monday', 1], ['Tuesday', 2], ['Wednesday', 3], ['Thursday', 4], ['Friday', 5], ['Saturday', 6]] %> </div><% end %> <% days = ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'] %><% @activities.each do |activity| %> <%= days[activity.day.to_i] %><% end %> <%= form_for(@activity) do |f| %> <div class=""field""> <%= f.label :day %><br /> <%= f.select :day, Date::DAYNAMES.zip((0..6).to_a) %> </div><% end %><% @activities.each do |activity| %> <%= Date::DAYNAMES[activity.day.to_i] %><% end %>",How to store and display a day of the week
how to update xml file in ruby?," I have two XML files that I need to update using Ruby. It would be great if it is done using Nokogiri. Could somebody help me how to do so?Q1: I need to update <runName> tag Q2: In the second file I need to change the path for logs. So would look like This is the source code related to these questions:Q1: Q2:any suggestions how to make the search for value one line only? <code>  <?xml version=""1.0"" encoding=""ISO-8859-1""?><taftasks><taftask environment=""Local_edu"" password=""12324"" username=""edu""><testsuite name=""login""><rowsToRun>0</rowsToRun><runName>Login_Run 201107041433</runName><runDescription>ant</runDescription></testsuite></taftask></taftasks> <property name=""reportDir"" value=""C:\Program Files\TestPro\TestPro Automation Framework\Output Files\builds\basics\logs\"" /> <property name=""reportDir"" value=""C:\Program Files\TestPro\TestPro Automation Framework\Output Files\builds\basics\logs\201107060928"" /><?xml version=""1.0""?><!-- build script for TAF command line execution <property name=""lib.dir"" value=""${basedir}/lib"" /><project name=""Login"" default=""taf"" basedir=""."">--><project name=""Basics of Edu"" default=""taf"" basedir=""C:/Program Files/TestPro/TestPro Automation Framework""><description>Login_cycle</description><property name=""lib.dir"" value=""${basedir}/lib"" /><property name=""testPlan"" value=""C:\Program Files\TestPro\TestPro Automation Framework\Output Files\builds\basics\basics.xml"" /><property name=""reportDir"" value=""C:\Program Files\TestPro\TestPro Automation Framework\Output Files\builds\basics\logs\"" /><property name=""format"" value=""csv"" /><property name=""category"" value=""All"" /></project> require 'rubygems' require 'nokogiri'file_name = 'C:\web\playground\login.xml'@doc = Nokogiri::XML(File.open(file_name))runName = @doc.at_css ""runName""puts runName.content runName.content = ""New run name""puts runName.contentFile.open(file_name, 'w') {|f| f.write(@doc) } require 'rubygems' require 'nokogiri'file_name = 'C:\web\playground\login_build.xml'@doc = Nokogiri::XML(File.open(file_name))property = @doc.css(""property"")property.each {|item| if (item['name'] == 'reportDir') puts item['value'] item['value'] = item['value']+'\timestamp' puts item['value'] end}File.open(file_name, 'w') {|f| f.write(@doc) }",How to update XML file in Ruby?
Why can't I create an array as a column in a table in Ruby," Why can't I do something like this: Is there some other way to make an array (""apples) be an attribute of an instance of the Fruit class? <code>  class CreateModels < ActiveRecord::Migration def self.up create_table :fruit do |t| t.array :apples end endend",Why can't I create an array as a column in a table in Rails?
How to read the end of a script file as an input file (Perl or any other language)," I am looking for the correct syntax of doing the following (in Perl, Shell or Ruby): <code>  # variable to access the data lines appended as a fileEND_OF_SCRIPT_MARKERraw data starts hereand it continues.",How to read the end of a script file as a data file (Perl or any other language)
how SInatra invoke the get method?," I'm pretty curious about how this thing works.after require 'sinatra'then I can invoke get() in the top level scope.after digging into the source code, I found this get() structure know the class << self is open up the self object's singleton class definition and add get() inside, so it starts to make sense.But the only thing left I can't figure out is it's within module Sinstra, how could get() be invoked without using Sinatra:: resolution operation or something? <code>  module Sinatra class << self def get ... end endend",How does Sinatra define and invoke the get method?
"if main is an instance of Object, why can't I call it in irb"," When I type self, I get a return value main. I made this test: Then I can call main2, and it returns something, but when I call main, it raises an undefined variable error. How does this happen?Here's the assumption I found in other site about how this top level environment works: It makes sense to me. <code>  main2 = Object.new class Object Object.new.instance_eval do def self.to_s ""main"" end private ## # Your program gets inserted here... ## end end ","If `main` is an instance of `Object`, why can't I call it?"
Use of ruby self keyword?," From what I understand about self, it refers to the current instance of the class.Isn't this the default behaviour at all times anyways? For example, isn't equivalent to If so, what is the use of self? <code>  self.var_one = method(args) var_one = method(args) ",How to use Ruby's self keyword
Understanding rubys load paths," I'm a little confused about why my project can't load the files it needs, it's a really simple project tree: and my processor.rb file looks like And just for testing it that file mapper looks like: But running ruby lib/processor.rb results in: <code>  processor/ bin/ lib/ processor.rb processor/ mapper.rb reducer.rb require 'processor/mapper'require 'processor/reducer'class Processorend class Mapper def run puts ""running map"" endend <internal:lib/rubygems/custom_require>:29:in `require': no such file to load -- processor/mapper (LoadError) from <internal:lib/rubygems/custom_require>:29:in `require' from lib/processor.rb:3:in `<class:Processor>' from lib/processor.rb:2:in `<main>' ",Understanding Ruby's load paths
Ruby $stdout vs. STDOUT," In Ruby, what is the difference between $stdout (preceded by a dollar sign) and STDOUT (in all caps)? When doing output redirection, which should be used and why? The same goes for $stderr and STDERR.Edit: Just found a related question. <code> ",Difference between $stdout and STDOUT in Ruby
What is the difference between Ruby's $stdout and STDOUT?," In Ruby, what is the difference between $stdout (preceded by a dollar sign) and STDOUT (in all caps)? When doing output redirection, which should be used and why? The same goes for $stderr and STDERR.Edit: Just found a related question. <code> ",Difference between $stdout and STDOUT in Ruby
how to acces hash with string key ?," I'm fooling around with Ruby and basically I have I want to call something like to access I'm basically trying to achieve the same functionality like when using Internationalizations sofar I came up with this approach Any ideas ? thanx <code>  @trans = { :links => { :quick_notes => ""aaaaaaa"" }} def t #...somethingendt('links.quick_notes') trans[:links][:quick_notes] I18n.t('something.other.foo') def t(key) a='' key.to_s.split('.').each{|key| a+=""[:#{key}]"" } #now a == ""[:links][:quick_notes]"" #but I cant figure out how can I call it on @trans variable end t('links.quick_notes')",How do you access nested elements of a hash with a single string key?
Using jquery-Tokeninput and Acts-as-taggable-on," This is how you use autocomplete with jQuery Tokeninput and ActsAsTaggableOn.In my situation i am using a nested form but it shouldnt matter. Everything below is code that works.CodeProduct Model: Products Controller: Routes: Application.js: Form: Issue 1(SOLVED)Must have the line: Note - You can use @tags.map here as well and you dont have to change the form either.Below are the 2 issues on why you needed to do this:I have the following Tag: {""id"":1,""name"":""Food""}. When I save a Product, tagged ""Food"", it should save as ID: 1 when it searches and finds the name ""Food"". Currently, it saves a new Tag with a new ID that references the ""Food"" ID, i.e. {""id"":19,""name"":""1""}. Instead, it should be finding the ID, showing the name, and doing a find_or_create_by so it doesn't create a new Tag.Issue 2(SOLVED)When I go to products/show to see the tags by doing <%= @product.tag_list %>. The name appears as ""Tags: 1"", when it really should be ""Tags: Food"".How can I fix these issues? <code>  attr_accessible :tag_list # i am using the regular :tag_listacts_as_taggable_on :tags # Tagging products #1. Define the tags path #2. Searches ActsAsTaggable::Tag Model look for :name in the created table. #3. it finds the tags.json path and whats on my form. #4. it is detecting the attribute which is :name for your tags.def tags @tags = ActsAsTaggableOn::Tag.where(""tags.name LIKE ?"", ""%#{params[:q]}%"") respond_to do |format| format.json { render :json => @tags.map{|t| {:id => t.name, :name => t.name }}} endend # It has to find the tags.json or in my case /products/tags.jsonget ""products/tags"" => ""products#tags"", :as => :tags $(function() { $(""#product_tags"").tokenInput(""/products/tags.json"", { prePopulate: $(""#product_tags"").data(""pre""), preventDuplicates: true, noResultsText: ""No results, needs to be created."", animateDropdown: false });}); <%= p.text_field :tag_list, :id => ""product_tags"", ""data-pre"" => @product.tags.map(&:attributes).to_json %> format.json { render :json => @tags.collect{|t| {:id => t.name, :name => t.name }}}",How to use jquery-Tokeninput and Acts-as-taggable-on
How to use jquery-Tokeninput and Acts-as-taggable-on," This is how you use autocomplete with jQuery Tokeninput and ActsAsTaggableOn.In my situation i am using a nested form but it shouldnt matter. Everything below is code that works.CodeProduct Model: Products Controller: Routes: Application.js: Form: Issue 1(SOLVED)Must have the line: Note - You can use @tags.map here as well and you dont have to change the form either.Below are the 2 issues on why you needed to do this:I have the following Tag: {""id"":1,""name"":""Food""}. When I save a Product, tagged ""Food"", it should save as ID: 1 when it searches and finds the name ""Food"". Currently, it saves a new Tag with a new ID that references the ""Food"" ID, i.e. {""id"":19,""name"":""1""}. Instead, it should be finding the ID, showing the name, and doing a find_or_create_by so it doesn't create a new Tag.Issue 2(SOLVED)When I go to products/show to see the tags by doing <%= @product.tag_list %>. The name appears as ""Tags: 1"", when it really should be ""Tags: Food"".How can I fix these issues? <code>  attr_accessible :tag_list # i am using the regular :tag_listacts_as_taggable_on :tags # Tagging products #1. Define the tags path #2. Searches ActsAsTaggable::Tag Model look for :name in the created table. #3. it finds the tags.json path and whats on my form. #4. it is detecting the attribute which is :name for your tags.def tags @tags = ActsAsTaggableOn::Tag.where(""tags.name LIKE ?"", ""%#{params[:q]}%"") respond_to do |format| format.json { render :json => @tags.map{|t| {:id => t.name, :name => t.name }}} endend # It has to find the tags.json or in my case /products/tags.jsonget ""products/tags"" => ""products#tags"", :as => :tags $(function() { $(""#product_tags"").tokenInput(""/products/tags.json"", { prePopulate: $(""#product_tags"").data(""pre""), preventDuplicates: true, noResultsText: ""No results, needs to be created."", animateDropdown: false });}); <%= p.text_field :tag_list, :id => ""product_tags"", ""data-pre"" => @product.tags.map(&:attributes).to_json %> format.json { render :json => @tags.collect{|t| {:id => t.name, :name => t.name }}}",How to use jquery-Tokeninput and Acts-as-taggable-on
How to use jquery-Tokeninput and Acts-as-taggable-on together," This is how you use autocomplete with jQuery Tokeninput and ActsAsTaggableOn.In my situation i am using a nested form but it shouldnt matter. Everything below is code that works.CodeProduct Model: Products Controller: Routes: Application.js: Form: Issue 1(SOLVED)Must have the line: Note - You can use @tags.map here as well and you dont have to change the form either.Below are the 2 issues on why you needed to do this:I have the following Tag: {""id"":1,""name"":""Food""}. When I save a Product, tagged ""Food"", it should save as ID: 1 when it searches and finds the name ""Food"". Currently, it saves a new Tag with a new ID that references the ""Food"" ID, i.e. {""id"":19,""name"":""1""}. Instead, it should be finding the ID, showing the name, and doing a find_or_create_by so it doesn't create a new Tag.Issue 2(SOLVED)When I go to products/show to see the tags by doing <%= @product.tag_list %>. The name appears as ""Tags: 1"", when it really should be ""Tags: Food"".How can I fix these issues? <code>  attr_accessible :tag_list # i am using the regular :tag_listacts_as_taggable_on :tags # Tagging products #1. Define the tags path #2. Searches ActsAsTaggable::Tag Model look for :name in the created table. #3. it finds the tags.json path and whats on my form. #4. it is detecting the attribute which is :name for your tags.def tags @tags = ActsAsTaggableOn::Tag.where(""tags.name LIKE ?"", ""%#{params[:q]}%"") respond_to do |format| format.json { render :json => @tags.map{|t| {:id => t.name, :name => t.name }}} endend # It has to find the tags.json or in my case /products/tags.jsonget ""products/tags"" => ""products#tags"", :as => :tags $(function() { $(""#product_tags"").tokenInput(""/products/tags.json"", { prePopulate: $(""#product_tags"").data(""pre""), preventDuplicates: true, noResultsText: ""No results, needs to be created."", animateDropdown: false });}); <%= p.text_field :tag_list, :id => ""product_tags"", ""data-pre"" => @product.tags.map(&:attributes).to_json %> format.json { render :json => @tags.collect{|t| {:id => t.name, :name => t.name }}}",How to use jquery-Tokeninput and Acts-as-taggable-on
Mechanize: Follow a Link," In Mechanize on Ruby, I have to assign a new variable to every new page I come to. For example: Is there a way to run Mechanize without a variable holding every page state? like <code>  page2 = page1.link_with(:text => ""Continue"").click page3 = page2.link_with(:text => ""About"").click ...etc my_only_page.link_with(:text => ""Continue"").click! my_only_page.link_with(:text => ""About"").click!",Ruby Mechanize: Follow a Link
Opening a browser in fullscreen mode," I know this is a very silly question. Yet, am not able to find how to make the browser open in fullscreen mode using watir webdriver. i tried using maximize() but in vain. This is how the code looks like: getting the error ""undefined method maximize"" <code>  require ""rubygems""require ""watir-webdriver""ff = Watir::Browser.new(:firefox)ff.goto(""http://google.com"")ff.maximize()",Opening a browser in fullscreen mode using watir-webdriver
delete_all vs destroy_all," I am looking for the best approach to delete records from a table. For instance, I have a user whose user ID is across many tables. I want to delete this user and every record that has his ID in all tables. This works and removes all references of the user from all tables, but I heard that destroy_all was very process heavy, so I tried delete_all. It only removes the user from his own user table and the id from all the other tables are made null, but leaves the records intact in them. Can someone share what the correct process is for performing a task like this? I see that destroy_all calls the destroy function on all associated objects but I just want to confirm the correct approach. <code>  u = User.find_by_name('JohnBoy')u.usage_indexes.destroy_allu.sources.destroy_allu.user_stats.destroy_allu.delete",delete_all vs destroy_all?
Python equivalent of Ruby's `method_missing`, What is Python's equivalent of Ruby's method_missing method? I tried using __getattr__ but this hook applies to fields too. I only want to intercept the method invocations. What is the Python way to do it? <code> ,Python equivalent of Ruby's 'method_missing'
Ruby: dynamic constant error," gives me the error: SyntaxError: dynamic constant assignment errorWhy is this considered a dynamic constant? I'm just assigning a string to it. <code>  class MyClass def mymethod MYCONSTANT = ""blah"" endend",Dynamic constant assignment
Ruby url encoding string," How do I URI::encode a string like: to get it in a format like: as per RFC 1738?Here's what I tried: Also: I looked all about the internet and haven't found a way to do this, although I am almost positive that the other day I did this without any trouble at all. <code>  \x12\x34\x56\x78\x9a\xbc\xde\xf1\x23\x45\x67\x89\xab\xcd\xef\x12\x34\x56\x78\x9a %124Vx%9A%BC%DE%F1%23Eg%89%AB%CD%EF%124Vx%9A irb(main):123:0> URI::encode ""\x12\x34\x56\x78\x9a\xbc\xde\xf1\x23\x45\x67\x89\xab\xcd\xef\x12\x34\x56\x78\x9a""ArgumentError: invalid byte sequence in UTF-8 from /usr/local/lib/ruby/1.9.1/uri/common.rb:219:in `gsub' from /usr/local/lib/ruby/1.9.1/uri/common.rb:219:in `escape' from /usr/local/lib/ruby/1.9.1/uri/common.rb:505:in `escape' from (irb):123 from /usr/local/bin/irb:12:in `<main>' irb(main):126:0> CGI::escape ""\x12\x34\x56\x78\x9a\xbc\xde\xf1\x23\x45\x67\x89\xab\xcd\xef\x12\x34\x56\x78\x9a""ArgumentError: invalid byte sequence in UTF-8 from /usr/local/lib/ruby/1.9.1/cgi/util.rb:7:in `gsub' from /usr/local/lib/ruby/1.9.1/cgi/util.rb:7:in `escape' from (irb):126 from /usr/local/bin/irb:12:in `<main>'",How to URL encode a string in Ruby
ruby net/imap : archive mail," With the following ruby code, I can read a user's mail in an inbox via IMAP: I want to know how I can archive and mark read emails. I want to move the emails out of the user's inbox. <code>  require 'net/imap'imap = Net::IMAP.new('imap.gmail.com',993,true)imap.login('user','passwd')imap.select('INBOX')mailIds = imap.search(['ALL'])mailIds.each do |id| msg = imap.fetch(id,'RFC822')[0].attr['RFC822'] puts msgend imap.logout()imap.disconnect()",How to archive a message using ruby `net/imap`
"Utterly mystifying ""undefined constant"" issue with Ruby/Rails"," I've got a Rails project where a constant is being nuked at some point while serving a request.I'm using the mime/types and restclient gems. The restclient module defines an extension to MIME which contains the method type_for_extension. I can access MIME::Types.type_for_extension on my first invocation of a given controller action. On the second invocation, it's gone.I can still use MIME::Types.type_for, but the added method is simply gone, so when I try to use the RestClient module it throws an exception on the line showin in stringify_headers: **How is this possible? type_for_extension defined in the same file as stringify_headers; how could the latter get nuked but not the former?EDIT: FIXED IT!In my config: aws-s3 was loading mime-types via require_library_or_gem, which ultimate invoked ActiveSupport::Dependencies.autoload_module! which maintains a table called autoloaded_constants which are nuked when ActionController.close calls Dispatcher.cleanup_application.Fix was to load mime-types first, so it's not autoloaded.*whew* <code>  module RestClient ... def stringify_headers headers result[key] = target_values.map { |ext| MIME::Types.type_for_extension(ext.to_s.strip) }.join(', ') ... end endendmodule MIME class Types def type_for_extension ext candidates = @extension_index[ext] candidates.empty? ? ext : candidates[0].content_type end class << self def type_for_extension ext @__types__.type_for_extension ext end end endend NoMethodError, message: undefined method `type_for_extension' for MIME::Types:Class config.gem ""aws-s3"", :version => "">= 0.6.2"", :lib => ""aws/s3"" config.gem 'mime-types', :lib => 'mime/types'","Mystifying ""undefined constant"" issue with Ruby/Rails"
RDF schema for public library or bookstore?, What's the best Ruby library for working with RDF and SPARQL? I saw some other related questions but they were over two years old.  <code> ,What's the preferred RDF toolset for Ruby?
In Ruby how to rename a directory," How do I rename a directory in Ruby?I see how to rename individual files, but not folders.  <code> ",How to rename a directory?
I need help with symbols in ruby," I do not understand what a symbol table is. Can someone help me understand symbols, from the very basics and explain thoroughly. <code> ",What are symbols and how do we use them?
Why does a private variable seemingly disappear when inside a block?," Forgive me, guys. I am at best a novice when it comes to Ruby. I'm just curious to know the explanation for what seems like pretty odd behavior to me.I'm using the Savon library to interact with a SOAP service in my Ruby app. What I noticed is that the following code (in a class I've written to handle this interaction) seems to pass empty values where I expect the values of member fields to go: This is despite the fact that both @user and @pass have been initialized as non-empty strings.When I change the code to use locals instead, it works the way I expect: I'm guessing this strange (to me) behavior must have something to do with the fact that I'm inside a block; but really, I have no clue. Could someone enlighten me on this one? <code>  create_session_response = client.request ""createSession"" do soap.body = { :user => @user, # This ends up being empty in the SOAP request, :pass => @pass # as does this. }end user = @userpass = @passcreate_session_response = client.request ""createSession"" do soap.body = { :user => user, # Now this has the value I expect in the SOAP request, :pass => pass # and this does too. }end",Why do instance variables seemingly disappear when inside a block?
Failed to load remote gems," I have used RubyMine 3.2.1 trialversion for a week now, with no errors at all. But now, when I open RubyMine I get this:What can I do to fix it? I am using Ruby Version Manager as well. spec_fetcher.rb:170: stack level too deep (SystemStackError)UPDATE: I am still getting this error!UPDATE 2: Not anymore! <code> ",Failed to load remote gems: stack level too deep (SystemStackError)
Download an image from a URL," I am trying to use HTTP::get to download an image of a Google chart from a URL I created. This was my first attempt: Which produced only an empty PNG file.For my second attempt I used the value stored inside failure_url inside the http.get() call. And, for some reason, this version works even though the first attempt had the same data inside the http.get() call. Does anyone know why this is?SOLUTION:After trying to figure why this is happening I found ""How do I download a binary file over HTTP?"".One of the comments mentions removing http:// in the Net::HTTP.start(...) call otherwise it won't succeed. Sure enough after I did this: it worked. <code>  failures_url = [title, type, data, size, colors, labels].join(""&"")require 'net/http'Net::HTTP.start(""http://chart.googleapis.com"") { |http| resp = http.get(""/chart?#{failures_url"") open(""pie.png"" ,""wb"") { |file| file.write(resp.body) }} require 'net/http'Net::HTTP.start(""http://chart.googleapis.com"") { |http| resp = http.get(""/chart?chtt=Builds+in+the+last+12+months&cht=bvg&chd=t:296,1058,1217,1615,1200,611,2055,1663,1746,1950,2044,2781,1553&chs=800x375&chco=4466AA&chxl=0:|Jul-2010|Aug-2010|Sep-2010|Oct-2010|Nov-2010|Dec-2010|Jan-2011|Feb-2011|Mar-2011|Apr-2011|May-2011|Jun-2011|Jul-2011|2:|Months|3:|Builds&chxt=x,y,x,y&chg=0,6.6666666666666666666666666666667,5,5,0,0&chxp=3,50|2,50&chbh=23,5,30&chxr=1,0,3000&chds=0,3000"") open(""pie.png"" ,""wb"") { |file| file.write(resp.body) }} failures_url = [title, type, data, size, colors, labels].join(""&"")require 'net/http'Net::HTTP.start(""chart.googleapis.com"") { |http| resp = http.get(""/chart?#{failures_url"") open(""pie.png"" ,""wb"") { |file| file.write(resp.body) }}",Download an image from a URL?
NameError: undefined local variable or method `logger' - Ruby on Rails," When I run 'script/server' everything works fine, but when I run my unit tests (rake test:units), I get the error below, and am not sure how to solve this.Error I tried putting: Here is the code that is using my logger: But this still does not solve the error <code>  NameError: undefined local variable or method `logger' for #<GiveawayEligibleMemberTest:0x10477dff8> /Users/kamilski81/Sites/pe/vitality_mall/vendor/rails/actionpack/lib/action_controller/test_process.rb:471:in `method_missing' /Users/kamilski81/Sites/pe/vitality_mall/lib/update_giveaway_eligible_members.rb:17:in `is_valid_checksum?' /Users/kamilski81/Sites/pe/vitality_mall/test/unit/giveaway_eligible_member_test.rb:26:in `test_that_checksum_is_valid' /Users/kamilski81/Sites/pe/vitality_mall/vendor/rails/activesupport/lib/active_support/testing/setup_and_teardown.rb:60:in `__send__' /Users/kamilski81/Sites/pe/vitality_mall/vendor/rails/activesupport/lib/active_support/testing/setup_and_teardown.rb:60:in `run' class Test::Unit::TestCase RAILS_DEFAULT_LOGGER = Logger.new(STDOUT) RAILS_DEFAULT_LOGGER.level = Logger::WARN logger = Logger.new(STDOUT) logger.level = Logger::WARNend def is_valid_checksum?(csv_arr) expected_row_count = csv_arr[0][3].to_i logger.debug ""Expected record count: #{expected_row_count}"" actual_row_count = csv_arr.nitems - 1 logger.debug ""Actual record count: #{actual_row_count}"" checksum_valid = false if expected_row_count == actual_row_count logger.debug ""Checksum is valid"" checksum_valid = true end return checksum_validend",NameError: undefined local variable or method `logger'
"WARNING: Nokogiri was built against LibXML version 2.7.8, but has dynamically loaded 2.7.3"," I have done all kinds of research and tried many different things. I know this question has been answered many times, but none of the suggested solutions are working for me.After upgrading to Lion I am getting segmentation faults in Ruby. I'm fairly confident it's Nokogiri. So I installed libxml2 via Homebrew. I ran brew link libxml2. Then I reinstalled Nokogiri using that version of the library.For proof: I've already included Nokogiri at the top of my gemfile and I've also required it in my environment file. I have no idea why I am still getting that warning.Any suggestions or ideas to make sure it's loading the right version libxml2? <code>  $ nokogiri -v# Nokogiri (1.5.0)---warnings: []nokogiri: 1.5.0ruby: version: 1.9.2 platform: x86_64-darwin11.0.0 description: ruby 1.9.2p290 (2011-07-09 revision 32553) [x86_64-darwin11.0.0] engine: rubylibxml: binding: extension compiled: 2.7.8 loaded: 2.7.8","Mac user and getting WARNING: Nokogiri was built against LibXML version 2.7.8, but has dynamically loaded 2.7.3"
Cant install Ruby Enterprise Edition with RVM on OSX Lion," Here is what I have done so far. Clean install of OS X LionDownloaded and installed latest version of Xcode from the App Store. Installed GitInstalled HomebrewInstalled RVMI am now trying to install Ruby Enterprise Edition for a project with rvm install ree and receive the following error: I have already tried CC=/usr/bin/gcc-4.2 rvm install ree and with the same result.  <code>  $ rvm install reeree-1.8.7-2011.03 - #installingERROR: Error running './installer -a /Users/FaraazKhan/.rvm/rubies/ree-1.8.7-2011.03 --no-tcmalloc --dont-install-useful-gems ', please read /Users/FaraazKhan/.rvm/log/ree-1.8.7-2011.03/install.logERROR: There has been an error while trying to run the ree installer. Halting the installation.",Can't install Ruby Enterprise Edition with RVM on OSX Lion
Ruby Hash with Duplicate Keys?, Is it possible to create a hash in Ruby that allows duplicate keys?I'm working in Ruby 1.9.2. <code> ,Ruby Hash with duplicate keys?
Ruby - access module's class variables inside a class," I have a module with a class variable in it Is it possible to get @@variable inside Hello without using get_variable method? I mean something like Abc.variable would be nice. Just curious. <code>  module Abc @@variable = ""huhu"" def self.get_variable @@variable end class Hello def hola puts Abc.get_variable end endenda = Abc::Hello.newa.hola",Access a module's class variables inside a class in Ruby
"How to split a number into all possible permutations of size 1, 2, or 3?"," I am trying to take a string, between length 1 and 10, and output all possible ways of breaking up the string into consecutive substrings that are of sizes 1, 2, or 3. For example:Input: 123456Slice the integer into individual characters, then proceed through to find combinations.The code would return all of the following arrays. I'm trying to do this in ruby. Thanks! <code>  [1, 2, 3, 4, 5, 6] [12, 3, 4, 5, 6] [1, 23, 4, 5, 6] [1, 2, 34, 5, 6] [1, 2, 3, 45, 6] [1, 2, 3, 4, 56] [12, 34, 5, 6] [12, 3, 45, 6] [12, 3, 4, 56] [1, 23, 45, 6] [1, 2, 34, 56] [1, 23, 4, 56] [12, 34, 56] [123, 4, 5, 6] [1, 234, 5, 6] [1, 2, 345, 6] [1, 2, 3, 456] [123, 456] [1, 23, 456] [1, 234, 56] [12, 345, 6] [12, 3, 456] [123, 4, 56] [123, 45, 6]",How to split a string into consecutive substrings of length at most 3 in all possible ways?
"How to split a word into all possible subwords of using 1, 2, or 3 letters per block?"," I am trying to take a string, between length 1 and 10, and output all possible ways of breaking up the string into consecutive substrings that are of sizes 1, 2, or 3. For example:Input: 123456Slice the integer into individual characters, then proceed through to find combinations.The code would return all of the following arrays. I'm trying to do this in ruby. Thanks! <code>  [1, 2, 3, 4, 5, 6] [12, 3, 4, 5, 6] [1, 23, 4, 5, 6] [1, 2, 34, 5, 6] [1, 2, 3, 45, 6] [1, 2, 3, 4, 56] [12, 34, 5, 6] [12, 3, 45, 6] [12, 3, 4, 56] [1, 23, 45, 6] [1, 2, 34, 56] [1, 23, 4, 56] [12, 34, 56] [123, 4, 5, 6] [1, 234, 5, 6] [1, 2, 345, 6] [1, 2, 3, 456] [123, 456] [1, 23, 456] [1, 234, 56] [12, 345, 6] [12, 3, 456] [123, 4, 56] [123, 45, 6]",How to split a string into consecutive substrings of length at most 3 in all possible ways?
What means << in ruby," I have code: what does << mean? <code>  def make_all_thumbs(source) sizes = ['1000','1100','1200','800','600'] threads = [] sizes.each do |s| threads << Thread.new(s) { create_thumbnail(source+'.png', source+'-'+s+'.png', s) } end end",What does << mean in Ruby?
How can i have an rspec test for my default scope," my model has default_scope(:order => 'created_at' )my tests (rspec, factory girl, shoulda, etc.)are: <code>  require 'spec/spec_helper.rb'describe CatMembership do context ""is valid"" do subject { Factory.build(:cat_membership) } it { should be_valid } it { should belong_to :cat} it { should belong_to :cat_group} it { should have_db_column(:start_date)} it { should have_db_column(:end_date)} endend",How can i have rspec test for my default scope
How can i get the current weekday beggining in ruby?, For example today is 28/07/2011 How do i get the weeks first day the monday which is 25/07/2011 in ruby <code> ,How can i get the current weekday beginning in ruby?
Rails - How to declare attr_accessible for mutliple roles without duplication," Is there a way to declare attr_accessible for multiple roles without a ton of duplication?If I have several user roles, and each role is allowed to edit a different subset of attributes, here's what my attr_accessible declaration looks like: I'd like to either A) define an array of accessible attributes that can be shared amongdifferent roles orB) define an array of roles than can access the sameattributesIs this possible? <code>  attr_accessible :first_name, :last_name, :active, :as => :adminattr_accessible :first_name, :last_name, :as => :managerattr_accessible :first_name, :last_name, :as => :guest",Rails - How to declare attr_accessible for multiple roles without duplication
Run a bundler-deployed Ruby app outside of it's own directory?," I'm in the process of writing a Ruby-based daemon to sit and run on one of my Ubuntu servers. I'll be wanting this to run on startup, so will be writing an upstart job file for it. However, I've used bundler for managing the various gems it uses and intend to do this after deploying it to the server: This puts bundler into the so-called 'deployment mode', whereby various options are set and all the gems are installed into a 'vendor' directory rather than system-wide. However this creates a problem with running it, whereby it must be executed from its own directory as this is where the gems end up: If I cd to a different location and then try to run it using it's full path, it fails: I've read through lots of bundler documentation and this entire scenario is never even covered? Should I just install the gems to the system instead? Is there something else I ought to do? <code>  bundle install --deployment <in the app's dir>$ ./runmyapp<it runs> <in another directory>$ /path/to/runmyapp<it crashes as it can't locate its gems>",Run a bundler-deployed Ruby app outside of its own directory?
Hot to show longer traces in Rails TestCases," Is there a config variable to set, or some other way to get Rails ActiveSupport::TestCase to show more than one trace line? It is really hard to debug otherwise.Example: <code>  ERROR test_something (0.73s) SystemStackError: stack level too deep /Users/mario/.rvm/gems/ruby-1.9.2-p290/gems/activerecord-3.0.9/lib/active_record/connection_adapters/abstract/database_statements.rb:153",How to show longer traces in Rails TestCases
How to build session store your own custom class?," By default, sessions are stored in browser cookies (:cookie_store), but you can also specify one of the other included stores (:active_record_store, :mem_cache_store, or your own custom class. Please give me the way to build custom class <code>  config.action_controller.session_store = :your_customer_class",How to build your own custom session store class?
Handling 'Permission denied' errors for Ruby on Rails running in production mode," I am running Ruby on Rails 3.0.9 in production mode on a remote VPS machine running Ubuntu 10.04 LTS (in development mode I use RoR on a MAC OS Snow Leopard) and I would like to know how to manage the following scenario.I use Apache2 and Phusion Passenger and I have set Virtual Host as-like this: More, I use the Paperclip gem and, as a lot of people on the web using it in production mode, I get the following error on handling (image) files: I heard that a solution in order to avoid those kind of errors is to set properly folder permissions (manually! - I don't know if it is possible to automate that ""setting"" process... BTW: is it possible?) but I think there is a better way to solve that. If so, what can\should I do? <code>  <VirtualHost *:80> ServerName project_name.com DocumentRoot /srv/www/project_name.com/public <Directory /srv/www/project_name.com/public> AllowOverride all Options -MultiViews </Directory></VirtualHost> Errno::EACCES (Permission denied - /srv/www/project_name.com/public/images/001):...",Handling Paperclip folder and file permissions using Ruby on Rails
Handling folder and file permissions in Ruby on Rails running in production mode," I am running Ruby on Rails 3.0.9 in production mode on a remote VPS machine running Ubuntu 10.04 LTS (in development mode I use RoR on a MAC OS Snow Leopard) and I would like to know how to manage the following scenario.I use Apache2 and Phusion Passenger and I have set Virtual Host as-like this: More, I use the Paperclip gem and, as a lot of people on the web using it in production mode, I get the following error on handling (image) files: I heard that a solution in order to avoid those kind of errors is to set properly folder permissions (manually! - I don't know if it is possible to automate that ""setting"" process... BTW: is it possible?) but I think there is a better way to solve that. If so, what can\should I do? <code>  <VirtualHost *:80> ServerName project_name.com DocumentRoot /srv/www/project_name.com/public <Directory /srv/www/project_name.com/public> AllowOverride all Options -MultiViews </Directory></VirtualHost> Errno::EACCES (Permission denied - /srv/www/project_name.com/public/images/001):...",Handling Paperclip folder and file permissions using Ruby on Rails
Handling folder and file permissions using Ruby on Rails," I am running Ruby on Rails 3.0.9 in production mode on a remote VPS machine running Ubuntu 10.04 LTS (in development mode I use RoR on a MAC OS Snow Leopard) and I would like to know how to manage the following scenario.I use Apache2 and Phusion Passenger and I have set Virtual Host as-like this: More, I use the Paperclip gem and, as a lot of people on the web using it in production mode, I get the following error on handling (image) files: I heard that a solution in order to avoid those kind of errors is to set properly folder permissions (manually! - I don't know if it is possible to automate that ""setting"" process... BTW: is it possible?) but I think there is a better way to solve that. If so, what can\should I do? <code>  <VirtualHost *:80> ServerName project_name.com DocumentRoot /srv/www/project_name.com/public <Directory /srv/www/project_name.com/public> AllowOverride all Options -MultiViews </Directory></VirtualHost> Errno::EACCES (Permission denied - /srv/www/project_name.com/public/images/001):...",Handling Paperclip folder and file permissions using Ruby on Rails
"rails urls, stacking parameters, appending urls"," EDIT: See below unanswered part II.(ANSWERED) I. Appending URLSI am trying to stack parameters in my view by using basic parameter guidelines:users_path(:a => 'test')The above would return: ?a=testHowever, I want to be able to consecutively click:users_path(:b => 'goat')and have it return ?a=test&b=goatAny suggestions on how to stack/append these URL params?(NOT ANSWERED) II. Removing parametersIf I want to add a [x] link next to a parameter setting, how could I then remove its respective parameter?(ANSWERED) III. Removing page ParameterI would like to remove the page parameter when a user selects a parameter choice. Is there a way to do this? It's clear that if I select 'Sports' as a parameter category, pagination shouldn't remain on page, 26, for example. <code> ",Rails: Appending URL parameters & removing URL parameters
Rails: Appending URL Parameters & removing URL parameters," EDIT: See below unanswered part II.(ANSWERED) I. Appending URLSI am trying to stack parameters in my view by using basic parameter guidelines:users_path(:a => 'test')The above would return: ?a=testHowever, I want to be able to consecutively click:users_path(:b => 'goat')and have it return ?a=test&b=goatAny suggestions on how to stack/append these URL params?(NOT ANSWERED) II. Removing parametersIf I want to add a [x] link next to a parameter setting, how could I then remove its respective parameter?(ANSWERED) III. Removing page ParameterI would like to remove the page parameter when a user selects a parameter choice. Is there a way to do this? It's clear that if I select 'Sports' as a parameter category, pagination shouldn't remain on page, 26, for example. <code> ",Rails: Appending URL parameters & removing URL parameters
using rvm over ssh," RVM is not working over SSH.At the command-line: Connected over SSH: I'm using Ubuntu 11.04.How do I get SSH to use the same Ruby as it is on the system? I already verified some prequisites:Ruby was already installed using apt-get install ruby. Does that make any difference?sshd_config has the option ""PermitUserEnvironment yes"", and I restarted the daemon.The .bashrc on the server contains these lines, but I see the same behavior when I remove them: <code>  leifg@host:~$ which ruby/usr/local/rvm/rubies/ruby-1.9.2-p290/bin/ruby local:~$ ssh leifg@server 'which ruby'/usr/bin/ruby if [ -s ""$HOME/.rvm/scripts/rvm"" ] ; then . ""$HOME/.rvm/scripts/rvm""elif [ -s ""/usr/local/rvm/scripts/rvm"" ] ; then . ""/usr/local/rvm/scripts/rvm""fi",RVM is not working over SSH
fresh install of RVM on new VM isn't letting me install gems," Ok, I just created a fresh Ubuntu 11.04 install on Windows 7 using VirtualBox (not sure if this matters or not but just an fyi)listing my rubies I get: but then trying to install the rails gem I get this: What am I doing wrong?Edit:After doing what Dylan said my output (to prove those libraries are now installed): <code>  aaron@aaron-VirtualBox:~$ rvm listrvm rubies=> ruby-1.9.2-p290 [ x86_64 ] aaron@aaron-VirtualBox:~$ gem install railsERROR: Loading command: install (LoadError) no such file to load -- zlibERROR: While executing gem ... (NameError) uninitialized constant Gem::Commands::InstallCommandaaron@aaron-VirtualBox:~$ aaron@aaron-VirtualBox:~$ sudo apt-get install build-essential bison openssl libreadline6 libreadline6-dev curl git-core zlib1g zlib1g-dev libssl-dev libyaml-dev libsqlite3-0 libsqlite3-dev sqlite3 libxml2-dev libxslt-dev autoconf libc6-dev ncurses-dev[sudo] password for aaron: Reading package lists... DoneBuilding dependency tree Reading state information... DoneNote, selecting 'libxslt1-dev' instead of 'libxslt-dev'Note, selecting 'libncurses5-dev' instead of 'ncurses-dev'autoconf is already the newest version.bison is already the newest version.build-essential is already the newest version.git-core is already the newest version.libc6-dev is already the newest version.libncurses5-dev is already the newest version.libreadline6 is already the newest version.libreadline6-dev is already the newest version.libsqlite3-0 is already the newest version.libsqlite3-dev is already the newest version.libssl-dev is already the newest version.libxslt1-dev is already the newest version.libyaml-dev is already the newest version.openssl is already the newest version.sqlite3 is already the newest version.zlib1g is already the newest version.zlib1g-dev is already the newest version.curl is already the newest version.libxml2-dev is already the newest version.0 upgraded, 0 newly installed, 0 to remove and 0 not upgraded.aaron@aaron-VirtualBox:~$ gem install railsERROR: Loading command: install (LoadError) no such file to load -- zlibERROR: While executing gem ... (NameError) uninitialized constant Gem::Commands::InstallCommandaaron@aaron-VirtualBox:~$",Fresh install of RVM in Ubuntu isn't letting me install gems (zlib error)
Is there an idiomatic ruby/rai way of returning the first truthy mapped value?," I have an array of objects, some of which respond to :description, and I want to get the description from the first one with a truthy description. I could do this: or this: but the first isn't DRY (description is in there twice) and the second iterates through the whole array before finding the value. Is there anything in the ruby standard library, or in Rails' extensions to it, which would let me do something like this: I know I could write it easily enough, but the standard libraries are big enough that I might not need to. Is there a function which works like my detect_and_return? <code>  objects.detect{|o| o.try(:description)}.description objects.map{|o| o.try(:description)}.detect{|o| o} objects.detect_and_return{|o| o.try(:description)}",Is there an idiomatic ruby/rails way of returning the first truthy mapped value?
what is the between Gemfile ang Gefile.lock in ruby on Rails, I am a beginner to Ruby on Rails and I am using Rails 3.0.9. What is the difference between Gemfile and Gemfile.lock in Rails? <code> ,What is the difference between Gemfile and Gemfile.lock in Ruby on Rails
What is the difference between Gemfile and Gefile.lock in Ruby on Rails, I am a beginner to Ruby on Rails and I am using Rails 3.0.9. What is the difference between Gemfile and Gemfile.lock in Rails? <code> ,What is the difference between Gemfile and Gemfile.lock in Ruby on Rails
Ruby - add mins to Time object," In Ruby, how do I do Time.now + 10.hours?Is there an equivalent for secs and mins? For example: <code>  Time.now + 15.mins",How to add minutes to a Time object
Add minutes to Time object," In Ruby, how do I do Time.now + 10.hours?Is there an equivalent for secs and mins? For example: <code>  Time.now + 15.mins",How to add minutes to a Time object
Do singleton classes create problems a multi-threaded app?," This might be premature optimization, or premature over-cautionization, but I'm avoiding using singletons on a few classes because I'm concerned that down the road I'll need to run my app as multi-threaded, and that the singletons will create conflicts and messiness. Do singletons have this issue in Ruby, or is there some kind of built in namespace so that when an a class refers to the singleton, only the singleton on the same thread is returned?Edit: to clarify these are observable classes which when updated cause the other classes that are watching them to update. I'm not sure if this is thread safe or not, but I do know that right now I'm passing these observable classes around a ton and it's kind of annoying. And they do seem like natural singleton classes. <code> ",Do singleton classes create problems in a multi-threaded app?
Ruby Hash: How to get the first item out of an array in a hash?," I have a Ruby hash that looks like this: How can I get the first (or last) item at a particular key in the hash?  <code>  h = {""side1""=>[""green"", ""Green""], ""side2""=>[""verde"", ""Verde""]}",Get the first item out of a Ruby array in a hash
How Can I Transform the Coordinates of a Shapefile," I am trying to get neighborhood data into my application, and I'm having problems with the data I am using, which I got from here.This file contains a shapefile that has the neighborhoods of San Francisco. I am running a Ruby on Rails framework, and I'm currently using GeoRuby to parse the shapefile.The code looks like this: The code is able to parse the file, but I am unable to understand the coordinates as interpreted. All of the points have values in the millions, when I would expect coordinates between -180 and 180, for valid latitude and longitude. Take a look at an example point: What is the format of these coordinate values? How can I convert them to values that are meaningful to me? (i.e. latitude/longitude based on the SRID 4326 <=> WGS84 spatial reference system)Thank you in advance! <code>  def self.run_import shpfile = '/path/to/realtor_neighborhoods/realtor_neighborhoods' ShpFile.open(shpfile) do |shp| shp.each do |shape| # This gets the first (and only) Polygon from each MultiPolygon polygon = shape.geometry.geometries.first puts polygon.inspect end endend <GeoRuby::SimpleFeatures::Point:0x00000104566a08 @srid=4326, @with_z=false, \ @with_m=false, @x=6015402.9999795845, @y=2114960.4999904726, @z=0.0, @m=0.0>,",How can I transform the coordinates of a Shapefile?
how to add statements to a existed method definition in Ruby," I noticed for the class definition, if I open up the class MyClass, and add something in between without overwrite I still got the original method which defined earlier. The new statements added augment the existing one.But as to the method definition, I still want the same behavior as the class definition, but it seems when I open up the def my_method, the exiting statements within the def and end is overwritten, I need to rewrite that again.So is there any way to make the method definition behave the same as definition, something like super, but not necessarily is the sub-class? <code> ",How to add statements to an existing method definition in Ruby
Print the memory location of a Ruby object," Is there a way to print out the memory location of a Ruby object, not from puts self as I want to have a custom to_s method and print the memory pointer location as one of the pieces of information to be output.  <code> ",How to print the memory location of a Ruby object
Covert unicode value to it's symbol in Ruby, I have these values from a unicode database but I'm not sure how to translate them into the human readable form. What are these even called?Here they are:U+2B71FU+2A52DU+2A68FU+2A690U+2B72FU+2B4F7U+2B72BHow can I convert these to there readable symbols? <code> ,Convert unicode codepoint to string character in Ruby
Covert unicode value to its symbol in Ruby, I have these values from a unicode database but I'm not sure how to translate them into the human readable form. What are these even called?Here they are:U+2B71FU+2A52DU+2A68FU+2A690U+2B72FU+2B4F7U+2B72BHow can I convert these to there readable symbols? <code> ,Convert unicode codepoint to string character in Ruby
Convert unicode value to its symbol in Ruby, I have these values from a unicode database but I'm not sure how to translate them into the human readable form. What are these even called?Here they are:U+2B71FU+2A52DU+2A68FU+2A690U+2B72FU+2B4F7U+2B72BHow can I convert these to there readable symbols? <code> ,Convert unicode codepoint to string character in Ruby
Is the &method(:method_name) idiom bad for perfomance in Ruby?," I've recently come across the &method(:method_name) syntax. (This uses the Object#method method - RDoc link) For example, is the equivalent of Are there performance penalties for the latter compared to the former in the various implementations of Ruby? If so, are the implementors working on improving its performance? <code>  [5, 7, 8, 1].each(&method(:puts)) [5, 7, 8, 1].each{|number| puts number}",Is the &method(:method_name) idiom bad for performance in Ruby?
FInd number of unique elements in a string in ruby?," How can I find unique elements in a string in the best way?Sample string format is o/p <code>  myString = ""34345667543"" ['3','4','3','5'.....]",Fastest way to find the number of unique elements in a string
Fastest way to fInd number of unique elements in a string in ruby?," How can I find unique elements in a string in the best way?Sample string format is o/p <code>  myString = ""34345667543"" ['3','4','3','5'.....]",Fastest way to find the number of unique elements in a string
how to write regex to check only 4 numbers," I am trying to write a regex in Ruby to search a string for numbers of only four digits. I am using/\d{4}/ but this is giving me number with four and more digits.Eg: ""12345-456-6575 some text 9897""In this case I want only 9897 and 6575 but I am also getting 1234 which has a length of five characters.  <code> ",How can I write a regex to find only numbers with four digits?
Ruby question. I am brand new to ruby., Want to shuffle a string.This is my code:what is wrong about it?Thanks. <code>  >> def string_shuffle(s)>> s.split('').shuffle(s.length()).join>> return s>> end,New to Ruby - how do I shuffle a string?
Rails multidimensional array," Maybe it's just my lack of abilities to find stuff here that is the problem, but I can't find anything about how to create multidimensional arrays in Ruby.Could someone please give me an example on how to do it?  <code> ",Ruby multidimensional array
"&#146; is getting converted as ""\uoo92"" bu nokogiri in ruby on rails"," I have html page which has following line with some html entities like ""&#146;"". Result: I want to leave these entities as it is instead of changing it to unicode.Any thing, Am I missing?Thanks <code>  #Here I am not pasting whole html page content. just putting issue line onlyhtml_file = ""<html>....<body><p>they&#146;re originally intended to describe the spread of of viral diseases, but they&amp;#146;re nice analogies for how web/SN apps grow.<p> ...</body></html>""doc = Nokogiri::HTML(html)body = doc.xpath('//body')body_content = body[0].inner_htmlputs body_content These terms come from the fields of medicine and biology they\u0092re originally intended to describe the spread of of viral diseases, but they\u0092re nice analogies for how web/SN apps grow.","&#146; is getting converted as ""\u0092"" by nokogiri in ruby on rails"
"&#146; is getting converted as ""\u0092"" bu nokogiri in ruby on rails"," I have html page which has following line with some html entities like ""&#146;"". Result: I want to leave these entities as it is instead of changing it to unicode.Any thing, Am I missing?Thanks <code>  #Here I am not pasting whole html page content. just putting issue line onlyhtml_file = ""<html>....<body><p>they&#146;re originally intended to describe the spread of of viral diseases, but they&amp;#146;re nice analogies for how web/SN apps grow.<p> ...</body></html>""doc = Nokogiri::HTML(html)body = doc.xpath('//body')body_content = body[0].inner_htmlputs body_content These terms come from the fields of medicine and biology they\u0092re originally intended to describe the spread of of viral diseases, but they\u0092re nice analogies for how web/SN apps grow.","&#146; is getting converted as ""\u0092"" by nokogiri in ruby on rails"
Most elegant way to check Nil in Ruby," I have a code to do a check of nil in ruby. So what I want to achieve is this:for example, if I call get_score_value(nil,(nil-1)). I want ruby to delay the evaluation of nil-1 till it reaches the get_score_value function, instead of evaluate it before it got passed in the function. In another word, I want to pass a mathematical expression as an argument into a method. What is the most elegant way to do this in ruby? Thanks very much UPDATE:I just realized this question is actually related to the topic of lazy and strict evaluation. ( the following is from this great site:http://www.khelll.com/blog/ruby/ruby-and-functional-programming/ Strict versus lazy evaluation Strict evaluation always fully evaluates function arguments before invoking the function. Lazy evaluation does not evaluate function arguments unless their values are required to be evaluated. One use of Lazy evaluation is the performance increases due to avoiding unnecessary calculations. However as the following example shows, Ruby use Strict evaluation strategy: print length([2+1, 3*2, 1/0, 5-4]) =>ZeroDivisionError: divided by 0 The third parameter of the passed array contains a division by zero operation and as Ruby is doing strict evaluation, the above snippet of code will raise an exception.  <code>  def get_score_value(value,value2) value.nil? ? ""NULL"" : value2.round(2)end",How to do lazy evaluation of Ruby arguments
Sorting a two-dimensional array in ruby," Ok, say I have an array like so [[z,1], [d,3], [e,2]], how can I sort this array by the second element of each constituent array? So that my array would look like the following? [[z,1], [e,2], [d,3]]? <code> ",Sorting a two-dimensional array by second value
Rails 3: Multiply all elements of an array," Let's say I have an array A = [1, 2, 3, 4, 5]how can I multiply all elements with ruby and get the result? 1*2*3*4*5 = 120and what if there is an element 0 ? How can I ignore this element? <code> ",Ruby: Multiply all elements of an array
Is it possible to negate a scope in Rails 3?," I have the following scope for my class called Collection: I can run Collection.with_missing_coins.count and get a result back -- it works great!Currently, if I want to get collections without missing coins, I add another scope: I find myself writing a lot of these ""opposite"" scopes. Is it possible to get the opposite of a scope without sacrificing readability or resorting to a lambda/method (that takes true or false as a parameter)?Something like this: <code>  scope :with_missing_coins, joins(:coins).where(""coins.is_missing = ?"", true) scope :without_missing_coins, joins(:coins).where(""coins.is_missing = ?"", false) Collection.!with_missing_coins",Is it possible to negate a scope in Rails?
Rails 3.1 engines migrations are not work," I'm creating a rails 3.1 engine with migrations. rake db:migration works fine inside that engine, and inside host app. But I need to include this engine into another rails engine. The second engine contains dummy app for testing, I added to application.rb of that dummy app this line: In the console, I can see classes from the first engine. give me app:my_engine_engine:install:migrations task, but when I'm run this task I'm getting this error: Can anyone help me with this trouble? <code>  require 'my_engine' rake -T rake app:my_engine_engine:install:migrations rake aborted!Don't know how to build task 'railties:install:migrations'Tasks: TOP => app:my_engine_engine:install:migrations(See full trace by running task with --trace)",Rails 3.1 engines migrations are not working
Why String#gsub doubles content," This seems to be wrong, I expect to get ""#main= \\'quotes\\'""when I don't use escape char, then it works as expected. So there must be something to do with escaping.Using ruby 1.9.2p290I need to replace single quotes with back-slash and a quote.Even more inconsistencies: What is going on here? <code>  s = ""#main= 'quotes's.gsub ""'"", ""\\'"" # => ""#main= quotes'quotes"" s.gsub ""'"", ""*"" # => ""#main= *quotes*"" ""\\'"".length # => 2""\\*"".length # => 2# As expected""'"".gsub(""'"", ""\\*"").length # => 2""'a'"".gsub(""'"", ""\\*"") # => ""\\*a\\*"" (length==5)# WTF next:""'"".gsub(""'"", ""\\'"").length # => 0# Doubling the content?""'a'"".gsub(""'"", ""\\'"") # => ""a'a"" (length==3)",Why does String#gsub double content?
File upload with Activeadmin Rails, I use Active admin as my rails application backend. I want to make a file upload. How can I accomplish this functionality?  <code> ,File upload with Activeadmin Rails using paperclip
Why are more DSLs written in Ruby versus Python?," The section below goes into more detail, but basically someone stated that the Ruby-written DSL RSpec couldn't be rewritten in Python. Is that true? If so, why? I'm wanting to better understand the technical differences between Ruby and Python.Update: Why am I asking this question?The Running away from RSpec discussion has some statements about it being ""impossible"" to recreate RSpec in Python. I was trying to make the question a little broader in hopes of learning more of the technical differences between Ruby and Python. In hindsight, maybe I should have tightened the question's scope to just asking if it truly is impossible to recreate RSpec in Python, and if so why.Below are just a few quotes from the Running away from RSpec discussion.Initial Question For the past few weeks I have been thinking a lot about RSpec and why there is no clear, definite answer when someone asks: ""I'm looking for a Python equivalent of RSpec. Where can I find such a thing?"" Probably the most common (and understandable) answer is that Python syntax wouldn't allow such a thing whereas in Ruby it is possible.First Response to Initial Question Not syntax exactly. Rspec monkeypatches every object inside of its scope, inserting the methods ""should"" and ""should_not"". You can do something in python, but you can't monkeypatch the built-in types.Another Response As you suggest, it's impossible. Mote and PySpec are just fancy ways to name your tests: weak implementations of one tiny corner of RSpec. Mote uses horrible settrace magic; PySpec adds a bunch of domain-irrelevant noise. Neither even supports arbitrary context strings. RSpec is more terse, more expressive, removes the noise, and is an entirely reasonable thing to build in Ruby. That last point is important: it's not just that RSpec is possible in Ruby; it's actually idiomatic.  <code> ",Are there technical reasons a Ruby DSL like RSpec couldn't be rewritten in Python?
Image file input with formtastic," I started to use formstatic but I need to make a file field with image preview. I mean, when i edit an object, i want to see the image already linked.How can I do that?Thank you ! <code> ",Image file input with Formtastic and ActiveAdmin 
"Syntax Error, unexpected $end"," I'm getting an error from one of my controller classes and I can't figure out why. The error is: Here is terms_controller.rb: My show page currently just consists of: It's probably something small that I'm just missing - thanks for your help! <code>  SyntaxError in TermsController#show, syntax error, unexpected $end, expecting keyword_end class TermsController < ApplicationController def show @term = Term.find(params[:id]) if @term.id == 1 @title = ""Fall"" else if @term.id == 2 @title = ""Winter"" else if @term.id == 3 @title = ""Spring"" else if @term.id == 4 @title = ""Summer"" end end end <h1> <%= @title %> </h1>",Syntax Error: unexpected $end when using if/else if?
Getting attribute's value in Nokogiri," I have a document which look like this: I can't get Nokogiri to get me the value of href attribute. I'd like to store the address in a Ruby variable as a string. <code>  <div id=""block""> <a href=""http://google.com"">link</a></div>",Getting attribute's value in Nokogiri to extract link URLs
Can Nokogiri handle <br> tags correctly?," When parsing HTML document, how Nokogiri handle <br> tags? Suppose we have document that looks like this one: Do Nokogiri know that <br> tags are something special not just regular XML tags and ignore them when parsing node feed? I think Nokogiri is that smart, but I want to make sure before I accept this project involving scraping site written as HTML4. You know what I mean (How are you? is not a content of the first <br> as it would be in XML).  <code>  <div> Hi <br> How are you? <br></div>",How does Nokogiri handle unclosed HTML tags like <br>?
erb to haml converting issue," How to write this ERB in HAML I can: but I don't want concatenating here and I want to write it inline: <code>  <%= some_ruby_code %>:# OR<%= some_ruby_code %><br /> =some_ruby_code + "":""# and=some_ruby_code%br (=some_ruby_code):# and(=some_ruby_code)%br",Mixing Ruby code and literal markup with Haml
Why is IO::WaitReadable being raised differently for STDOUT than STDERR? (Ruby 1.9.2p290)," Given that I wish to test non-blocking reads from a long command, I created the following script, saved it as long, made it executable with chmod 755, and placed it in my path (saved as ~/bin/long where ~/bin is in my path).I am on a *nix variant with ruby 1.9.2p290 (2011-07-09 revision 32553) [x86_64-darwin11.0.0] compiled with RVM defaults. I do not use Windows, and am therefore unsure if the test script will work for you if you do. Why does long_err produce each STDERR message as it is printed by ""long"" while long_out remains blocked until all STDOUT messages are printed? I assume you will require 'open3' before testing either function.Why is IO::WaitReadable being raised differently for STDOUT than STDERR?Workarounds using other ways to start subprocesses also appreciated if you have them. <code>  #!/usr/bin/env ruby3.times do STDOUT.puts 'message on stdout' STDERR.puts 'message on stderr' sleep 1end def long_err( bash_cmd = 'long', maxlen = 4096) stdin, stdout, stderr = Open3.popen3(bash_cmd) begin begin puts 'err -> ' + stderr.read_nonblock(maxlen) end while true rescue IO::WaitReadable IO.select([stderr]) retry rescue EOFError puts 'EOF' endend def long_out( bash_cmd = 'long', maxlen = 4096) stdin, stdout, stderr = Open3.popen3(bash_cmd) begin begin puts 'out -> ' + stdout.read_nonblock(maxlen) end while true rescue IO::WaitReadable IO.select([stdout]) retry rescue EOFError puts 'EOF' endend",Why is IO::WaitReadable being raised differently for STDOUT than STDERR?
rails 3: what any way to have multiple seeds.rb files? Any kind of ' versioning' for seed data?," We need to add more seed data for some newly added tables to ""version 100"" of our rails project. However, if we simply add it to the seeds.rb and re-run the rake db:seed command, it will of course RE-add the original seed data, duplicating it.So if you've already added seed data to seeds.rb for, say, TableOne ... how can we incrementally add seed data for TableTwo and TableThree at later stages of development?I'd hoped I could simply create a NEW seeds_two.rb file and run rake db:seeds_two but that gave an error Don't know how to build task 'db:seeds_two'So it looks like ONLY ""seeds.rb"" can be used - so how DO people maintain incremental additions to seed data? <code> ",Is there any way to have multiple seeds.rb files? Any kind of 'versioning' for seed data?
Generate static web sites with Ruby on Rails," I need an easy way to generate static web pages so that I can serve them up with Apache or Nginx. Currently I am using SproutCore's build tool (Abbot) to generate static pages but that is a little bit cumbersome as it is designed for building SproutCore apps, not non-SproutCore HTML pages.Here are my requirements:Javascript must be combined and minifiedCSS files must be combinedEach image / CSS / Javascript asset must have unique URL for better caching (query string isn't enough)Asset URL should be different only when it really changesLocalization support thorough HTML, CSS, Javascript and image filesNice template engine with layouts, partials etc.Here are possible solutions I have found:Create the site using Ruby on Rails, then get all resources using wget like http://usefulfor.com/ruby/2009/03/23/use-rails-to-create-a-static-site-rake-and-subversion/Use Middleman: http://middlemanapp.com Any thoughts on this?After a longish evaluation process I have decided to use Middleman. It does the trick and I love its simplicity and the fact that I can use existing Rack components with it.Best Regards,Pekka Mattila <code> ",Static web site generation
Generate static web sites easily," I need an easy way to generate static web pages so that I can serve them up with Apache or Nginx. Currently I am using SproutCore's build tool (Abbot) to generate static pages but that is a little bit cumbersome as it is designed for building SproutCore apps, not non-SproutCore HTML pages.Here are my requirements:Javascript must be combined and minifiedCSS files must be combinedEach image / CSS / Javascript asset must have unique URL for better caching (query string isn't enough)Asset URL should be different only when it really changesLocalization support thorough HTML, CSS, Javascript and image filesNice template engine with layouts, partials etc.Here are possible solutions I have found:Create the site using Ruby on Rails, then get all resources using wget like http://usefulfor.com/ruby/2009/03/23/use-rails-to-create-a-static-site-rake-and-subversion/Use Middleman: http://middlemanapp.com Any thoughts on this?After a longish evaluation process I have decided to use Middleman. It does the trick and I love its simplicity and the fact that I can use existing Rack components with it.Best Regards,Pekka Mattila <code> ",Static web site generation
How can I intercept definition call in ruby?," I currently have a superclass which has a function that I want all the subclass to call within each of its function. The function is supposed to behave like a before_filter function in rails but I am not sure on how to go about implementing before_filter. Here is an example <code>  class Superclass def before_each_method puts ""Before Method"" #this is supposed to be invoked by each extending class' method endendclass Subclass < Superclass def my_method #when this method is called, before_each_method method is supposed to get invoked endend",How can I intercept method call in ruby?
Transform a Ruby Hash into a Dotted Path Key String, The Rails I18n library transforms a YAML file into a data structure that is accessible via a dotted path call using the t() function. Does anyone know how to do this with a Ruby Hash? Or is it only possible directly via a YAML object? <code>  t('one.two.three.four'),Access Ruby Hash Using Dotted Path Key String
=== vs == vs equal? vs eql? [RUby]," I am trying to understand the difference between these four methods. I know by default that == calls the method equal? which returns true when both operands refer to exactly the same object.=== by default also calls == which calls equal?... okay, so if all these three methods are not overridden, then I guess===, == and equal? do exactly the same thing?Now comes eql?. What does this do (by default)? Does it make a call to the operand's hash/id? Why does Ruby have so many equality signs? Are they supposed to differ in semantics? <code> ","What's the difference between equal?, eql?, ===, and ==?"
=== vs == vs equal? vs eql? ," I am trying to understand the difference between these four methods. I know by default that == calls the method equal? which returns true when both operands refer to exactly the same object.=== by default also calls == which calls equal?... okay, so if all these three methods are not overridden, then I guess===, == and equal? do exactly the same thing?Now comes eql?. What does this do (by default)? Does it make a call to the operand's hash/id? Why does Ruby have so many equality signs? Are they supposed to differ in semantics? <code> ","What's the difference between equal?, eql?, ===, and ==?"
ruby variable as same object," how can I set 'b' to actually be 'a' so that in the example, the variable a will become four as well. thanks. <code>  >> a = 5=> 5>> b = a=> 5>> b = 4=> 4>> a=> 5",ruby variable as same object (pointers?)
How to Delete Variable Within an Array Element Ruby?," I'm new to Ruby and I'm just having a play around with ideas and what I would like to do is remove the @continent data from the country_array I have created. Done a good number of searches and can find quite a bit of info on removing elements in their entirety but can't find how to specifically remove @continent data. Please keep any answers fairly simple as I'm new, however any help much appreciated. <code>  class World include Enumerable include Comparable attr_accessor :continent def <=> (sorted) @length = other.continent end def initialize(country, continent) @country = country @continent = continent end enda = World.new(""Spain"", ""Europe"")b = World.new(""India"", ""Asia"")c = World.new(""Argentina"", ""South America"")d = World.new(""Japan"", ""Asia"")country_array = [a, b, c, d]puts country_array.inspect[#<World:0x100169148 @continent=""Europe"", @country=""Spain"">, #<World:0x1001690d0 @continent=""Asia"", @country=""India"">, #<World:0x100169058 @continent=""South America"", @country=""Argentina"">, #<World:0x100168fe0 @continent=""Asia"", @country=""Japan"">]",Delete Instance Variables from Objects in an Array
"Purpose of ""!"" and ""?"" at the end of method name"," Sometimes I see methods in Ruby that have ""?"" and ""!"" at the end of them, e.g: I was wondering what their purpose is? Are they just syntax sugarcoating? <code>  name = ""sample_string""name.reversename.reverse!name.is_binary_data?","What is the purpose of ""!"" and ""?"" at the end of method names?"
How to get a list of required gems in ruby," This is purely an experiment, but I'm wondering if it's possible to get a list of the require'd gems at runtime via some kind of metaprogramming. For example, say I have: How can I print out the following at runtime? <code>  require 'rubygems'require 'sinatra'require 'nokogiri'# don't know what to do here this app needs rubygems, sinatra, nokogiri",How do I get a list of files that have been `required` in Ruby?
RoR - following 301 redirects," My users submit urls (to mixes on mixcloud.com) and my app uses them to perform web requests.A good url returns a 200 status code: But if you forget the trailing slash then our otherwise good url returns a 301: The same thing happens with 404's: How can I 'drill down' into the 301 to see if it takes us on to a valid resource or an error page?Is there a tool that provides a comprehensive overview of the rules that a particular domain might apply to their urls? <code>  uri = URI.parse(""http://www.mixcloud.com/ErolAlkan/hard-summer-mix/"")request = Net::HTTP.get_response(uri)(#<Net::HTTPOK 200 OK readbody=true> uri = ""http://www.mixcloud.com/ErolAlkan/hard-summer-mix""#<Net::HTTPMovedPermanently 301 MOVED PERMANENTLY readbody=true> # bad path returns a 404""http://www.mixcloud.com/bad/path/"" # bad path minus trailing slash returns a 301""http://www.mixcloud.com/bad/path""",Ruby Net::HTTP - following 301 redirects
"before/after hooks for only particular roles, for library-provided recipes"," I have a dedicated server for delayed_job tasks. I want to start, stop, and restart delayed_job workers on only this server. I am using the capistrano recipes provided by delayed_job.When I only had 1 server, this was my config: Now I want to have those hooks only apply to a separate delayed_job server (role :delayed_job <ip address>). Is this possible to do elegantly? Do I have to wrap each delayed_job tasks in a meta task? Or write my own tasks and not use the ones provided by delayed job? <code>  before ""deploy:restart"", ""delayed_job:stop""after ""deploy:restart"", ""delayed_job:start""after ""deploy:stop"", ""delayed_job:stop""after ""deploy:start"", ""delayed_job:start""",Invoke delayed_job capistrano tasks only on specific servers
Run an CLI Thor app without arguments or task name," I'm looking for a way to create a command-line thor app that will run a default method without any arguments. I fiddled with Thor's default_method option, but still requires that I pass in an argument. I found a similar case where someone wanted to run a CLI Thor task with arguments but without a task name. I'd like to run a task with no task name and no arguments. Is such a thing possible? <code> ",Run a CLI Thor app without arguments or task name
Sorting YML files," I've been trying to sort an i18n translations YAML file with Ruby so I can manage new translations in a better and organized way, but I've been wondering if there is something to ease the task.I found a YAML file writer so I can write a hash into a file, but my problem is to sort the hash correctly. If I got hash h, h.sort returns an array and I still haven't figured a simple way to do that.I have YAML files like this: (The files are way larger than this)But I want to sort them this way: I thought that some simple recursive method could help me like this: <code>  pt-br: global: misc: total: ""Total"" all: ""Todos"" close: ""Fechar"" cancel: ""Cancelar"" crud: access: ""Acessar"" back: ""Voltar"" edit: ""Editar"" confirm: ""Confirmar"" send: ""Enviar""... pt-br: global: crud: access: ""Acessar"" back: ""Voltar"" confirm: ""Confirmar"" edit: ""Editar"" send: ""Enviar"" misc: all: ""Todos"" cancel: ""Cancelar"" close: ""Fechar"" total: ""Total"" def translation_sort(h) if h.class == Hash h = h.sort h.each{|item| translation_sort(item)} end hendrequire ""yaml""h=YAML.load_file(File.open(""~/pt-br.sample.yml""))translation_sort(h)",How can I sort YAML files?
How can I use US-style dates in Rails 3.1 using Ruby 1.9?," I'm in the U.S., and we usually format dates as ""month/day/year"". I'm trying to make sure that my Rails app, using Ruby 1.9, assumes this format everywhere, and works the way it did under Ruby 1.8.I know that lots of people have this issue, so I'd like to create a definitive guide here.Specifically:'04/01/2011' is April 1, 2011, not Jan 4, 2011.'4/1/2011' is also April 1, 2011 - the leading zeros should not be necessary.How can I do this?Here's what I have so far.Controlling Date#to_s behaviorI have this line in application.rb: This ensures that if I do the following: ... I get ""04/01/2011"", not ""2011-04-01"".Controlling String#to_date behaviorActiveSupport's String#to_date method currently looks like this (source): (In case you don't follow that, the second line creates a new date, passing in year, month and day, in that order. The way it gets the year, month and day values is by using Date._parse, which parses a string and somehow decides what those values are, then returns a hash. .values_at pulls the values out of that hash in the order Date.new wants them.)Since I know that I will normally pass in strings like ""04/01/2011"" or ""4/1/2011"", I can fix this by monkeypatching it like this: This solution makes my tests pass, but is it crazy? Am I just missing a configuration option somewhere, or is there some other, easier solution?Are there any other date-parsing cases I'm not covering? <code>  # Format our dates like ""12/25/2011' Date::DATE_FORMATS[:default] = '%m/%d/%Y' d = Date.new(2011,4,1)d.to_s def to_date return nil if self.blank? ::Date.new(*::Date._parse(self, false).values_at(:year, :mon, :mday)) end class String # Keep a pointer to ActiveSupport's String#to_date alias_method :old_to_date, :to_date # Redefine it as follows def to_date return nil if self.blank? begin # Start by assuming the values are in this order, separated by / month, day, year = self.split('/').map(&:to_i) ::Date.new(year, month, day) rescue # If this fails - like for ""April 4, 2011"" - fall back to original behavior begin old_to_date rescue NoMethodError => e # Stupid, unhelpful error from the bowels of Ruby date-parsing code if e.message == ""undefined method `<' for nil:NilClass"" raise InvalidDateError.new(""#{self} is not a valid date"") else raise e end end end endendclass InvalidDateError < StandardError; end;",How can I use US-style dates in Rails using Ruby 1.9?
Macthing accented characters with regex," I am running Ruby on Rails 3.0.10 and Ruby 1.9.2. I am using the following Regex in order to match names: However, if I try to save some words like the followings: I have a validation error ""Name format is invalid..How can I change the above Regex so to match also accented characters like , , , , , , ...? <code>  NAME_REGEX = /^[\w\s'""\-_&@!?()\[\]-]*$/uvalidates :name, :presence => true, :format => { :with => NAME_REGEX, :message => ""format is invalid"" } OilalPRby...# In few words, those with accented characters",How to match accented characters with a regex?
Pasting text into IRB is incredibly slow in Ruby Enterprise Edition on OS X. Readline issue?," When I paste the following text into IRB or PRY running under ruby-enterprise-2011.03, it takes 13 seconds. Pasting isn't slow when running irb with other ruby installations on the same computer. This question is related to Rails console running incredibly slowly when editing text, but I'm not using rvm, and there is no slowness when writing, editing, or deleting text; Only pasting is slow. @fl00r's suggestion works, but that isn't a permanent fix.Also, if there are hard newlines in the pasted text, only the last line is slow. For example, pasting the following text only takes about 1.5 seconds I've noticed that REE loads a copy of libreadline that none of the other ruby installations load. Is there a way to configure and compile REE to ignore the libreadline file from MacPorts? I ran the above script on several ruby installations. Only the bottom 2 installations (the REE installations) include the extra libreadline. <code>  # Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. jruby-1.5.6 jruby-1.6.3 ruby-1.8.6-p420 ruby-1.8.7-p352 ruby-1.9.1-p431 ruby-1.9.2-p290 ruby-1.9.3-preview1 or Mac OS X's default system install of 1.8.7-p249 # Lorem ipsum dolor sit amet, consectetur adipisicing elit, # sed do eiusmod tempor incididunt ut labore et dolore magna # aliqua. require 'readline'puts `lsof -p #{$$} | grep -i readline | awk '{print $9}'`puts === ruby-1.8.6-p36 ======================/opt/ruby-1.8.6-p36/lib/ruby/1.8/i686-darwin11.2.0/readline.bundle=== ruby-1.8.6-p420 ======================/opt/ruby-1.8.6-p420/lib/ruby/1.8/i686-darwin11.0.1/readline.bundle=== ruby-1.8.7-p352 ======================/opt/ruby-1.8.7-p352/lib/ruby/1.8/i686-darwin11.0.1/readline.bundle=== ruby-1.9.1-p431 ======================/opt/ruby-1.9.1-p431/lib/ruby/1.9.1/i386-darwin11.0.1/readline.bundle=== ruby-1.9.2-p290 ======================/opt/ruby-1.9.2-p290/lib/ruby/1.9.1/x86_64-darwin11.0.1/readline.bundle=== ruby-1.9.3-preview1 ==================/opt/ruby-1.9.3-preview1/lib/ruby/1.9.1/x86_64-darwin11.0.1/readline.bundle=== ruby-enterprise-1.8.7-2011.03 ========/opt/ruby-enterprise-1.8.7-2011.03/lib/ruby/1.8/i686-darwin11.0.1/readline.bundle/opt/local/lib/libreadline.6.2.dylib=== ruby-enterprise-1.8.7-2012.01 ========/opt/ruby-enterprise-1.8.7-2012.01/lib/ruby/1.8/i686-darwin11.2.0/readline.bundle/opt/local/lib/libreadline.6.2.dylib",Pasting text into IRB is incredibly slow. Readline issue?
Proper Assert_Raise Unit Testing in Ruby Question," I am working on Exercise 49 of Learn Ruby the Hard WayThe exercise asks to write a unit test for each function provided. One of the items I am testing is if a proper exception is raised. It is suggested that we use assert_raise for this purpose.Here is the code I am testing: And here is the test, for the function parse_verb: When I run the test, it fails and here is the message I get: Based on my understanding of the assert_raise function, this test should pass, is there something wrong with the way I am using it?If anybody would like a full source code of all the files I am working with I it is available here <code>  class ParserError < ExceptionendPair = Struct.new(:token, :word)def peek(word_list) begin word_list.first.token rescue nil end enddef match(word_list, expecting) word = word_list.shift if word.token == expecting word else nil endenddef skip_word(word_list, token) while peek(word_list) == token match(word_list, token) endenddef parse_verb(word_list) skip_word(word_list, :stop) if peek(word_list) == :verb return match(word_list, :verb) else raise ParserError.new(""Expected a verb next."") endend def test_parse_verb list_one = [Pair.new(:verb, 'go'), Pair.new(:noun, 'king')] assert_equal(parse_verb(list_one), Pair.new(:verb, 'go')) list_two = [Pair.new(:noun, 'player') ,Pair.new(:verb, 'go'), Pair.new(:noun, 'king')] assert_raise(ParserError.new(""Expected a verb next."")) {parse_verb(list_two)}end Larson-2:test larson$ ruby test_sentence.rbLoaded suite test_sentenceStarted.F..Finished in 0.001204 seconds. 1) Failure:test_parse_verb(SentenceTests) [test_sentence.rb:36]:[#<ParserError: Expected a noun or direction next.>] exception expected, notClass: <ParserError>Message: <""Expected a verb next."">---Backtrace---/Users/larson/Ruby/projects/ex48/lib/sentence.rb:45:in `parse_verb'test_sentence.rb:36:in `block in test_parse_verb'---------------4 tests, 7 assertions, 1 failures, 0 errors, 0 skipsTest run options: --seed 40627",Proper Assert_Raise Unit Testing and Use of Exception Class
Strange output from Rails command line," I'm suddenly experiencing that rake and rails sort of bail out with some strange output. It most of all looks like a process list but it's clearly Ruby/Rails related. Also, it's several pages long - I actually had to increase the scrollback setting in my terminal to get to see what was going on before this output started.Here's a short excerpt: This particular output came after I killed WebRick (ctrl+c). I also experience this when running tests (it seems to show up after each test/file) and when running rake db:migrate (shows up when migration is done).I'm currently running Rails 3.1.0 (upgraded from 3.0.5 hoping that would solve this) and ruby 1.9.2p180 installed through RVM.Any ideas why this is happening? <code>  0.00 48.12 0.00 1 0.00 0.00 Rails::Rack::LogTailer#tail!0.00 48.12 0.00 3 0.00 0.00 WEBrick::HTTPResponse#[]0.00 48.12 0.00 1 0.00 0.00 Rack::Utils::HeaderHash#each0.00 48.12 0.00 2 0.00 0.00 Range#begin0.00 48.12 0.00 1 0.00 0.00 Range#end0.00 48.12 0.00 1 0.00 10.00 Rack::File#each0.00 48.12 0.00 1 0.00 0.00 WEBrick::HTTPRequest#fixup0.00 48.12 0.00 1 0.00 0.00 Kernel.raise0.00 48.12 0.00 1 0.00 0.00 Exception#to_s0.00 48.12 0.00 1 0.00 0.00 WEBrick::GenericServer#stop0.00 48.12 0.00 1 0.00 0.00 WEBrick::BasicLog#debug?","Strange ""profiling"" output. from Rails command line"
Ruby float not equals to rounding to 15 places," As I understand it, Ruby (1.9.2) floats have a precision of 15 decimal digits. Therefore, I would expect rounding float x to 15 decimal places would equal x. For this calculation this isn't the case. Incidentally, rounding to 16 places returns true.Can you please explain this to me? <code>  x = (0.33 * 10)x == x.round(15) # => false",Ruby float precision
Merge two arrays in Ruby," I have the following code: I want to merge the array s into array a which would give me: Looking through the Ruby Array and Enumerable docs, I don't see such a method that will accomplish this. Is there a way I can do this without iterating through each array? <code>  a = [""Cat"", ""Dog"", ""Mouse""]s = [""and"", ""&""] [""Cat"", ""and"", ""Dog"", ""&"", ""Mouse""]",Merge and interleave two arrays in Ruby
Best practice question about puts statements," When I code, I make quite intense use of ""puts"" statements for debugging. It allows me to see what happens in the server.When the code is debugged, I use to remove these ""puts"" statements for I don't know what reason.Is it a good idea or should I leave them instead to give more clarity to my server logs? <code> ",puts statements for debug
how to get query string from passed url in ruby on rails, Is there is a way to get the query string in a passed URL string in Rails?I want to pass a URL string: How can I get id and empid?  <code>  http://www.foo.com?id=4&empid=6,How to get a query string from a URL in Rails
Uninstalling and upgrading ruby on a Mac without using RVM," I recently decided to uninstall RVM from my system. Some of the arguments made at this page convinced me: Actually, what I decided, however, is that I don't want to worry about multiple versions of Ruby at all. I just want to use version 1.9.2-p290 and not worry about anything else. When I run ruby --version on my Mac, though, it tells me I have version 1.8.7. I have looked around for how to simply uninstall this Ruby from my Mac, but I haven't found anything, weirdly. It seems that the only people who ever want to uninstall Ruby run linux and everyone using a Mac recommends RVM.How do I uninstall Ruby 1.8.7 from my Mac? I'd like to move to version 1.9.2-p290 and I'd like to have only one version on my system. <code> ",Uninstalling and upgrading Ruby on a Mac without using RVM
Building an hash in a conditional way," I am using Ruby on Rails 3.0.10 and I would like to build an hash key\value pairs in a conditional way. That is, I would like to add a key and its related value if a condition is matched: How can I do that and keep a ""good"" readability for the code? Am I ""forced"" to use the merge method? <code>  hash = { :key1 => value1, :key2 => value2, # This key2\value2 pair should be added only 'if condition' is 'true' :key3 => value3, ...}",Building a hash in a conditional way
How do I uninstall ruby libraries from my cygwin installation," My cygwin installation contains the following ruby binaries, how can I uninstall these binaries since I would like to use ruby 192 on my windows vista machine <code>  ruby.exerubyw.exe",How do I uninstall ruby from my cygwin installation
Avoid printing after executing command, I am opening very big YAML file. It takes a while. But after it opened it it is printing all its content - and it takes many times more time for it.So how can I avoid printing result in Ruby console: <code>  data = YAML.load_file( ... ) # some 1GB data file.,Avoid printing after executing command in console
Sort order in Ruby's Dir.entries method," Is there a fixed/default sort order in which Dir.entries returns results? I know by experience that the first two entries are ""."" and "".."". <code> ",Sort order in `Dir.entries`
Add ruby methods dynamically / class methods or instance methods," I am quite new to Ruby, so still learning. I was researching quite a bit about how to add methods dynamically, and I was successful to create instance methods, but not successful when creating class methods.This is how I generated instance methods: Any idea about the best ways to create static methods? My final task is to look for the best way to create ""before"" and ""after"" tasks for class methods. <code>  class B def before_method puts ""before method"" end def self.run(method) send :define_method, method do before_method puts ""method #{method}"" end end end class A < B run :m run :n end",Add ruby class methods or instance methods dynamically
Best was to run a ruby script as a subprocess/another thread from Sinatra," I have a Sinatra app I plan on hosting on Heroku.This application, in part, scrapes a lot of information from other pages around the net and stores the information to a database. These scrapping operations are a slow process, so I need them to run in another thread/process separate from my Sinatra app.My plan is just to have a button for each process that I can click and the scrapping will take place in the background.I'm unsure what's the best way to do this, complicated by what Heroku will allow.  <code> ",What are the best ways to run a Ruby script as a subprocess/another thread from Sinatra?
Current Data/time in ruby in DD/MM/YYYY HH:SS format, How can I get the current date and time in DD/MM/YYYY HH:MM format and also increment the month? <code> ,How do I get the current Date/time in DD/MM/YYYY HH:MM format?
Current Data/time in ruby in DD/MM/YYYY HH:MM format, How can I get the current date and time in DD/MM/YYYY HH:MM format and also increment the month? <code> ,How do I get the current Date/time in DD/MM/YYYY HH:MM format?
having Exception handling as a common method in ruby," Can someone tell me is there a way to make the exception handling as a common method and use it inside a methods? Let me explain it further.For example, I have following methods As you can see, even though my method needs only one line, because of the exception handling code, the method gets bigger. What I'm looking for is a more slimmer solution like (just a thought) Please note the above code doesn't work, just my idea. Is this possible or is there any other good way? <code>  def add(num1, num2) begin num1 + num2 rescue Exception => e raise e end enddef divide(num1, num2) begin num1 / num2 rescue Exception => e raise e end end def add(num1, num2) num1 + num2 unless raise_exceptionenddef divide(num1, num2) num1 / num2 unless raise_exceptionend def raise_exception raise self.Exceptionend",Having Exception handling as a common method in Ruby
How to increment an unknown value in Ruby?, How could I simplify this in Ruby: ? <code>  x = (x || 0) + 1,Ruby: How to increment a number that may be nil?
Rspec and 'before_validation' callback issues," I am using Ruby on Rails 3.0.9 and RSpec 2. I know that there are some known problems on using RSpec and a before_validation callback, because the before_validation seems not to be triggered when run in spec files. You can find a lot of similar issues (for example, by doing a Google search).I am wondering if, at this time, anyone has come up with a solution to this problem?P.S.: I have read that some people have proposed to use mocks, others people to switch from a before_validation to some other callback (eg: to a before_save) or to use the save(:validate => false) method (so to skip validations)... and so on... but no one seems to have solved the ""real"" problem. What do you think should be done in such cases in order to solve the issue? <code> ",Rspec and 'before_validation' callback issues
Rspec and 'before_validation' callback issues. Have someone a solution to that?," I am using Ruby on Rails 3.0.9 and RSpec 2. I know that there are some known problems on using RSpec and a before_validation callback, because the before_validation seems not to be triggered when run in spec files. You can find a lot of similar issues (for example, by doing a Google search).I am wondering if, at this time, anyone has come up with a solution to this problem?P.S.: I have read that some people have proposed to use mocks, others people to switch from a before_validation to some other callback (eg: to a before_save) or to use the save(:validate => false) method (so to skip validations)... and so on... but no one seems to have solved the ""real"" problem. What do you think should be done in such cases in order to solve the issue? <code> ",Rspec and 'before_validation' callback issues
Ruby: Convert cents string into dollar string," I want to convert from cents to dollars correctly in Ruby. I will never have to work with fractions of cents.Is it possible to do this correctly (without floating point errors) without having to use BigDecimal?E.g., cents to dollars The following seems to work, but is it correct? Update: I noticed the line above doesn't work if cents = ""10287349283923497624861294712974892742837833"". <code>  ""99"" => ""0.99""""324"" => ""3.24"" (cents.to_i/100.0).to_s",Convert cents into dollar string in Ruby without use of BigDecimal
Ruby on Rails reload current page?, I currently have a login popup in my header bar which is on every page in my website. I want to be able to reload the current page that the person is on after a successful login. How do I do this in the controller? Thanks <code>  def create #declaring and defining user variable stuff if user.save #reload current page <--how do I do this? endend,How can I reload the current page in Ruby on Rails?
"In RSpec, what is the difference between stub and stub?"," I've seen it used many times, and never really stopped to question it. Now it's got me wondering if there is a difference between stub and stub!Is there? Or is it historical? Does stub! mean it stubs it once? and returns back to the normal method call? <code> ","In RSpec, what is the difference between stub! and stub?"
Paperclip S3 how to do paths?," How do I create paths with paperclip when using Amazon S3?My directory on my bucket is: My model: <code>  /image/:id/:filename has_attached_file :image, :storage => :s3, :bucket => 'mybucket', :s3_credentials => { :access_key_id => ENV['S3_KEY'], :secret_access_key => ENV['S3_SECRET'] }",Paperclip and Amazon S3 how to do paths?
How does Array.- (subtract operator) compare elements for equality?," When I call Array#- it doesn't seems to call any comparison method on the strings I'm comparing: It just returns: So, what is Array#- doing?Also, I'm using Ruby 1.9.2p290. In 1.8.7 it seems to cause an infinite loop. <code>  class String def <=>(v) puts ""#{self} <=> #{v}"" super(v) end def ==(v) puts ""#{self} == #{v}"" super(v) end def =~(v) puts ""#{self} =~ #{v}"" super(v) end def ===(v) puts ""#{self} == #{v}"" super(v) end def eql?(v) puts ""#{self}.eql? #{v}"" super(v) end def equal?(v) puts ""#{self}.equal? #{v}"" super(v) end def hash() puts ""#{self}.hash"" super endendp %w{one two three} - %w{two} [""one"", ""three""]",How does Array#- (subtract operator) compare elements for equality?
what's the reason behind the default requier_tree in asset pipeline?," When using asset pipeline in rails 3.1, it creates a default application.js: but when will I need include all of my javascript? In most cases we use different javascrips for different controllers/views?  <code>  //= require jquery//= require jquery_ujs//= require_tree .",what's the reason behind the default require_tree in asset pipeline?
Why slicing the params hash poses a security problem on mass-assignment?," The official way of preventing security risks with mass-assignment is using attr_accessible. However, some programmers feel this is not a job for the model (or at least not only for the model). The simplest way of doing it in a controller is slicing the params hash: However the documentation states: Note that using Hash#except or Hash#slice in place of attr_accessible to sanitize attributes wont provide sufficient protection.Why is that? Why a whitelist-slicing of params does not provide enough protection?UPDATE: Rails 4.0 will ship strong-parameters, a refined slicing of parameters, so I guess the whole slicing thing was not so bad after all. <code>  @user = User.update_attributes(params[:user].slice(:name))",Why slicing the params hash poses a security issue on mass-assignment?
Confusion comparing ActiveSupport::TimeWithZone with another ActiveSupport::TimeWithZone," Can someone explain how d1 is greater than d2? They are the same damn dates (or atleast that is how they look to me). With regards to my specific application needs ... I have an iOS app that makes a request to my Rails application passing a JSON object that, amongst other items, includes NSDates in the format of ""2011-09-22T02:24:28-07:00."" I'm attempting to compare that datetime with the ""updated_at"" which is of type ActiveSupport::TimeWithZone.Thanks - wg <code>  Loading development environment (Rails 3.0.8)ruby-1.9.2-p180 :001 > d1 = Event.first.updated_at => Thu, 22 Sep 2011 02:24:28 PDT -07:00 ruby-1.9.2-p180 :002 > d2 = Time.zone.parse(""2011-09-22T02:24:28-07:00"") => Thu, 22 Sep 2011 02:24:28 PDT -07:00 ruby-1.9.2-p180 :003 > d1.class => ActiveSupport::TimeWithZone ruby-1.9.2-p180 :004 > d2.class => ActiveSupport::TimeWithZone ruby-1.9.2-p180 :005 > d1 > d2 => true ruby-1.9.2-p180 :006 > ",Testing ActiveSupport::TimeWithZone objects for equality
Array invert in rails?," I've got a hash of the format: and I want to end up with: What's the easiest way of achieving this?I'm using Ruby on Rails.UPDATEOK I managed to extract the real object from the server log, it is being pushed via AJAX. <code>  {key1 => [a, b, c], key2 => [d, e, f]} { a => key1, b => key1, c => key1, d => key2 ... } Parameters: {""status""=>{""1""=>[""1"", ""14""], ""2""=>[""7"", ""12"", ""8"", ""13""]}}",Hash invert in Ruby?
Accessing HTML accessors in Nokogiri," Here is the code I'm using: And this outputs: What I want to do is get the width attribute out of the html, but I can't seem to get that too work. I think I need to put ['width'] somewhere in my code, and I've tried following various examples online but couldn't get it to work. <code>  location = block.xpath(""*/img"")puts location <img src=""/images/p.gif"" height=""1"" width=""0"">",Accessing HTML attributes in Nokogiri
Ruby - return string until matched string," How do you return the portion of a string until the first instance of "" #"" or "" Apt""?I know I could split the string up into an array based on ""#"" or ""Apt"" and then calling .first, but there must be a simpler way. <code> ",Return string until matched string in Ruby
ruby irb | *what is wrong number of arguments(1 for 0)* meant?," What does ""Argument Error: wrong number of arguments (1 for 0)"" mean? <code> ","What does ""wrong number of arguments (1 for 0)"" mean in Ruby?"
"What does ""wrong number of arguments (1 for 0)"" means in Ruby?"," What does ""Argument Error: wrong number of arguments (1 for 0)"" mean? <code> ","What does ""wrong number of arguments (1 for 0)"" mean in Ruby?"
Is it possible to stubs a method in a parent class so that all subclass instances are stubbed in rspec?," Given a parent class Fruit and its subclasses Apple and Banana, is it possible to stub the method foo defined in Fruit, so that any calls to method foo on any instances of Apple and Banana are stubbed? Fruit.any_instance.stubs(:foo) did not work and it looks like it only stubs for instances of Fruit. Is there a simple way to achieve this other than calling stubs for every subclasses?Found this link raising the similar question but it looks like it has not been answered yet.http://groups.google.com/group/mocha-developer/browse_thread/thread/99981af7c86dad5e <code>  class Fruit def foo puts ""some magic in Fruit"" endendclass Banana < Fruit ...endclass Apple < Fruit ...end",Is it possible to stub a method in a parent class so that all subclass instances are stubbed in rspec?
Is it possible to stub a method in a parent class so that all subclass instances are stubbed in rspec?," Given a parent class Fruit and its subclasses Apple and Banana, is it possible to stub the method foo defined in Fruit, so that any calls to method foo on any instances of Apple and Banana are stubbed? Fruit.any_instance.stubs(:foo) did not work and it looks like it only stubs for instances of Fruit. Is there a simple way to achieve this other than calling stubs for every subclasses?Found this link raising the similar question but it looks like it has not been answered yet.http://groups.google.com/group/mocha-developer/browse_thread/thread/99981af7c86dad5e <code>  class Fruit def foo puts ""some magic in Fruit"" endendclass Banana < Fruit ...endclass Apple < Fruit ...end",Is it possible to stub a method in a parent class so that all subclass instances are stubbed in rspec?
How can Class be of the Class class and not having Class instance methods?," I was studying how the Ruby interpreter is implemented, and one question occurred that didn't get an answer yet for me. That's the one in the title: since Class (r_cClass) has super set to itself (ignoring metaclasses, since actually super is the metaclass of r_cClass), if I send one method to the Class object, this will be looked in the method table of Class' class. But Class' class is Class, so shouldn't I end up looking the instance methods of Class? But that's not the case since in the documentation Class class methods and Class instance methods are separated. In the search_method in eval.c of Ruby, I didn't find any special check for the Class class. Can anyone shed some light on this? <code> ",How can Class be of the Class class and not have Class instance methods?
Rails 3/Ruby 1.9.2 Date Class Date.tomorrow not correct," Using Ruby 1.9.2 and Rail 3 on Mac Snow leopard Is there maybe something wrong with the ruby date class or is this something to do with the way i installed ruby?Edit: Ok so the rails Date class seems a little buggy. The DateTime class appears to work fine though. Thanks derp and Adam <code>  ruby-1.9.2-p290 :001 > Date.today => Sun, 25 Sep 2011 ruby-1.9.2-p290 :002 > Date.tomorrow => Tue, 27 Sep 2011 ruby-1.9.2-p290 :039 > Date.current => Mon, 26 Sep 2011 ruby-1.9.2-p290 :040 > DateTime.now => Sun, 25 Sep 2011 20:47:01 -0500",Rails 3/Ruby 1.9.2 Date.tomorrow not correct
What does ||= mean in rails?," I have a protected method in my application contoller I was wondering what ||= means?I've been trying to search and find out, but to no avail.  <code>  def current_user @current_user ||= User.find_by_id(session[:user_id])end",What does ||= mean?
Tutorial or Guide for Scripting XCode Build Phases," I would like to add some files to the Compile Sources build phase using a script in Xcode, which pulls from some folder references. I haven't been able to find much documentation so far.Where is the general documentation (or a good tutorial) for scripting Xcode build phases?How can I add files to the Compile Sources phase?How can I discover information about the project and the folder references within it?Are there any special considerations if I want to script in Ruby or Python vs. bash scripting? <code> ",Tutorial or Guide for Scripting Xcode Build Phases
Ruby 1.8: Can I dynamically define a method that takes a block?," I know that I can dynamically define methods on a class using define_method, and that I specify the parameters this method takes using the arity of the block.I want to dynamically define a method that accepts both optional parameters and a block. In Ruby 1.9, this is easy because passing a block to a block is now allowed.Unfortunately, Ruby 1.8 doesn't allow this, so the following won't work: Replacing the explicit block.call with yield doesn't fix the problem either.Upgrading to Ruby 1.9 is unfortunately not an option for me. Is this an intractable problem, or is there a way around it? <code>  #Ruby 1.8class X define_method :foo do |bar, &baz| puts bar baz.call if block_given? endendx = X.newx.foo(""foo"") { puts ""called!""} #=> LocalJumpError: no block given",Can I dynamically define a Ruby method that takes a block?
Can I dynamically define a method that takes a block?," I know that I can dynamically define methods on a class using define_method, and that I specify the parameters this method takes using the arity of the block.I want to dynamically define a method that accepts both optional parameters and a block. In Ruby 1.9, this is easy because passing a block to a block is now allowed.Unfortunately, Ruby 1.8 doesn't allow this, so the following won't work: Replacing the explicit block.call with yield doesn't fix the problem either.Upgrading to Ruby 1.9 is unfortunately not an option for me. Is this an intractable problem, or is there a way around it? <code>  #Ruby 1.8class X define_method :foo do |bar, &baz| puts bar baz.call if block_given? endendx = X.newx.foo(""foo"") { puts ""called!""} #=> LocalJumpError: no block given",Can I dynamically define a Ruby method that takes a block?
How to execute Javascript in Ruby written Webdriver test?," Is there a known solution to perform Eval (Javascript execution) in Webdriver, Ruby bindings? The equivalent of the following example in Java. <code>  WebElement element = driver.findElement(By.id( ""foo"" )); String name = (String) ((JavascriptExecutor) driver).executeScript( ""return arguments[0].tagName"" , element)",How to execute JavaScript in Ruby written Webdriver test?
Can ruby mechanize able to read local html file?," I am building a crawler, I know how to use ruby mechanize to read a page from the net using this code: But can I use Mechanize to read an HTML file from the file system? How? <code>  require 'mechanize'agent = Mechanize.newagent.get ""http://google.com""",Read a local HTML file with Mechanize
using cedet semantic wisent-ruby?," I'm just getting started setting up cedet following various guides including Alex Ott's.Here is what I have so far in my init file. I quite like the code folding, because semantic know more about code than packages like hideshow, etc.I would like to have the same folding for ruby. I know there is other stuff cedet does, but I'm just dipping my toes in for now.So I see in the contrib/ folder there is wisent-ruby.el. It sure looks like semantic knows how to parse Ruby. The INSTALL says that it's supposed to be installed ""automatically"". I open up a Ruby file and code folding magic triangles aren't there. What now? <code>  (require 'cedet)(semantic-load-enable-code-helpers);; imenu breaks if I don't enable this(global-semantic-highlight-func-mode 1)(global-semantic-tag-folding-mode)",Using cedet semantic wisent-ruby
Why a hash with empty array as default value fails append operation in Ruby?," Code example below. Calling append on a hash value returns correctly but the hash itself doesn't behave as I would expect. <code>  ruby-1.9.2-p290 :037 > r = {} => {} ruby-1.9.2-p290 :038 > r.default = [] => [] ruby-1.9.2-p290 :039 > r[""c""] << 1 => [1] ruby-1.9.2-p290 :040 > r[""c""] => [1] ruby-1.9.2-p290 :041 > r => {} ruby-1.9.2-p290 :042 > r.empty? => true ","In ruby, why does array append fail on a hash with a default value of empty array?"
"Rake ""already initialized constant"" warning", Trying to run rake cucumber:ok and am getting this error:/Users/dev/.rbenv/versions/1.9.2-p290/lib/ruby/gems/1.9.1/gems/rack-1.3.4/lib/rack/backports/uri/common_192.rb:53: warning: already initialized constant WFKV_Then:Command failed with status (1): [/Users/dev/.rbenv/versions/1.9.2-p290/bin...]I am pretty new to Rails and Google didn't turn anything up for this error.EDIT: I've tried adding bundle exec and that makes no difference.Here's what I got with --trace: <code>  /Users/dev/.rbenv/versions/1.9.2-p290/lib/ruby/gems/1.9.1/gems/rake-0.9.2/lib/rake/file_utils.rb:53:in `block in create_shell_runner'/Users/dev/.rbenv/versions/1.9.2-p290/lib/ruby/gems/1.9.1/gems/rake-0.9.2/lib/rake/file_utils.rb:45:in `call'/Users/dev/.rbenv/versions/1.9.2-p290/lib/ruby/gems/1.9.1/gems/rake-0.9.2/lib/rake/file_utils.rb:45:in `sh'/Users/dev/.rbenv/versions/1.9.2-p290/lib/ruby/gems/1.9.1/gems/rake-0.9.2/lib/rake/file_utils_ext.rb:36:in `sh'/Users/dev/.rbenv/versions/1.9.2-p290/lib/ruby/gems/1.9.1/gems/cucumber-1.1.0/lib/cucumber/rake/task.rb:104:in `run'/Users/dev/.rbenv/versions/1.9.2-p290/lib/ruby/gems/1.9.1/gems/cucumber-1.1.0/lib/cucumber/rake/task.rb:193:in `block in define_task'/Users/dev/.rbenv/versions/1.9.2-p290/lib/ruby/gems/1.9.1/gems/rake-0.9.2/lib/rake/task.rb:205:in `call'/Users/dev/.rbenv/versions/1.9.2-p290/lib/ruby/gems/1.9.1/gems/rake-0.9.2/lib/rake/task.rb:205:in `block in execute'/Users/dev/.rbenv/versions/1.9.2-p290/lib/ruby/gems/1.9.1/gems/rake-0.9.2/lib/rake/task.rb:200:in `each'/Users/dev/.rbenv/versions/1.9.2-p290/lib/ruby/gems/1.9.1/gems/rake-0.9.2/lib/rake/task.rb:200:in `execute'/Users/dev/.rbenv/versions/1.9.2-p290/lib/ruby/gems/1.9.1/gems/rake-0.9.2/lib/rake/task.rb:158:in `block in invoke_with_call_chain'/Users/dev/.rbenv/versions/1.9.2-p290/lib/ruby/1.9.1/monitor.rb:201:in `mon_synchronize'/Users/dev/.rbenv/versions/1.9.2-p290/lib/ruby/gems/1.9.1/gems/rake-0.9.2/lib/rake/task.rb:151:in `invoke_with_call_chain'/Users/dev/.rbenv/versions/1.9.2-p290/lib/ruby/gems/1.9.1/gems/rake-0.9.2/lib/rake/task.rb:144:in `invoke'/Users/dev/.rbenv/versions/1.9.2-p290/lib/ruby/gems/1.9.1/gems/rake-0.9.2/lib/rake/application.rb:112:in `invoke_task'/Users/dev/.rbenv/versions/1.9.2-p290/lib/ruby/gems/1.9.1/gems/rake-0.9.2/lib/rake/application.rb:90:in `block (2 levels) in top_level'/Users/dev/.rbenv/versions/1.9.2-p290/lib/ruby/gems/1.9.1/gems/rake-0.9.2/lib/rake/application.rb:90:in `each'/Users/dev/.rbenv/versions/1.9.2-p290/lib/ruby/gems/1.9.1/gems/rake-0.9.2/lib/rake/application.rb:90:in `block in top_level'/Users/dev/.rbenv/versions/1.9.2-p290/lib/ruby/gems/1.9.1/gems/rake-0.9.2/lib/rake/application.rb:129:in `standard_exception_handling'/Users/dev/.rbenv/versions/1.9.2-p290/lib/ruby/gems/1.9.1/gems/rake-0.9.2/lib/rake/application.rb:84:in `top_level'/Users/dev/.rbenv/versions/1.9.2-p290/lib/ruby/gems/1.9.1/gems/rake-0.9.2/lib/rake/application.rb:62:in `block in run'/Users/dev/.rbenv/versions/1.9.2-p290/lib/ruby/gems/1.9.1/gems/rake-0.9.2/lib/rake/application.rb:129:in `standard_exception_handling'/Users/dev/.rbenv/versions/1.9.2-p290/lib/ruby/gems/1.9.1/gems/rake-0.9.2/lib/rake/application.rb:59:in `run'/Users/dev/.rbenv/versions/1.9.2-p290/lib/ruby/gems/1.9.1/gems/rake-0.9.2/bin/rake:32:in `<top (required)>'/Users/dev/.rbenv/versions/1.9.2-p290/bin/rake:19:in `load'/Users/dev/.rbenv/versions/1.9.2-p290/bin/rake:19:in `<main>'Tasks: TOP => cucumber:ok,"Rake ""already initialized constant WFKV_"" warning"
Wicked PDF: footer height/styles," I'm using the awesome wicked_pdf gem to generate a PDF, but I can't figure out how to change certain styles within the footer.I'm having a HAML template for the footer looking roughly like this: And some styles: The styles are applied just fine, but the due to a small height of the footer, only the first line is visible. I've tried to set the height via CSS, but no dice so far. If I set a footer using e.g the center, attributes or right supplying text directly, line breaks cause the footer to ""grow"" as expected.Any idea on how to modify the footer height? <code>  !!!%html %head %meta{:charset => ""utf-8""} = wicked_pdf_stylesheet_link_tag ""pdf"" %body .footer %p Line 1 %p Line 2 %p Line 3 .footer { padding-top: 1em; border-top: 1px solid #ccc;}",wicked_pdf: footer height/styling
how do you say not equal to in ruby?," This is a much simpler example of what I'm trying to do in my program but is a similar idea. In an, if statement how do I say not equal to?Is != correct? <code>  def test vara = 1 varb = 2 if vara == 1 && varb != 3 puts ""correct"" else puts ""false"" endend",How do you say not equal to in Ruby?
How do you say not equal to in Ruby?," This is a much simpler example of what I'm trying to do in my program but is a similar idea. In an, if statement how do I say not equal to?Is != correct? <code>  def test vara = 1 varb = 2 if vara == 1 && varb != 3 puts ""correct"" else puts ""false"" endend",How do you say not equal to in Ruby?
Ruby: How do you say not equal to in Ruby?," This is a much simpler example of what I'm trying to do in my program but is a similar idea. In an, if statement how do I say not equal to?Is != correct? <code>  def test vara = 1 varb = 2 if vara == 1 && varb != 3 puts ""correct"" else puts ""false"" endend",How do you say not equal to in Ruby?
How to change rspec output in rails 3.1, I'm starting to see the following output when running request rspec specs: Normaly I would get green dots for passing tests and red Fs with some info for error messages.Is there a way to disable the cache miss messages from the output? <code>  cache: [GET /login] misscache: [GET /javascripts/jquery.min.js?1317513028] miss,"How to suppress/disable ""cache miss"" messages when running rspec tests in rails 3.1"
Use Ruby/Rails variables inside SASS and LESS, Is there a way to use variables from my Ruby application inside a Sass file? <code> ,How can I use Ruby/Rails variables inside Sass?
Use Ruby/Rails variables inside SASS and LESS?, Is there a way to use variables from my Ruby application inside a Sass file? <code> ,How can I use Ruby/Rails variables inside Sass?
Ruby '.find' method only returning first occurance," I have models as follows: User has_many goals, Goal has_many tasks, Task has_many day_tasks. I'm trying to write a method which finds all day_tasks thatbelong to a certain user have :target_date == Date.today (target_date is a column in the day_tasks table). I want to put the results into the @day_tasks array.my code: This code only returns the first record that matches these criteria. I've also tried using the DayTasks.where method with the same code in the braces, but I just a ""Wrong number of arguments ( 0 for 1 )"" error. Could someone explain why my method only returns the first occurrence and what exactly the difference is between .find and .where? <code>  @user = current_user@day_tasks = DayTask.find { |x| x.task.goal.user == @user && x.target_date == Date.today }",Ruby '.find' method only returning first occurrence
The alias of task name in rake," When I need to alias some task's name, how should I do it? For example, how do I turn the task name: to: Editing after getting the answer: <code>  rake db:tablerake db:createrake db:schemarake db:migration rake db:trake db:crake db:srake db:m def alias_task(tasks) tasks.each do |new_name, old_name| task new_name, [*Rake.application[old_name].arg_names] => [old_name] endendalias_task [ [:ds, :db_schema], [:dc, :db_create], [:dr, :db_remove]]",Alias of task name in Rake
Get model or 404 on rails," Is it possible to use a function as get_by_id_or_404 on rails. For exemple, in my controller i use : if the id isn't set or the destination not found, how can I ask Rails to redirect to a 404 page?Thank you! <code>  @destination = Destination.find_by_id(params[:id])",Get model or 404 on Rails
Ruby on Rails: How can i edit database.yml for postgresql?," Rails new app.The current database.yml is like that: I need to edit this for postgresql database.How can I do this? <code>  # SQLite version 3.x# gem install sqlite3## Ensure the SQLite 3 gem is defined in your Gemfile# gem 'sqlite3'development: adapter: sqlite3 database: db/development.sqlite3 pool: 5 timeout: 5000# Warning: The database defined as ""test"" will be erased and# re-generated from your development database when you run ""rake"".# Do not set this db to the same as development or production.test: adapter: sqlite3 database: db/test.sqlite3 pool: 5 timeout: 5000production: adapter: sqlite3 database: db/production.sqlite3 pool: 5 timeout: 5000",Ruby on Rails: How can I edit database.yml for postgresql?
what's !=~ comparison operator in ruby?," I found this operator by chance: what's this? It's behavior doesn't look like ""not match"". <code>  ruby-1.9.2-p290 :028 > ""abc"" !=~ /abc/ => true",What is the !=~ comparison operator in ruby?
Ruby Hash - use integers as key," Is it appropriate to use integers as keys in a Ruby hash?Every example from documentation shows a string or symbol being used as a key, but never an integer.Internally, would integers somehow get converted to strings? I have seen some conflicting information on the subject.In other words, is there any significant disadvantage to using integer keys to a hash? <code> ",Usage of integers as hash keys
What's the c++ of doing this ruby solution," Is there any way to do this in C++ especially the range section. I have created my own c++ solution but using a more standard for loop and wondered if there was a cooler way to do it? <code>  answer = (0..999).select { |a| a%3 ==0 || a%5==0 }puts answer.inject { |sum, n| sum+n }",Port ruby solution to C++ 
rails rvm - how to set default ruby version for new terminal window, Ubuntu 11.I do the following:$ rvm --default use 1.9.2and I get:Using /home/md/.rvm/gems/ruby-1.9.2-p180so that is good.but when I now open a new terminal window I still get:$ ruby -vruby 1.8.7 (2010-08-16 patchlevel 302) [i686-linux] <code> ,How to set default Ruby version with RVM?
rvm - how to set default ruby version?, Ubuntu 11.I do the following:$ rvm --default use 1.9.2and I get:Using /home/md/.rvm/gems/ruby-1.9.2-p180so that is good.but when I now open a new terminal window I still get:$ ruby -vruby 1.8.7 (2010-08-16 patchlevel 302) [i686-linux] <code> ,How to set default Ruby version with RVM?
"in Sinatra how do you make a ""before"" filter that match all routes except some"," I have a Ruby Sinatra app and I have some code which I need to execute on all routes except for a few exceptions. How do I do this?If I wanted to execute the code on selected routes (whitelist style) I'd do this: How do I do it the other way round though (blacklist style)? I want to match all routes except '/join', '/join/*' and '/payment/*' <code>  ['/join', ""/join/*"", ""/payment/*""].each do |path| before path do #some code endend","in Sinatra how do you make a ""before"" filter that matches all routes except some"
Ruby on Rails: ERROR NoMethodError: undefined method `debug_rjs=' for ActionView::Base:Class," This project was built with rails 3.0.9.Now i updated the gems and Gemfile => After rails s, when i do , http://0.0.0.0:3000/ i get this error => What to do ? <code>  source 'http://rubygems.org'gem 'rails', '3.1.1'# Bundle edge Rails instead:# gem 'rails', :git => 'git://github.com/rails/rails.git'gem 'pg'gem 'devise'gem ""will_paginate""gem 'ruby-debug19'gem 'rack', '1.3.3'gem 'jquery-rails' => Booting WEBrick=> Rails 3.1.1 application starting in development on http://0.0.0.0:3000=> Call with -d to detach=> Ctrl-C to shutdown server[2011-10-10 17:50:23] INFO WEBrick 1.3.1[2011-10-10 17:50:23] INFO ruby 1.9.2 (2011-02-18) [i686-linux][2011-10-10 17:50:23] INFO WEBrick::HTTPServer#start: pid=3103 port=3000[2011-10-10 17:50:31] ERROR NoMethodError: undefined method `debug_rjs=' for ActionView::Base:Class /home/user1/.rvm/gems/ruby-1.9.2-p180/gems/actionpack-3.1.1/lib/action_view/railtie.rb:34:in `block (3 levels) in <class:Railtie>' /home/user1/.rvm/gems/ruby-1.9.2-p180/gems/actionpack-3.1.1/lib/action_view/railtie.rb:33:in `each' /home/user1/.rvm/gems/ruby-1.9.2-p180/gems/actionpack-3.1.1/lib/action_view/railtie.rb:33:in `block (2 levels) in <class:Railtie>' /home/user1/.rvm/gems/ruby-1.9.2-p180/gems/activesupport-3.1.1/lib/active_support/lazy_load_hooks.rb:36:in `instance_eval' /home/user1/.rvm/gems/ruby-1.9.2-p180/gems/activesupport-3.1.1/lib/active_support/lazy_load_hooks.rb:36:in `execute_hook' /home/user1/.rvm/gems/ruby-1.9.2-p180/gems/activesupport-3.1.1/lib/active_support/lazy_load_hooks.rb:43:in `block in run_load_hooks' /home/user1/.rvm/gems/ruby-1.9.2-p180/gems/activesupport-3.1.1/lib/active_support/lazy_load_hooks.rb:42:in `each' /home/user1/.rvm/gems/ruby-1.9.2-p180/gems/activesupport-3.1.1/lib/active_support/lazy_load_hooks.rb:42:in `run_load_hooks' /home/user1/.rvm/gems/ruby-1.9.2-p180/gems/actionpack-3.1.1/lib/action_view/base.rb:216:in `<class:Base>' /home/user1/.rvm/gems/ruby-1.9.2-p180/gems/actionpack-3.1.1/lib/action_view/base.rb:133:in `<module:ActionView>' /home/user1/.rvm/gems/ruby-1.9.2-p180/gems/actionpack-3.1.1/lib/action_view/base.rb:8:in `<top (required)>' /home/user1/.rvm/gems/ruby-1.9.2-p180/gems/actionpack-3.1.1/lib/abstract_controller/view_paths.rb:90:in `view_paths=' /home/user1/.rvm/gems/ruby-1.9.2-p180/gems/actionpack-3.1.1/lib/abstract_controller/view_paths.rb:76:in `prepend_view_path' /home/user1/.rvm/gems/ruby-1.9.2-p180/gems/railties-3.1.1/lib/rails/engine.rb:532:in `block (2 levels) in <class:Engine>' /home/user1/.rvm/gems/ruby-1.9.2-p180/gems/activesupport-3.1.1/lib/active_support/lazy_load_hooks.rb:36:in `instance_eval' /home/user1/.rvm/gems/ruby-1.9.2-p180/gems/activesupport-3.1.1/lib/active_support/lazy_load_hooks.rb:36:in `execute_hook' /home/user1/.rvm/gems/ruby-1.9.2-p180/gems/activesupport-3.1.1/lib/active_support/lazy_load_hooks.rb:43:in `block in run_load_hooks' /home/user1/.rvm/gems/ruby-1.9.2-p180/gems/activesupport-3.1.1/lib/active_support/lazy_load_hooks.rb:42:in `each' /home/user1/.rvm/gems/ruby-1.9.2-p180/gems/activesupport-3.1.1/lib/active_support/lazy_load_hooks.rb:42:in `run_load_hooks' /home/user1/.rvm/gems/ruby-1.9.2-p180/gems/actionpack-3.1.1/lib/action_controller/base.rb:234:in `<class:Base>' /home/user1/.rvm/gems/ruby-1.9.2-p180/gems/actionpack-3.1.1/lib/action_controller/base.rb:171:in `<module:ActionController>' /home/user1/.rvm/gems/ruby-1.9.2-p180/gems/actionpack-3.1.1/lib/action_controller/base.rb:3:in `<top (required)>' /home/user1/.rvm/gems/ruby-1.9.2-p180/gems/actionpack-3.1.1/lib/action_dispatch/middleware/static.rb:31:in `ext' /home/user1/.rvm/gems/ruby-1.9.2-p180/gems/actionpack-3.1.1/lib/action_dispatch/middleware/static.rb:15:in `match?' /home/user1/.rvm/gems/ruby-1.9.2-p180/gems/actionpack-3.1.1/lib/action_dispatch/middleware/static.rb:47:in `call' /home/user1/.rvm/gems/ruby-1.9.2-p180/gems/railties-3.1.1/lib/rails/engine.rb:456:in `call' /home/user1/.rvm/gems/ruby-1.9.2-p180/gems/railties-3.1.1/lib/rails/rack/content_length.rb:16:in `call' /home/user1/.rvm/gems/ruby-1.9.2-p180/gems/railties-3.1.1/lib/rails/rack/log_tailer.rb:14:in `call' /home/user1/.rvm/gems/ruby-1.9.2-p180/gems/rack-1.3.3/lib/rack/handler/webrick.rb:59:in `service' /home/user1/.rvm/rubies/ruby-1.9.2-p180/lib/ruby/1.9.1/webrick/httpserver.rb:111:in `service' /home/user1/.rvm/rubies/ruby-1.9.2-p180/lib/ruby/1.9.1/webrick/httpserver.rb:70:in `run' /home/user1/.rvm/rubies/ruby-1.9.2-p180/lib/ruby/1.9.1/webrick/server.rb:183:in `block in start_thread'",ERROR NoMethodError: undefined method `debug_rjs=' for ActionView::Base:Class
Sort by Integer with 10 or 100," Let's say I have an unsorted array from 1 to 10, as shown below... If I use the sort method on this array, it returns this... As you can see, the 10, appears before the 2, which is incorrect. How can I sort these numbers so that 10 appears correctly?EDIT: Thank you all for your responses. I should explain my problem a little better. The array I need sorted is for an e-commerce price list. So the array appears as follows... So the strings cannot be converted to integers. I should have put this when I wrote the question. I did not think that there would be much difference in the fix. My mistake, I apologise for making this assumption! How though can I sort this array? Thanks! <code>  a = [""3"", ""5"", ""8"", ""4"", ""1"", ""2"", ""9"", ""10"", ""7"", ""6""] a.sort = [""1"", ""10"", ""2"", ""3"", ""4"", ""5"", ""6"", ""7"", ""8"", ""9""] a = [""0-10"", ""11-20"", ""21-30"", ""31-40"" etc.]",Sort an Array of Strings by their Integer Values
uninitialized constant ActionDispatch::Routing::Routes (NameError)," I'm following a clickatell tutorial and my code looks as follows. However I get the error My code looks like this -  <code>  uninitialized constant ActionDispatch::Routing::Routes (NameError)from /Library/Ruby/Gems/1.8/gems/actionpack-3.1.1/lib/action_dispatch/routing/route_set.rb:258:in `instance_exec' from /Library/Ruby/Gems/1.8/gems/actionpack-3.1.1/lib/action_dispatch/routing/route_set.rb:258:in `eval_block' from /Library/Ruby/Gems/1.8/gems/actionpack-3.1.1/lib/action_dispatch/routing/route_set.rb:235:in `draw' from /Users/user1/Desktop/rails_projects/clickatellsms/config/routes.rb:1 from /Library/Ruby/Gems/1.8/gems/railties-3.1.1/lib/rails/application/routes_reloader.rb:29:in `load_paths' from /Library/Ruby/Gems/1.8/gems/railties-3.1.1/lib/rails/application/routes_reloader.rb:29:in `each' from /Library/Ruby/Gems/1.8/gems/railties-3.1.1/lib/rails/application/routes_reloader.rb:29:in `load_paths' from /Library/Ruby/Gems/1.8/gems/railties-3.1.1/lib/rails/application/routes_reloader.rb:13:in `reload!' from /Library/Ruby/Gems/1.8/gems/railties-3.1.1/lib/rails/application/routes_reloader.rb:7:in `initialize' from /Library/Ruby/Gems/1.8/gems/activesupport-3.1.1/lib/active_support/file_update_checker.rb:32:in `call' from /Library/Ruby/Gems/1.8/gems/activesupport-3.1.1/lib/active_support/file_update_checker.rb:32:in `execute_if_updated' from /Library/Ruby/Gems/1.8/gems/railties-3.1.1/lib/rails/application/finisher.rb:63 from /Library/Ruby/Gems/1.8/gems/railties-3.1.1/lib/rails/application/finisher.rb:64:in `call' from /Library/Ruby/Gems/1.8/gems/railties-3.1.1/lib/rails/application/finisher.rb:64 from /Library/Ruby/Gems/1.8/gems/railties-3.1.1/lib/rails/initializable.rb:30:in `instance_exec' from /Library/Ruby/Gems/1.8/gems/railties-3.1.1/lib/rails/initializable.rb:30:in `run' from /Library/Ruby/Gems/1.8/gems/railties-3.1.1/lib/rails/initializable.rb:55:in `run_initializers' from /Library/Ruby/Gems/1.8/gems/railties-3.1.1/lib/rails/initializable.rb:54:in `each' from /Library/Ruby/Gems/1.8/gems/railties-3.1.1/lib/rails/initializable.rb:54:in `run_initializers' from /Library/Ruby/Gems/1.8/gems/railties-3.1.1/lib/rails/application.rb:96:in `initialize!' from /Library/Ruby/Gems/1.8/gems/railties-3.1.1/lib/rails/railtie/configurable.rb:30:in `send' from /Library/Ruby/Gems/1.8/gems/railties-3.1.1/lib/rails/railtie/configurable.rb:30:in `method_missing' from /Users/user1/Desktop/rails_projects/clickatellsms/config/environment.rb:5 from /Users/user1/Desktop/rails_projects/clickatellsms/config.ru:4:in `require' from /Users/user1/Desktop/rails_projects/clickatellsms/config.ru:4 from /Library/Ruby/Gems/1.8/gems/rack-1.3.4/lib/rack/builder.rb:51:in `instance_eval' from /Library/Ruby/Gems/1.8/gems/rack-1.3.4/lib/rack/builder.rb:51:in `initialize' from /Users/user1/Desktop/rails_projects/clickatellsms/config.ru:1:in `new' from /Users/user1/Desktop/rails_projects/clickatellsms/config.ru:1 # controllers/sms.rb:require 'clickatell'class SMS def initialize(config) @config = config end def create(recipient, message_text) api.send_message(recipient, message_text) end private def api @api ||= Clickatell::API.authenticate( @config[:api_key], @config[:username], @config[:password]) endend # config/clickatell.yml: api_key: 9999999 username: abcdefg password: hijklmno# config/environments/development.rbCLICKATELL_CONFIG = YAML.load(File.open(File.join(RAILS_ROOT,'config', 'clickatell.yml')))# config/routes.rb: ActionController::Routing::Routes.draw do |map| map.resource :smsend# app/views/sms/new.html.erb: <% form_tag '/sms', :method => :post do -%> <label>Enter the recipients mobile number:</label> <%= text_field_tag ""recipient"" %> <label>Enter your message:</label> <%= text_area_tag ""message_text"" %> <%= submit_tag ""Send SMS"" %> <% end %># controllers/sms_controller.rb:class SmsController < ApplicationControllerdef create sms = SMS.new(CLICKATELL_CONFIG) sms.create(params[:recipient], params[:message_text]) flash[:notice] = ""Message sent succesfully!"" redirect_to :back rescue Clickatell::API::Error => e flash[:error] = ""Clickatell API error: #{e.message}"" redirect_to :back end end",Uninitialized constant ActionDispatch::Routing::Routes (NameError)
Am I miss understanding string.hash in Ruby?," I am processing a bunch of data and I haven't coded a duplicate checker into the data processor yet, so I expected duplicates to occur. I ran the following SQL query: And get back a list of duplicates. Looking into this I find that these duplicates have multiple hashes. The shortest string of a comment is ""[deleted]"". So let's use that as an example. In my database there are nine instances of a comment being ""[deleted]"" and in my database this produces a hash of both 1169143752200809218 and 1738115474508091027. The 116 is found 6 times and 173 is found 3 times. But, when I run it in IRB, I get the following: Here is the code I'm using to produce the hash: I've confirmed that I don't touch comment anywhere else in my code. Here is my datamapper class. Am I correct in assuming that .hash on a string will return the same value each time it is called on the same string? Which value is the correct value assuming my string consists of ""[deleted]""? Is there a way I could have different strings inside ruby, but SQL would see them as the same string? That seems to be the most plausible explanation for why this is occurring, but I'm really shooting in the dark. <code>  SELECT body, COUNT(body) AS dup_count FROM commentsGROUP BY bodyHAVING (COUNT(body) > 1) a = '[deleted]'.hash # => 811866697208321010 def comment_and_hash(chunk) comment = chunk.at_xpath('*/span[@class=""comment""]').text ##Get Comment## hash = comment.hash return comment,hashend class Comment include DataMapper::Resource property :uid , Serial property :author , String property :date , Date property :body , Text property :arank , Float property :srank , Float property :parent , Integer #Should Be UID of another comment or blank if parent property :value , Integer #Hash to prevent duplicates from occurringend",Am I misunderstanding String#hash in Ruby?
RMagick turn white background image transparent, I need to remove the white background from this image and make the background transparent. So it's just a black tick on the transparent background exported as a png.e.g. TurnIntoAny ideas? <code> ,RMagick remove white background from image and make it transparent
Read file in EventMachine asynchronous," I'm playing with Ruby EventMachines for some time now and I think I'm understandings its basics.However, I am not sure how to read in a large file (120 MB) performantly. My goal is to read a file line by line and write every line into a Cassandra database (same should be with MySQL, PostgreSQL, MongoDB etc. because the Cassandra client supports EM explicitly). The simple snippet blocks the reactor, right? But what's the right way to get a file read asynchronously? <code>  require 'rubygems'require 'cassandra'require 'thrift_client/event_machine'EM.run do Fiber.new do rm = Cassandra.new('RankMetrics', ""127.0.0.1:9160"", :transport => Thrift::EventMachineTransport, :transport_wrapper => nil) rm.clear_keyspace! begin file = File.new(""us_100000.txt"", ""r"") while (line = file.gets) rm.insert(:Domains, ""#{line.downcase}"", {'domain' => ""#{line}""}) end file.close rescue => err puts ""Exception: #{err}"" err end EM.stop end.resumeend",Read file in EventMachine asynchronously
Rails 3. How to round to two decimal places in the model?," Possible Duplicate: Rails 3. How do display two decimal places in edit form? I know I can use sprintf to limit to two decimal places. When I redisplay the prices in a form or just in a table, sometimes I get 80, instead of 80.00. Wouldn't be better to just store the price with the two decimal places from the very moment the price is entered in the database? That way, whenever it's displayed, it will ALWAYS show the two decimal places. If so, how? <code> ",Rails 3. How to explicitly round a number to two decimal places in the model?
Querying last 30 days date range with MongoId and Ruby?," How do I go about querying a date range (of say the last 30 days from now) with Mongoid and Ruby?I need to end up with an array or hash like the following: I am currently storing each document with a DateTime instance as well as a unix timestamp Integer field. The keys in the above hash are the days and the values are the sum of all sales for those days. Any ideas? <code>  { 15 => 300, 14 => 23, 13 => 23 ... 30 => 20 # Goes over into previous month 28 => 2}",Querying last 30 days date range with Mongoid and Ruby?
"What does the warning ""Could not retrieve fact fqdn"" mean, and how do I avoid or skip it?"," I'm learning about puppet and trying to experiment with it on a VM at home. I'm not using a puppet server yet, just running things locally. It works okay, but every time I run puppet apply ..., I get a delay of several seconds, after which it displays the message I assume the message is linked to the delay, and I want to get rid of it (the delay--I can live with the message). Googling for a solution seems to indicate that it's somehow related to DNS lookups, but I can't really find anything else about it, which seems surprising. All I want is to be able to apply manifests in my vm quickly so I can experiment. How can I speed things up?Update: I don't see any extra info in the debug output, but it looks like this: Update: I added the ""ruby"" tag because puppet has so few followers. If this doesn't belong in ruby, or if you know a better tag for it, let me know.Update again: Having learned some more about puppet, I now understand that this message is coming from the component called ""Facter"" that sniffs out ""facts"" about the system that Puppet is running on. I found some configuration options and played around with ""certname"", ""node_name"" and ""node_name_value"", but I couldn't get the delay to go away. Does anyone know specifically how to either tell Facter to ignore the fqdn or how to make Facter able to find the fqdn on an Ubuntu 11.10 vm?Progress: That's my router, which is running Dnsmasq via Tomato. strace led me to arp, which was blocking for 5 seconds and called twice for each facter: I changed the VM from NAT networking to bridged, so that it now has an IP on the network, and arp returns immediately now. (I'm no networking guru, so I have no idea why this worked, but it seemed a reasonable thing to try.) But facter still takes about 4-5 seconds total to run and still reports ""Could not retrieve fact fqdn"". facter -d shows several occurrences of ""value for domain is still nil"", all the way to the end. I'm thinking something still isn't quite right. <code>  warning: Could not retrieve fact fqdn $ puppet apply -dv puppet-1.pp warning: Could not retrieve fact fqdndebug: Failed to load library 'rubygems' for feature 'rubygems'debug: Failed to load library 'selinux' for feature 'selinux'debug: Puppet::Type::File::ProviderMicrosoft_windows: feature microsoft_windows is missing... $ cat /etc/resolv.conf# Generated by NetworkManagernameserver 192.168.1.1 $ dig -x 192.168.1.129 192.168.1.1; <<>> DiG 9.7.3 <<>> -x 192.168.1.129 192.168.1.1;; global options: +cmd;; Got answer:;; ->>HEADER<<- opcode: QUERY, status: NOERROR, id: 21838;; flags: qr aa rd ra; QUERY: 1, ANSWER: 1, AUTHORITY: 0, ADDITIONAL: 0;; QUESTION SECTION:;129.1.168.192.in-addr.arpa. IN PTR;; ANSWER SECTION:129.1.168.192.in-addr.arpa. 0 IN PTR desk-vm-ubuntu-beta.;; Query time: 14 msec;; SERVER: 192.168.1.1#53(192.168.1.1);; WHEN: Sun Oct 16 17:47:47 2011;; MSG SIZE rcvd: 77;; Got answer:;; ->>HEADER<<- opcode: QUERY, status: NOERROR, id: 27462;; flags: qr aa rd ra; QUERY: 1, ANSWER: 1, AUTHORITY: 0, ADDITIONAL: 0;; QUESTION SECTION:;192.168.1.1. IN A;; ANSWER SECTION:192.168.1.1. 0 IN A 192.168.1.1;; Query time: 11 msec;; SERVER: 192.168.1.1#53(192.168.1.1);; WHEN: Sun Oct 16 17:47:47 2011;; MSG SIZE rcvd: 45 $ time arp -a? (10.0.2.2) at 52:54:00:12:35:02 [ether] on eth0real 0m5.127suser 0m0.004ssys 0m0.016s","Puppet/Facter ""Could not retrieve fact fqdn"": How to fix or circumvent?"
"Algorithm used in Ruby for ""include?"""," Is anyone able to pinpoint which algorithm is used for the include? method in Ruby? For example  <code>  ""helloworld"".include?(""hello"")","Algorithm used in Ruby for ""String#include?"""
capybara-webkit: automatically save a screenshot on failure," How can I automatically save the html and a screenshot when a test fails using capybara-webkit with Rspec? How can I execute a callback when an RSpec test fails.Bonus points: how can I avoid getting the following error: when executing this code: <code>  Capybara::Driver::Webkit::WebkitInvalidResponseError require 'capybara/util/save_and_open_page'path = ""/#{Time.now.strftime('%Y-%m-%d-%H-%M-%S')}""png = Capybara.save_and_open_page_path + ""#{path}.png""page.driver.render Rails.root.join(png)",capybara-webkit: automatically save a screenshot on an RSpec test failure
How do I find the absolute path of the currently running ruby script, I have a Ruby script which wants to determine its absolute path in order to find some data files that are stored relative to the script. What's the simplest/best way to do this? <code> ,How do I find the absolute path of the currently running Ruby script?
Clean up &amb; style characters from text," I am getting text from a feed that has alot of characters like: Is there an easy way to get rid of these, or do I have to anticipate which characters I want to delete and use the delete method to remove them? Also, when I try to remove with It leaves behind ""amp;"" Is there a better way to delete this type of character? Do I need to re-encode the text? <code>  Insignia&amp;#153; 2.0 Stereo Computer Speaker System (2-Piece) - Black4th-Generation Apple&#174; iPod&#174; touch &amp; str.delete(""&amp;"")",Clean up &amp; style characters from text
how can I convert a ruby array to javascript with .js.erb?," I have a .js.erb template and I am doing: foo equals 123foo2 equals [1,2,3]foo3 is undefined (because the browser complains of a parse error)foo4 is undefined (because the browser complains of a parse error)The only way I could figure out how to get foo3 to work was to do: I could not foo4 to work in this way... I tried doing: Bottom line, all this needing to use eval stuff is ridiculous-- there MUST be a better way! Can someone please enlighten me as to what it is?!?! <code>  var foo = <%= [1,2,3] %>;var foo2 = <%= [1,2,3].to_json %>;var foo3 = <%= [""bar""].to_json %>;var foo4 = <%= {:foo => ""bar""}.to_json %>; var foo3 = ""<%= ['bar'].to_json %>""; # foo3 => ""[&quot;bar&quot;]""foo3.replace(/&quot;/g, ""\"""")) # => ""['bar']"" <-- looks like eval should work...eval(foo3.replace(/&quot;/g, ""\""""))[0]; # => ""bar"" ... it works var foo4 = <%= ""{:foo => 'bar'}.to_json"" %>; # foo4 => ""{&quot;foo:&quot;:&quot;bar&quot;}"" %>;foo4.replace(/&quot;/g, ""\"""")); # => ""{""foo"":""bar""}"" <-- looks like eval should workeval(foo4.replace(/&quot;/g, ""\"""")); # => ""Parse error"" <-- but it doesn't...",how can I convert ruby data structures to javascript data structures with .js.erb?
Extract text between hmtl tags with nokogiri, I have HTML like this: I have a basic Nokogiri CSS node search returning <p> content but I can't find examples for how to target all text between the Nth closed H2 and the next open H2. I'm creating a CSV with the output so I would also like to read in a file list and put the URL as first result.  <code>  <h1> Header is here</h1> <h2>Header 2 is here</h2> <p> Extract me!</p> <p> Extract me too!</p> <h2> Next Header 2</h2> <p>not interested</p> <p>not interested</p> <h2>Header 2 is here</h2> <p> Extract me!</p> <p> Extract me too!</p>,Extract text between HTML tags with nokogiri
"undefined method `camelize' for ""app"":String", I have tried installing Even tried Why does installing Nokogiri on Mac OS fail with libiconv is missing?.Nothing works. Please help!Thanks! <code>  expertiza git:(master) ruby -v ruby 1.8.7 (2011-06-30 patchlevel 352) [i686-darwin11.1.0] expertiza git:(master) rails -v Rails 2.3.14 expertiza git:(master) script/server/Users/HPV/.rvm/gems/ruby-1.8.7-p352/gems/activesupport-2.3.14/lib/active_support/inflector.rb:3:in `require': no such file to load -- iconv (LoadError) from /Users/HPV/.rvm/gems/ruby-1.8.7-p352/gems/activesupport-2.3.14/lib/active_support/inflector.rb:3 from /Users/HPV/.rvm/gems/ruby-1.8.7-p352/gems/activesupport-2.3.14/lib/active_support/core_ext/integer/inflections.rb:1:in `require' from /Users/HPV/.rvm/gems/ruby-1.8.7-p352/gems/activesupport-2.3.14/lib/active_support/core_ext/integer/inflections.rb:1 from /Users/HPV/.rvm/gems/ruby-1.8.7-p352/gems/activesupport-2.3.14/lib/active_support/core_ext/integer.rb:2:in `require' from /Users/HPV/.rvm/gems/ruby-1.8.7-p352/gems/activesupport-2.3.14/lib/active_support/core_ext/integer.rb:2 from /Users/HPV/.rvm/gems/ruby-1.8.7-p352/gems/activesupport-2.3.14/lib/active_support/core_ext.rb:8:in `require' from /Users/HPV/.rvm/gems/ruby-1.8.7-p352/gems/activesupport-2.3.14/lib/active_support/core_ext.rb:8 from /Users/HPV/.rvm/gems/ruby-1.8.7-p352/gems/activesupport-2.3.14/lib/active_support/core_ext.rb:8:in `each' from /Users/HPV/.rvm/gems/ruby-1.8.7-p352/gems/activesupport-2.3.14/lib/active_support/core_ext.rb:8 from /Users/HPV/.rvm/gems/ruby-1.8.7-p352/gems/activesupport-2.3.14/lib/active_support.rb:56:in `require' from /Users/HPV/.rvm/gems/ruby-1.8.7-p352/gems/activesupport-2.3.14/lib/active_support.rb:56 from /Users/HPV/.rvm/gems/ruby-1.8.7-p352/gems/rails-2.3.14/lib/commands/server.rb:1:in `require' from /Users/HPV/.rvm/gems/ruby-1.8.7-p352/gems/rails-2.3.14/lib/commands/server.rb:1 from script/server:3:in `require' rvm pkg install readlinervm pkg install iconvrvm install 1.8.7rvm use 1.8.7 ,in `require': no such file to load -- iconv (LoadError) 
Error instaling holidays gem," I'm receiving the following error when trying to install the holidays gem: I'm not a ruby guy, just installing some deps for Redmine Backlogs plugin.Versions and environment: <code>  # gem install holidaysFetching: holidays-1.0.4.gem (100%)ERROR: Error installing holidays: holidays requires holidays (>= 0) # gem -v1.8.10# ruby -vruby 1.8.7 (2010-06-23 patchlevel 299) [i386-linux]CentOS Linux release 6.0 (Final)# uname -r2.6.32-71.29.1.el6.i686",Error installing holidays gem
"With Vim ruby, can you create a new migration file and open it in one go?"," Using vim with the Rails plugin, can you create a migration file and then open the file in one go?Was this possible with textmate also? <code> ","With Vim Rails, can you create a new migration file and open it in one go?"
Ruby deserialize JSON primitives," Why can Ruby's built-in JSON not deserialize simple JSON primitives, and how do I work around it? <code>  irb(main):001:0> require 'json'#=> trueirb(main):002:0> objects = [ {}, [], 42, """", true, nil ]#=> [{}, [], 42, """", true]irb(main):012:0> objects.each do |o|irb(main):013:1* json = o.to_jsonirb(main):014:1> beginirb(main):015:2* p JSON.parse(json)irb(main):016:2> rescue Exception => eirb(main):017:2> puts ""Error parsing #{json.inspect}: #{e}""irb(main):018:2> endirb(main):019:1> end{}[]Error parsing ""42"": 706: unexpected token at '42'Error parsing ""\""\"""": 706: unexpected token at '""""'Error parsing ""true"": 706: unexpected token at 'true'Error parsing ""null"": 706: unexpected token at 'null'#=> [{}, [], 42, """", true, nil]irb(main):020:0> RUBY_DESCRIPTION#=> ""ruby 1.9.2p180 (2011-02-18 revision 30909) [x86_64-darwin10.7.0]""irb(main):022:0> JSON::VERSION#=> ""1.4.2""",Deserialize JSON primitives with the built-in Ruby JSON library
"Equivalent of Iconv.conv(""UTF-8//IGNORE"", ""UTF-8"", string) in Ruby 1.9.X?"," I'm reading data from a remote source, and occassionally get some characters in another encoding. They're not important.I'd like to get get a ""best guess"" utf-8 string, and ignore the invalid data. Main goal is to get a string I can use, and not run into errors such as:Encoding::UndefinedConversionError: ""\xFF"" from ASCII-8BIT to UTF-8:invalid byte sequence in utf-8 <code> ","Equivalent of Iconv.conv(""UTF-8//IGNORE"",...) in Ruby 1.9.X?"
How to display Ruby on Rails form validation error messages one at a time," I'm trying to understand how I can achieve this. Can anyone advise me or point me in the right direction?What I currently do, which is shown in the code snippet below, allows me to display 1 error from each field at a time. Its not not quite exactly what I want to do. I want to display 1 error message at a time. For example, first name can't be blank, then once that error has been resolved, the next error in the array of errors should be displayed. This should keep happening until all errors have been resolved. <code>  <% @user.errors.each do |attr, msg| %><%= ""#{attr} #{msg}"" if @user.errors[attr].first == msg %> <% end %>",How do I display Ruby on Rails form validation error messages one at a time?
concurrency in ROR," Trying to figure out how concurrency is dealt with in Ruby On Rails.How do I get a segment of code to lock on lines in the database and force rollbacks when needed?More specificly, Is there a way to force a certain segment of code to complete totally and if not rollback? I'm looking to add history to transactions in my project and I don't want transactions to commit without the history being saved so if the server falls between the two actions (saving the transaction and saving the history) the database may go into an illegal state. <code> ",Database-safe Concurrency in ROR
What programming languages are well suited for developing a live coding framework with?," I would like to build a ""live coding framework"".I should explain what is meant by ""live coding framework"". I'll do so by comparing live coding to traditional coding.Generally put, in traditional programming you write code, sometimes compile it, then launch an executable or open a script in some sort of interpreter. If you want to modify your application you must repeat this process. A live coding framework enables code to be updated while the application is running and reloaded on demand. Perhaps this reloading happens each time a file containing code is changed or by some other action. Changes in the code are then reflected in the application as it is running. There is no need to close the program and to recompile and relaunch it. In this case, the application is a windowed app that has an update/draw loop, is most likely using OpenGL for graphics, an audio library for sound processing ( SuperCollider? ) and ideally a networking lib.Of course I have preferred languages, though I'm not certain that any of them would be well suited for this kind of architecture. Ideally I would use Python, Lua, Ruby or another higher level language. However, a friend recently suggested Clojure as a possibility, so I am considering it as well.I would like to know not only what languages would be suitable for this kind of framework but, generally, what language features would make a framework such as this possible. <code> ",What programming language features are well suited for developing a live coding framework?
"Newbie : about ""<<"" operator in this case"," I am a newbie in Ruby on Rails. In a Rails application, I saw some code like following:In model, there is a class Car: In controller, there is a method ""some_method"" I got three questions to ask:1. In the code in controller @my_car.components << Component.new() , what does it do? What << means ?2. Are there any other usages of ""<<"" in Ruby-On-Rails or in Ruby ?3. Does Car class must explicitly define the has_many association with Component class if ""<<"" is used Or is the ""<<"" can be used to add a new association to Car, even the association is not defined in Car class explicitly? <code>  class Car < ActiveRecord::Base ...end class CarsController < ApplicationController def some_method @my_car = Car.new() #What does the following code do? #What does ""<<"" mean here? @my_car.components << Component.new() endend","About ""<<"" operator in this Rails association case"
ruby split_every?," Possible Duplicate: Need to split arrays to sub arrays of specified size in Ruby I'm looking to take an array---say [0,5,3,8,21,7,2] for example---and produce an array of arrays, split every so many places. If the above array were set to a, then would return [[0,5,3],[8,21,7][2]]Does this exist, or do I have to implement it myself? <code>  a.split_every(3)",Split array up into n-groups of m size?
Ruby strptime with Timezone," I have a String which I parse with DateTime.strptime. The Timezone of the Date in the String is CET but Ruby creates an UTC DateTime object which of course has an offset of 2hrs.Currently I'm working around the issue with DateTime.strptime().change(:offset => ""+0020"") but I'm pretty sure this is not the way it's meant to work.Can someone enlighten me on the correct way to do this? <code> ",Strptime with Timezone
How do I error handling with httparty?," I'm working on a Rails application using HTTParty to make HTTP requests. How can I handle HTTP errors with HTTParty? Specifically, I need to catch HTTP 502 & 503 and other errors like connection refused and timeout errors. <code> ",How can I handle errors with HTTParty?
Create file in Ruby," I'm trying to create a new file and things don't seem to be working as I expect them too. Here's what I've tried: According to everything I've read online all of those should work but every single one of them gives me this: This happens from IRB as well as a Ruby script. What am I missing? <code>  File.new ""out.txt""File.open ""out.txt""File.new ""out.txt"",""w""File.open ""out.txt"",""w"" ERRNO::ENOENT: No such file or directory - out.txt",How to create a file in Ruby
"Ruby serializing object to Json, Xml, Yaml"," I asked a previous question about serialization and validation. Someone mentioned using the JSON gem which allows me to tell my object how to serialize with the to_json method, however Ruby seems to do LOTS of complicated things really easily, however on the flip side some really simple things seem to be quite complicated, Serialization being one of those things.I want to find out if there is a way to have a clean object: Ideally, I don't want to dirty the model, I just want to pass it to something and tell it what the output type should be and let it work its magic.An example would be something like: I want to pass something an object, and get the strings outputted, then be able to convert it back.I know ActiveModel has serialization functionality but I need to dirty my class to do this, and I don't want to change the model if possible. ActiveSupport seems to satisfy the JSON criteria as I can just call that and it will take an object and spit out the JSON, but I would like to support other types.Any further information would be great! <code>  class CleanClass attr_accessor :variable1 attr_accessor :variable2 attr_accessor :variable3endcleanObject = CleanClass.new jsonOutput = MagicSerializer::Json.Serialize(cleanObject)xmlOutput = MagicSerializer::Xml.Serialize(cleanObject)yamlOutput = MagicSerializer::Yaml.Serialize(cleanObject)revertedJsonObject = MagicSerializer::Json.Unserialize(jsonOutput)revertedXmlObject = MagicSerializer::Xml.Unserialize(xmlOutput)revertedYamlObject = MagicSerializer::Yaml.Unserialize(yamlOutput)","Serializing an object to JSON, XML, YAML?"
Ruby packaging ecosystem as Python terminologies," I have some experience with Ruby, but its less than my Python experience. I've packaged and published several Python packages, but theres only one Ruby package I've published. I want to learn rapidly about Ruby packaging ecosystem by comparing to Python.I believe that theres the tool equivalent to virtualenv in Ruby, but I dont know what is that yet. What are the roles of RVM and Bundler?When I write a Python package, I usually use setup.py develop command it resolves the dependencies but is not installed to site-packages. What is the equivalent thing in Ruby?What is the preferred way to make a directory layout structure of Ruby packages?Gem package naming rule. Is Gem name case sensitive? Should it be the same as the contained Ruby module's name?Any other points I missed. <code> ",Ruby Packaging Ecosystem As Python Terminolgies
How do I loop through and save image files in Ruby," I'm creating a small app for myself where I run a Ruby script and save all of the images off of my blog.I can't figure out how to save the image files after I've identified them. Any help would be much appreciated. <code>  require 'rubygems'require 'nokogiri'require 'open-uri'url = '[my blog url]'doc = Nokogiri::HTML(open(url))doc.css(""img"").each do |item| #somethingend",Save all image files from a website
Ruby - negative random numbers," I know how to generate numbers with Rails but I don't know how to generate negative numbers? Random doc says that you would get an ArgumentError. <code>  prng.rand(1..6) for random of [1, 2, 3, 4, 5, 6]",Negative random numbers
Refactor seeds.rb file, My seeds.rb file is getting very large. What is the best way to refactor the data in the file?Can I put the data into various files and require them in the seeds.rb file? <code> ,Split seeds.rb file
Mac Rmagick wont install with Xcode 4.2," I just got a new macbook pro and trying to setup my dev environment.I downloaded xcode 4.2 from the app store and installed it, after this i installed homebrew and RVM.ImageMagick, readline, ruby 1.9.3-head all installed perfectly until i ran bundle update which tried to install rmagick.After a long long time investigating i come down to the conclusion that it can't find libgomp.The output is from gem install rmagick is: Here is my mkmf.log file: Now i assumed here that something was wrong with xcode i tried several things:Reinstall xcodeRemove imagemagick and reinstalled it including other libraries like jpg, libpng etcInstalled older version of imagemagickRemoved .rvm and reinstalled a fresh copy of rubyI have no clue what's left for me to try, could anyone help to push me in the good direction? <code>  $ gem install rmagickBuilding native extensions. This could take a while...ERROR: Error installing rmagick: ERROR: Failed to build gem native extension. /Users/dhiemstra/.rvm/rubies/ruby-1.9.3-head/bin/ruby extconf.rbchecking for Ruby version >= 1.8.5... yesextconf.rb:128: Use RbConfig instead of obsolete and deprecated Config.checking for clang... yeschecking for Magick-config... yeschecking for ImageMagick version >= 6.4.9... yeschecking for HDRI disabled version of ImageMagick... yeschecking for stdint.h... *** extconf.rb failed ***Could not create Makefile due to some reason, probably lack ofnecessary libraries and/or headers. Check the mkmf.log file for moredetails. You may need configuration options.Provided configuration options: --with-opt-dir --without-opt-dir --with-opt-include --without-opt-include=${opt-dir}/include --with-opt-lib --without-opt-lib=${opt-dir}/lib --with-make-prog --without-make-prog --srcdir=. --curdir --ruby=/Users/dhiemstra/.rvm/rubies/ruby-1.9.3-head/bin/ruby/Users/dhiemstra/.rvm/rubies/ruby-1.9.3-head/lib/ruby/1.9.1/mkmf.rb:381:in `try_do': The compiler failed to generate an executable file. (RuntimeError)You have to install development tools first. ""clang -o conftest -I/Users/dhiemstra/.rvm/rubies/ruby-1.9.3-head/include/ruby-1.9.1/x86_64-darwin11.2.0 -I/Users/dhiemstra/.rvm/rubies/ruby-1.9.3-head/include/ruby-1.9.1/ruby/backward -I/Users/dhiemstra/.rvm/rubies/ruby-1.9.3-head/include/ruby-1.9.1 -I. -I/usr/local/Cellar/imagemagick/6.7.1-1/include/ImageMagick -I/usr/local/Cellar/imagemagick/6.7.1-1/include/ImageMagick -fopenmp conftest.c -L. -L/Users/dhiemstra/.rvm/rubies/ruby-1.9.3-head/lib -L/usr/local/Cellar/imagemagick/6.7.1-1/lib -L/usr/X11/lib -L/usr/local/Cellar/imagemagick/6.7.1-1/lib -lMagickCore -llcms -ltiff -lfreetype -ljpeg -L/usr/X11/lib -lfontconfig -lXext -lSM -lICE -lX11 -lXt -lbz2 -lz -lm -lgomp -lpthread -lltdl -lruby.1.9.1 -lpthread -ldl -lobjc ""ld: library not found for -lgompclang: error: linker command failed with exit code 1 (use -v to see invocation)checked program was:/* begin */1: #include ""ruby.h""2: 3: int main() {return 0;}/* end */",Mac Rmagick won't install with Xcode 4.2
HEROKU Stack Cedar - cannot run git push heroku master," I run commands but it gave me an error: EDIT - This post could be really helpful: sqlite3-ruby install error <code>  heroku create --stack cedargit push heroku master > Counting objects: 144, done. Delta compression using up to 2 threads.> Compressing objects: 100% (128/128), done. Writing objects: 100%> (144/144), 50.16 KiB, done. Total 144 (delta 23), reused 0 (delta 0)> > -----> Heroku receiving push> -----> Ruby/Rails app detected> -----> Installing dependencies using Bundler version 1.1.rc> Running: bundle install --without development:test --path vendor/bundle --deployment> Fetching gem metadata from http://rubygems.org/.......> Installing rake (0.9.2.2)> Installing multi_json (1.0.3)> Installing activesupport (3.1.1)> Installing builder (3.0.0)> Installing i18n (0.6.0)> Installing activemodel (3.1.1)> Installing erubis (2.7.0)> Installing rack (1.3.5)> Installing rack-cache (1.1)> Installing rack-mount (0.8.3)> Installing rack-test (0.6.1)> Installing hike (1.2.1)> Installing tilt (1.3.3)> Installing sprockets (2.0.3)> Installing actionpack (3.1.1)> Installing mime-types (1.17.2)> Installing polyglot (0.3.2)> Installing treetop (1.4.10)> Installing mail (2.3.0)> Installing actionmailer (3.1.1)> Installing arel (2.2.1)> Installing tzinfo (0.3.30)> Installing activerecord (3.1.1)> Installing activeresource (3.1.1)> Installing coffee-script-source (1.1.2)> Installing execjs (1.2.9)> Installing coffee-script (2.2.0)> Installing rack-ssl (1.3.2)> Installing json (1.6.1) with native extensions> Installing rdoc (3.11)> Installing thor (0.14.6)> Installing railties (3.1.1)> Installing coffee-rails (3.1.1)> Installing jquery-rails (1.0.16)> Installing pg (0.11.0) with native extensions> Using bundler (1.1.rc)> Installing rails (3.1.1)> Installing sass (3.1.10)> Installing sass-rails (3.1.4)> **Installing sqlite3 (1.3.4) with native extensions Unfortunately, a fatal error has occurred. Please report this error to> the Bundler issue tracker at> https://github.com/carlhuda/bundler/issues so that we can fix it.> Thanks!**> /usr/local/lib/ruby/1.9.1/rubygems/installer.rb:483:in `rescue in block in build_extensions': ERROR: Failed to build gem native> extension. (Gem::Installer::ExtensionBuildError)> /usr/local/bin/ruby extconf.rb> checking for sqlite3.h... no> sqlite3.h is missing. Try 'port install sqlite3 +universal'> or 'yum install sqlite3-devel' and check your shared library search path (the> location where your sqlite3 shared library is located).> *** extconf.rb failed ***> Could not create Makefile due to some reason, probably lack of> necessary libraries and/or headers. Check the mkmf.log file for more> details. You may need configuration options.> Provided configuration options:> --with-opt-dir> --without-opt-dir> --with-opt-include> --without-opt-include=${opt-dir}/include> --with-opt-lib> --without-opt-lib=${opt-dir}/lib> --with-make-prog> --without-make-prog> --srcdir=.> --curdir> --ruby=/usr/local/bin/ruby> --with-sqlite3-dir> --without-sqlite3-dir> --with-sqlite3-include> --without-sqlite3-include=${sqlite3-dir}/include> --with-sqlite3-lib> --without-sqlite3-lib=${sqlite3-dir}/lib> --enable-local> --disable-local> Gem files will remain installed in /tmp/build_272b7nu18wwh5/vendor/bundle/ruby/1.9.1/gems/sqlite3-1.3.4> for inspection.> Results logged to /tmp/build_272b7nu18wwh5/vendor/bundle/ruby/1.9.1/gems/sqlite3-1.3.4/ext/sqlite3/gem_make.out> from /usr/local/lib/ruby/1.9.1/rubygems/installer.rb:486:in `block in build_extensions'> from /usr/local/lib/ruby/1.9.1/rubygems/installer.rb:446:in `each'> from /usr/local/lib/ruby/1.9.1/rubygems/installer.rb:446:in `build_extensions'> from /usr/local/lib/ruby/1.9.1/rubygems/installer.rb:198:in `install'> from /tmp/build_272b7nu18wwh5/vendor/bundle/ruby/1.9.1/gems/bundler-1.1.rc/lib/bundler/source.rb:90:in> `block in install'> from /tmp/build_272b7nu18wwh5/vendor/bundle/ruby/1.9.1/gems/bundler-1.1.rc/lib/bundler/rubygems_integration.rb:78:in> `preserve_paths'> from /tmp/build_272b7nu18wwh5/vendor/bundle/ruby/1.9.1/gems/bundler-1.1.rc/lib/bundler/source.rb:89:in> `install'> from /tmp/build_272b7nu18wwh5/vendor/bundle/ruby/1.9.1/gems/bundler-1.1.rc/lib/bundler/installer.rb:73:in> `block in install_gem_from_spec'> from /tmp/build_272b7nu18wwh5/vendor/bundle/ruby/1.9.1/gems/bundler-1.1.rc/lib/bundler/rubygems_integration.rb:93:in> `with_build_args'> from /tmp/build_272b7nu18wwh5/vendor/bundle/ruby/1.9.1/gems/bundler-1.1.rc/lib/bundler/installer.rb:72:in> `install_gem_from_spec'> from /tmp/build_272b7nu18wwh5/vendor/bundle/ruby/1.9.1/gems/bundler-1.1.rc/lib/bundler/installer.rb:56:in> `block in run'> from /tmp/build_272b7nu18wwh5/vendor/bundle/ruby/1.9.1/gems/bundler-1.1.rc/lib/bundler/installer.rb:55:in> `run'> from /tmp/build_272b7nu18wwh5/vendor/bundle/ruby/1.9.1/gems/bundler-1.1.rc/lib/bundler/installer.rb:12:in> `install'> from /tmp/build_272b7nu18wwh5/vendor/bundle/ruby/1.9.1/gems/bundler-1.1.rc/lib/bundler/cli.rb:219:in> `install'> from /tmp/build_272b7nu18wwh5/vendor/bundle/ruby/1.9.1/gems/bundler-1.1.rc/lib/bundler/vendor/thor/task.rb:22:in> `run'> from /tmp/build_272b7nu18wwh5/vendor/bundle/ruby/1.9.1/gems/bundler-1.1.rc/lib/bundler/vendor/thor/invocation.rb:118:in `invoke_task'> from /tmp/build_272b7nu18wwh5/vendor/bundle/ruby/1.9.1/gems/bundler-1.1.rc/lib/bundler/vendor/thor.rb:263:in> `dispatch'> from /tmp/build_272b7nu18wwh5/vendor/bundle/ruby/1.9.1/gems/bundler-1.1.rc/lib/bundler/vendor/thor/base.rb:386:in> `start'> from /tmp/build_272b7nu18wwh5/vendor/bundle/ruby/1.9.1/gems/bundler-1.1.rc/bin/bundle:13:in> `<top (required)>'> from vendor/bundle/ruby/1.9.1/bin/bundle:19:in `load'> from vendor/bundle/ruby/1.9.1/bin/bundle:19:in `<main>' ! ! Failed to install gems via Bundler. ! ! Heroku push rejected,> failed to compile Ruby/rails app> > To git@heroku.com:falling-ice-5948.git ! [remote rejected] master ->> master (pre-receive hook declined) error: failed to push some refs to> 'git@heroku.com:falling-ice-5948.git'",HEROKU - cannot run git push heroku master
Convert json to ruby hash," I have a JSON object holding the following value: I want to loop through it in Ruby to get the key/value pairs. When I use @each, it doesn't iterate through the object because it is not in the Ruby hash form: How can I convert the above JSON object to a Ruby hash?  <code>  @value = {""val"":""test"",""val1"":""test1"",""val2"":""test2""} @value = {""val""=>""test"",""val1""=>""test1"",""val2""=>""test2""}",How to convert JSON to a Ruby hash
What are mechanize limitations? and differences between mechanize vs watir, I am using mechanize to scrap some web pages. I need to know what are mechanize limitations? What mechanize can not do? Can it execute javascripts embedded in the web page? Can I use it to call javascript functions? I don't think it can. I think Watir can.What are the differences between it and watir? <code> ,What are the limitations of mechanize? and what is the difference(s) between mechanize and watir
Get Time Object at Midnight in a Particular Time Zone, How can I get a ruby Time object that represents the start of the day on a particular date in a given timezone. <code> ,Get Time Object at Start of Day in a Particular Time Zone
"Rails, ERB syntax", Can some one please describe the usage of the following characters which is used in ERB file: what's the usage of each one ?  <code>  <% %><%= %><% -%><%# %>,"What is the difference between <%, <%=, <%# and -%> in ERB in Rails?"
Nokogiri XML Builde - adding namespace," I have been wrecking my head for a few hours but I can't seem to determine how to add XMLNS namespace whilst using the Nokogiri XML Builder class to construct a XML structure. For instance, consider the XML sample below: I can create everything between the GetQuote tags but creating the ""p:ACMRequest"" remains a mystery. I came across this reference, https://gist.github.com/428455/7a15f84cc08c05b73fcec2af49947d458ae3b96a, that still doesn't make sense to me. Even referring to the XML documentation,http://www.w3.org/TR/xml-names/, didn't make much sense either.  <code>  <?xml version=""1.0"" encoding=""UTF-8""?><p:ACMRequest xmlns:p=""http://www.acme.com"" xmlns:p1=""http://www.acme.com/datatypes"" xmlns:p2=""http://www.acme.com/ACMRequestdatatypes"" xmlns:xsi=""http://www.w3.org/2001/XMLSchema-instance"" xsi:schemaLocation=""http://www.acme.com ACM-req.xsd ""> <GetQuote> <Request> <ServiceHeader> ... ... </ServiceHeader> </Request> <From> ... ... </From> <Details> ... ... </Details> </GetQuote></p:ACMRequest>",Adding namespace using Nokogiri's XML Builder
Rails: Odd number list for hash," I'm trying to get a rails website up and running from github, and I'm encountering these errors: for this code: Any ideas? <code>  WARNING: 'task :t, arg, :needs => [deps]' is deprecated. Please use 'task :t, [args] => [deps]' instead. at /Library/Ruby/Gems/1.8/gems/sunspot_rails-1.2.1/lib/sunspot/rails/tasks.rb:41 rake aborted! /Users/robertgrzesik/Documents/RubyOnRails/IndieOption/app/helpers/advertisements_helper.rb:15: odd number list for Hash user_id: current_user.id, ^ /Users/robertgrzesik/Documents/RubyOnRails/IndieOption/app/helpers/advertisements_helper.rb:15: syntax error, unexpected ':', expecting '}' user_id: current_user.id, ^ /Users/robertgrzesik/Documents/RubyOnRails/IndieOption/app/helpers/advertisements_helper.rb:16: syntax error, unexpected ':', expecting '=' page: request.url ^ /Users/robertgrzesik/Documents/RubyOnRails/IndieOption/app/helpers/advertisements_helper.rb:17: syntax error, unexpected '}', expecting kEND }) ^ /Users/robertgrzesik/Documents/RubyOnRails/IndieOption/app/helpers/advertisements_helper.rb:20: odd number list for Hash page: request.url ^ /Users/robertgrzesik/Documents/RubyOnRails/IndieOption/app/helpers/advertisements_helper.rb:20: syntax error, unexpected ':', expecting '}' page: request.url ^ /Users/robertgrzesik/Documents/RubyOnRails/IndieOption/app/helpers/advertisements_helper.rb:21: syntax error, unexpected '}', expecting kEND }) ^ if ad if current_user ad.impressions.create({ user_id: current_user.id, page: request.url }) else ad.impressions.create({ page: request.url }) end link_to external_redirect_advertisement_url(ad) do image_tag ad.image.url(format) endelse nilendend",Odd number list for hash
"In Ruby, how can I check to see if an array is already sorted?"," I know how to put an array in order, but in this case I just want to see if it is in order. An array of strings would be the easiest, I imagine, and answers on that front are appreciated, but an answer that includes the ability to check for order based on some arbitrary parameter is optimal. Here's an example dataset. The name of: Where the elements are themselves arrays containing several elements, the first of which is a string. I want to see if the elements are in alphabetical order based on this string. <code>  [[""a"", 3],[""b"",53],[""c"",2]]",Check to see if an array is already sorted?
Interesting Ruby array syntax for locating based on an object's attribute?," Say I have a Ruby class, Flight. Flight has an attr_accessor :key on it. If there's an array of instances of this class: flights = [flight1, flight2, flight3], I have a ""target key"", say ""2jf345"", and I want to find a flight based on it's key, from that array - what sort of code should I use?This is the code I was going to use: flights[flights.map { |s| s.key }.index(target_key)]But it seems like with Ruby, there should be a simpler way. Also, the code above returns an error for me - `[]': no implicit conversion from nil to integer (TypeError). I assume this means that it's not returning an index at all.Thanks for any help. <code> ",Ruby array methods for locating based on an object's attribute?
Using symbols as arguments to ruby methods," I am learning rails and going back to ruby to understand how methods in rails (and ruby really work). When I see method calls like: I get confused. How do you write methods in ruby that accept symbols or hashes. The source code for the validates method is confusing too. Could someone please simplify this topic of using symbols as arguments in ruby class and instance methods for me?UPDATE:Good one @Dave! But What I was trying out was something like: Which obviously raises errors. I am trying to understand: Why is passing symbols like this as arguments wrong if symbols are just like any other value? <code>  validates :first_name, :presence => true def full_name (:first_name, :last_name) @first_name = :first_name @last_name = :last_name p ""#{@first_name} #{last_name}""endfull_name(""Breta"", ""Von Sustern"")",How are symbols used to identify arguments in ruby methods
"Rails : How Can I do ""LEFT OUTER JOIN"" on ActiveRecord"," I don't have any ideas. Could you give me any clues (like reference sites). Any help will be appreciated. Expected SQL statement: I tried to set up associations below but I dont know what to do after this. Rails Version: 3.1.1 <code>  Model1: GROUP(id, name)Model2: USER_GROUP_CMB(id, user_id, group_id) SELECT * FROM groups AS g LEFT OUTER JOIN user_group_cmbs AS cmb ON g.id = cmb.group_idWHERE cmb.user_id = 1 class Group < ActiveRecord::Base has_many :user_group_cmbendclass UserGroupCmb < ActiveRecord::Base has_many :groupend",How can I do a LEFT OUTER JOIN using Rails ActiveRecord?
Enter data into an association table without creating a model for it?, Running the following code to add an association enters multiple entries each time the code is ran: Is there a way to make it only enter unique associations between the two models in the db? <code>  store.categories << category,How to enter unique associations only?
How to enter data in association table without creating model for it?, Running the following code to add an association enters multiple entries each time the code is ran: Is there a way to make it only enter unique associations between the two models in the db? <code>  store.categories << category,How to enter unique associations only?
curl POST JSON data to simple rails application," I set up a simple new rails application with model entry, with attributes title and content using scaffolding. now I am trying to use curl to POST the JSON data (rather than using the browser). the following seems to work (i.e. successfully posted with null data): the following does not work: I have tried many variations. the errors I get are mostly host not found or unexpected token at the JSON data. <code>  curl --verbose --header ""Accept: application/json"" --header ""Content-type: application/json"" --request POST --data """" http://localhost:3000/entries curl --verbose --header ""Accept: application/json"" --header ""Content-type: application/json"" --request POST --data ""{'content':'I belong to AAA','title':'AAA'}"" http://localhost:3000/entries",POST JSON data to simple rails application with curl
Rails how to determinate controller in view," This is my form partial: If the action is edit I want to show this instead: How can i achieve this?  <code>  <%= f.simple_fields_for :photo_attributes, :html => { :multipart => true } do |d| %> <%= d.label :image, :label => 'Upload logo', :required => false %> <%= d.file_field :image, :label => 'Image, :required => false', :style => 'margin-bottom:2px' %> <%= d.input :image_url, :label => 'Billed URL', :required => false %><% end %> <%= f.simple_fields_for :photo, :html => { :multipart => true } do |d| %> <%= d.label :image, :label => 'Upload logo', :required => false %> <%= d.file_field :image, :label => 'Image, :required => false', :style => 'margin-bottom:2px' %> <%= d.input :image_url, :label => 'Billed URL', :required => false %><% end %>",Rails: How to determine controller/action in view
Creating controllers and views for a simple has_many :through relationship in Rails 3," There are many tutorials that show you how to create the model instructions for a has_many :through relationship in Rails, but there doesn't seem to be many articles related to the process of setting up forms to create and edit these relationships. I am seeking some assistance (or good examples) of how to create an interface that will allow users to manage these types of relationships in a Rails app.Here's the scenario: I have Users, Relationships, and Athletes. A User can have a Relationship with an Athlete in a variety of roles: Coach, Mentor, Parent, or Fan.Here are my models: So, the next step is to build the views and controllers that allows me to create a User-to-Athlete relationship (with a coach, parent, etc role), edit the relationship, or destroy the relationship.Ultimately, my aim is to have a scenario where Users can create Athletes and choose the associated Relationship.Unfortunately, I can't find any specific tutorials or references that gives me much more than the model instructions or the example for a has_many relationship.If anyone has a link or example that can solve this problem at a simple level, I should be able to customize the rest. <code>  class User < ActiveRecord::Base has_many :relationships has_many :athletes, :through => :relationshipsendclass Athlete < ActiveRecord :: Base has_many :relationships has_many :users, :through => :relationshipsendclass Relationship < ActiveRecord :: Base belongs_to :users belongs_to :athletesend",Creating controllers and views for a has_many :through relationship in Rails 3
"Unexpected keyword_end,expecting $end"," hey I am newbie to ruby on rails and I am trying run a simple program from this blog and facing lot of problems error. http://goodbadtech.com/2009/05/13/ruby-on-rails-import-csv-data-into-database/Could not able to figure out the solution. Here is the error log. Please help me out in this <code>  /home/jeevan/.rvm/gems/ruby-1.9.2-p290/gems/activesupport-3.1.1/lib/active_support/dependencies.rb:234:in `load': /home/jeevan/csv/config/routes.rb:64: syntax error, unexpected keyword_end, expecting $end (SyntaxError) from /home/jeevan/.rvm/gems/ruby-1.9.2-p290/gems/activesupport-3.1.1/lib/active_support/dependencies.rb:234:in `block in load' from /home/jeevan/.rvm/gems/ruby-1.9.2-p290/gems/activesupport-3.1.1/lib/active_support/dependencies.rb:223:in `block in load_dependency' from /home/jeevan/.rvm/gems/ruby-1.9.2-p290/gems/activesupport-3.1.1/lib/active_support/dependencies.rb:640:in `new_constants_in' from /home/jeevan/.rvm/gems/ruby-1.9.2-p290/gems/activesupport-3.1.1/lib/active_support/dependencies.rb:223:in `load_dependency' from /home/jeevan/.rvm/gems/ruby-1.9.2-p290/gems/activesupport-3.1.1/lib/active_support/dependencies.rb:234:in `load' from /home/jeevan/.rvm/gems/ruby-1.9.2-p290/gems/railties-3.1.1/lib/rails/application/routes_reloader.rb:29:in `block in load_paths' from /home/jeevan/.rvm/gems/ruby-1.9.2-p290/gems/railties-3.1.1/lib/rails/application/routes_reloader.rb:29:in `each' from /home/jeevan/.rvm/gems/ruby-1.9.2-p290/gems/railties-3.1.1/lib/rails/application/routes_reloader.rb:29:in `load_paths' from /home/jeevan/.rvm/gems/ruby-1.9.2-p290/gems/railties-3.1.1/lib/rails/application/routes_reloader.rb:13:in `reload!' from /home/jeevan/.rvm/gems/ruby-1.9.2-p290/gems/railties-3.1.1/lib/rails/application/routes_reloader.rb:7:in `block in initialize' from /home/jeevan/.rvm/gems/ruby-1.9.2-p290/gems/activesupport-3.1.1/lib/active_support/file_update_checker.rb:32:in `call' from /home/jeevan/.rvm/gems/ruby-1.9.2-p290/gems/activesupport-3.1.1/lib/active_support/file_update_checker.rb:32:in `execute_if_updated' from /home/jeevan/.rvm/gems/ruby-1.9.2-p290/gems/railties-3.1.1/lib/rails/application/finisher.rb:63:in `block (2 levels) in <module:Finisher>' from /home/jeevan/.rvm/gems/ruby-1.9.2-p290/gems/railties-3.1.1/lib/rails/application/finisher.rb:64:in `call' from /home/jeevan/.rvm/gems/ruby-1.9.2-p290/gems/railties-3.1.1/lib/rails/application/finisher.rb:64:in `block in <module:Finisher>' from /home/jeevan/.rvm/gems/ruby-1.9.2-p290/gems/railties-3.1.1/lib/rails/initializable.rb:30:in `instance_exec' from /home/jeevan/.rvm/gems/ruby-1.9.2-p290/gems/railties-3.1.1/lib/rails/initializable.rb:30:in `run' from /home/jeevan/.rvm/gems/ruby-1.9.2-p290/gems/railties-3.1.1/lib/rails/initializable.rb:55:in `block in run_initializers' from /home/jeevan/.rvm/gems/ruby-1.9.2-p290/gems/railties-3.1.1/lib/rails/initializable.rb:54:in `each' from /home/jeevan/.rvm/gems/ruby-1.9.2-p290/gems/railties-3.1.1/lib/rails/initializable.rb:54:in `run_initializers' from /home/jeevan/.rvm/gems/ruby-1.9.2-p290/gems/railties-3.1.1/lib/rails/application.rb:96:in `initialize!' from /home/jeevan/.rvm/gems/ruby-1.9.2-p290/gems/railties-3.1.1/lib/rails/railtie/configurable.rb:30:in `method_missing' from /home/jeevan/csv/config/environment.rb:5:in `<top (required)>' from /home/jeevan/csv/config.ru:4:in `require' from /home/jeevan/csv/config.ru:4:in `block in <main>' from /home/jeevan/.rvm/gems/ruby-1.9.2-p290/gems/rack-1.3.5/lib/rack/builder.rb:51:in `instance_eval' from /home/jeevan/.rvm/gems/ruby-1.9.2-p290/gems/rack-1.3.5/lib/rack/builder.rb:51:in `initialize' from /home/jeevan/csv/config.ru:1:in `new' from /home/jeevan/csv/config.ru:1:in `<main>' from /home/jeevan/.rvm/gems/ruby-1.9.2-p290/gems/rack-1.3.5/lib/rack/builder.rb:40:in `eval' from /home/jeevan/.rvm/gems/ruby-1.9.2-p290/gems/rack-1.3.5/lib/rack/builder.rb:40:in `parse_file' from /home/jeevan/.rvm/gems/ruby-1.9.2-p290/gems/rack-1.3.5/lib/rack/server.rb:200:in `app' from /home/jeevan/.rvm/gems/ruby-1.9.2-p290/gems/railties-3.1.1/lib/rails/commands/server.rb:46:in `app' from /home/jeevan/.rvm/gems/ruby-1.9.2-p290/gems/rack-1.3.5/lib/rack/server.rb:301:in `wrapped_app' from /home/jeevan/.rvm/gems/ruby-1.9.2-p290/gems/rack-1.3.5/lib/rack/server.rb:252:in `start' from /home/jeevan/.rvm/gems/ruby-1.9.2-p290/gems/railties-3.1.1/lib/rails/commands/server.rb:70:in `start' from /home/jeevan/.rvm/gems/ruby-1.9.2-p290/gems/railties-3.1.1/lib/rails/commands.rb:54:in `block in <top (required)>' from /home/jeevan/.rvm/gems/ruby-1.9.2-p290/gems/railties-3.1.1/lib/rails/commands.rb:49:in `tap' from /home/jeevan/.rvm/gems/ruby-1.9.2-p290/gems/railties-3.1.1/lib/rails/commands.rb:49:in `<top (required)>' from script/rails:6:in `require' from script/rails:6:in `<main>'","unexpected keyword_end, expecting $end (SyntaxError)"
Ruby - require generates a LoadError. Why?," I am new to Ruby and would really appreciate some help understanding what is going on here.Summary: Gem install watir-webdriverInstalls finestart irbrequire ""watir-webdriver""... LoadError: no such file to load --watir-webdriver Surely this should respond Why is it not finding the gem? Or what am I doing wrong? I'm on win7, Railsinstaller (Ruby 1.8.7). <code>  => true",Ruby - require 'watir-webdriver' - generates a LoadError no such file... Why?
Get char from console immediately, Is it possible to get each char from STDIN once it is provided (without waiting for return key)? <code> ,Get single char from console immediately
Trim values before inserting into DB? -- Rails 3.1," What's the simplest way to make sure models trim leading and trailing white space from string values.One inconvenient way seems to be a before_save filter -- although for something as common as removing white space from strings, maybe there's some config that does that? <code> ",How to remove whitespace from Model attributes?
How can I leading and  trailing white space from Model string values," What's the simplest way to make sure models trim leading and trailing white space from string values.One inconvenient way seems to be a before_save filter -- although for something as common as removing white space from strings, maybe there's some config that does that? <code> ",How to remove whitespace from Model attributes?
how to return struct data as a hash in ruby," Is there a valid reason for there not being a method to return the data of a standard ruby struct as a hash (member, value pairs)?Seeing that structs and hashes have very similar use cases, I'm surprised that no such method exists. Or does it, and I'm just too blind?It's easy to implement (and i have done so for now), but lack of such functionality in the standard libs, has me thinking that I might have not really grasped the concept of structs in ruby. <code> ",returning struct data as a hash in ruby
Checking the extension of a file name in Ruby. The file name is a string," I'm working on the file upload portion of a Rails app. Different types of files are handled differently by the app.I want to make a whitelist of certain file extensions to check the uploaded files against to see where they should go. All of the file names are strings. I need a way to check only the extension part of the file name string. The file names are all in the format of ""some_file_name.some_extension"". <code> ",Find the extension of a filename in Ruby
"Comparison between Rails, Padrino and Sinatra"," I am working on an application in the Mobile/VOIP domain. This is really a gray area for me. Here are some details about the application:This is basically like an auto recharge / prepaid mobile service Will have logic of medium complexity compared to previous ERP apps I've written.The Views sections in the response will be plain text, which will be sent as SMS/USSD pull to user and Voice XML (VXML) that will be sent as an IVR Response to users.The routing logic is very simple, as only two to three URLs will be important for each type of reply.Constraints:We have the core system built in Perl (it's a legacy system which is serving many other VOIP/Mobile-related services), and an accounting system to keep track of profit and loss, but it has grown very complex. So we decided to make this application separately, and only use SMS/USSD and IVR. However, every user of this application has to be a registered user of the core system for accounting purposes; this we can easily achieve by just an API call.Now, for sending a reply/response for IVR and USSD, we need to deploy the application at the vendor which provides these facilities. But we don't want to always need to log-in to their servers for daily reports and accounting stuff as, for each of our clients, we will have different flows for the USSD/SMS/IVR System.So, we decided this new application will be indeed divided into two sub-applications.One application will handle the USER Interface with USSD/SMS/IVR domain and will be deployed on vendor's servers, which we will call ""clientware"".The second application will handle all core business logic and reporting systems and will be deployed on our servers, where we will have full access. We will call this ""middleware"".The basic flow of the application:The user dials the shortcode. Call lands on our vendor servers where clientware app will handle the request and register it as a user in its local database.Clientware will also make an API call to middleware. To register this user over there as well for core business logic timely auto recharge, etc.The middleware will then also make API call to the core system to register this user over there as well for accounting purposes.Now, there will be many such clientware applications interacting with a single middleware application. We have decided to build these applications in Ruby. I would be following RESTful architecture for this, as lots of API calls are involved.Of the three frameworks, Rails, Padrino, or Sinatra, are any of them specially suited for this project? I would appreciate a good comparison detailed relevant pros and cons, if possible. <code> ","Suitability of Rails, Padrino, and Sinatra for building a prepaid mobile service"
Ruby on Rails beginner," I am not sure exactly what I should name this question. I just started server-side programming and I need some help.All the tutorials I have read so far on RoR deal with creating a pre-defined table and with pre-defined fields (id, name, email, etc etc). They use ActiveRecord as base class and saving to db is handled automatically by superclass.What I am trying to program is something that allows user-defined table with fields. So think of this way. The web UI will have an empty table, the user will name the table, and add columns (field), and after that, add rows, and then later save it. How would I implement this? I am not asking for details, just an overview of it. As I said, all the tutorials I have read so far deal with pre-defined tables with fields where the ActiveRecord subclass is predefined.So in a nutshell, I am asking, how to create tables in db on runtime, and add fields to the tables.Hope I was clear, if not, please let me know and i will try to elaborate a bit more. Thanks. <code> ",Dynamically creating new Active Record models and database tables
How to truncate a decimal without rounding up in Ruby?," I have a floating point number that I want to truncate to 3 places but I don't want to round up. For example, convert 1.0155555555555555 to 1.015 (not 1.016).How would I go about doing this in Ruby? <code> ",Truncate a floating point number without rounding up
How to truncate a floating point number without rounding up in Ruby?," I have a floating point number that I want to truncate to 3 places but I don't want to round up. For example, convert 1.0155555555555555 to 1.015 (not 1.016).How would I go about doing this in Ruby? <code> ",Truncate a floating point number without rounding up
How to simplicy these three lines in ruby? -- Ruby beginner, For a given sentence I want to perform the stem action on each individual word.Is there a way to simplify this code? <code>  words = self.tag.splitwords.each { |word| word = word.stem }self.tag = words.join(' '),"How to simplify split, iterate.each and join in ruby? -- Ruby beginner"
How to simplify these three lines in ruby? -- Ruby beginner, For a given sentence I want to perform the stem action on each individual word.Is there a way to simplify this code? <code>  words = self.tag.splitwords.each { |word| word = word.stem }self.tag = words.join(' '),"How to simplify split, iterate.each and join in ruby? -- Ruby beginner"
how to get long filename from ARGV," I want to make a tool that takes some filenames as parameters, but when I use this code: and I use drag and drop or ""send to"" in Windows, I get the short filename.So a file like ""C:\Ruby193\bin\test\New Text Document.txt"" becomesC:\Ruby193\bin\test\NEWTEX~1.TXT as the argument.There is no problem when I run the script from the commandline, with the longfilenames as parameters.How do i get the long filename when i use drag and drop or send to? <code>  ARGV.each do|a| puts ""Argument: #{a}""end",How to get long filename from ARGV
How can I install Ruby 1.9.3 in Lion?," I am trying to install Ruby 1.9.3 but am having problems. I installed RVM, then typed: The output says: The log says: I downloaded the new XCode from the App Store and installed it. <code>  rvm install 1.9.3 ERROR: Error running ' ./configure.... configure: WARNING: unrecognized options: --with-libyaml-dir checking build system type... x86_64-apple-darwin11.2.0 checking host system type... x86_64-apple-darwin11.2.0 checking target system type...x86_64-apple-darwin11.2.0 checking whether the C compiler works... noconfigure: error: in `/Users/myuser/.rvm/src/ruby-1.9.3-p0':configure: error: C compiler cannot create executables See `config.log' for more details",How can I install Ruby 1.9.3 in Mac OS X Lion?
Reading in CSV files smaller than 10K with Ruby 1.9.2 p290," The following code snippet works fine for CSV file sizes larger than 10 K. This is reading the the CSV file stored in Amazon S3 using Paperclip gem.If the file size is smaller than 10 K however, I get the following error:ActionView::Template::Error (can't convert StringIO into String):I googled and found the following post:http://adayinthepit.com/?p=269So I tried to use the fastercsv gem, when I ran my program again, here is the error that I get:ActionView::Template::Error (Please switch to Ruby 1.9's standard CSV library. It's FasterCSV plus support for Ruby 1.9's m17n encoding engine.):Looks like it is a Catch-22. How can I process files smaller than 10 K in ruby 1.9.2 p290?Please advise.Thanks.Bharat <code>  lines = CSV.read(open(resource.csv(:original)))",Reading in CSV files smaller than 10K from S3 with Ruby 1.9.2 p290
How can I use a named scope in my model against a list of items (not just one)?," I know that I can do a query for recent books based on an array as inscope :recent_books, lambda {|since_dt| {:conditions=>{:created_at >= since_dt}}}but how can I do a similar query when I have an array of items, e.g. what if I want to know if there any records that match the dates in an array of [date1, date2, date3, etc.]I think there must be a collect/inject/select/map y method that'll do it but I am not sure which from reading them. <code> ",How can I use a named scope in my model against an array of items?
Ruby On Rails 3.1 - Ubuntu 11.10 - Javascript : weird behavior," Big Update: As I finally found the real solution, I also discovered the real problem. As I wrote down here a lot of useless information, considering the real problem, I'm making a huge update of the question so that other people can find easily what's going on and can see the solution. The Problem: It's because of the assets pipeline of Rails 3.1Actually... It's an easy one: the assets were rendered twice in development-environment. Doing lot of investigations shew me that my Rails 3.1 server was rendering the assets from both the ""app/assets"" and ""public/assets"" folders. So, I had every .js and .css files duplicated, which was breaking all my javascript animations (yeah... binding twice the same event and handler to the same element is not what you want... normally). And if the problem appeared all of a sudden, that was because I had to run ""rake assets:precompile"" to deploy my application. Since that, when my application was running in development, the server was rendering the static precompiled assets and the dynamic precompiled assets. The solution (there's now a better one few lines below) - but you can still read itFirst one: I just had to delete all the precompiled assets from my public folder. Better one: Add config.serve_static_assets = false to development.rb which will prevent loading files from /public/assets. Also, don't forget to reset your browser cache. [Edit: July 20th 2012]Advanced one: I recently had a new problem because of those static assets. You know, when you use paperclip or some other gem and they add your images in your public folder in some system sub-folder because it's better if you want to deploy your application using capistrano. Well, that's great but! As we added config.serve_static_assets=false, those images aren't rendered in development and that's bad if you want to do some css on them. So! What to do then?Well in fact you'll have to turn on static assets in development like so: Then to prevent rails from rendering your other assets twice (the precompiled ones), just do this command: It's the opposite of rake assets:precompile and will clean your public/assets folder so that Rails won't render your assets twice. Of course you'll still have to clean your browser cache and clean your assets each time you precompiled them.[Edit: November 18th 2013] - From @idejuan answerAnother solution:You can add this line: config.assets.prefix = '/dev/assets'To development.rb, where the prefix can be whatever you want. Scripts will not load twice anymore, and images in /public/system will be read! But be carefull as it changes the path to your ""static"" assets... if you require assets from a gem, it might not load them properly in development...[End edit]The remaining question with answer!Well, why my development application was rendering static precompiled assets? In fact if you precompile your assets localy, rails render assets from the public folder AND from the assets folder in development and test environment by default. Normally assets from the public folder should overwrite those from the assets folder, but it's not the case and even if it does, we would lost the benefits of the ""debug_mode"" as we would have to precompile assets each time. So... Assets are rendered twice when precompiled locally in development and test environment. So, by adding ""config.serve_static_assets = false"" to your development.rb file, you somehow overwrite the default line that telling Rails to look in your public folder for assets. I hope they'll do something cleaner one day about locally precompiled assets.Thanks to the ones who helped me for my investigations :). Kulgar.  <code>  # Expands the lines which load the assetsconfig.assets.debug = trueconfig.serve_static_assets = true rake assets:clean",Ruby On Rails 3.1 - assets pipeline - assets rendered twice
Ruby On Rails 3.1 - last update - Javascript : weird behavior," Big Update: As I finally found the real solution, I also discovered the real problem. As I wrote down here a lot of useless information, considering the real problem, I'm making a huge update of the question so that other people can find easily what's going on and can see the solution. The Problem: It's because of the assets pipeline of Rails 3.1Actually... It's an easy one: the assets were rendered twice in development-environment. Doing lot of investigations shew me that my Rails 3.1 server was rendering the assets from both the ""app/assets"" and ""public/assets"" folders. So, I had every .js and .css files duplicated, which was breaking all my javascript animations (yeah... binding twice the same event and handler to the same element is not what you want... normally). And if the problem appeared all of a sudden, that was because I had to run ""rake assets:precompile"" to deploy my application. Since that, when my application was running in development, the server was rendering the static precompiled assets and the dynamic precompiled assets. The solution (there's now a better one few lines below) - but you can still read itFirst one: I just had to delete all the precompiled assets from my public folder. Better one: Add config.serve_static_assets = false to development.rb which will prevent loading files from /public/assets. Also, don't forget to reset your browser cache. [Edit: July 20th 2012]Advanced one: I recently had a new problem because of those static assets. You know, when you use paperclip or some other gem and they add your images in your public folder in some system sub-folder because it's better if you want to deploy your application using capistrano. Well, that's great but! As we added config.serve_static_assets=false, those images aren't rendered in development and that's bad if you want to do some css on them. So! What to do then?Well in fact you'll have to turn on static assets in development like so: Then to prevent rails from rendering your other assets twice (the precompiled ones), just do this command: It's the opposite of rake assets:precompile and will clean your public/assets folder so that Rails won't render your assets twice. Of course you'll still have to clean your browser cache and clean your assets each time you precompiled them.[Edit: November 18th 2013] - From @idejuan answerAnother solution:You can add this line: config.assets.prefix = '/dev/assets'To development.rb, where the prefix can be whatever you want. Scripts will not load twice anymore, and images in /public/system will be read! But be carefull as it changes the path to your ""static"" assets... if you require assets from a gem, it might not load them properly in development...[End edit]The remaining question with answer!Well, why my development application was rendering static precompiled assets? In fact if you precompile your assets localy, rails render assets from the public folder AND from the assets folder in development and test environment by default. Normally assets from the public folder should overwrite those from the assets folder, but it's not the case and even if it does, we would lost the benefits of the ""debug_mode"" as we would have to precompile assets each time. So... Assets are rendered twice when precompiled locally in development and test environment. So, by adding ""config.serve_static_assets = false"" to your development.rb file, you somehow overwrite the default line that telling Rails to look in your public folder for assets. I hope they'll do something cleaner one day about locally precompiled assets.Thanks to the ones who helped me for my investigations :). Kulgar.  <code>  # Expands the lines which load the assetsconfig.assets.debug = trueconfig.serve_static_assets = true rake assets:clean",Ruby On Rails 3.1 - assets pipeline - assets rendered twice
A better way to convert a string date from 17-Nov-2011 to 11/17/11?," I have this code that converts an array of date strings from a format of 17-Nov-2011 to 11/17/11: Is there a better, possibly built in, way to make this conversion with Ruby? I am learning Ruby so any other approach to this would be much appreciated. <code>  def date_convert dates months = { 'Jan' => 1, 'Feb' => 2, 'Mar' => 3, 'Apr' => 4, 'May' => 5, 'Jun' => 6, 'Jul' => 7, 'Aug' => 8, 'Sep' => 9, 'Oct' => 10, 'Nov' => 11, 'Dec' => 12 } new_dates = [] dates.each do |date| date_split = date.split('-') month = months[date_split[1]] day = date_split[0] year = date_split[2][-2, 2] new_dates.push (""#{month}/#{day}/#{year}"") end new_datesend","Convert a string date format from ""17-Nov-2011"" to ""11/17/11"""
Is there a better way to convert a string date from 17-Nov-2011 to 11/17/11?," I have this code that converts an array of date strings from a format of 17-Nov-2011 to 11/17/11: Is there a better, possibly built in, way to make this conversion with Ruby? I am learning Ruby so any other approach to this would be much appreciated. <code>  def date_convert dates months = { 'Jan' => 1, 'Feb' => 2, 'Mar' => 3, 'Apr' => 4, 'May' => 5, 'Jun' => 6, 'Jul' => 7, 'Aug' => 8, 'Sep' => 9, 'Oct' => 10, 'Nov' => 11, 'Dec' => 12 } new_dates = [] dates.each do |date| date_split = date.split('-') month = months[date_split[1]] day = date_split[0] year = date_split[2][-2, 2] new_dates.push (""#{month}/#{day}/#{year}"") end new_datesend","Convert a string date format from ""17-Nov-2011"" to ""11/17/11"""
how to get first line from string in Ruby?," I have a string variable in Ruby as follows: the output of the code above is: I need to get only the first line from the string variable (e.g. my::FIrst::Line).How can I get it? <code>  puts $varString.classputs ""##########""puts $varString String ##########my::FIrst::Line this id second line sjdf kjsdfh jsdf djsf sdk fxdj",How to get first line from String in Ruby?
How to act differently on first iteration in a Ruby loop?, I always use a counter to check for the first item (i==0) in a loop: Is there a more elegant way to do this (perhaps a method)?  <code>  i = 0my_array.each do |item| if i==0 # do something with the first item end # common stuff i += 1end,How to act differently on the first iteration in a Ruby loop?
why use symbols as hash keys in Ruby?, A lot of times people use symbols as keys in a Ruby hash.What's the advantage over using a string?E.g.: vs. <code>  hash[:name] hash['name'],Why use symbols as hash keys in Ruby?
Why doesn't the ruby gem RestClient respect content_type on post?," For instance, in the RestClient console: This does not send application/json as the content type. Instead I see: I was able to trace the change to restclient/payload.rb: Replacing super.merge with super causes the content type to be respected, but obviously that's not a real solution. Does anyone know the proper way to fix this? Thanks. <code>  RestClient.post 'http://localhost:5001', {:a => 'b'}, :content_type => 'application/json' Content-Type: application/x-www-form-urlencoded class UrlEncoded < Base ... def headers super.merge({'Content-Type' => 'application/x-www-form-urlencoded'}) endend",How do I make Ruby's RestClient gem respect content_type on post?
Is my understanding correct?, I want to understand a piece of code I found in Google: In the above code i is an integer. As per my understanding i is being converted into a string. Is that true? <code>  i.to_s,What is the meaning of i.to_s in Ruby?
Nokogiri HTML parsing xPath or css parsing faster?, I would like to know if Nokogiri XPath or CSS parsing works faster with HTML files. How is the speed different? <code> ,XPath or CSS parsing faster (for Nokogiri on HTML files)?
How can I print an XML document without the <?xml ...> line at the top using Nokogiri?," I am just trying to find out how to to a to_xml with a Nokogiri::XML::Document or a Nokogiri::XML::DocumentFragment.Alternatively, I would like to use xPath on a Nokogiri::XML::DocumentFragment. I was unable to ascertain how to do that, however I am successfully parsing a Nokogiri::XML::Document.I am later including a parsed and modified DocumentFragment into another piece of XML, but I'm really getting bitten on what I thought would be some really simple things.Like trying to do a to_xml on a doc or docfrag, and NOT INCLUDING that xml line at the top. Why so hard? <code> ",Print an XML document without the XML header line at the top
How can I print an XML document without the XML header line at the top using Nokogiri?," I am just trying to find out how to to a to_xml with a Nokogiri::XML::Document or a Nokogiri::XML::DocumentFragment.Alternatively, I would like to use xPath on a Nokogiri::XML::DocumentFragment. I was unable to ascertain how to do that, however I am successfully parsing a Nokogiri::XML::Document.I am later including a parsed and modified DocumentFragment into another piece of XML, but I'm really getting bitten on what I thought would be some really simple things.Like trying to do a to_xml on a doc or docfrag, and NOT INCLUDING that xml line at the top. Why so hard? <code> ",Print an XML document without the XML header line at the top
"How does the Sinatra app run within its web host (rack, webrick etc)"," I have been having an issue with missing instances and nilClass errors when calling my routes. After delving around within the source it seems like the generate_method call basically creates a new method using the block of the initial method. So in the above method there could very well be a local variable within that class called some_local_instance, however when the rote is actually evaluated it has no context as to where the method was defined, so it will fail.The reason I ask is because as part of my script I have external classes which are loaded when Sinatra is loaded which register routes and when those routes are called I need to access some local variables on these classes. An example would be: Forgive any spelling/syntax mistakes this is just a quick example, but as you can see a class registers routes and when that route is hit returns some value generated by an instance of the calculator it took when it was instantiated.Problem I have is that in this example when I try and run the /add route it tells me that @calculator is a nilClass, and I believe it to be down to the way that Sinatra just takes the block of code without context. This seems fine for any simple template rendering, but if you need to do anything more fancy, or want to keep your code modular by not using statics and singletons you do not seem to have any way around this... Are my assumptions correct here? and if so is there any way to keep context as it feels like it is forcing me to write bad and hard to maintain code if I have to write everything as statics and singletons to interact from a route.== Edit ==Have restructured the question and content to more accurately reflect the actual problem, now that I have a firmer understanding of the library. <code>  get ""/"" do @some_local_instance.do_something()end class SomeRouteClass def initialize(sinatra, calculator) @calculator = calculator @sinatra = sinatra end def setup_routes @sinatra.get ""/add"" do return @calculator.add(1,1) end endendclass Calculator def add(a,b) return a+b; endendsinatra = Sinatra.newcalculator = Calculator.newrouting_class = SomeRouteClass.new(sinatra, calculator)routing_class.setup_routessinatra.run!",Working around the lack of context in Sinatra's route methods
Cucumber/Capybara search for text within table row," I'm trying to search within a single table row for my cucumber test.I have each row formatted like this: And I am looking to search within a row with a given title, and check the goalIs there a simple way to accomplish this? <code>  %tr %td= title %td= complete %td= goal",Cucumber - Capybara search for text within table row
how does rake migrate actually work," I've just really started with Ruby and Rails, and one of the things that I find myself really enjoying is the conventions it makes you use.I want to mimic that behavior in my own non-Ruby projects. My question is how does it actually work? I know I can look through the Rails code, but I'm not that far enough in my understanding to know what's going on in it.I know that it takes a baseline script and then runs update schema changes against it. But how does it know what version it's on? How would I mimic that in another framework / database? <code> ",How does rake db::migrate actually work
How does rake migrate actually work," I've just really started with Ruby and Rails, and one of the things that I find myself really enjoying is the conventions it makes you use.I want to mimic that behavior in my own non-Ruby projects. My question is how does it actually work? I know I can look through the Rails code, but I'm not that far enough in my understanding to know what's going on in it.I know that it takes a baseline script and then runs update schema changes against it. But how does it know what version it's on? How would I mimic that in another framework / database? <code> ",How does rake db::migrate actually work
how to find substring in ruby?," I have a string variable with content: In the string I have to find a sub-string: How can I find it? I need to determine whether the sub-string is present or not. <code>  varMessage = ""hi/thsid/sdfhsjdf/dfjsd/sdjfsdn\n"" ""/my/name/is/balaji.so\n"" ""call::myFunction(int const&)\n"" ""void::secondFunction(char const&)\n"" . . . ""this/is/last/line/liobrary.so"" ""hi/thsid/sdfhsjdf/dfjsd/sdjfsdn\n""""/my/name/is/balaji.so\n""""call::myFunction(int const&)\n""",How to check whether a string contains a substring in Ruby
How to find substring in ruby?," I have a string variable with content: In the string I have to find a sub-string: How can I find it? I need to determine whether the sub-string is present or not. <code>  varMessage = ""hi/thsid/sdfhsjdf/dfjsd/sdjfsdn\n"" ""/my/name/is/balaji.so\n"" ""call::myFunction(int const&)\n"" ""void::secondFunction(char const&)\n"" . . . ""this/is/last/line/liobrary.so"" ""hi/thsid/sdfhsjdf/dfjsd/sdjfsdn\n""""/my/name/is/balaji.so\n""""call::myFunction(int const&)\n""",How to check whether a string contains a substring in Ruby
How to check whether a string contains a substring in Ruby?," I have a string variable with content: In the string I have to find a sub-string: How can I find it? I need to determine whether the sub-string is present or not. <code>  varMessage = ""hi/thsid/sdfhsjdf/dfjsd/sdjfsdn\n"" ""/my/name/is/balaji.so\n"" ""call::myFunction(int const&)\n"" ""void::secondFunction(char const&)\n"" . . . ""this/is/last/line/liobrary.so"" ""hi/thsid/sdfhsjdf/dfjsd/sdjfsdn\n""""/my/name/is/balaji.so\n""""call::myFunction(int const&)\n""",How to check whether a string contains a substring in Ruby
Rails - how to add to the model timestamps?," I have an exist model (and table) with these columns: id, name, city. In this table are data and I would like to this table add the columns created_at and updated_at - could anyone give me a help, how to do it? I mean - if I create a model, so these two columns are created automatically and the time informations are inserted always automatically, when I save there something.Is possible now to add these two columns with automatic inserting time-data? <code> ",Rails - how to add timestamps to a model?
Ruby \' in a string," I am using Ruby 1.8.7, trying to generate a string with the \' characteres, in order to create a script for running in MySQL. The result should be like this: But i can't get just one backslash in a ruby string. Using the following code: I got the following string: And with: I got this string: <code>  INSERT INTO table (name, description) values ('Joana d\'Arc', '') string = ""INSERT INTO table (name, description) values ('Joana d\\'Arc', '')"" INSERT INTO table (name, description) values ('Joana d\\'Arc', '') string = ""INSERT INTO table (name, description) values ('Joana d\'Arc', '')"" INSERT INTO table (name, description) values ('Joana d'Arc', '')","\' (backslash, single quote) in a Ruby string"
Does there exist a LWP like module for HTML parsing in Ruby?," In Perl there is an LWP module: The libwww-perl collection is a set of Perl modules which provides a simple and consistent application programming interface (API) to the World-Wide Web. The main focus of the library is to provide classes and functions that allow you to write WWW clients. The library also contain modules that are of more general use and even classes that help you implement simple HTTP servers.Is there a similar module (gem) for Ruby?UpdateHere is an example of a function I have made that extracts URL's from a specific website. <code>  use LWP::UserAgent;use HTML::TreeBuilder 3;use HTML::TokeParser;sub get_gallery_urls { my $url = shift; my $ua = LWP::UserAgent->new; $ua->agent(""$0/0.1 "" . $ua->agent); $ua->agent(""Mozilla/8.0""); my $req = new HTTP::Request 'GET' => ""$url""; $req->header('Accept' => 'text/html'); # send request $response_u = $ua->request($req); die ""Error: "", $response_u->status_line unless $response_u->is_success; my $root = HTML::TreeBuilder->new; $root->parse($response_u->content); my @gu = $root->find_by_attribute(""id"", ""thumbnails""); my %urls = (); foreach my $g (@gu) { my @as = $g->find_by_tag_name('a'); foreach $a (@as) { my $u = $a->attr(""href""); if ($u =~ /^\//) { $urls{""http://example.com"".""$u""} = 1; } } } return %urls;}",Is there a module like Perl's LWP for Ruby?
rails: how to unit test a json controller?," This is my action: This is my test: I want to add another assertion that the emitted JSON contains some value. How can I do it in a controller unit-test, not via parsing the view result? <code>  def my_action str = ... # get json str somehow render :json => strend test ""my test"" do post(:my_action, {'param' => ""value""} assert_response :successend",How to unit-test a JSON controller?
"ruby on rails, creating new object, should I use create or new method for object that doesn't involve a form?"," I am trying to create an object via an API, i.e. no forms are required, should I be doing MyModel.new(:name => params[:name]) or MyModel.create(:name => params[:name]) ?Assume I have resources : my_models in routesI checked and I see that methods can use the params hash ok. <code> ","ruby on rails, creating new object, use create or new method?"
"ruby on rails, creating new object, use create or new method for object that doesn't involve a form?"," I am trying to create an object via an API, i.e. no forms are required, should I be doing MyModel.new(:name => params[:name]) or MyModel.create(:name => params[:name]) ?Assume I have resources : my_models in routesI checked and I see that methods can use the params hash ok. <code> ","ruby on rails, creating new object, use create or new method?"
Using gem install on ubuntu, I'm trying to get started with ruby and Watir-webdriver for some test automation. sudo apt-get install ruby rubygemssudo gem install watir-webdriverWhenever I gem install I'm getting these errors like : <code>  [/usr/lib/ruby/gems/1.8/specifications/selenium-webdriver-2.13.0.gemspec] isn't a Gem::Specification (NilClass instead).ERROR: While executing gem ... (NoMethodError) undefined method `spec' for nil:NilClass,ERROR: While executing gem ... (NoMethodError) undefined method `spec' for nil:NilClass
Using gem install (for watir-webdriver) on Ubuntu, I'm trying to get started with ruby and Watir-webdriver for some test automation. sudo apt-get install ruby rubygemssudo gem install watir-webdriverWhenever I gem install I'm getting these errors like : <code>  [/usr/lib/ruby/gems/1.8/specifications/selenium-webdriver-2.13.0.gemspec] isn't a Gem::Specification (NilClass instead).ERROR: While executing gem ... (NoMethodError) undefined method `spec' for nil:NilClass,ERROR: While executing gem ... (NoMethodError) undefined method `spec' for nil:NilClass
looking for rack app structure and config.ru specs," This will probably make me look lame but still -- I can't find any formal description for either a typical rack application structure (folders/files, like public, config.ru), or the config.ru file contents.In the Java world there's a clear definition of a web application and the parts it comprised of (WEB-INF, META-INF web.xml).Is there a specification of a Rack web application at all? Or is it something vague like Ruby itself.I expected to find that info somewhere on the http://rack.rubyforge.org/ site but I couldn't. Please point me in the right direction.Although I marked this question as answered it is worth mentioning that the question itself in not very legitimate. The app structure is driven by the actual webserver/plugin combination in use, like Apache/Passenger, and not Rack. <code> ",Looking for rack app structure and config.ru specs?
Which Ruby client for neo4j REST API," I wonder what the REST API clients are available for using from Ruby (not JRuby, so native bindings are not an option)?Ideally, I would want the API similar to the neo4j gem or ActiveRecord (validations, migrations, observers etc).Currently available (REST) tooling doesn't even come close to what we have, for example, in ActiveRecrod:neograhy - just plain REST API. Nothing to do with models etc.neology - is just a wrapper over neography and isn't a full featured ActiveModel.architect4r - conforms to ActiveModel, but provides only one way to query data (Cypher language), also no indexes support.I like the code of architect4r a little bit more (primarily because it uses ActiveModel).But neology seems to be much more pragmatic choice as it already is using neography under the hood.The choice is pretty small and tough.Could you please tell when one should be used rather than the other?Also any recommendations that would help me to decide on the gem are very welcome.Thanks. <code> ",Which Ruby REST API client for neo4j?
"How do I get a counter fo a rails 3 ""each do"" loop?"," How do I add a counter to an .each loop? Is there any easy way of doing this?I tried the below, but it does not seem to work. <code>  <% @album.each do |e| %> <%= e %> #my_counter_does_not_work :) <%= link_to e.name, :controller => ""images"", :action => ""album"", :album_id => e.id, :album_name => e.name %><% end %>","How do I get a counter for an ""each"" loop in Rails?"
Rails: Render a view of another controller," What I want to do is have 2 different controllers, client and test_client. The client controller is already built and I want to create a test_client controller that i can use to play around with the UI of the client and adjust it as needed. I am mainly trying to get around the validation i have built into the client and its dependence on an admin controller that loads the data.so i want the test_client controller to load a sample data set and then render the client controller's index view so i can adjust the clients UI. That is all.I tried this in the test_clients index method: but i get an error because it cannot find the client partials as it is looking in the current controllers view for them...So I have looked into this already and most people say that you should never make such a call but i think that this case is a reasonable usage...I just need to figure out how to get it to work. <code>  class TestClient def index render :template => 'client/index' endend",Render a view of another controller
Rails: simple_form for has_many with additional attributes?," How can I generate form fields for a has_many :through association that has additional attributes?The has_many :through relationship has an additional column called weight.Here's the migration file for the join table: The models look like this: For the sake of simplicity, Widget and User only have one field of their own called name, ergo User.first.name and Widget.first.nameQuestions:How would I append a dropdown selection for Widgets with the corresponding weight to the User create/edit form?How can I dynamically add additional Widget forms to Users or User forms to Widgets to easily add or remove these relationships? The nested_form_for gem seems to be the perfect solution but I haven't been able to get it working.Apart from the models and the form partials, are there any changes that need to be made to my controller?Quick note.. I'm not interested in creating new Widgets in the User form or new Users in the Widget form, I only want the ability to select from existing objects. I'm running Rails 3.1 and simple_form 2.0.0dev for generating my forms. <code>  create_table :users_widgets do |t| t.integer :user_id t.integer :widget_id t.integer :weight t.timestampsend User has_many :widgets, :through => :users_widgets, :class_name => 'Widget', :source => :widget has_many :users_widgets accepts_nested_attributes_for :widgets # not sure if this is necessaryWidget has_many :users, :through => :users_widgets, :class_name => 'User', :source => :user has_many :users_widgets accepts_nested_attributes_for :users # not sure if this is necessaryUsersWidget belongs_to :user belongs_to :widget",Rails forms for has_many through association with additional attributes?
remove duplicate elements from array in ruby," I have a Ruby array which contains duplicate elements. How can I remove all the duplicate elements from this array while retaining all unique elements without using for-loops and iteration? <code>  array = [1,2,2,1,4,4,5,6,7,8,5,6]",Remove duplicate elements from array in Ruby
Select array element which includes a specific string," I would like select the element(s) from the array which include(s) the word 'good' and set the string to a new variable. How could I do this?  <code>  array = [""Spam is bad"", ""Ham is good""]",Change all array elements which include a specific string
Replace words in string - ruby," I have a string in Ruby: How can I replace any one word in this sentence easily without using complex code or a loop? <code>  sentence = ""My name is Robert""",Replace words in a string - Ruby
Copy files using file methods in ruby, I want to copy the contents of one file to another using Ruby's file methods. How can I do it using a simple Ruby program using file methods? <code> ,How can I copy the contents of one file to another using Ruby's file methods?
Ruby - check if file contains string with if statement," So I found this question on here, but I'm having an issue with the output and how to handle it with an if statement. This is what I have, but it's always saying that it's true even if the word monitor does not exist in the file Should it be something like == ""nil""? I'm quite new to ruby and not sure of what the outputs would be. <code>  if File.readlines(""testfile.txt"").grep(/monitor/) do somethingend",Check if file contains string
Ruby method to find which quarter a date belongs to," I have a date and i want to find out the months of that particular quarter.How can i have this done in ruby in the easiest possible way? I mean if the date i give is 27-04-2011, then the result i must get is April, May,June as string or int like 4,5,6 for April to June. <code> ",Ruby method to get the months of quarters a given date belongs to
Merge ruby hash," How can I merge these two hashes: To get: <code>  {:car => {:color => ""red""}}{:car => {:speed => ""100mph""}} {:car => {:color => ""red"", :speed => ""100mph""}}",How to merge Ruby hashes
Why does Ruby NOT treat this as a syntax error?," If I do this: it fails with a syntax error, as I expect. But if I do this: the code is executed, and it throws away the first condition and returns the result of the second.Is this considered a bug or a feature? <code>  (false true) (false true)",Why is this not a syntax error?
Why do my rspec test run slower in Ruby 1.9.2 than 1.8.7?," I'm using spork to test a Sinatra application and with Ruby 1.9.2 the tests run in about 3.5 seconds but in Ruby 1.8.7 they average 1.2 seconds. I did try Ruby 1.9.3 and even JRuby but they had some errors with the gems I'm using. Is there a way to bring Ruby 1.9.2's rspec performance up to 1.8.7's level?My Gemfile: spec_helper.rb: thanks! <code>  source :rubygemsgem 'sinatra', '1.3.1'gem 'thin', '1.3.1'gem 'haml', '3.1.4'gem 'datamapper', '1.2.0'gem 'dm-postgres-adapter', '1.2.0'gem 'carrierwave', '0.5.8'gem 'carrierwave-datamapper', '0.2.0'group :test do gem ""dm-sqlite-adapter"" gem ""spork"" gem ""rspec"" gem ""rack-test""end require 'rubygems'require 'spork'require 'sinatra'require 'rack/test'require 'rspec'require File.join(File.dirname(__FILE__), '..', 'app.rb')require File.join(File.dirname(__FILE__), '..', 'model/model.rb')Spork.prefork do set :environment, :test set :files, ""test_files""endSpork.each_run do RSpec.configure do |config| config.before(:each) { DataMapper.auto_migrate! } config.after(:all) do FileUtils.rm_rf(Dir[""#{settings.root}/public/test_files""]) end endend",Why do my rspec tests run slower in Ruby 1.9.2 than 1.8.7?
ruby script using rbenv in cron," I'm trying to run a Ruby script using rbenv with cron.I know that I need to load rbenv in order to have the right Ruby version loaded.I've tried options like this:*/10 * * * * /bin/bash -c 'source $HOME/.bashrc; cd /data/app; ruby -v' >> /tmp/logfile.txt 2>&1but as the session is not interactive, I'm not having the right Ruby version.I've found example like this:15 14 1 * * export BASH_ENV=/path/to/environment && /full/path/to/bash -c '/full/path/to/rvm_script.rb'It didn't work neither. Then I wrote a loader, which only load rbenv in the current shell but it doesn't work.*/1 * * * * /bin/bash -c '$HOME/.rbenv/loader.sh ; cd /data/app/; ruby -v ' >> /tmp/logfile.txt 2>&1Now I'm searching for another way to load it ... any ideas? <code> ",How to run a Ruby script using rbenv with cron
What is the :domain symbol referring to when configuring action_mailer?," I have two questions about configuring action mailerDo you know what the :domain symbol is referring to? Is it talking about the domain name of the application? Is it talking about the mail server domain? I saw baci.lindsaar.net written in on a few sites that I googled, but I don't know why people are using that particular domain. List itemI also don't know what the :enable_starttls_auto => true is doingupdate:Ok, so I found this in the docs in reference to question 2:enable_starttls_auto - When set to true, detects if STARTTLS is enabled in your SMTP server and starts to use itDidn't know what STARTTLS was, so I looked it up here http://en.wikipedia.org/wiki/STARTTLSupdate:I found this in the docs, but still don't understand:domain - If you need to specify a HELO domain, you can do it here.so I guess the new question is: what is a HELO domain? can't seem to find a clear answer.  <code>  Appname::Application.configure do config.action_mailer.delivery_method = :smtp#typical smtp_settings for gmail accountconfig.action_mailer.smtp_settings = { :address => ""smtp.gmail.com"", :port => 587, :domain => ""domain.of.sender.net"", :authentication => ""plain"" :user_name => ""spencecooley"" :password => ""secret"" :enable_starttls_auto => true}end",What is the :domain symbol referring to when configuring action mailer?
Replacing regex matches in place with ruby," I want to transform the following text into In other words I want to find all the image paths that are enclosed between brackets (the text is in Markdown syntax) and replace them with other paths. The string containing the new path is returned by a separate real_path function.I would like to do this using String#gsub in its block version. Currently my code looks like this: The problem with this regex is that it will match ![foto](foto.jpeg) instead of just foto.jpeg. I also tried other regexen like (?>\!\[.*?\]\()(.*?)(?>\)) but to no avail.My current workaround is to split the path and reassemble it later.Is there a Ruby regex that matches only the path inside the brackets and not all the contextual required characters?Post-answers update: The main problem here is that Ruby's regexen have no way to specify zero-width lookbehinds. The most generic solution is to group what the part of regexp before and the one after the real matching part, i.e. /(pre)(matching-part)(post)/, and reconstruct the full string afterwards.In this case the solution would be <code>  This is a ![foto](foto.jpeg), here is another ![foto](foto.png) This is a ![foto](/folder1/foto.jpeg), here is another ![foto](/folder2/foto.png) re = /!\[.*?\]\((.*?)\)/rel_content = content.gsub(re) do |path| real_path(path)end re = /(!\[.*?\]\()(.*?)(\))/rel_content = content.gsub(re) do $1 + real_path($2) + $3end",Replacing partial regex matches in place with Ruby
Sinatra : Global rescue + logging exceptions," How do I specify a global rescue in case of an exception, and if you use Sinatra for an API or application, how do you handle logging? <code> ",Global rescue and logging exceptions in Sinatra
Error installing mysql2 gem on Debian Squeez," I got this ""popular"" error while installing mysql2 gem on Debian Squeeze: There are a lot of search results at stack overflow but none of them would fix my Problem. are installed via dot deb repo. mysql-server is installed, too.The following files related to libmysqlclient could be found at /usr/lib <code>  gem install mysql2Building native extensions. This could take a while...ERROR: Error installing mysql2: ERROR: Failed to build gem native extension. /usr/local/rvm/rubies/ruby-1.9.2-p290/bin/ruby extconf.rbchecking for rb_thread_blocking_region()... yeschecking for rb_wait_for_single_fd()... nochecking for mysql.h... yeschecking for errmsg.h... yeschecking for mysqld_error.h... yescreating Makefilemakegcc -I. -I/usr/local/rvm/rubies/ruby-1.9.2-p290/include/ruby-1.9.1/i686-linux -I/usr/local/rvm/rubies/ruby-1.9.2-p290/include/ruby-1.9.1/ruby/backward -I/usr/local/rvm/rubies/ruby-1.9.2-p290/include/ruby-1.9.1 -I. -DHAVE_RB_THREAD_BLOCKING_REGION -DHAVE_MYSQL_H -DHAVE_ERRMSG_H -DHAVE_MYSQLD_ERROR_H -D_FILE_OFFSET_BITS=64 -I/usr/include/mysql -DBIG_JOINS=1 -fno-strict-aliasing -g -fPIC -O3 -ggdb -Wextra -Wno-unused-parameter -Wno-parentheses -Wpointer-arith -Wwrite-strings -Wno-missing-field-initializers -Wno-long-long -fPIC -Wall -funroll-loops -o client.o -c client.cgcc -I. -I/usr/local/rvm/rubies/ruby-1.9.2-p290/include/ruby-1.9.1/i686-linux -I/usr/local/rvm/rubies/ruby-1.9.2-p290/include/ruby-1.9.1/ruby/backward -I/usr/local/rvm/rubies/ruby-1.9.2-p290/include/ruby-1.9.1 -I. -DHAVE_RB_THREAD_BLOCKING_REGION -DHAVE_MYSQL_H -DHAVE_ERRMSG_H -DHAVE_MYSQLD_ERROR_H -D_FILE_OFFSET_BITS=64 -I/usr/include/mysql -DBIG_JOINS=1 -fno-strict-aliasing -g -fPIC -O3 -ggdb -Wextra -Wno-unused-parameter -Wno-parentheses -Wpointer-arith -Wwrite-strings -Wno-missing-field-initializers -Wno-long-long -fPIC -Wall -funroll-loops -o mysql2_ext.o -c mysql2_ext.cgcc -I. -I/usr/local/rvm/rubies/ruby-1.9.2-p290/include/ruby-1.9.1/i686-linux -I/usr/local/rvm/rubies/ruby-1.9.2-p290/include/ruby-1.9.1/ruby/backward -I/usr/local/rvm/rubies/ruby-1.9.2-p290/include/ruby-1.9.1 -I. -DHAVE_RB_THREAD_BLOCKING_REGION -DHAVE_MYSQL_H -DHAVE_ERRMSG_H -DHAVE_MYSQLD_ERROR_H -D_FILE_OFFSET_BITS=64 -I/usr/include/mysql -DBIG_JOINS=1 -fno-strict-aliasing -g -fPIC -O3 -ggdb -Wextra -Wno-unused-parameter -Wno-parentheses -Wpointer-arith -Wwrite-strings -Wno-missing-field-initializers -Wno-long-long -fPIC -Wall -funroll-loops -o result.o -c result.cresult.c: In function rb_mysql_result_fetch_fields:result.c:381: warning: comparison between signed and unsigned integer expressionsgcc -shared -o mysql2.so client.o mysql2_ext.o result.o -L. -L/usr/local/rvm/rubies/ruby-1.9.2-p290/lib -Wl,-R/usr/local/rvm/rubies/ruby-1.9.2-p290/lib -L. -rdynamic -Wl,-export-dynamic -Wl,-rpath,/usr/lib -Wl,-R -Wl,/usr/local/rvm/rubies/ruby-1.9.2-p290/lib -L/usr/local/rvm/rubies/ruby-1.9.2-p290/lib -lruby -L/usr/lib -lmysqlclient_r -lpthread -lz -lm -lrt -lssl -lcrypto -ldl -lpthread -lrt -ldl -lcrypt -lm -lc/usr/bin/ld: cannot find -lmysqlclient_rcollect2: ld returned 1 exit statusmake: *** [mysql2.so] Error 1Gem files will remain installed in /usr/local/rvm/gems/ruby-1.9.2-p290/gems/mysql2-0.3.11 for inspection.Results logged to /usr/local/rvm/gems/ruby-1.9.2-p290/gems/mysql2-0.3.11/ext/mysql2/gem_make.out libmysqlclient-dev - MySQL database development fileslibmysqlclient18 - MySQL database client library /usr/lib/libmysqlclient.so.18/usr/lib/libmysqlclient_r/usr/lib/libmysqlclient.so/usr/lib/libmysqlclient.so.16.0.0/usr/lib/libmysqlclient.a/usr/lib/libmysqlclient_r.so.16/usr/lib/libmysqlclient.so.16/usr/lib/libmysqlclient.so.18.0.0/usr/lib/libmysqlclient_r.so.16.0.0",Error installing mysql2 gem on Debian Squeeze
Is this Ruby lambda syntax? And what do you call this syntax name?, What do you call the -> operator as in the following? Aren't the following snippets equivalent?  <code>  ->(...) do ...end succ = ->(x) {x + 1}succ = lambda {|x| x + 1},What do you call Ruby's -> operator?
What do you call the -> operator?, What do you call the -> operator as in the following? Aren't the following snippets equivalent?  <code>  ->(...) do ...end succ = ->(x) {x + 1}succ = lambda {|x| x + 1},What do you call Ruby's -> operator?
What do you call the -> operator in Ruby?, What do you call the -> operator as in the following? Aren't the following snippets equivalent?  <code>  ->(...) do ...end succ = ->(x) {x + 1}succ = lambda {|x| x + 1},What do you call Ruby's -> operator?
Ruby: Nokogiri - example tree, I am trying to understand Nokogiri. Does anyone have a link to a basic example of Nokogiri parse/scrape showing the resultant tree. Think it would really help my understanding. <code> ,What are some examples of using Nokogiri?
how parse consecutive tags with nokorigi," I have HTML code like this: My code does not work. Show all the <dt> tags firsts and then the <dd> tags and I need ""label: value"" <code>  <div id=""first""><dt>Label1</dt><dd>Value1</dd><dt>Label2</dt><dd>Value2</dd>...</div> doc.css(""first"").each do |item| label = item.css(""dt"") value = item.css(""dd"")end",How to parse consecutive tags with Nokogiri?
How to parse consecutive tags with nokogiri?," I have HTML code like this: My code does not work. Show all the <dt> tags firsts and then the <dd> tags and I need ""label: value"" <code>  <div id=""first""><dt>Label1</dt><dd>Value1</dd><dt>Label2</dt><dd>Value2</dd>...</div> doc.css(""first"").each do |item| label = item.css(""dt"") value = item.css(""dd"")end",How to parse consecutive tags with Nokogiri?
Using fixture finder herlpers within Rails console," I frequently find that I'd like to be able to use the test fixture finders (eg. users(:david)) from the Rails console. Is there a specific Rails module I can load at the console prompt, or a gem I can install, that would make these available?My queries of the Google Oracle have not turned anything up, so I'm not holding my breath, but I hope somebody here on SO knows a secret and is willing to share. <code> ",Using fixture finder helpers within Rails console
Match same substring twice in a string (Ruby)," I have the string ""111221"" and want to match all sets of consecutive equal integers: [""111"", ""22"", ""1""].I know that there is a special regex thingy to do that but I can't remember and I'm terrible at Googling. <code> ",Match sequences of consecutive characters in a string
'||' and '=' combined operator in Ruby," Could some one explain to me the meaning of the following Ruby code? (I saw this code snippet in one guy's project): What is the difference between the above code and the following code? ----------update--------------Ok, I got the meaning of ||= operator after read @Dave's explanation, my next question is if both method_2, method_3 and method_4 return a value, which one's value will be assigned to car? (I suppose car is nil initially) <code>  car ||= (method_1 || method_2 || method_3 || method_4) car = method_1 || method_2 || method_3 || method_4",'||=' operator in Ruby
'||=' operator in Ruby," Could some one explain to me the meaning of the following Ruby code? (I saw this code snippet in one guy's project): What is the difference between the above code and the following code? ----------update--------------Ok, I got the meaning of ||= operator after read @Dave's explanation, my next question is if both method_2, method_3 and method_4 return a value, which one's value will be assigned to car? (I suppose car is nil initially) <code>  car ||= (method_1 || method_2 || method_3 || method_4) car = method_1 || method_2 || method_3 || method_4",'||=' operator in Ruby
"How to check if exist a children node in Nokogiri? I retrieve ""method missing"", how can i avoid it?"," In the second node, I don't have a <two> node. If I use this: root.channel.two obviously I get the error ""Method missing"". How can I check to avoid this error? What is the conditional statement I would use? <code>  <root> <channel> <one>example</one> <two>example2</two> </channel> <channel> <one>example</one> </channel></root>",Test if a child node exists (without getting NoMethodError)
"How to check if exist a children node in Nokogiri? I get ""method missing"", how can I avoid it?"," In the second node, I don't have a <two> node. If I use this: root.channel.two obviously I get the error ""Method missing"". How can I check to avoid this error? What is the conditional statement I would use? <code>  <root> <channel> <one>example</one> <two>example2</two> </channel> <channel> <one>example</one> </channel></root>",Test if a child node exists (without getting NoMethodError)
How can I check a word is already all uppercase in Ruby?, I want to be able to check if a word is already all uppercase. And it might also include numbers.Example: <code>  GO234 => yesGo234 => no,How can I check a word is already all uppercase?
Fastest wa to find 2 missing numbers in an array," This question exist only because of pure curiosity. Not a homework.Find the fastest way to find two missing number in an array 1..nSo, In a related post: Quickest way to find missing number in an array of numbersI found out that you can do this pretty quickly by summing up and substracting total. but what about 2 numbers?So, our options are:Sequential search Summing up items, substracting from total for all items from 1..n, then searching all possible cases.Anything else?Possible to have O(n) solution?I found this in ruby section of one of the websites, but any language is considered (unless there are some specific things for a language)  <code> ",Fastest way to find 2 missing numbers in an array
"VIM,GVIM: Why am i getting popup message when i hover the mouse on any word of a .rb or ruby file?"," If I hover the mouse on any word of a Ruby file, I get a tooltip message.A screenshot of that popup message is at popup message.cat ~/.gvimrc returns: <code>  function! SyntaxBalloon() let synID = synID(v:beval_lnum, v:beval_col, 0) let groupID = synIDtrans(synID) let name = synIDattr(synID, ""name"") let group = synIDattr(groupID, ""name"") return name . ""\n"" . groupendfunctionset balloonexpr=SyntaxBalloon()set ballooneval""how syntax highlighting groups for word under cursornmap <F2> :call <SID>SynStack()<CR>function! <SID>SynStack() if !exists(""*synstack"") return endif echo map(synstack(line('.'), col('.')), 'synIDattr(v:val, ""name"")')endfunc",Why am I getting a popup message when I hover on any word of a Ruby file?
How to delete all contents of a folder with Ruby / Rails?, I have a public/cache folder which has files and folders. How can I completely empty that folder using a rake task? <code> ,How to delete all contents of a folder with Ruby-Rails?
How to delete all contents of a folder with Ruby?, I have a public/cache folder which has files and folders. How can I completely empty that folder using a rake task? <code> ,How to delete all contents of a folder with Ruby-Rails?
Best way to debug third-part gems in ruby," Since there may be a lot of Ghost Methods inside a ruby gem, I don't think it is a good idea to study the inner mechanism of a ruby gem just by reading its source code statically. Is there a way to attach the source file of a third-part gem to a running ruby process for debugging so that I can set break point and see how things work dynamically ?BTW,I've tried to navigate to the source file of a third-part gem in RubyMine by clicking on the context menu ""Go To->Implementations"" of the 'require' statement or other symbol of an third-part gem( require 'watir' for example ), without success. Is it normal for an IDE of a dynamic typing language such as Ruby to fail a symbol navigation? <code> ",Best way to debug third-party gems in ruby
Why my ruby scripts can not redirect the STDOUT to files?," This script is named o.rb: When I run it using ./o.rb, the output on the console is correct.However, when I tried ./o.rb > log.txt 2>&1, the log file is empty!Why did this happen? I have the same issue while using the simple puts function.UPDATEThis will reproduce this issue: When I run it using ./foo.rb, it writes correctly to the console output. When I run ./foo.rb > log.txt, I get nothing.Also, when I use ./foo.rb | tee log.txt, nothing is written to the console and the log file is empty.The log.txt file was created but remains empty.My Ruby version is 1.8.7. <code>  @logger = Logger.new(STDOUT)@logger.info ""start_time : #{start_time}"" require 'logger'logger = Logger.new(STDOUT)loop do logger.info ""This is a test haha"" sleep(1)end",Why doesn't Logger output to STDOUT get redirected to files?
Ruby |= assigment opertator, Found table http://phrogz.net/programmingruby/language.html#table_18.4 but unable to find description for |=How the |= assignment operator works? <code> ,Ruby |= assignment operator
Ruby |= assigment operator, Found table http://phrogz.net/programmingruby/language.html#table_18.4 but unable to find description for |=How the |= assignment operator works? <code> ,Ruby |= assignment operator
Set Speed in Selenium Webdriver Ruby," Is there a way to set the Selenium Webdriver execution speed in ruby.In perl for selenium 1(RC) there was $sel->set_speed(""500"");But due to some constraints of Selenium RC, I had to shift to Selenium Webdriver and had to start using Ruby, and I cannot find the function for the same.Read somewhere the options ""Slow"", ""Medium"" and ""Fast"" as arguments to set speed in C# and Perl, but not in Ruby.Note - I do have timeouts set with this @driver.manage.timeouts.implicit_wait = 30 but i am looking for execution speed. <code> ",setSpeed in Selenium WebDriver using Ruby
Ruby function to check file existence," Is there a Ruby class/method where I could pass ""a full path"", home/me/a_file.txt, to identify whether it is a valid file path? <code> ",How to check for file existence
Why is_a? return false for Hash class?," Why is_a? returns false for a Hash class?Example: Output: Im using Ruby 1.9.2UPDATED: full source of my class: <code>  value = {""x"" => 3, ""y"" => 2}puts value.classputs value.is_a?(Hash) Hashfalse class LatLng include Mongoid::Fields::Serializable attr_reader :lat, :lng def serialize(value) return if value.nil? puts value.class puts value.is_a?(Hash) if value.is_a?(self.class) puts ""is geopoint"" + value.to_json {'lng' => value.lng.to_f, 'lat' => value.lat.to_f} elsif value.is_a?(Hash) hash = value.with_indifferent_access puts ""is hash"" + value.to_json {'lng' => hash['lng'].to_f, 'lat' => hash['lat'].to_f} end end def deserialize(value) return if value.nil? value.is_a?(self.class) ? value : LatLng.new(value['lat'], value['lng']) end def initialize(lat, lng) @lat, @lng = lat.to_f, lng.to_f end def [](arg) case arg when ""lat"" @lat when ""lng"" @lng end end def to_a [lng, lat] end def ==(other) other.is_a?(self.class) && other.lat == lat && other.lng == lng endend",Why is_a? returns false for Hash class?
List all methods for an object?," How do I list all the methods that a particular object has access to?I have a @current_user object, defined in the application controller: And want to see what methods I have available to me in the view file. Specifically, I want to see what methods a :has_many association provides. (I know what :has_many should provide, but want to check that.) <code>  def current_user @current_user ||= User.find(session[:user_id]) if session[:user_id]end",How to list all methods for an object in Ruby?
Float Class - how to count the number of decimal places?," I am using Ruby 1.8.7 and Rails 2.3.5.If I have a float like 12.525, how can a get the number of digits past the decimal place? In this case I expect to get a '3' back. <code> ",How to count the number of decimal places in a Float?
How do I enable syntax highlighting for my RoR Gemfile using Sublime Text 2?," I recently started using Sublime Text 2. What an awesome editor. It does a great job of highlighting Ruby code, but it does not highlight my Gemfile.Is there a way to get it to do that?I found this Gist but it has no instructions on how to use it. <code> ",How do I enable syntax highlighting for my Gemfile in Sublime Text 2?
How to change the hash like string to actual hash?," I have this string and I'm wondering how to convert it to a Hash. <code>  ""{:account_id=>4444, :deposit_id=>3333}""",How to parse a string representation of a hash
how costly is 'extend' in ruby?," First of all, I know how extend and include work, and what they're usually used for etc. Whether it is a good idea or not is not part of my question.My question is: how expensive is extend? It's a common Javascript technique to extend instances and singleton objects. One could do something similar in Ruby, but would it be slow if used on a lot of objects? <code> ",How costly is 'extend' in ruby?
Summarize array of integers as an array of ranges," I'd like to take input such as: and turn it into something like the following: Each sub-array represents a range of integers. <code>  [1,2,4,5,6,7,9,13] [[1,2],[4,7],[9,9],[13,13]]",How do I summarize array of integers as an array of ranges?
"Class-objects, eigenclasses"," I play with metaprogramming in ruby and I have a question. I have a class: Why? In variable a I have a singleton class, right? And Klass.instance_eval exec in context of a singleton class: Also, Klass in interpreter points to context of class, yes? And a points to context of a singleton class?And which indicates a.class_eval and a.instance_eval? I do: and I do not understand this. Thanks!  <code>  class Klass class << self @x = ""yeah"" endendb = Klass.newa = class << Klass; self; enda.instance_eval ""@x"" #=> yeahKlass.instance_eval ""@x"" #=> nil Klass.instance_eval ""def yeah; puts 10; end""Klass.yeah #=> 10 a.instance_eval ""def pops; puts 0; end""a.class_eval ""def popsx; puts 1; end""a.pops #=> 0a.popsx # FAILKlass.pops # FAILKlass.popsx #=> 1b.pops; b.popsx # DOUBLE FAIL","Class-objects, singleton classes"
About Ruby Require path," I don't understand the meaning of $:<< ""."" in Ruby.I upgraded Ruby to 1.9.1, but a program was not working. My classmate told me that I am supposed to add $:<< "".""What does $:<< ""."" do?  <code> ","What does $:<< ""."" do to Ruby's require path?"
Role does not exist and can't create database error when using PostgreSQL," I am using Heroku for my application and it requires PostgreSQL but you can still use SQLite3 for development. Since Heroku strongly advised against having 2 different databases I decided to change to PostgreSQL for development. I installed the gem pg and also went to the official PostgreSQL site to get the Windows installer and also changed my database.yml. During installation it requires a password for PostgreSQL so I made one. I had to change the pg_hba.conf file from using md5 to trust in order get past: fe_sendauth: no password supplied when trying to create the database. After getting rid of that though, I now get this: I do still have my development.sqlite3 and text.sqlite3 present, could that be the issue? What must be done?Here is my full gist: https://gist.github.com/1522188 <code>  # TYPE DATABASE USER ADDRESS METHOD# IPv4 local connections:host all all 127.0.0.1/32 trust # was md5# IPv6 local connections:host all all ::1/128 trust # was md5# Allow replication connections from localhost, by a user with the# replication privilege.#host replication postgres 127.0.0.1/32 trust#host replication postgres ::1/128 trust $ rake db:create(in C:/app)FATAL: role ""User"" does not exist Couldn't create database for {""adapter""=>""postgresql"", ""encoding""=>""utf8"", ""database""=>""app_test"", ""pool""=>5, ""username""=>nil, ""password""=>nil} ",Role does not exist and unable to create database when using PostgreSQL
What's the best way to escape/unescape stings in Ruby?," Does Ruby have any built-in method for escaping and unescaping strings? In the past, I've used regular expressions; however, it occurs to me that Ruby probably does such conversions internally all the time. Perhaps this functionality is exposed somewhere.So far I've come up with these functions. They work, but they seem a bit hacky: Is there a better way? <code>  def escape(s) s.inspect[1..-2]enddef unescape(s) eval %Q{""#{s}""}end",Best way to escape and unescape strings in Ruby?
What's the best way to escape and unescape stings in Ruby?," Does Ruby have any built-in method for escaping and unescaping strings? In the past, I've used regular expressions; however, it occurs to me that Ruby probably does such conversions internally all the time. Perhaps this functionality is exposed somewhere.So far I've come up with these functions. They work, but they seem a bit hacky: Is there a better way? <code>  def escape(s) s.inspect[1..-2]enddef unescape(s) eval %Q{""#{s}""}end",Best way to escape and unescape strings in Ruby?
What's the best way to escape and unescape strings?," Does Ruby have any built-in method for escaping and unescaping strings? In the past, I've used regular expressions; however, it occurs to me that Ruby probably does such conversions internally all the time. Perhaps this functionality is exposed somewhere.So far I've come up with these functions. They work, but they seem a bit hacky: Is there a better way? <code>  def escape(s) s.inspect[1..-2]enddef unescape(s) eval %Q{""#{s}""}end",Best way to escape and unescape strings in Ruby?
How to get last value in a array?," Example: How do I get the last value 5 in array a or last value 6 in array b without using a[3] and b[4]? <code>  a = [1, 3, 4, 5]b = [2, 3, 1, 5, 6]",How to get the last element of an array in Ruby?
Change ruby version using rvm," I am not able to switch the current Ruby version: <code>  ~ rvm listrvm rubies ruby-1.9.2-p290 [ x86_64 ] ruby-1.9.3-p0 [ x86_64 ] ~ rvm use ruby-1.9.3-p0RVM is not a function, selecting rubies with 'rvm use ...' will not work.",How do I change my Ruby version using RVM?
Devise skip_confirmation! not working," My app is set up so that if a user signs in with Oauth or Openid, they don't have to confirm their email address. However, Devise is still sending email confirmations. When I call User.skip_confirmation! I get an undefined method error. My model: My Controller: thanks for any help. <code>  class User < ActiveRecord::Base devise :database_authenticatable, :registerable, :recoverable, :rememberable, :trackable, :validatable, :confirmable, :lockable, :token_authenticatable, :omniauthable attr_accessible :username, :email, :password, :password_confirmation, :remember_me validates_presence_of :username validates_uniqueness_of :username, :case_sensitive => false def self.find_for_facebook_oauth(access_token, signed_in_resource=nil) data = access_token.extra.raw_info if user = User.where(:email => data.email).first user else #User.skip_confirmation! User.create!(:username => data.name, :email => data.email, :password => Devise.friendly_token[0,20]) end end def skip_confirmation! self.confirmed_at = Time.now endend class Users::OmniauthCallbacksController < Devise::OmniauthCallbacksController def facebook @user = User.find_for_facebook_oauth(request.env[""omniauth.auth""], current_user) @user.skip_confirmation! if @user.persisted? sign_in @user @fname = @user.username redirect_to root_path, :flash => { :success => ""Welcome #{@fname}!"" } else session[""devise.facebook_data""] = request.env[""omniauth.auth""] redirect_to new_user_registration_url end endend",Devise skip_confirmation! fails to avoid to send the confirmation instructions
Native Binary Search In Ruby?," I am looking for a built-in Ruby method that has the same functionality as index but uses a binary search algorithm, and thus requires a pre-sorted array.I know I could write my own implementation, but according to ""Ruby#index Method VS Binary Search"", the built-in simple iterative search used by index is faster than a pure-Ruby version of binary search, since the built-in method is written in C. Does Ruby provide any built-in methods that do binary search? <code> ",Is there a built-in binary-search In Ruby?
Is there a something like a null-stream in Ruby Core?," I could use: on Unix systems, but if there is a Ruby way to achieve this, I'd like to use it. I am just looking for an I/O stream, that immediately ""trashes"" all writes, kind of like a null-object. <code>  File.open('/dev/null', 'w')",Is there something like a null-stream in Ruby?
how do i read a gz file in ruby line by line?," I have a gzip file and currently I read it like this: I think this converts the file to a string, but I would like to read it line by line.What I want to accomplish is that the file has some warning messages with some garbage, I want to grep those warning messages and then write them to another file. But, some warning messages are repeated so I have to make sure that i only grep them once. Hence line by line reading would help me. <code>  infile = open(""file.log.gz"")gz = Zlib::GzipReader.new(infile)output = gz.readputs result",How do I read a gzip file line by line?
Ruby Openstruct object each," I have a OpenStruct hash like this: How can I use each on this?  <code>  #<OpenStruct object1={ ""param1""=>""2"", ""param2""=>""1"" }, object2={ ""param1""=>""2"", ""param2""=>""1"" }, object3={ ""param1""=>""2"", ""param2""=>""1"" }...","How do I use ""each"" on an Openstruct object?"
How to run Scheduler add-on at Heorku once per month?," In the selection of how often I want to run my action the only options are ""Daily"", ""Hourly"" and ""Every 10 minutes"".Thanks! I want to run the Scheduler for my Rails 3.1 app. <code> ",How to run Scheduler add-on at Heroku once per month?
Ruby method-calling hierarchy question," Inspired by this article, I was playing around with the Ruby method calling hierarchy and noticed something strange.Given: Running it gives: My question is:Since I am calling b.bar (on the object), how come the class's instance method is called before the objet's instance method is called?I would have expected b.method_missing(method) to be called first, then the class's instance method_missing(method) (since I am calling super? but super is class hierarchy...) which the does the redirect from bar to foo.Also, how come, after being redirected to foo, the instance's missing_method is called? We were just told that we're being redirected...I think I don't understand the concept of how Ruby allows to define an instance method on an instance of a class (new to me), as opposed to defining it as an instance method of a the class (classic languages).I hope this question makes sense, maybe my head is still spinning from last night... <code>  class B def foo ""- Instance method defined by B"" end def method_missing(method) puts ""- method_missing (#{method}) on b. Redirecting to b.foo\n"" foo endendb = B.newdef b.foo ""- Method defined directly on an instance of B\n"" + super enddef b.method_missing(method) ""- method_missing (#{method}) on b. Calling super\n"" + superendputs ""Calling 'bar' on b of type #{b.class}:""puts b.bar Calling 'bar' on b of type B:- method_missing (bar) on b. Redeirecting to b.foo- method_missing (bar) on b. Calling super- Method defined directly on an instance of B- instance method defined by B",Ruby method-calling hierarchy
Rails 3. Conditional fields with Formtastic," I'm using ActiveAdmin and Formtastic.I have an invoice form that has a drop down menu of shipments. I only want to display the select menu for shipments if the form is a New Invoice form.I do not want to display the shipments drop down select menu if the form is an edit form. So if the form is an edit form, it won't be changed.I was thinking about doing something like but I get a DSL error.  <code>  form do |f| f.inputs ""Shipment Details"" do f.input :shipment_id, :label => ""Shipment"", :as => :select, :collection => Shipment.find(invoiceless_shipments, :order => ""file_number"", :select => ""id, file_number"").map{|v| [v.file_number, v.id] } f.input :issued_at, :label => ""Date"", :as => :datepicker ... more fields ...end if params[:action] != 'edit' f.input :shipment_id, :label => ""Shipment"", :as => :select...end",Rails 3. Conditionally show fields with Formtastic
Does Ruby's 'read_uri' reliably close sockets after read or on fail?," I have been using open_uri to pull down an ftp path as a data source for some time, but suddenly found that I'm getting nearly continual ""530 Sorry, the maximum number of allowed clients (95) are already connected.""I am not sure if my code is faulty or if it is someone else who's accessing the server and unfortunately there's no way for me to really seemingly know for sure who's at fault.Essentially I am reading FTP URI's with: I'm guessing that I need to add some additional error handling code in here... I want to be sure that I take every precaution to close down all connections so that my connections are not the problem in question, however I thought that open_uri + read would take this precaution vs using the Net::FTP methods.The bottom line is I've got to be 100% sure that these connections are being closed and I don't somehow have a bunch open connections laying around.Can someone please advise as to correctly using read_uri to pull in ftp with a guarantee that it's closing the connection? Or should I shift the logic over to Net::FTP which could yield more control over the situation if open_uri is not robust enough?If I do need to use the Net::FTP methods instead, is there a read method that I should be familiar with vs pulling it down to a tmp location and then reading it (as I'd much prefer to keep it in a buffer vs the fs if possible)? <code>  def self.read_uri(uri) begin uri = open(uri).read uri == ""Error"" ? nil : uri rescue OpenURI::HTTPError nil end end",Does Ruby's 'open_uri' reliably close sockets after read or on fail?
How to decide wheter an optional argument was given or not in a ruby method," I have a method with an optional argument. How can I decide whether the Argument was given or not?I came up with the following solutions. I am asking this question since I am not entirely satisfied with any of them. Exists there a better one?nil as default value The drawback with this one is, that it cannot be decided whether no argument or nil was given.custom NoArgument as default value Whether nil was given can be decided, but the same problem exists for instances of NoArgument.Evaluating the size of an ellipsis In this variant it can be always decided whether the optional argument was given.However the Proc#arity of this method has changed from 1 to -1 (not true, see the comment). It still has the disadvantage of beeing worse to document and needing to manually raise the ArgumentError. <code>  def m(a= nil) if a.nil? ... endend class NoArgumentenddef m(a= NoArgument.new) if NoArgument === a ... endend def m(*a) raise ArgumentError if m.size > 1 if m.size == 1 ... endend",How to decide whether an optional argument was given or not in a ruby method
Ruby negative zero float?," In Ruby, 0.0 * -1 == -0.0.I have an application where I multiply a bunch of Float objects with -1, but I don't like the -0.0 in the output, since it's confusing.Is there a smart way of making Float#to_s output 0.0 instead of -0.0?I'm completely fine with running every Float object through some kind of scrubber/helper method, but the following just tends to make me even more confused: UPDATE: To be more precise on what I'm looking for, I want a solution that I can run on a whole bunch of floats, some of which will be negative, some positive. The negative ones should remain negative unless they're negative zeroes, i.e. -0.0.Examples: <code>  def clean_output(amount) if amount.zero? 0.0 else amount endend clean_output(-0.0) #=> 0.0clean_output(-3.0) #=> -3.0clean_output(3.0) #=> 3.0",How can I efficiently scrub Ruby's negative zero float?
path to public folder from a model," I want to parse .csv file which is in public folder, I've tried /../'s, #{RAILS_ROOT}/public but with no success (No such file or directory error). I dunno exactly how to use Rails.public_path (Rails.public_path/filename.csv doesn't work) please help <code> ",How to specify the path of the public directory in a ruby on rails app?
How to specify the public in ruby on rails app?," I want to parse .csv file which is in public folder, I've tried /../'s, #{RAILS_ROOT}/public but with no success (No such file or directory error). I dunno exactly how to use Rails.public_path (Rails.public_path/filename.csv doesn't work) please help <code> ",How to specify the path of the public directory in a ruby on rails app?
foreman only shows line with started wit pid #," When I run foreman I get the following: Only if I stop it (via ctrl-c) it shows me what is missing: How do I fix it? <code>  > foreman start 16:47:56 web.1 | started with pid 27122 ^CSIGINT received16:49:26 system | sending SIGTERM to all processes16:49:26 web.1 | => Booting Thin16:49:26 web.1 | => Rails 3.0.0 application starting in development on http://0.0.0.0:500016:49:26 web.1 | => Call with -d to detach16:49:26 web.1 | => Ctrl-C to shutdown server16:49:26 web.1 | >> Thin web server (v1.3.1 codename Triple Espresso)16:49:26 web.1 | >> Maximum connections set to 102416:49:26 web.1 | >> Listening on 0.0.0.0:5000, CTRL+C to stop16:49:26 web.1 | >> Stopping ...16:49:26 web.1 | Exiting16:49:26 web.1 | >> Stopping ...",foreman only shows line with started with pid # and nothing else
foreman only shows line with started wit pid # and nothing else," When I run foreman I get the following: Only if I stop it (via ctrl-c) it shows me what is missing: How do I fix it? <code>  > foreman start 16:47:56 web.1 | started with pid 27122 ^CSIGINT received16:49:26 system | sending SIGTERM to all processes16:49:26 web.1 | => Booting Thin16:49:26 web.1 | => Rails 3.0.0 application starting in development on http://0.0.0.0:500016:49:26 web.1 | => Call with -d to detach16:49:26 web.1 | => Ctrl-C to shutdown server16:49:26 web.1 | >> Thin web server (v1.3.1 codename Triple Espresso)16:49:26 web.1 | >> Maximum connections set to 102416:49:26 web.1 | >> Listening on 0.0.0.0:5000, CTRL+C to stop16:49:26 web.1 | >> Stopping ...16:49:26 web.1 | Exiting16:49:26 web.1 | >> Stopping ...",foreman only shows line with started with pid # and nothing else
find node by name by using Nokogiri," Trying to find nodes by name. Here is my xml: Here is my code to get all Name nodes from above XML: My code got nothing from the XML search. <code>  <Project> <ItemGroup> <Compile Include=""..\..\CommonAssemblyInfo.cs""> <Link>Properties\CommonAssemblyInfo.cs</Link> </Compile> <Compile Include=""Global.asax.cs""> <DependentUpon>Global.asax</DependentUpon> </Compile> <Compile Include=""Properties\AssemblyInfo.cs"" /> </ItemGroup> <ItemGroup> <ProjectReference Include=""..\myproject1.csproj""> <Name>Myproject1</Name> </ProjectReference> <ProjectReference Include=""..\Myproject2.csproj""> <Name>MyProject2</Name> </ProjectReference> <ProjectReference Include=""..\myproject3.csproj""> <Name>MyProject3</Name> </ProjectReference> </ItemGroup></Project> f = File.open(projectpath) @doc = Nokogiri::XML(f) #print f.read names = @doc.xpath(""Name"") print names f.close ",Find node by name by using Nokogiri
Ruby : find node by name by using Nokogiri," Trying to find nodes by name. Here is my xml: Here is my code to get all Name nodes from above XML: My code got nothing from the XML search. <code>  <Project> <ItemGroup> <Compile Include=""..\..\CommonAssemblyInfo.cs""> <Link>Properties\CommonAssemblyInfo.cs</Link> </Compile> <Compile Include=""Global.asax.cs""> <DependentUpon>Global.asax</DependentUpon> </Compile> <Compile Include=""Properties\AssemblyInfo.cs"" /> </ItemGroup> <ItemGroup> <ProjectReference Include=""..\myproject1.csproj""> <Name>Myproject1</Name> </ProjectReference> <ProjectReference Include=""..\Myproject2.csproj""> <Name>MyProject2</Name> </ProjectReference> <ProjectReference Include=""..\myproject3.csproj""> <Name>MyProject3</Name> </ProjectReference> </ItemGroup></Project> f = File.open(projectpath) @doc = Nokogiri::XML(f) #print f.read names = @doc.xpath(""Name"") print names f.close ",Find node by name by using Nokogiri
using variables in a yml file in ruby," I have YAML file which needs to take a variable as an input: I want to pass dirname as a parameter, something like: My LOGFILE_PATH is defined in a file called init.rb. <code>  outputters: - type : DateFileOutputter name : logfile level : DEBUG date_pattern: '%Y%m%d' trunc : 'false' dirname : ""/home/sameera/workspace/project/log"" filename : ""message.log"" formatter : date_pattern: '%m/%d/%Y %H:%M:%S' pattern : '%d %l - %m' type : PatternFormatter dirname : ""<%= LOGFILE_PATH%>""",How do I use variables in a YAML file?
How do I get day of the week in from a date object?," I have a date object in Rails, which I'd like to format.I've made it this far: I'd like it to print out 'Wednesday, 04/01/2012'Is there a quick method to change the '%w' into 'Wednesday'? <code>  delivery_time.date.strftime(""%w, %d/%m/%Y"")",How do I get day of the week from a date object?
Copy file from one server to another in ruby," I have one server which has nothing but xls log files. Each file is 5-15Mb and it is dynamic in the sense that files get added at any point of time. Now I need a way to do the following process using Ruby.Copy a file by sending the filename from one server which has nothing but log files to another server.I need to pass the server password as an argument.Everything happens in the background, which is triggered from a Ruby script. <code> ",How do I copy a file from one server to another?
How to share MySQL connexion between parent and children with Resque?," By default in Resque the parent process forks and the children processes create a new connection to the database.This can work, but if you have dozens of workers, MySQL can't keep that many connections opened and starts throwing errors.What would be the solution to have the children use the MySQL connection of their parent? <code> ",How to share MySQL connection between parent and children with Resque?
Practical example of architecture using ECB?," I was intrigued by Robert Martin's talk about ""Architecture: The Lost Years"". In it he discusses the Entity, Boundary, Control design pattern on which MVC is based. I love the idea of deferring architectural decisions. He described deferring the decision about how to implement the DB layer in his own wiki app FitNesse. I have organically deferred decisions like this in my own coding, though there wasn't a preconceived modular design that brought this about.I want to better understand this EBC architecture (which seems closely related to DCI) from a practical standpoint so that I can begin using in a small project. I want to capitalize on ""deferring decisions"" and the ability to swap out aspects of the design like the UI.Rails, for example, uses a form of EBC (MVC) but it's so heavily baked in that one could not easily substitute an alternate UI thus converting a Rails app to a console app or a desktop app. The intriguing thing about design for me is this ability to transform applications by swapping one thing out and plugging another in. That is, I wonder at the idea of designing an architecture so that one can, in a manner of speaking, swap out the UI or the persistence layer. I feel that if the architecture is well designed, the coupling will be low, and such a feat will be within grasp. I've ordered the book by Ivar Jacobson that Bob mentioned in his talk. I've search online quite a bit but all of the examples I've found show simple diagrams. I speak code. I would benefit more from looking over a few simple classes that demonstrate the concept and show how one might swap out one layer (UI, DB) for some other implementation through the use of boundary classes. If someone can't point me to a good resource illustrating this, would this be hard to whip up? Maybe we could use the standby example used in lots of software books: a video rental store (almost a relic these days). Please demonstrate how the UI or DB layer could be swapped. One thing that's confusing me is views. I can't tell from the diagrams I've seen if the views are the boundary classes themselves or if they just communicate with them. Also, Bob mentioned that the original intent of EBC was that we'd have lots of micro-views not a single macro-view (as we do in typical MVC); I'm curious what this might look like. (I prefer Ruby or JavaScript but, as beggars can't be choosers, any example would be fine.)Thank you. <code> ",Practical example of architecture using EBC?
Arguments passed to method by reference / value," Can anyone expand upon, correct, or verify what I feel is happening when you pass arguments to a method in Ruby. Are any of these points wrong? Am I missing any pieces?Everything in Ruby is an object.Variables are references to objects(When passing in a variable into a method): The parameter in the method that catches the variable is a local variable to that method. The parameter (local variable) now also has a reference to the same object.I could alter the object (in place) and this alteration will hold when the method scope is exited. Any variables referencing this object outside the method scope will reflect that the object has been altered.A new assignment to that parameter (local variable) does not change the original object, thus any references to it when the method leaves scope will remain unchanged. If I am passing a variable into the method that references an Integer there is effectively no way that once that method exits I could have that variable referencing a new Integer. Is there any way to have a method that takes as one of its parameters an Integer, does some stuff, and maybe as a side effect changes the value, having that change reflected once the method exits. Maybe I am just not thinking ""the Ruby way"". <code> ",Are arguments passed to methods by reference or value?
Checking charecter length using regular expression in ruby," I got stuck in another situation: our users enter a text to be stored in a variable. The condition for that text is it can be allowed to enter only 25 characters, Now I have to write a regular expression which will check the condition, kindly help me out in this. <code> ",Checking character length in ruby
Checking charecter length in ruby," I got stuck in another situation: our users enter a text to be stored in a variable. The condition for that text is it can be allowed to enter only 25 characters, Now I have to write a regular expression which will check the condition, kindly help me out in this. <code> ",Checking character length in ruby
Best way to organize tests in RSpect that have a Combinations of factor," I am creating some tests that have a variety of inputs. I am testing a purchasing website with new and returning user types, different products, promotion codes, payment options. I felt like this was a data-driven test set, probably calling for a csv or spreadsheet format of the test inputs.I have been using rspec which was perfect for the last test set I created. I would like to have consistent result formats. I am stuck on how to use data tables with RSpec. Has anybody used RSpec with a table of test inputs?Thanks in advance for a direct solution or sound advice. <code> ",Best way to organize tests in RSpec that have a Combinations of factor
Ruby/Rails - Last two value in array," @numbers = [ 1, 2, 3, 4, 5, 6, 7, 8 ]@numbers.last will give me 8I need to grab the last two records. So far I've tried this, however it throws a NoMethodError:@numbers.last - 1 <code> ",Ruby/Rails - Get the last two values in an array
Ruby class initialize (constructor) is private method or public method? why?, Is initialize method (constructor) private or public in ruby? <code> ,Ruby class initialize (constructor) is private method or public method?
Regarding to_i method of ruby, I was just trying out Ruby and I came across String#to_i. Suppose I have this code: Why does puts var1.to_i output 6 when puts var2.to_i gives 0? <code>  var1 = '6 sldasdhkjas'var2 = 'aljdfldjlfjldsfjl 6',Why does Ruby's String#to_i sometimes return 0 when the string contains a number?
"Rails 3.1 , jQuery UI does not load"," I am using Rails 3.1 and having an issue with the jQueryUI library. Here is my application.js file: It loads the ""jquery ui"" file into the browser, but whatever I use related to it it shows this error: <code>  //= require jquery//= require jquery-ui//= require jquery_ujs// Loads all Bootstrap javascripts//= require bootstrap//= require rails.validations//= require_tree . TypeError: Object function (a,b){return new d.fn.init(a,b,g)} has no method 'dialog'","Rails 3.1, jQuery UI does not load"
What would a default getter and setter look like in rails?," I know that I can write attr_accessor :tag_list to make a virtual attribute tag_list for an object in Rails. This allows there to be a tag_list attribute in forms for the object.If I use attr_accessor :tag_list I can, in the model, perform actions on tag_list to pull and manipulate data from the form.What I want to know is, instead of writing attr_accessor, how would I write a getter and setter that would replicate completely the default functionality of attr_accessor. EG: FYI I have tried This does NOT work.  <code>  def tag_list #what goes hereend def tag_list @tag_list end",What would a default getter and setter look like?
Ruby URI parse ftp url with username or password having special charachters," I am trying to parse a FTP URL that has some special characters like @ in the username and password: When I try: I get: URI::InvalidURIError: the scheme ftp does not accept registry part: username:p@sswrd@ftp.myhost.com (or bad hostname?)Then, I tried to encode the url: But also got another error: URI::InvalidURIError: the scheme ftp does not accept registry part: username:p%40sswrd%40ftp.myhost.com (or bad hostname?)Finally, I tried another solution: But I also got an error: URI::InvalidComponentError: bad component(expected user component): p@sswordI am using ruby 1.8.7. <code>  username:p@sswrd@ftp.myhost.com/mypath URI.parse(url) url = URI.encode(url, '@') URI::FTP.build(:userinfo => 'username:p@sswrd', :host=>'ftp.myhost.com', :path => '/mypath')",How can I parse a FTP URL with the username or password having special characters?
Ruby: call a function multiple times and get a list of results," I want to call the function f 5 times (for instance) and get a list of results. Right now I have this: Note: Right now f is a function that takes no input and returns true or false. So when this is done running, I get a list of 5 true/false values.Is there a better way to do this using other built in functions (possibly reduce? I had that idea but cannot figure out how to use it...) <code>  (1..5).to_a.map!{f}",Call a function multiple times and get a list of results
Ruby imported methods always private?," This is best explained with an example:file1.rb: file2.rb: will give an error ""': private method 'foo' called"". I can get around this by doing A.new.send(""foo"") but is there a way to make the imported methods public?Edit: To clarify, I am not confusing include and require. Also, the reason why I cannot use normal inclusion (as many have rightly pointed out) is that this is part of a meta-programming setup. I need to allow the user to add functionality at run-time; eg he can say ""run-this-app --include file1.rb"" and the app will behave differently based on the code he wrote in file1.rb. Sorry should have explained clearer.Edit: After reading Jorg's answer I realized my code does not behave exactly as intended, and he answers my (misguided) question perfectly. I am trying to do something more akin to str=(entire file1.rb as string); A.class_exec(str). <code>  def foo puts 123end class A require 'file1'endA.new.foo",Are Ruby imported methods always private?
How to make Capybara wait / retry checking for visibility?," After loading a page I have code that runs and hides and shows various items based on data returned by an xhr.My integration test looks something like this: When I manually go to the page in the context this test runs, #blah is not visible as I expect. I suspect that Capybara is looking at the initial state of the page (invisible in this case), evaluating the state of the DOM and failing the test before the JS runs. Yes, I set the :js => true on the containing describe block :)Any ideas would be greatly appreciated! I'm hoping I don't have to put an intentional delay in here, that feels flaky and will slow things down. <code>  it ""should not show the blah"" do page.find('#blah').visible?.should be_trueend ",How to make Capybara check for visibility after some JS has run?
Faye - listing active subscribers," I'm using Faye for dispatching messages and it works well. But I want to retrieve the active connections for a given channel, and things behave a bit differently: See ""list active subscribers on a channel"".I want to show the list of current users chatting in a room. I tried to do this by intercepting the /meta/subscribe channel via extensions but I'm not quite sure how to send data like the username to the server.An intercepted message to /meta/subscribe looks like this: It'd be nice to send ""username"" => ""foo"".Monitoring is interesting too, but again, it looks like I can't send any specific data on-subscribe.Does anyone have experience with these kind of issues? <code>  {""channel""=>""/meta/subscribe"", ""clientId""=>""50k233b4smw8z7ux3npas1lva"", ""subscription""=>""/comments/new"", ""id""=>""2""}",How do I list active subscribers using Faye?
ruby/rails/activerecord: how store hash in database," Is there a Ruby, or Activerecord method that can write and read a hash to and from a database field?I need to write a web utility to accept POST data and save it to a database, then later on pull it from the database in its original hash form. But ideally without 'knowing' what the structure is. In other words, my data store needs to be independent of any particular set of hash keys.For example, one time the external app might POST to my app: But another time the external app might POST to my app: So my utility needs to save an arbitrary hash to a text field in the database, then, later, recreate the hash from what was saved. <code>  ""user"" => ""Bill"",""city"" => ""New York"" ""company"" => ""Foo Inc"",""telephone"" => ""555-5555""",How can I store a hash in my database?
Ruby : Is there some syntactic sugar for symbols lists?, I like this literal expression for an array of strings: I am wondering if there is a literal to get an array of symbols. I know I can do but it would be so wonderful just to use a literal. <code>  %w( i can easily create arrays of words ) %w( it is less elegant to create arrays of symbols ).map( &:to_sym ),Is there a literal notation for an array of symbols?
why ruby Range will not work descendingly," Why will (1..5).each iterate over 1,2,3,4,5, but (5..1) will not? It returns the Range instead. <code>  1.9.2p290 :007 > (1..5).each do |i| puts i end12345 => 1..51.9.2p290 :008 > (5..1).each do |i| puts i end => 5..1",Why will a Range not work when descending?
How to overwrite the 'i18n_scope' of a my ActiveModel?," I am using Rails 3.1.1 and I would like to properly translate error messages for an ActiveModel. I don't know if overwriting the i18n_scope is the right way to solve my problem (or if there are other ways), but the official documentation says: i18n_scope() Returns the i18n_scope for the class. Overwrite if you want custom lookup.... how should I overwtite the i18n_scope?At this time I am getting a the following ""alert"": My ActiveModel class is like the following: <code>  # Note the 'activemodel' parttranslation missing: de.activemodel.errors.models.my_class.attributes.message.blank# I would like to ""map"" translations to 'de.activerecord.errors.messages.blank'# as made for all other ActiveRecord classes in my application class MyClass include ActiveModel::Conversion include ActiveModel::Validations include ActiveModel::Dirty extend ActiveModel::Naming extend ActiveModel::Translation validates :name, :presence => true ...end",How to handle translations for an ActiveModel?
How can I make the I18n to translate email messages body?," I am using Ruby on Rails 3.1.1 and I am trying to translate email messages body. I created/stated all necessary ""things"" (YAML files, key/value pairs, ...) to make the I18n gem to work: email messages are sent without problems using the default language (:en).Then I added a new language and made all that had to be done to make the I18n gem to work with another language and to get always a locale=de parameter in URLs. However when I sent an email, even if the locale is properly set (eg: locale=de), sent email message are not translated (those still use the default :en language).How can I make the I18n to translate email messages body?I read the Localized ActionMailer Templates for Rails blog postbut it is old and I have not tested that...I read the Rails I18n and emails blog post and I tested that. It works, but how can handle translation in my case (I am using the params method...)? Is there a better solution? <code>  class ApplicationController < ActionController::Base before_filter :set_locale def set_locale if params[:locale] && I18n.available_locales.include?(params[:locale].to_sym) I18n.locale = params[:locale] end end ...end",How to translate email messages body using the I18n gem?
Newbie troubles: How to install RVM on Windows?," How do I install RVM on Windows 7?It says to install RVM, and use the following script: But I have no idea what to do with it. If I type it into cmd an error message comes up saying it was 'unexpected at this time'.What do I do to install RVM? <code>  user$ bash -s stable < <(curl -s https://raw.github.com/wayneeseguin/rvm/master/binscripts/rvm-installer )",How to install RVM on Windows 7
How to install RVM on Windows?," How do I install RVM on Windows 7?It says to install RVM, and use the following script: But I have no idea what to do with it. If I type it into cmd an error message comes up saying it was 'unexpected at this time'.What do I do to install RVM? <code>  user$ bash -s stable < <(curl -s https://raw.github.com/wayneeseguin/rvm/master/binscripts/rvm-installer )",How to install RVM on Windows 7
Get public methods without inheritance," Given any object I can call #public_methods and see all the methods it will respond to. However, I find it would sometimes be handy to get a quick list of all the public methods that are not inherited, i.e. the stuff that's really part of this class.I found in ""Easy way to list public methods for a Ruby object"" that if I use: I can filter out a lot of basic Ruby stuff. I'd like to be able to filter everything that was inherited all the way up the chain. If I know the parent class I can filter using it, but I'd like to come up with a generic command that could return an array of the uninherited public methods for any object. <code>  (Foo.public_methods - Object.public_methods).sort",How do I get the public methods of a class without inherited methods?
Is there any Ruby ORB which use cursors or smart fetch?," I'm looking for a Ruby ORM to replace ActiveRecord. I've been looking at Sequel and DataMapper. They look pretty good however none of them seems to do the basic: not loading everything in memory when you don't need it.I mean I've tried the following (or equivalent) on ActiveRecord and Sequel on table with lots of rows: Both of them go crazy on memory. They seem to load everything in memory rather than fetching stuff when needed. I used the find_in_batches in ActiveRecord, but it's not an acceptable solution:ActiveRecord is not an acceptable solution because we had too many problems with it.Why should my code be aware of a paging mechanism? I'm happy to configure somewhere the size of the page but that's it. With find_in_batches you need to do something like:post.find_in_batches { |batch| batch.each { |p| puts p } }But that should be transparent.So is there somewhere a reliable Ruby ORM which does the fetch properly?Update:As Sergio mentioned, in Rails 3 you can use find_each which exactly what I want. However as ActiveRecord is not an option, except if someone can really convince me to use it, the questions are:Which ORMs support the equivalent of find_each?How to do it?Why do we need a find_each, while find should do it, shouldn't it? <code>  posts.each { |p| puts p }",Are there any Ruby ORMs which use cursors or smart fetch?
Invoke multiple Rake tasks programmatically, At the command line I can run multiple tasks like this How can I do this programmatically? I know that I can run one task like this <code>  rake environment task1 task2 task3 Rake::Task['task1'].invoke,How do I run multiple Rake tasks programmatically at once?
Carrierwave image dimention," How can I get the width and height of the current instance of carrierwave?Something like this: Unfortunately image.photo_width and image.photo_height are not working.I need to specify the width and height of the images, it is required on the jquery plugin I'm using. <code>  car_images.each do | image| image_tag( image.photo_url, :width => image.photo_width, :height => image.photo_height)end",Carrierwave image dimension
Update Rails app to use 3.2.0.rc2," After createing a brand new rails app Following the official rails blog post, attempting to convert apps to rails 3.2.0.rc2 yields the following What exactly is the issue?System Specs:Mac OS 10.7.2, Xcode 4.2.1, rvm 1.10.1 using ruby 1.9.3p0 (2011-10-30 revision 33570) [x86_64-darwin11.2.0] <code>  Updated Gemfile to depend on rails ~> 3.2.0.rc2 gem 'rails', '~>3.2.0.rc2'Updated Gemfile to depend on sass-rails ~> 3.2.3 gem 'sass-rails', '~> 3.2.3'$ bundle installFetching source index for http://rubygems.org/Bundler could not find compatible versions for gem ""activesupport"": In snapshot (Gemfile.lock): activesupport (3.1.1) In Gemfile: rails (~> 3.2.0.rc2) ruby depends on activesupport (= 3.2.0.rc2) rubyRunning `bundle update` will rebuild your snapshot from scratch, using only the gems in your Gemfile, which may resolve the conflict.$bundle updateFetching source index for http://rubygems.org/Bundler could not find compatible versions for gem ""railties"": In Gemfile: coffee-rails (~> 3.1.1) ruby depends on railties (~> 3.1.0) ruby rails (~> 3.2.0.rc2) ruby depends on railties (3.2.0.rc2)","Bundler could not find compatible versions for gem, updating Rails app"
Update Rails app to use 3.2.x," After createing a brand new rails app Following the official rails blog post, attempting to convert apps to rails 3.2.0.rc2 yields the following What exactly is the issue?System Specs:Mac OS 10.7.2, Xcode 4.2.1, rvm 1.10.1 using ruby 1.9.3p0 (2011-10-30 revision 33570) [x86_64-darwin11.2.0] <code>  Updated Gemfile to depend on rails ~> 3.2.0.rc2 gem 'rails', '~>3.2.0.rc2'Updated Gemfile to depend on sass-rails ~> 3.2.3 gem 'sass-rails', '~> 3.2.3'$ bundle installFetching source index for http://rubygems.org/Bundler could not find compatible versions for gem ""activesupport"": In snapshot (Gemfile.lock): activesupport (3.1.1) In Gemfile: rails (~> 3.2.0.rc2) ruby depends on activesupport (= 3.2.0.rc2) rubyRunning `bundle update` will rebuild your snapshot from scratch, using only the gems in your Gemfile, which may resolve the conflict.$bundle updateFetching source index for http://rubygems.org/Bundler could not find compatible versions for gem ""railties"": In Gemfile: coffee-rails (~> 3.1.1) ruby depends on railties (~> 3.1.0) ruby rails (~> 3.2.0.rc2) ruby depends on railties (3.2.0.rc2)","Bundler could not find compatible versions for gem, updating Rails app"
Update Rails app to use 3.2.x bundler could not find compatible versions," After createing a brand new rails app Following the official rails blog post, attempting to convert apps to rails 3.2.0.rc2 yields the following What exactly is the issue?System Specs:Mac OS 10.7.2, Xcode 4.2.1, rvm 1.10.1 using ruby 1.9.3p0 (2011-10-30 revision 33570) [x86_64-darwin11.2.0] <code>  Updated Gemfile to depend on rails ~> 3.2.0.rc2 gem 'rails', '~>3.2.0.rc2'Updated Gemfile to depend on sass-rails ~> 3.2.3 gem 'sass-rails', '~> 3.2.3'$ bundle installFetching source index for http://rubygems.org/Bundler could not find compatible versions for gem ""activesupport"": In snapshot (Gemfile.lock): activesupport (3.1.1) In Gemfile: rails (~> 3.2.0.rc2) ruby depends on activesupport (= 3.2.0.rc2) rubyRunning `bundle update` will rebuild your snapshot from scratch, using only the gems in your Gemfile, which may resolve the conflict.$bundle updateFetching source index for http://rubygems.org/Bundler could not find compatible versions for gem ""railties"": In Gemfile: coffee-rails (~> 3.1.1) ruby depends on railties (~> 3.1.0) ruby rails (~> 3.2.0.rc2) ruby depends on railties (3.2.0.rc2)","Bundler could not find compatible versions for gem, updating Rails app"
Update Rails app to use 3.2.x bundler could not find compatible versions for gem ," After createing a brand new rails app Following the official rails blog post, attempting to convert apps to rails 3.2.0.rc2 yields the following What exactly is the issue?System Specs:Mac OS 10.7.2, Xcode 4.2.1, rvm 1.10.1 using ruby 1.9.3p0 (2011-10-30 revision 33570) [x86_64-darwin11.2.0] <code>  Updated Gemfile to depend on rails ~> 3.2.0.rc2 gem 'rails', '~>3.2.0.rc2'Updated Gemfile to depend on sass-rails ~> 3.2.3 gem 'sass-rails', '~> 3.2.3'$ bundle installFetching source index for http://rubygems.org/Bundler could not find compatible versions for gem ""activesupport"": In snapshot (Gemfile.lock): activesupport (3.1.1) In Gemfile: rails (~> 3.2.0.rc2) ruby depends on activesupport (= 3.2.0.rc2) rubyRunning `bundle update` will rebuild your snapshot from scratch, using only the gems in your Gemfile, which may resolve the conflict.$bundle updateFetching source index for http://rubygems.org/Bundler could not find compatible versions for gem ""railties"": In Gemfile: coffee-rails (~> 3.1.1) ruby depends on railties (~> 3.1.0) ruby rails (~> 3.2.0.rc2) ruby depends on railties (3.2.0.rc2)","Bundler could not find compatible versions for gem, updating Rails app"
preserve case with rails http.get," I have a requirement to send an HTTP header in a specific character-case. I am aware that this is against the RFC, but I have a requirement.http.get seems to change the case of the headers dictionary I supply it. How can I preserve the character-case? <code> ",How do I preserve case with http.get?
Deleting cookie of the authorization page in rails application," In my rails application i am using oauth to get access to the user's profile data. The thing is when the instagram's authorization log-in page pops up, the user has to enter his log-in details, a cookie gets saved in my machine. Is there any way to DELETE this cookie(obviously not manually)? I am asking this because when the oauth page is called again, this cookie saved in my browser automatically signs in the user. This has become a nuisance for my project. I don't want this to happen, i want the same log-in page to be displayed again.  <code> ",Deleting cookie of the instagram authorization page in rails application
"what does the ""it"" keyword do in ruby?"," I'm following the rails3tutorial and I don't understand the meaning of the ""it"" keyword when doing some testing as follows: code fragment comes from: http://ruby.railstutorial.org/chapters/filling-in-the-layout#top listing 5.26 <code>  require 'spec_helper'describe UsersController do render_views describe ""GET 'new'"" do it ""should be successful"" do get 'new' response.should be_success end it ""should have the right title"" do get 'new' response.should have_selector(""title"", :content => ""Sign up"") end endend","what does the ""it"" keyword do in RSpec?"
"What does the ""it"" keyword do in Ruby?"," I'm following the rails3tutorial and I don't understand the meaning of the ""it"" keyword when doing some testing as follows: code fragment comes from: http://ruby.railstutorial.org/chapters/filling-in-the-layout#top listing 5.26 <code>  require 'spec_helper'describe UsersController do render_views describe ""GET 'new'"" do it ""should be successful"" do get 'new' response.should be_success end it ""should have the right title"" do get 'new' response.should have_selector(""title"", :content => ""Sign up"") end endend","what does the ""it"" keyword do in RSpec?"
How to the Rubymine IDE debugger to a shell process?," I want to use Rubymine's IDE debugger to debug a ruby process running in the command shell, as it is spawned, e.g. by ""rails console"".I've gotten great mileage out of the debugger when running the web server (from within Rubymine) or test suites (also run from within Rubymine).However, if the process isn't started by Rubymine, I'm at a loss of how to attach the debugger.I'm using version Rubymine 3.2.4 on Ubuntu with Sun Java 1.6.0_26, Ruby REE 1.8.7, and the latest debug gems: Thoughts? <code>  ruby-debug-base (0.10.4)ruby-debug-ide (0.4.17.beta8)",How to attach the Rubymine IDE debugger to a shell process?
Nokogiri ruby xpath," I am parsing some XML using Nokogiri and XPath. When I do this: It prints out all the nodes, but also in between names, it prints out 'text'. I think I know why:In my xml, there's spaces between nodes like this : ""<a1>hi</a1> \n <a2>bye</a2>""Is there a way I can tell it to ignore stuff between nodes? <code>  doc.xpath('//Order/child::node()').each do |node| puts node.nameend",XPath to select only child elements (not blank text nodes)
Constants in Ruby," Apparently you can change value of the constant in Ruby any time. Why are they even called ""constants"" if you can change them?What is the purpose of these 'constants'? How does the ability to change their value make programming easier? <code>  class TestClass CONSTANT = 1endTestClass::CONSTANT = 2",Why can I change constants?
jQuery-rails gem is failed to install?," I am trying to include jquery-rails in my Gemfile however I receive the following error: gem install jquery-rails -v '1.0.19' produces an error as well.Any ideas on how to fix the problem? <code>  ArgumentError: invalid byte sequence in US-ASCIIAn error occured while installing jquery-rails (1.0.19), and Bundler cannot continue.Make sure that `gem install jquery-rails -v '1.0.19'` succeeds before bundling.",Bundling jquery-rails fails with error?
Why a = a is nil in Ruby?, I watched this video. Why is a = a evaluated to nil if a is not defined? <code>  a = a # => nilb = c = q = c # => nil,Why is `a = a` `nil` in Ruby?
rspec testing has_may :through and after_save," I have an (I think) relatively straightforward has_many :through relationship with a join table: And these rspec tests (I know these are not necessarily good tests, these are just to illustrate what's happening): This works fine UNTIL I add an after_save to the Thing model that references its followers. That is, if I do Then the second test fails - i.e., the relationship is still added to the join table, but @thing.followers returns an empty array. Furthermore, that part of the callback never gets called (as if followers is empty within the model). If I add a puts ""HI"" in the callback before the followers.each line, the ""HI"" shows up on stdout, so I know the callback is being called. If I comment out the followers.each line, then the tests pass again.If I do this all through the console, it works fine. I.e., I can do Why is this failing in rspec? Am I doing something horribly wrong?UpdateEverything works if I manually define Thing#followers as This leads me to believe that perhaps I am defining my has_many :through with :source incorrectly?UpdateI've created a minimal example project and put it on github: https://github.com/dantswain/RspecHasManyAnother UpdateThanks a ton to @PeterNixey and @kikuchiyo for their suggestions below. The final answer turned out to be a combination of both answers and I wish I could split credit between them. I've updated the github project with what I think is the cleanest solution and pushed the changes: https://github.com/dantswain/RspecHasManyI would still love it if someone could give me a really solid explanation of what is going on here. The most troubling bit for me is why, in the initial problem statement, everything (except the operation of the callback itself) would work if I commented out the reference to followers. <code>  class User < ActiveRecord::Base has_many :user_following_thing_relationships has_many :things, :through => :user_following_thing_relationshipsendclass Thing < ActiveRecord::Base has_many :user_following_thing_relationships has_many :followers, :through => :user_following_thing_relationships, :source => :userendclass UserFollowingThingRelationship < ActiveRecord::Base belongs_to :thing belongs_to :userend describe Thing do before(:each) do @user = User.create!(:name => ""Fred"") @thing = Thing.create!(:name => ""Foo"") @user.things << @thing end it ""should have created a relationship"" do UserFollowingThingRelationship.first.user.should == @user UserFollowingThingRelationship.first.thing.should == @thing end it ""should have followers"" do @thing.followers.should == [@user] end end class Thing < ActiveRecord::Base after_save :do_stuff has_many :user_following_thing_relationships has_many :followers, :through => :user_following_thing_relationships, :source => :user def do_stuff followers.each { |f| puts ""I'm followed by #{f.name}"" } endend >> t = Thing.create!(:name => ""Foo"")>> t.followers # []>> u = User.create!(:name => ""Bar"")>> u.things << t>> t.followers # [u]>> t.save # just to be super duper sure that the callback is triggered>> t.followers # still [u] def followers user_following_thing_relationships.all.map{ |r| r.user }end",rspec testing has_many :through and after_save
best way to set a default value without ActiveRecord?," I thought that this question ( How to do attr_accessor_with_default in ruby? ) answered my question, but I'm not using ActiveRecord and after_initialize depends on it. What's the Ruby best practice for implementing a default value for an attr_accessor? Is this the closest thing to documentation about it? Should I stop using attr_accessor since it is private?  <code> ",best way to set a default value on a property without ActiveRecord?
Ruby: How to find and return a duplicate value in array?," arr is array of strings: What would be an easy and elegant way to check if arr has duplicates, and if so, return one of them (no matter which)?Examples: <code>  [""hello"", ""world"", ""stack"", ""overflow"", ""hello"", ""again""] [""A"", ""B"", ""C"", ""B"", ""A""] # => ""A"" or ""B""[""A"", ""B"", ""C""] # => nil",How to find and return a duplicate value in array
Ruby - Element-wise comparison of 2 arrays," I have two arrays: Is there an element-wise comparison method in Ruby such that I could do something like this: returns:[1,0,1] or something like [TRUE,FALSE,TRUE]. <code>  a = [1,2,3]b = [1,4,3] a == b",How do I do element-wise comparison of two arrays?
Deadlock in Ruby join()," I am working in multi-threading in Ruby. The code snippet is: I am not using any mutex locks, but I get a deadlock. This is the output of the above code snippet: The above output tells me that the deadlock is after the user_ids array is null and happening with Thread's join and stop. What actually is happening and what is the solution to this error? <code>  threads_array = Array.new(num_of_threads) 1.upto(num_of_threads) do |i| Thread.abort_on_exception = true threads_array[i-1] = Thread.new { catch(:exit) do print ""s #{i}"" user_id = nil loop do user_id = user_ids.pop() if user_id == nil print ""a #{i}"" Thread.stop() end dosomething(user_id) end end } end #puts ""after thread"" threads_array.each {|thread| thread.join} s 2s 6s 8s 1s 11s 7s 10s 14s 16s 21s 24s 5s 26s 3s 19s 20s 23s 4s 28s 9s 12s 18s 22s 29s 30s 27s 13s 17s 15s 25a 4a 10a 3a 6a 21a 24a 16a 9a 18a 5a 28a 20a 2a 22a 11a 29a 8a 14a 23a 26a 1a 19a 7a 12fatal: deadlock detected",How to fix a deadlock in join() in Ruby
How to write negative loop in ruby like for(i=index; i< = 0; i --)," How can I write a loop in Ruby that counts down, similar to the following C-style for loop? <code>  for (i = 25; i >= 0; i--) { print i;}",How to write negative loop in ruby like for(i=index; i >= 0; i --)
How to get javascript style hash access in ruby," I am aware of this feature provided by ActiveSupport. However I already have a large hash and I want to access that hash using dot notation. This is what I tried: That did not work. How can I make this work.I am using ruby 1.9.2Update:Sorry I should have mentioned that I can't use openstruct because it does not have each_pair method which Struct has. I do not know keys beforehand so I can't use openstruct. <code>  h = ActiveSupport::OrderedOptions.newh.boy = 'John'h.girl = 'Mary'h.boy # => 'John'h.girl # => 'Mary' large_hash = {boy: 'John', girl: 'Mary'}h = ActiveSupport::OrderedOptions.new(large_hash)h.boy # => nil",How can I get JavaScript style hash access?
Ruby ICMP just using the socket library," It should be possible send and receive ICMP packets using the Ruby socket library but I do not see any good documentation on this.I do not want to use net-ping, icmp, ping, and all of these other libraries that either fail because of cross-platform issues, require devkit and custom building, which fail during the build process, are neglected and have not been updated for a lengthy time, and/or are just in general buggy.Does anyone have any good documentation on how to accomplish this? I want to send ICMP echo replies, not TCP or UDP packets. <code> ",How do I implement ICMP ping in Ruby using only the standard the socket library?
Implement ICMP ping in Ruby using Only the standard the socket library?," It should be possible send and receive ICMP packets using the Ruby socket library but I do not see any good documentation on this.I do not want to use net-ping, icmp, ping, and all of these other libraries that either fail because of cross-platform issues, require devkit and custom building, which fail during the build process, are neglected and have not been updated for a lengthy time, and/or are just in general buggy.Does anyone have any good documentation on how to accomplish this? I want to send ICMP echo replies, not TCP or UDP packets. <code> ",How do I implement ICMP ping in Ruby using only the standard the socket library?
How to convert this ERB line to Haml," How to convert this ERB code: into Haml code? <code>  <div <%= 'class=""highlight""' if job.done %>>",Conditionally set CSS class
Ruby: is there a keyword to call a method from within itself (analogous to `super`)?," I am wondering: is there a way to call a method from within itself in Ruby without using its name?If the method was created by some metaprogramming techniques, then calling it by its name may be hard to read. Even for a usually defined method, if you are not sure about a good name for it, or if its name is long, calling it from within itself by some keyword (analogous to super) may be convenient. <code> ",Ruby: is there a keyword to call a method from within itself (analogous to super)?
ruby called from command line or required," So when I call my script from the command line, I want it to take in an int and do something with the value: However, whenever the script is loaded or required and not called from command line, I want to completely skip this part of the code. How can I detect whether the script has been called via command line, or just loaded? Thanks! <code>  ruby script.rbputs ARGV[0], etc...",Run code only if script called from the command line
is Regexp.last_match thread safe?," This is the code that I'm looking at: What happens if I have multiple threads calling Regexp.last_match?What happens if I have multiple threads calling the object with the method_missing method? <code>  def method_missing(id, *args) return self.find(Regexp.last_match(1), args[0]) if id.id2name =~ /find_by_(.+)/ raise NoMethodErrorend",Is Regexp.last_match thread safe?
p vs pp in Ruby," I did do some searching, but can't find an answer to simple question.What is difference between p and pp in Ruby? I know you need to require 'pp'. Besides that what are the differences? <code> ","What is difference between ""p"" and ""pp""?"
Ruby - How to check if specific value is present in a hash?," I'm using Rails and I have a hash object. I want to search the hash for a specific value. I don't know the keys associated with that value.How do I check if a specific value is present in a hash? Also, how do I find the key associated with that specific value? <code> ",How to check if specific value is present in a hash?
"In Ruby, how do I have a parent class's method access the subclass's constants?"," For example: How do I accomplish the above? Currently it says  <code>  class Animal def make_noise print NOISE endendclass Dog < Animal NOISE = ""bark""endd = Dog.newd.make_noise # I want this to print ""bark"" uninitialized constant Animal::NOISE",Have a parent class's method access the subclass's constants
Extracting a sub-hash from a hash," I have a hash: What is the best way to extract a sub-hash like this? <code>  h1 = {:a => :A, :b => :B, :c => :C, :d => :D} h1.extract_subhash(:b, :d, :e, :f) # => {:b => :B, :d => :D}h1 #=> {:a => :A, :c => :C}",How do I extract a sub-hash from a hash?
Failed to build json (1.6.3) with native extension after I installed X Code 4.2," Are you familiar with this error? I have no idea how to fix this: System info: Xcode v4.2.1 <code>  Installing json (1.6.3) with native extensions Gem::Installer::ExtensionBuildError: ERROR: Failed to build gem native extension. /Users/boris/.rvm/rubies/ruby-1.9.2-p290/bin/ruby extconf.rb creating Makefilemake /usr/bin/gcc-4.2 -I.-I/Users/boris/.rvm/rubies/ruby-1.9.2-p290/include/ruby-1.9.1/x86_64-darwin10.8.0-I/Users/boris/.rvm/rubies/ruby-1.9.2-p290/include/ruby-1.9.1/ruby/backward-I/Users/boris/.rvm/rubies/ruby-1.9.2-p290/include/ruby-1.9.1 -I. -D_XOPEN_SOURCE -D_DARWIN_C_SOURCE -fno-common -O3 -ggdb -Wextra -Wno-unused-parameter -Wno-parentheses -Wpointer-arith -Wwrite-strings -Wno-missing-field-initializers -Wshorten-64-to-32 -Wno-long-long -fno-common -pipe -O3 -Wall -o parser.o -c parser.c make: /usr/bin/gcc-4.2: No such file or directory make: *** [parser.o] Error 1Gem files will remain installed in /Users/boris/.rvm/gems/ruby-1.9.2-p290@apps2/gems/json-1.6.3 for inspection. Results logged to /Users/boris/.rvm/gems/ruby-1.9.2-p290@apps2/gems/json-1.6.3/ext/json/ext/parser/gem_make.out An error occured while installing json (1.6.3), and Bundler cannot continue. Make sure that `gem install json -v '1.6.3'` succeeds before bundling. gem -v1.8.10$ ruby -vruby 1.9.2p290 (2011-07-09 revision 32553) [x86_64-darwin10.8.0]",Failed to build json (1.6.3) with native extension after I installed Xcode 4.2
array.each behavior depends on Array.new syntax," I'm using Ruby 1.9.2-p290 and found: Which is not what I would expect. But the following constructor style does do what I would expect: Is the first example the expected behavior?In ruby-doc it looks like my size=2 argument is the same kind of argument for both constructors. I think that if the each method is getting passed that argument that it would use it the same way for both constructors.  <code>  a = Array.new(2, []).each {|i| i.push(""a"")} => [[""a"", ""a""], [""a"", ""a""]] b = Array.new(2) {Array.new}.each {|i| i.push(""b"")}=> [[""b""], [""b""]] ",Why does array.each behavior depend on Array.new syntax?
Ruby newbie: Explanation on ruby code for building trie data structures," So I have this ruby code I grabbed from wikipedia and I modified a bit: I first ran this on console irb, and each time I output node, it just keeps giving me an empty hash each time {}, but when I actually invoke that function build with parameter 'dogs' string, it actually does work, and outputs {""d""=>{""o""=>{""g""=>{""s""=>{}}}}}, which is totally correct.This is probably more of a Ruby question than the actual question about how the algorithm works. I don't really have adequate Ruby knowledge to decipher what is going on there I guess. <code>  @trie = Hash.new()def build(str) node = @trie str.each_char { |ch| cur = ch prev_node = node node = node[cur] if node == nil prev_node[cur] = Hash.new() node = prev_node[cur] end } endbuild('dogs')puts @trie.inspect",Explanation of Ruby code for building Trie data structures
Ruby catching NoMethodError and continue," In Ruby, I'd like to catch the NoMethodError generated on an object in another object, then return some value to where the exception is raised and continue execution. Is there an existing way to do this?The best I came up with is: This prints Is there a better way to do this using Ruby's existing array of meta-programming arsenal? Basically, I am not sure if callcc will continue to exist.Thanks. <code>  class Exception attr_accessor :continuationendclass Outer def hello puts ""hello"" end class Inner def world puts ""world"" end def method_missing(method, *args, &block) x = callcc do |cc| e = RuntimeError.exception(method) e.continuation = cc raise e end return x end end def inner(&block) inner = Inner.new begin inner.instance_eval(&block) rescue => e cc = e.continuation cc.call(hello()) end inner endendo = Outer.newo.inner do hello worldend helloworld",Ruby catching NoMethodError and continue execution from where exception occurred
Why Is Date::new broken?," I want to create a subclass of Date.A normal, healthy, young rubyist, unscarred by the idiosyncrasy of Date's implementation would go about this in the following manner: And proceed to use it in the most expected manner... ... only to be double-crossed by the fact, that the Date::new method is actually an alias to Date::civil, which doesn't ever call initialize. In this case, the last piece of code prints ""2012-01-28"" instead of the expected ""2012-12-25"".Dear Ruby-community, wtf is this?Is there some very good reason for aliasing new, so that it ignores initialize, and as a result, any common sense and regard for the client's programmer's mental health? <code>  require 'date'class MyDate < Date def initialize(year, month, day) @original_month = month @original_day = day # Christmas comes early! super(year, 12, 25) endend require 'my_date'mdt = MyDate.new(2012, 1, 28)puts mdt.to_s",Why does Date.new not call initialize?
"what is the difference between class_eval, class_exec, module_eval and module_exec? Confusing", I am reading the Module documentation but can't seem to understand their differences and which should be used where.How is the eval different than exec? <code> ,"What is the difference between class_eval, class_exec, module_eval and module_exec?"
How to extract URL from string with non-english characters?," Here's a simple script that takes an anchor tag with a German URL in it, and extracts the URL: The extract method stops at the . How can I get it to work with non-English letters? I'm using ruby-1.9.3-p0. <code>  # encoding: utf-8require 'uri'url = URI.extract('<a href=""http://www.example.com/wp content/uploads/2012/01/Mnchen.jpg"">Mnchen</a>')puts url http://www.example.com/wp-content/uploads/2012/01/M",How can I extract a URL with non-English characters from a string?
Comparing two arrays in ruby," I need to check whether two arrays contain the same data in any order.Using the imaginary compare method, I would like to do: I used arr1.sort == arr2.sort, which appears to work, but is there a better way of doing this? <code>  arr1 = [1,2,3,5,4]arr2 = [3,4,2,1,5]arr3 = [3,4,2,1,5,5]arr1.compare(arr2) #true arr1.compare(arr3) #false",Comparing two arrays ignoring element order in Ruby
Comparing two arrays in Ruby," I need to check whether two arrays contain the same data in any order.Using the imaginary compare method, I would like to do: I used arr1.sort == arr2.sort, which appears to work, but is there a better way of doing this? <code>  arr1 = [1,2,3,5,4]arr2 = [3,4,2,1,5]arr3 = [3,4,2,1,5,5]arr1.compare(arr2) #true arr1.compare(arr3) #false",Comparing two arrays ignoring element order in Ruby
Handling exception raised in ruby threads," I am looking for a solution of classic problem of exception handling. Consider following piece of code: This code catches the exception after 5 seconds.But if I change the array as [15, 5, 20, 3], above code catch the exception after 15 seconds. In short, it always catch the exception raised in first thread.Any idea, why so. Why doesn't it catch the exception after 3 seconds each time? How do I catch the first raised exception by any thread? <code>  def foo(n) puts "" for #{n}"" sleep n raise ""after #{n}""endbegin threads = [] [5, 15, 20, 3].each do |i| threads << Thread.new do foo(i) end end threads.each(&:join) rescue Exception => e puts ""EXCEPTION: #{e.inspect}"" puts ""MESSAGE: #{e.message}""end",Handling exceptions raised in a Ruby thread
Facebook Redirect url in ruby on rails, I have followed the omniauth devise facebook app as explained by Ryan in episode 235.After the user authorizes we are getting the error at http://localhost:3000/auth/facebook/callback?code=13444...The following are the facebook settings : App Domain : localhost siteurl: locahost:3000/ canvas url: http://localhost:3000/auth/facebook/please tell me where am i going wrong? <code> ,Facebook Redirect url in ruby on rails open ssl error
Sort array by highest value - Ruby," I have an array of strings like this: [""Brazil (62)"", ""PalestinianTerritoryOccupied (6)"", ""Macedonia (2)"", ""Germany (6)""]I want to sort them by the highest value but it's got me stumped. I've tried all sorts of weird, wonderful (and useless) things like: <code>  cont.sort! { |it| it.scan(/\d+/).to_s.to_i}",Sort array by highest value calculated from contents
ruby how can I remove non word characters?," I want 'This Is A 101 Test' to be 'This Is A Test', but I can't get the syntax right. <code>  src = 'This Is A 101 Test'puts ""A) "" + src # base => ""This Is A 101 Test""puts ""B) "" + src[/([a-z]+)/] # only does first word => ""his""puts ""C) "" + src.gsub!(/\D/, """") # Does digits, I want alphabetic => ""101""puts ""D) "" + src.gsub!(/\W///g) # Nothing. => """"puts ""E) "" + src.gsub(/(\W|\d)/, """") # Nothing. => """"",How can I remove non word characters from a text?
How can I remove non word characters from a text in Ruby?," I want 'This Is A 101 Test' to be 'This Is A Test', but I can't get the syntax right. <code>  src = 'This Is A 101 Test'puts ""A) "" + src # base => ""This Is A 101 Test""puts ""B) "" + src[/([a-z]+)/] # only does first word => ""his""puts ""C) "" + src.gsub!(/\D/, """") # Does digits, I want alphabetic => ""101""puts ""D) "" + src.gsub!(/\W///g) # Nothing. => """"puts ""E) "" + src.gsub(/(\W|\d)/, """") # Nothing. => """"",How can I remove non word characters from a text?
optparse in ruby and params not starting with -, I want to have params like this: and: and I can't get how to do that. The only thing I managed to do is to use params with -- at the beginning.Any ideas? <code>  program dothis --additional --options program dothat --with_this_option=value,OptionParse in Ruby and params not starting with '-'
Ruby Nuby needs to know how to iterate over an array with HAML," I have this in a HAML layout (layout.haml) And I have this in the HAML template index.html.haml When I compile, I get this: What am I doing wrong? <code>  - @fonts.each do |font| %link{:href=>""//fonts.googleapis.com/css?family={font}"",:rel=>""stylesheet"",:type=>""text/css""} - @fonts = ['Lato:400,300,100','Droid+Serif:700,400']; <link href='//fonts.googleapis.com/css?family={font}' rel='stylesheet' type='text/css' /><link href='//fonts.googleapis.com/css?family={font}' rel='stylesheet' type='text/css' />",How to iterate over an array with HAML?
"Ruby - shorter way to remove non-characters than gsub(/\d|\W/, """")"," i.e. can I remove the or (""|"").Here's how I got here, can I get shorter? n.d. D) and E) are what I want for output. Just characters. <code>  my_string = 'Here's the #: 49848! - but will dashes, commas & stars (*) show?'puts src.gsub(/\d|\W/, """") src = ""Here's the #: 49848! - but will dashes, commas & stars (*) show?""puts ""A) - "" + srcputs ""B) - "" + src.gsub(/\d\s?/, """")puts ""C) - "" + src.gsub(/\W\s?/, """")puts ""D) - "" + src.gsub(/\d|\W\s?/, """")puts ""E) - "" + src.gsub(/\d|\W/, """")puts ""F) - "" + srcA) - Here's the #: 49848! - but will dashes, commas & stars (*) show?B) - Here's the #: ! - but will dashes, commas & stars (*) show?C) - Heresthe49848butwilldashescommasstarsshowD) - HeresthebutwilldashescommasstarsshowE) - HeresthebutwilldashescommasstarsshowF) - Here's the #: 49848! - but will dashes, commas & stars (*) show?","Shorter way to remove non-characters than gsub(/\d|\W/, """")"
How to set transaction isolation level using ActiveRecord connection? [recommend a gem]," I need to manage transaction isolation level on a per-transaction basis in a way portable across databases (SQLite, PostgreSQL, MySQL at least).I know I can do it manually, like that: ...but I would expect something like: <code>  User.connection.execute('SET SESSION TRANSACTION ISOLATION LEVEL SERIALIZABLE') User.isolation_level( :serializable ) do # ...end",How to set transaction isolation level using ActiveRecord connection?
How to override static class method by module in Ruby?," How to create a module which will override static method?This is an interview question for deep understanding ruby features. Don't suggest another formulation of the problem :) <code>  module Imodule ???endclass Some include Imodule def self.imethod puts ""original"" endendSome.imethod# => ""overrided""",How to override static class method using module in Ruby?
Where can I find math intense apps in Ruby & Ruby on Rails," I have found many rails apps mainly on the enterprise, social networking kind of web apps. I see that Ruby is compared with some of the great OOPS languages like Java & C# but I am really finding it hard to get some Math Intense apps. Any knowledgeble input (links to sample programs etc.), where the usage of the language is shown with ease and is like jumpstart or show how the language can be used for variety of math probs, is greatly appreciated. <code> ",Where can I find math intense apps in Ruby
Copy ruby and gem environment to another server," I have a server, ""server1"", set up with with Ruby 1.8.7 and Rubygems 1.6.2, with several gems installed.I want to replicate it on another server ""server2"" which has matching versions of Ruby and Rubygems.I FTP'ed the installed gem folders from server1 to server2 into the same paths.Now, in server2 when I do: no gems appear, although they were copied into the correct gem path.Can anyone tell me whether this is a correct way to install gems, or whether there are better option rather than installing each gem on its own? <code>  gem list",How can I copy gems to another server?
ruby - list all versions of a gem available at remote site, I'm trying to find out all the remotely available versions of a specified gem.I tried using: But it shows: Any ideas? <code>  gem list rhc --remote *** REMOTE GEMS ***rhc (0.84.15)rhcp (0.2.18)rhcp_shell (0.2.12),How do I list all versions of a gem available at a remote site?
does the || operator evaluate the second argument even if the first argument is true?," I'm trying to evaluate the expression (a=10) || (rr=20) while the rr variable is not definedso typing rr in the ruby console before evaluating the previous expression returns When I write the expression (a=10) || (rr=20) it returns 10, and when I write rr afterwards it says nil so, why is this happening? Shouldn't rr be defined only if the second argument of the || operator is evaluated, which should be never based on the documentation? <code>  rrNameError: undefined local variable or method `rr' for main:Objectfrom (irb):1from :0 (a=10) || (rr=20)rr # => nil",Does the || operator evaluate the second argument even if the first argument is true?
How to create a PDF from template PDF with Ruby? FPDI?," I have a couple of PDF template files with complex content and several blank regions/areas in them. I need to be able to write text in those blank regions and save the resulting PDFs in a folder.I googled for answers on this question quite intensively, but I didn't find definite answers. One of the better solutions is PDF::Toolkit, but it would require the purchase of Adobe Acrobat to add replaceable attributes to existing PDF documents.The PHP world is blessed with FPDI that can be used to simply open a PDF file and write/draw on it over the existing content. There is a Ruby port of this library, but the last commit for it happened at the beginning of 2009. Also that project doesn't look like it is widely used and supported.The question is: What is the better Ruby way of editing, writing or drawing on existing PDFs?This question also doesn't seem to be answered on here. These questions are related, but not really the same:Prawn gem: How to create the .pdf from an *existing* file (.xls)watermark existing pdf with rubyRuby library for manipulating existing PDFHow to replace a word in an existing PDF using Ruby Prawn? <code> ",How to edit or write on existing PDF with Ruby?
Ruby. Delete files. Permission denied for admin, System: in 'delete': Permission denied Errno:EACCESthe line: File.delete('filename.ext') If you know any other method to delete the file bypassing this error I'm glad to distribute you some points :) I mean any help would be appreciated ;-pI was suspecting that file wasn't closed but it is closed.Source code: <code>  Windows Server 2008Ruby 192 Dir.foreach(FileUtils.pwd()) do |f| a[i] = f if a[i].end_with?('log') file = File.open(a[i]) if file.ctime < TIME_TO_REMOVE_LOGS || file.mtime < TIME_TO_REMOVE_LOGS || File.size(a[i]) > MAX_FILE_SIZE puts a[i] puts file.ctime puts file.mtime # zipping the file orig = a[i] Zlib::GzipWriter.open('arch_log.gz') do |gz| gz.mtime = File.mtime(orig) gz.orig_name = orig gz.write IO.binread(orig) end file.close end end File.delete(a[i]) i = i + 1end,Cannot use File.delete to remove file
Can use File.delete to remove file, System: in 'delete': Permission denied Errno:EACCESthe line: File.delete('filename.ext') If you know any other method to delete the file bypassing this error I'm glad to distribute you some points :) I mean any help would be appreciated ;-pI was suspecting that file wasn't closed but it is closed.Source code: <code>  Windows Server 2008Ruby 192 Dir.foreach(FileUtils.pwd()) do |f| a[i] = f if a[i].end_with?('log') file = File.open(a[i]) if file.ctime < TIME_TO_REMOVE_LOGS || file.mtime < TIME_TO_REMOVE_LOGS || File.size(a[i]) > MAX_FILE_SIZE puts a[i] puts file.ctime puts file.mtime # zipping the file orig = a[i] Zlib::GzipWriter.open('arch_log.gz') do |gz| gz.mtime = File.mtime(orig) gz.orig_name = orig gz.write IO.binread(orig) end file.close end end File.delete(a[i]) i = i + 1end,Cannot use File.delete to remove file
Luhn algorithm Ruby," I've been trying to implement the Luhn algorithm in Ruby. I've been following these steps:The formula verifies a number against its included check digit, which is usually appended to a partial account number to generate the full account number. This account number must pass the following test:Counting from the check digit, which is the rightmost, and moving left, double the value of every second digit.Sum the digits of the products (e.g., 10 = 1 + 0 = 1, 14 = 1 + 4 = 5) together with the undoubled digits from the original number.If the total modulo 10 is equal to 0 (if the total ends in zero) then the number is valid according to the Luhn formula; else it is not valid.http://en.wikipedia.org/wiki/Luhn_algorithmThis is what I've came up with: However, this returns false every time I test it. I am not sure what I am doing wrong. <code>  def validCreditCard(cardNumber) sum = 0 nums = cardNumber.to_s.split("""") nums.insert(nums.size, ""x"") nums.reverse! nums.each_with_index do |n, i| if !n.eql?(""x"") sum += (i % 2 == 0) ? n.to_i : n.to_i * 2 end end if (sum % 10) == 0 return true else return false endend",Implementing the Luhn algorithm in Ruby
Getting the class of a BasicObject instance in ruby 1.9," I have a script that iterates using ObjectSpace#each_object with no args. Then it prints how many instances exist for each class. I realized that some classes redefine the #class instance method, so I had to find another way to get the actual class; Let's say it's stored in variable ""klass"", and klass === object is true.In Ruby 1.8 I could do this, assuming Object wasn't monkeypatched: This worked for ActiveSupport::Duration instances: But, in Ruby 1.9 this no longer works: It turns out that ActiveSupport::Duration subclasses ActiveSupport::BasicObject. The latter is made to subclass ::BasicObject in Ruby 1.9, so Object is excluded from the inheritance chain. This doesn't, and can't, happen in Ruby 1.8, so ActiveSupport::BasicObject is a subclass of Object.I haven't found any way to detect the actual class of a Ruby 1.9 object that isn't an instance of Object. BasicObject in 1.9 is really bare-bones: Ideas?UPDATE:Since ruby 1.9 reached end-of-life, I'm changing my accept to @indirect's answer. The mentions of ruby 1.9 above are merely for historical purposes, to show that the change from 1.8 to 1.9 was the original cause of my problem. <code>  Object.instance_method(:class).bind(object).call # Ruby 1.8# (tries to trick us)20.seconds.class=> Fixnum# don't try to trick us, we can tellObject.instance_method(:class).bind(20.seconds).call=> ActiveSupport::Duration # Ruby 1.9# we are not smart...Object.instance_method(:class).bind(20.seconds).callTypeError: bind argument must be an instance of Object from (irb):53:in `bind' from (irb):53 from /Users/user/.rvm/rubies/ruby-1.9.2-p0/bin/irb:17:in `<main>' BasicObject.instance_methods=> [:==, :equal?, :!, :!=, :instance_eval, :instance_exec, :__send__]",How do I get the class of a BasicObject instance?
How do I getting the class of a BasicObject instance?," I have a script that iterates using ObjectSpace#each_object with no args. Then it prints how many instances exist for each class. I realized that some classes redefine the #class instance method, so I had to find another way to get the actual class; Let's say it's stored in variable ""klass"", and klass === object is true.In Ruby 1.8 I could do this, assuming Object wasn't monkeypatched: This worked for ActiveSupport::Duration instances: But, in Ruby 1.9 this no longer works: It turns out that ActiveSupport::Duration subclasses ActiveSupport::BasicObject. The latter is made to subclass ::BasicObject in Ruby 1.9, so Object is excluded from the inheritance chain. This doesn't, and can't, happen in Ruby 1.8, so ActiveSupport::BasicObject is a subclass of Object.I haven't found any way to detect the actual class of a Ruby 1.9 object that isn't an instance of Object. BasicObject in 1.9 is really bare-bones: Ideas?UPDATE:Since ruby 1.9 reached end-of-life, I'm changing my accept to @indirect's answer. The mentions of ruby 1.9 above are merely for historical purposes, to show that the change from 1.8 to 1.9 was the original cause of my problem. <code>  Object.instance_method(:class).bind(object).call # Ruby 1.8# (tries to trick us)20.seconds.class=> Fixnum# don't try to trick us, we can tellObject.instance_method(:class).bind(20.seconds).call=> ActiveSupport::Duration # Ruby 1.9# we are not smart...Object.instance_method(:class).bind(20.seconds).callTypeError: bind argument must be an instance of Object from (irb):53:in `bind' from (irb):53 from /Users/user/.rvm/rubies/ruby-1.9.2-p0/bin/irb:17:in `<main>' BasicObject.instance_methods=> [:==, :equal?, :!, :!=, :instance_eval, :instance_exec, :__send__]",How do I get the class of a BasicObject instance?
How to sort by join table additional data," I've got a RoR project in the works. Here are the applicable sections of my models.Home Community Availability The ""availabilities"" table in the database has the additional data column ""price""So now I can call and get back the availabilities data ordered by price as I want. My question is this:Is there a way to automatically order Homes by avaliabilities.first.price (first = lowest)? Maybe something with default_scope :order? <code>  has_many :communities, :through => :availabilitieshas_many :availabilities, :order => ""price ASC"" has_many :homes, :through => :availabilitieshas_many :availabilities belongs_to :homebelongs_to :community @home.availabilities.each do |a| a.community.name a.price",Rails - Sort by join table data
method invocation in class definition?," In the above, what is validates from a Ruby standpoint? It's not a method definition, it's not a data definition or declaration. So, evidently it's a method invocation, right there in the body of the class. I have never seen a method invoked like that directly in a class (i.e. outside of a method definition), not even in the Ruby programming tutorial I'm going through now: http://ruby-doc.org/docs/ProgrammingRuby/.So, if it's a method invocation, at what point is it being invoked? I tried the following as a test: print ""cat"" is being executed exactly once, regardless if any actual Person objects are being declared or not, so evidently just when parsing the class definition, Ruby sees the method print and says, ""OK I will just go ahead and execute this now"" but never does so again.So, where is the Ruby documentation that will help me understand what is going on with validates above? <code>  class Person < ActiveRecord::Base validates :terms_of_service, :acceptance => trueend class Person print ""cat"" end#p = Person.new#q = Person.new",Method invocation in class definition?
ActiveRecord Association add count to includes," Example I want to create association which contains logic of count tickets of user and use it in includes (user has_one ticket_count) I tried In this case association query in include should use count with group by ...How can I implement this using rails?UpdateI can't change table structureI want AR generate 1 query for collection of users with includesUpdate2I know SQL an I know how to select this with joins, but my question is now like ""How to get data"" . My question is about building association which I can use in includes. ThanksUpdate3I tried create association created like user has_one ticket_count , but looks like has_one doesn't support association extensions has_one doesn't support :group optionhas_one doesn't support finder_sql <code>  class User has_many :tickets end Users.includes(:tickets_count) has_one :tickets_count, :select => ""COUNT(*) as tickets_count,tickets.user_id "" ,:class_name => 'Ticket', :group => ""tickets.user_id"", :readonly => true User.includes(:tickets_count) ArgumentError: Unknown key: group",ActiveRecord Association select counts for included records
(ruby)how can i access the class method and instance method?," By searching some blog and article I found that every class in Ruby is itself an instance of Class. What is the difference between class methods and instance methods and did ruby allow to create object of object?I try to do something like this but still not able to understand NOW FULLY CONFUSED so tell me about this  <code>  str = Class.new(String)=> #<Class:0xb5be1418>my_str = str.new()=> """"my_str = str.new(""hello"")=> ""hello""my_str.class=> #<Class:0xb5be1418>str.class=> Class",How can I access the class method and instance method in ruby?
How can I access the class method and instance method?," By searching some blog and article I found that every class in Ruby is itself an instance of Class. What is the difference between class methods and instance methods and did ruby allow to create object of object?I try to do something like this but still not able to understand NOW FULLY CONFUSED so tell me about this  <code>  str = Class.new(String)=> #<Class:0xb5be1418>my_str = str.new()=> """"my_str = str.new(""hello"")=> ""hello""my_str.class=> #<Class:0xb5be1418>str.class=> Class",How can I access the class method and instance method in ruby?
Hiding argument of block in ruby," I'm writing a simple dsl in ruby. Few weeks ago I stumbled upon some blog post, which show how to transform code like: into cleaner code: I can't remember how to do this and I'm not sure about downsides but cleaner syntax is tempting. Does anyone have a clue about this transformation? <code>  some_method argument do |book| book.some_method_on_book book.some_other_method_on_book :with => argumentend some_method argument do some_method_on_book some_other_method_on_book :with => argumentend",DSL block without argument in ruby
"Append a value in a hash object (in ruby), using an already existing key?"," How can I append a value in a Hash object using a key that already has a value. So for exampleif I have I know its easy to write my own method, but I just wanted to know if there is a built in method.  <code>  >> my_hash = Hash.new>> my_hash[:my_key] = ""Value1""# then append a value, lets say ""Value2"" to my hash, using that same key ""my_key""# so that it can be>> my_hash[:my_key]=> [""Value1"", ""Value2""]","Append a value in a hash object (in Ruby), using an already existing key?"
How to disable warning for a particular file, Is there a way to disable warning: already initialized constant when loading particular files? <code> ,How to disable warning for redefining a constant when loading a file
Extending the Kernel doesn't include methods on main:Object," I'm trying to add a method into the Kernel module, but instead of reopening the Kernel and directly defining an instance method, I'm writing a module and I want Kernel to extend/include that module. When I run this in IRB: If I check the instance_methods on Kernel, I can see #hello was added to the Kernel, but not in main Object.I've also tried using include, but the same thing happens: However, if I define it directly: Then it does get included in the main Object. Including the Talk module in Object works too: Perhaps I'm doing this wrong, or I'm missing something simple, but this behavior is confusing me. <code>  module Talk def hello puts ""hello there"" endendmodule Kernel extend Talkend $ helloNameError: undefined local variable or method `hello' for main:Objectfrom (irb):12from /Users/JackC/.rvm/rubies/ruby-1.9.2-p290/bin/irb:16:in `<main> module Kernel include Talkend module Kernel def hello puts ""hello there"" endend $ hellohello there => nil class Object include Talkend",Including/Extending the Kernel doesn't add those methods on main:Object
Extending the Kernel doesn't add those methods on main:Object," I'm trying to add a method into the Kernel module, but instead of reopening the Kernel and directly defining an instance method, I'm writing a module and I want Kernel to extend/include that module. When I run this in IRB: If I check the instance_methods on Kernel, I can see #hello was added to the Kernel, but not in main Object.I've also tried using include, but the same thing happens: However, if I define it directly: Then it does get included in the main Object. Including the Talk module in Object works too: Perhaps I'm doing this wrong, or I'm missing something simple, but this behavior is confusing me. <code>  module Talk def hello puts ""hello there"" endendmodule Kernel extend Talkend $ helloNameError: undefined local variable or method `hello' for main:Objectfrom (irb):12from /Users/JackC/.rvm/rubies/ruby-1.9.2-p290/bin/irb:16:in `<main> module Kernel include Talkend module Kernel def hello puts ""hello there"" endend $ hellohello there => nil class Object include Talkend",Including/Extending the Kernel doesn't add those methods on main:Object
"Remove all non-alphabetical,non-numerical characters from array?"," If I wanted to remove things like:.!,'""^-# from an array of strings, how would I go about this while retaining all alphabetical and numeric characters.Allowed alphabetical characters should also include letters with diacritical marks including or . <code> ","Remove all non-alphabetical, non-numerical characters from a string?"
"Remove all non-alphabetical,non-numerical characters from array of strings?"," If I wanted to remove things like:.!,'""^-# from an array of strings, how would I go about this while retaining all alphabetical and numeric characters.Allowed alphabetical characters should also include letters with diacritical marks including or . <code> ","Remove all non-alphabetical, non-numerical characters from a string?"
"Rails, Haml, Escaping script tag inside javascript"," I'm using backbone, and the general way for passing the collections when the page load is which is fine and works well, until someone decides to add the text ""<script>alert(""owned"")</script>"" to one of the store fields. the last </script> obviously closes the javascript. How can this be circumvented? The above outputs: <code>  window.router = new Routers.ManageRouter({store: #{@store.to_json}); :javascript $(function() { window.router = new Dotz.Routers.ManageRouter({store: #{@store.to_json}}); Backbone.history.start(); }); <script> //<![CDATA[ $(function() { window.router = new Dotz.Routers.ManageRouter({store: '{""_id"":""4f3300e19c2ee41d9a00001c"", ""points_text"":""<script>alert(\""hey\"");</script>""'}); Backbone.history.start(); }); //]]> </script>",Escaping </script> tag inside javascript
"Regex: How to convert markdown, reference style links?"," I'm trying to write a regular expression that replaces a markdown-style links but it doesn't seem to be working. This is what I have so far: What am I doing wrong? <code>  # ruby code:text = ""[link me up](http://www.example.com)""text.gsub!(%r{\[(\+)\]\((\+)\)}x, %{<a target=""_blank"" href=""\\1"">\\2</a>})",How to convert Markdown-style links using regex?
How to get the total number of pages of the existing pdf in ruby on rails.. any idea?, How to get the total number of pages of the existing pdf in rails? <code> ,How to get the total number of pages of the existing pdf in ruby on rails?
how do i loop over a hash of hashes in ruby," I have this hash: How do I access the separate values in the value hash on the loop? <code>  h => {""67676.mpa""=>{:link=>""pool/sdafdsaff"", :size=>4556}} > h.each do |key, value|> puts key> puts value> end67676.mpalinkpool/sdafdsaffsize4556",How do I loop over a hash of hashes?
How can I exclude text nodes from a Nokogiri::XML::NodeSet object retrieved by xpath?," I am using Nokogiri with Ruby to interpret the contents of an XML file. I would like to get an array (or similar) of all elements that are direct children of <where> in my example. However, I am getting various text nodes (e.g. ""\n\t\t\t""), which I do not want. Is there any way I can remove or ignore them? The above Ruby script outputs:[#<Nokogiri::XML::Text:0x100344c ""\n\t\t\t"">, #<Nokogiri::XML::Element:0x1003350 name=""username"" attributes=[#<Nokogiri::XML::Attr:0x10032fc name=""compare"" value=""e"">] children=[#<Nokogiri::XML::Text:0x1007580 ""Admin"">]>, #<Nokogiri::XML::Text:0x100734c ""\n\t\t\t"">, #<Nokogiri::XML::Element:0x100722c name=""rank"" attributes=[#<Nokogiri::XML::Attr:0x10071d8 name=""compare"" value=""gt"">] children=[#<Nokogiri::XML::Text:0x1006cec ""5"">]>, #<Nokogiri::XML::Text:0x10068a8 ""\n\t\t"">]I would like to somehow obtain the following object:[#<Nokogiri::XML::Element:0x1003350 name=""username"" attributes=[#<Nokogiri::XML::Attr:0x10032fc name=""compare"" value=""e"">] children=[#<Nokogiri::XML::Text:0x1007580 ""Admin"">]>, #Nokogiri::XML::Element:0x100722c name=""rank"" attributes=[#<Nokogiri::XML::Attr:0x10071d8 name=""compare"" value=""gt"">] children=[#<Nokogiri::XML::Text:0x1006cec ""5"">]>]Currently I can work around the issue using but c.length == 5. It would make my life easier if someone can suggest how to exclude direct child text nodes from c, so that c.length == 2 <code>  @body = ""<xml> <request> <where> <username compare='e'>Admin</username> <rank compare='gt'>5</rank> </where> </request></xml>"" #in my code, the XML contains tab-indentation, rather than spaces. It is edited here for display purposes.@noko = Nokogiri::XML(@body)xml_request = @noko.xpath(""//xml/request"")where = xml_request.xpath(""where"")c = where.childrenp c c.each{|child| if !child.text? ... end}",Get children of an element without the text nodes
How do you sort a JSON object in Ruby on Rails?," I have an object as follows: I want to sort this by fname, alphabetically case insensitive so it would result inid: 1,3,2How can I sort this? I'm trying: But that has no effect. <code>  [{:id=>2, :fname=>""Ron"", :lname=>""XXXXX"", :photo=>""XXX""}, {:id=>3, :fname=>""Dain"", :lname=>""XXXX"", :photo=>""XXXXXXX""}, {:id=>1, :fname=>""Bob"", :lname=>""XXXXXX"", :photo=>""XXXX""}] @people.sort! { |x,y| y[:fname] <=> x[:fname] }",How do you sort an array of objects?
configure: error: no acceptable C compiler found in $PATH," rebuilding a mac from scratch. Installed xcode and rvm then trying to install rubies but they are all giving me: The log has: Do I need the gcc C compliler? How do I install it ? <code>  Error running ' ./configure --prefix=/Users/durrantm/.rvm/rubies/ruby-1.9.3-p125 --enable-shared --disable-install-doc --with-libyaml --with-opt-dir=/Users/durrantm/.rvm/usr ', please read /Users/durrantm/.rvm/log/ruby-1.9.3-p125/configure.logThere has been an error while running configure. Halting the installation.Michaels-MacBook-Air:~ durrantm$ checking for gcc... nochecking for cc... nochecking for cl.exe... noconfigure: error: in `/Users/durrantm/.rvm/src/ruby-1.9.2-p290':configure: error: no acceptable C compiler found in $PATH",Xcode - configure: error: no acceptable C compiler found in $PATH
Code Editor API (with line number) in Ruby On rails," How to get and open a file In an Editor with Line Numberas Below:So, my text File could open in the editor below and can save my changes on edit. Is there any Code Editor(API/Plugin) available online for doing this? <code>  --------------------------------------------------------- 1 | | 2 | | 3 | | 4 | | 5 | | ---------------------------------------------------------",Code Editor API (with line number) and code highlighter
Code Editor API (with line number)  and code highlighter," How to get and open a file In an Editor with Line Numberas Below:So, my text File could open in the editor below and can save my changes on edit. Is there any Code Editor(API/Plugin) available online for doing this? <code>  --------------------------------------------------------- 1 | | 2 | | 3 | | 4 | | 5 | | ---------------------------------------------------------",Code Editor API (with line number) and code highlighter
"Merge or sum 2 arrays on ""keys"""," This is the array version of: Sum 2 hashes attributes with the same keyI have 2 arrays, for example: How can i sum each on the first value (if it exists) to get: <code>  a = [[1,10],[2,20],[3,30]]b = [[1,50],[3,70]] c = [[1,60],[2,20],[3,100]]","Merge or sum 2 arrays on ""keys"" in ruby"
"In Ruby, how to make the String.include? method ignore case?"," I want to know what's the best way to make the String.include? methods ignore case. Currently I'm doing the following. Any suggestions? Thanks! Edit:How about Array.include?. All elements of the array are strings. <code>  a = ""abcDE""b = ""CD""result = a.downcase.include? b.downcase",Case-insensitive Array#include?
"Ruby, what's ->?", In the following example: What's ->? I am familiar with => but first time I am seeing ->. <code>  default: -> { Time.now },What is the -> (stab) operator in Ruby?
How to run ruby programs?," Does anyone know how to run/compile Ruby programs on Windows 7? For example you can compile Java in Eclipse, but I can't seem to find one for Ruby. <code> ",How to run ruby programs on Windows 7?
"How are ruby programs executed, and how do I set up an environment on Windows?"," Does anyone know how to run/compile Ruby programs on Windows 7? For example you can compile Java in Eclipse, but I can't seem to find one for Ruby. <code> ",How to run ruby programs on Windows 7?
relative File Path in RSpec," I have a RSpec test for a class in /lib/classes which needs access to a zip file (no upload). The file is stored in /spec/fixtures/files/test.zip. How do I input the correct path so its environment agnostic, i.e. without absolute path? <code> ",Relative File Path in RSpec
can't create plugin with rails?," i've a problem with rails in latest version. I 've create a new app (rails new MyProject) but i don't have script/generate, only have script/rails and when i type Do you have any idea how generate plugin template? it's possible to create plugin without this command?PS: i'm using Rails 3.2.1 with ruby 1.8.7 [universal-darwin11.0] <code>  ruby ./script/rails generate plugin my_plugin""Could not find generator plugin."".",can't create plugin with Rails 3.2?
How can I use a colon : in a nokogiri node name?," I would like the node name in the following code to be ""node:name"" but instead the name is put into the text of the field. How can I use the colon or other special characters in a node name with Nokogiri? <code>  require 'nokogiri'file = File.new(""/Users/user_a/code/xmler/test.xml"", ""w+"")builder = Nokogiri::XML::Builder.new do |xml| xml.node:name do endendfile << builder.to_xmlfile.closeputs builder.to_xml","How to use a colon ("":"") in a Nokogiri node name"
Why does Ruby not support method overloading, Instead of supporting method overloading Ruby overwrites existing methods. Can anyone explain why the language was designed this way? <code> ,Why doesn't ruby support method overloading?
How do RVM and RBENV actually work?," I am interested in how RVM and rbenv actually work.Obviously they swap between different versions of Ruby and gemsets, but how is this achieved? I had assumed they were simply updating symlinks, but having delved into the code (and I must admit my knowledge of Bash is superficial) they appear to be doing more than this. <code> ",How do RVM and rbenv actually work?
How do RVM and RBEnv actually work?," I am interested in how RVM and rbenv actually work.Obviously they swap between different versions of Ruby and gemsets, but how is this achieved? I had assumed they were simply updating symlinks, but having delved into the code (and I must admit my knowledge of Bash is superficial) they appear to be doing more than this. <code> ",How do RVM and rbenv actually work?
Passing Variables Between Ruby Classes," I'm creating a card game with multiple classes. Currently, I'm using global variables to hold the $shuffled_deck, $players_hand, and $dealers_hand variables, but I worry when using global variables (perhaps, needlessly) and would prefer to use instance variables. I've been reading around, but nothing is really clicking. Can anyone help point me in the right direction with this? Using instance variables I haven't been able to save the @players_hand and @dealers_hand to be able to use them in other classes. For instance, I have @players_hand from the Player class. I have the Dealer class draw a card, but I can't pull that @players_hand into the Dealer class to add the two together. My current code is: <code>  class Blackjack def initialize @player = Player.new @dealer = Dealer.new endendclass Dealer def initialize @deck = Deck.new $dealers_hand = 0 end def hit_dealer @deck.hit_dealer end def hit_player @deck.hit_player end def draw_card @hit = $shuffled_deck end def shuffle @deck.suits endendclass Player def initialize $players_hand = 0 end endclass Deck def suits #code that shuffled the deck.. $shuffled_deck = @shuffled_deck end def hit_player @hit = $shuffled_deck.pop end def hit_dealer @hit = $shuffled_deck.pop endend",How do I pass variables between Ruby classes?
Relative path to your project directory in ruby application," In my Ruby project I am using a mess of things like moving and editing files on several remote boxes and I really need something like a relative path to my root project directory. I have many processing folders which are used in many methods.Right now I have paths hardcoded, but that makes me unhappy. <code> ",Relative path to your project directory
"Ruby - What is the difference between map, each and collect?"," In Ruby, is there any difference between the functionalities of each, map, and collect? <code> ","What is the difference between map, each, and collect?"
Ruby inject with intial being a hash," Can any one tell me why the following: throws the error: whereas the following works? <code>  ['a', 'b'].inject({}) {|m,e| m[e] = e } IndexError: string not matched from (irb):11:in `[]=' from (irb):11:in `block in irb_binding' from (irb):11:in `each' from (irb):11:in `inject' from (irb):11 from C:/Ruby192/bin/irb:12:in `<main>' a = {}a[""str""] = ""str""",Ruby inject with initial being a hash
How/when the 'after_filter' runs?," I am using Ruby on Rails 3.1 and I would like to know (for performance reasons) whether or not the after_filter runs after that view files are rendered. That is, when an user access a my application URL, the related view file that he/she should display is rendered before that the after_filter runs or the after_filter runs before that the view file is rendered?In other words, the application server starts to send the rendered view data to the user before to run the after_filter or it waits to run the after_filter method and only then it sends that view data?P.S.: I opened this question because I would like to run some system updates (note: these updates doesn't affect the view output data and are not ""used by""/""necessary to"" the view at all) without impact on the end user experience (for example: slow loading of my application Web pages). <code> ",How/when the 'after_filter' works/runs?
How to add a comment with nokogiri, How do I add a <!-- blahblah --> comment to XML with Nokogiri's Builder?I want to have something like: I try something like this: But that gives me: <code>  <root> <!--blahblah--> <child/></root> Nokogiri::XML::Builder.new do |xml| xml.root { xml.comment('blahblah') xml.child }end <root> <comment>blahblah</comment> <child/></root>,How to add a comment with Nokogiri Builder
How to sort a string's characters alphebatically?," For Array, there is a pretty sort method to rearrange the sequence of elements. I want to achieve the same results for a String.For example, I have a string str = ""String"", I want to sort it alphabetically with one simple method to ""ginrSt"".Is there a native way to enable this or should I include mixins from Enumerable? <code> ",How to sort a string's characters alphabetically?
How to sort a string's characters alphabetically?," For Array, there is a pretty sort method to rearrange the sequence of elements. I want to achieve the same results for a String.For example, I have a string str = ""String"", I want to sort it alphabetically with one simple method to ""ginrSt"".Is there a native way to enable this or should I include mixins from Enumerable? <code> ",How to sort a string's characters alphabetically?
Ruby: How to sort a string's characters alphabetically?," For Array, there is a pretty sort method to rearrange the sequence of elements. I want to achieve the same results for a String.For example, I have a string str = ""String"", I want to sort it alphabetically with one simple method to ""ginrSt"".Is there a native way to enable this or should I include mixins from Enumerable? <code> ",How to sort a string's characters alphabetically?
what's the different between to_a and to_ary in ruby, What's the difference between to_a and to_ary? <code> ,What's the difference between to_a and to_ary?
What's the different between to_a and to_ary in ActiveRecord?, What's the difference between to_a and to_ary? <code> ,What's the difference between to_a and to_ary?
What's the difference between to_a and to_ary in ActiveRecord?, What's the difference between to_a and to_ary? <code> ,What's the difference between to_a and to_ary?
Has anyone gotten logstash working with ruby on rails?," Has anyone gotten Logstash working with ruby on rails?My client is telling to use Logstash for log collector etc. I am using ruby on rails technology. most of the part is almost done. But requirement is to get logs into logstash.Please let me know Is it possible,how?  <code> ",Can Logstash Work With Ruby on rails?
Get mail address from html code with nokogiri," How can I get the mail address from HTML code with Nokogiri? I'm thinking in regex but I don't know if it's the best solution.Example code: Does a method exist in Nokogiri to get the mail address if it is not between some tags? <code>  <html><title>Example</title><body>This is an example text.<a href=""mailto:example@example.com"">Mail to me</a></body></html>",How to get a mail address from HTML code with Nokogiri
How can I get a mail address from HTML code with Nokogiri?," How can I get the mail address from HTML code with Nokogiri? I'm thinking in regex but I don't know if it's the best solution.Example code: Does a method exist in Nokogiri to get the mail address if it is not between some tags? <code>  <html><title>Example</title><body>This is an example text.<a href=""mailto:example@example.com"">Mail to me</a></body></html>",How to get a mail address from HTML code with Nokogiri
Invisible hash keys," Ruby lets you define default values for hashes: Assignment of a value shows up when displaying the hash, but a modified default does not. Where's 'bad'? 'bad' shows up if we explicitly ask. Why does the modified default value not show up when displaying the hash? <code>  h=Hash.new(['alright'])h['meh'] # => [""alright""] h['good']=['fine','dandy']h['bad'].push('unhappy')h # => {""good""=>[""fine"", ""dandy""]} h['bad'] # => [""alright"", ""unhappy""]",Modifying the default hash value
Sinatra haml : How to pass an argument when calling a view file?," I wrote a webform using Sinatra and Haml that will be used to call a Ruby script.Everything seems fine except for one thing: I need to pass an argument to a Haml view file from the Sinatra/Ruby script.Here is a part of my code: If the script encounters an arror it will return a string including the word ""Error"". If this happens, I'm calling a Haml file which will show an error page to the users. If the script doesn't encounter an arror, it will return a success page.I want to include, in the success/fail page, the name of the new VM the user added. My problem is that I have no clue how to pass it in both my Haml files. I searched for a solution, but did not find anything. <code>  #!/usr/bin/env rubyrequire 'rubygems'require 'sinatra'require 'haml'get '/' do haml :indexendpost '/' do name = params[:name] vlan = params[:vlan] tmp = nil tmp = %x[./wco-hosts.rb -a -n #{name} -v #{vlan}] if tmp.include?(""Error"") haml :fail else haml :success endend",How to pass an argument when calling a view file?
how to compare to previes item in `each` iterator?," update: sorry, I fixed my program: Is there another beautiful way in ruby language to do the same thing ? btw, actually. a is a ActiveRecord::Relation in my real case.Thanks. <code>  a = [ 'str1' , 'str2', 'str2', 'str3' ]name = ''a.each_with_index do |x, i | if x == name puts ""#{x} found duplicate."" else puts x name = x if i!= 0 endend output: str1str2str2 found duplicate.str3",how to compare to previous item in `each` iterator?
converting string from underscore case to camel case in ruby," I am trying to convert a name from snake case to camel case. Are there any built-in methods?Eg: ""app_user"" to ""AppUser""(I have a string ""app_user"" I want to convert that to model AppUser). <code> ",Converting string from snake_case to CamelCase in Ruby
Converting string from snake case to camel case in ruby," I am trying to convert a name from snake case to camel case. Are there any built-in methods?Eg: ""app_user"" to ""AppUser""(I have a string ""app_user"" I want to convert that to model AppUser). <code> ",Converting string from snake_case to CamelCase in Ruby
how to find the path for ruby and bundle on ubuntu?, I installed ruby 1.9.3 on ubuntu 10.04 server. There is problem with capistrano to find the bundle. How to find the path for the ruby dir and where is bundle located? There are /.rvm/gems/ruby-1.9.3-p125 and /.rvm/gems/ruby-1.9.3-p125@global. There are bundles in multiple subdirs under /.rvm/.Thanks so much. <code> ,how to find installed path for ruby and bundle on ubuntu?
filter array of hashes to get only keys in another array," I'm trying get a subset of keys for each hash in an array. The hashes are actually much larger, but I figured this is easier to understand: I want to get only the id and start values.I've tried: but this returns an empty array.  <code>  [ { id:2, start: ""3:30"", break: 30, num_attendees: 14 }, { id: 3, start: ""3: 40"", break: 40, num_attendees: 4 }, { id: 4, start: ""4: 40"", break: 10, num_attendees: 40 }] return_keys = ['id','start']return_array = events.select{|key,val| key.to_s.in? return_keys}",How can I filter an array of hashes to get only the keys in another array?
How to setup a basic ruby project?," I want to create a small Ruby project with 10 ~ 20 classes/files. I need some gems and I want to use RSpec as a test framework.I might want to build a gem later on, but that is not certain.Is there some how-to or guide that shows me how to set up the basic structure of my project?Questions that I have are:Where do I put all my custom Errors/Exceptions?Are there some conventions out there for naming directories like lib, bin, src etc?Where do I put test data or documents?Where do I require all my files so I have access to them in my project?I know I could do everything from scratch, but I would like some guidance. There are some good gems out there that I could copy, but I am not certain what I really need and what I can delete.I looked at http://gembundler.com/, but it stops after setting up Bundler. <code> ",How do I set up a basic Ruby project?
Nesting a custom Liquid tag for <img> within a custom Liquid tag for <figure> and <figcaption>," Is it possible to nest custom Liquid tags written in ruby if one class has multiple optional tokens passed in as parameters? This question is rather hard for me to describe without providing the relevant example. Please excuse me if this question appears to be too specific a use case.Given the following ruby code, sourced from Octopress (a jekyll fork), which creates a custom Liquid tag to parse tags. What is the best way to create another custom tag for exhibiting the same functionality for the [<img>] element, but nested within a [<figure>] element and perhaps displaying the image alt description or an additional token as a [<figcaption>] element which could potentially include its own link? Or possibly even a series of class names for the element that say whether or not it should be centered or not.In other words, I might want the output to be something like: Am I wrong to assume that it is possible to nest custom Liquid tags? I'm sure I could rewrite the existing code a second time and modify it slightly to handle the additional attribute for [<figcaption>], but this seems rather redundant and against DRY principles. And as it currently stands, I'm rather confused as to how I might account for a possible, additional token given that the existing class takes optional tokens itself. <code>  # Title: Simple Image tag for Jekyll# Authors: Brandon Mathis http://brandonmathis.com# Felix Schfer, Frederic Hemberger# Description: Easily output images with optional class names, width, height, title and alt attributes## Syntax {% img [class name(s)] [http[s]:/]/path/to/image [width [height]] [title text | ""title text"" [""alt text""]] %}## Examples:# {% img /images/ninja.png Ninja Attack! %}# {% img left half http://site.com/images/ninja.png Ninja Attack! %}# {% img left half http://site.com/images/ninja.png 150 150 ""Ninja Attack!"" ""Ninja in attack posture"" %}## Output:# <img src=""/images/ninja.png""># <img class=""left half"" src=""http://site.com/images/ninja.png"" title=""Ninja Attack!"" alt=""Ninja Attack!""># <img class=""left half"" src=""http://site.com/images/ninja.png"" width=""150"" height=""150"" title=""Ninja Attack!"" alt=""Ninja in attack posture"">#module Jekyllclass ImageTag < Liquid::Tag @img = nil def initialize(tag_name, markup, tokens) attributes = ['class', 'src', 'width', 'height', 'title'] if markup =~ /(?<class>\S.*\s+)?(?<src>(?:https?:\/\/|\/|\S+\/)\S+)(?:\s+(?<width>\d+))?(?:\s+(?<height>\d+))?(?<title>\s+.+)?/i @img = attributes.reduce({}) { |img, attr| img[attr] = $~[attr].strip if $~[attr]; img } if /(?:""|')(?<title>[^""']+)?(?:""|')\s+(?:""|')(?<alt>[^""']+)?(?:""|')/ =~ @img['title'] @img['title'] = title @img['alt'] = alt else @img['alt'] = @img['title'].gsub!(/""/, '&#34;') if @img['title'] end @img['class'].gsub!(/""/, '') if @img['class'] end super end def render(context) if @img ""<img #{@img.collect {|k,v| ""#{k}=\""#{v}\"""" if v}.join("" "")}>"" else ""Error processing input, expected syntax: {% img [class name(s)] [http[s]:/]/path/to/image [width [height]] [title text | \""title text\"" [\""alt text\""]] %}"" end endendendLiquid::Template.register_tag('img', Jekyll::ImageTag) <figure class=center> <img src=""/contra.jpg"" alt=""One of the greatest nintendo games of all time""> <figcaption>Up Up Down Down Left Right Left Right B A B A <a href=""http://www.youtube.com/contramoves/"">Watch on Youtube</a></figcaption></figure>",Nesting two custom Liquid tags that have optional parameters
Rails count number of days between two dates," How do I count the number of days between these two dates? <code>  start_date = Date.parse ""2012-03-02 14:46:21 +0100""end_date = Date.parse ""2012-04-02 14:46:21 +0200""",Count number of days between two dates
strange behavior of ruby optparse lib," When I run this sample from the OptionParser documentation: and type: ruby test.rb -v 100, it returns: Shouldn't verbose be 100, not a boolean?I have no idea about this, does anyone have any advice? <code>  require 'optparse'options = {}OptionParser.new do |opts| opts.banner = ""Usage: example.rb [options]"" opts.on(""-v"", ""--[no-]verbose"", ""Run verbosely"") do |v| options[:verbose] = v endend.parse!p optionsp ARGV {:verbose=>true}[""100""]",OptionParser returning bool instead of argument?
Strange behavior of Ruby's OptionParser lib?," When I run this sample from the OptionParser documentation: and type: ruby test.rb -v 100, it returns: Shouldn't verbose be 100, not a boolean?I have no idea about this, does anyone have any advice? <code>  require 'optparse'options = {}OptionParser.new do |opts| opts.banner = ""Usage: example.rb [options]"" opts.on(""-v"", ""--[no-]verbose"", ""Run verbosely"") do |v| options[:verbose] = v endend.parse!p optionsp ARGV {:verbose=>true}[""100""]",OptionParser returning bool instead of argument?
rails 3.1: ruby idiom to prvent .each from throwing exception if none?," Is there a way to use .each so it does not throw an error if the object is nil or empty (without adding an additional nil/blank test?It seems that if I say phonelist.each do |phone| that if phonelist is empty, then the block should not be executed.But in my view (haml) I have - @myvar.phonelist.each do |phone| and if phonelist is empty, it throws a NoMethodError.I run into this a lot, and always workaround by adding an explicit check/branch for .blank? but it seems there should be an easier way to tell .each that empty means do nothing. <code> ",Rails 3.1: Ruby idiom to prevent .each from throwing exception if nil?
find with nil when there is no records," In my current rails program when I use something like When there is no user with ID=10 , I will have exception like : Can I get nil instead of raising exception so when I do something like : I just want to get nil when there is no records and I don't want to use begin/rescue Thanks  <code>  user = User.find(10) ActiveRecord::RecordNotFound: Couldn't find User with ID=10 unless user = Challenge.find(10) puts ""some error msg"" end",find() with nil when there are no records
How do you install Ruby 1.9.3 on OSX Lion?," I've been working on installing Ruby on my mac, OSX Lion. I've installed XCode, GCC, Readline, Homebrew, and JewleryBox, but I have no idea what's going on. Any pointers?Here's what my terminal says? Here's the console log: Thanks :)Edit: After installing macports and apple's 4.2 gcc (thanks guys), i'm getting this: Here's the console log: Thoughts?Edit: Jared. When I add --with-gcc=clang , the log looks like Edit: Thanks for all your help guys :), finally figured it out. Here's the sparknotes version of what I did:(If you're unfamiliar with the command line, http://jewelrybox.unfiniti.com/ is a godsend).Install RVM (https://rvm.beginrescueend.com/ )It manages multiple versions of Ruby at the same time on one comp (mac/linux only). Makes folders that different versions of Ruby can work independently in (from what I understand).Get XCode (https://developer.apple.com/xcode/ )Needed to compile code together. But, you also need gcc, which doesn't come packaged with the latest version of XCode. Soo....Went here (https://developer.apple.com/downloads/index.action ) and downloaded ""Command Line Tools For XCode"" Simple and straightforward to run.Installed Macports (http://www.macports.org/install.php ) so that I could...Install make (port install make ) through the terminal. Not sure what it does, but the terminal gave and error before installing, and no error afterwards. And NOW we're ready to rock :)run (rvm install 1.9.3)Hang out for a bit. It takes a while.Then (rvm 1.9.3 --default) Then (gem install rails)To install Ruby on Rails. This also takes a while.Once I was set up with rails 3, I made a test app.(rails new tester) - builds the directory(cd tester)- moves to the new directory(rails server) -sets up the serverThen, hop on the internet and visit (http://localhost:3000). If all goes well, you should see welcome to rails in your browser. <code>  hugo-pc:ruby-1.9.3-p125 squantowalks$ rvm install 1.9.3Fetching yaml-0.1.4.tar.gz to /Users/squantowalks/.rvm/archivesExtracting yaml-0.1.4.tar.gz to /Users/squantowalks/.rvm/srcError running 'tar xmzf /Users/squantowalks/.rvm/archives/yaml-0.1.4.tar.gz -C /Users/squantowalks/.rvm/src ', please read /Users/squantowalks/.rvm/log/ruby-1.9.3-p125/yaml/extract.logConfiguring yaml in /Users/squantowalks/.rvm/src/yaml-0.1.4.Error running ' ./configure --prefix=""/Users/squantowalks/.rvm/usr"" ', please read /Users/squantowalks/.rvm/log/ruby-1.9.3-p125/yaml/configure.logCompiling yaml in /Users/squantowalks/.rvm/src/yaml-0.1.4.Error running 'make ', please read /Users/squantowalks/.rvm/log/ruby-1.9.3-p125/yaml/make.logInstalling Ruby from source to: /Users/squantowalks/.rvm/rubies/ruby-1.9.3-p125, this may take a while depending on your cpu(s)...ruby-1.9.3-p125 - #fetching ruby-1.9.3-p125 - #extracted to /Users/squantowalks/.rvm/src/ruby-1.9.3-p125 (already extracted)ruby-1.9.3-p125 - #configuring ruby-1.9.3-p125 - #compiling Error running 'make ', please read /Users/squantowalks/.rvm/log/ruby-1.9.3-p125/make.logThere has been an error while running make. Halting the installation. [2012-03-08 18:20:17] make CC = clang LD = ld LDSHARED = clang -dynamiclib -O3 -ggdb -Wextra -Wno-unused-parameter -Wno-parentheses -Wno-long-long -Wno-missing-field-initializers -Werror=pointer-arith -Werror=write-strings -Werror=declaration-after-statement -Werror=shorten-64-to-32 -Werror=implicit-function-declaration -fno-common -pipe -L. -L/usr/local/lib CFLAGS = -O3 -ggdb -Wextra -Wno-unused-parameter -Wno-parentheses -Wno-long-long -Wno-missing-field-initializers -Werror=pointer-arith -Werror=write-strings -Werror=declaration-after-statement -Werror=shorten-64-to-32 -Werror=implicit-function-declaration -fno-common -pipe XCFLAGS = -include ruby/config.h -include ruby/missing.h -fvisibility=hidden -DRUBY_EXPORT CPPFLAGS = -D_XOPEN_SOURCE -D_DARWIN_C_SOURCE -I. -I.ext/include/x86_64-darwin11.3.0 -I./include -I. DLDFLAGS = -Wl,-undefined,dynamic_lookup -Wl,-multiply_defined,suppress -Wl,-flat_namespace -install_name /Users/squantowalks/.rvm/rubies/ruby-1.9.3-p125/lib/libruby.1.9.1.dylib -current_version 1.9.1 -compatibility_version 1.9.1 -Wl,-unexported_symbol,_Init_* -Wl,-unexported_symbol,*_threadptr_* -Wl,-u,_objc_msgSend SOLIBS = linking miniruby<internal:prelude>:1: [BUG] Bus Errorruby 1.9.3p125 (2012-02-16 revision 34643) [universal.x86_64-darwin11.3.0]-- Control frame information -----------------------------------------------c:0003 p:0002 s:0006 b:0006 l:000005 d:000005 TOP <internal:prelude>:1c:0002 p:---- s:0004 b:0004 l:000003 d:000003 FINISHc:0001 p:0000 s:0002 b:0002 l:0025e8 d:0025e8 TOP -- Ruby level backtrace information ----------------------------------------<internal:prelude>:1:in `<compiled>'-- C level backtrace information ------------------------------------------- See Crash Report log file under ~/Library/Logs/CrashReporter or /Library/Logs/CrashReporter, for the more detail of.-- Other runtime information -----------------------------------------------* Loaded script: ./miniruby* Loaded features: 0 enumerator.so[NOTE]You may have encountered a bug in the Ruby interpreter or extension libraries.Bug reports are welcome.For details: http://www.ruby-lang.org/bugreport.htmlmake: *** [.rbconfig.time] Abort trap: 6 hugo-pc:bin squantowalks$ CC=/opt/local/bin/gcc-apple-4.2 rvm install 1.9.3Fetching yaml-0.1.4.tar.gz to /Users/squantowalks/.rvm/archivesExtracting yaml-0.1.4.tar.gz to /Users/squantowalks/.rvm/srcError running 'tar xmzf /Users/squantowalks/.rvm/archives/yaml-0.1.4.tar.gz -C /Users/squantowalks/.rvm/src ', please read /Users/squantowalks/.rvm/log/ruby-1.9.3-p125/yaml/extract.logConfiguring yaml in /Users/squantowalks/.rvm/src/yaml-0.1.4.Error running ' ./configure --prefix=""/Users/squantowalks/.rvm/usr"" ', please read /Users/squantowalks/.rvm/log/ruby-1.9.3-p125/yaml/configure.logCompiling yaml in /Users/squantowalks/.rvm/src/yaml-0.1.4.Error running 'make ', please read /Users/squantowalks/.rvm/log/ruby-1.9.3-p125/yaml/make.logInstalling Ruby from source to: /Users/squantowalks/.rvm/rubies/ruby-1.9.3-p125, this may take a while depending on your cpu(s)...ruby-1.9.3-p125 - #fetching ruby-1.9.3-p125 - #extracted to /Users/squantowalks/.rvm/src/ruby-1.9.3-p125 (already extracted)ruby-1.9.3-p125 - #configuring ruby-1.9.3-p125 - #compiling Error running 'make ', please read /Users/squantowalks/.rvm/log/ruby-1.9.3-p125/make.logThere has been an error while running make. Halting the installation. [2012-03-08 20:05:01] make CC = /opt/local/bin/i686-apple-darwin11-gcc-apple-4.2.1 LD = ld LDSHARED = /opt/local/bin/i686-apple-darwin11-gcc-apple-4.2.1 -dynamiclib -O3 -ggdb -Wextra -Wno-unused-parameter -Wno-parentheses -Wno-long-long -Wno-missing-field-initializers -Werror=pointer-arith -Werror=write-strings -Werror=declaration-after-statement -Werror=shorten-64-to-32 -Werror=implicit-function-declaration -fno-common -pipe -L. -L/usr/local/lib CFLAGS = -O3 -ggdb -Wextra -Wno-unused-parameter -Wno-parentheses -Wno-long-long -Wno-missing-field-initializers -Werror=pointer-arith -Werror=write-strings -Werror=declaration-after-statement -Werror=shorten-64-to-32 -Werror=implicit-function-declaration -fno-common -pipe XCFLAGS = -include ruby/config.h -include ruby/missing.h -fvisibility=hidden -DRUBY_EXPORT CPPFLAGS = -D_XOPEN_SOURCE -D_DARWIN_C_SOURCE -I. -I.ext/include/i386-darwin11.3.0 -I./include -I. DLDFLAGS = -Wl,-undefined,dynamic_lookup -Wl,-multiply_defined,suppress -Wl,-flat_namespace -install_name /Users/squantowalks/.rvm/rubies/ruby-1.9.3-p125/lib/libruby.1.9.1.dylib -current_version 1.9.1 -compatibility_version 1.9.1 -Wl,-unexported_symbol,_Init_* -Wl,-unexported_symbol,*_threadptr_* -Wl,-u,_objc_msgSend SOLIBS = linking minirubyld: warning: ignoring file dmyext.o, file was built for unsupported file format which is not the architecture being linked (i386)Undefined symbols for architecture i386: ""_Init_ext"", referenced from: _require_libraries in ruby.old: symbol(s) not found for architecture i386collect2: ld returned 1 exit statusmake: *** [miniruby] Error 1make: *** [miniruby] Error 1he architecture being linked (x86_64)ld: warning: ignoring file miniprelude.o, file was built for i386 which is not the architecture being linked (x86_64)ld: warning: ignoring file array.o, file was built for i386 which is not the architecture being linked (x86_64)ld: warning: ignoring file bignum.o, file was built for i386 which is not the architecture being linked (x86_64)ld: warning: ignoring file class.o, file was built for i386 which is not the architecture being linked (x86_64)ld: warning: ignoring file compar.o, file was built for i386 which is not the architecture being linked (x86_64)ld: warning: ignoring file complex.o, file was built for i386 which is not the architecture being linked (x86_64)ld: warning: ignoring file dir.o, file was built for i386 which is not the architecture being linked (x86_64)ld: warning: ignoring file dln_find.o, file was built for i386 which is not the architecture being linked (x86_64)ld: warning: ignoring file enum.o, file was built for i386 which is not the architecture being linked (x86_64)ld: warning: ignoring file enumerator.o, file was built for i386 which is not the architecture being linked (x86_64)ld: warning: ignoring file error.o, file was built for i386 which is not the architecture being linked (x86_64)ld: warning: ignoring file eval.o, file was built for i386 which is not the architecture being linked (x86_64)ld: warning: ignoring file load.o, file was built for i386 which is not the architecture being linked (x86_64)ld: warning: ignoring file proc.o, file was built for i386 which is not the architecture being linked (x86_64)ld: warning: ignoring file file.o, file was built for i386 which is not the architecture being linked (x86_64)ld: warning: ignoring file gc.o, file was built for i386 which is not the architecture being linked (x86_64)ld: warning: ignoring file hash.o, file was built for i386 which is not the architecture being linked (x86_64)ld: warning: ignoring file inits.o, file was built for i386 which is not the architecture being linked (x86_64)ld: warning: ignoring file io.o, file was built for i386 which is not the architecture being linked (x86_64)ld: warning: ignoring file marshal.o, file was built for i386 which is not the architecture being linked (x86_64)ld: warning: ignoring file math.o, file was built for i386 which is not the architecture being linked (x86_64)ld: warning: ignoring file node.o, file was built for i386 which is not the architecture being linked (x86_64)ld: warning: ignoring file numeric.o, file was built for i386 which is not the architecture being linked (x86_64)ld: warning: ignoring file object.o, file was built for i386 which is not the architecture being linked (x86_64)ld: warning: ignoring file pack.o, file was built for i386 which is not the architecture being linked (x86_64)ld: warning: ignoring file parse.o, file was built for i386 which is not the architecture being linked (x86_64)ld: warning: ignoring file process.o, file was built for i386 which is not the architecture being linked (x86_64)ld: warning: ignoring file random.o, file was built for i386 which is not the architecture being linked (x86_64)ld: warning: ignoring file range.o, file was built for i386 which is not the architecture being linked (x86_64)ld: warning: ignoring file rational.o, file was built for i386 which is not the architecture being linked (x86_64)ld: warning: ignoring file re.o, file was built for i386 which is not the architecture being linked (x86_64)ld: warning: ignoring file regcomp.o, file was built for i386 which is not the architecture being linked (x86_64)ld: warning: ignoring file regenc.o, file was built for i386 which is not the architecture being linked (x86_64)ld: warning: ignoring file regerror.o, file was built for i386 which is not the architecture being linked (x86_64)ld: warning: ignoring file regexec.o, file was built for i386 which is not the architecture being linked (x86_64)ld: warning: ignoring file regparse.o, file was built for i386 which is not the architecture being linked (x86_64)ld: warning: ignoring file regsyntax.o, file was built for i386 which is not the architecture being linked (x86_64)ld: warning: ignoring file ruby.o, file was built for i386 which is not the architecture being linked (x86_64)ld: warning: ignoring file safe.o, file was built for i386 which is not the architecture being linked (x86_64)ld: warning: ignoring file signal.o, file was built for i386 which is not the architecture being linked (x86_64)ld: warning: ignoring file sprintf.o, file was built for i386 which is not the architecture being linked (x86_64)ld: warning: ignoring file st.o, file was built for i386 which is not the architecture being linked (x86_64)ld: warning: ignoring file strftime.o, file was built for i386 which is not the architecture being linked (x86_64)ld: warning: ignoring file string.o, file was built for i386 which is not the architecture being linked (x86_64)ld: warning: ignoring file struct.o, file was built for i386 which is not the architecture being linked (x86_64)ld: warning: ignoring file time.o, file was built for i386 which is not the architecture being linked (x86_64)ld: warning: ignoring file transcode.o, file was built for i386 which is not the architecture being linked (x86_64)ld: warning: ignoring file util.o, file was built for i386 which is not the architecture being linked (x86_64)ld: warning: ignoring file variable.o, file was built for i386 which is not the architecture being linked (x86_64)ld: warning: ignoring file compile.o, file was built for i386 which is not the architecture being linked (x86_64)ld: warning: ignoring file debug.o, file was built for i386 which is not the architecture being linked (x86_64)ld: warning: ignoring file iseq.o, file was built for i386 which is not the architecture being linked (x86_64)ld: warning: ignoring file vm.o, file was built for i386 which is not the architecture being linked (x86_64)ld: warning: ignoring file vm_dump.o, file was built for i386 which is not the architecture being linked (x86_64)ld: warning: ignoring file thread.o, file was built for i386 which is not the architecture being linked (x86_64)ld: warning: ignoring file cont.o, file was built for i386 which is not the architecture being linked (x86_64)ld: warning: ignoring file ascii.o, file was built for i386 which is not the architecture being linked (x86_64)ld: warning: ignoring file us_ascii.o, file was built for i386 which is not the architecture being linked (x86_64)ld: warning: ignoring file unicode.o, file was built for i386 which is not the architecture being linked (x86_64)ld: warning: ignoring file utf_8.o, file was built for i386 which is not the architecture being linked (x86_64)ld: warning: ignoring file newline.o, file was built for i386 which is not the architecture being linked (x86_64)ld: warning: ignoring file setproctitle.o, file was built for i386 which is not the architecture being linked (x86_64)Undefined symbols for architecture x86_64: ""_main"", referenced from: start in crt1.10.6.old: symbol(s) not found for architecture x86_64collect2: ld returned 1 exit statusmake: *** [miniruby] Error 1 [2012-03-08 21:20:12] make CC = clang LD = ld LDSHARED = clang -dynamiclib CFLAGS = -O3 -ggdb -Wextra -Wno-unused-parameter -Wno-parentheses -Wno-long-long -Wno-missing-field-initializers -Werror=pointer-arith -Werror=write-strings -Werror=declaration-after-statement -Werror=shorten-64-to-32 -Werror=implicit-function-declaration -fno-common -pipe XCFLAGS = -include ruby/config.h -include ruby/missing.h -fvisibility=hidden -DRUBY_EXPORT CPPFLAGS = -D_XOPEN_SOURCE -D_DARWIN_C_SOURCE -I. -I.ext/include/x86_64-darwin11.3.0 -I./include -I. DLDFLAGS = -Wl,-undefined,dynamic_lookup -Wl,-multiply_defined,suppress -Wl,-flat_namespace -install_name /Users/squantowalks/.rvm/rubies/ruby-1.9.3-p125/lib/libruby.1.9.1.dylib -current_version 1.9.1 -compatibility_version 1.9.1 -Wl,-unexported_symbol,_Init_* -Wl,-unexported_symbol,*_threadptr_* -Wl,-u,_objc_msgSend SOLIBS = compiling main.ccompiling dmydln.ccompiling dmyencoding.ccompiling version.ccompiling dmyversion.ccompiling miniprelude.ccompiling array.ccompiling bignum.ccompiling class.ccompiling compar.ccompiling complex.ccompiling dir.ccompiling dln_find.ccompiling enum.ccompiling enumerator.ccompiling error.ccompiling eval.ccompiling load.ccompiling proc.ccompiling file.ccompiling gc.ccompiling hash.ccompiling inits.ccompiling io.cio.c:997:2: warning: expression result unused [-Wunused-value] SET_BINARY_MODE(fptr); ^~~~~~~~~~~~~~~~~~~~~io.c:330:31: note: instantiated from:#define SET_BINARY_MODE(fptr) 0 ^io.c:1953:2: warning: expression result unused [-Wunused-value] SET_BINARY_MODE(fptr); ^~~~~~~~~~~~~~~~~~~~~io.c:330:31: note: instantiated from:#define SET_BINARY_MODE(fptr) 0 ^io.c:1975:5: warning: expression result unused [-Wunused-value] NEED_NEWLINE_DECORATOR_ON_READ_CHECK(fptr); ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~io.c:331:52: note: instantiated from:#define NEED_NEWLINE_DECORATOR_ON_READ_CHECK(fptr) 0 ^io.c:2409:2: warning: expression result unused [-Wunused-value] SET_BINARY_MODE(fptr); ^~~~~~~~~~~~~~~~~~~~~io.c:330:31: note: instantiated from:#define SET_BINARY_MODE(fptr) 0 ^io.c:2452:5: warning: expression result unused [-Wunused-value] NEED_NEWLINE_DECORATOR_ON_READ_CHECK(fptr); ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~io.c:331:52: note: instantiated from:#define NEED_NEWLINE_DECORATOR_ON_READ_CHECK(fptr) 0 ^io.c:2491:2: warning: expression result unused [-Wunused-value] SET_BINARY_MODE(fptr); ^~~~~~~~~~~~~~~~~~~~~io.c:330:31: note: instantiated from:#define SET_BINARY_MODE(fptr) 0 ^io.c:2515:5: warning: expression result unused [-Wunused-value] NEED_NEWLINE_DECORATOR_ON_READ_CHECK(fptr); ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~io.c:331:52: note: instantiated from:#define NEED_NEWLINE_DECORATOR_ON_READ_CHECK(fptr) 0 ^io.c:2652:2: warning: expression result unused [-Wunused-value] NEED_NEWLINE_DECORATOR_ON_READ_CHECK(fptr); ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~io.c:331:52: note: instantiated from:#define NEED_NEWLINE_DECORATOR_ON_READ_CHECK(fptr) 0 ^io.c:2662:2: warning: expression result unused [-Wunused-value] SET_BINARY_MODE(fptr); ^~~~~~~~~~~~~~~~~~~~~io.c:330:31: note: instantiated from:#define SET_BINARY_MODE(fptr) 0 ^io.c:3012:2: warning: expression result unused [-Wunused-value] SET_BINARY_MODE(fptr); ^~~~~~~~~~~~~~~~~~~~~io.c:330:31: note: instantiated from:#define SET_BINARY_MODE(fptr) 0 ^io.c:3057:5: warning: expression result unused [-Wunused-value] NEED_NEWLINE_DECORATOR_ON_READ_CHECK(fptr); ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~io.c:331:52: note: instantiated from:#define NEED_NEWLINE_DECORATOR_ON_READ_CHECK(fptr) 0 ^io.c:3172:2: warning: expression result unused [-Wunused-value] SET_BINARY_MODE(fptr); ^~~~~~~~~~~~~~~~~~~~~io.c:330:31: note: instantiated from:#define SET_BINARY_MODE(fptr) 0 ^io.c:3213:5: warning: expression result unused [-Wunused-value] NEED_NEWLINE_DECORATOR_ON_READ_CHECK(fptr); ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~io.c:331:52: note: instantiated from:#define NEED_NEWLINE_DECORATOR_ON_READ_CHECK(fptr) 0 ^io.c:3417:2: warning: expression result unused [-Wunused-value] SET_BINARY_MODE(fptr); ^~~~~~~~~~~~~~~~~~~~~io.c:330:31: note: instantiated from:#define SET_BINARY_MODE(fptr) 0 ^io.c:3437:2: warning: expression result unused [-Wunused-value] NEED_NEWLINE_DECORATOR_ON_READ_CHECK(fptr); ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~io.c:331:52: note: instantiated from:#define NEED_NEWLINE_DECORATOR_ON_READ_CHECK(fptr) 0 ^io.c:4173:5: warning: expression result unused [-Wunused-value] SET_BINARY_MODE_WITH_SEEK_CUR(fptr); ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~io.c:333:45: note: instantiated from:#define SET_BINARY_MODE_WITH_SEEK_CUR(fptr) 0 ^io.c:4696:2: warning: expression result unused [-Wunused-value] SET_UNIVERSAL_NEWLINE_DECORATOR_IF_ENC2(enc2, ecflags); ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~io.c:332:64: note: instantiated from:#define SET_UNIVERSAL_NEWLINE_DECORATOR_IF_ENC2(enc2, ecflags) 0 ^io.c:4743:2: warning: expression result unused [-Wunused-value] SET_UNIVERSAL_NEWLINE_DECORATOR_IF_ENC2(enc2, ecflags); ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~io.c:332:64: note: instantiated from:#define SET_UNIVERSAL_NEWLINE_DECORATOR_IF_ENC2(enc2, ecflags) 0 ^io.c:8236:2: warning: expression result unused [-Wunused-value] SET_UNIVERSAL_NEWLINE_DECORATOR_IF_ENC2(enc2, ecflags); ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~io.c:332:64: note: instantiated from:#define SET_UNIVERSAL_NEWLINE_DECORATOR_IF_ENC2(enc2, ecflags) 0 ^io.c:8243:6: warning: expression result unused [-Wunused-value] SET_UNIVERSAL_NEWLINE_DECORATOR_IF_ENC2(enc2, ecflags); ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~io.c:332:64: note: instantiated from:#define SET_UNIVERSAL_NEWLINE_DECORATOR_IF_ENC2(enc2, ecflags) 0 ^io.c:8250:3: warning: expression result unused [-Wunused-value] SET_UNIVERSAL_NEWLINE_DECORATOR_IF_ENC2(enc2, ecflags); ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~io.c:332:64: note: instantiated from:#define SET_UNIVERSAL_NEWLINE_DECORATOR_IF_ENC2(enc2, ecflags) 0 ^io.c:8255:3: warning: expression result unused [-Wunused-value] SET_UNIVERSAL_NEWLINE_DECORATOR_IF_ENC2(enc2, ecflags); ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~io.c:332:64: note: instantiated from:#define SET_UNIVERSAL_NEWLINE_DECORATOR_IF_ENC2(enc2, ecflags) 0 ^22 warnings generated.compiling marshal.ccompiling math.ccompiling node.ccompiling numeric.ccompiling object.ccompiling pack.ccompiling parse.ccompiling process.ccompiling random.ccompiling range.ccompiling rational.ccompiling re.ccompiling regcomp.ccompiling regenc.ccompiling regerror.ccompiling regexec.ccompiling regparse.ccompiling regsyntax.ccompiling ruby.ccompiling safe.ccompiling signal.ccompiling sprintf.ccompiling st.ccompiling strftime.ccompiling string.ccompiling struct.ccompiling time.ccompiling transcode.ccompiling util.ccompiling variable.ccompiling compile.ccompiling debug.ccompiling iseq.ccompiling vm.ccompiling vm_dump.ccompiling thread.ccompiling cont.ccompiling ./enc/ascii.ccompiling ./enc/us_ascii.ccompiling ./enc/unicode.ccompiling ./enc/utf_8.ccompiling newline.ccompiling ./missing/setproctitle.clinking miniruby<internal:prelude>:1: [BUG] Bus Errorruby 1.9.3p125 (2012-02-16 revision 34643) [x86_64-darwin11.3.0]-- Control frame information -----------------------------------------------c:0003 p:0002 s:0006 b:0006 l:000005 d:000005 TOP <internal:prelude>:1c:0002 p:---- s:0004 b:0004 l:000003 d:000003 FINISHc:0001 p:0000 s:0002 b:0002 l:000e28 d:000e28 TOP -- Ruby level backtrace information ----------------------------------------<internal:prelude>:1:in `<compiled>'-- C level backtrace information ------------------------------------------- See Crash Report log file under ~/Library/Logs/CrashReporter or /Library/Logs/CrashReporter, for the more detail of.-- Other runtime information -----------------------------------------------* Loaded script: ./miniruby* Loaded features: 0 enumerator.so[NOTE]You may have encountered a bug in the Ruby interpreter or extension libraries.Bug reports are welcome.For details: http://www.ruby-lang.org/bugreport.htmlmake: *** [.rbconfig.time] Abort trap: 6",How do you install (build) Ruby 1.9.3 on OSX Lion?
Heroku: Wildcard Domains with GoDaddy," I've read Heroku's documentation:http://devcenter.heroku.com/articles/custom-domains#wildcard_domainsThey say to add: To use with a custom domain, configure your DNS registrar to point *.yourdomain.com at yourapp.heroku[app].com.In GoDaddy, you can't do: in the name field. I've heard you can get around that by doing: However, I tried that, but it's not working.When I run this in console: I get: What could be the problem? I'm guessing the wildcard isn't set up in GoDaddy correctly?(FYI: I swapped out yourdomain.com for my actual domain.) <code>  *.yourdomain.com ** host anysub.yourdomain.com Host anysub.yourdomain.com not found: 3(NXDOMAIN)",Wildcard Domains with GoDaddy
Ruby way of calculating average of values in objects located in an array," Let's say I have an array like this: I want to have the average goals per match among all the players, not the average for each individual player, but the total average.I have in mind doing it with .each and storing each of the individual averages, and at the end add them all and divide by the number of players I have. However, I am looking for a Ruby/ one-liner way of doing this.  <code>  [ { ""player_id"" => 1, ""number_of_matches"" => 2, ""goals"" => 5 }, { ""player_id"" => 2, ""number_of_matches"" => 4, ""goals"" => 10 }]",How do I calculate the average values in objects located in an array?
Named Captures in Ruby case...when," I want to parse user input using named captures for readability.When they type a command I want to capture some params and pass them. I'm using RegExps in a case statement and thus I can't assign the return of /pattern/.named_captures.Here is what I would like to be able to do (for example): <code>  while command != ""quit"" print ""Command: "" command = gets.chomp case command when /load (?<filename>\w+)/ load(filename) endend",Using Named Captures with regex match in Ruby's case...when?
How to correlate time zone names with time zone abbreviations?," In a Rails 3.x app I need to display time zone abbreviations (EST, PST, CST, etc.) rather than the full time zone name. I've seen a number of discussions that seem to address the issue, but in overly verbose manners.Is there a gem or a very concise method to handle this that could be used to map them properly? <code> ",How to translate timezone full names to tz abbreviations?
Ruby way to do this," I implemented a function to group anagrams.In a nutshell:input: ['cars', 'for', 'potatoes', 'racs', 'four','scar', 'creams', scream']output: [[""cars"", ""racs"", ""scar""], [""four""], [""for""], [""potatoes""],[""creams"", ""scream""]]I would like to know if there is a better way to do this.I really think I used too much repetition statements: until, select,delete_if.Is there any way to combine the select and delete_if statement? Thatmeans, can selected items be automatically deleted?Code: Thanks in advance, <code>  def group_anagrams(words) array = [] until words.empty? word = words.first array.push( words.select { |match| word.downcase.chars.sort.join.eql?(match.downcase.chars.sort.join ) } ) words.delete_if { |match| word.downcase.chars.sort.join.eql?(match.downcase.chars.sort.join ) } end arrayend",Ruby way to group anagrams in string array
Issue updating ruby on mac," I'm using RVM to install it and it gives me this error: I'm on Lion 10.7.3 and I have Xcode 4.3.1. <code>  The provided compiler '/usr/bin/gcc' is LLVM based, it is not yet fully supported by ruby and gems, please read `rvm requirements`.",Issue updating Ruby on Mac with Xcode 4.3.1
Issue updating ruby on mac with latest Xcode (4.3.1)," I'm using RVM to install it and it gives me this error: I'm on Lion 10.7.3 and I have Xcode 4.3.1. <code>  The provided compiler '/usr/bin/gcc' is LLVM based, it is not yet fully supported by ruby and gems, please read `rvm requirements`.",Issue updating Ruby on Mac with Xcode 4.3.1
why is 0 && 1 is 1 while 1 && 0 is 0 in ruby?," In Ruby, why are the following lines true? Why are they different and aren't both 0?  <code>  0 && 1 == 11 && 0 == 0",Why 0 && 1 is 1 while 1 && 0 is 0 in ruby?
why 0 && 1 is 1 while 1 && 0 is 0 in ruby?," In Ruby, why are the following lines true? Why are they different and aren't both 0?  <code>  0 && 1 == 11 && 0 == 0",Why 0 && 1 is 1 while 1 && 0 is 0 in ruby?
return the substring of a string betweeen two strings in ruby?," How would I return the string between two string markers of a string in Ruby?For example I have:input_string str1_markerstringstr2_markerstringWant to do something like: Example text: Using Ruby 1.9.3. <code>  input_string.string_between_markers(str1_markerstring, str2_markerString) s# => ""Charges for the period 2012-01-28 00:00:00 to 2012-02-27 23:59:59:<br>\nAny Network Cap remaining: $366.550<br>International Cap remaining: $0.000""str1_markerstring# => ""Charges for the period""str2_markerstring# => ""Any Network Cap""s[/#{str1_markerstring}(.*?)#{str2_markerstring}/, 1]# => nil # IE DIDN'T WORK IN THIS CASE",How to return the substring of a string between two strings in Ruby?
return the substring of a string between two strings in ruby?," How would I return the string between two string markers of a string in Ruby?For example I have:input_string str1_markerstringstr2_markerstringWant to do something like: Example text: Using Ruby 1.9.3. <code>  input_string.string_between_markers(str1_markerstring, str2_markerString) s# => ""Charges for the period 2012-01-28 00:00:00 to 2012-02-27 23:59:59:<br>\nAny Network Cap remaining: $366.550<br>International Cap remaining: $0.000""str1_markerstring# => ""Charges for the period""str2_markerstring# => ""Any Network Cap""s[/#{str1_markerstring}(.*?)#{str2_markerstring}/, 1]# => nil # IE DIDN'T WORK IN THIS CASE",How to return the substring of a string between two strings in Ruby?
undefined method for nil:NilClass while performing rake for Tire import," Running: Ruby 1.9.3p0 (2011-10-30 revision 33570) [x86_64-darwin11.2.0], Rails 3.2.0I'm trying to get elastic search working through the TIRE gem across associations. For some reason I keep getting the following error/errors when performing a rake on a TIRE import or occasionally on a view: Here are my models:GEAR USER Sub_Category What am I missing? Thanks. <code>  Daves-MacBook-Pro:outdoor dave$ rake environment tire:import CLASS=Gear FORCE=true[IMPORT] Deleting index 'gears'[IMPORT] Creating index 'gears' with mapping:{""gear"":{""properties"":{}}}[IMPORT] Starting import for the 'Gear' class--------------------------------------------------------------------------------101/101 | 100% rake aborted!######################################undefined method `last_name' for nil:NilClassTasks: TOP => tire:import class Gear < ActiveRecord::Base attr_accessible :title, :size, :price, :image_url, :sub_category_id, :user_id belongs_to :user belongs_to :sub_category validates :title, presence: true validates :size, presence: true validates :price, presence: true validates :sub_category_id, presence: true validates :user_id, presence: true include Tire::Model::Search include Tire::Model::Callbacks def self.search(params) tire.search(load: true, page: params[:page], per_page: 18) do query { string params[:query]} if params[:query].present? end end def to_indexed_json to_json(methods: [:sub_category_name, :user_last_name, :user_first_name, :user_email]) end def sub_category_name sub_category.name end def user_first_name user.first_name end def user_last_name user.last_name end def user_email user.email endend class User < ActiveRecord::Base attr_accessible :first_name, :last_name, :email, :password, :password_confirmation has_secure_password has_many :gears before_save :create_remember_token email_regex = /\A[\w+\-.]+@[a-z\d\-.]+\.[a-z]+\z/i validates :first_name, presence: true, length: {:maximum => 50 } validates :last_name, presence: true, length: {:maximum => 50 } validates :email, presence: true, format: {:with => email_regex}, uniqueness: {:case_sensitive => false} validates :password, presence: true, confirmation: true, length: {within: 6..40} def name first_name + "" "" + last_name end private def create_remember_token self.remember_token = SecureRandom.urlsafe_base64 endend class SubCategory < ActiveRecord::Base attr_accessible :name belongs_to :category has_many :gearsend","Elasticsearch, Tire & Associations"
Injecting a local variale to a binding Injecting a local variale to a binding," I am trying to set a local variable to an existing binding The binding doesn't have any local variables to begin with: Let us set a primitive local variable to the binding: Everything works as expected: Now, let us try to set a non-primitive local variable to the binding: Note: The technique for setting the variable is borrowed from the facet gem. I tried the ruby 1.9 safe implementation with same results.The binding does not reflect the local variable country. How do I get around this issue? Essentially, I want to declare a new variable in a binding using the value of an existing, non primitive variable.I am on Ruby 1.8.7. <code>  def foo_callback lambda { |name| p name }endb = foo_callback.binding b.eval(""local_variables"") # => [] b.eval(""age=30"") b.eval(""local_variables"") # => [""age""]b.eval(""age"") # => 30 country = Country.firstb.eval(""lambda {|v| country = v}"").call(country) b.eval(""local_variables"") # => [""age""]",Injecting a local variable to a binding
Noob Ruby Array TypeError," I am experimenting with arrays, and am reading the book ""Beginning Ruby on Rails"" by Steve Holzner. I made the program: It doesn't do much, but when i run it i get the error Why do I get this error? <code>  array = ['Hello', 'there', 1, 2]puts array[1]puts array[3]puts array.lengtharray2 = Array.newputs array2.lengtharray2[0] = ""Banana""array2[1] = 6puts array2[0] + "" "" + array2[1]puts array3.length arrays.rb:9:in `+': can't convert Fixnum into String (TypeError) from arrays.rb:9",Array TypeError: can't convert Fixnum into String
What's the syntax (=>) used in assign error object to variable of raise method?," The rescue which could assigns a variable to reference the error object has this syntax (=>) If rescue is the one of the general method call, what's the meaning of =>.Could I use the same syntax on other method call? <code>  rescue => e my_method arg1, arg2 => my_obj",What's the syntax (=>) used in assign error object to variable of `rescue` method?
How does the value of a begin block is determined?," According to The Ruby Programming Language p.164. If a begin statement doesn't propagate an exception, then the value of the statement is the value of the last expression evaluated in the begin, rescue or else clauses.But I found this behavior consistent with the begin block together with else clause and ensure clause.Here is the example code: The output is: The value is evaluated to the else clause. This is inconsistent behavior as the ensure clause is the last statement executed. Could someone explain what's happening within the begin block? <code>  def fact (n) raise ""bad argument"" if n.to_i < 1endvalue = begin fact (1)rescue RuntimeError => e p e.messageelse p ""I am in the else statement""ensure p ""I will be always executed"" p ""The END of begin block""endp value ""I am in the else statement""""I will be always executed""""The END of begin block""""I am in the else statement""[Finished]",How is the value of a begin block determined?
"Unable to get window titles, ids, and names in selenium-webdriver ruby"," Im trying to implement the following methods from selenium-webdriver (ruby)get_all_window_idsget_all_window_titlesget_all_window_namesI ran Selenium IDE and exported my script to Ruby Test::Unit. Saved it as .rb Opened my script for editing using Aptana Studio 3 Initial code snippet as follows: The error I keep getting is I've studied the documentation for the ruby bindings for selenium-webdriverhttp://selenium.googlecode.com/svn/trunk/docs/api/rb/Selenium/Client/GeneratedDriver.html#get_all_window_titles-instance_methodUltimately my goal here is to run my automation script:Click on a link that opens a new window with target=_blank and no windowID available (does not implement JS)Identify the names of all opened windows in the browserswitch to a new pop-up window using the switchToWindow(name) methodcontinue running my script on that pop-up windowI've googled and researched this on the internet and I have not gotten any much information.Thanks and please let me know if you need more information.OSL Mac OSX 10.7.3Ruby: ruby 1.8.7 (2010-01-10 patchlevel 249) [universal-darwin11.0]Browser: Firefox 9.0.1 (Mac)Chrome: Chrome 17.0.963.79 (Mac)Selenium-Server: Ruby gem 2.20.0 <code>  require ""rubygems""require ""selenium-webdriver""require ""test/unit""class SwitchToPopup3 < Test::Unit::TestCase def setup @driver = Selenium::WebDriver.for :firefox @base_url = (URL of my test website) @driver.manage.timeouts.implicit_wait = 30 @verification_errors = [] end def teardown @driver.quit assert_equal [], @verification_errors enddef test_switch_to_popup3 . . puts @driver.get_all_window_ids() puts @driver.get_all_window_titles() puts @driver.get_all_window_names() . .end NoMethodError: undefined method `get_all_window_ids' for # <Selenium::WebDriver::Driver:0x101e4b040 browser=:chrome>/Users/rsucgang/Documents/Aptana Studio 3 Workspace/Testing/SwitchToPopup2.rb:37:in `test_switch_to_popup3'","How do you get window titles, ids, and names in selenium-webdriver?"
How to randomize array element position of an `ActiveRecord::Relation`?, I am running Ruby on Rails 3.2.2 and I would like to randomize array element positions of an ActiveRecord::Relation.How can I do that? <code> ,How to randomize array element positions of an `ActiveRecord::Relation`?
"RVM, Capistrano and DelayedJob: The ""You need to add gem 'daemons' to your Gemfile if you wish to use it"" error"," I am trying to properly use Capistrano and RVM in order to deploy my Ruby on Rails 3.2.2 application to the remote machine that is running Ubuntu 10.04 LTS. It seams that I solved my previous problem related to the ""Rvm - Capistrano integration on Linux Ubuntu"". However, on deploying I get the following error related to the DelayedJob gem: Even if the error explanation is ""You need to add gem 'daemons' to your Gemfile if you wish to use it"", I already added the daemons gem to my Gemfile (from the above output you can even note that I am ""Using daemons (1.1.8)""): So, what is the problem? How can I solve that?In my deploy.rb file I have: P.S.: Terminal window output: <code>  ... * executing ""cd /srv/www/<APP_NAME>/releases/20120314135318 && bundle install"" servers: [""<DOMAIN>""] [<DOMAIN>] executing command [<DOMAIN>] rvm_path=/usr/local/rvm /usr/local/rvm/bin/rvm-shell 'ruby-1.9.3-p125' -c 'cd /srv/www/<APP_NAME>/releases/20120314135318 && bundle install' ** [out :: <DOMAIN>] Using rake (0.9.2.2) ** [out :: <DOMAIN>] Using builder (3.0.0) ... ** [out :: <DOMAIN>] Using daemons (1.1.8) ** [out :: <DOMAIN>] Using delayed_job (3.0.1) ** [out :: <DOMAIN>] Using delayed_job_active_record (0.3.2) ... ** [out :: <DOMAIN>] Your bundle is complete! It was installed into /srv/www/<APP_NAME>/shared/bundle ... [<DOMAIN>] executing command [<DOMAIN>] rvm_path=/usr/local/rvm /usr/local/rvm/bin/rvm-shell 'ruby-1.9.3-p125' -c 'cd /srv/www/<APP_NAME>/current; RAILS_ENV=production script/delayed_job stop'*** [err :: <DOMAIN>] /usr/local/rvm/gems/ruby-1.9.3-p125/gems/delayed_job-3.0.1/lib/delayed/command.rb:4:in `rescue in <top (required)>'*** [err :: <DOMAIN>] :*** [err :: <DOMAIN>] You need to add gem 'daemons' to your Gemfile if you wish to use it.*** [err :: <DOMAIN>] (*** [err :: <DOMAIN>] RuntimeError*** [err :: <DOMAIN>] )*** [err :: <DOMAIN>] from /usr/local/rvm/gems/ruby-1.9.3-p125/gems/delayed_job-3.0.1/lib/delayed/command.rb:1:in `<top (required)>'*** [err :: <DOMAIN>] from /usr/local/rvm/gems/ruby-1.9.3-p125/gems/activesupport-3.2.2/lib/active_support/dependencies.rb:251:in `require'*** [err :: <DOMAIN>] from /usr/local/rvm/gems/ruby-1.9.3-p125/gems/activesupport-3.2.2/lib/active_support/dependencies.rb:251:in `block in require'*** [err :: <DOMAIN>] from /usr/local/rvm/gems/ruby-1.9.3-p125/gems/activesupport-3.2.2/lib/active_support/dependencies.rb:236:in `load_dependency'*** [err :: <DOMAIN>] from /usr/local/rvm/gems/ruby-1.9.3-p125/gems/activesupport-3.2.2/lib/active_support/dependencies.rb:251:in `require'*** [err :: <DOMAIN>] from script/delayed_job:4:in `<main>' command finished in 7512ms*** [deploy:update_code] rolling back ...failed: ""rvm_path=$HOME/.rvm/ $HOME/.rvm/bin/rvm-shell 'ruby-1.9.3-p125' -c 'cd /srv/www/<APP_NAME>/releases && tar xzf /tmp/20120314140345.tar.gz && rm /tmp/20120314140345.tar.gz'"" on <DOMAIN> ...gem 'delayed_job'gem 'delayed_job_active_record'gem 'daemons'... $:.unshift(File.expand_path('./lib', ENV['rvm_path']))require 'rvm/capistrano'set :rvm_ruby_string, 'ruby-1.9.3-p125'set :rvm_type, :userrequire 'bundler/capistrano'... $ ruby -v > ruby 1.9.3p125 (2012-02-16 revision 34643) [i686-linux] $ which ruby > /usr/local/rvm/rubies/ruby-1.9.3-p125/bin/ruby","How to solve the ""You need to add gem 'daemons' to your Gemfile if you wish to use it"" error in production mode?"
why is date class automatically loaded but datetime is not ruby," Using IRB, why are the Date & Time classes automatically loaded, but DateTime is not? I have to require 'date', this does not make sense to me because I thought that both Date and DateTime were using the standard library 'date'? <code>  ruby-1.9.2-p290 :001 > Date => Dateruby-1.9.2-p290 :002 > Time => Timeruby-1.9.2-p290 :003 > DateTimeNameError: uninitialized constant Object::DateTime from (irb):3 from /Users/kamilski81/.rvm/rubies/ruby-1.9.2-p290/bin/irb:16:in `<main>'ruby-1.9.2-p290 :004 > require 'date' => trueruby-1.9.2-p290 :005 > require 'date' => falseruby-1.9.2-p290 :006 > DateTime => DateTime",Why is Ruby's Date class automatically loaded but DateTime is not?
"Facebook ""feed URL is no longer valid"" error for RSS feed of a page?"," I'm attempting to pull out a page feed to RSS from Facebook, however each time I attempt to try it, I get an error back in the XML with the following : The URL I'm using is: I don't have an age restriction set nor a country restriction:Further, I've tried it with and without my access token.As noted in the comments below, the JSON URL is indeed working: What is going on here / how do I resolve the problem? <code>  <![CDATA[This feed URL is no longer valid. Visit this page to find the new URL, if you have access: &lt;a href=&quot;https://www.facebook.com/profile.php?id=<FB_ID>&quot;&gt;https://www.facebook.com/profile.php?id=<FB_ID>&lt;/a&gt;]]> https://www.facebook.com/feeds/page.php?id=<fb_id>&format=rss20&access_token=<my_page_token> https://graph.facebook.com/<page_name>/feed&https://www.facebook.com/<page_name>/feed?access_token=<token>",Facebook killed Public RSS feeds; how to obtain a Facebook Page RSS with the new Timeline?
How to obtain a Facebook Page RSS with the new Timeline?," I'm attempting to pull out a page feed to RSS from Facebook, however each time I attempt to try it, I get an error back in the XML with the following : The URL I'm using is: I don't have an age restriction set nor a country restriction:Further, I've tried it with and without my access token.As noted in the comments below, the JSON URL is indeed working: What is going on here / how do I resolve the problem? <code>  <![CDATA[This feed URL is no longer valid. Visit this page to find the new URL, if you have access: &lt;a href=&quot;https://www.facebook.com/profile.php?id=<FB_ID>&quot;&gt;https://www.facebook.com/profile.php?id=<FB_ID>&lt;/a&gt;]]> https://www.facebook.com/feeds/page.php?id=<fb_id>&format=rss20&access_token=<my_page_token> https://graph.facebook.com/<page_name>/feed&https://www.facebook.com/<page_name>/feed?access_token=<token>",Facebook killed Public RSS feeds; how to obtain a Facebook Page RSS with the new Timeline?
Unable to set sender name for Devise," Although this thread doesn't say much, I figured you set the sender name in the Devise intializer like this: But this didn't work for me.Does anyone know the correct way to do this? <code>  app/config/initializers/devise.rbDevise.setup do |config| config.mailer_sender = ""'MySite' <no-reply@mysite.com>""end",How to set Devise sender name for email
Unable to setup sender name for Devise?," Although this thread doesn't say much, I figured you set the sender name in the Devise intializer like this: But this didn't work for me.Does anyone know the correct way to do this? <code>  app/config/initializers/devise.rbDevise.setup do |config| config.mailer_sender = ""'MySite' <no-reply@mysite.com>""end",How to set Devise sender name for email
Correct way to setup email sender name for Devise?," Although this thread doesn't say much, I figured you set the sender name in the Devise intializer like this: But this didn't work for me.Does anyone know the correct way to do this? <code>  app/config/initializers/devise.rbDevise.setup do |config| config.mailer_sender = ""'MySite' <no-reply@mysite.com>""end",How to set Devise sender name for email
How to setup Devise sender name for email?," Although this thread doesn't say much, I figured you set the sender name in the Devise intializer like this: But this didn't work for me.Does anyone know the correct way to do this? <code>  app/config/initializers/devise.rbDevise.setup do |config| config.mailer_sender = ""'MySite' <no-reply@mysite.com>""end",How to set Devise sender name for email
upto Operator Ruby," I'm learning Ruby, and there has been a bit of talk about the upto method in the book from which I am learning. I'm confused. What exactly does it do?Example: <code>  grades = [88,99,73,56,87,64]sum = 00.upto(grades.length - 1) do |loop_index| sum += grades[loop_index]endaverage = sum/grades.lengthputs average",The 'upto' method in Ruby
upto method in Ruby," I'm learning Ruby, and there has been a bit of talk about the upto method in the book from which I am learning. I'm confused. What exactly does it do?Example: <code>  grades = [88,99,73,56,87,64]sum = 00.upto(grades.length - 1) do |loop_index| sum += grades[loop_index]endaverage = sum/grades.lengthputs average",The 'upto' method in Ruby
How to convert hash to json while keeping things sorted in ruby template," I'm building a config file for one of our inline apps. Its essentially a json file. I'm having a lot of trouble getting puppet/ruby 1.8 to output the hash/json the same way each time.I'm currently using But while outputting human readable content, it doesn't guarantee the same order each time. Which means that puppet will send out change notifications often for the same data.I've also tried Which will generate the same data/order each time. The problem comes when data has a nested array. becomes instead of I've been fighting with this for a few days on and off now, so would like some help <code>  <%= require ""json""; JSON.pretty_generate data %> <%= require ""json""; JSON.pretty_generate Hash[*data.sort.flatten] %> data => { beanstalkd => [ ""server1"", ] } ""beanstalkd"": ""server1"", ""beanstalkd"": [""server1""],",How to output sorted hash in ruby template
"list comprehension in haskell, python and ruby"," I have started looking at the project Euler site as a way to learn Haskell, and improve my Python and Ruby. I think the Haskell and Python versions are ok, but I'm sure there must be a cleaner way for Ruby. This is not about how can I make one language look like another one.This is Problem 1: Q: Add all the natural numbers below one thousand that are multiples of 3 or 5.Haskell: Python: Ruby: They all give the same answer.OK, so Python can become: it is now a generator (a good thing as we are not storing the list)but even more fun is: For some reason I was looking at this again and tried a summation approach which should be constant time. In Python 3: Ruby can become: or I am presuming as unlike map, select doesn't produce 'nul' and therefore there is no need to call compact. nice.Haskell can also be: or to be clearer: as a function that lets us provide the two numbers ourselves: <code>  sum [ x | x <- [1..999], mod x 3 == 0 || mod x 5 == 0 ] sum ( [ x for x in range(1,1000) if x % 3 == 0 or x % 5 == 0 ] ) (1..999) . map {|x| x if x % 3 == 0 || x % 5 == 0 } . compact . inject(:+) sum ( x for x in range(1,1000) if x % 3 == 0 or x % 5 == 0 ) sum( set(range(0,1000,3)) | set(range(0,1000,5)) ) def step_sum(mn,mx,step): amax = mx - (mx - mn) % step return (mn + amax) * ((1 + ((amax - mn) / step)) / 2)step_sum(3,999,3) + step_sum(5,999,5) - step_sum(15,999,15) (1..999) . select {|x| x % 3 == 0 || x % 5 == 0} . inject(:+) (1..999) . select {|x| x % 3 == 0 or x % 5 == 0} . reduce(:+) let n = sum [0,n..999] in 3 + 5 - 15 let n = sum [ 0 , n .. 999 ] in 3 + 5 - (lcm 3 5) :: (Integral a) => a -> a -> a x y = let n = sum [0,n..999] in x + y - (lcm x y)","List comprehension in Haskell, Python and Ruby"
Training neural network with linear arguments in Ruby," I'm a total beginner when it comes to neural networks. I've been wrestling with ruby-fann and ai4r all day and unfortunately I don't have anything to show for it, so I figured I would come onto Stack Overflow and ask the knowledgeable people here.I have a set of samples -- each day has one data point, but they don't fit any clear pattern that I've been able to figure out (I tried a couple regressions). Still, I think it would be neat to see if there was any way to predict the data going into the future just from the date, and I thought a neural network would be a good way to generate a function that could hope to express that relationship.The dates are DateTime objects and the data points are decimal numbers, like 7.68. I've been converting the DateTime objects to floats and then dividing by 10,000,000,000 to get a number between 0 and 1, and I've been dividing the decimal numbers by 1,000 to also get a number between 0 and 1. I have over a thousand samples... here's what a short excerpt looks like: Which when transformed looks like this: I kind of wish this transformation weren't necessary, but I digress. The problem is that both ai4r and ruby-fann return one constant number, generally something in the middle of the range of the samples, when I run them. Here's the code for ruby-fann: And for ai4r: I feel like I'm missing something really basic here. I know this is a rather open-ended question but if anyone could help me figure out how I'm improperly teaching my neural networks, I'd really appreciate it! <code>  [ [""2012-03-15"", ""7.68""], [""2012-03-14"", ""4.221""], [""2012-03-13"", ""12.212""], [""2012-03-12"", ""42.1""]] [ [0.13317696, 0.000768], [0.13316832, 0.0004221], [0.13315968, 0.0012212], [0.13315104, 0.00421]] @fann = RubyFann::Standard.new(:num_inputs=>1, :hidden_neurons=>[3, 3], :num_outputs=>1)training_data = RubyFann::TrainData.new(:inputs => formatted_data.collect{|d| [d.first]}, :desired_outputs => formatted_data.collect{|d| [d.last]})@fann.train_on_data(training_data, 1000, 1, 0.0001)@fann.run([DateTime.now.to_f / 10000000000.0]) # Always something random, and always the same number no matter what date I request it for @ai4r = Ai4r::NeuralNetwork::Backpropagation.new([1, 3, 3, 1])1000.times do formatted_data.each do |data| @ai4r.train(data.first, data.last) endend@ai4r.eval([DateTime.now.to_f / 10000000000.0]) # A different result frmo above, but always seemingly random and the same for any requested date",Training neural network in Ruby
How to test JavaScripts without to delete all `test` database data?," I am using Ruby on Rails 3.2.2, cucumber-rails-1.3.0, rspec-rails-2.8.1 and capybara-1.1.2. I would like to use Selenium in order to test JavaScripts, but without to delete the test database data each time I run the cucumber command line in my Terminal window. That is, if I state a feature like the following: JavaScript is tested as well as expected. However, after the test has run, the test database data is deleted and I must seed again that database in order to properly run new tests.I read the Official Documentation and the text present in the ROOT_APP/features/support/env.rb file (it seems that I installed all required Ruby gems - see below for more information about the Gemfile that I am using) but I didn't understand how to avoid to delete the database data and how to configure Cucumber and Capybara gems so to properly work with Selenium.What should I make?Note I: I would like to make the above because I would like to have the same test database data when I ""test""/""run"" Scenarios.Note II: In order to seed data in the test database (my application needs that data to work), I add the following code in the RAILS_ROOT_PATH/lib/tasks/cucumber.rake file and I run the rake db:test:prepare command line from the Terminal window. In the ROOT_APP/features/support/env.rb file I tried to uncomment one and both of the following blocks of code (BTW: I never changed the original file auto-generated by the cucumber-rails gem, so it is the default one), but after running tests it still deletes the test database data. Gemfile excerpt: <code>  Feature: ... @javascript Scenario: ... namespace :db do namespace :test do task :prepare => :environment do Rake::Task[""db:seed""].invoke end endend # Before('@no-txn,@selenium,@culerity,@celerity,@javascript') do# # { :except => [:widgets] } may not do what you expect here# # as tCucumber::Rails::Database.javascript_strategy overrides# # this setting.# DatabaseCleaner.strategy = :truncation# end## Before('~@no-txn', '~@selenium', '~@culerity', '~@celerity', '~@javascript') do# DatabaseCleaner.strategy = :transaction# end group :development, :test do gem ""rspec-rails""endgroup :test do gem 'cucumber-rails' gem 'database_cleaner' gem 'capybara'end",How to test JavaScripts without to delete the `test` database data?
"How do I install multiple versions of Rails using just Bundler, without using RVM gemsets?"," TL;DRDon't bother with gemsets; multiple versions of a gem may be installed concurrently.When necessary, specify which version to execute using $ gem-based-binary _version_ args notation.Use bundle exec when you have a Gemfile specifying the version. UPDATE: 2015-06-04I wrote this question three years ago. Partly, it was based on a false assumption, and partly the situation has changed since then. With appreciation to @indirect for his original answer, I want to call attention to @kelvin's newer (less upvoted) answer, summarized above.My false assumption: Only a single version of a gem could be installed at a time, hence the need for gemsets to isolate the namespace. Not true. Multiple versions of a gem may be installed concurrently. The most recent one will be used when invoked from a command line, unless you have a Gemfile specifying the version constraints and invoke the command via bundle exec, or specify the version as its first argument.See also How can I call an older version of a gem from the commandline? re: the underscore-version notation.Original question:I have multiple projects going on using different versions of Rails. I have a workflow (described below) for creating projects using specific versions of rails, and keeping the projects isolated from each other. I'd like to experiment with other workflows, in particular, using rbenv instead of RVM, but it's not clear how to do so.QUESTION: What is the best current practice for creating multiple rails projects, each using a different version of rails, when making use of rbenv and bundler, as opposed to rbenv-gemset or rvm?USE CASE: I have two rails projects, called ProjectA and ProjectB. ProjectA is developed using one version of rails (""RailsA""), whereas ProjectB uses a different version (""RailsB""). How do I manage having both versions installed?THE GEMSETS APPROACH: When I first started with Rails development, I used RVM. In addition to supporting multiple, concurrent installations of ruby, RVM supports having multiple Named Gem Sets. Each project has its own independent collection of gems (including rails itself) called a gemset: Note: The very creation of the project folders should be done (IMHO) by a rails new command using the desired version of rails, since the skeleton files change from version to version. (Perhaps I should revisit this premise?)THE BUNDLER APPROACH: I've been playing with using rbenv instead of RVM, but I don't understand the workflow as clearly. In the README.md, Sam Stephenson writes that ""rbenv does not ... manage gemsets. Bundler is a better way to manage application dependencies."" There is a plugin (rbenv-gemset) for getting the same results as rvm's gemsets, but Sam clearly favors using Bundler instead. Unfortunately, he doesn't elaborate on what the workflow would look like. Even the Bundler website doesn't explicitly connect all the dots of how to isolate one project from another. Several blogs and gists come to the rescue, suggesting the following ~/.bundle/config file: (BTW, I'm not sure what the ""---"" is about. The docs make no mention of it and it doesn't seem to make a difference.)This effectively gives each rails project its own gemset, storing the gems in ProjectX/vendor/bundle/. In fact, rails itself will be (re-)installed there, making the project completely independent of the rest of my environment, once I run bundle install.But the elephant in the room is the chicken-and-egg problem of creating the rails project folder in the first place!! In order to create the ProjectA folder using RailsA, I need to install rails (and its numerous dependencies) first. But when I want to create ProjectB, I must then switch to using RailsB. Without gemsets, I must do some serious upgrading/downgrading. Not cool.A possible solution is simply not to worry about what version of rails I use to create the ProjectX folder. If I then use rails 3.0 to create a 3.2 project, I could just manually create the app/assets tree. But that just irks me. Ain't there a better way? <code>  gem install rails -v 3.2.13rails _3.2.13_ new Project2cd Project2bundle exec rails server rvm gemset create RailsArvm gemset use RailsA# RailsA. Note: My question is not version-specific.gem install rails --version 3.0rails new ProjectAcd ProjectArvm --rvmrc use `rvm current`vi Gemfilebundle installcd ..## Now do the same for ProjectBrvm gemset create RailsBrvm gemset use RailsBgem install rails --version 3.2rails new ProjectBcd ProjectBrvm --rvmrc use `rvm current`vi Gemfilebundle install ---BUNDLE_PATH: vendor/bundle",rbenv: Surviving without gemsets
How can I generate a navigation in Middleman (Ruby), I'm just getting used to Middleman and Ruby in general. What's the best way to generate a navigation with active states? <code> ,How can I generate a navigation in Middleman?
Does Javascript have something like this Ruby feature?, In Ruby I think you can call a method that hasn't been defined and yet capture the name of the method called and do processing of this method at runtime.Can Javascript do the same kind of thing ? <code> ,Does Javascript have something like Ruby's method_missing feature?
"I want to pass to index action params, but the route takes me instead to show action (Rails)"," I want to pass a parameter to the index action, but the I'm only getting the show action.routes.rb: blog_controller.rb: View url that send to show action instead to index action: What should I add in routes file or in view?Output of my routes: <code>  Test1::Application.routes.draw do resources :blogend def show # code end def index # code end <a href=""/blog/myvar""> My link </a> $ rake routesblog GET /blog(.:format) {:action=>""index"", :controller=>""blog""}blog GET /blog/:id(.:format) {:action=>""show"", :controller=>""blog""}",How to add parameter to rails index action/method?
"How fix routing definition in the case :: I want to pass to index action params, but the route takes me instead to show action (Rails)"," I want to pass a parameter to the index action, but the I'm only getting the show action.routes.rb: blog_controller.rb: View url that send to show action instead to index action: What should I add in routes file or in view?Output of my routes: <code>  Test1::Application.routes.draw do resources :blogend def show # code end def index # code end <a href=""/blog/myvar""> My link </a> $ rake routesblog GET /blog(.:format) {:action=>""index"", :controller=>""blog""}blog GET /blog/:id(.:format) {:action=>""show"", :controller=>""blog""}",How to add parameter to rails index action/method?
Rails - how to add parameter to index action / method?," I want to pass a parameter to the index action, but the I'm only getting the show action.routes.rb: blog_controller.rb: View url that send to show action instead to index action: What should I add in routes file or in view?Output of my routes: <code>  Test1::Application.routes.draw do resources :blogend def show # code end def index # code end <a href=""/blog/myvar""> My link </a> $ rake routesblog GET /blog(.:format) {:action=>""index"", :controller=>""blog""}blog GET /blog/:id(.:format) {:action=>""show"", :controller=>""blog""}",How to add parameter to rails index action/method?
How to add parameter to index action/method?," I want to pass a parameter to the index action, but the I'm only getting the show action.routes.rb: blog_controller.rb: View url that send to show action instead to index action: What should I add in routes file or in view?Output of my routes: <code>  Test1::Application.routes.draw do resources :blogend def show # code end def index # code end <a href=""/blog/myvar""> My link </a> $ rake routesblog GET /blog(.:format) {:action=>""index"", :controller=>""blog""}blog GET /blog/:id(.:format) {:action=>""show"", :controller=>""blog""}",How to add parameter to rails index action/method?
ruby: connect to uncertified host via FTP over TLS/SSL," A vendor I grab a file from is changing from FTP to FTP over SSL.I am trying to update my code from net/ftp to net/ftptlsThe new host I need to connect to is not certified and my script reports back this error. hostname was not match with the server certificateThe vendor will not fix this.Looking at /usr/lib/ruby/1.8/net/ftptls.rb I thought it wouldn't be too hard to monkey-patch FTPTLS to ignore the untrusted host.I tried changing verify_mode to OpenSSL::SSL::VERIFY_NONE and commenting out the post_connection_check` line.neither worked.Any thoughts on how to do this? <code>  require 'socket'require 'openssl'require 'net/ftp'module Net class FTPTLS < FTP def connect(host, port=FTP_PORT) @hostname = host super end def login(user = ""anonymous"", passwd = nil, acct = nil) store = OpenSSL::X509::Store.new store.set_default_paths ctx = OpenSSL::SSL::SSLContext.new('SSLv23') ctx.cert_store = store ctx.verify_mode = OpenSSL::SSL::VERIFY_PEER ctx.key = nil ctx.cert = nil voidcmd(""AUTH TLS"") @sock = OpenSSL::SSL::SSLSocket.new(@sock, ctx) @sock.connect @sock.post_connection_check(@hostname) super(user, passwd, acct) voidcmd(""PBSZ 0"") end endend",Connect to uncertified host via FTP over TLS/SSL
rails 3.2.2 (or 3.2.1) + Postgresql 9.1.3 + Ubuntu 11.10 Connection," I am using PostgreSQL 9.1.3 (PostgreSQL 9.1.3 on x86_64-pc-linux-gnu, compiled by gcc-4.6.real (Ubuntu/Linaro 4.6.1-9ubuntu3) 4.6.1, 64-bit) and rails either 3.2.2 or 3.2.1 on ubuntu 11.10.Now, I can connect with below command with PostgreSQLsu postgresenter password and I can see postgres=#I am placing below details in my config/database.yml and executing ""rails db"" it is working fine.development: I am using rvm to access my rails environment. but when I start server using ""rails s"" command and hit url with ""http://localhost:3000"", say - connection not establish. <code>  adapter: postgresqlencoding: utf8reconnect: falsedatabase: sample_app_dbpool: 5username: postgrespassword: passwordherehost: localhost",rails 3.2.2 (or 3.2.1) + Postgresql 9.1.3 + Ubuntu 11.10 Connection error
TypeError: superclass mismatch for class Word - Ruby," I am creating a Word class and I am getting an error: TypeError: superclass mismatch for class WordHere is the irb code: <code>  irb(main):016:0> class Wordirb(main):017:1> def palindrome?(string)irb(main):018:2> string == string.reverseirb(main):019:2> endirb(main):020:1> end=> nilirb(main):021:0> w = Word.new=> #<Word:0x4a8d970>irb(main):022:0> w.palindrome?(""foobar"")=> falseirb(main):023:0> w.palindrome?(""level"")=> trueirb(main):024:0> class Word < Stringirb(main):025:1> def palindrome?irb(main):026:2> self == self.reverseirb(main):027:2> endirb(main):028:1> endTypeError: superclass mismatch for class Word from (irb):24 from C:/Ruby193/lib/ruby/gems/1.9.1/gems/railties-3.2.1/lib/rails/commands/console.rb:47:in `start' from C:/Ruby193/lib/ruby/gems/1.9.1/gems/railties-3.2.1/lib/rails/commands/console.rb:8:in `start' from C:/Ruby193/lib/ruby/gems/1.9.1/gems/railties-3.2.1/lib/rails/commands.rb:41:in `<top (required)>' from script/rails:6:in `require' from script/rails:6:in `<main>'",TypeError: superclass mismatch for class Word in Ruby
How ruby programmers do type checking?," Since there is no type in ruby, how do Ruby programmers make sure a function receives correct arguments? Right now, I am repeating if object.kind_of/instance_of statements to check and raise runtime errors everywhere, which is ugly. There must be a better way of doing this. <code> ",How do Ruby programmers do type checking?
ruby mixin override method clarification," I've just faced this behavior I don't really understand. Why does C.new.foo actually return class_foo ? I was pretty much sure that method should be overridden by the one in module. Another thing, replacing ""class_foo"" with super makes C.new.foo return `""module_foo""That actually looks like module is somehow included before the class instance method is defined. Could you please clarify? <code>  module M def foo ""module_foo"" endendclass C def foo ""class_foo"" end include Mendputs C.new.foo",Ruby mixin override method clarification
"Rack Lint Error: app error: Content-Length header was 31842, but should be 0 (Rack::Lint::LintError)"," I have noticed that certain requests, particularly from Uptime Robot to test page uptime have recently started generated the following Rack Lint error on my Rails 3.1.x app: Any ideas as to what may be going on here? I'm really not finding a solution right now that specifically addresses what to do in this scenario as far as poking and hunting down what really may be going on. <code>  21:47:05 web.1 | Started HEAD ""/"" for 74.86.158.106 at 2012-03-22 21:47:05 -040021:47:05 web.1 | Processing by HomeController#index as */*...21:47:05 web.1 | /Users/username/.rvm/gems/ruby-1.9.3-p125@project/gems/activesupport-3.1.4/lib/active_support/core_ext/string/output_safety.rb:23: warning: regexp match /.../n against to UTF-8 string...21:47:05 web.1 | Completed 200 OK in 81ms (Views: 60.3ms | ActiveRecord: 0.0ms)21:47:05 web.1 | 74.86.158.106 - - [22/Mar/2012 21:47:05] ""GET / HTTP/1.1"" 200 31842 0.199321:47:05 web.1 | E, [2012-03-22T21:47:05.546848 #18938] ERROR -- : app error: Content-Length header was 31842, but should be 0 (Rack::Lint::LintError)21:47:05 web.1 | E, [2012-03-22T21:47:05.546978 #18938] ERROR -- : /Users/username/.rvm/gems/ruby-1.9.3-p125@project/gems/rack-1.3.6/lib/rack/lint.rb:19:in `assert'21:47:05 web.1 | E, [2012-03-22T21:47:05.547079 #18938] ERROR -- : /Users/username/.rvm/gems/ruby-1.9.3-p125@project/gems/rack-1.3.6/lib/rack/lint.rb:501:in `verify_content_length'21:47:05 web.1 | E, [2012-03-22T21:47:05.547178 #18938] ERROR -- : /Users/username/.rvm/gems/ruby-1.9.3-p125@project/gems/rack-1.3.6/lib/rack/lint.rb:525:in `each'21:47:05 web.1 | E, [2012-03-22T21:47:05.547277 #18938] ERROR -- : /Users/username/.rvm/gems/ruby-1.9.3-p125@project/gems/rack-1.3.6/lib/rack/body_proxy.rb:23:in `method_missing'21:47:05 web.1 | E, [2012-03-22T21:47:05.547375 #18938] ERROR -- : /Users/username/.rvm/gems/ruby-1.9.3-p125@project/gems/unicorn-4.2.0/lib/unicorn/http_response.rb:41:in `http_response_write'21:47:05 web.1 | E, [2012-03-22T21:47:05.547476 #18938] ERROR -- : /Users/username/.rvm/gems/ruby-1.9.3-p125@project/gems/unicorn-4.2.0/lib/unicorn/http_server.rb:538:in `process_client'21:47:05 web.1 | E, [2012-03-22T21:47:05.547574 #18938] ERROR -- : /Users/username/.rvm/gems/ruby-1.9.3-p125@project/gems/unicorn-4.2.0/lib/unicorn/http_server.rb:604:in `worker_loop'21:47:05 web.1 | E, [2012-03-22T21:47:05.547672 #18938] ERROR -- : /Users/username/.rvm/gems/ruby-1.9.3-p125@project/gems/unicorn-4.2.0/lib/unicorn/http_server.rb:487:in `spawn_missing_workers'21:47:05 web.1 | E, [2012-03-22T21:47:05.547770 #18938] ERROR -- : /Users/username/.rvm/gems/ruby-1.9.3-p125@project/gems/unicorn-4.2.0/lib/unicorn/http_server.rb:137:in `start'21:47:05 web.1 | E, [2012-03-22T21:47:05.547867 #18938] ERROR -- : /Users/username/.rvm/gems/ruby-1.9.3-p125@project/gems/unicorn-4.2.0/bin/unicorn:121:in `<top (required)>'21:47:05 web.1 | E, [2012-03-22T21:47:05.547966 #18938] ERROR -- : /Users/username/.rvm/gems/ruby-1.9.3-p125@project/bin/unicorn:19:in `load'21:47:05 web.1 | E, [2012-03-22T21:47:05.548063 #18938] ERROR -- : /Users/username/.rvm/gems/ruby-1.9.3-p125@project/bin/unicorn:19:in `<main>'",How to resolve Rack Lint errors?
converting ruby symbols to integers," I find it surprising that Ruby symbols can be typecasted to integers without errors. So :a.to_i is legal. I was wondering what is the significance of this integer, is it a unique value specific to that symbol?  <code> ",Converting Ruby symbols to integers
Rails PostgreSQL not case senitive search with LIKE," I have this in my controller: I think this query is case sensitive. It should not be case sensitive. <code>  Konkurrencer.where(""title LIKE ?"", ""%#{params[:q]}%"").limit(4)",Rails PostgreSQL non-case sensitive search with LIKE
how to not iterate nil array ruby?, I want avoid iterating over a nil array.My bad solution: <code>  if nil!=myArr myArr.each { |item| p item; } end,How can I avoid iterating over a nil array in Ruby?
How to stop Haml from evaluating #{var} values inside <pre> <code> tags," I'm using CodeRay and Haml to do syntax highlighting on some pages, and I write a lot of Ruby code. The problem is when I have something like this: I keep getting errors because Haml keeps trying to evaluate the name variable inside the string, the #{var} syntax is a pretty common idiom in Ruby code and there aremany places where it is used, but I cannot use syntax highlighting of those codes because Haml wants to evaluate those variables inside the string.Is there a way to tell Haml to not do that in some places? <code>  %pre %code.language-ruby :preserve def hello(name) puts ""Hello #{name}!"" end",How do I get Haml to stop from evaluating #{var} values inside <pre> <code> tags?
Accessing main app's CanCan rules from withing Rails 3.1 engine," I am trying to use a Forem gem which happens to utilise CanCan authorisation framework as well as my main application. Both the main application and Rails Engine have their own ability.rb files.The problem happens in the layout, when I am trying to do some authorisation checks: When I am utilising the layout file on the engine it consults it's own ability.rb file for authorisation. Naturally, there are no rules from my main application so authorisation fails when it should not. Is there any way for me to force it to go to the ""main"" CanCan?Thanks. <code>  <% if can? :update, User %> <%= link_to_current_user :content_method => :login %>. <% else %>",Accessing main app's CanCan rules from within Rails 3.1 engine
Mocha: How to add expectation of a method with one parameter when there are multiple invocations with different parameters," I have a Rails controller action to test. In that action, a method User.can? is invoked several times with different parameters. In one of the test case for it, I want to make sure that User.can?('withdraw') is invoked. But I don't care about invocations of User.can? with other parameters. I tried below in the test: But the test failed with message indicating unexpected invocation of User.can?('deposit').If I add another expectation with parameter 'deposit', the test passed. But I am wondering if there are any ways such that I could just focus on the invocation with 'withdraw' parameter (because other invocations are irrelevant to this test case). <code>  def action_to_be_tested ... @user.can?('withdraw') ... @user.can?('deposit') ...end User.any_instance.expects(:can?).with('withdraw').at_least_once.returns(true)",Mocha: How to add expectation of a method when there are multiple invocations with different parameters
Ruby class name - can it contain numbers?, Can a Rails class name contain numbers? For example: Is this a valid class? I get an uninitialized constant Test123 error when I try to load the class. <code>  class Test123end,How do I name a Rails ruby file whose class name has numbers?
Rails class name - can it contain numbers?, Can a Rails class name contain numbers? For example: Is this a valid class? I get an uninitialized constant Test123 error when I try to load the class. <code>  class Test123end,How do I name a Rails ruby file whose class name has numbers?
How do I use Ruby to connect to a SQLite database outside of Rails as a scripting language," Hi Im using Ruby as a scripting language. Not for web development, but to connect to a local database on my computer and manipulate it.Id like to know how I can connect. Do I need to download/import tools? What do I need to get started?Thanks, <code> ",How do I use Ruby to connect to a SQLite3 database outside of Rails as a scripting language
Possible to diable rack-cache on a per-request basis in Rails 3.2?," I have been attempting to get streaming working in Rails 3.2 on Heroku (see my SO post here: Rails 3.2 streaming).I am coming to the conclusion that rack-cache is causing the problem. Disabling it using config.middleware.delete(Rack::Cache) in production.rb seems to fix it. This, obviously, disables it for my entire app. I only want it disabled for the one streaming request (which is on the admin side and will be used infrequently). Is this possible? It'd be a major bummer to lose caching for the sake of one small (but required) admin feature.Thanks very much!!!Edit: I have attempted setting the headers to not cache the action in question, but Rack::Cache is still causing the streaming to fail. Totally disabling it is the only solution I have found so far. <code> ",Possible to disable rack-cache on a per-request basis in Rails 3.2?
How do you pass an argument to ruby array.map short cut?," Given the following array a: How do I do: using the short notation: or: where 1 and 2 are the arguments? <code>  a = [1, 2, 3, 4, 5] a.map { |num| num + 1 } a.map(&:+ 1) a.map(&:+ 2) ",How do I pass an argument to array.map short cut?
Closing tags with sanitize," sanitize() in ApplicationHelper doesn't close tags. The above snippet leaves the string as is. How could I force it to append a closing </a> or at least strip the <a> altogether? <code>  s = ""<a href='http://example.com'>incomplete""sanitize(s, :tags => ['a', 'p'])",Sanitize HTML and close incomplete tags
how to test rendering a partial with rspec," I want to test rendering a particular partial according to some conditions.For example, in model show action view show.html.erb I have: I tried: but it tells that it rendered ""show"" template expecting <""partial1""> but rendering with <""model/show, layouts/application"">What I am doing wrong? <code>  <% if condition1 %> <%= render :partial => ""partial1"" %><% else %> <%= render :partial => ""partial1"" %><% end %> response.should render_template(""partial_name"")",How to test rendering a partial with RSpec
Ruby - Haml: 'array.each do |block|' including results of statement in generated html," I am generating an email with dynamic content from a Haml template which parses info from an array.Basically, the Haml receives an array filled with several hashes. In the code I have a block which looks like this: Whenever the email is sent the entire object arrayname is included at the bottom of the HTML. This causes [#,#] (more # when there are more objects) to show up at the top of the block. There is no way to manipulate this piece of text with CSS, else I would've just hidden it. The line is identical to the results shown when executing the code in IRB.Can anyone tell me how to prevent this from happening? <code>  %table =arrayname.each do |object| %tr %td= object.name %td= object.link [#<Release @id=181 @title=""test"" @amurl=""test.com"" @iturl=""test.com"" @cover=""test.com"" @date=""2012-03-28"" @artist_name=""Test"">, #<Release @id=182 @title=""test"" @amurl=""test.com"" @iturl=""test.com"" @cover="""" @date=""2012-03-31"" @artist_name=""Test"">]",'array.each do |block|' including results of statement in generated Haml HTML
Additional tasks after asset compilation on Heroku Cedar," I have this in lib/tasks/foo.rake: When I run rake assets:precompile locally, both messages are printed.When I push to heroku, only the nondigest message is printed. However, according to the buildpack, the push is executing the exact same command as I am locally.Why does the enhancement to the base assets:precompile case not work on heroku but does work locally? <code>  Rake::Task[""assets:precompile""].enhance do print "">>>>>>>> hello from precompile""endRake::Task[""assets:precompile:nondigest""].enhance do print "">>>>>>>> hello from precompile:nondigest""end",Why does Rake task enhancement differ between my local environment and when deploying to Heroku Cedar?
`rescue in rbuf_fill': Timeout::Error (Timeout::Error)," Same script different error. This might be related more to my network instead of my code. The script is as follows: And the error is: I'm interested in learning why this error occurred as well as the solution. Thanks in advance! <code>  #!/usr/bin/env ruby -rubygemsrequire File.join(File.dirname(__FILE__), 'authentication')require ""csv"" # faster_csv (ruby 1.9)lines = CSV.read(File.join(File.dirname(__FILE__), 'karaoke.csv')) # Exported an Excel file as CSVlines.slice!(0) # remove header linecollection = StorageRoom::Collection.find('collection ID')Song = collection.entry_classlines.each do |row| karaoke = Song.new(:artist => row[0], :song => row[1], :genre => row[2], :file => StorageRoom::File.new_with_filename(""#{karaoke.artist}#{karaoke.song}.mov"")) if karaoke.save puts ""Song saved: #{karaoke.artist}, #{karaoke.song}, #{karaoke.genre}"" else puts ""Song could not be saved: #{karaoke.errors.join(', ')}"" endend /usr/local/lib/ruby/1.9.1/net/protocol.rb:140:in `rescue in rbuf_fill': Timeout::Error (Timeout::Error)from /usr/local/lib/ruby/1.9.1/net/protocol.rb:134:in `rbuf_fill'from /usr/local/lib/ruby/1.9.1/net/protocol.rb:116:in `readuntil'from /usr/local/lib/ruby/1.9.1/net/protocol.rb:126:in `readline'from /usr/local/lib/ruby/1.9.1/net/http.rb:2219:in `read_status_line'from /usr/local/lib/ruby/1.9.1/net/http.rb:2208:in `read_new'from /usr/local/lib/ruby/1.9.1/net/http.rb:1191:in `transport_request'from /usr/local/lib/ruby/1.9.1/net/http.rb:1177:in `request'from /usr/local/lib/ruby/1.9.1/net/http.rb:1170:in `block in request'from /usr/local/lib/ruby/1.9.1/net/http.rb:627:in `start'from /usr/local/lib/ruby/1.9.1/net/http.rb:1168:in `request'from /usr/local/lib/ruby/gems/1.9.1/gems/httparty-0.8.1/lib/httparty/request.rb:73:in `perform'from /usr/local/lib/ruby/gems/1.9.1/gems/httparty-0.8.1/lib/httparty.rb:391:in `perform_request'from /usr/local/lib/ruby/gems/1.9.1/gems/httparty-0.8.1/lib/httparty.rb:359:in `post'from /home/hanleyhansen/Desktop/thriventures-storage_room_gem-f7015ed/lib/storage_room/model.rb:69:in `block (2 levels) in create'from /usr/local/lib/ruby/gems/1.9.1/gems/activesupport-3.2.2/lib/active_support/callbacks.rb:403:in `_run__3801264735883484179__create__2558870880708463764__callbacks'from /usr/local/lib/ruby/gems/1.9.1/gems/activesupport-3.2.2/lib/active_support/callbacks.rb:405:in `__run_callback'from /usr/local/lib/ruby/gems/1.9.1/gems/activesupport-3.2.2/lib/active_support/callbacks.rb:385:in `_run_create_callbacks'from /home/hanleyhansen/Desktop/thriventures-storage_room_gem-f7015ed/lib/storage_room/model.rb:68:in `block in create'from /usr/local/lib/ruby/gems/1.9.1/gems/activesupport-3.2.2/lib/active_support/callbacks.rb:403:in `_run__3801264735883484179__save__2558870880708463764__callbacks'from /usr/local/lib/ruby/gems/1.9.1/gems/activesupport-3.2.2/lib/active_support/callbacks.rb:405:in `__run_callback'from /usr/local/lib/ruby/gems/1.9.1/gems/activesupport-3.2.2/lib/active_support/callbacks.rb:385:in `_run_save_callbacks'from /home/hanleyhansen/Desktop/thriventures-storage_room_gem-f7015ed/lib/storage_room/model.rb:67:in `create'from /home/hanleyhansen/Desktop/thriventures-storage_room_gem-f7015ed/lib/storage_room/model.rb:61:in `save'from import_csv.rb:17:in `block in <main>'from import_csv.rb:14:in `each'from import_csv.rb:14:in `<main>'",'rescue in rbuf_fill': Timeout::Error (Timeout::Error)
"Using classes or modules with class << self, is there a difference?", Is there a difference in usage between and When would you use one over the other? <code>  class Helper class << self # ... endend module Helper class << self # ... endend,"Using class << self, when to use classes or modules?"
why 'self' method of module can not become a singleton method of class?," this will be error with: undefined method `model_method' for A:Class (NoMethodError)But when I use metaclass of A. it works: Can someone explain this? <code>  module Test def self.model_method puts ""this is a module method"" endendclass A include TestendA.model_method module Test def model_method puts ""this is a module method"" endendclass A class << self include Test endendA.model_method",Why 'self' method of module cannot become a singleton method of class?
Ruby: HH:MM between two HH:MM?," I want to know if a time belongs to an schedule or another.In my case is for calculate if the time is in night schedule or normal schedule.I have arrived to this solution: But I think is not very elegant and also only works for this concrete case and not every time range.(I've found several similar question is SO but all of them make reference to Date ranges no Time ranges)UpdatedSolution has to work for random time ranges not only for this concrete one. Let's say: <code>  NIGHT = [""21:00"", ""06:00""]def night?( date ) date_str = date.strftime( ""%H:%M"" ) date_str > NIGHT[0] || date_str < NIGHT[1]end ""05:00""-""10:00""""23:00""-""01:00""""01:00""-""01:10""",Time-of-day range in Ruby?
Why is it bad style to `rescue Exception => e` in Ruby?, Ryan Daviss Ruby QuickRef says (without explanation): Dont rescue Exception. EVER. or I will stab you.Why not? Whats the right thing to do? <code> ,Why is it a bad style to `rescue Exception => e` in Ruby?
What is the purpose of redo and retry statements in ruby?," The only use case I can think of for redo would be for operations like writing to a socket or reading from a database, but if these fail once, subsequent attempts will most likely also fail so it still seems a bit pointless to me and as for retry I can't really think of any case where it would be useful.This might only seem meaningless to me since I don't know or use Ruby, but I aspire to create an awesome language one day so I would like to at least know the reasoning behind the design of some of the most popular languages out there. <code> ",What is the purpose of redo and retry statements in Ruby?
Ruby 1.9.3: memory size of a hash or other object?," What's the best way to get the size of a given hash (or any object really) in bytes in Ruby 1.9.3?The solution to ""Find number of bytes a particular Hash is using in Ruby"" does not appear to be valid in 1.9.3, because memsize_of isn't in the documentation for ObjectSpace. <code> ",Memory size of a hash or other object?
($5 bounty) Ruby 1.9.3: memory size of a hash or other object?," What's the best way to get the size of a given hash (or any object really) in bytes in Ruby 1.9.3?The solution to ""Find number of bytes a particular Hash is using in Ruby"" does not appear to be valid in 1.9.3, because memsize_of isn't in the documentation for ObjectSpace. <code> ",Memory size of a hash or other object?
Striping non-alphanumeric chars but leaving spaces in Ruby," Trying to change this: into this: Want to downcase and remove all punctuation but leave spaces...Tried string.downcase.gsub(/[^a-z ]/, '') but it removes the spaces <code>  ""The basketball-player is great! (Kobe Bryant)"" ""the basketball player is great kobe bryant""",Stripping non-alphanumeric chars but leaving spaces in Ruby
Beginner Ruby Issue (Syntax)," I am just starting to learn Ruby (first time programming), and have a basic syntactical question with regards to variables, and various ways of writing code. Chris Pine's ""Learn to Program"" taught me to write a basic program like this... This is fine, but then I stumbled across the tutorial on ruby.learncodethehardway.com, and was taught to write the same exact program like this... They both output the same thing, but obviously option 2 is a much shorter way to do it. Is there any particular reason why I should use one format over the other? <code>  num_cars_again= 2puts 'I own ' + num_cars_again.to_s + ' cars.' num_cars= 2puts ""I own #{num_cars} cars.""",String concatenation vs. interpolation in Ruby
Confusion - Ruby on Rails convention - table name is plural even though the model name is singular," As per Ruby on Rails convention, controller names get pluralized while model names are singular. Example : a Users controller, but a User model. Now open migration file Here table name is plural (users).So my question is - Why table name is plural (users) even though the model name is singular (User)? <code>  rails generate controller Usersrails generate model User name:string email:string class CreateUsers < ActiveRecord::Migration def change create_table :users do |t| t.string :name t.string :email t.timestamps end endend",Ruby on Rails plural (controller) and singular (model) convention - explanation
Rails rescue syntax seems to be missing an end?," Ok so I have this method of an application I am working with and it works in production. My question why does this work? Is this new Ruby syntax? <code>  def edit load_elements(current_user) unless current_user.role?(:admin) respond_to do |format| format.json { render :json => @user } format.xml { render :xml => @user } format.html endrescue ActiveRecord::RecordNotFound respond_to_not_found(:json, :xml, :html)end",Why does this rescue syntax work?
Ruby - Difference between Integer(value) and value.to_i," Given a string object like this: What is the difference between doing: and: Is there any difference? Is it recommended to use one among the other one? <code>  twohundred = ""200"" Integer(twohundred) #=> 200 twohundred.to_i #=> 200",Difference between Integer(value) and value.to_i
Can the whenever Ruby gem preserve existing lines in a crontab file?," I am using:Ruby 1.9.2whenever 0.7.2capistrano 2.9.0capistrano-ext 1.2.1I am using whenever in conjunction with Capistrano on deploys to manage my crontab files.I noticed that it completely rewrites my crontab files each time.I'd like to be able to set environment variables in cron to control PATH and MAILTO settings, which are regular cron environment variables.Is there a way to make whenever not overwrite the entire crontab file, so that I can add customizations to my crontab file and be sure that they will persist? <code> ",Can the whenever  gem preserve existing lines in a crontab file?
Add $LOAD_PATH eternally," I understand that to add a path to $LOAD_PATH just do But I have to add this line to every program I wrote. Is there anyway to add it to the system level?I tried to search a bit on the startup script for Ruby, but did not find the answer. I tried to add this line to kernel/common/module.rb, ruby_constants.rb, loader.rb,etc. but neither works.In which file should I add this line to?Updates:I am using ubuntu 10.04 and Rubinius. There is no system variable called RUBYLIB.Tried creating one but did not work. But I realize I made a mistake, and forgot to add the variable in bash script .bashrc. After adding the variable, it all works fine! <code>  $LOAD_PATH.unshift(path)",Add $LOAD_PATH externally
how to convert CSV to excel?, Is there any plugin in Ruby that converts CSV file onto Excel. I did little Google but all I found was converting Excel file into CSV. I know few gems which I can tweak a little and use to convert Excel to CSV but I need to know if anyone has done that before. <code> ,How to convert CSV to Excel?
Why does self need to be used to refer to an object's field within this method in Rails?," Throughout my application self. is not necessary to refer to a User's name. name works fine.Why does the following code require self to work as intended? By the way, I know that validates_presence_of can be used to prevent the save, but I want to save with a default if no name is given.Rails 3.0.7. <code>  class User< ActiveRecord::Base before_save :validate_namedef validate_name if self.name.nil? || self.name.empty? self.name= ""Mr. No Name"" endend","Why use ""self"" to access ActiveRecord/Rails model properties?"
Rails 3 app model how ensure only one boolean field set to true at a time," I have a Logo model that has fields of name:string, default:boolean. I want the true value to be unique so that only one item in the database can be set to true at once. How do I set my update and new actions in my controller to set all the rest of the values of my logos to false?Let's say I have the following setupin my databaseModel Logoname:string | default:boolean |Item1 | true |Item2 | false |Item3 | false |If I change Item2 default value to true, I want it to loop through all logos and set the rest of them to false, so only one is true at once, so it looks like this.name:string | default:boolean |Item1 | false |Item2 | true |Item3 | false |Thanks for any help in advance. <code> ",Rails: Ensure only one boolean field is set to true at a time
"Go webserver how is the performence stability, in terms of long run stability compared to Tomcat, Apache?"," I have been thinking instead of using:TomcatApache Lightweight webserverPHPRubyJSPWhy not switch my projects to Go language. Because there i have:webserver built in i do not even need to depend on PHP, Ruby, JSP Go solves cross-platform such as: runs on FreeBSD, Linux, Solaris (Windows, Mac, Android, Tizen)nor Apache nor Tomcat nor other webserver maintainencespeed of browser would be extreamly faster then other web server scripting languages.But one thing i am worried about, which is the stablity of Go webserver compared to other webservers.Has anyone done this before or am i alone building such projects for production releases? <code> ","Go webserver how is the performance stability, in terms of long run stability compared to Tomcat, Apache?"
Nokogiri - plain text with inclusion of br html tag," Is it possible to convert HTML with Nokogiri to plain text? I also want to include <br /> tag.For example, given this HTML: I want this output: When I just call Nokogiri::HTML(my_html).text it excludes <br /> tag: <code>  <p>ala ma kota</p> <br /> <span>i kot to idiota </span> ala ma kotai kot to idiota ala ma kota i kot to idiota",Convert HTML to plain text (with inclusion of <br>s)
Convert HTMl to plain text (with inclusion of br's)," Is it possible to convert HTML with Nokogiri to plain text? I also want to include <br /> tag.For example, given this HTML: I want this output: When I just call Nokogiri::HTML(my_html).text it excludes <br /> tag: <code>  <p>ala ma kota</p> <br /> <span>i kot to idiota </span> ala ma kotai kot to idiota ala ma kota i kot to idiota",Convert HTML to plain text (with inclusion of <br>s)
ruby run shell command in a specific directory," I know how to run a shell command in Ruby like: But, how do I specify a directory to run this command?Is there a similar way of shelling out, similar to subprocess.Popen in Python: Thanks! <code>  %x[#{cmd}] subprocess.Popen(r'c:\mytool\tool.exe', cwd=r'd:\test\local')",Ruby run shell command in a specific directory
Rails 3.2.2 not executing rjs," I'm following the book Pragmatic Agile Web Development With Rails 4th Edition, BUT I'm using Rails 3.2.2 instead of 3.0.5 as recommended in the book: I got stuck when including AJAX to redraw the Cart without reloading the page. Here is the create action in line_items_controller.rb: And here is my RJS file create.js.rjs (under app/views/line_items): However, when I click the button that starts this action: I get the following error in the development log: If I change the filename of create.js.rjs to create.js.erb, the problem is corrected: but nothing happens in the view.... not even the alert. What am I missing? What is the difference between file.js.erb and file.js.rjs? <code>  ~$ ruby -vruby 1.9.3p125 (2012-02-16) [i686-linux]~$ rails -vRails 3.2.2 def create @cart = current_cart product = Product.find(params[:product_id]) @line_item = @cart.add_product(product.id) respond_to do |format| if @line_item.save format.html { redirect_to(store_url) } format.js format.json { render json: @line_item, status: :created, location: @line_item } else format.html { render action: ""new"" } format.json { render json: @line_item.errors, status: :unprocessable_entity } end end end page.alert('NO PROBLEM HERE')page.replace_html('cart', render(@cart)) <%= button_to 'Add to Cart', line_items_path(:product_id => product), :remote => true %> ActionView::MissingTemplate (Missing template line_items/create, application/create with {:locale=>[:en], :formats=>[:js, :html], :handlers=>[:erb, :builder, :coffee]}. Searched in: * ""/home/me/src_rails/depot/app/views""): app/controllers/line_items_controller.rb:47:in `create' Rendered line_items/create.js.erb (0.4ms)",SOLVED - Rails 3.2.2 not executing rjs
"Rails console, how to stop output of return value?"," An example is if I go into IRB and do the following: Is there anyway to suppress the nil? The problem is if I put in a large data structure, it spams something an other irrelevant return respond. I'm more interested in seeing output from debug statements I run through a block and have to continually scroll up and look for the real data. <code>  jruby-1.6.7 :026 > puts [1,2,3,4,5]12345=> nil ",How to suppress the output of return value in IRB/Rails Console?
Ruby: check if constants allready defined," This is a simple one, I hope. How do I check, in the following example, if a constant is already defined? <code>  #this worksvar = var||1puts varvar = var||2puts var#this doesn'tCONST = CONST||1puts CONSTCONST = CONST||2puts CONST=> 1 1 uninitialized constant CONST (NameError)",Check if a constant is already defined
Ruby: check if constants already defined," This is a simple one, I hope. How do I check, in the following example, if a constant is already defined? <code>  #this worksvar = var||1puts varvar = var||2puts var#this doesn'tCONST = CONST||1puts CONSTCONST = CONST||2puts CONST=> 1 1 uninitialized constant CONST (NameError)",Check if a constant is already defined
cross-thread violation on rb_gc()," The codebase I'm working on was recently upgraded from Ruby 1.9.2 to Ruby 1.9.3 and from Rails 3.1 to Rails 3.2.2. Since I'm using RVM I simply did rvm install 1.9.3 which I would have expected to be all that was necessary.When I run I get the error [BUG] cross-thread violation on rb_gc()I've found a number of links relating to this problem. There is one on StackOverflow, but it doesn't really give an answer. The most promising answer is on the RVM site: In every case of this I have seen thus far it has always ended up being that a ruby gem/library with C extensions was compiled against a different ruby and/or architecture than the one that is trying to load it. Try uninstalling & reinstalling gems with C extensions that your application uses to hunt this buggar down.That's fairly helpful, but my Ruby-fu is not strong enough to know which gems have C extensions and which ones I should try to re-install. Quite a few of the other links on the topic seem to suggest that the json gem is at fault, so I tried following the suggested solution. This didn't really change anything for meI still get the exact same error when trying to start the Rails environment.How do I track down this problem?If it helps, here is the output from gem list: <code>  rails s gem uninstall json gem install --platform=ruby actionmailer (3.2.2)actionpack (3.2.2)activemodel (3.2.2)activerecord (3.2.2)activeresource (3.2.2)activesupport (3.2.2)addressable (2.2.7)akami (1.0.0)arel (3.0.2)bcrypt-ruby (3.0.1)bson (1.6.1)bson_ext (1.6.1)builder (3.0.0)bundler (1.1.3, 1.0.21)capybara (1.1.2)carmen (0.2.13)childprocess (0.3.1)ci_reporter (1.7.0)coderay (1.0.5)coffee-rails (3.2.2)coffee-script (2.2.0)coffee-script-source (1.2.0)commonjs (0.2.5)cucumber (1.1.9)cucumber-rails (1.3.0)database_cleaner (0.7.2)devise (2.0.4)diff-lcs (1.1.3)ejs (1.0.0)email_spec (1.2.1)engineyard (1.4.28)engineyard-serverside-adapter (1.6.3)erubis (2.7.0)escape (0.0.4)execjs (1.3.0)factory_girl (3.0.0)factory_girl_rails (3.0.0)faker (1.0.1)fakeweb (1.3.0)ffi (1.0.11)gherkin (2.9.3)gyoku (0.4.4)haml (3.1.4)haml-rails (0.3.4)hash-deep-merge (0.1.1)highline (1.6.11)hike (1.2.1)httpi (0.9.6)i18n (0.6.0)jasmine (1.1.2)jasmine-core (1.1.0)jasminerice (0.0.8)journey (1.0.3)jquery-rails (2.0.1)json (1.6.6)json_pure (1.6.6)kaminari (0.13.0)kgio (2.7.4)launchy (2.0.5)less (2.1.0)less-rails (2.2.0)libv8 (3.3.10.4 x86_64-darwin-11)log4r (1.1.10)mail (2.4.4)metaclass (0.0.1)method_source (0.7.1)mime-types (1.18)mocha (0.10.5)mongo (1.6.1)mongoid (2.4.7)mongoid-rspec (1.4.4)multi_json (1.2.0)net-ssh (2.2.2)newrelic_rpm (3.3.3)nokogiri (1.5.2)nori (1.1.0)open4 (1.3.0)orm_adapter (0.0.7)polyglot (0.3.3)pr_geohash (1.0.0)pry (0.9.8.4)pry-highlight (0.0.1)pry_debug (0.0.1)rack (1.4.1)rack-cache (1.2)rack-ssl (1.3.2)rack-test (0.6.1)rails (3.2.2)rails-footnotes (3.7.6)railties (3.2.2)raindrops (0.8.0)rake (0.9.2.2)rdoc (3.12)recursive-open-struct (0.2.1)rest-client (1.6.7)rpm_contrib (2.1.8)rsolr (1.0.7)rspec (2.9.0)rspec-core (2.9.0)rspec-expectations (2.9.0)rspec-mocks (2.9.0)rspec-rails (2.9.0)rubyzip (0.9.6.1)sass (3.1.15)sass-rails (3.2.5)savon (0.9.9)selenium-webdriver (2.20.0)settings-tree (0.2.1)simplecov (0.6.1)simplecov-html (0.5.3)simplecov-rcov (0.2.3)slop (2.4.4)spine-rails (0.1.0)spork (1.0.0rc2)sprockets (2.1.2)sunspot (1.3.1)sunspot_mongoid (0.4.1)sunspot_rails (1.3.1)sunspot_solr (1.3.1)term-ansicolor (1.0.7)therubyracer (0.10.1)thor (0.14.6)tilt (1.3.3)treetop (1.4.10)twitter-bootstrap-rails (2.0.6)tzinfo (0.3.32)uglifier (1.2.4)unicorn (4.2.1)warden (1.1.1)wasabi (2.1.0)xpath (0.1.4)",Cross-thread violation on rb_gc()
What's the differences between ruby dup and clone method?," The Ruby docs for dup say: In general, clone and dup may have different semantics in descendent classes. While clone is used to duplicate an object, including its internal state, dup typically uses the class of the descendent object to create the new instance.But when I do some test I found they are actually the same: So what are the differences between the two methods? <code>  class Test attr_accessor :xendx = Test.newx.x = 7y = x.dupz = x.cloney.x => 7z.x => 7",What's the difference between Ruby's dup and clone methods?
How can I make a POST request inside Ruby Sinatra?," Clicking a button in a form will send a POST request to be handled by the following piece of code. How can I send another POST request to a different website from within the Ruby code? <code>  post '/register' do #send post request to http://www.randomsite.com #parse response #do something with it @user = User.first(:name => params['regUsername']) if @user == nil @user = User.create( :name => params['regUsername'], :pass => Password.create(params['regPassword']), :email => params['regEmail'], :created_date => Time.now ) redirect '/' else ""User already exists."" endend",How to make a POST request inside Sinatra code?
Ruby - Case statement with multiple values in each 'when' block," The best way I can describe what I'm looking for is to show you the failed code I've tried thus far: I've got about 4 or 5 different when situations that should be triggered by approximately 50 different possible values of car. Is there a way to do this with case blocks or should I try a massive if block? <code>  case car when ['honda', 'acura'].include?(car) # code when 'toyota' || 'lexus' # codeend",Case statement with multiple values in each 'when' block
How do i save a current date/time for a DATETIME column in rails 3, I have a DATETIME column called last_profile_update. I need to update it with a current time. I have the following code: but it does not work. <code>  user = User.newuser.last_profile_update = Date.todayuser.save,How do I save a current date/time for a DATETIME column in rails 3?
ruby - Including Rails time helpers in a ruby application," I primarily use Rails to develop in and I love the 1.hour.from_now, 34.minutes, and 24.megabytes helpers that Rails has built into it. However right now I am building just a Ruby application having these helpers would be nice. Is it possible to just get these helpers in a Ruby application without having to bring in the whole Rails framework? <code> ",Including Rails time helpers in a non-Rails Ruby application
Difference between lamda and def method_name in Ruby," I am reading along in pickaxe 1.9 and the author uses lambda like this: My question is this: How is this any better/worse/different than just defining a method that does that same thing? Like so: To me the lambda syntax seems much more confusing and spaghetti-like. <code>  bo = lambda {|param| puts ""You called me with #{param}""}bo.call 99 => 'You called me with 99'bo.call ""cat"" => 'You called me with cat' def bo(param) puts ""You called me with #{param}""endbo(""hello"") => 'You called me with hello'",Difference between lambda and def method_name in Ruby
Is Date.today in UTC?," Calling Date.today in Ruby returns the current date. However, what timezone is it in? I assume UTC, but I want to make sure. The documentation doesn't state either way. <code> ",Rails: Is Date.today in UTC?
Interpolating an array element into a string if it is incuded in another array," If I want to compare two arrays and create an interpolated output string if an array variable from array y exists in x how can I get an output for each matching element?This is what I was trying but not quite getting the result. <code>  x = [1, 2, 4]y = [5, 2, 4]x.each do |num| puts "" The number #{num} is in the array"" if x.include?(y.each)end #=> [1, 2, 4]",Find values in common between two arrays
Interpolating an array element into a string if it is included in another array," If I want to compare two arrays and create an interpolated output string if an array variable from array y exists in x how can I get an output for each matching element?This is what I was trying but not quite getting the result. <code>  x = [1, 2, 4]y = [5, 2, 4]x.each do |num| puts "" The number #{num} is in the array"" if x.include?(y.each)end #=> [1, 2, 4]",Find values in common between two arrays
"Rails 3 <%=str.html_safe%> vs <%=""#{str.html_safe}""%>"," Consider this: Now these cases: I need to output the URL with other strings. How can I guarantee that the ampersand will be unescaped? For reasons beyond my control I can't send &amp;.Please help! Pulling my hair here :\EDIT: To clarify, I actually have an array like so: I am creating a JS array (the image_array var) to use in my app this way: This generates: Which does not work in my specific case. I need the url without the amp; part. <code>  <%str = ""http://domain.com/?foo=1&bar=2""%> <%=str%># output:http://domain.com/?foo=1&amp;bar=2<%=str.html_safe%># output:http://domain.com/?foo=1&bar=2<%=""#{str.html_safe}""%># output:http://domain.com/?foo=1&amp;bar=2<%=""""+str.html_safe%># output:http://domain.com/?foo=1&amp;bar=2 @images = [{:id=>""fooid"",:url=>""http://domain.com/?foo=1&bar=2""},...] image_array.push(<%=@images.map{|x|""{id:'#{x[:id]}',url:'#{x[:url].html_safe}'}""}.join("","")%>); image_array.push({id:'fooid',url:'http://domain.com/?foo=1&amp;bar=2'},...);",How to output html_safe within <%=%> block while concatenating strings?
Rails 3 how to output html_safe within <%=%> block and concatenated strings?," Consider this: Now these cases: I need to output the URL with other strings. How can I guarantee that the ampersand will be unescaped? For reasons beyond my control I can't send &amp;.Please help! Pulling my hair here :\EDIT: To clarify, I actually have an array like so: I am creating a JS array (the image_array var) to use in my app this way: This generates: Which does not work in my specific case. I need the url without the amp; part. <code>  <%str = ""http://domain.com/?foo=1&bar=2""%> <%=str%># output:http://domain.com/?foo=1&amp;bar=2<%=str.html_safe%># output:http://domain.com/?foo=1&bar=2<%=""#{str.html_safe}""%># output:http://domain.com/?foo=1&amp;bar=2<%=""""+str.html_safe%># output:http://domain.com/?foo=1&amp;bar=2 @images = [{:id=>""fooid"",:url=>""http://domain.com/?foo=1&bar=2""},...] image_array.push(<%=@images.map{|x|""{id:'#{x[:id]}',url:'#{x[:url].html_safe}'}""}.join("","")%>); image_array.push({id:'fooid',url:'http://domain.com/?foo=1&amp;bar=2'},...);",How to output html_safe within <%=%> block while concatenating strings?
Elegant chained 'or's," What's the sensible way of saying this. (The numbers are contained in a column of datatype string.) <code>  if @thing == ""01"" or ""02"" or ""03"" or ""04"" or ""05""",Elegant chained 'or's for tests on same variable in Ruby
removing scientific notation from float in ruby," I'm currently multiplying two floats like so: 0.0004 * 0.0000000000012 = 4.8e-16How do I get the result in a normal format, i.e. without the scientific notation, something like 0.0000000000324 and then round it up to say 5 numbers. <code> ",Removing scientific notation from float
Ruby: spinning cursor," I have a Ruby script that does some long taking jobs. It is command-line only and I would like to show that the script is still running and not halted. I used to like the so called ""spinning cursor"" in the old days and I managed to reproduce it in Ruby under Windows.Question: does this work in the other OS's? If not, is there an OS-independent way to accomplish this?No IRB solutions please. <code>  10.times { print ""/"" sleep(0.1) print ""\b"" print ""-"" sleep(0.1) print ""\b"" print ""\\"" sleep(0.1) print ""\b"" print ""|"" sleep(0.1) print ""\b""}","Printing an ASCII spinning ""cursor"" in the console"
ide sublime2 how find method defifnition, I'm using Sublime 2 for Ruby On Rails programming.I need a ability to click a method name and jump to class where the method is defined. There are many IDE with similar capability... <code> ,ide sublime2 how to find method definition
"How to use ""_blank"" or ""_new"" in Rails"," In HTML, if I wanted a link to open in a new window, I'd adopt target=""_blank"" like this: How do I add the ""_blank"" to rails? Here's the code I so far for the link (but it currently opens in the same tab/window): <code>  <a href=""http://www.website.com/"" target=""_blank""><img src=""/img.png"" /></a> <%= link_to image_tag(""img.png""), 'http://www.website.com/' %>","Rails: How to use ""_blank"" or ""_new"" in Rails"
Ruby colon hash syntax hightlighting," I'm a pretty heavy user of colon hashes but the default Aptana Studio Ruby doesn't provide any highlighting for them.Here's a colon hash in Ruby 1.9: Does anyone know what bits I need to punch to make the ""animal:"" part display in another colour?Update:It seems from reading the source that the PLists file isn't being used by Aptana and that the feature is presently incomplete.https://github.com/textmate/ruby.tmbundle/issues/17I've tried changing the scopes in source but it doesn't seem to update for me.To find the scope Aptana is trying to highlightCommands -> Bundle Development -> Show Scope and Matching Theme Rule (alternatively the default shortcut is Ctrl+Alt+P)Read the box. It may list several scopes.The way you add a scope:Window -> PreferencesSelect Aptana Studio then the Themes option.Press the + button next to the Scope Selector textbox.Add your scope and set the colours.Apply and click OKI'm all out of ideas. Hopefully this will help someone get closer. <code>  { animal: ""duck"" }",Ruby colon hash syntax highlighting
Ruby: How to load a Hash from a File?, Is there a Ruby tool that would allow me to load a file of abbreviations in the format of (Abbreviated => Abr)? Then I need to read each word from another file. If the word matches the word in the abbreviations I need to change it to the abbreviated word. I think I can use Hash but I don't know how to load it from a file. <code> ,How to load a Hash from a File?
run ruby script in background without screen," I have a two scripts in the Rails environment which have to run 24/7. I'm working on a remote server, so I need to start the scripts using ssh, which means I need to keep the ssh windows open all the time.I'm searching for a simple way to run these scripts in the background so they aren't canceled as soon as I close the ssh connection.I don't want to use screen. I think there must be simpler way to handle this. Isn't there? <code> ",Run ruby script in background without using screen
plot points and rectangles in ruby," I am searching for an easy way to plot about 10 points and rectangles to be able to see where my algorithm goes wrong. I had a look at gnuplot, but it seems it is particularly bad a plotting rectangles. <code> ",Plot points and rectangles in Ruby
sass --watch not updating after initial launch," I am working with sass to write the css for a simple static website I am working on. I have run sass --watch custom.scss:custom.css which compiles fine on launch with the message:Sass is watching for changes. Press Ctrl-C to stop.overwrite custom.cssHowever, whenever I update the .scss file, nothing happens. I haven't used SASS outside the context of a rails app before, so I'm wondering if I am missing something?My scss file is incredibly simple as well, so I doubt it is choking on anything, especially since it works on the first run.sass -v reports Sass 3.1.16 (Brainy Betty), on Lion 10.7.2 <code> ",sass --watch not updating after initial launch (sass 3.1.16)
Homebrew wants me to amend my PATH. No clue how," Trying to install ruby 1.9.3, read that I need to install homebrew first. Ran brew doctor, and it's giving me a bunch of warnings. One of which is: Warning: /usr/bin occurs before /usr/local/bin This means that system-provided programs will be used instead of those provided by Homebrew. The following tools exist at both paths: Consider amending your PATH so that /usr/local/bin is ahead of /usr/bin in your PATH.How does one do what it's asking here? <code>  easy_installeasy_install-2.6",How to modify PATH for Homebrew?
How to open (read-write) or create a file with truncation possible?," I want to:open a file in read-write mode if it exists;create it if it doesn't exist;be able to truncate it anytime-anywhere.EDIT: with truncate I mean write until a position and discard the remaining part of the file, if presentAll this atomically (with a single open() call or simulating a single open() call)No single open modality seems to apply:r : obviously doesn't work;r+ : fails if the file doesn't exist;w: recreate the file if it exists;w+: recreate the file if it exists;a: can't read;a+: can't truncate.Some combinations I tried (rw, rw+, r+w, etc.) seems to not work either. Is it possible?Some doc from Ruby (applies to python too): <code>  rRead-only mode. The file pointer is placed at the beginning of the file.This is the default mode.r+Read-write mode. The file pointer will be at the beginning of the file.wWrite-only mode. Overwrites the file if the file exists. If the filedoes not exist, creates a new file for writing.w+Read-write mode. Overwrites the existing file if the file exists. If thefile does not exist, creates a new file for reading and writing.aWrite-only mode. The file pointer is at the end of the file if the fileexists. That is, the file is in the append mode. If the file does not exist,it creates a new file for writing.a+Read and write mode. The file pointer is at the end of the file if the fileexists. The file opens in the append mode. If the file does not exist, itcreates a new file for reading and writing.",How to open (read-write) or create a file with truncation allowed?
Opposite of include? For Ruby Array," I've got the following logic in my code: @players is an array. Is there a method so I can avoid the !?Ideally, this snippet would be: <code>  if !@players.include?(p.name) ...end if @players.does_not_include?(p.name) ...end",Ruby: Is there an opposite of include? for Ruby Arrays?
Is there an opposite of include? for Ruby Arrays?," I've got the following logic in my code: @players is an array. Is there a method so I can avoid the !?Ideally, this snippet would be: <code>  if !@players.include?(p.name) ...end if @players.does_not_include?(p.name) ...end",Ruby: Is there an opposite of include? for Ruby Arrays?
Rails: Elegantly handling blank parent methods and hash attributes," I'm sure I've seen an elegant solution to this before, but I can't quite find it:I have a rails controller which may-or-may-not have the following hash element: Inside that parent field, a child element could also be blank. I'm currently checking that via the (very ugly) method: Which works, but I figure - surely - there has to be a more elegant way. Just to reiterate:myhash[:parent_field] may or may not existIf it does exist, myhash[:parent_field][:child_field] may or may not existIf that exists, it may or may not be blank. <code>  myhash[:parent_field] if (!myhash[:parent_field] || !myhash[:parent_field][:child_field] || myhash[:parent_field][:child_field].blank?)",Elegantly handling blank values in a nested hash
Subversion - read content of a file off a remote svn repo without checking it out locally," (Thanks in advance, SOers!)Problem I'm trying to solveIs there a way (e.g., in bash or in ruby) to read the content of a file on a remote svn repo without first checking it out locally and read it locally, given I have the path to it (e.g., ""svn+ssh://svn.something/folder/morefolder/something.txt"")Things I've tried or thought of tryingThere isn't a counterpart for something like more or less as an svn option. Looking at the list of available options for the svn command, the closest possible thing I can think of to achieve this is something along the line of Using svn praise [svn file path], and thenParse it accordingly (in my program or in bash) to extract what I want out of it.Additional NoteI've googled and looked around on StackOverflow, and it seems like no one else (or at least I haven't yet come across anyone) has discussed about this problem/usecase. I have a legit reason for this specific need but I do wonder if I'm missing anything in my thought process.Please let me know if I'm missing any info in this question. Thanks again! <code> ",Read content of a file off a remote svn repo without checking it out locally
Read content of a file off a remote svn repo without checking it out locally," (Thanks in advance, SOers!)Problem I'm trying to solveIs there a way (e.g., in bash or in ruby) to read the content of a file on a remote svn repo without first checking it out locally and read it locally, given I have the path to it (e.g., ""svn+ssh://svn.something/folder/morefolder/something.txt"")Things I've tried or thought of tryingThere isn't a counterpart for something like more or less as an svn option. Looking at the list of available options for the svn command, the closest possible thing I can think of to achieve this is something along the line of Using svn praise [svn file path], and thenParse it accordingly (in my program or in bash) to extract what I want out of it.Additional NoteI've googled and looked around on StackOverflow, and it seems like no one else (or at least I haven't yet come across anyone) has discussed about this problem/usecase. I have a legit reason for this specific need but I do wonder if I'm missing anything in my thought process.Please let me know if I'm missing any info in this question. Thanks again! <code> ",Read content of a file off a remote svn repo without checking it out locally
How i can check if an object is null in ruby on rails 2?, I want to check when my object @objectname is not equal to null to show the values of the @objectname else to show that no values found. I tried this: but I'm getting an error. <code>  <% if (@objectname != null) then %>,How I can check if an object is null in ruby on rails 2?
Ruby: match a pattern in a array," There is an array with 2 elements I want to test if a string is found inside the array elements, say: Can i do it like that? <code>  test = [""i am a boy"", ""i am a girl""] test.include(""boy"") ==> truetest.include(""frog"") ==> false",Match a pattern in an array
ruby params assignment," My form receives data via POST. When I do puts params I can see: now the commands: but when I do: I get In IRB it works fine: Why can I read the value using :id, but not set the value using that? <code>  {""id"" => ""123"", ""id2"" => ""456""} puts params['id'] # => 123puts params[:id] # => 123params['id'] = '999'puts params # => {""id"" => ""999"", ""id2"" => ""456""} params[:id] = '888'puts params {""id"" => ""999"", ""id2"" => ""456"", :id => ""888""} params# => {""id2""=>""2"", ""id""=>""1""}params[:id]# => nilparams['id']# => ""1""","Reading and writing Sinatra params using symbols, e.g. params[:id]"
Find specific job in resque que," In my application, I'm using Resque to resize images. If an image is in the resizing queue, I want to show a ""resizing image"" icon. This means that I need to be able to find all current jobs relating to a specific model ID in the queue. Right now I do it like this: This is stupid. But is there any way to query the Resque queue to find all jobs where the first argument is equal to [id]?Thanks in advance. <code>  Resque.peek(:resize, 0, 100).find_all { |job| /#{model.id}/.match(job[""args""][0]) }",Find specific job in resque queue
How to Use DRY in this Situation?," I have some code that calculates the nth root of a number. Right now, that method only works on Fixnum, because I defined it inside the Fixnum class. It would be very easy to just do but that seems unneccessary. I have no idea how to dynamically call classes. I tried: but that did not work. How do I do this?Note: After posting, I realized this might be a better fit for Programmers.SE, as it is theoretical, as well as single-problem based. Feel free to migrate accordingly... <code>  class Float #same code as was in Fixnumend classes = [Fixnum, Float]classes.each do |x| x.instance_eval do def root(pow) return self ** (1/pow.to_f) end endend",Add the same method to multiple classes
Production Rails console won't start," Everything works fine on my OS X development laptop.Deploy the app to production and it runs and displays data as expected.However, when I try to run the Rails console on the production server I get an error... I tried removing socket: /tmp/mysql.sock from database.yml -- same result.Although the app runs, I do need to be able to access the console in production as well to perform certain tasks.I am able to connect to the MySQL server using the MySQL command line client.ruby 1.9.3p125Rails 3.2.2mysql2 gem 0.3.11MySQL server: 5.1.61Production host: Linux 2.6.32-220.4.2.el6.x86_64database.yml <code>  $ rails console -e production/opt/deployed_rails_apps/con_app_rails_3/shared/bundle/ruby/1.9.1/gems/mysql2-0.3.11/lib/mysql2/client.rb:44: in `connect': Can't connect to local MySQL server through socket '/tmp/mysql.sock' (2) (Mysql2::Error) from /opt/deployed_rails_apps/con_app_rails_3/shared/bundle/ruby/1.9.1/gems/mysql2-0.3.11/lib/mysql2/client.rb:44:in `initialize' from /opt/deployed_rails_apps/con_app_rails_3/shared/bundle/ruby/1.9.1/gems/activerecord-3.2.2/lib/active_record/connection_adapters/mysql2_adapter.rb:16:in `new' development: adapter: mysql2 encoding: utf8 reconnect: false database: con_app_rails_3_development pool: 5 username: root password: socket: /tmp/mysql.socktest: adapter: mysql2 encoding: utf8 reconnect: false database: con_app_rails_3_test pool: 5 username: root password: socket: /tmp/mysql.sockproduction: adapter: mysql2 encoding: utf8 reconnect: false host: dbhost database: con_app_rails_3_production pool: 5 username: xxxx password: xxxx socket: /tmp/mysql.sock",Rails: Production Rails console won't start
How skip has_secure_password validations," In my app, only admins can create new User records. The user is emailed an activation link where they set their password.I'd like to use the has_secure_passord method (railscast): Works great, but it automatically validates presence of password digest...so when the admin creates the record the validations fail. I there a way to skip just the automatically added password_digest validation without skipping the others I've added? <code>  class User < ActiveRecord::Base has_secure_password ...end",How to skip has_secure_password validations
Rails memory bloat when creating many new objects," When I run this and then watch the memory consumption of my ruby process in OSX Activity Monitor, the memory increases at about 3 MB/s.If I remove the transaction it about halves the memory consumption but still, the memory footprint keeps going up. I have an issue on my production app where Heroku kills the process because of its memory consumption. Is there a way of doing the below, in a way that won't increase memory? If I comment out the .save line then it's okay but of course this isn't a solution. I am running this using delayed_job. <code>  ActiveRecord::Base.transaction do 10000000.times do |time| puts ""---- #{time} ----"" a = Activity.new(:name => ""#{time} Activity"") a.save!(:validate => false) a = nil endend",Memory bloat when creating many new objects
"Ruby: shorthand if statement returns ""expression"" instead of value, how do I get the value?"," I'm pretty new to Ruby and Rails but even after searching stack overflow and google I couldn't find an answer to this.I've got a simple Ruby shorthand if statement that should return an integer like so: r() is a custom helper function that returns a random number between in this case 1 and 4.The way I intend this to work is that if amount is defined, then use the number defined as amount, else generate a random number between 1 and 4 and use that instead.When printing out @c however Ruby outputs expression rather than a number.What do I have to do to get this working as I intended and what am I doing wrong?Many thanks for reading! <code>  # in the context of this erb document `amount` is defined as 5.@c = ( defined? amount ? amount : r( 1,4 ) )","Ternary expression with ""defined?"" returns ""expression"" instead of value?"
Ruby regex to match a string NOT at the end of a line," The regex /abc$/ will match an abc that does appear at the end of the line. How do I do the inverse?I want to match abc that isn't at the end of a line.Furthermore, I'm going to be using the regex to replace strings, so I want to capture only abc, not anything after the string, so /abc.+$/ doesn't work, because it would replace not only abc but anything after abc too.What is the correct regex to use? <code> ",What is a regex to match a string NOT at the end of a line?
Ruby's double colon(::) operator usage differences, Is there any difference between and  <code>  module Foo class Engine < Rails::Engine endend module Foo class Engine < ::Rails::Engine endend,Ruby's double colon (::) operator usage differences
How to test that a certain function uses a transation in Rails and rspec 2," I have a model function that I want to make sure uses a transaction. For example: My current approach is to stub a method call inside the block to raise an ActiveRecord::Rollback exception, and then check to see if the database has actually changed. But this implies that if for some reason the implementation inside the block changed, then the test would break. How would you test this? <code>  class Model def method Model.transaction do # do stuff end endend",How to test that a certain function uses a transaction in Rails and rspec 2
Why return an enumerable?, I''m curious about why ruby returns an Enumerator instead of an Array for something that seems like Array is an obvious choice. For example: Most people think of a String as an array of chars. So why does String#chars return an Enumerable instead of an Array? I'm assuming somebody put a lot of thought into this and decided that Enumerator is more appropriate but I don't understand why. <code>  'foo'.class# => String 'foo'.chars.class# => Enumerator,Why return an enumerator?
Rails3 Jbuilder doesn't work on Production Server," I am using Rails 3.2.3 / Ruby 1.9.3p125 / jbuilder (0.4.0)In my view/mycontroller folder i got a show.json.jbuilder file.when I test everything on my local machine with rails s -e production everything works fine.The JSON gets rendered as espected. But when I deploy to Ubuntu LTS (nginx/unicorn) I get the following Error Message: When I check on my server if the jbuilder gem is installed with bundle show jbuilder everything seems right. weird is that the Error message does't show :handlers=>[:erb, :builder, :jbuilder]The jbuilder handler is obviously missing. But how do I solve the problem?Edit: The Problem is not based on Jbuilder. I tried rabl and the same problem appears.Does any one has a hint, how to debug this?Here some more Information:Gemfile Controller show.json.jbuilder - file <code>  ActionView::MissingTemplate (Missing template mycontroller/show, application/show with {:locale=>[:de, :en], :formats=>[:json], :handlers=>[:erb, :builder]}. Searched in: * ""/home/deployer/apps/myapp/releases/#############/app/views""): source 'https://rubygems.org'gem 'rails', '3.2.3'gem 'jquery-rails'gem 'mysql2'gem 'simple_form'# Gems used only for assets and not required# in production environments by default.group :assets do gem 'sass-rails', '~> 3.2.3' gem 'coffee-rails', '~> 3.2.1' gem 'uglifier', '>= 1.0.3' gem 'bootstrap-sass', '2.0.2'end# Use unicorn as the app servergem 'unicorn'# Deploy with Capistranogem 'capistrano'# for performance monitoringgem 'newrelic_rpm'# use asset pipline and flashgem 'swf_fu', '~> 2.0'gem 'geocoder'# To use Jbuilder templates for JSONgem 'jbuilder' def show end json.(@map, :id)",Rails3 ActionView Template Handlers doesn't work on Production Server
Ruby metaclass," I understand that all classes in ruby are instances of metaclass Class. And that ""regular"" objects are instances of these classes (the instances of metaclass Class).But I keep wondering, I mean classes are root of objects, classes are themselves instances of Class (called metaclass because its instances are classes). I saw in some blogs some overriding of method new, of class Class.So Class behaves as a class, but its instances are classes. So it seems we have a circle, it looks likes class Class is an instance of itself.I'm clearly missing a point here. What is the origin of class Class?Here's an example that's confusing me: But keyword class implies an instance of class Class. So how do this work? <code>  class Class def new #something endend",Ruby metaclass confusion
rails: method ending in ? should return boolean only right?," I think it's just common sense and Ruby convention to do this but I have this method: The only confusion I'm getting is, this doesn't return boolean like I originally anticipated by putting the question mark on the end of the method name. I was under the impression that when evaluating an object as conditional it returns true if not nil.Apparently I'm missing the point here and it's not evaluating it like I thought.So, my question is, would it be best to just do an if (condition) true else false? Or is there a more elegant method of doing this? <code>  def is_subscribed?(feed_url) Subscription.find_by_user_id_and_feed_id(self[ :id ], Feed.find_by_feed_url(feed_url))end",Should a method ending in ? (question mark) return only a boolean?
How to change hash keys from `Symbol` to `String` the easiest way?," I am using Ruby on Rails 3.2.2 and I would like to ""easily"" / ""quickly"" change hash keys from Symbols to Strings. That is, from {:one => ""Value 1"", :two => ""Value 2"", ...} to {""one"" => ""Value 1"", ""two"" => ""Value 2"", ...}.How can I make that by using less code as possible? <code> ",How to change hash keys from `Symbol`s to `String`s?
Ruby gsub replace single quote with backslash single quote," I have a very large string that needs to escape all the single quotes in it, so I can feed it to JavaScript without upsetting it.I have no control over the external string, so I can't change the source data.Example: (the actual string is very long and contains many single quotes)I'm trying to this by using gsub on the string, but can't get this to work: but this gives me: I also tried: but got the same result; I know it's something to do with regular expressions, but I never get those. <code>  Cote d'Ivoir -> Cote d\'Ivoir a = ""Cote d'Ivoir""a.gsub(""'"", ""\\\'"") => ""Cote dIvoirIvoir"" a.gsub(""'"", 92.chr + 39.chr)",Replace single quote with backslash single quote
Ruby: sort an array of numbers based on a given order," I have two arrays. The first array contains the sort order. The second array contains an arbitrary number of elements. I have the property that all elements (value-wise) from the second array are guaranteed to be in the first array, and I am only working with numbers. When I sort A, I would like the elements to appear in the order specified by Order: Note that duplicates are fair game. The elements in A should not be altered, only re-ordered. How can I do this? <code>  A = [1,3,4,4,4,5,2,1,1,1,3,3]Order = [3,1,2,4,5] [3, 3, 3, 1, 1, 1, 1, 2, 4, 4, 4, 5]",Sort an array of numbers based on a given order
"Ruby on Rails File.open, read file modification date"," Is it possible to read a file's modification date with Ruby? I have successfully opened a text file and captured the contents of the file with but it would be very useful to read the modification date of the file. <code>  File.open(""test.txt"", ""r"").each do |line|""",Is it possible to read a file's modification date with Ruby?
Ruby Easy Search for key-value pair in JSON Array," Suppose I have this array of hashes: How can I parse the ""href"" value of the hash where ""product""=>""bcx""Is there any easy way to do this in Ruby? <code>  [{""href""=>""https://company.campfirenow.com"", ""name""=>""Company"", ""id""=>123456789, ""product""=>""campfire""},{""href""=>""https://basecamp.com/123456789/api/v1"", ""name""=>""Company"", ""id""=>123456789, ""product""=>""bcx""}, {""href""=>""https://company.highrisehq.com"", ""name""=>""Company"", ""id""=>123456789, ""product""=>""highrise""}]",Ruby easy search for key-value pair in an array of hashes
Ruby supports recursive arrays. What are they good for?," Ruby supports recursive arrays (that is, self-containing arrays): This is intrinsically cool, but what work can you do with it? <code>  a = []# => [] a << a# => [[...]] a.first == a# => true ",What are recursive arrays good for?
How do i scrape something after JS has changed the DOM?," I'm using Mechanize, although I'm open to Nokogiri if Mechanize can't do it.I'd like to scrape the page after all the scripts have loaded as opposed to beforehand.How might I do this? <code> ",How do I scrape something after JS has changed the DOM?
How does Capybara's expect works in ROR," While going through Ruby On Rails Tutorial by Michael Hartl,in the section where the author writes integration test to validate his Signup page, he has used code spinet bellow. I got what the code does but couldn't get my head around the 'how' part i.e. couldn't understand order of execution. Can someone please explain the semantics of the above chain of methods and blocks and how they fit together?  <code>  expect { click_button ""Create my account"" }.not_to change(User, :count)",How does RSpec's expect work in ROR
How does RSpec's expect works in ROR," While going through Ruby On Rails Tutorial by Michael Hartl,in the section where the author writes integration test to validate his Signup page, he has used code spinet bellow. I got what the code does but couldn't get my head around the 'how' part i.e. couldn't understand order of execution. Can someone please explain the semantics of the above chain of methods and blocks and how they fit together?  <code>  expect { click_button ""Create my account"" }.not_to change(User, :count)",How does RSpec's expect work in ROR
In Ruby what is the meaning of colon after identifier?," I'm learning about Factory Girl and I saw this code: why do factory and last_name have a colon at their end? <code>  factory :post do association :author, factory: :user, last_name: ""Writely""end",In Ruby what is the meaning of colon after identifier in a Hash?
Is ruby really an fully object orientated language?," Ruby is fully object oriented language. In ruby, everything is an object & therefore, belongs to some class. for example 5 belongs to Object class so, we have to call all methods by prefixing class/object name as in Object_name#method_name. example: now, rails has these so called helpers like stylesheet_link_tag, javascript_include_tag, form_for etc which do follow this Object_name#method_name syntax, so i guess they are just normal functions. so my question isWhat are these rails helpers? If they just functions & do notinherit from any class. Doesn't that contradict the claim madesaying - in ruby, everything a object & there are no primitives.As the example, people cite 5.+(6) saying even operators are justplain methods? <code>  1.9.3p194 :001 > 5.class => Fixnum 1.9.3p194 :002 > 5.class.superclass => Integer 1.9.3p194 :003 > 5.class.superclass.superclass => Numeric 1.9.3p194 :005 > 5.class.superclass.superclass.superclass => Object 1.9.3p194 :006 > 5.class.superclass.superclass.superclass.superclass => BasicObject 1.9.3p194 :007 > 5.class.superclass.superclass.superclass.superclass.superclass => nil 5.times{|i| puts i}",Is ruby really an fully object oriented language?
What test harness tool/framework should I use for a Rails app?," How can I test my Rails app with N concurrent users?These simulated users will do some actions like upload/download files, etc.Are there any frameworks or free tools that support this? <code> ",What test harness tool/framework can test concurrent requests in a Rails app?
Ruby: return true only if all values evaluate to true," What's a fast way to verify whether all elements of an enumerable satisfy a certain condition? I guess logically it would be like: For example, if I had an array of integers, and I wanted to answer the question ""Are all integers odd?""I can always iterate over each value, check whether it's true, and then return false when one of them returns false, but is there a better way to do it? <code>  elements = [e1, e2, e3, ...]return (condition on e1) && (condition on e2) && (condition on e3) && ...",Return true only if all values evaluate to true in Ruby
Ruby - Variable comparioson," I have two variables a and b. I want to compare both a and b to a value, say 10.I can do it like this: But, I was wondering if there is any way to write it in a single expression? (E.g. like a == b == 10) <code>  10 == a && 10 == b",Compare multiple variables with a value in a single expression
Inheriting class methods from mixins," It is known that in Ruby, class methods get inherited: However, it comes as a surprise to me that it does not work with mixins: I know that #extend method can do this: But I am writing a mixin (or, rather, would like to write) containing both instance methods and class methods: Now what I would like to do is this: I want A, B inherit both instance and class methods from Common module. But, of course, that does not work. So, isn't there a secret way of making this inheritance work from a single module?It seems inelegant to me to split this into two different modules, one to include, the other to extend. Another possible solution would be to use a class Common instead of a module. But this is just a workaround. (What if there are two sets of common functionalities Common1 and Common2 and we really need to have mixins?) Is there any deep reason why class method inheritance does not work from mixins? <code>  class P def self.mm; puts 'abc' endendclass Q < P; endQ.mm # works module M def self.mm; puts 'mixin' endendclass N; include M endM.mm # worksN.mm # does not work! module X; def mm; puts 'extender' end endY = Class.new.extend XX.mm # works module Common def self.class_method; puts ""class method here"" end def instance_method; puts ""instance method here"" endend class A; include Common # custom part for Aendclass B; include Common # custom part for Bend",Inheriting class methods from modules / mixins in Ruby
What is the appropriate way to implement == in ruby?," I want to implement == for a ruby class. I can do or According to this article, it seems that the former would make more sense. If I was implementing eql? then I would do the latter. Is this correct?  <code>  def ==(o) o.respond_to?(:id) && self.id == o.idend def ==(o) o.is_a?(Foo) && self.id == o.idend","Should a ""=="" implementation in Ruby check the type?"
"What exactly is the keyword ""should"" in rspec ruby"," I am a beginner in Ruby and had this question nagging me for a long time.In an RSpec file , if we write Book.should <do something> , what is the should keyword? Is it a member of the Book object? How did it come to be the member of the Book object? Or is it some construct of Ruby? Is it a function? Where can i find the definition of this if it is a function or member? <code> ","What exactly is the keyword ""should"" in RSpec Ruby"
Rails - Testing JSON API wiht functional tests," I have just a simple question, but I could not found any answer.My ruby on rails 3.2.2 appilcation have a JSON API with a devise session authentication.My question is: How can I test this API with functional or integration tests - and is there a way to handle a session?I do not have a front end, just a API that I can do GET. POST. PUT. and DELETE with JSON Body.Which is the best way to test this automated?EXAMPLE create new userPOST www.exmaple.com/users <code>  { ""user"":{ ""email"" : ""test@example.com"", ""password "" : ""mypass"" }}",Rails - Testing JSON API with functional tests
Where to place private methods in ruby?, Most of the blogs or tutorials or books have private methods at the bottom of any class/module. Is this the best practice?I find having private methods as and when necessary more convenient. For example: This way I find the code more readable instead of scrolling up and down continuously which is very irritating.Is there something terribly wrong in this approach? Is having private methods at the bottom not just a best practice and something else? <code>  publicdef my_method # do something minion_methodendprivatedef minion_method # do somethingendpublicdef next_methodend,Where to place private methods in Ruby?
Rails App + Devise : Security hole ->back button preserves session info after user has logged out in Safari," After using Devise for my authentication, I found that there was a security hole in that, after the user logs out, the session variables are preserved. This allows anyone to press the back button and access the logged in user's previous screen.I looked at these postsNum 1Num 2Num 3I added these lines to my application_controller In the _form.html.erb I added this at the top Then I tested the application on Firefox, Chrome and Safari.Firefox and Chrome were fine in that I logged out and hit the back button and could not see the previous screen of the user, however, in Safari and Opera, the insecure behavior persists. This code does not have an effect.Any suggestions on how to fix this?Thanks <code>  before_filter :set_no_cachedef set_no_cacheresponse.headers[""Cache-Control""] = ""no-cache, no-store, max-age=0, must-revalidate""response.headers[""Pragma""] = ""no-cache""response.headers[""Expires""] = ""Fri, 01 Jan 1990 00:00:00 GMT""end <%if user_signed_in? %><%=link_to ""Sign Out"", destroy_user_session_path, :method => :delete %><br/><%= form_for(@listing) do |f| %><% if @listing.errors.any? %>...........",Rails ( set_no_cache method) Cannot disable browser caching in Safari and Opera
Rails App + Devise : Security hole ->back button preserves session info after user has logged out in Safari & Opera," After using Devise for my authentication, I found that there was a security hole in that, after the user logs out, the session variables are preserved. This allows anyone to press the back button and access the logged in user's previous screen.I looked at these postsNum 1Num 2Num 3I added these lines to my application_controller In the _form.html.erb I added this at the top Then I tested the application on Firefox, Chrome and Safari.Firefox and Chrome were fine in that I logged out and hit the back button and could not see the previous screen of the user, however, in Safari and Opera, the insecure behavior persists. This code does not have an effect.Any suggestions on how to fix this?Thanks <code>  before_filter :set_no_cachedef set_no_cacheresponse.headers[""Cache-Control""] = ""no-cache, no-store, max-age=0, must-revalidate""response.headers[""Pragma""] = ""no-cache""response.headers[""Expires""] = ""Fri, 01 Jan 1990 00:00:00 GMT""end <%if user_signed_in? %><%=link_to ""Sign Out"", destroy_user_session_path, :method => :delete %><br/><%= form_for(@listing) do |f| %><% if @listing.errors.any? %>...........",Rails ( set_no_cache method) Cannot disable browser caching in Safari and Opera
"Rails + Devise + Can Can - Cannot disable browser caching in Safari and Opera- Security issue, session variables preserved"," After using Devise for my authentication, I found that there was a security hole in that, after the user logs out, the session variables are preserved. This allows anyone to press the back button and access the logged in user's previous screen.I looked at these postsNum 1Num 2Num 3I added these lines to my application_controller In the _form.html.erb I added this at the top Then I tested the application on Firefox, Chrome and Safari.Firefox and Chrome were fine in that I logged out and hit the back button and could not see the previous screen of the user, however, in Safari and Opera, the insecure behavior persists. This code does not have an effect.Any suggestions on how to fix this?Thanks <code>  before_filter :set_no_cachedef set_no_cacheresponse.headers[""Cache-Control""] = ""no-cache, no-store, max-age=0, must-revalidate""response.headers[""Pragma""] = ""no-cache""response.headers[""Expires""] = ""Fri, 01 Jan 1990 00:00:00 GMT""end <%if user_signed_in? %><%=link_to ""Sign Out"", destroy_user_session_path, :method => :delete %><br/><%= form_for(@listing) do |f| %><% if @listing.errors.any? %>...........",Rails ( set_no_cache method) Cannot disable browser caching in Safari and Opera
what is the term for the necessary object interface that enables another object interface?," The horribleness of the title of the question is what I'm trying to solve. Example:in Ruby, Enumerable is an interface in a sense that I can implement something and document it as: but on the other hand, Enumerable is a kind of amplification of the interface that has #each as one of it's methods. If I have a class For those unfamiliar with Ruby, if you mixin Enumerable module in a class, you get dozens of methods that only rely on #each method to provide things like #map, #select, etc.I could say my Foo class is Enumerable-able or Enumerable-compatible or what? What terms describe an answer to ""What does it take to be an Enumerable?"", ""Well you have to have #each""Similarly, in Ruby Does that mean that to fake an Array interface, I have to implement 111 methods? No way, but how to I find out what methods are the ""essence"" of Array. is it just #[], #[]= and #size? How to make sense of it? <code>  def myfancymethod(please_pass_me_an_Enumerable_here) class Foo def each :bar endend (Array.new.methods - Object.new.methods).size # 111","How to find ""essential"" methods to provide an interface of Ruby mixins?"
ruby save block," I am calling the RestClient::Resource#get(additional_headers = {}, &block) method multiple times with the same block but on different Resources, I was wondering if there is a way to save the block into a variable, or to save it into a Proc convert it into a block each time.Edit:I did the following: I get: Syntax error, unexpected tAMPER <code>  resource = RestClient::Resource.new('https://foo.com')redirect = lambda do |response, request, result, &block| if [301, 302, 307].include? response.code response.follow_redirection(request, result, &block) else response.return!(request, result, &block) endend@resp = resource.get (&redirect)",Save and re-use block for method calls
Hash with indifferent access," I have a non-Rails project in which I am loading some settings from a YAML file: I can only access this hash like config[""host""], config[""username""] etc. I want indifferent access so I can use both :host and ""host"". The reason is, one of the gems in the project to which I am passing this hash seems to be accessing it using symbols and it fails currently.What is best way to create a hash with indifferent access in this scenario? <code>  config = YAML::load(File.open(""#{LOG_ROOT}/config/database.yml""))",Hash with indifferent access
Ruby Hash with indifferent access," I have a non-Rails project in which I am loading some settings from a YAML file: I can only access this hash like config[""host""], config[""username""] etc. I want indifferent access so I can use both :host and ""host"". The reason is, one of the gems in the project to which I am passing this hash seems to be accessing it using symbols and it fails currently.What is best way to create a hash with indifferent access in this scenario? <code>  config = YAML::load(File.open(""#{LOG_ROOT}/config/database.yml""))",Hash with indifferent access
"How do I parse this Craigslist page in this particular way? - Ruby, Nokogiri"," This is the page in question: http://phoenix.craigslist.org/cpg/What I would like to do is to create an array that looks like this:Date (as captured by the h4 tag on that page) => in cell [0][0][0],Link Text => in cell [0][1][0]Link href => in cell [0][1][1]i.e. in each row, I store each of those items per row. What I have done is simply pulled all the h4 tags in and stored them in a hash like this: The problem with this is that one cell stores all the text from the h4 tags on the entire page...whereas I would like to have 1 date to 1 cell.So as an example: Any thoughts on how I might approach this, with code would be greatly appreciated. <code>  contents2[link[:date]] = content_page.css(""h4"").text 0 => Mon May 28 - Leads need follow up - (Phoenix) - http://phoenix.craigslist.org/wvl/cpg/3043296202.html1=> Mon May 28 - .Net/Java Developers - (phoenix) - http://phoenix.craigslist.org/cph/cpg/3043067349.html",How do I parse this Craigslist page in this particular way?
Why is there a String.replace in Ruby?," While browsing the ruby documentation, I found the replace method, but I cannot figure out what can be the use case of this method.The only thing I can think of is about memory management (something like no reallocation needed if the new string has a length less or equal to the previous).Any ideas ? <code> ",Why is there a String#replace in Ruby?
Fixing 'PATH' in Environment Variables in Windows7 for multiple applications," After using JDK if I use ruby, I have to change 'PATH' in Environment Variables in Windows7. Is there a work around where I don't have to keep changing it even if I use multiple applications? <code> ",Fixing 'PATH' in Environment Variables in Windows 7 for multiple applications
Ruby: pushing a string into an array within an array yields unexpected result," I have an array in Ruby that consists of 5 empty arrays. I am trying to use the << operator to push a string into the first array, but the result is that the string gets pushed into ALL of the arrays. Please help me understand this.The expected output is: but instead I get: irb dump: <code>  # => [[""car""], [], [], [], []] # => [[""car""], [""car""], [""car""], [""car""], [""car""]] 1.9.3-p194 :001 > output = Array.new(5, []) => [[], [], [], [], []] 1.9.3-p194 :002 > output.inspect => ""[[], [], [], [], []]"" 1.9.3-p194 :003 > output[0].inspect => ""[]"" 1.9.3-p194 :004 > output[0] << ""car"" => [""car""] 1.9.3-p194 :005 > output.inspect => ""[[\""car\""], [\""car\""], [\""car\""], [\""car\""], [\""car\""]]"" ",Pushing a string into an array within an array yields unexpected result
Different between embeds_many and has_many in mongoid, Can anyone explain to me the difference between embeds_many and has_many in mongoid? <code> ,Difference between embeds_many and has_many in mongoid
Why is the splat/unary operator behaving this way?," To give a little context around how I understand the problem.Using splat collect on a string sends :to_a or :to_ary to the String So I was thinking that redefining the :to_ary method would be what I'm after. Now this confuses me to no end.Printing the result from the *a = ""a"" changes the value assigned to a?To demonstrate further <code>  class String def method_missing method, *args, &block p method #=> :to_ary p args #=> [] p block #=> nil endend*b = ""b"" class String def to_ary [""to_a""] endendp *a = ""a"" #=> ""a""p a #=> ""a""*b = ""b""p b #=> [""to_a""] class String def to_ary [self.upcase!] endendp *a = ""a"" #=> ""a""p a #=> ""a""*b = ""b""p b #=> [""B""]","Why is the splat/unary operator changing the assigned value a when p is called before *a = """"?"
"Error installing rubyMine, no SDK specified"," Getting ""Could not install gems:no SDK specified"" when trying to run any command such as starting the rails server. Why am I getting this and how can I get around it?I've had issues before with the JDK but not seen this SDK error. <code> ","Error installing rubyMine, no SDK specified, but it is listed"
Expected ......... to define Base," I new to rails. I have a setup in the lib directory like so: The base.rb defines the Base class as well: I have the following code in my application.rb When I include it in posts controller I get following errors: Any idea? I'm using rails 3.2.5 with RVM. Thank you for every advice.UPDATED: Added my full stack: <code>  lib/ blog/ core/ search/ base.rb module Blog module Core module Search class Base attr_accessor :properties def initialize(params) @properties = {} end end end endend config.autoload_paths += Dir[""#{config.root}/lib/**/""] LoadError in PostsController#indexExpected /home/usr/code/blog/lib/blog/core/search/base.rb to define Base Started GET ""/admin/posts"" for 127.0.0.1 at 2012-06-08 21:06:18 +0800LoadError (Expected /home/usr/code/blog/lib/blog/core/search/base.rb to define Base): app/controllers/admin/base_controller.rb:5:in `<top (required)>' app/controllers/admin/posts_controller.rb:6:in `<top (required)>' Rendered /home/usr/.rvm/gems/ruby-1.9.3-p194@rails-3.2.5/gems/actionpack-3.2.5/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.9ms) Rendered /home/usr/.rvm/gems/ruby-1.9.3-p194@rails-3.2.5/gems/actionpack-3.2.5/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.6ms) Rendered /home/usr/.rvm/gems/ruby-1.9.3-p194@rails-3.2.5/gems/actionpack-3.2.5/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (7.0ms)",Expected to define. When calling class inside a module
Rails 3 Order By Count on has_many :trhough," I have an application where I can list Items and add tags to each Item.The models Items and Tags are associated like this: So, this many-to-many relationship allows me to set n tags for each Item, and the same tag can be used several times.I'd like to list all tags ordered by the number of items associated with this tag. More used tags, shows first. Less used, last.How can I do that? Regards. <code>  class Item < ActiveRecord::Base has_many :taggings has_many :tags, :through => :taggingsendclass Tagging < ActiveRecord::Base belongs_to :item belongs_to :tagendclass Tag < ActiveRecord::Base has_many :taggings has_many :items, :through => :taggingsend",Rails 3 Order By Count on has_many :through
How to refer a index specified value from a enumerator," Assume I have an enumerable object enum and now I want to get the third item.I know one of a general approach is convert into an array and then access with index like: But this way will create a temporary array and it might be inefficient.Now I use: But this is quite ugly and redundant.What's the most efficient way to do this? <code>  enum.to_a[2] enum.each_with_index {|v, i| break v if i == 2}",refer an enumerator value with specified index
Swapping keys and values in a hash," How do I swap keys and values in a Hash?I have the following Hash: that I want to transform into: Using map seems rather tedious. Is there a shorter solution? <code>  {:a=>:one, :b=>:two, :c=>:three} {:one=>:a, :two=>:b, :three=>:c}",How to swap keys and values in a hash
Open Vim from a Rakefile," I am creating a journal application for personal notes and have the following in my Rakefile: The last part I would like to include is the opening of the Vim text editor but I am unable to figure out how to open it as if I called it directly from the bash terminal. I have tried: but unfortunately I think both of those open it as a background process.I have been referencing ""6 Ways to Run Shell Commands in Ruby"". <code>  task :new do entry_name = ""Entries/#{Time.now.to_s.gsub(/[-\ :]+/, '.').gsub(/.0500+/,'')}.md"" `touch #{entry_name}` `echo ""# $(date)"" >> #{entry_name}`end vim #{entry_name}",Open Vim from a Rakefile?
How can I open Vim from a Rakefile?," I am creating a journal application for personal notes and have the following in my Rakefile: The last part I would like to include is the opening of the Vim text editor but I am unable to figure out how to open it as if I called it directly from the bash terminal. I have tried: but unfortunately I think both of those open it as a background process.I have been referencing ""6 Ways to Run Shell Commands in Ruby"". <code>  task :new do entry_name = ""Entries/#{Time.now.to_s.gsub(/[-\ :]+/, '.').gsub(/.0500+/,'')}.md"" `touch #{entry_name}` `echo ""# $(date)"" >> #{entry_name}`end vim #{entry_name}",Open Vim from a Rakefile?
Finding all documents in a collection in Mongo," I have been fiddling with Mongo, but can't get this simple example to work. I'm simply trying to retrieve all documents in a collection: I get the error: undefined method 'each' for Category:Class (NoMethodError).Connection to the database is well established, and a collection named categories contains a few documents. <code>  require 'mongoid'# configuration ... class Category include Mongoid::Document field :name, type: StringendCategory.each do |test| puts test.inspectend",Finding all documents in a collection with Mongoid
Install nokogiri in ubuntu 12.04," I tried to install Nokogiri on my Ubuntu 12.04 system, and got an error that said ""libxslt is missing"", but the libxslt-dev and libxml2-dev are installed.Is there a robust installation process? How can I check the links to dependent libraries?I used RVM, and the RVM pkg is installed too. <code>  ERROR: Error installing nokogiri: ERROR: Failed to build gem native extension. /home/victor/.rvm/rubies/ruby-1.9.3-p125/bin/ruby extconf.rbchecking for libxml/parser.h... yeschecking for libxslt/xslt.h... yeschecking for libexslt/exslt.h... yeschecking for iconv_open() in iconv.h... yeschecking for xmlParseDoc() in -lxml2... yeschecking for xsltParseStylesheetDoc() in -lxslt... no-----libxslt is missing. please visit http://nokogiri.org/tutorials/installing_nokogiri.html for help with installing dependencies.-----*** extconf.rb failed ***Could not create Makefile due to some reason, probably lack ofnecessary libraries and/or headers. Check the mkmf.log file for moredetails. You may need configuration options.Provided configuration options: --with-opt-dir --with-opt-include --without-opt-include=${opt-dir}/include --with-opt-lib --without-opt-lib=${opt-dir}/lib --with-make-prog --without-make-prog --srcdir=. --curdir --ruby=/home/victor/.rvm/rubies/ruby-1.9.3-p125/bin/ruby --with-zlib-dir --without-zlib-dir --with-zlib-include --without-zlib-include=${zlib-dir}/include --with-zlib-lib --without-zlib-lib=${zlib-dir}/lib --with-iconv-dir --without-iconv-dir --with-iconv-include --without-iconv-include=${iconv-dir}/include --with-iconv-lib --without-iconv-lib=${iconv-dir}/lib --with-xml2-dir --without-xml2-dir --with-xml2-include --without-xml2-include=${xml2-dir}/include --with-xml2-lib --without-xml2-lib=${xml2-dir}/lib --with-xslt-dir --without-xslt-dir --with-xslt-include --without-xslt-include=${xslt-dir}/include --with-xslt-lib --without-xslt-lib=${xslt-dir}/lib --with-libxslt-config --without-libxslt-config --with-pkg-config --without-pkg-config --with-libxml-2.0-config --without-libxml-2.0-config --with-libiconv-config --without-libiconv-config --with-xml2lib --without-xml2lib --with-xsltlib --without-xsltlibGem files will remain installed in /home/victor/.rvm/gems/ruby-1.9.3-p125@dradis/gems/nokogiri-1.5.4 for inspection.Results logged to /home/victor/.rvm/gems/ruby-1.9.3-p125@dradis/gems/nokogiri-1.5.4/ext/nokogiri/gem_make.out enter code here",What is a robust installation process for Nokogiri (on Ubuntu)?
Why can't I install Nokogiri on Ubuntu 12.04?," I tried to install Nokogiri on my Ubuntu 12.04 system, and got an error that said ""libxslt is missing"", but the libxslt-dev and libxml2-dev are installed.Is there a robust installation process? How can I check the links to dependent libraries?I used RVM, and the RVM pkg is installed too. <code>  ERROR: Error installing nokogiri: ERROR: Failed to build gem native extension. /home/victor/.rvm/rubies/ruby-1.9.3-p125/bin/ruby extconf.rbchecking for libxml/parser.h... yeschecking for libxslt/xslt.h... yeschecking for libexslt/exslt.h... yeschecking for iconv_open() in iconv.h... yeschecking for xmlParseDoc() in -lxml2... yeschecking for xsltParseStylesheetDoc() in -lxslt... no-----libxslt is missing. please visit http://nokogiri.org/tutorials/installing_nokogiri.html for help with installing dependencies.-----*** extconf.rb failed ***Could not create Makefile due to some reason, probably lack ofnecessary libraries and/or headers. Check the mkmf.log file for moredetails. You may need configuration options.Provided configuration options: --with-opt-dir --with-opt-include --without-opt-include=${opt-dir}/include --with-opt-lib --without-opt-lib=${opt-dir}/lib --with-make-prog --without-make-prog --srcdir=. --curdir --ruby=/home/victor/.rvm/rubies/ruby-1.9.3-p125/bin/ruby --with-zlib-dir --without-zlib-dir --with-zlib-include --without-zlib-include=${zlib-dir}/include --with-zlib-lib --without-zlib-lib=${zlib-dir}/lib --with-iconv-dir --without-iconv-dir --with-iconv-include --without-iconv-include=${iconv-dir}/include --with-iconv-lib --without-iconv-lib=${iconv-dir}/lib --with-xml2-dir --without-xml2-dir --with-xml2-include --without-xml2-include=${xml2-dir}/include --with-xml2-lib --without-xml2-lib=${xml2-dir}/lib --with-xslt-dir --without-xslt-dir --with-xslt-include --without-xslt-include=${xslt-dir}/include --with-xslt-lib --without-xslt-lib=${xslt-dir}/lib --with-libxslt-config --without-libxslt-config --with-pkg-config --without-pkg-config --with-libxml-2.0-config --without-libxml-2.0-config --with-libiconv-config --without-libiconv-config --with-xml2lib --without-xml2lib --with-xsltlib --without-xsltlibGem files will remain installed in /home/victor/.rvm/gems/ruby-1.9.3-p125@dradis/gems/nokogiri-1.5.4 for inspection.Results logged to /home/victor/.rvm/gems/ruby-1.9.3-p125@dradis/gems/nokogiri-1.5.4/ext/nokogiri/gem_make.out enter code here",What is a robust installation process for Nokogiri (on Ubuntu)?
"Different between .nil?, .blank?, .empty?"," Possible Duplicate: A concise explanation of nil v. empty v. blank in Ruby on Rails Can anyone tell me the difference between nil?, blank? and empty? in Ruby? <code> ","Difference between .nil?, .blank? and .empty?"
Dot vs Double Colon Ruby," I am learning Ruby from the Poignant Guide to Ruby and in some of the code examples, I came across uses of the double colon and dot that seem to be used for the same purpose: In the above code, the double colon is being used to access the open method of the File class. However, I later came across code that used a dot for the same purpose: This time, a dot is being used to access the read method of the File class. What is the difference between: and  <code>  File::open( 'idea-' + idea_name + '.txt', 'w' ) do |f| f << ideaend require 'wordlist'# Print each idea out with the words fixedDir['idea-*.txt'].each do |file_name| idea = File.read( file_name ) code_words.each do |real, code| idea.gsub!( code, real ) endputs ideaend File.read() File::open()",. vs :: (dot vs. double-colon) for calling a method
Getting input value from Nokogiri::XML::NodeSet," I am looking for my input element using Nokogiri's xpath method. It's returning an object of class Nokogiri::XML::NodeSet: Is there a faster and cleaner way to get the value of input than casting this using to_s: and match with regular expressions?  <code>  [#<Nokogiri::XML::Element:0x3fcc0e07de14 name=""input"" attributes=[#<Nokogiri::XML::Attr:0x3fcc0e07dba8 name=""type"" value=""text"">, #<Nokogiri::XML::Attr:0x3fcc0e07db94 name=""name"" value=""creditInstallmentAmount"">, #<Nokogiri::XML::Attr:0x3fcc0e07db44 name=""style"" value=""width:240px"">, #<Nokogiri::XML::Attr:0x3fcc0e07dae0 name=""value"" value=""94.8"">, #<Nokogiri::XML::Attr:0x3fcc0e07da18 name=""readonly"" value=""true"">]> ""<input type=\""text\"" name=\""creditInstallmentAmount\"" style=\""width:240px\"" value=\""94.8\"" readonly>""",How do I get the input value from a Nokogiri::XML::NodeSet?
Using Sinatra with Ruby I have GZIP'ed static resources but I don't know how to send them to the browser?," Note: I had another similar question about how to GZIP data using Ruby's zlib which technically was answered and I didn't feel I could start evolving the question since it had been answered so although this question is related it is not the same...The following code (I believe) is GZIP'ing a static CSS file and storing the results in the result variable. But what do I do with this in the sense: how can I send this data back to the browser so it is recognised as being GZIP'ed rather than the original file size (e.g. when checking my YSlow score I want to see it correctly marking me for making sure I GZIP static resources). ...one thing to note is that in my previous question the respondent clarified that Zlib::Deflate.deflate will not produce gzip-encoded data. It will only produce zlib-encoded data and so I would need to use Zlib::Deflate.new with the windowBits argument equal to 31 to start a gzip stream.But when I run this code I don't actually know what to do with the result variable and its content. There is no information on the internet (that I can find) about how to send GZIP encoded static resources (like JavaScript, CSS, HTML etc) to the browser, this making the page load quicker. It seems every Ruby article I read is based on someone using Ruby on Rails!!?Any help really appreciated. <code>  z = Zlib::Deflate.new(6, 31)z.deflate(File.read('public/Assets/Styles/build.css'))z.flush@result = z.finish # could also of done: result = z.deflate(file, Zlib::FINISH) z.close",Using gzip compression in Sinatra with Ruby
ruby 1.9.3 in not getting install on ubuntu, I want to install ruby 1.9.3 on Ubuntu without rvm I run It's taking ruby 1.8 and ruby 1.9.1.And if I do I am still not able to install ruby. How can I install ruby on Ubuntu? <code>  sudo apt-get install ruby sudo apt-get install ruby 1.9.3 -p XXXX,How do I install Ruby 1.9.3 on Ubuntu without RVM?
RegEx that returns string from last / to end in ruby," I have a string would like everything after the last / to be returned. E.g. for https://www.example.org/hackerbob, it should return ""hackerbob"". <code> ",How can you return everything after last slash(/) in a Ruby string
Return everything after last / in string in Ruby," I have a string would like everything after the last / to be returned. E.g. for https://www.example.org/hackerbob, it should return ""hackerbob"". <code> ",How can you return everything after last slash(/) in a Ruby string
Does Ruby have an equivalent to TimeSpanin C#?," In C# there is a TimeSpan class. It represents a period of time and is returned from many date manipulation options. You can create one and add or subtract from a date etc.In Ruby and specifically rails there seems to be lots of date and time classes but nothing that represents a span of time?Ideally I'd like an object that I could use for outputting formatted dates easily enough using the standard date formatting options.eg. Is there such a class?Even better would be if I could do something like I am aware that subtracting of two dates results in the number of seconds separating said dates and that I could work it all out from that. <code>  ts.to_format(""%H%M"") ts = end_date - start_date",Does Ruby have an equivalent to TimeSpan in C#?
Ruby libraries to validate hashes?," A longer, alternative phrasing of the question is: ""What are some Ruby libraries or approaches to test the shape of arbitrary data structures (hashes, arrays, integers, floats, strings, and so on)?""To start, let me show a simple example: Next, I want to validate it -- by this I mean compare against a shape / schema / template such as: Or, perhaps, a more specific shape: One possible API might look like: These are just examples, I'm open to other approaches.About 3 years ago, I wrote schema_hash to scratch my own itch. I plan to update it, but first I wanted to get a sense for alternatives and better approaches.The motivation for this question comes from a Mongo use case, but the question is not necessarily Mongo specific.Like I mentioned at the top, I would like to see or build the ability validate arbitrary data structures: hashes, arrays, primitives, and so on, in any nested combination.""You don't need a schema for Mongo, so why do you care?""Like I mention above, I am not exclusively thinking about Mongo use casesBut even in the context of Mongo, even if you don't want to require a data structure to take a certain shape, it still can be useful to test a data structure against a shape or pattern and act accordingly.""Why not just write custom validations?""When I worked on a previous project, this is exactly where I started. It got to be painful to write validations repeatedly for nested hashes. I started thinking about what would make it easier, and I came up with a syntax similar to what I shared above.What is out there? What should I try?All of this said, I'm curious about what other people are doing. Is there a ""golden path""? I'm trying out different approaches, including embedded documents and validates_associated with Mongoid for example... but those approaches seem like overkill when hashes get nested more than a level or so deep.I looked around for Validation on Ruby Toolbox for validation (pun intended), but didn't find what I was looking for. While I was there, I suggested a new category called ""Validation.""It is quite possible that what I'm asking fits less in the ""validation"" topic area and more in others, such as ""data structures"" and ""traversals"". If so, please point me in the right direction. <code>  hash_1 = { k1: 1.0, k2: 42, k3: { k4: ""100.00"", k5: ""dollars"" }} shape_a = { k1: Float, k2: Integer, k3: Hash} shape_b = { k1: Float, k2: Integer, k3: { k4: String, k5: String }} require '_____________'hash_1.schema = shape_ahash_1.valid? # => truehash_1.schema = shape_bhash_1.valid? # => true",Validating the shape of Ruby hashes?
Ruby Highline ask method won't use same line," Setup:BashRuby 1.9.2highline (1.6.13)Description:I'm fairly used to highline with some other projects, but haven't used it in a few months. Now, on a fresh install on Ruby 1.9.2, it doesn't seem to allow prompts to be answered on the same line.So previously I would see something like: And get: Now I see something like: Where the pipe (|) symbol is my terminal cursor.Any ideas why this change has occurred?  <code>  require ""highline/import"" ask ""What is your favorite color?"" What is your favorite color? | What is your favorite color? |",Highline ask method won't use same line
How to get random 0 and 1 numbers ruby, So basically for fun I was trying to generate a column of numbers (7 digits only 0s and 1s)My code's pretty short: My problem is that instead of generating a random column of 0s and 1s all the numbers are used. <code>  a = rand(0000000-1111111)b = 220a1 = rand(0000000-1111111)a2 = rand(0000000-1111111)a3 = rand(0000000-1111111)a4 = rand(0000000-1111111)a5 = rand(0000000-1111111)while b !=0 puts a puts a2 puts a3 puts a4 puts a5end,How to get random 0 and 1 numbers
MongoDB with Posgresql in One Rails App, Can I use MongoDB and a PostgreSQL in one rails app? Specifically I will eventually want to use something like MongoHQ. So far I have failed to get this working in experimentation. And it concerns me that the MongoDB documentation specifically says I have to disable ActiveRecord. Any advice would be appreciated. <code> ,MongoDB with PostgreSQL in One Rails App
Are bundle exec and Bundler.setup equivalent?," Do these things accomplish exactly the same?starting a ruby process with bundle exec ruby foo.rbhaving require ""bundler/setup"" as the first line of foo.rb  <code> ",Are bundle exec and require 'bundler/setup' equivalent?
Convert double-width Japanese to single-width," In PHP it's possible to convert double-width characters to single width with the function mb_convert_kana. They call it ""convert zen-kaku to han-kaku"". For example, I have a string to convert: and I'd like to find some method like this Is there a way to do this in Ruby? <code>  dbl = """" dbl = """".convert_to_half_width # dbl is now ""BOX""",Convert full-width Japanese text to half-width (zen-kaku to han-kaku)
Get Rails backtrace without an exception," I want to log the current backtrace (stacktrace) in a Rails 3 app without an exception occurring. Any idea how?Why do I want this? I'm trying to trace the calls that are made when Rails looks for a template so that I can choose a part of the process to override (because I want to change the view path for a particular subclassed controller of mine).I'd like to call it from the file: gems\actionpack-3.2.3\lib\action_dispatch\middleware\templates\rescues\missing_template.erb. I know that's not best practice, but I know it's downstream of the stack from where the search for templates occurs. <code> ",Get current stack trace in Ruby without raising an exception
Ruby: deleting a specific element from a nested hash," I am trying to work with a nested hash. I have a deck of cards represented as follows: My goal is to be able to remove one specific card from the deck and return the deck of cards without that specific card. Would anyone be able to help me on how to iterate through the hash and remove a card like the two of clubs? This code works to remove a suit of cards, but I cant figure out how to remove a specific card <code>  deck_of_cards = {:hearts => {:two => 2, :three => 3, :four => 4, :five => 5, :six => 6, :seven => 7, :eight => 8, :nine => 9, :ten => 10, :jack => 10, :queen => 10, :king => 10, :ace => 11},:spades => {:two => 2, :three => 3, :four => 4, :five => 5, :six => 6, :seven => 7, :eight => 8, :nine => 9, :ten => 10, :jack => 10, :queen => 10, :king => 10, :ace => 11},:clubs => {:two => 2, :three => 3, :four => 4, :five => 5, :six => 6, :seven => 7, :eight => 8, :nine => 9, :ten => 10, :jack => 10, :queen => 10, :king => 10, :ace => 11},:diamonds => {:two => 2, :three => 3, :four => 4, :five => 5, :six => 6, :seven => 7, :eight => 8, :nine => 9, :ten => 10, :jack => 10, :queen => 10, :king => 10, :ace => 11}} deck_of_cards[:two][:clubs] deck_of_cards.delete_if {|k, v| k == :spades}",Deleting a specific element from a nested hash
Rails 3.1: How to garbage collect ActiveRecord objects in hashes," I have a simple ActiveRecord model called Student with 100 records in the table. I do the following in a rails console session: Now I do the following: Can anyone explain why this happens and whether there is a smart way to solve this without knowing the underlying hash structure? I know I can do this: and it will remove all Student objects from memory correctly, but I'm wondering if there is a general solution (my real-life problem is wide spread and has more intricate data structures than the hash shown above).I'm using Ruby 1.9.3-p0 and Rails 3.1.0.UPDATE (SOLVED)Per Oscar Del Ben's explanation below, a few ActiveRecord::Relation objects are created in the problematic code snippet (they are actually created in both code snippets, but for some reason they ""misbehave"" only in the second one. Can someone shed light on why?). These maintain references to the ActiveRecord objects via an instance variable called @records. This instance variable can be set to nil through the ""reset"" method on ActiveRecord::Relation. You have to make sure to perform this on all the relation objects: Note: You can also use Mass.detach (using the ruby-mass gem Oscar Del Ben referenced), though it will be much slower than the code above. Note that the code above does not remove a few ActiveRecord::Relation objects from memory. These seem to be pretty insignificant though. You can try doing: And this would remove some of the ActiveRecord::Relation objects, but not all of them (not sure why, and those that are left have no Mass.references. Weird). <code>  ObjectSpace.each_object(ActiveRecord::Base).count# => 0x = Student.allObjectSpace.each_object(ActiveRecord::Base).count# => 100x = nilGC.startObjectSpace.each_object(ActiveRecord::Base).count# => 0 # Good! ObjectSpace.each_object(ActiveRecord::Base).count# => 0x = Student.all.group_by(&:last_name)ObjectSpace.each_object(ActiveRecord::Base).count# => 100x = nilGC.startObjectSpace.each_object(ActiveRecord::Base).count# => 100 # Bad! x.keys.each{|k| x[k]=nil}x = nilGC.start ObjectSpace.each_object(ActiveRecord::Base).count# => 100ObjectSpace.each_object(ActiveRecord::Relation).each(&:reset)GC.startObjectSpace.each_object(ActiveRecord::Base).count# => 0 Mass.index(ActiveRecord::Relation)[""ActiveRecord::Relation""].each{|x| Mass.detach Mass[x]}GC.start",ActiveRecord objects in hashes aren't garbage collected -- a bug or a sort of caching feature?
How to garbage collect ActiveRecord objects in hashes," I have a simple ActiveRecord model called Student with 100 records in the table. I do the following in a rails console session: Now I do the following: Can anyone explain why this happens and whether there is a smart way to solve this without knowing the underlying hash structure? I know I can do this: and it will remove all Student objects from memory correctly, but I'm wondering if there is a general solution (my real-life problem is wide spread and has more intricate data structures than the hash shown above).I'm using Ruby 1.9.3-p0 and Rails 3.1.0.UPDATE (SOLVED)Per Oscar Del Ben's explanation below, a few ActiveRecord::Relation objects are created in the problematic code snippet (they are actually created in both code snippets, but for some reason they ""misbehave"" only in the second one. Can someone shed light on why?). These maintain references to the ActiveRecord objects via an instance variable called @records. This instance variable can be set to nil through the ""reset"" method on ActiveRecord::Relation. You have to make sure to perform this on all the relation objects: Note: You can also use Mass.detach (using the ruby-mass gem Oscar Del Ben referenced), though it will be much slower than the code above. Note that the code above does not remove a few ActiveRecord::Relation objects from memory. These seem to be pretty insignificant though. You can try doing: And this would remove some of the ActiveRecord::Relation objects, but not all of them (not sure why, and those that are left have no Mass.references. Weird). <code>  ObjectSpace.each_object(ActiveRecord::Base).count# => 0x = Student.allObjectSpace.each_object(ActiveRecord::Base).count# => 100x = nilGC.startObjectSpace.each_object(ActiveRecord::Base).count# => 0 # Good! ObjectSpace.each_object(ActiveRecord::Base).count# => 0x = Student.all.group_by(&:last_name)ObjectSpace.each_object(ActiveRecord::Base).count# => 100x = nilGC.startObjectSpace.each_object(ActiveRecord::Base).count# => 100 # Bad! x.keys.each{|k| x[k]=nil}x = nilGC.start ObjectSpace.each_object(ActiveRecord::Base).count# => 100ObjectSpace.each_object(ActiveRecord::Relation).each(&:reset)GC.startObjectSpace.each_object(ActiveRecord::Base).count# => 0 Mass.index(ActiveRecord::Relation)[""ActiveRecord::Relation""].each{|x| Mass.detach Mass[x]}GC.start",ActiveRecord objects in hashes aren't garbage collected -- a bug or a sort of caching feature?
How can I memoize a method that may return true or false in Ruby?," Obviously ||= won't work because if it turns out to be false or nil, then expensive_way_to_calculate_x will get run over and over.Currently the best way I know is to put the value into an Array: Is there a more conventional or efficient way of doing this?UPDATE I realized that I wanted to memoize nil in addition to false - this goes all the way back to https://rails.lighthouseapp.com/projects/8994/tickets/1830-railscachefetch-does-not-work-with-false-boolean-as-cached-value - my apologies to Andrew Marshall who gave an otherwise completely correct answer. <code>  def x? @x_query ||= expensive_way_to_calculate_xend def x? return @x_query.first if @x_query.is_a?(Array) @x_query = [expensive_way_to_calculate_x] @x_query.firstend","How can I memoize a method that may return true, false, or nil in Ruby?"
"Does Ruby have syntax for safe navigation operator of nil values, like in Groovy? (i.e. obj1?.obj2?.value )"," In Groovy, there is a nice syntax for working with null values. For example, I can do an if statement: This will not throw a NullPointerException even if obj1 is null (it will evaluate to false). This is something that's very convenient, so wondering if there is a Ruby equivalent I missed.  <code>  if (obj1?.obj2?.value) {}","Does Ruby have syntax for safe navigation operator of nil values, like in Groovy?"
Basic guard example," My goal is to build a simple custom guard with Guard. The gem install and bundler install for my app went fine. My Guardfile contains: Ok, next, I need to tell Guard what to do when a match happens. But I don't know where to do that. (In this case, I want to watch my application for changes and run some arbitrary code. Assume that there isn't a guard available for what I want. I want to learn how to do it myself.)In true 'blunder and see what errors pop up next' style, when I run guard I get this error message: So, that gives me a hint that I need to create a guard/eyeball.rb file. Maybe? But how was I supposed to know this from the documentation?I've read (several times) the very detailed and useful Guard README but haven't found a good simple example that shows someone how to do 'just the basics' of writing your own guard. Unexpectedly, RailsCasts didn't really answer my question either: see RailsCast #264 Guard.Did I overlook something in the Guard README? Can you help or point to a good example? Thanks! <code>  notification :growlguard 'eyeball' do watch %r{^app/(.*)} watch %r{^config/(.*)} watch %r{^lib/(.*)}end ERROR: Could not load 'guard/eyeball' or find class Guard::EyeballERROR: cannot load such file -- guard/eyeballERROR: Invalid Guardfile, original error is:undefined method `new' for nil:NilClassERROR: No guards found in Guardfile, please add at least one.Guard uses Growl to send notifications.Guard is now watching at '/Users/my-user-name/dev/my-project-name'",How to build a very basic Guard example?
Override == operator in Ruby," According to the docs, Array.include? uses the == comparison on objects. I come from Java where such things are (usually) done with .equals() which is easy to override for a particular object.How can I override == in Ruby to allow me to specify the behaviour of Array.include? for my particular object? <code> ",Overriding the == operator in Ruby
Why is the new keyword not needed for creating Rational in ruby," Possible Duplicate: Ruby syntax question: Rational(a, b) and Rational.new!(a, b) I'm in the process of reading the ruby pickaxe book, and I'm confused about the syntax of creating rational numbers. produces Why is the new method not needed for Rational (I also noticed for example I can create a string without the new method)? <code>  Rational(3,4) * Rational(1,2) => 3/8",Why is the new method not needed for creating Rational in ruby
"Is it possible to ""dynamically"" join a table only if that table is not joined yet?"," I am using Ruby on Rails 3.2.2 and I would like to know if in scope methods it is possible to ""dynamically"" join a table only if that table is not joined yet. That it, I have: I would like to make something like the following: Is it possible / advised to make that? If so, how could / should I proceed?I would like to use this approach in order to avoid multiple database table statements in INNER JOIN of SQL queries (in some cases it seems to make my SQL querying not working as expected since multiple table statements) and so to use the scope_method_name without caring related SQL query concerns (in my case, without caring to join database tables).Note: It could raise SQL errors (for example, errors as-like ""ActiveRecord::StatementInvalid: Mysql2::Error: Unknown column 'joining_table_name.user_id' in 'where clause'"") when you have not joined yet the database table (for example, this could happen when you run code like ClassName.scope_method_name(@user) without to previously join the joining_association_name and so without to join the related joining_table_name table). <code>  def self.scope_method_name(user) joins(:joining_association_name).where(""joining_table_name.user_id = ?"", user.id)end # Note: the following code is just a sample in order to understand what I mean.def self.scope_method_name(user) if table_is_joined?(joining_table_name) where(""joining_table_name.user_id = ?"", user.id) else joins(:joining_association_name).where(""joining_table_name.user_id = ?"", user.id) endend","Is it possible to ""dynamically"" join a table only if that table is not joined yet?"
"Is it possible in scope methods to ""dynamically"" join a table only if that table is not joined yet?"," I am using Ruby on Rails 3.2.2 and I would like to know if in scope methods it is possible to ""dynamically"" join a table only if that table is not joined yet. That it, I have: I would like to make something like the following: Is it possible / advised to make that? If so, how could / should I proceed?I would like to use this approach in order to avoid multiple database table statements in INNER JOIN of SQL queries (in some cases it seems to make my SQL querying not working as expected since multiple table statements) and so to use the scope_method_name without caring related SQL query concerns (in my case, without caring to join database tables).Note: It could raise SQL errors (for example, errors as-like ""ActiveRecord::StatementInvalid: Mysql2::Error: Unknown column 'joining_table_name.user_id' in 'where clause'"") when you have not joined yet the database table (for example, this could happen when you run code like ClassName.scope_method_name(@user) without to previously join the joining_association_name and so without to join the related joining_table_name table). <code>  def self.scope_method_name(user) joins(:joining_association_name).where(""joining_table_name.user_id = ?"", user.id)end # Note: the following code is just a sample in order to understand what I mean.def self.scope_method_name(user) if table_is_joined?(joining_table_name) where(""joining_table_name.user_id = ?"", user.id) else joins(:joining_association_name).where(""joining_table_name.user_id = ?"", user.id) endend","Is it possible to ""dynamically"" join a table only if that table is not joined yet?"
How Convert array of string into comma seperated string value," I have an array: And I want to convert it into a simple comma-separated string list like this: <code>  array = [""10"", ""20"", ""50"", ""99""] ""10"", ""20"", ""50"", ""99""",How do I convert an array of strings into a comma-separated string?
How to convert an array of strings into a comma seperated string?," I have an array: And I want to convert it into a simple comma-separated string list like this: <code>  array = [""10"", ""20"", ""50"", ""99""] ""10"", ""20"", ""50"", ""99""",How do I convert an array of strings into a comma-separated string?
How to convert an array of strings into a comma separated string?," I have an array: And I want to convert it into a simple comma-separated string list like this: <code>  array = [""10"", ""20"", ""50"", ""99""] ""10"", ""20"", ""50"", ""99""",How do I convert an array of strings into a comma-separated string?
Does ruby have something like python's list comprehensions(example)?," Python has a nice feature: In Ruby it's even simpler: but if it's about nested loops Python looks more convenient.In Python we can do this: The equivalent in Ruby is: Does Ruby have something similar?  <code>  print([j**2 for j in [2, 3, 4, 5]]) # => [4, 9, 16, 25] puts [2, 3, 4, 5].map{|j| j**2} digits = [1, 2, 3]chars = ['a', 'b', 'c'] print([str(d)+ch for d in digits for ch in chars if d >= 2 if ch == 'a']) # => ['2a', '3a'] digits = [1, 2, 3]chars = ['a', 'b', 'c']list = []digits.each do |d| chars.each do |ch| list.push d.to_s << ch if d >= 2 && ch == 'a' endendputs list",Does Ruby have something like Python's list comprehensions?
Unable to get my asset path and Font-awesome to work," I don't know what's wrong. It seems like I'm doing this right. I'm trying to use Font Awesome in my application but the font doesn't appear. I have a folder called fonts and in my application.rb included the line: and than instead of having the 2 css files that come with Font-Awesome (CHANGED SEE BELOW) ( didn't need the IE7 one) I just put the main css inside of my application.css. Than I change the urls to detect the font files. I turned off the server and restarted after each change to the code but still no good. What am I missing?UPDATE:I'm not using SASS or LESS. Maybe the @font-face is the issue? I never seen this type of code use before.UPDATEI'm now using the font-awesome.css file. But its not showing up in my source code. FULL ANSWERThis is how you can get it Font-Awesome working with inserting it normally.QUOTE from: https://gist.github.com/2251151 <code>  class Application < Rails::Application # Enable the asset pipeline config.assets.enabled = true # This line config.assets.paths << Rails.root.join(""app"", ""assets"", ""fonts"") @font-face { font-family: ""FontAwesome""; src: url('<%= asset_path('fontawesome-webfont.eot') %>'); src: url('<%= asset_path('fontawesome-webfont.woff') %>') format('woff'), url('<%= asset_path('fontawesome-webfont.ttf') %>') format('truetype'), url('<%= asset_path('fontawesome-webfont.svg#FontAwesome') %>') format('svg'); font-weight: normal; font-style: normal;} <head> <link href=""/favicon.ico"" rel=""shortcut icon"" type=""image/vnd.microsoft.icon""> <link href=""/assets/application.css?body=1"" media=""screen"" rel=""stylesheet"" type=""text/css""> <link href=""/assets/chosen.css?body=1"" media=""screen"" rel=""stylesheet"" type=""text/css""> <script src=""/assets/jquery.js?body=1"" type=""text/javascript""></script><style type=""text/css""></style> <script src=""/assets/jquery_ujs.js?body=1"" type=""text/javascript""></script> <script src=""/assets/application.js?body=1"" type=""text/javascript""></script> <script src=""/assets/chosen.jquery.min.js?body=1"" type=""text/javascript""></script></head> 1. Download font-awesome from https://github.com/FortAwesome/Font-Awesome2. Put the font folder font folder in the app/assets. I renamed the folder from font to fonts to make it clearer3. Add config.assets.paths << ""#{Rails.root}/app/assets/fonts"" to config/application.rb. This is to include the apps/assets/fonts folder in the asset pipeline4. Put the font-awesome.css file in the app/assets/stylesheets folder5. The first part of the css should be:@font-face { font-family: 'FontAwesome'; src: url('fontawesome-webfont.eot'); src: url('fontawesome-webfont.eot?#iefix') format('embedded-opentype'), url('fontawesome-webfont.woff') format('woff'), url('fontawesome-webfont.ttf') format('truetype'), url('fontawesome-webfont.svgz#FontAwesomeRegular') format('svg'), url('fontawesome-webfont.svg#FontAwesomeRegular') format('svg'); font-weight: normal; font-style: normal;}#---------------------------------------------------------------------------------------------You should then be able to use:<div style=""font-size: 24px;""> <i class=""icon-camera-retro""></i> icon-camera-retro</div>",Getting Fonts to work in Rails 3.1?
Unable to get asset path and Font-Awesome fonts to show up?," I don't know what's wrong. It seems like I'm doing this right. I'm trying to use Font Awesome in my application but the font doesn't appear. I have a folder called fonts and in my application.rb included the line: and than instead of having the 2 css files that come with Font-Awesome (CHANGED SEE BELOW) ( didn't need the IE7 one) I just put the main css inside of my application.css. Than I change the urls to detect the font files. I turned off the server and restarted after each change to the code but still no good. What am I missing?UPDATE:I'm not using SASS or LESS. Maybe the @font-face is the issue? I never seen this type of code use before.UPDATEI'm now using the font-awesome.css file. But its not showing up in my source code. FULL ANSWERThis is how you can get it Font-Awesome working with inserting it normally.QUOTE from: https://gist.github.com/2251151 <code>  class Application < Rails::Application # Enable the asset pipeline config.assets.enabled = true # This line config.assets.paths << Rails.root.join(""app"", ""assets"", ""fonts"") @font-face { font-family: ""FontAwesome""; src: url('<%= asset_path('fontawesome-webfont.eot') %>'); src: url('<%= asset_path('fontawesome-webfont.woff') %>') format('woff'), url('<%= asset_path('fontawesome-webfont.ttf') %>') format('truetype'), url('<%= asset_path('fontawesome-webfont.svg#FontAwesome') %>') format('svg'); font-weight: normal; font-style: normal;} <head> <link href=""/favicon.ico"" rel=""shortcut icon"" type=""image/vnd.microsoft.icon""> <link href=""/assets/application.css?body=1"" media=""screen"" rel=""stylesheet"" type=""text/css""> <link href=""/assets/chosen.css?body=1"" media=""screen"" rel=""stylesheet"" type=""text/css""> <script src=""/assets/jquery.js?body=1"" type=""text/javascript""></script><style type=""text/css""></style> <script src=""/assets/jquery_ujs.js?body=1"" type=""text/javascript""></script> <script src=""/assets/application.js?body=1"" type=""text/javascript""></script> <script src=""/assets/chosen.jquery.min.js?body=1"" type=""text/javascript""></script></head> 1. Download font-awesome from https://github.com/FortAwesome/Font-Awesome2. Put the font folder font folder in the app/assets. I renamed the folder from font to fonts to make it clearer3. Add config.assets.paths << ""#{Rails.root}/app/assets/fonts"" to config/application.rb. This is to include the apps/assets/fonts folder in the asset pipeline4. Put the font-awesome.css file in the app/assets/stylesheets folder5. The first part of the css should be:@font-face { font-family: 'FontAwesome'; src: url('fontawesome-webfont.eot'); src: url('fontawesome-webfont.eot?#iefix') format('embedded-opentype'), url('fontawesome-webfont.woff') format('woff'), url('fontawesome-webfont.ttf') format('truetype'), url('fontawesome-webfont.svgz#FontAwesomeRegular') format('svg'), url('fontawesome-webfont.svg#FontAwesomeRegular') format('svg'); font-weight: normal; font-style: normal;}#---------------------------------------------------------------------------------------------You should then be able to use:<div style=""font-size: 24px;""> <i class=""icon-camera-retro""></i> icon-camera-retro</div>",Getting Fonts to work in Rails 3.1?
cucumber/capybara vs selenium," The other day I was showing one of the testers at my company some tests I had written in cucumber (2 features, 5 scenarios).Then he asked me question that I could not answer: How is this better than selenium or any other functionality test recording tool?I understand that cucumber is a different technology and it's placed at a different level of testing, but I can't understand why I should bother to write and maintain Cucumber/Capybara tests.Can someone give me a reasonable explanation for using Cucumber/Capybara instead of just Selenium? <code> ",Cucumber/Capybara vs Selenium?
Error - ERROR: Error installing capybara-webkit:, Any suggestions on how to fix? <code>  gem install capybara-webkit -v '0.11.0'Building native extensions. This could take a while...ERROR: Error installing capybara-webkit: ERROR: Failed to build gem native extension. /home/durrantm/.rvm/rubies/ruby-1.9.3-p194/bin/ruby extconf.rbsh: qmake: not foundGem files will remain installed in /home/durrantm/.rvm/gems/ruby-1.9.3-p194/gems/capybara-webkit-0.11.0 for inspection.Results logged to /home/durrantm/.rvm/gems/ruby-1.9.3-p194/gems/capybara-webkit-0.11.0/./gem_make.out,ERROR: Error installing capybara-webkit:
"An error occurred while installing debugger-linecache (1.1.1), and Bundler cannot continue.", Any idea how to fix this? <code>  Gem::Installer::ExtensionBuildError: ERROR: Failed to build gem native extension./home/durrantm/.rvm/rubies/ruby-1.9.3-p194/bin/ruby extconf.rb checking for vm_core.h... nochecking for vm_core.h... noMakefile creation failed**************************************************************************No source for ruby-1.9.3-p194 provided with debugger-ruby_core_source gem.**************************************************************************,"An error occurred while installing debugger-linecache (1.1.1), and Bundler cannot continue"
what is the difference between resource and resources in rails routing?, what is the difference between resource and resources in rails routing and What is real difference between them ? <code>  resource :geocoder resources :posts,Difference between resource and resources in rails routing?
"String#encode not fixing ""invalid byte sequence in UTF-8"" error in Ruby 1.9.3"," I know there are multiple similar questions about this error, and I've tried many of them without luck. The problem I'm having involves the byte \xA1 and is throwing ArgumentError: invalid byte sequence in UTF-8I've tried the following with no success: Each line throws the error for me. What am I doing wrong?UPDATE:The above lines fail only in IRB. However, I modified my application to encode lines of a CVS file using the same String#encode method and arguments, and I get the same error when reading the line from a file (note: it works if you perform the operations on the same string w/o using IO). <code>  ""\xA1"".encode('UTF-8', :undef => :replace, :invalid => :replace, :replace => """").sub('', '')""\xA1"".encode('UTF-8', :undef => :replace, :invalid => :replace, :replace => """").force_encoding('UTF-8').sub('', '')""\xA1"".encode('UTF-8', :undef => :replace, :invalid => :replace, :replace => """").encode('UTF-8').sub('', '') bad_line = ""col1\tcol2\tbad\xa1""bad_line.sub('', '') # does NOT failputs bad_line # => col1 col2 bad?tmp = Tempfile.new 'foo' # write the line to a file to emulate real problemtmp.puts bad_linetmp.closetmp2 = Tempfile.new 'bar'begin IO.foreach tmp.path do |line| line.encode!('UTF-8', :undef => :replace, :invalid => :replace, :replace => """") line.sub('', '') # fail: invalid byte sequence in UTF-8 tmp2.puts line end tmp2.close # this would fail if the above error didn't halt execution CSV.foreach(tmp2.path) do |row| puts row.inspect # fail: invalid byte sequence in UTF-8 endensure tmp.unlink tmp2.close tmp2.unlinkend","String#encode not fixing ""invalid byte sequence in UTF-8"" error"
How can I find object with specific property in ruby," I have an array of objects *and the object looks something *like this {seat_id, room_id, date_created};I want to find if in that array there is an object which has seat_id equal to a specific value. How can I do that? <code> ",How can I check if an object with specific property exists in a Ruby array
Metaprogramming in Ruby," How does following code works and, more importantly, why does it work that way? Here, on first call to method one, Ruby executes the outer one method, but on successive calls, it executes only the inner one method, bypassing the outer one method totally. I want to know how does it happen and why does it happen so. <code>  class Example def one def one @value = 99 end puts ""Expensive Call"" @value = 99 # assume its expensive call endendex = Example.newputs ex.one # => ""Expensive Call""; 99puts ex.one # => 99",How and why does this dynamic method definition work?
How can I send an HTTP PUT request in ruby?," I am trying to send a PUT request to a particular URL, and have thus far been unsuccessful in doing so.If I were doing it through an HTTP requester GUI, such as this one, it would be as simple as doing a PUT on the following url:http://www.mywebsite.com:port/Application?key=apikey&id=id&option=enable|disableNote that a port number is specified in the above request. I will also need to do that when submitting the request through the ruby code.How can I replicate such a request in Ruby? <code> ",How can I send an HTTP PUT request in Ruby?
How can I install Ruby 1.9.3 in Mac OS X Mountain Lion with no Xcode?," I would like to know about alternative ways to build a development machine for Ruby 1.9.3 on OS X 10.8 Mountain Lion, that does not require Xcode.Mountain Lion is now Golden Master as I'm writing this question, so it could be considered as final version. That cannot be said about Xcode, that is a preview release yet.RVM recommends to install osx-gcc-installer over Xcode, but I would like not to mess my system.What is the cleanest way to install Ruby 1.9.3 on Mountain Lion without Xcode? <code> ",How can I install Ruby 1.9.3 in Mac OS X Mountain Lion without Xcode?
How to rescue all exceptions under a certain namespace?," Is there a way to rescue all exceptions under a certain namespace?For example, I want to rescue all of the Errno::* exceptions (Errno::ECONNRESET, Errno::ETIMEDOUT). I can go ahead and list them all out on my exception line, but I was wondering if I can do something like. The above idea doesn't seem to work, thus is there something similar that can work? <code>  begin # my coderescue Errno # handle exceptionend",How to rescue all exceptions under Errno::*?
ruby convert string to integer or float," Is there any neat method to convert ""1,112"" to integer 1112, instead of 1?I've got one, but not neat:  <code>  ""1,112"".split(',').join.to_i #=> 1112",Convert string with comma to integer
Ruby: Convert string to integer or float," Is there any neat method to convert ""1,112"" to integer 1112, instead of 1?I've got one, but not neat:  <code>  ""1,112"".split(',').join.to_i #=> 1112",Convert string with comma to integer
Chef and ruby templates - hw to loop though key value pairs," 1) I have a data bag as follows: 2) In my recipe I get the hash as follows. 3) Also in my recipe I have a template as follows: 4) I need to have my template look like this My question is this. How do I pass the hash to the template so I can loop through the hash and create the temlplate? I am not a strong ruby coder.for example: <code>  ""zookeeper"":{ ""server1"":""111.111.111.111"", ""server2"":""222.222.222.222"" }, data_bag(""mydb"")db = data_bag_item(""mydb"", ""rtb"")ZOOKEEPER = db['zookeeper'] template ""/etc/zookeeper/conf/zoo.cfg"" do path ""/etc/zookeeper/conf/"" source ""zoo.cfg.erb"" owner ""root"" group ""root"" mode ""0644"" variables :zookeeper => #{ZOOKEEPER}end server.1=111.111.111.111:2888:3888server.2=222.222.222.222:2888:3888 count = 1for server, ipaddress in zookeeper: server.count=ipaddress:2888:3888 count = count + 1",Chef and ruby templates - how to loop though key value pairs?
how to undefine class in ruby?," Undefining a method in Ruby is pretty simple, I can just use undef METHOD_NAME.Is there anything similar for a class? I am on MRI 1.9.2. I have to undefine an ActiveRecord Model, run two lines of code, and restore the model back to its original form.The problem is, I have an model Contact and I am using a company's API and it happens that they have some class called Contact, and changing my model name would be lot of work for me. What can I do in this situation? <code> ",How to undefine class in Ruby?
Key press in selenium webdriver, Is there a way to press the Ctrl + A keys using Selenium WebDriver?I checked the Selenium libraries and found that Selenium allows key press of special and function keys only. <code> ,Pressing Ctrl + A in Selenium WebDriver
Key press in (Ctrl+A) Selenium WebDriver, Is there a way to press the Ctrl + A keys using Selenium WebDriver?I checked the Selenium libraries and found that Selenium allows key press of special and function keys only. <code> ,Pressing Ctrl + A in Selenium WebDriver
Pressing Ctrl+A in Selenium WebDriver, Is there a way to press the Ctrl + A keys using Selenium WebDriver?I checked the Selenium libraries and found that Selenium allows key press of special and function keys only. <code> ,Pressing Ctrl + A in Selenium WebDriver
Ruby Arel: where a field is not true," I want to find all records where a field is not true. The working AR syntax for this is: Is there a less verbose way of querying for 'not true'? It really sucks having to cater for this mysql nuance everywhere. <code>  Dog.where(:stray => [false, nil])",ActiveRecord query: where a field is not true
How to use ice_cube Ruby gem in IRB?," I'm trying to use a Ruby gem called ice_cube in IRB, but it doesn't work: What am I doing wrong? (I'm a beginner Ruby programmer.) <code>  [~]$ rvm gemset create ice'ice' gemset created (/home/joe/.rvm/gems/ruby-1.9.2-p320@ice).[~]$ rvm gemset use iceUsing ruby-1.9.2-p320 with gemset ice[~]$ gem install ice_cubeFetching: ice_cube-0.8.0.gem (100%)Successfully installed ice_cube-0.8.01 gem installedInstalling ri documentation for ice_cube-0.8.0...Installing RDoc documentation for ice_cube-0.8.0...[~]$ irb --simple-prompt>> require 'ice_cube'=> true>> schedule = Schedule.new(Time.now)NameError: uninitialized constant Object::Schedule from (irb):2 from /home/joe/.rvm/rubies/ruby-1.9.2-p320/bin/irb:16:in `<main>'",Using ice_cube Ruby gem in IRB
Rails mulitple belongs_to assignment," Given User: Discussions: Posts: I am currently initializing Posts in the controller via My question is, how do I set/save/edit the @post model such that the relationship between the post and the discussion is also set? <code>  class User < ActiveRecord::Base has_many :discussions has_many :postsend class Discussion < ActiveRecord::Base belongs_to :user has_many :postsend class Post < ActiveRecord::Base belongs_to :user belongs_to :discussion end @post = current_user.posts.build(params[:post])",Rails multiple belongs_to assignment
Equivalent of setup.py develop in ruby/gem," I am new to ruby and need to debug some ruby app packaged as a gem. I am using rvm, where I installed the package as a gem, and also have a fresh github checkout of that package. How can I tell my rvm environment to use the code in the github repo instead of the installed gem?This is the equivalent of python setup.py develop for people familiar with python. Setuptools allows you to deploy your projects for use in a common directory or staging area, but without copying any files. Thus, you can edit each projects code in its checkout directoryhttps://pythonhosted.org/setuptools/setuptools.html#development-mode <code> ",What is the Ruby equivalent of python setup.py develop?
why does ruby array each method return array with same elements," I'm learning the details of how each works in ruby, and I tried out the following line of code: And the result is an array of But I don't think I fully understand why. Why is the return value of each the same array? Doesn't each just provide a method for iterating? Or is it just common practice for the each method to return the original value? <code>  p [1,2,3,4,5].each { |element| el } [1,2,3,4,5]",Why does Array#each return an array with the same elements?
Ruby on Rails: Advance search," I'm having trouble understanding the best way to make a advanced search form. I have had a good search on the internet, looking at some ways, but I can't get them to work, as most of the suggestions are outdated. I have asked a question already, but I think I was too specific and I wasn't able to fix my problem. I am wanting to search on different text boxes and drop down boxes with one search button.EDIT2:projects_controller: Search View: Project.rb Routes: As you can see, I'm still a fair bit away from having a finished application. I am trying to make a search form that will be able to search on the following fields: Project name, Client, ID, Industry, Role, Technology, Project Owner, Status, Start Date, End Date, and Keywords. The search form would have either text boxes or drop down menus depending on which field the user was searching for. I am wanting to chain each field and search on them all in one go. Before, I was only using project_name, and client as examples to make it easier for you to understand my code. Hopefully you can see now what I am trying to do. <code>  def index @projects = Project.allrespond_to do |format| format.html # index.html.erb format.json { render :json => @projects } end enddef search@project_search = Project.search(params[:search]).order(sort_column + ' ' + sort_direction).paginate(:per_page => 2, :page => params[:page])end # GET /projects/1 # GET /projects/1.json def show @project = Project.find(params[:id]) respond_to do |format| format.html # show.html.erb format.json { render json: @project } end end # GET /projects/new # GET /projects/new.json def new @project = Project.new respond_to do |format| format.html # new.html.erb format.json { render json: @project } end end # GET /projects/1/edit def edit @project = Project.find(params[:id]) end # POST /projects # POST /projects.json def create @project = Project.new(params[:project]) @project.client = params[:new_client] unless params[:new_client].blank? @project.exception_pm = params[:new_exception_pm] unless params[:new_exception_pm].blank? @project.project_owner = params[:new_project_owner] unless params[:new_project_owner].blank? @project.role = params[:new_role] unless params[:new_role].blank? @project.industry = params[:new_industry] unless params[:new_industry].blank? @project.business_div = params[:new_business_div] unless params[:new_business_div].blank? respond_to do |format| if @project.save format.html { redirect_to @project, notice: 'Project was successfully created.' } format.json { render json: @project, status: :created, location: @project } else format.html { render action: ""new"" } format.json { render json: @project.errors, status: :unprocessable_entity } end end end # PUT /projects/1 # PUT /projects/1.json def update @project = Project.find(params[:id]) respond_to do |format| if @project.update_attributes(params[:project]) format.html { redirect_to @project, notice: 'Project was successfully updated.' } format.json { head :no_content } else format.html { render action: ""edit"" } format.json { render json: @project.errors, status: :unprocessable_entity } end end end # DELETE /projects/1 # DELETE /projects/1.json def destroy @project = Project.find(params[:id]) @project.destroy respond_to do |format| format.html { redirect_to projects_url } format.json { head :no_content } end endprivate helper_method :sort_column, :sort_direction def sort_column Project.column_names.include?(params[:sort]) ? params[:sort] : ""project_name"" end def sort_direction %w[asc desc].include?(params[:direction]) ? params[:direction] : ""asc"" endend <h1>Search</h1><%= form_tag search_path, method: :get do %><%= hidden_field_tag :direction, params[:direction] %> <%= hidden_field_tag :sort, params[:sort] %> <%= text_field_tag :project_name, params[:project_name] %> <%= text_field_tag :client, params[:client] %> <%= submit_tag ""Search"", name: nil %><% end %><table class = ""pretty""><table border=""1""> <tr> <th><%= sortable ""project_name"", ""Project name"" %> </th> <th><%= sortable ""client"", ""Client"" %></th> <th>Exception pm</th> <th>Project owner</th> <th>Tech</th> <th>Role</th> <th>Industry</th> <th>Financials</th> <th>Business div</th> <th>Status</th> <th>Start date</th> <th>End date</th><% if false %> <th>Entry date</th> <th>Edited date</th> <th>Summary</th> <th>Lessons learned</tStackh> <th>Customer benifits</th> <th>Keywords</th> <!th></th> <!th></th> <!th></th><% end %> </tr><% @project_search.each do |t| %> <tr> <td><%= t.project_name %></td> <td><%= t.client %></td> <td><%= t.exception_pm %></td> <td><%= t.project_owner %></td> <td><%= t.tech %></td> <td><%= t.role %></td> <td><%= t.industry %></td> <td><%= t.financials %></td> <td><%= t.business_div %></td> <td><%= t.status %></td> <td><%= t.start_date %></td> <td><%= t.end_date %></td><% if false %> <td><%= t.entry_date %></td> <td><%= t.edited_date %></td> <td><%= t.summary %></td> <td><%= t.lessons_learned %></td> <td><%= t.customer_benifits %></td> <td><%= t.keywords %></td><% end %> <!td><%#= link_to 'Show', project %></td> <!td><%#= link_to 'Edit', edit_project_path(project) %></td> <!td><%#= link_to 'Destroy', project, method: :delete, data: { confirm: 'Are you sure?' } %></td> </tr><% end %></table><br /><%= will_paginate (@project_search) %><%= button_to ""Search Again?"", search_path, :method => ""get"" %><%# end %><%= button_to ""Home"", projects_path, :method => ""get"" %> class Project < ActiveRecord::Base attr_accessible :business_div, :client, :customer_benifits, :edited_date, :end_date, :entry_date, :exception_pm, :financials, :industry, :keywords, :lessons_learned, :project_name, :project_owner, :role, :start_date, :status, :summary, :techvalidates_presence_of :business_div, :client, :customer_benifits, :end_date, :exception_pm, :financials, :industry, :keywords, :lessons_learned, :project_name, :project_owner, :role, :start_date, :status, :summary, :techdef self.search search_term return scoped unless search_term.present? where find(:all, :conditions => ['project_name OR client LIKE ?', ""%#{search_term}%""])endend FinalApp::Application.routes.draw doresources :projectsmatch ""search"" => ""projects#search"", :as => :searchroot :to => 'projects#index'end",Ruby on Rails: Advanced search
Parse Date String in Ruby," I have a String 20120119 which represents a date in the format 'YYYYMMDD'.I want to parse this string into a Ruby object that represents a Date so that I can do some basic date calculation, such as diff against today's date.I am using version 1.8.6 (requirement). <code> ",Parse Date string in Ruby
Ruby Methods at bottom of script?, I'm using ruby 1.8.7. I could have sworn that I've written my functions at the bottom of my script before and it worked fine.Do I have to put them at the top? It seems to be the only way they work now. Not a big deal. I just prefer to have them at the bottom so I figured I'd ask. <code> ,Ruby methods at bottom of script?
suppressing irb output," Possible Duplicate: Rails console, how to stop output of return value? Consider this session in IRB: How do I suppress the output => 1..5? This is important if I do this in a Rails console session: I don't want all the Posts to be printed as an array at the end. How do I suppress that output?I am sure there are other ways of doing this, like find_each or a Ruby script but I am more interested in doing this in an interactive session. <code>  >> for a in 1..5 do?> puts a>> end12345=> 1..5>> for post in Post.find(:all) do if post.submit_time > Time.now puts ""Corrupted post #{post.id} is from the future"" endend",suppressing IRB output?
Ruby regexp - not a backslash," How can i say ""all symbols except backslash"" in Ruby character class? Variant with two backslashed doesn't work <code>  /'[^\]*'/.match(""'some string \ hello'"") => should be nil /'[^\\]*'/.match(""'some string \ hello'"") => 'some string \ hello' BUT should be nil",Regex to match any character except a backslash
"I made a little math benchmark in C, Clojure, Python, Ruby, Scala and some others. And I want to ask an advice"," DisclaimerI know that artificial benchmarks are evil. They can show results only for very specific narrow situation. I don't assume that one language is better than the other because of the some stupid bench. However I wonder why results is so different. Please see my questions at the bottom.Math benchmark descriptionBenchmark is simple math calculations to find pairs of prime numbers which differs by 6 (so called sexy primes)E.g. sexy primes below 100 would be: (5 11) (7 13) (11 17) (13 19) (17 23) (23 29) (31 37) (37 43) (41 47) (47 53) (53 59) (61 67) (67 73) (73 79) (83 89) (97 103)Results tableIn table: calculation time in secondsRunning: all except Factor was running in VirtualBox (Debian unstable amd64 guest, Windows 7 x64 host)CPU: AMD A4-3305M [*1] - I'm afraid to imagine how much time will it takeCode listingsC: Ruby: Scala: Scala opimized isPrime (the same idea like in Clojure optimization): Clojure: Clojure optimized is-prime?: Python Factor Bash(zsh): QuestionsWhy Scala is so fast? Is it because of static typing? Or it is just using JVM very efficiently?Why such a huge difference between Ruby and Python? I thought these two are not somewhat totally different. Maybe my code is wrong. Please enlighten me! Thanks. UPD Yes, that was error in my code. Python and Ruby 1.9 are pretty equal.Really impressive jump in productivity between Ruby versions.Can I optimize Clojure code by adding type declarations? Will it help? <code>  Sexy primes up to: 10k 20k 30k 100k Bash 58.00 200.00 [*1] [*1] C 0.20 0.65 1.42 15.00 Clojure1.4 4.12 8.32 16.00 137.93 Clojure1.4 (optimized) 0.95 1.82 2.30 16.00 Factor n/a n/a 15.00 180.00 Python2.7 1.49 5.20 11.00 119 Ruby1.8 5.10 18.32 40.48 377.00 Ruby1.9.3 1.36 5.73 10.48 106.00 Scala2.9.2 0.93 1.41 2.73 20.84 Scala2.9.2 (optimized) 0.32 0.79 1.46 12.01 int isprime(int x) { int i; for (i = 2; i < x; ++i) if (x%i == 0) return 0; return 1;}void findprimes(int m) { int i; for ( i = 11; i < m; ++i) if (isprime(i) && isprime(i-6)) printf(""%d %d\n"", i-6, i);}main() { findprimes(10*1000);} def is_prime?(n) (2...n).all?{|m| n%m != 0 }enddef sexy_primes(x) (9..x).map do |i| [i-6, i] end.select do |j| j.all?{|j| is_prime? j} endenda = Time.nowp sexy_primes(10*1000)b = Time.nowputs ""#{(b-a)*1000} mils"" def isPrime(n: Int) = (2 until n) forall { n % _ != 0 }def sexyPrimes(n: Int) = (11 to n) map { i => List(i-6, i) } filter { _ forall(isPrime(_)) }val a = System.currentTimeMillis()println(sexyPrimes(100*1000))val b = System.currentTimeMillis()println((b-a).toString + "" mils"") import scala.annotation.tailrec@tailrec // Not required, but will warn if optimization doesn't workdef isPrime(n: Int, i: Int = 2): Boolean = if (i == n) true else if (n % i != 0) isPrime(n, i + 1) else false (defn is-prime? [n] (every? #(> (mod n %) 0) (range 2 n)))(defn sexy-primes [m] (for [x (range 11 (inc m)) :let [z (list (- x 6) x)] :when (every? #(is-prime? %) z)] z))(let [a (System/currentTimeMillis)] (println (sexy-primes (* 10 1000))) (let [b (System/currentTimeMillis)] (println (- b a) ""mils""))) (defn ^:static is-prime? [^long n] (loop [i (long 2)] (if (= (rem n i) 0) false (if (>= (inc i) n) true (recur (inc i)))))) import time as time_def is_prime(n): return all((n%j > 0) for j in xrange(2, n))def primes_below(x): return [[j-6, j] for j in xrange(9, x+1) if is_prime(j) and is_prime(j-6)]a = int(round(time_.time() * 1000))print(primes_below(10*1000))b = int(round(time_.time() * 1000))print(str((b-a)) + "" mils"") MEMO:: prime? ( n -- ? )n 1 - 2 [a,b] [ n swap mod 0 > ] all? ;MEMO: sexyprimes ( n n -- r r )[a,b] [ prime? ] filter [ 6 + ] map [ prime? ] filter dup [ 6 - ] map ;5 10 1000 * sexyprimes . . #!/usr/bin/zshfunction prime { for (( i = 2; i < $1; i++ )); do if [[ $[$1%i] == 0 ]]; then echo 1 exit fi done echo 0}function sexy-primes { for (( i = 9; i <= $1; i++ )); do j=$[i-6] if [[ $(prime $i) == 0 && $(prime $j) == 0 ]]; then echo $j $i fi done}sexy-primes 10000","Interpreting a benchmark in C, Clojure, Python, Ruby, Scala and others"
Ruby all possible combinations of an array of arrays (one liner?)," Questions similar to this have been asked before on SO, but they're not quite what I need and I can't seem to arrive at my solution through altering/modifying those approaches.In any case, I have an array of arrays, as follows: (If it makes it easier to arrive at a solution, b can also be a one dimensional array, as follows: [""1"",""2"",""3"",""4"",""5"",""6""]. Either type of input works for my needs.)and I would like to generate the following: where each array in the output array is a unique permutation of the six numbers. I would also take it as a single array (e.g., [""123456"", ""213456"",...]). The order of the output isn't particularly important as long as each entry is unique and no number repeats in a string (e.g., ""112345"" isn't allowed). All 6 numbers must also be used in each entry, so I'm not interested in incremental output like ""123"", either.As much as this sounds like it, this isn't a homework problem. I could brute for this thing and get the output I need. I just feel like there has to be a better, more elegant, solution. <code>  b= [[""1""],[""2""],[""3""],[""4""],[""5""],[""6""]] [[""123456""],[""213456""],[""312456""],...] ",Ruby all possible permutations of an array of arrays (one liner?)
Match string that not containing a specific word (on Ruby)," I'm working with ruby with the match method and I want to match an URL that doesn't contain a certain string with a regular Expression:ex: I want to match the URLs that doesn't contain the word dog, so the 1st and the 2nd ones should be matched <code>  http://website1.com/url_with_some_words.htmlhttp://website2.com/url_with_some_other_words.htmlhttp://website3.com/url_with_the_word_dog.html",Match string that doesn't contain a specific word
"Ruby on Rails, should I use class method or instance method, and why"," In my Rails app, when creating a business I have a form that has the following field: Essentially when I create a business, if they check this box, I need it to run something like the following code: While learning, I would usually do that stuff in my controller but i'm trying to follow best practices and use a fat model, skinny controller, so I'm wanting to use logic like this: Here is where I am getting confused on whether to use a class method or an instance method, to call set_default_company. They both seem like they would work and I can't see a benefit to one or the other.In addition to giving me any information as to which method to use, if someone could show me a brief implementation of writing that as a class method vs. instance method it may give me a better understanding as to why.Here is how I would write them: Writing them that way I don't see a benefit to either. <code>  <%= check_box_tag(:default_company) %> <%= label_tag(:default_company, ""Set Company as Default"") %> def set_default_company(company, user) exists = DefaultCompany.find(user.id) if exists exists.update_attributes(company: company) else DefaultCompany.create(company: company, user: user) endend def create @company = Company.new(params[:company]) if @company.save if params[:default_company] Company.set_default_company(@company.id, current_user.id,) end flash[:notice] = ""Company was successfully created."" redirect_to @company else redirect_to new_company_path endend def self.set_default_company(company, user) # Logic hereenddef set_default_company(company, user) # Logic hereend","Should I use class method or instance method, and why?"
ruby debugger step into a block directly," In the following Ruby code: It's very common during debugging, I don't care about the implementation of the function that yields to the block, I just want to step into the block directly, without manually setting a break-point there.Does any support for this kind of ""step into block"" exist in ruby-debug19 or debugger? <code>  #! /usr/bin/env rubyrequire 'debugger'def hello puts ""hello"" if block_given? yield end end def main debugger puts ""test begin..."" hello do # <= if you are here puts ""here!"" #<= how to get here without setting bp here or step into hello? end end main",ruby debugger step into a block directly?
Ruby - Generating first n prime numbers," I am learning Ruby and doing some math stuff. One of the things I want to do is generate prime numbers.I want to generate the first ten prime numbers and the first ten only. I have no problem testing a number to see if it is a prime number or not, but was wondering what the best way is to do generate these numbers?I am using the following method to determine if the number is prime: <code>  class Integer < Numeric def is_prime? return false if self <= 1 2.upto(Math.sqrt(self).to_i) do |x| return false if self%x == 0 end true endend",How do I generate the first n prime numbers?
Generating first n prime numbers," I am learning Ruby and doing some math stuff. One of the things I want to do is generate prime numbers.I want to generate the first ten prime numbers and the first ten only. I have no problem testing a number to see if it is a prime number or not, but was wondering what the best way is to do generate these numbers?I am using the following method to determine if the number is prime: <code>  class Integer < Numeric def is_prime? return false if self <= 1 2.upto(Math.sqrt(self).to_i) do |x| return false if self%x == 0 end true endend",How do I generate the first n prime numbers?
Can FactoryGirl generate factories after your models have been created?," When including the factory_bot_rails gem in your dev and test blocks in Gemfile, rails will generate factories automatically when your models are generated.Is there a way to generate factories after your models have been generated?Note: FactoryBot was previously named FactoryGirl <code> ",Can FactoryBot generate factories after your models have been created?
POSTing in OAuth with client credentials," I've implemented a REST API and protected it with doorkeeper.I've written a small client program to access it and it works fine using the resource owner credential flow.Now I'm trying to implement a call using the client credentials flow. So I've followed the example in the link.Everything works great when I'm using a GET request, but when I'm using a POST request, I'm getting a 401 Unauthorized. This is a call to a method that doesn't require a resource owner.The only relevant thing I have in my API controller is: I haven't implemented any scopes or nothing of that kind (am I required to?).My client code looks like this (exactly as in the example in github): Any idea what I may be doing wrong? Is there something special I should do in my application in order to enable the client credentials flow? <code>  doorkeeper_for :all require 'rest-client'require 'json'client_id = 'my_client_id...'client_secret = 'my_client_secret...'response = RestClient.post 'http://localhost:3000/oauth/token', { grant_type: 'client_credentials', client_id: client_id, client_secret: client_secret}token = JSON.parse(response)[""access_token""]# this line works great:RestClient.get 'http://localhost:3000/api/v1/flights.json', { 'Authorization' => ""Bearer #{token}"" }# this line always fails (401 Unauthorized):RestClient.post 'http://localhost:3000/api/v1/flights.json', { 'Authorization' => ""Bearer #{token}"" }",POSTing in OAuth with client credentials with Doorkeeper
ruby recursive copy excluding folders matching filter," I am trying to create a Rake method to copy all files from one location to another but exclude all folders that are SVN folders including their files.This is the method in a module called Filesystem I started with, but can't figure out if it will work or what the missing code is. The module has the following require: Method: So for example the source would be: then the target would contain the following after the copy: <code>  require ""fileutils"" def FileSystem.CopyFilesWithoutSVN(source, target) # will copy files from source folder to target folder excluding .svn folders FileUtils.cp_r Dir.glob( source ).reject{|entry| entry =~ missingCode }, targetend folderA folderB file1.cs file2.cs file3.cs file4.cs .svn fileA.base fileB.base.svn fileC.base fileD.basefolderC file5.cs folderA folderB file1.cs file2.cs file3.cs file4.csfolderC file5.cs ",Recursive copy excluding folders matching filter
"Does python has similar variable interpolation like ""string #{var}"" in Ruby?"," In Python, it is tedious to write: Can I do something like this in Python?print ""foo is #{bar}."" <code>  print ""foo is"" + bar + '.'","Does Python do variable interpolation similar to ""string #{var}"" in Ruby?"
"Does Python has a similar variable interpolation like ""string #{var}"" in Ruby?"," In Python, it is tedious to write: Can I do something like this in Python?print ""foo is #{bar}."" <code>  print ""foo is"" + bar + '.'","Does Python do variable interpolation similar to ""string #{var}"" in Ruby?"
diif [] and Array.new and {} and Hash.new," I was curious to know more differences between [] and Array.new and {} and Hash.newI ran same benchmarks on it and seems like the shorthands are winners I personally like to use the shorthand one's [] and {} , the code looks so cool and readable.Any other pointer what is the difference between them? what happens behind scene that make it so better, and suggestions if any when to use which?I found this link but was looking to get more info.cheers. <code>  require 'benchmark'many = 500000Benchmark.bm do |b| b.report(""[] \t"") {many.times { [].object_id }} b.report(""Array.new \t"") { many.times { Array.new.object_id }} b.report(""{} \t"") {many.times { {}.object_id }} b.report(""Hash.new\t"") { many.times { Hash.new.object_id }}end user system total real[] 0.080000 0.000000 0.080000 ( 0.079287)Array.new 0.180000 0.000000 0.180000 ( 0.177105){} 0.080000 0.000000 0.080000 ( 0.079467)Hash.new 0.260000 0.000000 0.260000 ( 0.264796)",Differences between literals and constructors? ([] vs Array.new and {} vs Hash.new)
Is there an RSpec matcher for comparing a hash with string keys against a hash with symbol keys?," Consider the following RSpec snippet: This test fails because one hash uses symbols for keys and the other uses strings for keys. In my case, one hash is a parsed JSON object, the other is the hash that created the object. I'd like them to compare as equal.Before I go writing my own matcher or coercing both hashes to have string keys, is there a matcher or technique that handles this (common) case? <code>  it ""should match"" do {:a => 1, :b => 2}.should =~ {""a"" => 1, ""b"" => 2}end",RSpec: comparing a hash with string keys against a hash with symbol keys?
How to riveter EXIF information of an image in Rails," I am using Rails paperclip for displaying the images in my page. I want to know how to retrieve EXIF information of an image(like dimensions, camera model,height,width., etc).Can any one help me out???Thanks!!!  <code> ",How to retrieve EXIF information of an image in Rails
Is undefined variable is equal to nil in Ruby," I got error as undefined variable, I know nil is evaluated to false if used as boolean: <code>  if y puts ""Something""end",Is undefined variable equal to nil in Ruby?
Fastest way to check if a string matches or not a regexp in ruby?," What is the fastest way to check if a string matches a regular expression in Ruby?My problem is that I have to ""egrep"" through a huge list of strings to find which are the ones that match a regexp that is given at runtime. I only care about whether the string matches the regexp, not where it matches, nor what the content of the matching groups is. I hope this assumption can be used to reduce the amount of time my code spend matching regexps.I load the regexp with I have found that string =~ pattern is slightly faster than string.match(pattern).Are there other tricks or shortcuts that can used to make this test even faster? <code>  pattern = Regexp.new(ptx).freeze",Fastest way to check if a string matches a regexp in ruby?
Fastest way to check if a string matches a regexp or not in ruby?," What is the fastest way to check if a string matches a regular expression in Ruby?My problem is that I have to ""egrep"" through a huge list of strings to find which are the ones that match a regexp that is given at runtime. I only care about whether the string matches the regexp, not where it matches, nor what the content of the matching groups is. I hope this assumption can be used to reduce the amount of time my code spend matching regexps.I load the regexp with I have found that string =~ pattern is slightly faster than string.match(pattern).Are there other tricks or shortcuts that can used to make this test even faster? <code>  pattern = Regexp.new(ptx).freeze",Fastest way to check if a string matches a regexp in ruby?
Get IP address with ruby on rails, How to get my own IP address with Rails?When I do it like this I got: 127.0.0.1 Is there any way to get the Public IP? <code>  @ip = request.remote_ip,Get own IP address
Sweetching between 2 frames doesn't work," I am trying do something inside 2 frames but error raises everytime when I try to switch between frames.For example: Error is: [remote server] file:///tmp/webdriver-profile20120810-9163-xy6dtm/extensions/fxdriver@googlecode.com/components/driver_component.js:6638:in `unknown': Unable to locate frame: main (Selenium::WebDriver::Error::NoSuchFrameError)What is the problem? Maybe I am doing something wrong here?If I change order of switching frames so try first to switch to 'header' then switch to 'main' frame then same error raises except that it says that this time there is no 'main' frame: Error: [remote server] file:///tmp/webdriver-profile20120810-9247-w3o5hj/extensions/fxdriver@googlecode.com/components/driver_component.js:6638:in `unknown': Unable to locate frame: main (Selenium::WebDriver::Error::NoSuchFrameError) <code>  # encoding: utf-8require ""capybara/dsl""Capybara.run_server = falseCapybara.current_driver = :seleniumCapybara.app_host = 'https://hb.posted.co.rs/posted'class Account include Capybara::DSL def check_balance visit('/') page.driver.browser.switch_to.frame 'main' fill_in 'korisnik', :with => 'foo' fill_in 'lozinka', :with => 'bar' click_button 'Potvrda unosa' page.driver.browser.switch_to.frame 'header' click_on 'Stanje' endendaccount = Account.newaccount.check_balance # encoding: utf-8require ""capybara/dsl""Capybara.run_server = falseCapybara.current_driver = :seleniumCapybara.app_host = 'https://hb.posted.co.rs/posted'class Account include Capybara::DSL def check_balance visit('/') page.driver.browser.switch_to.frame 'header' click_on 'Stanje' page.driver.browser.switch_to.frame 'main' fill_in 'korisnik', :with => 'foo' fill_in 'lozinka', :with => 'bar' click_button 'Potvrda unosa' endendaccount = Account.newaccount.check_balance",How can I switch between two frames with Capybara
how to get the real file from S3 using carrierwave," I have an application that reads the content of a file and indexes it. I was storing them in the disk itself, but now I'm using Amazon S3, so the following method doesn't work anymore.It was something like this: @document.file returns the FileUploader, and doc.file.file returns the CarrierWave::Storage::Fog::File class.How can I get the real file? <code>  def perform(docId) @document = Document.find(docId) if @document.file? #You should't create a new version @document.versionless do |doc| @document.file_content = Cloudoc::Extractor.new.extract(@document.file.file) @document.save end end end",How to get the real file from S3 using CarrierWave
Converting nested hash into XML using nokogiri," I have many levels of a nested hash like: How can I convert them into an XML like this?: I tried the xml.send method, but it converts the above nested hash to: <code>  { :foo => 'bar', :foo1 => { :foo2 => 'bar2', :foo3 => 'bar3', :foo4 => { :foo5 => 'bar5' }}} <foo>bar</foo><foo1> <foo2>bar2</foo2> <foo3>bar3</foo3> <foo4> <foo5>bar5</foo5> </foo4></foo1> <foo1 foo3=""bar3"" foo4=""foo5bar5"" foo2=""bar2""/><foo>bar</foo>",How to convert a nested hash into XML using Nokogiri
"Ruby method parameters: accepting both, a Hash and an Array of Hashes"," I have the method: It works perfectly, if I pass an Array of Hashes: However, I might want to pass only a single Hash, instead of an Array of Hashes: What would be the cleanest Ruby way to convert a Hash into an Array of Hashes?The Array() method a kind of ensures, that an array is always returned, but when the Hash is passed, it is converted into an Array itself. What I need: Is there any nice way to implement this, or do I have to do a manual type checking with is_a?(Array) ? <code>  def self.store(params) params.each { }end params = [ { key: 'value' }, { key: 'value' } ] params = { key: 'value' } Array({ key: 'value' }) => [[:key, 'value']] { key: 'value' } => [ { key: 'value' } ]",Accepting either a hash or an array of hashes as arguments to a Ruby method
Does ruby have atomic variables?," Does Ruby have atomic variables, like AtomicInteger or AtomicBoolean in Java? <code> ",Does Ruby have atomic variables?
How can I trigger shell script and run in background (async) in ruby?," I have a shell script named test.sh. How can I trigger the test.sh from Ruby?I want test.sh to run as a background process, what means in Ruby it is a ansync call.STDERR and STDOUT also need to be written to a specific file.Any ideas? <code> ",How can I trigger a shell script and run in background (async) in Ruby?
"""use"" keyword in ruby"," Recently I happened to see this word in Ruby code, use, when I was going through some code related to goliath, middleware etc. Looks like it is different from include/extend, and require.Can somebody explain why this use keyword exists, and how it is different from include/require? How does it work, when to use it? <code> ","""use"" keyword/word in Ruby/Rails/Rack code"
"""use"" keyword/word in ruby code"," Recently I happened to see this word in Ruby code, use, when I was going through some code related to goliath, middleware etc. Looks like it is different from include/extend, and require.Can somebody explain why this use keyword exists, and how it is different from include/require? How does it work, when to use it? <code> ","""use"" keyword/word in Ruby/Rails/Rack code"
Escape special chars in RegEx," I have a form, that sends the contents of a text field to my Rails application and I have to generate a regular expression of this string. I tried it like this: In general this is working, but if brackets or special characters are contained in the string, this method will not work.I don't want Rails to take care of the chars. They should be escaped automatically.I tried it like this: but this isn't working either. <code>  regex = /#{params[:text]}/ /\Q#{params[:text]}\E/",Escape special chars in RegEx?
Is there a limit/clamp function in ruby," I wrote the following code, which keeps x within the range (a..b). In pseudo code: In Ruby it would be something like: As it is quite basic and useful function, I was wondering if there is a native method to do that in ruby.As of Ruby 2.3.3 there is apparently no method like this, what would be the shortest/more readable way to do it?I found: so far, but I'm not sure if it is more readable. <code>  (if x < a, x = a; if x > b, x = b) x = [a, [x, b].min].max x = [a, x, b].sort[1]",Is there a method to limit/clamp a number?
using rails ActiveRecord and postgres. how can i execute multiple sql queries," I am using Ruby on Rails with ActiveRecord and PostgreSQL.How can i execute multiple sql queries?I need it for running a custom migration script, eg: I am not accepting data from a user, so I'm not worried about sql-injection. Something like CLIENT_MULTI_STATEMENTS in MySQL maybe ?From the MySQL/PHP docs: CLIENT_MULTI_STATEMENTS: Tell the server that the client may send multiple statements in a single string (separated by ;). If this flag is not set, multiple-statement execution is disabled. See the note following this table for more information about this flag. <code>  Foo.connection.execute <<-SQL.split(';').map(&:strip).join delete from metadata where record_type = 'Foo'; TRUNCATE table1 RESTART IDENTITY; TRUNCATE table2 RESTART IDENTITY; delete from schema_migrations where version > '20120806120823';SQL",How can execute multiple statements in one query with Rails?
Ruby's Dir vs File vs Pathname," What is the difference between Ruby's Dir, File, and Pathname classes? They seem to share common methods like basename, dirname, glob, and join. When is using one advantageous over the other?Pathname seems particularly peculiar when comparing its functionality to Dir and File. <code> ",Ruby's Dir vs File vs Pathname?
Ruby get instance methods from Class," I am trying to get definition of method :foo from Class object. I cannot create instance of class since I need method definition to evaluate should I create object (app requirments). Bar.class.???(:foo)I can get with bar definition with Bar.class.method(:bar) but of course I need foo, thanks!UPDATE:Using Ruby 1.8.7 <code>  class Bar def foo(required_name, optional=""something"") puts ""Hello args are #{required_name}, #{optional}"" end def self.bar puts ""I am easy, since I am static"" endend",Ruby get instance method definition from Class
Ruby: Converting a nested JSON object to an un-nested one," Right now, I have a server call kicking back the following Ruby hash: It's got several attributes which are nested, such as: I need to convert this object into a unnested hash in Ruby. Ideally, I'd like to detect if an attribute is nested, and respond accordingly, I.E. when it determines the attribute 'wed' is nested, it pulls out its data and stores in the fields 'wed-start' and 'wed-end', or something similar.Anyone have any tips on how to get started? <code>  { ""id""=>""-ct"", ""factualId""=>"""", ""outOfBusiness""=>false, ""publishedAt""=>""2012-03-09 11:02:01"", ""general""=>{ ""name""=>""A Cote"", ""timeZone""=>""EST"", ""desc""=>"" Ct is a small-plates restaurant in Oakland's charming Rockridge district. Cozy tables surround large communal tables in both the main dining room and on the sunny patio to create a festive atmosphere. Small plates reflecting the best of seasonal Mediterranean cuisine are served family-style by a friendly and knowledgeable staff.\nMenu items are paired with a carefully chosen selection of over 40 wines by the glass as well as a highly diverse bottled wine menu. Specialty drinks featuring fresh fruits, rare botaniques and fine liqueurs are featured at the bar."", ""website""=>""http://acoterestaurant.com/"" }, ""location""=>{ ""address1""=>""5478 College Ave"", ""address2""=>"""", ""city""=>""Oakland"", ""region""=>""CA"", ""country""=>""US"", ""postcode""=>""94618"", ""longitude""=>37.84235, ""latitude""=>-122.25222 }, ""phones""=>{ ""main""=>""510-655-6469"", ""fax""=>nil }, ""hours""=>{ ""mon""=>{""start""=>"""", ""end""=>""""}, ""tue""=>{""start""=>"""", ""end""=>""""}, ""wed""=>{""start""=>"""", ""end""=>""""}, ""thu""=>{""start""=>"""", ""end""=>""""}, ""fri""=>{""start""=>"""", ""end""=>""""}, ""sat""=>{""start""=>"""", ""end""=>""""}, ""sun""=>{""start""=>"""", ""end""=>""""}, ""holidaySchedule""=>"""" }, ""businessType""=>""Restaurant""} ""wed""=>{""start""=>"""", ""end""=>""""}",Ruby: Converting a nested Ruby hash to an un-nested one
[Sinatra][Test] calling a Sinatra app instance method from TestCase," I have an util method into a Sinatra application and I would like to tested from my TestCase.The problem is that I don't know how to invoke it, if I just use app.util_method I have the error NameError: undefined local variable or method 'util_method' for #<Sinatra::ExtendedRack:0x007fc0c43305b8>my_app.rb: my_app_test.rb: <code>  class MyApp < Sinatra::Base # [...] routes methods # utils methods def util_method return ""hi"" endend require ""my_app.rb""require ""test/unit""require ""rack/test""class MyAppTest < Test::Unit::TestCase include Rack::Test::Methods def app MyApp.new end # [...] routes methods tests def test_util_method assert_equal( ""hi"", app.util_method ) endend",Calling a Sinatra app instance method from TestCase
Elastic Search/Tire: How do I filter for a boolean attribute?," I want to filter the private boolean of my class so it only shows resources that aren't private but it's not working for me. (I dumbed down the code tremendously) How do I do this correctly? <code>  mapping do indexes :private, type: ""boolean"" indexes :name, type: ""string"" end enddef self.search(params) tire.search(load: true, page: params[:page], per_page: 20) do query { string params[:query] } if params[:query].present? # So far I've tried... # filter :bool, :private => [""false""] # filter :bool, private: false endend",Elastic Search/Tire: How do I filter a boolean attribute?
Does CoffeeScript support variable rendering in single quotation string?," I come to this question: The outcome is #{param}When I enclose the string with double quotation marks, this just print 1. I have also tested it in Ruby, its behaviour is the same. But that just contradicts the rule in CoffeeScript.org:The golden rule of CoffeeScript is: ""It's just JavaScript"".Because I think in Javascript, single quotes and double quotes are treated equally. And I do not use Ruby often. Can anyone explain why?Thanks a lot. <code>  f = (param) -> console.info '#{param}' f(1)",Does CoffeeScript support interpolation in single quotation string?
Conditional initializer based on --server or not," I'm using EventMachine and Monetarily to start e TCP server along with my rails application. This is started from config/initializers/momentarily.rb. My problem is that it starts also when I run rake tasks, like db:migrate. I only want it to start when when I start the HTTP server. Environments won't help, since both the server start and rake tasks are under Development environment. Is there a way of knowing that the application is running the HTTP server as opposed to anything else? Note that is not only rake tasks, the EM starts also if I run the rails console, which is again something not desirable for my case. <code> ","Detect if application was started as HTTP server or not (rake task, rconsole etc)"
"Rails - How to check if variable exists, then if it has a value?"," This is a common pattern: If a variable doesn't exist I get an undefined local variable or method error.The existing code has if variable_name.present? but this didn't account for the variable not existing.How can I check the value of the variable and also account for it not existing at all?I've tried: but Ruby still checks that inner mmm.present? and throws ""no such variable"" when it doesn't exist.I'm sure there's a common pattern/solution to this. <code>  if (defined? mmm) then if mmm.present? then puts ""true"" endend","How to check if a variable exists with a value without ""undefined local variable or method""?"
Rails - How to check variable exists w/value w/out `undefined local variable or method`," This is a common pattern: If a variable doesn't exist I get an undefined local variable or method error.The existing code has if variable_name.present? but this didn't account for the variable not existing.How can I check the value of the variable and also account for it not existing at all?I've tried: but Ruby still checks that inner mmm.present? and throws ""no such variable"" when it doesn't exist.I'm sure there's a common pattern/solution to this. <code>  if (defined? mmm) then if mmm.present? then puts ""true"" endend","How to check if a variable exists with a value without ""undefined local variable or method""?"
Ruby: How to reference global variables and class variables?," I'm new to programming. Right now I'm studying Ruby. To my understanding, global variables are defined in the global namespace (so outside of any classes or functions). I'm reading something and it says global variables have a $ sign before them. What does that mean? Does it mean when I define a function or class and want to reference my global variable (let's say it is edmund = 123) I would have to reference it like this: $edmund?so: Also are class variables (the ones that begin with @@) like instance variables (@) where you can access them by calling them through Class.classvariable? What is their purpose? <code>  edmund = 123def my_function() 456 + $edmundend",How to reference global variables and class variables?
How do I define nested Factories with FactoryGirl?," Given two models, Alert and Zipcode, where one Alert must have 1 or more Zipcodes: How do I write my FactoryBot factories so that:Zipcode factories are defined in their own fileAlert factories are defined in their own fileAlert can rely on the factory defined by Zipcode?All of the documentation and examples I read expect you to define the contained class inside the parent factory file, blob them all together, or make some other compromise or work-around. Isn't there a clean way to keep the spec factories separate? <code>  class Alert < ActiveRecord::Base attr_accessible :descr, :zipcode has_many :zipcode validates :zipcode, :length => { :minimum => 1 }endclass Zipcode < ActiveRecord::Base attr_accessible :zip belongs_to :alertend ",How do I define associated Factories with FactoryBot?
How do I define nested Factories with FactoryBot?," Given two models, Alert and Zipcode, where one Alert must have 1 or more Zipcodes: How do I write my FactoryBot factories so that:Zipcode factories are defined in their own fileAlert factories are defined in their own fileAlert can rely on the factory defined by Zipcode?All of the documentation and examples I read expect you to define the contained class inside the parent factory file, blob them all together, or make some other compromise or work-around. Isn't there a clean way to keep the spec factories separate? <code>  class Alert < ActiveRecord::Base attr_accessible :descr, :zipcode has_many :zipcode validates :zipcode, :length => { :minimum => 1 }endclass Zipcode < ActiveRecord::Base attr_accessible :zip belongs_to :alertend ",How do I define associated Factories with FactoryBot?
Rails mountable engine with cron (whenever gem), Is it possible to use cron (via the whenever gem) to run tasks directly on mountable engine models. The cron I think would not be able to start from the main app since mountable engines are supposed to be isolated.I am able to use whenever within a normal rails app and it works great but I have a need to run tasks in an engine style way.Thanks <code> ,Mountable engine with cron (whenever gem)
Gemfile gem version," In Rails Gemfile, what are the differences between these : and and Also what should be used where and benefit of following that way? <code>  gem ""gemname"", ""~> 4.0.1"" gem ""gemname"", ""4.0.1"" gem ""gemname""","What is the difference between ""~> 4.0.1"", ""4.0.1"" and no version specifier in a Gemfile?"
How to run multiple tiny ruby (rack) apps on one server?," I want to run several (>2) tiny Rack-based apps on my VPS server, which already has one large Rails app running.Rails app uses traditional pair ""Unicorn + nginx"" and it requires the most of RAM resources I have on my VPS machine.I've tried adding similar Unicorn configurations for each app and it led me to the insufficiency of RAM resources.So my question is: is it possible to setup one small tricky memory-saving server which will allow running all Sinatra apps at once?UPDATE: in case if it matters, I don't care much about the performance. Those apps are not intended to do any serious jobs.UPDATE2: an approach based on socket shared with Nginx is preferred over the one with ports. Thanks! <code> ",How to run multiple tiny Ruby (Rack) apps on one server?
"Open link in new tabopen in new tab, redirect to facebook page"," I have this code: How can I make it open in a new tab when a user clicks the link? <code>  <%= link_to image_tag(""facebook.png"", :class => ""facebook_icon"", :alt => ""Facebook"", :target => ""_blank""), ""http://www.facebook.com/mypage"" %>",Rails: Open link in new tab (with 'link_to')
Open link in new tab with link_to," I have this code: How can I make it open in a new tab when a user clicks the link? <code>  <%= link_to image_tag(""facebook.png"", :class => ""facebook_icon"", :alt => ""Facebook"", :target => ""_blank""), ""http://www.facebook.com/mypage"" %>",Rails: Open link in new tab (with 'link_to')
Nokogiri fails outputting XML with UTF-16 PI (understanding and working around)," SummaryAttempting to read and serialize XML documents that have a UTF-16 encoding and declaration causes Nokogiri to produce garbage after a certain point. Is this a bug, or is there a reasonable explanation for this?What's the best way to avoid it?Environment DetailsI have an XML file encoded with UTF-16(LE), and it also includes a PI XML Declaration at the top indicating that the encoding is UTF-16. Summarized, it looks like this: When I use Nokogiri to read this document, all seems well: However, the output of serializing the document becomes munged after a certain point: (The limit seems to be related to the number of characters. I can add and remove a few words from the Lorem ipsum text with no change, but removing text below a certain point suddenly fixes the output.)The Nokogiri document is not broken, however. I can independently serialize <Jim> successfully: The only workaround I've found is to remove the XML Declaration at the top of the document before parsing it. With this, all works as desired: Full XMLHere's the full file to test for yourself: <code>  C:\>nokogiri -v# Nokogiri (1.5.5) --- warnings: [] nokogiri: 1.5.5 ruby: version: 1.9.3 platform: i386-mingw32 description: ruby 1.9.3p194 (2012-04-20) [i386-mingw32] engine: ruby libxml: binding: extension compiled: 2.7.7 loaded: 2.7.7 <?xml version=""1.0"" encoding=""UTF-16"" ?><Foo> <Bar><![CDATA[Lorem ipsum dolor ...about 3900 more bytes of content here... ]]></Bar> <Jim>Oh! Hello there.</Jim></Foo> xml = File.open('Simplified.xml','rb:utf-16le',&:read)p xml.encoding # #<Encoding:UTF-16LE>p xml.valid_encoding? # truedoc1 = Nokogiri.XML(xml,&:noblanks)xml1 = doc1.to_xml.encode('utf-8')p xml1.encoding # #<Encoding:UTF-8>p xml1.valid_encoding? # true p xml1 # Correct contents of CDATA removed from the following output#=> ""<?xml version=\""1.0\"" encoding=\""UTF-16\""?>\n<Foo>\n <Bar><![CDATA[\n...\n\t]]></Bar>\n <Jim>Oh! Hello there.\uFFFE\u3C00\u0000\u2F00\u0000\u4A00\u0000\u6900\u0000\u6D00\u0000\u3E00\u0000\u0A00\u0000\u3C00\u0000\u2F00\u0000\u4600\u0000\u6F00\u0000\u6F00\u0000\u3E00\u0000\u0A00\u0000"" puts doc1.at('Jim').to_xml.encode('utf-8')#=> <Jim>Oh! Hello there.</Jim> decl = '<?xml version=""1.0"" encoding=""UTF-16"" ?>'.encode('UTF-16LE')doc2 = Nokogiri.XML(xml.sub(decl,''),&:noblanks)puts doc2.to_xml.encode('utf-8')#=> <?xml version=""1.0""?>#=> <Foo>#=> <Bar><![CDATA[#=> Lorem ipsum dolor...and more...#=> ]]></Bar>#=> <Jim>Oh! Hello there.</Jim>#=> </Foo> <?xml version=""1.0"" encoding=""UTF-16"" ?><Foo> <Bar><![CDATA[Lorem ipsum dolor sit amet, consectetur adipiscing elit. Etiam ac augue arcu, eget laoreet lorem. Quisque ac augue velit. Integer consectetur suscipit vehicula. Etiam et convallis enim. Etiam varius massa sit amet lacus rhoncus varius in non ante. Sed dictum, metus eu bibendum ornare, ligula dui commodo urna, ut dignissim felis dolor eget nisl. Proin sit amet nisi nunc. Vestibulum a urna sed dui dignissim blandit nec vel enim. Vivamus tincidunt nulla id dui hendrerit hendrerit.Aliquam neque orci, luctus sit amet fringilla eu, varius vitae diam. Suspendisse varius rutrum lorem eget malesuada. Sed dapibus dapibus nisl, in cursus ante lacinia non. Aenean id sagittis ipsum. Suspendisse elit nunc, porta sit amet blandit ut, laoreet sed est. Nunc eget sem vitae nisl elementum ullamcorper ut sit amet urna. Sed ligula quam, fringilla in facilisis tincidunt, vehicula in nisi. Maecenas a augue in augue semper scelerisque sit amet ut arcu.Praesent hendrerit, enim in elementum ornare, lorem nisi euismod dolor, sit amet ornare mi sem sodales lacus. Fusce et tempor mauris. In non quam nisl, non consequat diam. Duis sit amet massa ultrices massa cursus iaculis. Nunc ullamcorper malesuada sem dignissim semper. Fusce aliquet lacus quis nisi tincidunt sodales. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Pellentesque posuere commodo aliquet. Aliquam blandit vestibulum facilisis. Sed pellentesque viverra dignissim. Etiam est lacus, mollis eu pretium vitae, lacinia eleifend augue. Mauris vitae quam nisl. In venenatis nunc ac eros elementum cursus.Sed a metus sit amet nunc euismod condimentum id non orci. Curabitur velit turpis, lacinia non eleifend sed, rhoncus id est. Fusce ut massa dolor, ut sodales odio. Donec aliquam convallis tellus, eu pharetra tortor iaculis non. Integer imperdiet feugiat ipsum a gravida. Mauris sapien ipsum, ultricies ac placerat ut, imperdiet eu justo. Quisque quis consectetur velit. Etiam facilisis sapien nec enim tincidunt pulvinar. Duis fermentum faucibus felis, sed consequat libero pretium at. Phasellus nibh purus, suscipit in vestibulum vel, blandit at leo. Suspendisse placerat elit sed enim bibendum vel hendrerit mauris pretium. Maecenas ut lacus eu nisi euismod pretium.Aliquam feugiat felis id massa aliquam pharetra sed non eros. Morbi interdum molestie iaculis. Curabitur varius ante ac dui dapibus non laoreet risus blandit. Nunc sit amet magna lacus. Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia Curae; Phasellus egestas nunc sed turpis imperdiet a rhoncus massa aliquam. Nulla facilisi. Phasellus sit amet neque felis, nec vestibulum massa. Donec luctus fringilla dolor et gravida. Phasellus euismod lectus eget elit hendrerit non vehicula tellus venenatis. Phasellus sit amet ligula et purus dignissim feugiat at vitae libero. Proin ut tortor eros, quis laoreet lectus. Quisque nec urna mattis ante gravida fermentum eu at nibh. Phasellus sapien elit, tincidunt quis laoreet id, lobortis sed magna. Aliquam pulvinar erat eu sapien pretium bibendum. Maecenas eleifend, leo quis sodales tincidunt, leo felis tristique dolor, vitae ultrices neque felis ut metus.Etiam dignissim egestas ipsum, eget tempor ipsum rutrum eu. Donec vehicula eleifend ullamcorper. Mauris justo nulla, varius a mattis a, cursus sit amet risus. Phasellus rutrum interdum blandit. Donec ut justo eros, ut auctor dolor. Suspendisse potenti. Cras ultricies, dui eget mattis bibendum, leo dui luctus purus, sit amet rhoncus libero metus eget purus. Pellentesque scelerisque ornare sapien faucibus tempor.Suspendisse potenti. Proin fermentum bibendum dapibus. Pellentesque facilisis aliquam. Nam egestas tellus non mauris scelerisque feugiat pellentesque lacus dignissim. Quisque id nulla felis. Mauris justo mauris, posuere sed facilisis in, venenatis nec risus. Mauris eu dui sed tellus laoreet tempor a in turpis volutpat. ]]></Bar> <Jim>Oh! Hello there.</Jim></Foo>",Nokogiri fails outputting XML with UTF-16 declaration (understanding and working around)
what are #taint and #trust methods in ruby," I was reading about Ruby string methods in the docs and came accross the methods tainttrustuntaintuntrustI don't know what they do, which situation do we use them? Has anyone used any of them? Examples would be nice. <code> ",What are the Ruby's Object#taint and Object#trust methods?
SpeedUp ruby csv import," I want to import big amount of cvs data (not directly to AR, but after some fetches), and my code is very slow. Even if I delete and get only this, it is slow. Could anybody help me increase the speed using fastercsv? <code>  def csv_import require 'csv' file = File.open(""/#{Rails.public_path}/uploads/shate.csv"") csv = CSV.open(file, ""r:ISO-8859-15:UTF-8"", {:col_sep => "";"", :row_sep => :auto, :headers => :first_row}) csv.each do |row| #ename,esupp= row[1].split(/_/) #(ename,esupp,foo) = row[1]..split('_') abrakadabra = row[0].to_s() (ename,esupp) = abrakadabra.split(/_/) eprice = row[6] eqnt = row[1] # logger.info(""1) "") # logger.info(ename) # logger.info(""---"") # logger.info(esupp) #---- #ename = row[4] #eprice = row[7] #eqnt = row[10] #esupp = row[12] if ename.present? && ename.size>3 search_condition = ""*"" + ename.upcase + ""*"" if esupp.present? #supplier = @suppliers.find{|item| item['SUP_BRAND'] =~ Regexp.new("".*#{esupp}.*"") } supplier = Supplier.where(""SUP_BRAND like ?"", ""%#{esupp}%"").first logger.warn(""!!! *** supp !!!"") #logger.warn(supplier) end if supplier.present? @search = ArtLookup.find(:all, :conditions => ['MATCH (ARL_SEARCH_NUMBER) AGAINST(? IN BOOLEAN MODE)', search_condition.gsub(/[^0-9A-Za-z]/, '')]) @articles = Article.find(:all, :conditions => { :ART_ID => @search.map(&:ARL_ART_ID)}) @art_concret = @articles.find_all{|item| item.ART_ARTICLE_NR.gsub(/[^0-9A-Za-z]/, '').include?(ename.gsub(/[^0-9A-Za-z]/, '')) } @aa = @art_concret.find{|item| item['ART_SUP_ID']==supplier.SUP_ID} #| @articles if @aa.present? @art = Article.find_by_ART_ID(@aa) end if @art.present? @art.PRICEM = eprice @art.QUANTITYM = eqnt @art.datetime_of_update = DateTime.now @art.save end end logger.warn(""------------------------------"") end #logger.warn(esupp) end end def csv_import require 'csv' file = File.open(""/#{Rails.public_path}/uploads/shate.csv"") csv = CSV.open(file, ""r:ISO-8859-15:UTF-8"", {:col_sep => "";"", :row_sep => :auto, :headers => :first_row}) csv.each do |row| endend",Speed up csv import
Whats the difference between pluck and collect in ruby on rails?, Here are two sample codes.First one with collect: Second one with pluck: Is there any difference between them in performance or something else? <code>  User.first.gifts.collect(&:id) User.first.gifts.pluck(:id),What is the difference between pluck and collect in Rails?
What is the difference between pluck and collect in rails, Here are two sample codes.First one with collect: Second one with pluck: Is there any difference between them in performance or something else? <code>  User.first.gifts.collect(&:id) User.first.gifts.pluck(:id),What is the difference between pluck and collect in Rails?
"Parse email fields ""from"" and ""to"" in Ruby"," In an email, it looks like a ""from"" or ""to"" field can contain one or more addresses, each address can be like ""john@test.com"" or ""John D Jr <john@test.com>""So a ""from"" field can look like any of the following: and so on.I want to parse these fields, extracting each address' email if it's valid, and the name if it's present. Since I'm not familiar with the email standard, I may be missing some cases of what address fields can look like. Is there a Ruby library that can do this? <code>  ""a@a.com""""a@a.com, Bob Blue <b@b.com>""""Abe Allen <a@a.com>, b@b.com""""Abe Allen <a@a.com>, Bob Blue <b@b.com>""""Abe Allen <a@a.com>, Bob Blue <b@b.com>, c@c.com""","Parse email addresses for ""from"" and ""to"" fields in Ruby"
Capture Process.spawn() output in Ruby," Say I have a function like below, how do I capture the output of the Process.spawn call? I should also be able to kill the process if it takes longer than a specified timeout.Note that the function must also be cross-platform (Windows/Linux). Thanks. <code>  def execute_with_timeout!(command) begin pid = Process.spawn(command) # How do I capture output of this process? status = Timeout::timeout(5) { Process.wait(pid) } rescue Timeout::Error Process.kill('KILL', pid) endend",Fork child process with timeout and capture output
Capture Process.spawn() output in Ruby on Windows," Say I have a function like below, how do I capture the output of the Process.spawn call? I should also be able to kill the process if it takes longer than a specified timeout.Note that the function must also be cross-platform (Windows/Linux). Thanks. <code>  def execute_with_timeout!(command) begin pid = Process.spawn(command) # How do I capture output of this process? status = Timeout::timeout(5) { Process.wait(pid) } rescue Timeout::Error Process.kill('KILL', pid) endend",Fork child process with timeout and capture output
Capture child process output in Ruby on Windows," Say I have a function like below, how do I capture the output of the Process.spawn call? I should also be able to kill the process if it takes longer than a specified timeout.Note that the function must also be cross-platform (Windows/Linux). Thanks. <code>  def execute_with_timeout!(command) begin pid = Process.spawn(command) # How do I capture output of this process? status = Timeout::timeout(5) { Process.wait(pid) } rescue Timeout::Error Process.kill('KILL', pid) endend",Fork child process with timeout and capture output
Fork child process with timeout and capture output in Ruby on Windows," Say I have a function like below, how do I capture the output of the Process.spawn call? I should also be able to kill the process if it takes longer than a specified timeout.Note that the function must also be cross-platform (Windows/Linux). Thanks. <code>  def execute_with_timeout!(command) begin pid = Process.spawn(command) # How do I capture output of this process? status = Timeout::timeout(5) { Process.wait(pid) } rescue Timeout::Error Process.kill('KILL', pid) endend",Fork child process with timeout and capture output
Evaluate a block in a certain scope," For example, let's say I have Now I want to evaluate that block in the scope of a String, but pass that block a variable. I know how to do the first part: But how to also pass a variable to that block?I tried But it didn't work, it wasn't in the scope of the String. <code>  block = proc { |n| ""#{downcase} #{n}"" } ""Foo"".instance_eval(&block) ""Foo"".instance_eval { block.call(3) }",Evaluate a block in a certain scope and pass an argument
"Gettinhg error ""exceeded available parameter key space""?"," In my rails application, after form post, getting error exceeded available parameter key space. there are too many form fields inside form. Is that reason for error?Any views? <code> ","Getting error ""exceeded available parameter key space""?"
"size, length and count in Rails 3.2.3"," There is no difference between size, length and count in Rails 3.2.3, isn't it? <code>  1.9.3p194 :002 > u = User.find_by_email(""email@mail.ru"")1.9.3p194 :005 > u.addresses.size => 1 1.9.3p194 :006 > u.addresses.length => 1 1.9.3p194 :007 > u.addresses.count ","size, length and count in Rails"
It is possible to pass a hash object to a haml tag?," Please consider this example: I would be nice to fit all this in a simple statement like the following: <code>  - user_links_params = _user_link_params(current_user)%a{ :'data-msgstore-path' => user_links_params[:'data-msgstore-path'], :'data-user_id' => user_links_params[:'data-user_id'], :class => user_links_params[:class],} / too many html tags and stuff to fit in a simple link_to %a[_user_link_params(current_user)] / too many html tags and stuff to fit in a simple link_to",How to pass a hash object to a HAML tag
Select an option by Value not Text in capybara," For the HTML I have the following Capybara Ruby code: But this errors with: However, if I do It's ok.Is it possible to select an option in Capybara by Value not Text?Thanks <code>  <select id=""date""> <option value=""20120904"">Tue 4 Sep 2012</option> <option value=""20120905"">Wed 5 Sep 2012</option> <option value=""20120906"">Thu 6 Sep 2012</option></select> select ""20120905"", :from => ""date"" cannot select option, no option with text '20120905' in select box 'date' (Capybara::ElementNotFound) select ""Wed 5 Sep 2012"", :from => ""date""",Capybara: Select an option by value not text
Sidekiq authentication," I am using sidekiq in my rails application.By Default, Sidekiq can be accessed by anybody by appending ""/sidekiq"" after the url.I want to password protect / authenticate only the sidekiq part. How can i do that? <code> ",How can I password-protect my /sidekiq route (i.e. require authentication for the Sidekiq::Web tool)?
How to use double brackets in the regular expression for ruby?," What do double square brackets mean in a regex? I am confused about the following examples: I was testing using Rubular, but I didn't see any difference between the one with double brackets and single brackets. <code>  /[[^abc]]//[^abc]/",How to use double brackets in a regular expression?
Ruby & Celluloid," Due to some limitations I want to switch my current project from EventMachine/EM-Synchrony to Celluloid but I've some trouble to get in touch with it. The project I am coding on is a web harvester which should crawl tons of pages as fast as possible.For the basic understanding of Celluloid I've generated 10.000 dummy pages on a local web server and wanna crawl them by this simple Celluloid snippet: As far as I understand Celluloid, futures are the way to go to get the response of a fired request (comparable to callbacks in EventMachine), right? The other thing is, every actor runs in its own thread, so I need some kind of batching the requests cause 10.000 threads would result in errors on my OSX dev machine.So creating a pool is the way to go, right? BUT: the code above iterates over the 9999 URLs but only 1300 HTTP requests are sent to the web server. So something goes wrong with limiting the requests and iterating over all URLs.  <code>  #!/usr/bin/env jruby --1.9require 'celluloid'require 'open-uri'IDS = 1..9999BASE_URL = ""http://192.168.0.20/files""class Crawler include Celluloid def read(id) url = ""#{BASE_URL}/#{id}"" puts ""URL: "" + url open(url) { |x| x.read } endendpool = Crawler.pool(size: 100)IDS.to_a.map do |id| pool.future(:read, id)end",Ruby and Celluloid
Ruby : Using Inheritence in Ruby," I am new to Ruby . I have a question with respect to using Inheritence in Ruby .I have a class called as Doggy inside a file named Doggy.rb I have written another class named Puppy in another file named puppy.rb I am getting this Error: Is it mandatory to have these classes (Doggy and Puppy ) inside a single file only?Edited As per the suggestions , i have tried using require and require_relative as shown , but still i am getting below Error <code>  class Doggy def bark puts ""Vicky is barking"" endend class Puppy < Doggyendputs Doggy.new.bark Puppy.rb:1:in `<main>': uninitialized constant Doggy (NameError) Puppy.rb:1:in `<main>': uninitialized constant Doggy (NameError) class Puppy < Doggy end require_relative 'Doggy.rb' puts Doggy.new.bark",Using inheritance with multiple files in Ruby
Splitting an array into equal parts in ruby," I need a way to split an array in to an exact number of smaller arrays of roughly-equal size. Anyone have any method of doing this?For instance Note that this is an entirely separate problem from dividing an array into chunks, because a.each_slice(3).to_a would produce 5 groups (not 3, like we desire) and the final group may be a completely different size than the others: In this problem, the desired number of chunks is specified in advance, and the sizes of each chunk will differ by 1 at most. <code>  a = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13] groups = a.method_i_need(3)groups.inspect => [[1,2,3,4,5], [6,7,8,9], [10,11,12,13]] [[1,2,3], [4,5,6], [7,8,9], [10,11,12], [13]] # this is NOT desired here.",Dividing elements of a ruby array into an exact number of (nearly) equal-sized sub-arrays
execute (rather than invoke) rake task with parameters," It's not possible to invoke the same rake task from within a loop more than once. But, I want to be able to call rake first and loop through an array and invoke second on each iteration with different arguments. Since invoke only gets executed the first time around, I tried to use execute, but Rake::Task#execute doesn't use the splat (*) operator and only takes a single argument. One hack around it is to put the arguments to execute into an array and in second examine the structure of args, but that seems, well, hackish. Is there another (better?) way to accomplish what I'd like to do? <code>  desc ""first task""task :first do other_arg = ""bar"" [1,2,3,4].each_with_index do |n,i| if i == 0 Rake::Task[""foo:second""].invoke(n,other_arg) else # this doesn't work Rake::Task[""foo:second""].execute(n,other_arg) end endendtask :second, [:first_arg, :second_arg] => :prerequisite_task do |t,args| puts args[:first_arg] puts args[:second_arg] # ...end",How do I execute Rake tasks with arguments multiple times?
exclude option from collection.map in ruby on rails," I have a line like this: I want to exclude a value from the states.map collection. I thought that this would work but it doesn't: I put in unless s.name == ""excluded_state, but, again, it's not working:What am I doing wrong? <code>  <%= f.input :state_id, :input_html => {:value => (policy_address.state.name rescue nil)}, :required => true, :collection => states.map {|s| [ s.name, s.id] }, :include_blank => 'Please select'%> <%= f.input :state_id, :input_html => {:value => (policy_address.state.name rescue nil)}, :required => true, :collection => states.map {|s| [ s.name, s.id] unless s.name == ""excluded_state"" }, :include_blank => 'Please select'%>",Exclude option from collection.map in Ruby on Rails?
Pasring natural language ingredient quantities for recipes with ruby," I'm building a ruby recipe management application, and as part of it, I want to be able to parse ingredient quantities into a form I can compare and scale. I'm wondering what the best tools are for doing this.I originally planned on a complex regex, then on some other code that converts human readable numbers like two or five into integers, and finally code that will convert say 1 cup and 3 teaspoons into some base measurement. I control the input, so I kept the actual ingredient separate. However, I noticed users inputting abstract measurements like to taste and 1 package. At least with the abstract measurements, I think I could just ignore them and scale and just scrape any number preceding them.Here are some more examples Are there any tricks to this? I have noticed users seem somewhat confused of what constitutes a quantity. I could try to enforce stricter rules and push things like tall can and leaves into the ingredient part. However, in order to enforce that, I need to be able to convey what's invalid.I'm also not sure what the ""base"" measurement I should convert quantities into.These are my goals.To be able to scale recipes. Arbitrary units of measurement likepackages don't have to be scaled but precise ones like cups orounces need to be.Figure out the ""main"" ingredients. In the context of this question, this will be done largely by figuring out what the largest ingredient is in the recipe. In production, there will have to be some sort of modifier based on the type of ingredient because, obviously, flour is almost never considered the ""main"" ingredient. However, chocolate can be used sparingly, and it can still be said a chocolate cake.Normalize input. To keep some consistency on the site, I want to keep consistent abbreviations. For example, instead of pounds, it should be lbs. <code>  1 tall can1/4 cup2 Leaves1 packetTo TasteOneTwo slices3-4 filletsHalf-bunch2 to 3 pinches (optional)",Parsing natural language ingredient quantities for recipes
Pasring natural language ingredient quantities for recipes," I'm building a ruby recipe management application, and as part of it, I want to be able to parse ingredient quantities into a form I can compare and scale. I'm wondering what the best tools are for doing this.I originally planned on a complex regex, then on some other code that converts human readable numbers like two or five into integers, and finally code that will convert say 1 cup and 3 teaspoons into some base measurement. I control the input, so I kept the actual ingredient separate. However, I noticed users inputting abstract measurements like to taste and 1 package. At least with the abstract measurements, I think I could just ignore them and scale and just scrape any number preceding them.Here are some more examples Are there any tricks to this? I have noticed users seem somewhat confused of what constitutes a quantity. I could try to enforce stricter rules and push things like tall can and leaves into the ingredient part. However, in order to enforce that, I need to be able to convey what's invalid.I'm also not sure what the ""base"" measurement I should convert quantities into.These are my goals.To be able to scale recipes. Arbitrary units of measurement likepackages don't have to be scaled but precise ones like cups orounces need to be.Figure out the ""main"" ingredients. In the context of this question, this will be done largely by figuring out what the largest ingredient is in the recipe. In production, there will have to be some sort of modifier based on the type of ingredient because, obviously, flour is almost never considered the ""main"" ingredient. However, chocolate can be used sparingly, and it can still be said a chocolate cake.Normalize input. To keep some consistency on the site, I want to keep consistent abbreviations. For example, instead of pounds, it should be lbs. <code>  1 tall can1/4 cup2 Leaves1 packetTo TasteOneTwo slices3-4 filletsHalf-bunch2 to 3 pinches (optional)",Parsing natural language ingredient quantities for recipes
How should I handle nested(?) command line options?," This command is my problem: my_job.rb also takes `--environment=production' as its argument, which should be script/runner's argument.I guess this can be solved using some parentheses, but no have an idea. If the solution doesn't touch (or depends on) Rails or Linux's global environment, it would be much better. <code>  /usr/local/bin/ruby **script/runner** --environment=production app/jobs/**my_job.rb** -t my_arg`my_job.rb` is my script, which handles command line arguments. In this case it is `-t my_arg`. /usr/local/lib/ruby/1.8/optparse.rb:1450:in `complete': invalid option: --environment=production (OptionParser::InvalidOption) from /usr/local/lib/ruby/1.8/optparse.rb:1448:in `catch' from /usr/local/lib/ruby/1.8/optparse.rb:1448:in `complete' from /usr/local/lib/ruby/1.8/optparse.rb:1261:in `parse_in_order' from /usr/local/lib/ruby/1.8/optparse.rb:1254:in `catch' from /usr/local/lib/ruby/1.8/optparse.rb:1254:in `parse_in_order' from /usr/local/lib/ruby/1.8/optparse.rb:1248:in `order!' from /usr/local/lib/ruby/1.8/optparse.rb:1339:in `permute!' from /usr/local/lib/ruby/1.8/optparse.rb:1360:in `parse!' from app/jobs/2new_error_log_rt_report.rb:12:in `execute' from app/jobs/2new_error_log_rt_report.rb:102 from /usr/local/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:31:in `eval' from /home/www/maldive/admin/releases/20120914030956/vendor/rails/railties/lib/commands/runner.rb:46 from /usr/local/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:31:in `gem_original_require' from /usr/local/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:31:in `require' from script/runner:3",Running rails runner with some parameters
"If, elseif, else in jekyll statement?"," I am using a logic operator in Jekyll but it's not working.Page one, two and three all use the same layout (part of a multilingual solution, works good but requires logical loops for some layout control to keep things DRY.)Here's the code: If I break it down to just an else and an if else setup, with any two of the tree, everything works. But as soon as I use a third condition it breaks. Am I limited to two conditionals with Jekyll? I can potentially restructure to make a case operator applicable, but I'd prefer to understand the fundamental problem here. Thanks all. <code>  {% if page.type == ""post"" %}{% include post.html %}{% elseif page.class == ""contact"" %}{% include contact.html %}{% else %}{{ content }}{% endif %}",How do I chain if statements in Jekyll?
best way to remove strings in array with Ruby," lets say i've got this array: what i'm doing: i got: are there any better approach in ruby to do this ? <code>  array = [""str1"", ""str2"", ""str3"", ""str4"", ""str5"", ""str6"", ""str7"", ""str8""] array.delete_if {|i| i == ""str1"" || i == ""str3"" || i == ""str5""} [""str2"", ""str4"", ""str6"", ""str7"", ""str8""]",Best way to remove strings in array with Ruby
Ruby equality ==," Sorry if duplicated (I didn't find it)This is only to confirm that Ruby's operator == performs always an equality comparison.I.e. compares a's value against b's value, instead than, like Java, whether they point to the same object in memory (For this latter thing, in Ruby, you should use a.object_id == b.object_id).Thus, as a consequence it is safe to compare string values with == in Ruby (while it is not safe to do so in Java)ThanksEdit:The question is on the the default == behavior for any Ruby object, as it can mislead Java-C-C++ programmers assuming a==b compares references themselves, not the reference contents.Anyway, you can check out this code, using strings Edit 2.So, in Ruby, the comparison checks a's and b's valuesbut, the assignment does not copy values, but makes a and b point to the same object !continuing with the previous code <code>  a == b one=""hello""two=""he""two << ""llo""if one == two puts ""surprise: comparing values, not like in Java""endif not one.object_id == two.object_id puts ""obvious: do this to compare references""end a == b a = b puts one.object_idputs two.object_idputs "" and now ""one = twoputs one.object_idputs two.object_id","Is ""=="" in Ruby always value equality?"
"Config.ru, Sinatra and gemfile"," I tried to use a Gemfile in my Sinatra app, but when I launched my app I got this error: Here are my three files:hi.rb: Gemfile: config.ru: What did I do wrong? How can I fix this? <code>  $ ruby config.ru config.ru:7:in `<main>': undefined method `run' for main:Object (NoMethodError) get ""/"" do ""Hello world""end gem ""sinatra"" require 'rubygems'require 'bundler'Bundler.requirerequire File.join(File.dirname(__FILE__), 'hi.rb')run Sinatra::Application","How to start a Sinatra app using ""run"""
Cannot start Sinatra app," I tried to use a Gemfile in my Sinatra app, but when I launched my app I got this error: Here are my three files:hi.rb: Gemfile: config.ru: What did I do wrong? How can I fix this? <code>  $ ruby config.ru config.ru:7:in `<main>': undefined method `run' for main:Object (NoMethodError) get ""/"" do ""Hello world""end gem ""sinatra"" require 'rubygems'require 'bundler'Bundler.requirerequire File.join(File.dirname(__FILE__), 'hi.rb')run Sinatra::Application","How to start a Sinatra app using ""run"""
Ruby C extension function naming conventions (suffixes)," I'm interested in following the correct naming conventions when writing an extension for ruby in C. Specifically I'm referring things such adding _p to function names of predicates and prefixing variables with m for module, c for class etc.For example, if we want to define a predicate method like the following in C, we should use _p as a suffix in the function that defines the method. In C: Looking through the core Ruby source code I see suffixes for _p (predicate) and _m, which I'm not able to infer a meaning from. I'm sure there are a number of other conventions.There are additional naming conventions, such as when to use underscores and when to use camel casing. It would be easy to create a mess without a guideline to follow when writing an extension with a substantial amount of C code.Is there a definitive list somewhere? I never seem to turn up useful results when googling for Ruby C extension topics. Any quick examples that show the pure Ruby syntax and the equivalent C function named correctly? <code>  class MyClass def awesome? true endend static VALUE my_extension_my_class_awesome_p(VALUE self) { return Qtrue;}void Init_my_extension(void) { VALUE cMyClass = rb_define_class(""MyClass"", rb_cObject); rb_define_method(cMyClass, ""awesome?"", my_extension_my_class_awesome_p, 0);}",Naming conventions for Ruby C extension developers
Get today's date in Liquid markup," This (should) be easy, I think, but I'm unable to get today's date to show in a Jekyll page using Liquid markup. According to the documentation, I should be able to do this to get this date's year: But all that gets rendered is the string now, not any formatted date. What am I doing wrong? <code>  {{ 'now' | date: ""%Y"" }}",Get today's date in Jekyll with Liquid markup
"How to refactoring ""shared"" methods?"," I am using Ruby on Rails 3.2.2 and I would like to ""extract"" some methods from my models / classes. That is, in more than one class / model I have some methods (note: methods are related to user authorizations and are named the ""CRUD way"") that are and work practically the same; so I thought that a DRY approach is to put those methods in a ""shared"" module or something like that.What is a common and right way to accomplish that? For example, where (in which directories and files) should I put the ""shared"" code? how can I include mentioned methods in my classes / models? what do you advice about?Note: I am looking for a ""Ruby on Rails Way to make things"". <code> ","How to refactor ""shared"" methods?"
Why does MiniTest::Spec have no wont_raise assertion?, Ruby's Test::Unit has assert_nothing_raised. Test::Unit has been replaced by MiniTest. Why don't MiniTest's assertions / expectations have anything parallel to this? For example you can expect must_raise but not wont_raise. <code> ,Why doesn't MiniTest::Spec have a wont_raise assertion?
"Ruby equivalent of ""pythonic"""," In the Python community, the term pythonic refers to idiomatic Python[1]. Is there an equivalent term in the Ruby community for idiomatic Ruby[2]?[1] For example, using enumerate(l) instead of range(len(l)) is pythonic.[2] For example, using .each instead of for is idiomatic Ruby. <code> ","What is the Ruby equivalent of ""pythonic""?"
ExecJS::RuntimeError on windows 7 trying to follow rubytutorial," UPDATE: Colin's suggestion of removing the line //= require_tree . has fixed the issue.I have wasted over 2 days trying to follow every suggestion out there and fix my issue. I am trying to follow the http://ruby.railstutorial.org book on windows machine and cannot for the life of me get past the following nasty error. I have tried every suggestion including installing nodejs with the msi, using execjs 1.3.0 and other things which I can't even remember any more. Here is the gem file and here is the sessions.js.coffee application.js application.html.erb Here is console content I have installed Devkit and have tried various gems but please suggest changes which can help me develop on windows. I used rubyinstaller for everything.What am I missing? <code>  ExecJS::RuntimeError in Static_pages#homeShowing C:/Users/.../bootcamp-sample-app/app/views/layouts/application.html.erb where line #6 raised:[""ok"",""(function() {\n\n\n\n}).call(this);\n""](in C:/Users/.../bootcamp-sample-app/app/assets/javascripts/sessions.js.coffee)Extracted source (around line #6):3: <head>4: <title><%= full_title(yield(:title)) %></title>5: <%= stylesheet_link_tag ""application"", media: ""all"" %>6: <%= javascript_include_tag ""application"" %>7: <%= csrf_meta_tags %>8: <%= render 'layouts/shim' %>9: </head>Rails.root: C:/Users/.../bootcamp-sample-appApplication Trace | Framework Trace | Full Traceapp/views/layouts/application.html.erb:6:in `_app_views_layouts_application_html_erb___487732698_30422172'Request source 'https://rubygems.org'gem 'rails', '3.2.8'gem 'bootstrap-sass', '2.0.0'gem 'bcrypt-ruby', '3.0.1'gem 'faker', '1.0.1'gem 'will_paginate', '3.0.3'gem 'bootstrap-will_paginate', '0.0.6'group :development, :test do gem 'sqlite3', '1.3.5' gem 'rspec-rails', '2.10.0' gem 'guard-rspec', '0.5.5' gem 'guard-cucumber'endgroup :development do gem 'annotate', '2.5.0'end# Gems used only for assets and not required# in production environments by default.group :assets do gem 'sass-rails' gem 'coffee-rails' gem 'coffee-script' gem 'uglifier'endgem 'jquery-rails', '2.0.2'gem 'execjs'# Gems on Linus/Mac#gem 'therubyracer'group :test do gem 'capybara', '1.1.2' gem 'guard-spork', '0.3.2' gem 'spork', '0.9.0' gem 'factory_girl_rails', '1.4.0' gem 'cucumber-rails', '1.2.1', require: false gem 'database_cleaner', '0.7.0'# Test gems on Linux# gem 'rb-inotify', '0.8.8'# gem 'libnotify', '0.5.9'# Test gems on Macintosh OS X# gem 'selenium-webdriver', '~> 2.22.0'# gem 'rb-fsevent', '0.9.1', :require => false# gem 'growl', '1.0.3'# Test gems on Windows# gem 'rb-fchange', '0.0.5'# gem 'rb-notifu', '0.0.4'# gem 'win32console', '1.3.0'endgroup :production do# gem 'therubyracer' gem 'pg', '0.12.2'end# To use ActiveModel has_secure_password# gem 'bcrypt-ruby', '~> 3.0.0'# To use Jbuilder templates for JSON# gem 'jbuilder'# Use unicorn as the app server# gem 'unicorn'# Deploy with Capistrano# gem 'capistrano'# To use debugger#gem 'debugger'' # Place all the behaviors and hooks related to the matching controller here.# All this logic will automatically be available in application.js.# You can use CoffeeScript in this file: http://jashkenas.github.com/coffee-script/ // This is a manifest file that'll be compiled into application.js, which will include all the files// listed below.//// Any JavaScript/Coffee file within this directory, lib/assets/javascripts, vendor/assets/javascripts,// or vendor/assets/javascripts of plugins, if any, can be referenced here using a relative path.//// It's not advisable to add code directly here, but if you do, it'll appear at the bottom of the// the compiled file.//// WARNING: THE FIRST BLANK LINE MARKS THE END OF WHAT'S TO BE PROCESSED, ANY BLANK LINE SHOULD// GO AFTER THE REQUIRES BELOW.////= require jquery//= require jquery_ujs//= require_tree .//= require bootstrap <!DOCTYPE html> <html> <head> <title><%= full_title(yield(:title)) %></title> <%= stylesheet_link_tag ""application"", media: ""all"" %> <%= javascript_include_tag ""application"" %> <%= csrf_meta_tags %> <%= render 'layouts/shim' %> </head>",ExecJS::RuntimeError on Windows trying to follow rubytutorial
What's the equivalent of the c# int.tryparse in ruby?," Possible Duplicate: Safe integer parsing in Ruby int.Parse converts a string into an integer, but throws an exception if the string cannot be convert. int.TryParse doesn't throw an error when it can't convert the sting to an int, but rather returns 0 and a bool that says whether the string can be converted.Is there something similar in Ruby?  <code> ",What's the equivalent of C#'s int.TryParse() method in Ruby?
RabbitMQ string length limits: byte vs UTF-8," This RabbitMQ page states: Queue names may be up to 255 bytes of UTF-8 characters.In ruby (1.9.3), how would I truncate a UTF-8 string by byte-count without breaking in the middle of a character? The resulting string should be the longest possible valid UTF-8 string that fits in the byte limit. <code> ",Ruby: Limiting a UTF-8 string by byte-length
Ruby's Object#method and dynamic responders," I have a Ruby object (an ActiveRecord object, specifically) named User. It responds to methods like find_by_id, find_by_auth_token, etc. However, these aren't methods that are defined via def or define_method. Instead, they are dynamic methods that are handled via method_missing.I'd like to obtain a reference to one of these methods via Object#method, e.g.: It doesn't look like this works though. The best solution I've come up with is: Is there any other way around using such a wrapper method as this? Am I really unable to use Object#method for dynamic methods? <code>  User.method(:find_by_auth_token) proc { |token| User.find_by_auth_token(token) }",Object#method and dynamic responders
Failed to build gem native extension - rails install," I have been installing Ruby on Rails based on the instruction from edX online class.Here is a list of terminal commands, and, where relevant, corresponding output: installation successful Up to here, everything looked fine, but the I tried to install rails and failed: <code>  $ sudo apt-get install ruby1.9.1 $ wget http://production.cf.rubygems.org/rubygems/rubygems-1.8.24.tgz$ tar zxvf ruby-1.8.24.tgz$ cd ruby-1..8.24$ sudo ruby setup.rbRubyGems 1.8.24 installed== 1.8.24 / 2012-04-27* 1 bug fix: * Install the .pem files properly. Fixes #320 * Remove OpenSSL dependency from the http code path------------------------------------------------------------------------------RubyGems installed the following executables: /usr/bin/gem1.9.1 $ sudo gem install railsFetching: i18n-0.6.1.gem (100%)Fetching: multi_json-1.3.6.gem (100%)Fetching: activesupport-3.2.8.gem (100%)Fetching: builder-3.0.3.gem (100%)Fetching: activemodel-3.2.8.gem (100%)Fetching: rack-1.4.1.gem (100%)Fetching: rack-cache-1.2.gem (100%)Fetching: rack-test-0.6.1.gem (100%)Fetching: journey-1.0.4.gem (100%)Fetching: hike-1.2.1.gem (100%)Fetching: tilt-1.3.3.gem (100%)Fetching: sprockets-2.1.3.gem (100%)Fetching: erubis-2.7.0.gem (100%)Fetching: actionpack-3.2.8.gem (100%)Fetching: arel-3.0.2.gem (100%)Fetching: tzinfo-0.3.33.gem (100%)Fetching: activerecord-3.2.8.gem (100%)Fetching: activeresource-3.2.8.gem (100%)Fetching: mime-types-1.19.gem (100%)Fetching: polyglot-0.3.3.gem (100%)Fetching: treetop-1.4.10.gem (100%)Fetching: mail-2.4.4.gem (100%)Fetching: actionmailer-3.2.8.gem (100%)Fetching: rake-0.9.2.2.gem (100%)Fetching: rack-ssl-1.3.2.gem (100%)Fetching: thor-0.16.0.gem (100%)Fetching: json-1.7.5.gem (100%)Building native extensions. This could take a while...ERROR: Error installing rails: ERROR: Failed to build gem native extension. /usr/bin/ruby1.9.1 extconf.rb/usr/local/lib/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require': cannot load such file -- mkmf (LoadError) from /usr/local/lib/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require' from extconf.rb:1:in `<main>'Gem files will remain installed in /usr/lib/ruby/gems/1.9.1/gems/json-1.7.5 for inspection.Results logged to /usr/lib/ruby/gems/1.9.1/gems/json-1.7.5/ext/json/ext/generator/gem_make.out",Failed to build gem native extension  Rails install
How to make Thin run on different port?," I've a very basic test app. When I execute this command the server ignores the port I specify and runs Thin on port 4567. Why is the port I specify ignored? xxx.rb file config.ru file <code>  $ruby xxx.rb start -p 8000== Sinatra/1.3.3 has taken the stage on 4567 for production with backup from Thin>> Thin web server (v1.4.1 codename Chromeo)>> Maximum connections set to 1024>> Listening on 0.0.0.0:4567, CTRL+C to stop require 'Thin'rackup_file = ""config.ru"" argv = ARGVargv << [""-R"", rackup_file ] unless ARGV.include?(""-R"")argv << [""-e"", ""production""] unless ARGV.include?(""-e"")puts argv.flattenThin::Runner.new(argv.flatten).run! require 'sinatra'require 'sinatra/base'class SingingRain < Sinatra::Base get '/' do return 'hello' endendSingingRain.run!",How to make Thin run on a different port?
Is there a way to define 'Infinite Time' in Ruby?," I am using the Range class to represent a range of times. Now I want a range which represents any point after a given time.I tried (DateTime.now .. nil), but the Range class doesn't allow objects of different classes to be endpoints of the same range. (Attempting to create a Range with this property results in ArgumentError: bad value for range.)Is there an equivalent of infinity for time, i.e. Time.now + (1.0/0.0)? Or alternately, is there a way to get around the Range class's requirement that its min and max values be of the same class? <code> ",Is there a way to express 'infinite time'?
Is there a way to express 'Infinite Time' in Ruby?," I am using the Range class to represent a range of times. Now I want a range which represents any point after a given time.I tried (DateTime.now .. nil), but the Range class doesn't allow objects of different classes to be endpoints of the same range. (Attempting to create a Range with this property results in ArgumentError: bad value for range.)Is there an equivalent of infinity for time, i.e. Time.now + (1.0/0.0)? Or alternately, is there a way to get around the Range class's requirement that its min and max values be of the same class? <code> ",Is there a way to express 'infinite time'?
Is there a way to express infinite time?," I am using the Range class to represent a range of times. Now I want a range which represents any point after a given time.I tried (DateTime.now .. nil), but the Range class doesn't allow objects of different classes to be endpoints of the same range. (Attempting to create a Range with this property results in ArgumentError: bad value for range.)Is there an equivalent of infinity for time, i.e. Time.now + (1.0/0.0)? Or alternately, is there a way to get around the Range class's requirement that its min and max values be of the same class? <code> ",Is there a way to express 'infinite time'?
does eventmachine issue close_notify on close_connection if tls_start was run?," I am trying to program a simple FTPS server based on EventMachine.Control socket works properly. When using data socket for data transfer, it seems that everything works well (TLS handshake completes successfully and data is received), but then I get an error message. Here is what I get in Filezilla: ftp-ssl also issues an error although somewhat different From what I found on the web I suspect this behavior is because close_notify is not issued at the end of connection? If so, is there any known Ruby based solution for that (f.ex. using OpenSSL::SSL::SSLSocket)? <code>  Command: LISTResponse: 150 Opening ASCII mode data connection for file listTrace: CFtpControlSocket::TransferParseResponse()Trace: code = 1Trace: state = 4Trace: CFtpControlSocket::SendNextCommand()Trace: CFtpControlSocket::TransferSend()Trace: state = 5Trace: CTransferSocket::OnConnectTrace: CTlsSocket::Handshake()Trace: gnutls_session_get_data on primary socket failed: -51Trace: CTlsSocket::ContinueHandshake()Trace: CTlsSocket::OnSend()Trace: CTlsSocket::OnSend()Trace: CTlsSocket::OnRead()Trace: CTlsSocket::ContinueHandshake()Trace: CTlsSocket::OnRead()Trace: CTlsSocket::ContinueHandshake()Trace: Handshake successfulTrace: Cipher: AES-256-CBC, MAC: SHA1Trace: CTlsSocket::OnRead()Trace: CTransferSocket::OnConnectTrace: CTransferSocket::OnReceive(), m_transferMode=0Listing: -rwxrwxrwx 1 owner group 1011 Dec 12 23:05 a.tmpTrace: CTlsSocket::Failure(-9, 0)Error: GnuTLS error -9: A TLS packet with unexpected length was received.Status: Server did not properly shut down TLS connectionError: Could not read from transfer socket: ECONNABORTED - Connection abortedTrace: CTransferSocket::TransferEnd(3)Trace: CFtpControlSocket::OnReceive()Response: 226 Closing data connection, sent 70 bytesTrace: CFtpControlSocket::TransferParseResponse()Trace: code = 2Trace: state = 5Trace: CFtpControlSocket::SendNextCommand()Trace: CFtpControlSocket::TransferSend()Trace: state = 8Trace: CFtpControlSocket::TransferEnd()Trace: CFtpControlSocket::ResetOperation(2)Trace: CControlSocket::ResetOperation(2)Trace: CFtpControlSocket::ParseSubcommandResult(2)Trace: CFtpControlSocket::ListSubcommandResult()Trace: state = 3Trace: CFtpControlSocket::ResetOperation(2)Trace: CControlSocket::ResetOperation(2)Error: Failed to retrieve directory listingTrace: CFileZillaEnginePrivate::ResetOperation(2) --> LIST150 Opening ASCII mode data connection for file list===>START SSL connect on DATAftp: SSL_connect DATA error 0 - error:00000000:lib(0):func(0):reason(0)226 Closing data connection, sent 70 bytes421 Service not available, remote server has closed connection",Does EventMachine issue close_notify on close_connection if tls_start was run?
Ruby on Rails: heroku db:pull," I have an application that uses postgres in development and production. I recently pushed to heroku and everything was working fine. I was able to pull the database from heroku and push back up with no problem. Today however, I tried to pull the DB down from heroku and I received this error So I run heroku logs after: I have no idea where to look for a solution, so hopefully someone can help. I've just started learning rails so please remember this when trying to help.Thanks in advance.EDIT:I have tried all sorts: reinstalling heroku, taps.remade my app and pushing to heroku.reinstalled postgres.Nothing seems to work. Driving me mad! <code>  heroku db:pullLoaded Taps v0.3.24 Auto-detected local database: postgres://postgres:a@127.0.0.1/app_development?encoding=utf8 Warning: Data in the database 'postgres://postgres:a@127.0.0.1/app_development?encoding=utf8' will be overwritten and will not be recoverable. ! WARNING: Destructive Action ! This command will affect the app: app ! To proceed, type ""app"" or re-run this command with --confirm app > appReceiving schemaUnable to fetch tables information from http://heroku:osui59a24am79x@taps19.heroku.com. Please check the server log. james@james-Vostro-3550:~/Desktop/app$ heroku logs2012-09-25T10:08:32+00:00 app[web.1]: Started GET ""/users"" for X.X.X.X at 2012-09-25 10:08:32 +00002012-09-25T10:08:32+00:00 heroku[router]: GET app.herokuapp.com/users? dyno=web.1 queue=0 wait=0ms service=38ms status=200 bytes=107272012-09-25T10:08:32+00:00 app[web.1]: 2012-09-25T10:08:32+00:00 app[web.1]: 2012-09-25T10:08:32+00:00 app[web.1]: Started GET ""/application.css"" for X.X.X.X at 2012-09-25 10:08:32 +00002012-09-25T10:08:32+00:00 app[web.1]: 2012-09-25T10:08:32+00:00 app[web.1]: vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.6/lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'2012-09-25T10:08:32+00:00 app[web.1]: ActionController::RoutingError (No route matches [GET] ""/application.css""):2012-09-25T10:08:32+00:00 app[web.1]: vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.6/lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'2012-09-25T10:08:32+00:00 app[web.1]: vendor/bundle/ruby/1.9.1/gems/railties-3.2.6/lib/rails/rack/logger.rb:26:in `call_app'2012-09-25T10:08:32+00:00 app[web.1]: vendor/bundle/ruby/1.9.1/gems/railties-3.2.6/lib/rails/rack/logger.rb:16:in `call'2012-09-25T10:08:32+00:00 app[web.1]: vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.6/lib/action_dispatch/middleware/request_id.rb:22:in `call'2012-09-25T10:08:32+00:00 app[web.1]: vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/methodoverride.rb:21:in `call'2012-09-25T10:08:32+00:00 app[web.1]: vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/runtime.rb:17:in `call'2012-09-25T10:08:32+00:00 app[web.1]: vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.6/lib/active_support/cache/strategy/local_cache.rb:72:in `call'2012-09-25T10:08:32+00:00 heroku[router]: GET app.herokuapp.com/application.css dyno=web.1 queue=0 wait=0ms service=6ms status=404 bytes=7282012-09-25T10:08:32+00:00 app[web.1]: vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/lock.rb:15:in `call'2012-09-25T10:08:32+00:00 app[web.1]: vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.6/lib/action_dispatch/middleware/static.rb:62:in `call'2012-09-25T10:08:32+00:00 app[web.1]: vendor/bundle/ruby/1.9.1/gems/rack-cache-1.2/lib/rack/cache/context.rb:136:in `forward'2012-09-25T10:08:32+00:00 app[web.1]: vendor/bundle/ruby/1.9.1/gems/rack-cache-1.2/lib/rack/cache/context.rb:245:in `fetch'2012-09-25T10:08:32+00:00 app[web.1]: vendor/bundle/ruby/1.9.1/gems/rack-cache-1.2/lib/rack/cache/context.rb:185:in `lookup'2012-09-25T10:08:32+00:00 app[web.1]: vendor/bundle/ruby/1.9.1/gems/rack-cache-1.2/lib/rack/cache/context.rb:66:in `call!'2012-09-25T10:08:32+00:00 app[web.1]: vendor/bundle/ruby/1.9.1/gems/rack-cache-1.2/lib/rack/cache/context.rb:51:in `call'2012-09-25T10:08:32+00:00 app[web.1]: vendor/bundle/ruby/1.9.1/gems/railties-3.2.6/lib/rails/engine.rb:479:in `call'2012-09-25T10:08:32+00:00 app[web.1]: vendor/bundle/ruby/1.9.1/gems/railties-3.2.6/lib/rails/application.rb:220:in `call'2012-09-25T10:08:32+00:00 app[web.1]: vendor/bundle/ruby/1.9.1/gems/railties-3.2.6/lib/rails/railtie/configurable.rb:30:in `method_missing'2012-09-25T10:08:32+00:00 app[web.1]: vendor/bundle/ruby/1.9.1/gems/thin-1.4.1/lib/thin/connection.rb:78:in `catch'2012-09-25T10:08:32+00:00 app[web.1]: vendor/bundle/ruby/1.9.1/gems/thin-1.4.1/lib/thin/connection.rb:80:in `block in pre_process'2012-09-25T10:08:32+00:00 app[web.1]: vendor/bundle/ruby/1.9.1/gems/thin-1.4.1/lib/thin/connection.rb:53:in `process'2012-09-25T10:08:32+00:00 app[web.1]: vendor/bundle/ruby/1.9.1/gems/thin-1.4.1/lib/thin/connection.rb:78:in `pre_process'2012-09-25T10:08:32+00:00 app[web.1]: vendor/bundle/ruby/1.9.1/gems/thin-1.4.1/lib/thin/connection.rb:38:in `receive_data'2012-09-25T10:08:32+00:00 app[web.1]: vendor/bundle/ruby/1.9.1/gems/eventmachine-0.12.10/lib/eventmachine.rb:256:in `run_machine'2012-09-25T10:08:32+00:00 app[web.1]: vendor/bundle/ruby/1.9.1/gems/eventmachine-0.12.10/lib/eventmachine.rb:256:in `run'2012-09-25T10:08:32+00:00 app[web.1]: vendor/bundle/ruby/1.9.1/gems/thin-1.4.1/lib/thin/backends/base.rb:63:in `start'2012-09-25T10:08:32+00:00 app[web.1]: vendor/bundle/ruby/1.9.1/gems/thin-1.4.1/lib/thin/server.rb:159:in `start'2012-09-25T10:08:32+00:00 app[web.1]: vendor/bundle/ruby/1.9.1/gems/thin-1.4.1/lib/thin/controllers/controller.rb:86:in `start'2012-09-25T10:08:32+00:00 app[web.1]: vendor/bundle/ruby/1.9.1/gems/thin-1.4.1/lib/thin/runner.rb:185:in `run_command'2012-09-25T10:08:32+00:00 app[web.1]: vendor/bundle/ruby/1.9.1/gems/thin-1.4.1/lib/thin/runner.rb:151:in `run!'2012-09-25T10:08:32+00:00 app[web.1]: vendor/bundle/ruby/1.9.1/gems/thin-1.4.1/bin/thin:6:in `<top (required)>'2012-09-25T10:08:32+00:00 app[web.1]: vendor/bundle/ruby/1.9.1/bin/thin:19:in `load'2012-09-25T10:08:32+00:00 app[web.1]: vendor/bundle/ruby/1.9.1/bin/thin:19:in `<main>'2012-09-25T10:08:32+00:00 app[web.1]: 2012-09-25T10:08:32+00:00 app[web.1]: 2012-09-25T10:08:32+00:00 heroku[router]: GET app.herokuapp.com/assets/admin-e0756c8b3550bb800d5f58837c42ec80.css dyno=web.1 queue=0 wait=0ms service=7ms status=200 bytes=19412012-09-25T10:08:32+00:00 app[web.1]: 2012-09-25T10:08:32+00:00 app[web.1]: 2012-09-25T10:08:32+00:00 app[web.1]: Started GET ""/assets/admin-e0756c8b3550bb800d5f58837c42ec80.css"" for X.X.X.X at 2012-09-25 10:08:32 +00002012-09-25T10:08:41+00:00 app[web.1]: 2012-09-25T10:08:41+00:00 app[web.1]: 2012-09-25T10:08:41+00:00 app[web.1]: Started GET ""/projects"" for X.X.X.X at 2012-09-25 10:08:41 +00002012-09-25T10:08:41+00:00 heroku[router]: GET app.herokuapp.com/projects dyno=web.1 queue=0 wait=0ms service=31ms status=304 bytes=02012-09-25T10:08:41+00:00 app[web.1]: Started GET ""/application.css"" for X.X.X.X at 2012-09-25 10:08:41 +00002012-09-25T10:08:41+00:00 app[web.1]: 2012-09-25T10:08:41+00:00 app[web.1]: 2012-09-25T10:08:41+00:00 app[web.1]: vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.6/lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'2012-09-25T10:08:41+00:00 app[web.1]: vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.6/lib/action_dispatch/middleware/request_id.rb:22:in `call'2012-09-25T10:08:41+00:00 app[web.1]: vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/lock.rb:15:in `call'2012-09-25T10:08:41+00:00 app[web.1]: 2012-09-25T10:08:41+00:00 app[web.1]: vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.6/lib/active_support/cache/strategy/local_cache.rb:72:in `call'2012-09-25T10:08:41+00:00 app[web.1]: ActionController::RoutingError (No route matches [GET] ""/application.css""):2012-09-25T10:08:41+00:00 app[web.1]: vendor/bundle/ruby/1.9.1/gems/rack-cache-1.2/lib/rack/cache/context.rb:185:in `lookup'2012-09-25T10:08:41+00:00 app[web.1]: vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.6/lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'2012-09-25T10:08:41+00:00 app[web.1]: vendor/bundle/ruby/1.9.1/gems/rack-cache-1.2/lib/rack/cache/context.rb:51:in `call'2012-09-25T10:08:41+00:00 app[web.1]: vendor/bundle/ruby/1.9.1/gems/railties-3.2.6/lib/rails/rack/logger.rb:26:in `call_app'2012-09-25T10:08:41+00:00 app[web.1]: vendor/bundle/ruby/1.9.1/gems/rack-cache-1.2/lib/rack/cache/context.rb:245:in `fetch'2012-09-25T10:08:41+00:00 app[web.1]: vendor/bundle/ruby/1.9.1/gems/railties-3.2.6/lib/rails/rack/logger.rb:16:in `call'2012-09-25T10:08:41+00:00 app[web.1]: vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/runtime.rb:17:in `call'2012-09-25T10:08:41+00:00 app[web.1]: vendor/bundle/ruby/1.9.1/gems/railties-3.2.6/lib/rails/railtie/configurable.rb:30:in `method_missing'2012-09-25T10:08:41+00:00 app[web.1]: vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/methodoverride.rb:21:in `call'2012-09-25T10:08:41+00:00 app[web.1]: vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.6/lib/action_dispatch/middleware/static.rb:62:in `call'2012-09-25T10:08:41+00:00 app[web.1]: vendor/bundle/ruby/1.9.1/gems/rack-cache-1.2/lib/rack/cache/context.rb:136:in `forward'2012-09-25T10:08:41+00:00 app[web.1]: vendor/bundle/ruby/1.9.1/gems/railties-3.2.6/lib/rails/application.rb:220:in `call'2012-09-25T10:08:41+00:00 app[web.1]: vendor/bundle/ruby/1.9.1/gems/thin-1.4.1/lib/thin/server.rb:159:in `start'2012-09-25T10:08:41+00:00 app[web.1]: vendor/bundle/ruby/1.9.1/gems/thin-1.4.1/lib/thin/connection.rb:78:in `catch'2012-09-25T10:08:41+00:00 app[web.1]: vendor/bundle/ruby/1.9.1/gems/railties-3.2.6/lib/rails/engine.rb:479:in `call'2012-09-25T10:08:41+00:00 app[web.1]: vendor/bundle/ruby/1.9.1/gems/eventmachine-0.12.10/lib/eventmachine.rb:256:in `run_machine'2012-09-25T10:08:41+00:00 app[web.1]: vendor/bundle/ruby/1.9.1/gems/rack-cache-1.2/lib/rack/cache/context.rb:66:in `call!'2012-09-25T10:08:41+00:00 app[web.1]: vendor/bundle/ruby/1.9.1/gems/thin-1.4.1/lib/thin/connection.rb:80:in `block in pre_process'2012-09-25T10:08:41+00:00 app[web.1]: vendor/bundle/ruby/1.9.1/gems/thin-1.4.1/lib/thin/connection.rb:53:in `process'2012-09-25T10:08:41+00:00 app[web.1]: vendor/bundle/ruby/1.9.1/gems/thin-1.4.1/lib/thin/backends/base.rb:63:in `start'2012-09-25T10:08:41+00:00 app[web.1]: vendor/bundle/ruby/1.9.1/gems/thin-1.4.1/lib/thin/connection.rb:78:in `pre_process'2012-09-25T10:08:41+00:00 app[web.1]: vendor/bundle/ruby/1.9.1/gems/eventmachine-0.12.10/lib/eventmachine.rb:256:in `run'2012-09-25T10:08:41+00:00 app[web.1]: vendor/bundle/ruby/1.9.1/gems/thin-1.4.1/lib/thin/connection.rb:38:in `receive_data'2012-09-25T10:08:41+00:00 app[web.1]: vendor/bundle/ruby/1.9.1/gems/thin-1.4.1/lib/thin/runner.rb:151:in `run!'2012-09-25T10:08:41+00:00 app[web.1]: vendor/bundle/ruby/1.9.1/gems/thin-1.4.1/lib/thin/runner.rb:185:in `run_command'2012-09-25T10:08:41+00:00 app[web.1]: 2012-09-25T10:08:41+00:00 app[web.1]: vendor/bundle/ruby/1.9.1/bin/thin:19:in `<main>'2012-09-25T10:08:41+00:00 app[web.1]: vendor/bundle/ruby/1.9.1/gems/thin-1.4.1/lib/thin/controllers/controller.rb:86:in `start'2012-09-25T10:08:41+00:00 app[web.1]: vendor/bundle/ruby/1.9.1/gems/thin-1.4.1/bin/thin:6:in `<top (required)>'2012-09-25T10:08:41+00:00 app[web.1]: vendor/bundle/ruby/1.9.1/bin/thin:19:in `load'2012-09-25T10:08:41+00:00 app[web.1]: 2012-09-25T10:08:41+00:00 heroku[router]: GET app.herokuapp.com/application.css dyno=web.1 queue=0 wait=0ms service=9ms status=404 bytes=7282012-09-25T10:11:00+00:00 heroku[run.1]: Awaiting client2012-09-25T10:11:00+00:00 heroku[run.1]: Starting process with command `bundle exec rake db:migrate`2012-09-25T10:11:00+00:00 heroku[run.1]: State changed from starting to up2012-09-25T10:11:06+00:00 heroku[run.1]: Client connection closed. Sending SIGHUP to all processes2012-09-25T10:11:07+00:00 heroku[run.1]: Process exited with status 12012-09-25T10:11:07+00:00 heroku[run.1]: State changed from up to complete2012-09-25T10:08:23+00:00 heroku[web.1]: State changed from starting to up2012-09-25T10:08:01+00:00 heroku[web.1]: Unidling2012-09-25T10:08:01+00:00 heroku[web.1]: State changed from down to starting",Unable to fetch tables information when running heroku db:pull
What's the easiest way to send a message through outlook with ruby?," My work requires me to automate e-mail generation for certain tests. I've been looking around but havent been able to find a reasonable solution that can be implemented quickly. It needs to be in outlook and not some other mail server as we have some strange authentication rules in place, and we need the option of saving drafts instead of just sending the message. Apparently win32ole can do this, but I can't find any reasonably simple examples.  <code> ",What's the easiest way to send a message through Outlook with Ruby?
Passing Post Data to other pages in Sinatra," This seems to work fine:views/index.haml: app.rb: views/review.rb However, when I try to send my post-data to the same view on a different URL I get an error, or in other words:app.rb: The data is not going through, but no error is raised.How do I send the post-data across pages like this? Ideally, I do not want to create a database. <code>  %form{:method => 'POST' :action => '/'} %label{:for => 'name'} Name: %input{:type => 'text, :value => @values[:name] || """"} %input{:type => 'submit'} post '/' do @values = params haml :reviewend Hello #{params[:name]}! post '/' do @values = params redirect '/review'endget '/review' do @values = params haml :reviewend",Passing post data to other pages in Sinatra
"Ruby: undefined method `-' for ""100"":String"," This Ruby code: threw an error: Does Ruby not auto-convert strings to numbers when performing math operations on them? <code>  income = ""100""bills = ""52""puts income - bills ./to_f.rb:6: undefined method `-' for ""100"":String (NoMethodError)","Undefined method `-' for ""100"":String"
How does instance variables in rspec work?," Here is a bit of code from M Hartl's Ruby on Rails Tutorial. Can anyone explain why an instance variable (@user) is necessary and why not use a local variable. Also, since instance variables are supposed to be the variables in the instance of a class, which class is @user instantiated from?  <code>  require 'spec_helper'describe User do before { @user = User.new(name: ""Example User"", email: ""user@example.com"") } subject { @user } it { should respond_to(:name) } it { should respond_to(:email) }end",How do instance variables in rspec work?
How to split a string with spaces in Ruby?," Insert spaces into a string using RubyEx: I have ""LoremIpsumDolorSitAmet"", I want to get this ""Lorem Ipsum Dolor Sit Amet"" <code> ",Insert spaces into a string using Ruby
One-liner Combination in Ruby," I know how to create permutations of an array of values. For example: which results in the following six permutations: But this result is missing the three permutations, which are combinations of the same value, i.e.: How can I get all the permutations, including repeated ones above? <code>  [*1..3].permutation(2) [1, 2][1, 3][2, 1][2, 3][3, 1][3, 2] [1, 1][2, 2][3, 3]",Repeated Permutation
One-liner Repeated Permutation in Ruby," I know how to create permutations of an array of values. For example: which results in the following six permutations: But this result is missing the three permutations, which are combinations of the same value, i.e.: How can I get all the permutations, including repeated ones above? <code>  [*1..3].permutation(2) [1, 2][1, 3][2, 1][2, 3][3, 1][3, 2] [1, 1][2, 2][3, 3]",Repeated Permutation
Ruby to_s conversion to binary," If I run the following code, the first two lines return what I expect. The third, however, returns a binary representation of 2. I know that passing in 2 when calling to_s will convert my output to binary, but why is to_s ignoring the * in the third case? I'm running Ruby 1.9.2 if that makes any difference. <code>  2.to_s # => ""2""2.to_s * 2 # => ""22""2.to_s *2 # => ""10"" ",Ruby to_s conversion to binary (Splat operator in argument)
Splat opearator in argument," If I run the following code, the first two lines return what I expect. The third, however, returns a binary representation of 2. I know that passing in 2 when calling to_s will convert my output to binary, but why is to_s ignoring the * in the third case? I'm running Ruby 1.9.2 if that makes any difference. <code>  2.to_s # => ""2""2.to_s * 2 # => ""22""2.to_s *2 # => ""10"" ",Ruby to_s conversion to binary (Splat operator in argument)
Ruby to_s conversion to binary (Splat opearator in argument)," If I run the following code, the first two lines return what I expect. The third, however, returns a binary representation of 2. I know that passing in 2 when calling to_s will convert my output to binary, but why is to_s ignoring the * in the third case? I'm running Ruby 1.9.2 if that makes any difference. <code>  2.to_s # => ""2""2.to_s * 2 # => ""22""2.to_s *2 # => ""10"" ",Ruby to_s conversion to binary (Splat operator in argument)
Add class if ... (in 1 line)," I want to add a class to a link_to only if a statement is true. The problem that the IF statement affects the whole line and not just the :class part.I know i can get it done with IF ELSE, but is it possible to do it in 1 line ? <code>  <%= link_to product.name, product, :class => ""last"" if product == @products.last %>",Add class inline if ... (in 1 line)
Remove an element and put it in the front of an array in Ruby," Even coming from javascript this looks atrocious to me: Is there a more legible way placing an element to the front of an array?Edit my actual code: <code>  irb>> a = ['a', 'b', 'c']=> [""a"", ""b"", ""c""]>> a.unshift(a.delete('c'))=> [""c"", ""a"", ""b""] if @admin_users.include?(current_user) @admin_users.unshift(@admin_users.delete(current_user))end",Reposition an element to the front of an array in Ruby
Best way to start Sidekiq with rails server in development environment, I am using Sidekiq for some of my background processes. Currently what I do is:start bundle exec rails s on one terminal and then start bundle exec sidekiq on a different terminal so that the sidekiq starts itself and look for jobs to process.What I want is:As soon as i start bundle exec rails s it should also start the sidekiq bundle exec sidekiq. How can i integrate it in just Development environment ?? <code> ,Starting Sidekiq with rails server in development environment
Execute methods of both included modules," I have two modules with the same method name. When I include both modules in some class, only the method of the last module is executed. I need instead both to be executed when I initialize the class: Is it doable? <code>  class MyClass include FirstModule include SecondModule def initialize foo # foo is contained in both modules but only the one in SecondModules is executed endend",Execute methods with the same name of multiple modules included
Is there a convention on memoization on a method with lot's of code?," I want to avoid reevaluation of a value in method call. Untill now, I was doing this: But it ends up quite ugly. In some code, I saw something like the following: I don't like the bang (!) at the end, so I came up with this: Is prepending with an underscore a good convention?Is there some other convention for memoized/non-memoized pairs of methods?Is there some convention to memoize multi-line methods? <code>  def some_method @some_method ||= begin # lot's of code endend def some_method @some_method ||= some_method!endprivatedef some_method! # lot's of codeend def some_method @some_method ||= _some_methodendprivatedef _some_method # lot's of codeend",Is there a convention for memoization in a method call?
Is there a convention for memorization in method call?," I want to avoid reevaluation of a value in method call. Untill now, I was doing this: But it ends up quite ugly. In some code, I saw something like the following: I don't like the bang (!) at the end, so I came up with this: Is prepending with an underscore a good convention?Is there some other convention for memoized/non-memoized pairs of methods?Is there some convention to memoize multi-line methods? <code>  def some_method @some_method ||= begin # lot's of code endend def some_method @some_method ||= some_method!endprivatedef some_method! # lot's of codeend def some_method @some_method ||= _some_methodendprivatedef _some_method # lot's of codeend",Is there a convention for memoization in a method call?
How can I cache everything in /public for a year when using Sinatra?," I'm using the latest Sinatra and I'm hosting on Heroku. Is there a way I can set the caching headers for my static assets served from the /public directory?Sinatra serves files from the /public directory before checking any routes that have been defined, so I cant just the cache_control method inside a route. The /public directory contains the CSS and JavaScript of my app. I dont want the browser to download those files every single time, since they won't change often. <code> ",How can I control caching for static assets when using Sinatra?
after save callback funcatinality on object?," If I do the following: If I use after_save What will happen when I do this?I believe it should save the value because of the 'after_save' callback.  <code>  @user.name = ""John"" @user.url = ""www.john.com""@user.save @user.url = ""www.johnseena.com""@user.save",How does after_save work when saving an object
after save callback functionality on object?," If I do the following: If I use after_save What will happen when I do this?I believe it should save the value because of the 'after_save' callback.  <code>  @user.name = ""John"" @user.url = ""www.john.com""@user.save @user.url = ""www.johnseena.com""@user.save",How does after_save work when saving an object
"Using vim, is there a command to have the text automatically line-wrapped?"," CONTEXT: Part of a job I'm doing involves pasting paragraphs of text from a word doc into a ruby file.PROBLEM: These paragraphs are getting pasted in as a single very long line of text and I have to manually insert newlines to make the lines of reasonable length. SOLUTION: Is there a way to make the pasting function ""aware"" of reasonable margin limits and wrap the text when I paste it in? <code> ","Using vim, is there a command to have pasted text automatically line-wrapped?"
Concise three-way comparison in ruby, What's the most concise way to ensure three variables are all equal in ruby? For example <code>  dog = 'animal'cat = 'animal'chicken = 'animal'shoe = 'clothing'# Something like this...which doesn't workdog == cat == chicken # true dog == cat == shoe # false,Three-way comparison in ruby
Get HTTP request in Ruby," I'm sure this is easy, but I've searched pretty extensively and been unable to find an answer. I'm using the Net::Http library in Ruby and am trying to figure out how I show the complete body of an HTTP GET request? Something like the following: I am looking for the raw REQUEST , not the RESPONSE to be captured. <code>  GET /really_long_path/index.html?q=foo&s=bar HTTP\1.1Cookie: some_cookie;Host: remote_host.example.com",Show headers and body text of an HTTP request in Ruby
Is there a quick way to find missing ends in Ruby?," syntax error, unexpected $end, expecting keyword_endWeve all been there! Assuming enough code changed that a quick glance at git diff or the like doesnt make it obvious, is there an easy way to find that missing end (short of switching to an indentation-based language like Python)?FWIW, I use Sublime Text 2 as my editor. <code> ",Is there a quick way to find missing ends in Ruby?
"Is there a quick way to find missing ""end""s in Ruby?"," syntax error, unexpected $end, expecting keyword_endWeve all been there! Assuming enough code changed that a quick glance at git diff or the like doesnt make it obvious, is there an easy way to find that missing end (short of switching to an indentation-based language like Python)?FWIW, I use Sublime Text 2 as my editor. <code> ",Is there a quick way to find missing ends in Ruby?
"Rails, define root to namespace"," I've got 2 controllers: and my routes.rb looks like this: but when i visit /mobile, it's anyway rendering index page of first controller, also tried this: but it's giving me error: uninitialized constant Mobile::MobileI want to render the index page of second controller, how can i do that ?EditBy entering /mobile i want to render files located here: But it's rending files here: <code>  app/ /controllers posts_controllers.rb /mobile posts_controllers.rb root :to => ""posts#index""resources :postsnamespace :mobile do root :to => ""posts#index"" resources :postsend namespace :mobile do root :to => ""mobile/posts#index"" resources :postsend app/ views/ /mobile /posts index.html.erb app/ views/ /posts index.html.erb",Rails route: define root to namespace
Ruby remove values in hash not in array," I can't find a way to remove keys from a hash that are not in a given array of key names. I read that I can use except or slice, but how can I feed them a list of the key names I want to keep? So for example, if I had this hash: and I only wanted to keep, say, :title, :media and :localeLanguage, how could I keep only those values whose key names I specify? <code>  entry = {:title=>""casablanca"", :media=>""dvd"", :localeLanguage=>""en"", :imdb=>"""", :freebase=>"""", :originalTitle => 'casablanca', :season=> '1', :episode => '3'}",Remove keys in hash not in array
Ruby String length method behavior issue, I have a website thats running on ruby 1.8.7 . I have a validation on an incoming post that checks to make sure that we allow upto max of 12000 characters. The spaces are counted as characters and tab and carriage returns are stripped off before the post is subjected to the validation.Here is the post that is subjected to validation http://pastie.org/5047582In ruby 1.9 the string length shows up as 11909 which is correct. But when I check the length on ruby 1.8.7 is turns out to be 12044.I used codepad.org to run this ruby code which gives me http://codepad.org/OxgSuKGZ ( which outputs the length as 12044 which is wrong) but when i run this same code in the console at codeacademy.org the string length is 11909.Can anybody explain me why this is happening ???Thanks <code> ,String length difference between ruby 1.8 and 1.9
Counting in view (Rails)," I've got a list of items I'm looping in an each in my show view. This is all perfectly fine. However, I would like to get a number infront of each item which increments with every loop ( i = 0, i++ you know the drill ).Now, how can i do this in Rails? This is what I get by now: <code>  <% i = 0 %><% @trip.triplocations.each do |tl| %> <article id=""<%= dom_id(tl) %>""> <strong> <%= tl.title %> </strong> <p> <%= tl.description %> </p> </article><% end %>",Counting in View Rails
Rails 3.2 CRUD : .where with 'or' conditionnal," With ruby on rails, I want to do something like: What is the most efficient/clean way to do this? <code>  @tasks = Task.where(:def => true || :house_id => current_user.house_id)",Rails 3.2 CRUD : .where with 'or' conditional
get the first key and value pair from a hash table in ruby," I'm trying to get the first key and value key from a hash table in ruby. I don't know the key values of the hash because it is passed to the method. I cant find anywhere online how to find the first key/value as a separate hash table. I think hash[0] will just try to find an element with a name 0 it just returns nil when I run the code. I know I can find the key name and the value and then create a new hash from them but i wonder if there is an easier way to do this so I get a hash right away. here is my code: This gets me the correct result the problem is I don't understand why it's -1 instead of zero...And i was hoping there was a better way to get the first key/value pair of a hash table instead of creating new hash table with the key and value you retrieved from the previous table.  <code>  def rps_game_winner(game)rock_in_hash = game.invert['R']paper_in_hash = game.invert['P']scissors_in_hash = game.invert['S']if(rock_in_hash) if(paper_in_hash) return paper_in_hash; elsif(scissors_in_hash) return rock_in_hash end elsif(paper_in_hash) if(rock_in_hash) return paper_in_hash elsif(scissors_in_hash) return scissors_in_hash end end key = game.keys[-1] value = game.values[-1] winner = {key => value} return winner endgame_one = { ""Bob"" => 'P', ""Jim"" => 'P' }puts rps_game_winner(game_one)",How to get the first key and value pair from a hash table in Ruby
get the first key and value pair from a hash table in ruby (wierd results)," I'm trying to get the first key and value key from a hash table in ruby. I don't know the key values of the hash because it is passed to the method. I cant find anywhere online how to find the first key/value as a separate hash table. I think hash[0] will just try to find an element with a name 0 it just returns nil when I run the code. I know I can find the key name and the value and then create a new hash from them but i wonder if there is an easier way to do this so I get a hash right away. here is my code: This gets me the correct result the problem is I don't understand why it's -1 instead of zero...And i was hoping there was a better way to get the first key/value pair of a hash table instead of creating new hash table with the key and value you retrieved from the previous table.  <code>  def rps_game_winner(game)rock_in_hash = game.invert['R']paper_in_hash = game.invert['P']scissors_in_hash = game.invert['S']if(rock_in_hash) if(paper_in_hash) return paper_in_hash; elsif(scissors_in_hash) return rock_in_hash end elsif(paper_in_hash) if(rock_in_hash) return paper_in_hash elsif(scissors_in_hash) return scissors_in_hash end end key = game.keys[-1] value = game.values[-1] winner = {key => value} return winner endgame_one = { ""Bob"" => 'P', ""Jim"" => 'P' }puts rps_game_winner(game_one)",How to get the first key and value pair from a hash table in Ruby
get the first key and value pair from a hash table in ruby (weird results)," I'm trying to get the first key and value key from a hash table in ruby. I don't know the key values of the hash because it is passed to the method. I cant find anywhere online how to find the first key/value as a separate hash table. I think hash[0] will just try to find an element with a name 0 it just returns nil when I run the code. I know I can find the key name and the value and then create a new hash from them but i wonder if there is an easier way to do this so I get a hash right away. here is my code: This gets me the correct result the problem is I don't understand why it's -1 instead of zero...And i was hoping there was a better way to get the first key/value pair of a hash table instead of creating new hash table with the key and value you retrieved from the previous table.  <code>  def rps_game_winner(game)rock_in_hash = game.invert['R']paper_in_hash = game.invert['P']scissors_in_hash = game.invert['S']if(rock_in_hash) if(paper_in_hash) return paper_in_hash; elsif(scissors_in_hash) return rock_in_hash end elsif(paper_in_hash) if(rock_in_hash) return paper_in_hash elsif(scissors_in_hash) return scissors_in_hash end end key = game.keys[-1] value = game.values[-1] winner = {key => value} return winner endgame_one = { ""Bob"" => 'P', ""Jim"" => 'P' }puts rps_game_winner(game_one)",How to get the first key and value pair from a hash table in Ruby
Gem needed for HTTPS Request in Ruby," Is there a gem or library for HTTPS Requests in Ruby? What is it called and can you provide some example usage?What I am trying to do is open a page, parse some text from it, and then output it. <code> ",HTTPS Requests in Ruby
send method in ruby," I just read about what send does in Ruby and I'm still confused when looking at this code (it's from a quiz but its past due date anyways) I understand that the first line assigns an array to xthen I don't understand what :[] = ,0,2 does at all and i dont understand why send is needed thereI dont get what x.[](1) does and x.send(:[],2) do on the last line I'm really confused and I just cant find this information online. I found the what send does but I'm still a little bit confused and a lot of bit confused about this code as a whole. <code>  x = [1,2,3]x.send :[]=,0,2x[0] + x.[](1) + x.send(:[],2)",send method in Ruby
getting eventmachine gem to compile on OSX Lion 10.8.2 with xcode 4.5.1," I looked everywhere I can find but can't seem to find a solution to this. I'm using Xcode 4.5.1 on Lion 10.8.2, and am trying to run bundle for a Rails project and it keeps jamming up on this. I'm using the Thin gem for Heroku. For now I'm having to do without Thin. Does anyone have a solution? <code>  Bolanos@Jeremys-Mac-mini -1.9.3 fishfarm $ sudo gem install eventmachinePassword:Building native extensions. This could take a while...ERROR: Error installing eventmachine: ERROR: Failed to build gem native extension. /Users/Bolanos/.rvm/rubies/ruby-1.9.3-p194/bin/ruby extconf.rbchecking for rb_trap_immediate in ruby.h,rubysig.h... nochecking for rb_thread_blocking_region()... yeschecking for inotify_init() in sys/inotify.h... nochecking for __NR_inotify_init in sys/syscall.h... nochecking for writev() in sys/uio.h... yeschecking for rb_thread_check_ints()... yeschecking for rb_time_new()... yeschecking for sys/event.h... yeschecking for sys/queue.h... yescreating Makefilemakecompiling binder.cppmake: g++-4.2: No such file or directorymake: *** [binder.o] Error 1Gem files will remain installed in /Users/Bolanos/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/gems/1.9.1/gems/eventmachine-1.0.0 for inspection.Results logged to /Users/Bolanos/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/gems/1.9.1/gems/eventmachine-1.0.0/ext/gem_make.out",How to get the EventMachine gem to compile on OSX Lion 10.8.2 with Xcode 4.5.1
Ruby - How to check all classes under or using a class?," Possible Duplicate: Look up all descendants of a class in Ruby So, let's say that we have: How do I check what subclasses LivingBeing has? I know that we have Klass.ancestors but what's the method to see the opposite of ancestors? <code>  class LivingBeing class Animal end class Bacteria end class Virus endendclass Fungi < LivingBeingend",How to check all classes under or using a class?
About private constants," Starting in Ruby 1.9.3, we can create private constants: Is there a good documentation about what this does? Is there a way to get the names of only private constants similar to calling constants <code>  module M class C; end private_constant :Cend",What does Module.private_constant do? Is there a way to list only private constants?
Ruby - Undefined method 'each' for Student:Class," I want to load a file, split its content into arrays, and have the class apply to the content. I'm getting undefined method 'each' for Student:Class (NoMethodError)on line 28, which is the puts show() line. Any clues on how I can get further on this? <code>  class Student def initialize( name, grade ) @name = name @grade = grade @grade = @grade.to_i @newgrade = @grade*1.45 end def show() return ""#{@name} ,#{@grade} , #{@newgrade}"" endend# Opening the file into an arrayarr = File.open(""exam_results.txt"", ""r+"")allStudents = Array.newfor a in arr b = a.split("","") name = b[0] score = b[1] allStudents << Student.new(@name, @grade)endfor i in Student puts show()end",Undefined method 'each' for Student:Class
Ruby gem - how to make it executable," I can use gems like RSpec or Rails or Pry by calling their respective gem names, e.g. rspec, rails, pry on the commandline. How can I achieve this with gems I create? I'm using bundler for the basic gem creation. <code> ",How to make a Ruby gem executable
rails form_for label," I want to display a label in form_for: This generates the label ""Name"", but I want it to be ""Your Name"". How can I change it? <code>  <div class=""field""> <%= f.label :name %><br /> <%= f.text_field :name %></div>",Rails: Custom text for rails form_for label
Custom text for rails form_for label," I want to display a label in form_for: This generates the label ""Name"", but I want it to be ""Your Name"". How can I change it? <code>  <div class=""field""> <%= f.label :name %><br /> <%= f.text_field :name %></div>",Rails: Custom text for rails form_for label
Testing responce cookie with Rspec v.1," When I login to my app the server sends me back cookies(credentials and some app's cookie): ...and then redirects to the home page;Cookies include some flags: e.g. httpOnly, Secure, etc.How can I test whether cookies do include those flags with Rspec?At least where can I find those cookies? <code>  Response sent 170 bytes of Cookie data: Set-Cookie: user_credentials=val; path=/; HttpOnly; SecureResponse sent 554 bytes of Cookie data: Set-Cookie: _app_session=otherVal; path=/; HttpOnly; Secure it ""should generate cookies with proper flags"" do params = Factory.attributes_for(:user, :username => ""uname"", :password => ""upass"" ) # login post 'create', params response.should redirect_to home_url # => pass puts ""response cookie = #{response.cookies.inspect}"" # => {} // no cookies in response, why?end",Testing Response cookie with Rspec v.1
Rails: Loop through array with step," I want to look at every n-th elements in an array. In C++, I'd do this: I want to do the same in Ruby, but can't find a way to ""step"". A while loop could do the job, but I find it distasteful using it for a known size, and expect there to be a better (more Ruby) way of doing this. <code>  for(int x = 0; x<cx; x+=n){ value_i_care_about = array[x]; //do something with the value I care about. }",Looping through an array with step
How the 'case' statement works with constants?," I am using Ruby 1.9.2 and Ruby on Rails 3.2.2. I have the following method: I would like to understand why, in the case statement above, it always runs the else ""part"" when I execute method calls like my_method(Article), my_method(Comment) and so on.How can I solve the issue? Does someone have advice how to handle this? <code>  # Note: The 'class_name' parameter is a constant; that is, it is a model class name.def my_method(class_name) case class_name when Article then make_a_thing when Comment then make_another_thing when ... then ... else raise(""Wrong #{class_name}!"") end end",How does the 'case' statement work with constants?
"ruby: array"".each"" enumerator called with a block can't change array values?"," Ok maybe this is simple but...given this: ..and that I'm trying to change all ""arr"" values to ""bad"" why isn't this working ? Answers suggested that ""v"" is a local variable to the block (a ""copy"" of the array value) and I fully understand that (and never puzzled me before) but then.. why it is working if array elements are objects ? isn't here ""p"" still local to the block here?but then it really affects the objects, how come ? <code>  arr = (""a""..""z"").to_aarr=> [""a"", ""b"", ""c"", ""d"", ""e"", ""f"", ""g"", ""h"", ""i"", ""j"", ""k"", ""l"", ""m"", ""n"", ""o"", ""p"", ""q"", ""r"", ""s"", ""t"", ""u"", ""v"", ""w"", ""x"", ""y"", ""z""] arr.each { |v| v = ""bad"" }arr=> [""a"", ""b"", ""c"", ""d"", ""e"", ""f"", ""g"", ""h"", ""i"", ""j"", ""k"", ""l"", ""m"", ""n"", ""o"", ""p"", ""q"", ""r"", ""s"", ""t"", ""u"", ""v"", ""w"", ""x"", ""y"", ""z""] class Person def initialize @age = 0 end attr_accessor :ageendkid = Person.newman = Person.newarr = [kid, man]arr.each { |p| p.age = 50 }arr[0]=> #<Person:0xf98298 @age=50>",Enumerator `Array#each` 's {block} can't always change array values?
Enumerator `Array#each` can't change array values?," Ok maybe this is simple but...given this: ..and that I'm trying to change all ""arr"" values to ""bad"" why isn't this working ? Answers suggested that ""v"" is a local variable to the block (a ""copy"" of the array value) and I fully understand that (and never puzzled me before) but then.. why it is working if array elements are objects ? isn't here ""p"" still local to the block here?but then it really affects the objects, how come ? <code>  arr = (""a""..""z"").to_aarr=> [""a"", ""b"", ""c"", ""d"", ""e"", ""f"", ""g"", ""h"", ""i"", ""j"", ""k"", ""l"", ""m"", ""n"", ""o"", ""p"", ""q"", ""r"", ""s"", ""t"", ""u"", ""v"", ""w"", ""x"", ""y"", ""z""] arr.each { |v| v = ""bad"" }arr=> [""a"", ""b"", ""c"", ""d"", ""e"", ""f"", ""g"", ""h"", ""i"", ""j"", ""k"", ""l"", ""m"", ""n"", ""o"", ""p"", ""q"", ""r"", ""s"", ""t"", ""u"", ""v"", ""w"", ""x"", ""y"", ""z""] class Person def initialize @age = 0 end attr_accessor :ageendkid = Person.newman = Person.newarr = [kid, man]arr.each { |p| p.age = 50 }arr[0]=> #<Person:0xf98298 @age=50>",Enumerator `Array#each` 's {block} can't always change array values?
Enumerator `Array#each` can't change array values?," Ok maybe this is simple but...given this: ..and that I'm trying to change all ""arr"" values to ""bad"" why isn't this working ? Answers suggested that ""v"" is a local variable to the block (a ""copy"" of the array value) and I fully understand that (and never puzzled me before) but then.. why it is working if array elements are objects ? isn't here ""p"" still local to the block here?but then it really affects the objects, how come ? <code>  arr = (""a""..""z"").to_aarr=> [""a"", ""b"", ""c"", ""d"", ""e"", ""f"", ""g"", ""h"", ""i"", ""j"", ""k"", ""l"", ""m"", ""n"", ""o"", ""p"", ""q"", ""r"", ""s"", ""t"", ""u"", ""v"", ""w"", ""x"", ""y"", ""z""] arr.each { |v| v = ""bad"" }arr=> [""a"", ""b"", ""c"", ""d"", ""e"", ""f"", ""g"", ""h"", ""i"", ""j"", ""k"", ""l"", ""m"", ""n"", ""o"", ""p"", ""q"", ""r"", ""s"", ""t"", ""u"", ""v"", ""w"", ""x"", ""y"", ""z""] class Person def initialize @age = 0 end attr_accessor :ageendkid = Person.newman = Person.newarr = [kid, man]arr.each { |p| p.age = 50 }arr[0]=> #<Person:0xf98298 @age=50>",Enumerator `Array#each` 's {block} can't always change array values?
Ruby: using a rakefile to generate docs from source," I downloaded the ruby Twitter gem source code and am trying to generate the documentation using yard, which I installed via gem install yard. In the rakefile, I found the following, which I assume is used to generate the docs for the Twitter gem: I tried to require yard in irb and then run YARD::Rake::YardocTask.new but nothing happened.Can you help me get on the right track? <code>  require 'yard'YARD::Rake::YardocTask.new",Using a rakefile to generate docs from source
Thinking in ruby," I'm currently busy learning Ruby and Rails, and since I have a background in C-based languages, some concepts of Ruby are new and somewhat alien. Especially challenging for me is adapting to the ""Ruby-way"" of approaching common problems, hence I often find myself coding C in Ruby, which is not what I'm trying to achieve. Imagine having a schema like this: The database already contains several different bikes. My goal is to get an array of all brands represented in the database.Here is my code: How would a Ruby guru write code to achieve this? <code>  ActiveRecord::Schema.define(:version => 20111119180638) do create_table ""bikes"", :force => true do |t| t.string ""Brand"" t.string ""model"" t.text ""description"" endend class Bike < ActiveRecord::Base def Bike.collect_brands temp_brands = Bike.find_by_sql(""select distinct brand from bikes"") brands = Array.new temp_brands.each do |item| brands.push(item.brand) end brands endend",Thinking in Ruby
Prefer %w`(...) to a literal array?," While entering a simple literal array of strings in to RubyMine: RubyMine complained that I should prefer to use %w over a literal array: It presented a link to a Ruby Style Guide (here), which said: Prefer %w to the literal array syntax when you need an array of strings. I can see how the %w provides potentially more concise code. Aside from brevity, is there any reason to prefer one method over the other? <code>  cols =[ ""Col1"", ""Col2""] cols = %w(Col1 Col2) # badSTATES = ['draft', 'open', 'closed']# goodSTATES = %w(draft open closed)",Prefer %w(...) to a literal array?
Record PhantomJS ajax calls with VCR inside Capybara," I already did some research in this field, but didn't find any solution. I have a site, where asynchron ajax calls are made to facebook (using JSONP). I'm recording all my HTTP requests on the Ruby side with VCR, so I thought it would be cool, to use this feature for AJAX calls as well.So I played a little bit around, and came up with a proxy attempt. I'm using PhantomJS as a headless browser and poltergeist for the integration inside Capybara. Poltergeist is now configured to use a proxy like this: For testing purposes, I wrote a proxy server based on WEbrick, that integrates VCR: This works well with every localhost call, and they get well recorded. The HTML, JS and CSS files are recorded by VCR. Then I enabled the c.ignore_localhost = true option, cause it's useless (in my opinion) to record localhost calls.Then I tried again, but I had to figure out, that the AJAX calls that are made on the page aren't recorded. Even worse, they doesn't work inside the tests anymore.So to come to the point, my question is: Why are all calls to JS files on the localhost recorded, and JSONP calls to external ressources not? It can't be the jsonP thing, cause it's a ""normal"" ajax request. Or is there a bug inside phantomjs, that AJAX calls aren't proxied? If so, how could we fix that?If it's running, I want to integrate the start and stop procedure inside------- UPDATE -------I did some research and came to the following point: the proxy has some problems with HTTPS calls and binary data through HTTPS calls.I started the server, and made some curl calls: This call gets recorded as it should. The request and response output from the proxy is But this call doesn't gets recorded, there must be some problem with HTTPS: The header output is: So, I thought maybe the proxy can't handle HTTPS, but it can (as long as I'm getting the output on the console after the cURL call). Then I thought, maybe VCR can't mock HTTPS requests. But using this script, VCR mocks out HTTPS requests, when I don't use it inside the proxy: So what is the problem? VCR handles HTTPS and the proxy handles HTTPS. Why they don't play together? <code>  Capybara.register_driver :poltergeist_vcr do |app| options = { :phantomjs_options => [ ""--proxy=127.0.0.1:9100"", ""--proxy-type=http"", ""--ignore-ssl-errors=yes"", ""--web-security=no"" ], :inspector => true } Capybara::Poltergeist::Driver.new(app, options) end Capybara.javascript_driver = :poltergeist_vcr require 'io/wait'require 'webrick'require 'webrick/httpproxy'require 'rubygems'require 'vcr'module WEBrick class VCRProxyServer < HTTPProxyServer def service(*args) VCR.use_cassette('proxied') { super(*args) } end endendVCR.configure do |c| c.stub_with :webmock c.cassette_library_dir = '.' c.default_cassette_options = { :record => :new_episodes } c.ignore_localhost = trueendIP = '127.0.0.1'PORT = 9100reader, writer = IO.pipe@pid = fork do reader.close $stderr = writer server = WEBrick::VCRProxyServer.new(:BindAddress => IP, :Port => PORT) trap('INT') { server.shutdown } server.startendraise 'VCR Proxy did not start in 10 seconds' unless reader.wait(10) curl --proxy 127.0.0.1:9100 http://d3jgo56a5b0my0.cloudfront.net/images/v7/application/stories_view/icons/bug.png GET http://d3jgo56a5b0my0.cloudfront.net/images/v7/application/stories_view/icons/bug.png HTTP/1.1User-Agent: curl/7.24.0 (x86_64-apple-darwin12.0) libcurl/7.24.0 OpenSSL/0.9.8r zlib/1.2.5Host: d3jgo56a5b0my0.cloudfront.netAccept: */*Proxy-Connection: Keep-AliveHTTP/1.1 200 OK Server: WEBrick/1.3.1 (Ruby/1.9.3/2012-10-12)Date: Tue, 20 Nov 2012 10:13:10 GMTContent-Length: 0Connection: Keep-Alive curl --proxy 127.0.0.1:9100 https://d3jgo56a5b0my0.cloudfront.net/images/v7/application/stories_view/icons/bug.png CONNECT d3jgo56a5b0my0.cloudfront.net:443 HTTP/1.1Host: d3jgo56a5b0my0.cloudfront.net:443User-Agent: curl/7.24.0 (x86_64-apple-darwin12.0) libcurl/7.24.0 OpenSSL/0.9.8r zlib/1.2.5Proxy-Connection: Keep-AliveHTTP/1.1 200 OK Server: WEBrick/1.3.1 (Ruby/1.9.3/2012-10-12)Date: Tue, 20 Nov 2012 10:15:48 GMTContent-Length: 0Connection: close require 'vcr'VCR.configure do |c| c.hook_into :webmock c.cassette_library_dir = 'cassettes'enduri = URI(""https://d3jgo56a5b0my0.cloudfront.net/images/v7/application/stories_view/icons/bug.png"")VCR.use_cassette('https', :record => :new_episodes) do http = Net::HTTP.new(uri.host, uri.port) http.use_ssl = true http.verify_mode = OpenSSL::SSL::VERIFY_NONE response = http.request_get(uri.path) puts response.bodyend",VCRProxy: Record PhantomJS ajax calls with VCR inside Capybara
Setting a whenever job at two different hours everyday," I'm trying to set a Whenever job that should be executed 2 times a day, exactly at 11am and 11pm. Is there any way to do it with only one block? I mean something like this: <code>  every :day, :at => ['11am','11pm'] do runner ""Task""end",Setting a Whenever job at different hours every day
Setting a whenever job at different hours everyday," I'm trying to set a Whenever job that should be executed 2 times a day, exactly at 11am and 11pm. Is there any way to do it with only one block? I mean something like this: <code>  every :day, :at => ['11am','11pm'] do runner ""Task""end",Setting a Whenever job at different hours every day
first! versus first method in Rails," What is the difference between User.first and User.first! in Ruby on Rails? I see the example in the Ruby Guide but there is no explanation between why it's different. As far as I know, ! is used to represent that the method is changing the variable. *User represents a table.  <code> ",Difference between first! and first method in Rails
God starts to many processes," I have a god script that is supposed to keep an eye on two stalker processes.The problem is that after 24h it starts way too many processes.This is the god script. ps aux | grep stalk returns the following. This is the /usr/bin/bbundle script. Running sudo god stop app-scripts won't kill any processes.I've tried adding w.uid = ""webmaster"" to the god script, but the problem remains.I'm running god version 0.12.1, ruby version 1.9.3p286 and stalker version 0.9.0.What am I doing wrong? <code>  rails_root = File.expand_path(""../.."", __FILE__)2.times do |n| God.watch do |w| w.group = ""app-scripts"" w.name = ""run-#{n}"" w.interval = 30.seconds w.dir = File.dirname(__FILE__) w.env = { ""BUNDLE_GEMFILE"" => ""#{rails_root}/Gemfile"", ""RAILS_ENV"" => ""production"", ""BEANSTALK_URL"" => ""beanstalk://127.0.0.1:54132"" } w.start = ""bbundle exec stalk #{File.join(rails_root, ""config/jobs.rb"")}"" w.start_grace = 5.seconds w.stop_grace = 5.seconds w.start_if do |start| start.condition(:process_running) { |c| c.running = false } end w.restart_if do |restart| restart.condition(:memory_usage) do |c| c.above = 200.megabytes c.times = [3, 5] end restart.condition(:cpu_usage) do |c| c.above = 95.percent c.times = 5 end end w.lifecycle do |on| on.condition(:flapping) do |c| c.to_state = [:start, :restart] c.times = 5 c.within = 5.minute c.transition = :unmonitored c.retry_in = 10.minutes c.retry_times = 5 c.retry_within = 2.hours end end endend root 3178 0.2 2.7 417580 117284 ? Sl Oct28 2:22 ruby /opt/www/myapp/shared/bundle/ruby/1.9.1/bin/stalk /opt/www/myapp/current/config/jobs.rbroot 3179 0.2 3.3 506068 138740 ? Sl Oct28 2:26 ruby /opt/www/myapp/shared/bundle/ruby/1.9.1/bin/stalk /opt/www/myapp/current/config/jobs.rbroot 4588 0.2 2.9 497932 121664 ? Sl Oct25 16:10 ruby /opt/www/myapp/shared/bundle/ruby/1.9.1/bin/stalk /opt/www/myapp/current/config/jobs.rbroot 4794 0.2 3.0 497792 128084 ? Sl Oct25 15:57 ruby /opt/www/myapp/shared/bundle/ruby/1.9.1/bin/stalk /opt/www/myapp/current/config/jobs.rbroot 10391 0.2 2.8 496784 121388 ? Sl Oct25 15:44 ruby /opt/www/myapp/shared/bundle/ruby/1.9.1/bin/stalk /opt/www/myapp/current/config/jobs.rbroot 10392 0.2 2.8 497624 121528 ? Sl Oct25 15:31 ruby /opt/www/myapp/shared/bundle/ruby/1.9.1/bin/stalk /opt/www/myapp/current/config/jobs.rbroot 18874 75.0 2.0 214116 83948 ? Rl 15:49 0:09 ruby /opt/www/myapp/shared/bundle/ruby/1.9.1/bin/stalk /opt/www/myapp/current/config/jobs.rbroot 18875 75.0 2.0 214944 84868 ? Rl 15:49 0:09 ruby /opt/www/myapp/shared/bundle/ruby/1.9.1/bin/stalk /opt/www/myapp/current/config/jobs.rbroot 20649 0.2 2.6 410636 110012 ? Sl Oct28 2:44 ruby /opt/www/myapp/shared/bundle/ruby/1.9.1/bin/stalk /opt/www/myapp/current/config/jobs.rbroot 20650 0.2 3.0 439284 128996 ? Sl Oct28 2:47 ruby /opt/www/myapp/shared/bundle/ruby/1.9.1/bin/stalk /opt/www/myapp/current/config/jobs.rbroot 23272 0.2 2.7 414452 115772 ? Sl Oct28 2:44 ruby /opt/www/myapp/shared/bundle/ruby/1.9.1/bin/stalk /opt/www/myapp/current/config/jobs.rbroot 23273 0.2 2.7 417728 117152 ? Sl Oct28 2:44 ruby /opt/www/myapp/shared/bundle/ruby/1.9.1/bin/stalk /opt/www/myapp/current/config/jobs.rbroot 25919 0.2 3.1 436276 131876 ? Sl Oct28 2:28 ruby /opt/www/myapp/shared/bundle/ruby/1.9.1/bin/stalk /opt/www/myapp/current/config/jobs.rbroot 25920 0.2 3.3 503236 138676 ? Sl Oct28 2:29 ruby /opt/www/myapp/shared/bundle/ruby/1.9.1/bin/stalk /opt/www/myapp/current/config/jobs.rbroot 28782 0.2 2.8 431836 121108 ? Sl Oct25 16:58 ruby /opt/www/myapp/shared/bundle/ruby/1.9.1/bin/stalk /opt/www/myapp/current/config/jobs.rbroot 30687 0.2 2.7 415908 117008 ? Sl Oct28 2:39 ruby /opt/www/myapp/shared/bundle/ruby/1.9.1/bin/stalk /opt/www/myapp/current/config/jobs.rbroot 30688 0.2 2.6 476184 111844 ? Sl Oct28 2:37 ruby /opt/www/myapp/shared/bundle/ruby/1.9.1/bin/stalk /opt/www/myapp/current/config/jobs.rb #!/usr/bin/env bashif [[ -s ""/home/webmaster/.rvm/environments/ruby-1.9.2-p320@webmaster"" ]]then source ""/home/webmaster/.rvm/environments/ruby-1.9.2-p320@webmaster"" bundle ""$@""else echo ""ERROR: Missing RVM environment file: '/home/webmaster/.rvm/environments/ruby-1.9.2-p320@webmaster'"" >&2 exit 1fi",God starts too many processes
Send and math operators," Is there something like this in ruby? I want to make this piece of code seem less redundant <code>  send(+, 1, 2) if op == ""+"" return arg1 + arg2elsif op == ""-"" return arg1 - arg2elsif op == ""*"" return arg1 * arg2elsif op == ""/"" return arg1 / arg2",Can I dynamically call a math operator in Ruby?
Ruby: infinite loop in thread," I have the following code (from a Ruby tutorial): It's an example for using Mutex.synchronize. On my computer, the results are quite different from the tutorial. After calling join, the counts are sometimes equal: and sometimes not: I don't understand how it is possible that the difference is still 0 even though the counts show very different numbers.The add operation probably looks like this: and something similar for count2. Ruby can switch execution between threads, so it might not finish writing to a variable, but when the CPU gets back to the thread, it should continue from the line where it was interrupted, right?And there is still just one thread that is writing into the variable. How is it possible that, inside the loop do block, count2 += 1 is executed much more times?  <code>  require 'thread'count1 = count2 = 0difference = 0counter = Thread.new do loop do count1 += 1 count2 += 1 endendspy = Thread.new do loop do difference += (count1 - count2).abs endendsleep 1puts ""count1 : #{count1}""puts ""count2 : #{count2}""puts ""difference : #{difference}""counter.join(2)spy.join(2)puts ""count1 : #{count1}""puts ""count2 : #{count2}""puts ""difference : #{difference}"" count1 : 5321211count2 : 6812638difference : 0count1 : 27307724count2 : 27307724difference : 0 count1 : 4456390count2 : 5981589difference : 0count1 : 25887977count2 : 28204117difference : 0 val = fetch_current(count1)add 1 to valstore val back into count1",Loops in multiple threads
Graphin with Prawn," Looking to a gem that adds gtraphing capabilities to prawn, I found this one but it seems a litle outdated. Is there any more active gem for that? <code> ",Graphics with Prawn
Jekyll: How to dynamically generate a variable and pass it to the template?," For example, say I'd like to generate this array: And pass it to a template, so that I can access it from Liquid: Note: I want to generate the array dynamically in Ruby. And inside the template, I want an array that I can iterate with, I don't want a string.How can this be done in Jekyll? <code>  random_numbers = []1000.times { random_numbers << rand(2) } {% for num in random_numbers %} ... here I'd use logic around the number to generate something.{% endfor %}",Jekyll: How to pass a Ruby object to a template?
How do I ROUND an AVERAGE to 2 decimal places in PostgreSQL?," I am using PostgreSQL via the Ruby gem 'sequel'.I'm trying to round to two decimal places.Here's my code: I get the following error: I get no error when I run the following code: Does anyone know what I am doing wrong? <code>  SELECT ROUND(AVG(some_column),2) FROM table PG::Error: ERROR: function round(double precision, integer) does not exist (Sequel::DatabaseError) SELECT ROUND(AVG(some_column))FROM table",How to round an average to 2 decimal places in PostgreSQL?
Sequel: Defining Models Before Connecting," In my (non-Rails) app, I'm trying to define a Sequel model: When I run my app, I'm getting the error: In fact, I have not called connect, because the 'require Foo' is happening before my database code runs.Of course, I could switch things around so that the require is done after the DB connects, but is there another option? Currently I have all my app's 'require' statements in one file and it would be nice not to have to break that for these model class files. <code>  class Foo < Sequel::Modelend No database associated with Sequel::Model: have you called Sequel.connect or Sequel::Model.db= ? (Sequel::Error)",Defining Sequel models before connecting
Set port in HTTParty (Ruby)," I read that HTTParty uses SSL if the port is set to 443, but I don't see how to set the port. Can someone clarify this for me? <code> ",How to set the port in HTTParty
Using Compass from ruby (not shell)," I am building a script in Ruby where I would like to compile a single SCSS file using Compass. I am trying to make this as simple as possible, and would like to avoid using a config.rb file. I just want to set a couple settings via straight Ruby and tell Compass to compile a single SCSS file into a CSS file. I know that this has to be possible but I have not been able to find any decent documentation on how to do it. Any help would be appreciated. <code> ",Using Compass from Ruby (not shell)
benchmarks: has python a faster way of walking a folder," I need to walk through a folder with approximately ten thousand files. My old vbscript is very slow in handling this. Since I've started using Ruby and Python since then, I made a benchmark between the three scripting languages to see which would be the best fit for this job.The results of the tests below on a subset of 4500 files on a shared network are That Vbscript would be slowest was no surprise but I can't explain the difference between Ruby and Python. Is my test for Python not optimal? Is there a faster way to do this in Python?The test for thumbs.db is just for the test, in reality there are more tests to do.I needed something that checks every file on the path and doesn't produce too much output to not disturb the timing. The results are a bit different each run but not by much. EDIT: since i suspected the print caused a delay i tested the scripts with printing all 4500 files and also printing none, the difference remains, R:5 P:107 in the first case and R:4.5 P:107 in the latterEDIT2: based on the answers and comments here a Python version that in some cases could run faster by skipping folders <code>  Python: 106 secondsRuby: 5 secondsVbscript: 124 seconds #python2.7.0import osdef recurse(path): for (path, dirs, files) in os.walk(path): for file in files: if file.lower() == ""thumbs.db"": print (path+'/'+file)if __name__ == '__main__': import timeit path = '//server/share/folder/' print(timeit.timeit('recurse(""'+path+'"")', setup=""from __main__ import recurse"", number=1)) 'vbscript5.7set oFso = CreateObject(""Scripting.FileSystemObject"")const path = ""\\server\share\folder""start = TimermyLCfilename=""thumbs.db""sub recurse(folder) for each file in folder.Files if lCase(file.name) = myLCfilename then wscript.echo file end if next for each subfolder in folder.SubFolders call Recurse(subfolder) nextend Subset folder = oFso.getFolder(path)recurse(folder)wscript.echo Timer-start #ruby1.9.3require 'benchmark'def recursive(path, bench) bench.report(path) do Dir[""#{path}/**/**""].each{|file| puts file if File.basename(file).downcase == ""thumbs.db""} endendpath = '//server/share/folder/'Benchmark.bm {|bench| recursive(path, bench)} import osdef recurse(path): for (path, dirs, files) in os.walk(path): for file in files: if file.lower() == ""thumbs.db"": print (path+'/'+file)def recurse2(path): for (path, dirs, files) in os.walk(path): for dir in dirs: if dir in ('comics'): dirs.remove(dir) for file in files: if file.lower() == ""thumbs.db"": print (path+'/'+file)if __name__ == '__main__': import timeit path = 'f:/' print(timeit.timeit('recurse(""'+path+'"")', setup=""from __main__ import recurse"", number=1)) #6.20102692 print(timeit.timeit('recurse2(""'+path+'"")', setup=""from __main__ import recurse2"", number=1)) #2.73848228#ruby 5.7",benchmarks: does python have a faster way of walking a network folder?
benchmarks: does python have a faster way of walking a folder?," I need to walk through a folder with approximately ten thousand files. My old vbscript is very slow in handling this. Since I've started using Ruby and Python since then, I made a benchmark between the three scripting languages to see which would be the best fit for this job.The results of the tests below on a subset of 4500 files on a shared network are That Vbscript would be slowest was no surprise but I can't explain the difference between Ruby and Python. Is my test for Python not optimal? Is there a faster way to do this in Python?The test for thumbs.db is just for the test, in reality there are more tests to do.I needed something that checks every file on the path and doesn't produce too much output to not disturb the timing. The results are a bit different each run but not by much. EDIT: since i suspected the print caused a delay i tested the scripts with printing all 4500 files and also printing none, the difference remains, R:5 P:107 in the first case and R:4.5 P:107 in the latterEDIT2: based on the answers and comments here a Python version that in some cases could run faster by skipping folders <code>  Python: 106 secondsRuby: 5 secondsVbscript: 124 seconds #python2.7.0import osdef recurse(path): for (path, dirs, files) in os.walk(path): for file in files: if file.lower() == ""thumbs.db"": print (path+'/'+file)if __name__ == '__main__': import timeit path = '//server/share/folder/' print(timeit.timeit('recurse(""'+path+'"")', setup=""from __main__ import recurse"", number=1)) 'vbscript5.7set oFso = CreateObject(""Scripting.FileSystemObject"")const path = ""\\server\share\folder""start = TimermyLCfilename=""thumbs.db""sub recurse(folder) for each file in folder.Files if lCase(file.name) = myLCfilename then wscript.echo file end if next for each subfolder in folder.SubFolders call Recurse(subfolder) nextend Subset folder = oFso.getFolder(path)recurse(folder)wscript.echo Timer-start #ruby1.9.3require 'benchmark'def recursive(path, bench) bench.report(path) do Dir[""#{path}/**/**""].each{|file| puts file if File.basename(file).downcase == ""thumbs.db""} endendpath = '//server/share/folder/'Benchmark.bm {|bench| recursive(path, bench)} import osdef recurse(path): for (path, dirs, files) in os.walk(path): for file in files: if file.lower() == ""thumbs.db"": print (path+'/'+file)def recurse2(path): for (path, dirs, files) in os.walk(path): for dir in dirs: if dir in ('comics'): dirs.remove(dir) for file in files: if file.lower() == ""thumbs.db"": print (path+'/'+file)if __name__ == '__main__': import timeit path = 'f:/' print(timeit.timeit('recurse(""'+path+'"")', setup=""from __main__ import recurse"", number=1)) #6.20102692 print(timeit.timeit('recurse2(""'+path+'"")', setup=""from __main__ import recurse2"", number=1)) #2.73848228#ruby 5.7",benchmarks: does python have a faster way of walking a network folder?
xpath for deeply nested elements, I am using Nokogiri.Suppose I have a deeply nested path: I think I can use the following path: Is there any way I can avoid using multiple asterisks? Something like //h1/.../h5?I don't want to keep counting the levels of nesting. <code>  //h1/h2/h3/h4/h5 //h1/*/*/*/h5,XPath for deeply nested elements?
Nested fields with mongodb," I'm trying to create nested fields using mongodb. For that I'm using the gem mongomodel which allows work with ruby and mongodb and I'm using the gem nested_form, to create dynamics nested fields. I'm having the following trouble:undefined methodreflect_on_association' for #`Other errors like it, that I have found in the internet doesn't really match what I want to do here with mongodb. I'm new to RoR, and I don't know how to solve this. Can anyone help me?Here is my models:survey.rb questions.rb My controller: My gemfile: My view of survey: <code>  class Survey < MongoModel::Document property :name, String property :questions, Collection[Question] timestamps! accepts_nested_attributes_for :questions, :reject_if => lambda { |a| a[:content].blank? }, :allow_destroy => trueend class Question < MongoModel::Document property :content, String timestamps!end surveys_controller.rbclass SurveysController < ApplicationController # GET /surveys # GET /surveys.json def index @surveys = Survey.all respond_to do |format| format.html # index.html.erb format.json { render json: @surveys } end end # GET /surveys/1 # GET /surveys/1.json def show @survey = Survey.find(params[:id]) respond_to do |format| format.html # show.html.erb format.json { render json: @survey } end end # GET /surveys/new # GET /surveys/new.json def new @survey = Survey.new respond_to do |format| format.html # new.html.erb format.json { render json: @survey } end end # GET /surveys/1/edit def edit @survey = Survey.find(params[:id]) end # POST /surveys # POST /surveys.json def create @survey = Survey.new(params[:survey]) respond_to do |format| if @survey.save format.html { redirect_to @survey, notice: 'Survey was successfully created.' } format.json { render json: @survey, status: :created, location: @survey } else format.html { render action: ""new"" } format.json { render json: @survey.errors, status: :unprocessable_entity } end end end # PUT /surveys/1 # PUT /surveys/1.json def update @survey = Survey.find(params[:id]) respond_to do |format| if @survey.update_attributes(params[:survey]) format.html { redirect_to @survey, notice: 'Survey was successfully updated.' } format.json { head :no_content } else format.html { render action: ""edit"" } format.json { render json: @survey.errors, status: :unprocessable_entity } end end end # DELETE /surveys/1 # DELETE /surveys/1.json def destroy @survey = Survey.find(params[:id]) @survey.destroy respond_to do |format| format.html { redirect_to surveys_url } format.json { head :no_content } end endend source 'https://rubygems.org'gem 'rails', '3.2.8'# Bundle edge Rails instead:# gem 'rails', :git => 'git://github.com/rails/rails.git'gem ""mongomodel""gem ""bson_ext""gem ""nested_form""# Gems used only for assets and not required# in production environments by default.group :assets do gem 'sass-rails', '~> 3.2.3' gem 'coffee-rails', '~> 3.2.1' # See https://github.com/sstephenson/execjs#readme for more supported runtimes # gem 'therubyracer', :platforms => :ruby gem 'uglifier', '>= 1.0.3'endgem 'jquery-rails'# To use ActiveModel has_secure_password# gem 'bcrypt-ruby', '~> 3.0.0'# To use Jbuilder templates for JSON# gem 'jbuilder'# Use unicorn as the app server# gem 'unicorn'# Deploy with Capistrano# gem 'capistrano'# To use debugger# gem 'debugger' _form.html.erb<%= nested_form_for(@survey) do |f| %> <% if @survey.errors.any? %> <div id=""error_explanation""> <h2><%= pluralize(@survey.errors.count, ""error"") %> prohibited this survey from being saved:</h2> <ul> <% @survey.errors.full_messages.each do |msg| %> <li><%= msg %></li> <% end %> </ul> </div> <% end %> <div class=""field""> <%= f.label :name %><br /> <%= f.text_field :name %> </div> <p> <%= f.fields_for :questions do |builder| %> <p> <%= builder.label :content, ""Question"" %> <%= builder.text_area :content, :rows => 3 %> </p> <% end %> <p><%= f.link_to_add ""Add a Question"", :questions %></p> </p> <div class=""actions""> <%= f.submit %> </div><% end %>",Nested fields with mongodb [solved]
Fetching the substring contained between," I wanted to know how to proceed when I am interested in the text contained between particular words using ruby.eg. Now I want to extract the CAPITALIZED content from the string i.e. dynamic but always contained within the two containers (container_start and container_end) <code>  @var = ""Hi, I want to extract container_start ONLY THIS DYNAMIC CONTENT container_end from the message contained between the container_start and container_end """,Fetching the substring contained between two specific words
Fetching the substring contained between two specific words.," I wanted to know how to proceed when I am interested in the text contained between particular words using ruby.eg. Now I want to extract the CAPITALIZED content from the string i.e. dynamic but always contained within the two containers (container_start and container_end) <code>  @var = ""Hi, I want to extract container_start ONLY THIS DYNAMIC CONTENT container_end from the message contained between the container_start and container_end """,Fetching the substring contained between two specific words
Rubygems - where the package downloaded to?," When you install a new package, for example, 'gem install fb-graph', where are the files downloaded?  <code> ",Rubygems - where are the package downloaded?
CarrierWave version with custom processor no registing," I am using carrierwave to upload a video then have a version called thumb with a custom processor that takes the video and creates a screenshot using streamio-ffmpeg. Both the video and the file are uploaded correctly but when calling uploader.url(:thumb) I get: ArgumentError: Version thumb doesn't exist!VideoUploader.rb Then model.video_url(:thumb) returns the argument error. I am not sure what to do or why the version isn't registered any help would be great, thanks. <code>  require 'carrierwave/processing/mime_types'require 'streamio-ffmpeg'class VideoUploader < CarrierWave::Uploader::Base include CarrierWave::VideoConverter include CarrierWave::MimeTypes process :set_content_type storage :file version :thumb do process :create_thumb #def full_filename(for_file) # ""thumb_#{File.basename(for_file, File.extname(for_file))}.png"" #end end def create_thumb cached_stored_file! if !cached? movie = FFMPEG::Movie.new(current_path) dirname = File.dirname(current_path) thumb_path = ""#{File.join(dirname, File.basename(path, File.extname(path)))}.png"" movie.screenshot(thumb_path, :seek_time => 5) File.rename thumb_path, current_path end def file_identifier model[:video] end # Override the directory where uploaded files will be stored. # This is a sensible default for uploaders that are meant to be mounted: def store_dir return ""uploads/#{model.class.to_s.underscore}/#{mounted_as}/#{model.user_id}/#{model.id}"" endend",CarrierWave with custom processor not registering
Ruby on Rails array function," I'm trying to print a simple array defined in my controller into my view with a new line for each element. But what it's doing is printing the whole array on one line.Here's my controller: Here's my view: Here's the result: <code>  class TodosController < ApplicationController def index @todo_array = [ ""Buy Milk"", ""Buy Soap"", ""Pay bill"", ""Draw Money"" ] endend <%= @todo_array.each do |t| %><%= puts t %><\br><% end %> <\br> <\br> <\br> <\br> [""Buy Milk"", ""Buy Soap"", ""Pay bill"", ""Draw Money""]",Printing elements of array using ERB
"In Ruby, is there a way to 'override' a constant in a subclass so that inherited methods use the new constant instead of the old?"," In Ruby, is there a way to 'override' a constant in a subclass in such a way that calling an inherited method from the subclass results in that method using the new constant instead of the old one? For example: If not, is there perhaps a way to do something like this instead? Note: I tried my second example out in irb, and it seems to work except that class methods can't seem to access CONST after I clone the class: <code>  class SuperClass CONST = ""Hello, world!"" def self.say_hello CONST endendclass SubClass < SuperClass override_const :CONST, ""Hello, Bob!""endSuperClass.say_hello # => ""Hello, world!""SubClass.say_hello # => ""Hello, Bob!"" class SuperClass CONST = ""Hello, world!"" def self.say_hello CONST endendSubClass = SuperClass.cloneSubClass.send(:remove_const, :CONST)SubClass.const_set(:CONST, ""Hello, Bob!"")SubClass.say_hello # => ""Hello, Bob!"" irb(main):012:0> SubClass.say_helloNameError: uninitialized constant Class::CONST from (irb):4:in `say_hello' from (irb):12 from C:/Ruby193/bin/irb:12:in `<main>'",Override ruby constant in subclass so inherited methods use new constant instead of the old?
How do I parse a string and extract just the substring I want - if the substrings to the left & right match a pattern," Say I have a string like this: ""http://something.example.com/directory/""What I want to do is to parse this string, and extract the ""something"" from the string.The first step, is to obviously check to make sure that the string contains ""http://"" - otherwise, it should ignore the string.But, how do I then just extract the ""something"" in that string? Assume that all the strings that this will be evaluating will have a similar structure (i.e. I am trying to extract the subdomain of the URL - if the string being examined is indeed a valid URL - where valid is starts with ""http://"").Thanks.P.S. I know how to check the first part, i.e. I can just simply split the string at the ""http://"" but that doesn't solve the full problem because that will produce ""http://something.example.com/directory/"". All I want is the ""something"", nothing else. <code> ",How to parse a URL and extract the required substring
Can I have required named arguments in Ruby 2.x?," Ruby 2.0 is adding named parameters, like this: How can I use named parameters without giving a default value, so that they are required? <code>  def say(greeting: 'hi') puts greetingendsay # => puts 'hi'say(greeting: 'howdy') # => puts 'howdy'",Can I have required named parameters in Ruby 2.x?
ruby 1.9.3 can't use open3," The project works fine in Ruby 1.9.2, but I want to use 1.9.3. This line worked fine in 1.9.2: However in 1.9.3, I get uninitialized constant ConfigureController::Open3Do I have to install the module, or something? thanks! <code>  o, e, s = Open3.capture3(""echo a; sort >&2"", :stdin_data=>""foo\nbar\nbaz\n"")",ruby 1.9.3 can't use open3 (uninitialized constant ConfigureController::Open3)
Write in an existing Excel .xls file," I want to insert datas an existing Excel (.xls) file with Ruby under Linux. This file has already data, it has some format properties and it contains macros.I tried to insert data into the file with the spreadsheet gem but when I save modifications, the format and all the macros of the file are lost.Here's an example of a simple modification where I meet this problem : I tried lots of things, did research on forums and the web but I didn't find a solution... Does anyone has an idea? <code>  book = Spreadsheet.open('myOriginalFile.xls')sheet = book.worksheet 0sheet.write('C12','hello')book.write('myModifiedFile.xls')",Write in an existing Excel .xls file which contains macros
Colon (:) apears as forward slash (/) when creating file name," I am using date and time to label a new file that I'm creating, but when I view the file, the colon is a forward slash. I am developing on a Mac using 10.7+Here is the code I'm using: Here is the output (assuming the time is 1pm): Why is this happening and how can I fix it? I want the output to be: <code>  File.open(""#{time.hour} : 00, #{time.month}-#{time.day}-#{time.year}"", ""a"") do |mFile| mFile.syswrite(""#{pKey} - #{tKey}: \n"") mFile.syswrite(""Items closed: #{itemsClosed} | Total items: #{totalItems} | Percent closed: % #{pClosed} \n"") mFile.syswrite(""\n"") mFile.close end 13 / 00, 11-8-2012 13:00, 11-8-2012",Colon (:) appears as forward slash (/) when creating file name
What is an elegant solution for finding the insertion point in an array using binary search?," The basic idea of binary search in an array is simple, but it might return an ""approximate"" index if the search fails to find the exact item. (we might sometimes get back an index for which the value is larger or smaller than the searched value).For looking for the exact insertion point, it seems that after we got the approximate location, we might need to ""scan"" to left or right for the exact insertion location, so that, say, in Ruby, we can do arr.insert(exact_index, value)I have the following solution, but the handling for the part when begin_index >= end_index is a bit messy. I wonder if a more elegant solution can be used?(this solution doesn't care to scan for multiple matches if an exact match is found, so the index returned for an exact match may point to any index that correspond to the value... but I think if they are all integers, we can always search for a - 1 after we know an exact match is found, to find the left boundary, or search for a + 1 for the right boundary.)My solution: and result: <code>  DEBUGGING = truedef binary_search_helper(arr, a, begin_index, end_index) middle_index = (begin_index + end_index) / 2 puts ""a = #{a}, arr[middle_index] = #{arr[middle_index]}, "" + ""begin_index = #{begin_index}, end_index = #{end_index}, "" + ""middle_index = #{middle_index}"" if DEBUGGING if arr[middle_index] == a return middle_index elsif begin_index >= end_index index = [begin_index, end_index].min return index if a < arr[index] && index >= 0 #careful because -1 means end of array index = [begin_index, end_index].max return index if a < arr[index] && index >= 0 return index + 1 elsif a > arr[middle_index] return binary_search_helper(arr, a, middle_index + 1, end_index) else return binary_search_helper(arr, a, begin_index, middle_index - 1) endend# for [1,3,5,7,9], searching for 6 will return index for 7 for insertion# if exact match is found, then return that indexdef binary_search(arr, a) puts ""\nSearching for #{a} in #{arr}"" if DEBUGGING return 0 if arr.empty? result = binary_search_helper(arr, a, 0, arr.length - 1) puts ""the result is #{result}, the index for value #{arr[result].inspect}"" if DEBUGGING return resultendarr = [1,3,5,7,9]b = 6arr.insert(binary_search(arr, b), b)p arrarr = [1,3,5,7,9,11]b = 6arr.insert(binary_search(arr, b), b)p arrarr = [1,3,5,7,9]b = 60arr.insert(binary_search(arr, b), b)p arrarr = [1,3,5,7,9,11]b = 60arr.insert(binary_search(arr, b), b)p arrarr = [1,3,5,7,9]b = -60arr.insert(binary_search(arr, b), b)p arrarr = [1,3,5,7,9,11]b = -60arr.insert(binary_search(arr, b), b)p arrarr = [1]b = -60arr.insert(binary_search(arr, b), b)p arrarr = [1]b = 60arr.insert(binary_search(arr, b), b)p arrarr = []b = 60arr.insert(binary_search(arr, b), b)p arr Searching for 6 in [1, 3, 5, 7, 9]a = 6, arr[middle_index] = 5, begin_index = 0, end_index = 4, middle_index = 2a = 6, arr[middle_index] = 7, begin_index = 3, end_index = 4, middle_index = 3a = 6, arr[middle_index] = 5, begin_index = 3, end_index = 2, middle_index = 2the result is 3, the index for value 7[1, 3, 5, 6, 7, 9]Searching for 6 in [1, 3, 5, 7, 9, 11]a = 6, arr[middle_index] = 5, begin_index = 0, end_index = 5, middle_index = 2a = 6, arr[middle_index] = 9, begin_index = 3, end_index = 5, middle_index = 4a = 6, arr[middle_index] = 7, begin_index = 3, end_index = 3, middle_index = 3the result is 3, the index for value 7[1, 3, 5, 6, 7, 9, 11]Searching for 60 in [1, 3, 5, 7, 9]a = 60, arr[middle_index] = 5, begin_index = 0, end_index = 4, middle_index = 2a = 60, arr[middle_index] = 7, begin_index = 3, end_index = 4, middle_index = 3a = 60, arr[middle_index] = 9, begin_index = 4, end_index = 4, middle_index = 4the result is 5, the index for value nil[1, 3, 5, 7, 9, 60]Searching for 60 in [1, 3, 5, 7, 9, 11]a = 60, arr[middle_index] = 5, begin_index = 0, end_index = 5, middle_index = 2a = 60, arr[middle_index] = 9, begin_index = 3, end_index = 5, middle_index = 4a = 60, arr[middle_index] = 11, begin_index = 5, end_index = 5, middle_index = 5the result is 6, the index for value nil[1, 3, 5, 7, 9, 11, 60]Searching for -60 in [1, 3, 5, 7, 9]a = -60, arr[middle_index] = 5, begin_index = 0, end_index = 4, middle_index = 2a = -60, arr[middle_index] = 1, begin_index = 0, end_index = 1, middle_index = 0a = -60, arr[middle_index] = 9, begin_index = 0, end_index = -1, middle_index = -1the result is 0, the index for value 1[-60, 1, 3, 5, 7, 9]Searching for -60 in [1, 3, 5, 7, 9, 11]a = -60, arr[middle_index] = 5, begin_index = 0, end_index = 5, middle_index = 2a = -60, arr[middle_index] = 1, begin_index = 0, end_index = 1, middle_index = 0a = -60, arr[middle_index] = 11, begin_index = 0, end_index = -1, middle_index = -1the result is 0, the index for value 1[-60, 1, 3, 5, 7, 9, 11]Searching for -60 in [1]a = -60, arr[middle_index] = 1, begin_index = 0, end_index = 0, middle_index = 0the result is 0, the index for value 1[-60, 1]Searching for 60 in [1]a = 60, arr[middle_index] = 1, begin_index = 0, end_index = 0, middle_index = 0the result is 1, the index for value nil[1, 60]Searching for 60 in [][60]",How to find the insertion point in an array using binary search?
Cannot use... shortcut because path is not available on 404 page with rails 3, I need use the I18n api on my public/404.html page.If I add to 404.html page: I get an error message like: How can I use the I18n feature to this page? <code>  <%= t('.page_were_looking') %> Cannot use t('.page_were_looking') shortcut because path is not available,How can I use i18n for my error pages in Rails 3?
is Rais.cache purged between tests?," We cache id/path mapping using Rails.cache in a Rails 3.2 app. On some machines it works OK, but on the others values are wrong. The cause is hard to track so I have some questions about the Rails.cache itself. Is it purged between tests? Is it possible that values cached in development mode is used in test mode? If it's not purged, how could I do it before running specs?My cache store is configuration is: <code>  #in: config/environments/development.rbconfig.cache_store = :memory_store, {:size => 64.megabytes}#in: config/environments/production.rb# config.cache_store = :mem_cache_store",is Rails.cache purged between tests?
How to write down this three cases in more elegant way?, Is it possible to make this code more compact? Am I missing anything here?  <code>  if value < min_rate min_rate elsif value > max_rate max_rate else value end,How to write down these three cases in a more elegant way?
How to write down these three cases in more elegant way?, Is it possible to make this code more compact? Am I missing anything here?  <code>  if value < min_rate min_rate elsif value > max_rate max_rate else value end,How to write down these three cases in a more elegant way?
RoR | how to call a active record named scope with a string," I'm sure I'm miss understanding the use of call but I thought I could do something like this. Where ""some_named_scope"" is also a named scope in CaseStudy. The reason why I need to use call is because I have named scopes that are the same names of the actions in the controller so I'm hopping to do something like this. EDITForgive me, I just realized I was thinking about the send method, some how the word call got stuck in my head. But @case_studies = CaseStudy.send(params[:action]) works as I thought it would. <code>  @case_studies = CaseStudy.call(""some_named_scope"") @case_studies = CaseStudy.call(params[:action])",how to call a active record named scope with a string
Custom css with nokogiri with bootstrap," I try to use paginate with kaminari. My project used bootsrap css, and the result is so ugly:)The html is generated by nokogiri I want something like pagination in bootstrap page, how I can do?Please help! <code>  <nav class=""pagination""> <span class=""first""> <a href=""/admin/book_borrow/borrow?locale=en""> First</a></span> <span class=""prev""> <a rel=""prev"" href=""/admin/book_borrow/borrow?locale=en""> Prev</a></span> <span class=""page""> <a rel=""prev"" href=""/admin/book_borrow/borrow?locale=en"">1</a></span> <span class=""page current""> 2</span> <span class=""page""> <a rel=""next"" href=""/admin/book_borrow/borrow?locale=en&amp;page=3"">3</a></span> <span class=""page""> <a href=""/admin/book_borrow/borrow?locale=en&amp;page=4"">4</a></span> <span class=""next""> <a rel=""next"" href=""/admin/book_borrow/borrow?locale=en&amp;page=3"">Next </a></span> <span class=""last""> <a href=""/admin/book_borrow/borrow?locale=en&amp;page=4"">Last </a></span> </nav>",Custom css with kaminari with bootstrap
Extending ruby class with standalone piece of code," I have a Rails app with several models with the same structure: The actual code is more complicated but that's enough for simplicity.I think I can put the common part of the code in one place and then use it in all models.Here is what comes to my mind: Obviously it doesn't work for two reasons:CommonItem has no idea about class methods I invoke.WIDTH and HEIGHT constants are looked up in CommonItem instead of Item1.I tried to use include instead of extend, some ways of class_eval and class inheritance, but none work.It seems I am missing something obvious. Please tell me what. <code>  class Item1 < ActiveRecord::Base WIDTH = 100 HEIGHT = 100 has_attached_file :image, styles: {original: ""#{WIDTH}x#{HEIGHT}""} validates_attachment :image, :presence => trueendclass Item2 < ActiveRecord::Base WIDTH = 200 HEIGHT = 200 has_attached_file :image, styles: {original: ""#{WIDTH}x#{HEIGHT}""} validates_attachment :image, :presence => trueend class Item1 < ActiveRecord::Base WIDTH = 100 HEIGHT = 100 extend CommonItemendmodule CommonItem has_attached_file :image, styles: {original: ""#{WIDTH}x#{HEIGHT}""} validates_attachment :image, :presence => trueend",Extending a Ruby class with a standalone piece of code
what is o option of ruby regexp means?," Ruby regexp has some options (e.g. i, x, m, o). i means ignore case, for instance.What does the o option mean? In ri Regexp, it says o means to perform #{} interpolation only once. But when I do this: b does not change (it stays /one/). What am I missing? <code>  a = 'one' b = /#{a}/ a = 'two' ",What does the o modifier for a regexp mean?
What does the o modifier for a regex in Ruby?," Ruby regexp has some options (e.g. i, x, m, o). i means ignore case, for instance.What does the o option mean? In ri Regexp, it says o means to perform #{} interpolation only once. But when I do this: b does not change (it stays /one/). What am I missing? <code>  a = 'one' b = /#{a}/ a = 'two' ",What does the o modifier for a regexp mean?
scraping with nokogiri and ruby before and after javascript changes the value," I have a program that scrapes value from https://web.apps.markit.com/WMXAXLP?YYY2220_zJkhPN/sWPxwhzYw8K4DcqW07HfIQykbYMaXf8fTzWT6WKnuivTcM0W584u1QRwjMy current code is: This scrapes the date and values of the second column from the ""CDS Indexes"" table correctly which is fine. Now, I want to scrape the similar values from the ""Bond Indexes"" table where I am facing the problem.I can see a JavaScript function changes it without loading the page and without changing the URL of the page. The difference between these two tables is their IDs are different which is exactly that it should be. But, unfortunately when I try with: I get nothing from the Bond Indexes table. But I get values from CDS Indexes table if I use: How can I get the values from both tables? <code>  doc = Nokogiri::HTML(open(source_url))puts doc.css('span.indexDate').textdate = doc.css('span.indexDate').textdate = Date.parse(date)puts datevalues = doc.css('table#CdsIndexTable td.col2 span')puts values values = doc.css('table#BondIndexTable')puts values values = doc.css('table#CdsIndexTable')puts values",Scraping with Nokogiri and Ruby before and after JavaScript changes the value
ruby net/http encoding gzip," I have ruby-1.9.3-p327 with zlib installed. localhost:80 is the nginx simple test page. The body was not decoded. Why? <code>  require ""net/http""=> trueNet::HTTP::HAVE_ZLIB=> trueres = Net::HTTP.start(""localhost"", ""80"") do |http| req = Net::HTTP::Get.new ""/"" req[""accept-encoding""] = ""gzip"" http.request reqend=> #<Net::HTTPOK 200 OK readbody=true>res.get_fields ""content-encoding""=> [""gzip""]res.body=> ""\x1F\x8B\b\x00\x00\x00\x00\x00\x00\x03\xEC\xBDi...""",Ruby Net::HTTP not decoding gzip?
Ruby Instance Variables Inheritance," Can someone explain how a class can access the instance variables of its superclass and how that is not inheritance? I'm talking about 'The Ruby Programming Language' and the example How can class Point3D access x and y inside to_s if they're not inherited? The book says: ""The reason that they sometimes appear to be inherited is that instance variables are created by the methods that first assign values to them, and those methods are often inherited or chained.""but I can't figure out what it really means. <code>  class Point def initialize(x,y) # Initialize method @x,@y = x, y # Sets initial values for instance variables endendclass Point3D < Point def initialize(x,y,z) super(x,y) @z = z end def to_s ""(#@x, #@y, #@z)"" # Variables @x and @y inherited? endendPoint3D.new(1,2,3).to_s => ""(1, 2, 3)""",Instance Variables Inheritance
Any builtin Lazy Hash in Ruby?," I need to populate a Hash with various values. Some of values are accessed often enough and another ones really seldom.The issue is, I'm using some computation to get values and populating the Hash becomes really slow with multiple keys.Using some sort of cache is not a option in my case.I wonder how to make the Hash compute the value only when the key is firstly accessed and not when it is added?This way, seldom used values wont slow down the filling process.I'm looking for something that is ""kinda async"" or lazy access. <code> ",Is there a built-in lazy Hash in Ruby?
Ruby string interpolation with actual % in string?," What's the right way to deal with this? I can't use normal %{keyname} or #{code} because I'm parsing strings for urls and stripping them out so I can stick them back in different formats (with/without protocol, shortened, full length, etc). So the number of replacements is unknown and they don't have names. They are just an array of urls.I also tried escaping the %: but get the exact same result. <code>  ""Hi %s, today is %s so you get 10% OFF!"" % ['Joe', 'Monday']# => ArgumentError: malformed format string - %O ""Hi %s, today is %s so you get 10\% OFF!"" % ['Joe', 'Monday']# => ArgumentError: malformed format string - %O",String interpolation with actual % in string
Why does rvm install ruby-1.9.3-p327 not work?," It is said on the Rails 3.2.9 blog that Ruby 1.9.3-p327 is recommended to be installed. But actually gives an error, and the log says: There is no checksum for 'http://ftp.ruby-lang.org/pub/ruby/1.9/ruby-1.9.3-p327.tar.bz2' or 'ruby-1.9.3-p327.tar.bz2', it's not possible to validate it. If you wish to continue with unverified download add '--verify-downloads 1' after the command.But I checked http://ftp.ruby-lang.org/pub/ruby/1.9/ and the ruby-1.9.3-p286 has the same files as the p327. So where is the checksum located? Is it inside of the .bz2 file? So how should we install p327, is it just by and is there security concerns, or are there other methods to install it safely? <code>  rvm install ruby-1.9.3-p327 rvm install 1.9.3-p327 --verify-downloads 1",Why does rvm install ruby not work?
How to write cucumber for rails," I'm currently trying to learn cucumber and how to properly utilize it. When searching for best practices most of the old way is described and I haven't really found a good guide. I read about the new way to do it but I have some problems with the best practice.The following is some basic cucumber scenario I have been working on. I wonder if this is ok? I have problems if I should write it as ""I visit"" or ""the user visit"" or ""he visit"" Basically what is preferred?Secondly I wonder how I should formulate the following: This is just something I put together but I feel that it's not the best way.I run into problems in my step definitions files. How would you define the steps to handle the scenarios? I wanted to write something more general, but maybe it's not really possible? Should I have a @second_user attribute or what do you suggest? Thanks for helping me out! <code>  Scenario: Unsuccessful login Given a user has an account When the user tries to log in with invalid information Then the user should see an log in error messageScenario: Successful login Given a user has an account When the user logs in Then the user should see an log in success message And the user should see a sign out linkScenario: Successful logout Given a signed in user Then the user logs out And the user should see an log out success message Scenario: Visit profile of user Given a user And a second user When the user visit the user profile Then the user should see the name of the userScenario: Visit profile of another user Given a user And a second user When the user visit the second users profile Then the user should see the name of the second user def user @user ||= FactoryGirl.create :userendGiven /^a signed in user$/ do user sign_in(@user.email, @user.password)endGiven /^a user has an account$/ do userendWhen /^the user logs in$/ do sign_in(@user.email, @user.password)endWhen /^the user logs out$/ do click_link ('Sign out')endWhen /^the user tries to log in with invalid information$/ do sign_in(""incorrect-email"", ""incorrect-password"")endThen /^the user should see a sign out link$/ do page.should have_link('Sign out')endThen /^the user should see an log in success message$/ do should have_success_message('Signed in successfully.')endWhen /^the user should see an log out success message$/ do should have_success_message('Signed out successfully.')endThen /^the user should see an log in error message$/ do should have_error_message('Invalid email or password.')end",How to write cucumber for rails (Best practice). Feature and Steps
Map and Remove nil values in Ruby," I have a map which either changes a value or sets it to nil. I then want to remove the nil entries from the list. The list doesn't need to be kept.This is what I currently have: I'm aware I could just do a loop and conditionally collect in another array like this: But it doesn't seem that idiomatic. Is there a nice way to map a function over a list, removing/excluding the nils as you go? <code>  # A simple example function, which returns a value or nildef transform(n) rand > 0.5 ? n * 10 : nil }enditems.map! { |x| transform(x) } # [1, 2, 3, 4, 5] => [10, nil, 30, 40, nil]items.reject! { |x| x.nil? } # [10, nil, 30, 40, nil] => [10, 30, 40] new_items = []items.each do |x| x = transform(x) new_items.append(x) unless x.nil?enditems = new_items",How to map and remove nil values in Ruby
unexpected tOROP," I am running Ruby 1.9.This is a valid syntax: But this gives me an error: Why?! <code>  items = (data['DELETE'] || data['delete'] || data['GET'] || data['get'] || data['POST'] || data['post']) items = (data['DELETE'] || data['delete'] || data['GET'] || data['get'] || data['POST'] || data['post'])t.rb:8: syntax error, unexpected tOROP, expecting ')' || data['GET'] || data['get'] |... ^","""OR"" Operator must be placed at end of previous line? (unexpected tOROP)"
How is the sytax of ruby's #alias allowed?," This one's been keeping me up at night for a while. Why does alias take 2 symbol as arguments, but without a comma separating them? That doesn't seem to be any form of valid syntax in any other context. And in fact, if you do use a comma, it actually throws a syntax error. However, if I try to pass 2 symbol in the same way to my own method, it also explodes: So why is the alias method get to use a syntax nothing else gets to use?Is it possible to use this syntax in any other context?What is the benefit of using this odd syntax quirk, when nothing else in the language works this way? I see no discernable benefit to this language inconsistency. <code>  class Foo def bar 'bar' end # What the hell is going on here?!? alias :baz :barendFoo.new.baz #=> 'bar' alias :bar, :baz# syntax error, unexpected ',' def somemethod(*args) :whateverendsomemethod :a :b# syntax error, unexpected ':', expecting $end",How is the syntax of Ruby's alias allowed?
How is the syntax of ruby's #alias allowed?," This one's been keeping me up at night for a while. Why does alias take 2 symbol as arguments, but without a comma separating them? That doesn't seem to be any form of valid syntax in any other context. And in fact, if you do use a comma, it actually throws a syntax error. However, if I try to pass 2 symbol in the same way to my own method, it also explodes: So why is the alias method get to use a syntax nothing else gets to use?Is it possible to use this syntax in any other context?What is the benefit of using this odd syntax quirk, when nothing else in the language works this way? I see no discernable benefit to this language inconsistency. <code>  class Foo def bar 'bar' end # What the hell is going on here?!? alias :baz :barendFoo.new.baz #=> 'bar' alias :bar, :baz# syntax error, unexpected ',' def somemethod(*args) :whateverendsomemethod :a :b# syntax error, unexpected ':', expecting $end",How is the syntax of Ruby's alias allowed?
How to drop the end of an array in Ruby?," Array#drop removes the first n elements of an array. What is a good way to remove the last m elements of an array? Alternately, what is a good way to keep the middle elements of an array (greater than n, less than m)? <code> ",How to drop the end of an array in Ruby
How do I refactor this if statement?," I have a boolean value to check if it is true, then set a local variable. How do I refactor this so it is more Ruby-ish? <code>  if firm.inflection_point inflection_point = 1else inflection_point = 0end",How do I convert boolean values to integers?
ruby 1 to 100 odd numbers in array," Is there any cool way in Ruby to create an array with 1 to 100 with only odd entries (1, 3 etc). I now have a loop for this but that is obviously not a cool way to do it! Any suggestions?My current code: Thanks in advance <code>  def create_1_to_100_odd_array array = [1] i = 3 while i < 100 array.push i i += 2 end arrayend",1 to 100 odd numbers in array
Ruby does 'elseif' still exist," I'm just learning ROR and I came across the if / else statements. I also came across 'elseif' but my text editor (textmate) doesn't pick it up as a keyword, nor does the program run properly. I'm using the book Learn to Program, which was written several years ago. I was wondering if the 'elseif' was changed because, when I simply use 'else', it seems to function properly. <code>  if name == 'Chris' puts 'What a lovely name.'elseif name == 'Katy' puts 'What a lovely name!'end",Does 'elseif' still exist?
What is a good way to memoize data across many instances of an object in Ruby?," Consider: many instances of an object that generates data. It would be great to only generate that data once per run. There are different instances of HighOfNPeriods with different params and different @source_data.Here is how the indicator is used: The method HighOfNPeriods.generate_data is called from within Strategy. Each Strategy gets a new instance of HighOfNPeriods, so it's not possible to pull it out as some kind of global value. Besides that, it should not be global.unless @indicator_data wouldn't work because the data needs to be shared across many instances of HighOfNPeriods.So, the question is: One solution is to store the data using ActiveRecord, but that's not really the way I want to do it at this time because:Not all the generated data can be generated in advance because there are too many permutations of params. It makes more sense to see if it has been generated before and then generate (and save) as necessary.It doesn't take long to generate the data. It may be generated once and used hundreds of times each run.It will be faster to access the data from within the object than to pull it from the database.Ruby 1.9.3 <code>  class HighOfNPeriods < Indicator def generate_data @indicator_data = DataStream.new (0..@source_data.data.count - 1).each do |i| if i < @params[:n_days] ... @indicator_data.add one_data end end class Strategy attr_accessor :indicators def initialize params ... end What is a good way to memoize the instance variable `indicator_data` or the object `HighOfNPeriods` when there are many different instances, some of which have different data?",What is a good way to memoize data across many instances of a class in Ruby?
Ruby: tell if one array contains all elements of another array," I need to tell if an array contains all of the elements of another array with duplicates. So the first array must contain as many or equal of the number of each unique element in the second array.This question answers it for those using an array as a set, but I need to control for duplicates.Update: BenchmarksOn Ruby 1.9.3p194 Results in: Update 2: Larger Arrays Results in: <code>  [1,2,3].contains_all? [1,2] #=> true[1,2,3].contains_all? [1,2,2] #=> false (this is where (a1-a2).empty? fails)[2,1,2,3].contains_all? [1,2,2] #=> true def bench puts Benchmark.measure { 10000.times do [1,2,3].contains_all? [1,2] [1,2,3].contains_all? [1,2,2] [2,1,2,3].contains_all? [1,2,2] end }end Rohit 0.100000 0.000000 0.100000 ( 0.104486)Chris 0.040000 0.000000 0.040000 ( 0.040178)Sergio 0.160000 0.020000 0.180000 ( 0.173940)sawa 0.030000 0.000000 0.030000 ( 0.032393) @a1 = (1..10000).to_a@a2 = (1..1000).to_a@a3 = (1..2000).to_adef bench puts Benchmark.measure { 1000.times do @a1.contains_all? @a2 @a1.contains_all? @a3 @a3.contains_all? @a2 end }end Rohit 9.750000 0.410000 10.160000 ( 10.158182)Chris 10.250000 0.180000 10.430000 ( 10.433797)Sergio 14.570000 0.070000 14.640000 ( 14.637870)sawa 3.460000 0.020000 3.480000 ( 3.475513)",Determine if one array contains all elements of another array
Calculate statistics on arrays with ruby," I'm building a web app that needs to calculate statistics on a data set. I need to calculate percentiles, averages, modes, and other statistical functions on arrays.Normally in Python, I would just use scipy, numpy, or nltk which has a huge library of stat array functions. Are there any ruby gems or libraries I can utilize to do this?In the case that there aren't any existing libraries, is there an easy way to do my data processing in Python while keeping my app in Ruby/Rails? <code> ",Calculate statistics on arrays
"how to force rack:session + sinatra to read ""rack.session"" from data instead of cookies"," I am dealing with oauth 1.0 (twitter and flickr). Website works at port 80 and oauth server works at port 8080Algorithm:send ajax request to oauth server to check if user have valid access_tokenopen authorization window if user have no access_token or access_token is expiredsave access_token in user's session at the oauth serversend sharing data to the oauth serverIt uses sinatra + rack:session + rack::session::sequel + sqlite to store sessions. It sends Set-Cookie: rack.session=id in each responseI am using 2 types of request: crossdomain ajax with jquery and usual request with window.open. I have a big security problem passing cookies to crossdomain ajax request. No matter that server's response headers contains Access-Control-Allow-Headers: *chromium will throw security error: Refused to set unsafe header ""Cookie""I want to avoid this problem by passing rack.session=id to post data and load it: But I cant find in documentation how to do this <code>  before ""/twitter/connect.json"" do session = Rack::Session::something(params[""rack.session""])end","how to force rack:session + sinatra to read ""rack.session"" from params instead of cookies"
Do Python regular expressions have an equivilant to Ruby's atomic grouping?," Ruby's regular expressions have a feature called atomic grouping (?>regexp), described here, is there any equivalent in Python's re module? <code> ",Do Python regular expressions have an equivalent to Ruby's atomic grouping?
How validate for non-model (and even non object) field," I have a form that has a lot of fields taken from an array (not from model or object). How can I validate the presence of these fields? <code>  <%= simple_form_for :solve, :url => solve_problem_path do |f| %> <% @input_variables.each do |label| %> <%= f.input label %> <% end %> ...<% end %>",How to validate a non-model (and even non-object) field
Ruby - Enforce arity on a block passed to a method," Is there any way to ""turn on"" the strict arity enforcement of a Proc instantiated using Proc.new or Kernel.proc, so that it behaves like a Proc instantiated with lambda?My initialize method takes a block &action and assigns it to an instance variable. I want action to strictly enforce arity, so when I apply arguments to it later on, it raises an ArgumentError that I can rescue and raise a more meaningful exception. Basically: Unfortunately, action does not enforce arity by default: action.to_proc doesn't work, nor does lambda(&action).Any other ideas? Or better approaches to the problem?Thanks! <code>  class Command attr_reader :name, :action def initialize(name, &action) @name = name @action = action end def perform(*args) begin action.call(*args) rescue ArgumentError raise(WrongArity.new(args.size)) end endendclass WrongArity < StandardError; end c = Command.new('second_argument') { |_, y| y }c.perform(1) # => nil",Can I enforce arity on a block passed to a method?
Copying gems from previous version of ruby in rbenv," I installed Ruby 1.9.3-p286 with rbenv. Now, after installing a newer version (p327), obviously, it doesn't know anything about the GEMs installed with the previous version.Is it possible to copy Gems from that version to the newer one, so that it won't be needed to download them all again? <code> ",Copying gems from previous version of Ruby in rbenv
How can I check if a file is beeing used by other application?," I need to process a video file, and I need the file to be completed before I open it. So I need to check if the file is opened or not before processing it, but opened by another process. Any idea how to check this? I'm using Linux. <code> ",How can I check if a file is being used by other application?
simple_form w/ Bootsrap check box," I'm using simple_form with Bootstrap and I would like to have my ""Remember me"" check box be inline to the left of the label, as in the Twitter Bootstrap docs: http://twitter.github.com/bootstrap/base-css.html#formsMy form code looks like this: The result is the the ""Remember me"" label on top of a check box. What have I messed up? <code>  <%= simple_form_for(resource, :as => resource_name, :url => session_path(resource_name), :html => { :class => 'well'}) do |f| %> <%= f.input :email %> <%= f.input :password %> <%= f.input :remember_me, :as => :boolean if devise_mapping.rememberable? %> <%= f.button :submit, ""Sign In"" %><% end %>",simple_form with Bootstrap check box
Ruby: How to find all indices in array that match a given condition?," Given an array, how can I find all indices of elements those match a given condition?For example, if I have: To find all indices where the item is x, I could do: or Is there a nicer way to achieve this? <code>  arr = ['x', 'o', 'x', '.', '.', 'o', 'x'] arr.each_with_index.map { |a, i| a == 'x' ? i : nil }.compact # => [0, 2, 6] (0..arr.size-1).select { |i| arr[i] == 'x' } # => [0, 2, 6]",Find indices of elements that match a given condition
Ruby: How to find all ELEMENTS in array that match a given condition?," Given an array, how can I find all indices of elements those match a given condition?For example, if I have: To find all indices where the item is x, I could do: or Is there a nicer way to achieve this? <code>  arr = ['x', 'o', 'x', '.', '.', 'o', 'x'] arr.each_with_index.map { |a, i| a == 'x' ? i : nil }.compact # => [0, 2, 6] (0..arr.size-1).select { |i| arr[i] == 'x' } # => [0, 2, 6]",Find indices of elements that match a given condition
Ruby: How to find all elements in an array that match a given condition?," Given an array, how can I find all indices of elements those match a given condition?For example, if I have: To find all indices where the item is x, I could do: or Is there a nicer way to achieve this? <code>  arr = ['x', 'o', 'x', '.', '.', 'o', 'x'] arr.each_with_index.map { |a, i| a == 'x' ? i : nil }.compact # => [0, 2, 6] (0..arr.size-1).select { |i| arr[i] == 'x' } # => [0, 2, 6]",Find indices of elements that match a given condition
Ruby: How to find all indices of elements that match a given condition?," Given an array, how can I find all indices of elements those match a given condition?For example, if I have: To find all indices where the item is x, I could do: or Is there a nicer way to achieve this? <code>  arr = ['x', 'o', 'x', '.', '.', 'o', 'x'] arr.each_with_index.map { |a, i| a == 'x' ? i : nil }.compact # => [0, 2, 6] (0..arr.size-1).select { |i| arr[i] == 'x' } # => [0, 2, 6]",Find indices of elements that match a given condition
Server-Sent Events through Nginx," On server-side using Sinatra with a stream block. On client side: When i using app directly, via http://localhost:9292/, everything works perfect. The connection is persistent and all messages are passed to all clients.However when it goes through Nginx, http://chat.dev, the connection are dropped and a reconnection fires every second or so.Nginx setup looks ok to me: Tried keepalive 1024 in upstream section as well as proxy_set_header Connection keep-alive;in location.Nothing helps :(No persistent connections and messages not passed to any clients. <code>  get '/stream', :provides => 'text/event-stream' do stream :keep_open do |out| connections << out out.callback { connections.delete(out) } endend var es = new EventSource('/stream');es.onmessage = function(e) { $('#chat').append(e.data + ""\n"") }; upstream chat_dev_upstream { server 127.0.0.1:9292;}server { listen 80; server_name chat.dev; location / { proxy_pass http://chat_dev_upstream; proxy_buffering off; proxy_cache off; proxy_set_header Host $host; }}",EventSource / Server-Sent Events through Nginx
check whether element is present (ruby Selenium webdriver)," Is there anyway to check whether an element is present in Selenium web driver? I try to use this code: but it will break in exception, which is not what I expected because I still want the script to continue running. <code>  if @driver.find_element(:link, ""Save"").displayed? == true",Check whether element is present
"what is $_[0] ,$_[1]in ruby?"," I am a Java developer, and I have been given Ruby code to understand and later to work on.I went through the Ruby tutorials on tutorialspoint.com but I can't figure out what $_[0] is.It is being assigned to a variable in the code, and it is definitely not a command-line argument because I wrote code to test that and it failed.So, can anyone say what the significance of it is? <code> ","What is $_[0] ,$_[1] in Ruby?"
postgresql gem pg was unable to install," My DB is PostgreSQL.I am on CENTOS.... While installing the pg gem I received the following error. I reinstalled to clear my YAML problem also, which didn't work, but it is just a warning. My main problem is the installation of the pg gem: I also tried with the following command, but to no use: <code>  [root@vdimc04 ~]# gem install pg/usr/local/lib/ruby/1.9.1/yaml.rb:56:in `<top (required)>':It seems your ruby installation is missing psych (for YAML output).To eliminate this warning, please install libyaml and reinstall your ruby.Building native extensions. This could take a while...ERROR: Error installing pg: ERROR: Failed to build gem native extension. /usr/local/bin/ruby extconf.rbchecking for pg_config... noNo pg_config... trying anyway. If building fails, please try again with --with-pg-config=/path/to/pg_configchecking for libpq-fe.h... noCan't find the 'libpq-fe.h header*** extconf.rb failed ***Could not create Makefile due to some reason, probably lack ofnecessary libraries and/or headers. Check the mkmf.log file for moredetails. You may need configuration options.Provided configuration options: --with-opt-dir --without-opt-dir --with-opt-include --without-opt-include=${opt-dir}/include --with-opt-lib --without-opt-lib=${opt-dir}/lib --with-make-prog --without-make-prog --srcdir=. --curdir --ruby=/usr/local/bin/ruby --with-pg --without-pg --with-pg-dir --without-pg-dir --with-pg-include --without-pg-include=${pg-dir}/include --with-pg-lib --without-pg-lib=${pg-dir}/lib --with-pg-config --without-pg-config --with-pg_config --without-pg_configGem files will remain installed in /usr/local/lib/ruby/gems/1.9.1/gems/pg-0.14.1 for inspection.Results logged to /usr/local/lib/ruby/gems/1.9.1/gems/pg-0.14.1/ext/gem_make.out gem install pg -- --with-pg-config=/usr/pgsql-9.1/bin/pg_config",PostgreSQL gem pg was unable to install
"Using Capybara with RSpec, how can I add the spec/features dir to be tested using the rspec . command?"," I'm using the new Capybara DSL with rspec following the short guideline located hereAnd the tests added to the spec/features directory run well alone, ie.rails_project$ rspec spec/features/my_first_feature.rbHowever the spec/features directory is totally ignored when I try to run the tests for the entire spec/ directory like this:rails_project$ rspec .There is no mention in the guide about how to include this directory (or other directory) to accomplish this inclusion that I desire. I really need this for continuous integration of my project. Can anybody please tell me how to do it?Thanks! <code> ","Capybara + RSpec, spec/features dir being ignored by the rspec . command?"
what does def self.function name mean in ruby?, Can anyone explain to me what the meaning of adding self to the method definition is? Is it similar to the this keyword in java?  <code> ,What does def `self.function` name mean?
Why foo is not nil anymore?, Why in below code snippet foo replaces its definition? for the first time foo is nil Now if I call foo again: As you can see foo is not nil anymore. Can some one explain this to me? thanks. <code>  def foo def foo 1 endend foo=> nilfoo.foo=> 1 foo=> 1,Why foo is not nil anymore - or function within function
"trying to download file from ftp in forked process results in ""500 Illegal PORT command"" error"," If I execute this locally, everything works fine: If I attempt to execute it on the Linux server I am using, the result is: What could be the problem? <code>  require 'net/ftp'ftp=Net::FTP.new(""myftpserver.com"", ""username"", ""password"")ftp.getbinaryfile(""/myfile.zip"",""localfile.zip"")ftp.close /usr/local/lib/ruby/1.9.1/net/ftp.rb:273:in `getresp': 500 IllegalPORT command. (Net::FTPPermError) from/usr/local/lib/ruby/1.9.1/net/ftp.rb:281:in `voidresp' from/usr/local/lib/ruby/1.9.1/net/ftp.rb:304:in `block in voidcmd' from/usr/local/lib/ruby/1.9.1/monitor.rb:201:in `mon_synchronize' from/usr/local/lib/ruby/1.9.1/net/ftp.rb:302:in `voidcmd' from/usr/local/lib/ruby/1.9.1/net/ftp.rb:317:in `sendport' from/usr/local/lib/ruby/1.9.1/net/ftp.rb:325:in `makeport' from/usr/local/lib/ruby/1.9.1/net/ftp.rb:358:in `transfercmd' from/usr/local/lib/ruby/1.9.1/net/ftp.rb:420:in `block (2 levels) inretrbinary' from /usr/local/lib/ruby/1.9.1/net/ftp.rb:166:in`with_binary' from /usr/local/lib/ruby/1.9.1/net/ftp.rb:419:in `blockin retrbinary' from /usr/local/lib/ruby/1.9.1/monitor.rb:201:in`mon_synchronize' from /usr/local/lib/ruby/1.9.1/net/ftp.rb:418:in`retrbinary' from /usr/local/lib/ruby/1.9.1/net/ftp.rb:539:in`getbinaryfile'","Trying to download file from FTP results in an ""500 Illegal PORT command"" error"
"trying to download file from ftp in simple forked process results in ""500 Illegal PORT command"" error"," If I execute this locally, everything works fine: If I attempt to execute it on the Linux server I am using, the result is: What could be the problem? <code>  require 'net/ftp'ftp=Net::FTP.new(""myftpserver.com"", ""username"", ""password"")ftp.getbinaryfile(""/myfile.zip"",""localfile.zip"")ftp.close /usr/local/lib/ruby/1.9.1/net/ftp.rb:273:in `getresp': 500 IllegalPORT command. (Net::FTPPermError) from/usr/local/lib/ruby/1.9.1/net/ftp.rb:281:in `voidresp' from/usr/local/lib/ruby/1.9.1/net/ftp.rb:304:in `block in voidcmd' from/usr/local/lib/ruby/1.9.1/monitor.rb:201:in `mon_synchronize' from/usr/local/lib/ruby/1.9.1/net/ftp.rb:302:in `voidcmd' from/usr/local/lib/ruby/1.9.1/net/ftp.rb:317:in `sendport' from/usr/local/lib/ruby/1.9.1/net/ftp.rb:325:in `makeport' from/usr/local/lib/ruby/1.9.1/net/ftp.rb:358:in `transfercmd' from/usr/local/lib/ruby/1.9.1/net/ftp.rb:420:in `block (2 levels) inretrbinary' from /usr/local/lib/ruby/1.9.1/net/ftp.rb:166:in`with_binary' from /usr/local/lib/ruby/1.9.1/net/ftp.rb:419:in `blockin retrbinary' from /usr/local/lib/ruby/1.9.1/monitor.rb:201:in`mon_synchronize' from /usr/local/lib/ruby/1.9.1/net/ftp.rb:418:in`retrbinary' from /usr/local/lib/ruby/1.9.1/net/ftp.rb:539:in`getbinaryfile'","Trying to download file from FTP results in an ""500 Illegal PORT command"" error"
"trying to download file from ftp results in ""500 Illegal PORT command"" error"," If I execute this locally, everything works fine: If I attempt to execute it on the Linux server I am using, the result is: What could be the problem? <code>  require 'net/ftp'ftp=Net::FTP.new(""myftpserver.com"", ""username"", ""password"")ftp.getbinaryfile(""/myfile.zip"",""localfile.zip"")ftp.close /usr/local/lib/ruby/1.9.1/net/ftp.rb:273:in `getresp': 500 IllegalPORT command. (Net::FTPPermError) from/usr/local/lib/ruby/1.9.1/net/ftp.rb:281:in `voidresp' from/usr/local/lib/ruby/1.9.1/net/ftp.rb:304:in `block in voidcmd' from/usr/local/lib/ruby/1.9.1/monitor.rb:201:in `mon_synchronize' from/usr/local/lib/ruby/1.9.1/net/ftp.rb:302:in `voidcmd' from/usr/local/lib/ruby/1.9.1/net/ftp.rb:317:in `sendport' from/usr/local/lib/ruby/1.9.1/net/ftp.rb:325:in `makeport' from/usr/local/lib/ruby/1.9.1/net/ftp.rb:358:in `transfercmd' from/usr/local/lib/ruby/1.9.1/net/ftp.rb:420:in `block (2 levels) inretrbinary' from /usr/local/lib/ruby/1.9.1/net/ftp.rb:166:in`with_binary' from /usr/local/lib/ruby/1.9.1/net/ftp.rb:419:in `blockin retrbinary' from /usr/local/lib/ruby/1.9.1/monitor.rb:201:in`mon_synchronize' from /usr/local/lib/ruby/1.9.1/net/ftp.rb:418:in`retrbinary' from /usr/local/lib/ruby/1.9.1/net/ftp.rb:539:in`getbinaryfile'","Trying to download file from FTP results in an ""500 Illegal PORT command"" error"
How do I select a random item from a hash in ruby (not rails)," I have an array of countries: And am building some random data for testing like this: How do I get a random value from the @countries hash? does not work and returns NoMethodError: private methodrand' called for #`. <code>  @countries = [""Canada"", ""Denmark"", ""Germany"", ""Isle of Man"", ""Namibia"", ""Qatar"", ""South Africa"", ""United Kingdom"",""United States""] @test = [{ :name => ""AAA -""+Faker::Name.name, :country => @countries.???? ....}] @countries.rand(mlen)",How do I select a random item from an array in ruby (not rails)
Synchronizing threads at mid-point in Ruby," I'm trying to ""replicate"" the behaviour of CUDA's __synchtreads() function in Ruby. Specifically, I have a set of N threads that need to execute some code, then all wait on each other at mid-point in execution before continuing with the rest of their business. For example: What tools do I need to use to accomplish this? I tried using a global hash, and then sleeping until all the threads have set a flag indicating they're done with the first part of the code. I couldn't get it to work properly; it resulted in hangs and deadlock. I think I need to use a combination of Mutex and ConditionVariable but I am unsure as to why/how.Edit: 50 views and no answer! Looks like a candidate for a bounty... <code>  x = 0a = Thread.new do x = 1 syncthreads() endb = Thread.new do syncthreads() # x should have been changed raise if x == 0end[a,b].each {|t| t.join }",Implementing a synchronization barrier in Ruby
Unable to install gem - Failed to build gem native extension," Ruby 1.9.3The part of Gemfile When I'm trying to install gems, I get an error Then I'm doing this and getting an error as well.What did I miss? <code>  #...............gem ""pony""gem ""bcrypt-ruby"", :require => ""bcrypt""gem ""nokogiri"" #.................. alex@ubuntu:~/$ bundleFetching gem metadata from http://rubygems.org/.........Fetching gem metadata from http://rubygems.org/..Enter your password to install the bundled RubyGems to your system: #####............................................................Installing bcrypt-ruby (3.0.1) with native extensions Gem::Installer::ExtensionBuildError: ERROR: Failed to build gem native extension. /usr/bin/ruby1.9.1 extconf.rb /usr/lib/ruby/1.9.1/rubygems/custom_require.rb:36:in `require': cannot load such file -- mkmf (LoadError) from /usr/lib/ruby/1.9.1/rubygems/custom_require.rb:36:in `require' from extconf.rb:36:in `<main>'Gem files will remain installed in /home/alex/.bundler/tmp/5526/gems/bcrypt-ruby-3.0.1 for inspection.Results logged to /home/alex/.bundler/tmp/5526/gems/bcrypt-ruby-3.0.1/ext/mri/gem_make.outAn error occurred while installing bcrypt-ruby (3.0.1), and Bundler cannot continue.Make sure that `gem install bcrypt-ruby -v '3.0.1'` succeeds before bundling. sudo gem install bcrypt-ruby -v '3.0.1'Building native extensions. This could take a while...ERROR: Error installing bcrypt-ruby: ERROR: Failed to build gem native extension. /usr/bin/ruby1.9.1 extconf.rb/usr/lib/ruby/1.9.1/rubygems/custom_require.rb:36:in `require': cannot load such file -- mkmf (LoadError) from /usr/lib/ruby/1.9.1/rubygems/custom_require.rb:36:in `require' from extconf.rb:36:in `<main>'Gem files will remain installed in /var/lib/gems/1.9.1/gems/bcrypt-ruby-3.0.1 for inspection.Results logged to /var/lib/gems/1.9.1/gems/bcrypt-ruby-3.0.1/ext/mri/gem_make.out",Unable to install gem - Failed to build gem native extension - cannot load such file -- mkmf (LoadError)
many to many table with an extra column in Rails," Is it possible to do this with only two Rails models, User and Event: The problem is, the user can confirm or not their presence in anevent, for this I used the table Events_Users, column confirmed (1 forconfirmed). How can I do this with Rails ActiveRecord without an model""Event_User""? How can I manipulate the confirmed column in the Usermodel?I am using Rails 3.2.9 . <code>  Users|id |name |age ||1 |danilo |26 ||2 |joe |23 ||3 |carlos |50 ||4 |katy |45 |Events_Users|event_id |user_id |confirmed ||1 |1 |1 ||3 |3 |0 ||4 |3 |1 ||2 |3 |1 |Events|id |name |date ||1 |the end of the year |31/12/2012 ||2 |the end of the world |21/12/2012 ||3 |Party |18/12/2012 ||4 |Dinner |19/12/2012 |",Many to many table with an extra column in Rails
Unable to install therubyracer on centos," I'm trying to install therubyracer on my centos server and i'm having hella problems. So then i tried to install this: Output of which g++ Info you asked for: EDITAfter using @Chris's solution, i now get libv8 to install, but therubyracer still doesn't install and gives me this: <code>  $ gem install therubyracerBuilding native extensions. This could take a while...ERROR: Error installing therubyracer: ERROR: Failed to build gem native extension. /usr/local/rvm/rubies/ruby-1.9.3-p125/bin/ruby extconf.rbchecking for main() in -lpthread... yeschecking for v8.h... no*** extconf.rb failed ***Could not create Makefile due to some reason, probably lack ofnecessary libraries and/or headers. Check the mkmf.log file for moredetails. You may need configuration options.Provided configuration options: --with-opt-dir --with-opt-include --without-opt-include=${opt-dir}/include --with-opt-lib --without-opt-lib=${opt-dir}/lib --with-make-prog --without-make-prog --srcdir=. --curdir --ruby=/usr/local/rvm/rubies/ruby-1.9.3-p125/bin/ruby --with-pthreadlib --without-pthreadlib --enable-debug --disable-debug --with-v8-dir --without-v8-dir --with-v8-include --without-v8-include=${v8-dir}/include --with-v8-lib --without-v8-lib=${v8-dir}/lib/usr/local/rvm/gems/ruby-1.9.3-p125@famnfo/gems/therubyracer-0.11.0/ext/v8/build.rb:42:in `build_with_system_libv8': unable to locate libv8. Please see output for details (RuntimeError) from extconf.rb:22:in `<main>' The Ruby Racer requires libv8 ~> 3.11.8 to be present on your system in order to compile and link, but it could not be found. In order to resolve this, you will either need to manually install an appropriate libv8 and make sure that this build process can find it. If you install it into the standard system path, then it should just be picked up automatically. Otherwise, you'll have to pass some extra flags to the build process as a hint. If you don't want to bother with all that, there is a rubygem that will do all this for you. You can add following line to your Gemfile: gem 'libv8', '~> 3.11.8' We hope that helps, and we apologize, but now we have to push the eject button on this install. thanks, The Mgmt.Gem files will remain installed in /usr/local/rvm/gems/ruby-1.9.3-p125@famnfo/gems/therubyracer-0.11.0 for inspection.Results logged to /usr/local/rvm/gems/ruby-1.9.3-p125@famnfo/gems/therubyracer-0.11.0/ext/v8/gem_make.out [root@allthingswebdesign current]# gem install libv8Building native extensions. This could take a while...ERROR: Error installing libv8: ERROR: Failed to build gem native extension. /usr/local/rvm/rubies/ruby-1.9.3-p125/bin/ruby extconf.rbcreating Makefilewhich: no g++44 in (/usr/local/rvm/gems/ruby-1.9.3-p125/bin:/usr/local/rvm/gems/ruby-1.9.3-p125@global/bin:/usr/local/rvm/rubies/ruby-1.9.3-p125/bin:/usr/local/rvm/gems/ruby-1.9.3-p125@famnfo/bin:/usr/local/rvm/gems/ruby-1.9.3-p125@global/bin:/usr/local/rvm/rubies/ruby-1.9.3-p125/bin:/usr/local/rvm/bin:/usr/kerberos/sbin:/usr/kerberos/bin:/usr/local/bin:/bin:/usr/bin)which: no g++46 in (/usr/local/rvm/gems/ruby-1.9.3-p125/bin:/usr/local/rvm/gems/ruby-1.9.3-p125@global/bin:/usr/local/rvm/rubies/ruby-1.9.3-p125/bin:/usr/local/rvm/gems/ruby-1.9.3-p125@famnfo/bin:/usr/local/rvm/gems/ruby-1.9.3-p125@global/bin:/usr/local/rvm/rubies/ruby-1.9.3-p125/bin:/usr/local/rvm/bin:/usr/kerberos/sbin:/usr/kerberos/bin:/usr/local/bin:/bin:/usr/bin)which: no g++48 in (/usr/local/rvm/gems/ruby-1.9.3-p125/bin:/usr/local/rvm/gems/ruby-1.9.3-p125@global/bin:/usr/local/rvm/rubies/ruby-1.9.3-p125/bin:/usr/local/rvm/gems/ruby-1.9.3-p125@famnfo/bin:/usr/local/rvm/gems/ruby-1.9.3-p125@global/bin:/usr/local/rvm/rubies/ruby-1.9.3-p125/bin:/usr/local/rvm/bin:/usr/kerberos/sbin:/usr/kerberos/bin:/usr/local/bin:/bin:/usr/bin)Unable to find a compiler officially supported by v8.It is recommended to use GCC v4.4 or higherUsing compiler: g++Traceback (most recent call last): File ""build/gyp/gyp"", line 15, in ? import gyp File ""build/gyp/pylib/gyp/__init__.py"", line 8, in ? import gyp.input File ""build/gyp/pylib/gyp/input.py"", line 14, in ? import gyp.common File ""build/gyp/pylib/gyp/common.py"", line 375 with open(source_path) as source_file: ^SyntaxError: invalid syntaxgmake: *** [out/Makefile.x64] Error 1GYP_GENERATORS=make \ build/gyp/gyp --generator-output=""out"" build/all.gyp \ -Ibuild/standalone.gypi --depth=. \ -Dv8_target_arch=x64 \ -S.x64 -Dhost_arch=x64Gem files will remain installed in /usr/local/rvm/gems/ruby-1.9.3-p125@famnfo/gems/libv8-3.11.8.4 for inspection.Results logged to /usr/local/rvm/gems/ruby-1.9.3-p125@famnfo/gems/libv8-3.11.8.4/ext/libv8/gem_make.out[root@allthingswebdesign current]# $ which g++/usr/bin/g++ $ /usr/bin/g++ --versiong++ (GCC) 4.1.2 20080704 (Red Hat 4.1.2-52)Copyright (C) 2006 Free Software Foundation, Inc.This is free software; see the source for copying conditions. There is NOwarranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.[root@allthingswebdesign current]# which g++/usr/bin/g++[root@allthingswebdesign current]# which g++44/usr/bin/g++44[root@allthingswebdesign current]# [root@allthingswebdesign current]# cd /usr/bin/[root@allthingswebdesign bin]# ls -al g++*-rwxr-xr-x 4 root root 218432 May 10 2012 g++-rwxr-xr-x 2 root root 263704 Feb 21 2012 g++44lrwxrwxrwx 1 root root 12 Dec 9 17:21 g++-4.4 -> /usr/bin/g++ [root@allthingswebdesign node-v0.8.15]# which gcc/usr/bin/gcc[root@allthingswebdesign node-v0.8.15]# which g++/usr/bin/g++[root@allthingswebdesign node-v0.8.15]# which g++44/usr/bin/g++44[root@allthingswebdesign node-v0.8.15]# ls -la /usr/bin/g++-rwxr-xr-x 4 root root 218432 May 10 2012 /usr/bin/g++[root@allthingswebdesign node-v0.8.15]# [root@allthingswebdesign famnfo.com]# gem install therubyracerFetching: therubyracer-0.11.0.gem (100%)Building native extensions. This could take a while...ERROR: Error installing therubyracer: ERROR: Failed to build gem native extension. /usr/local/rvm/rubies/ruby-1.9.3-p125/bin/ruby extconf.rbchecking for main() in -lpthread... yescreating Makefilemakecompiling accessor.ccaccessor.cc:181:2: warning: no newline at end of filecompiling array.ccarray.cc:26:2: warning: no newline at end of filecompiling backref.ccbackref.cc:45:2: warning: no newline at end of filecompiling constants.ccconstants.cc:34:2: warning: no newline at end of filecompiling constraints.ccconstraints.cc:52:2: warning: no newline at end of filecompiling context.cccompiling date.ccdate.cc:18:2: warning: no newline at end of filecompiling exception.ccexception.cc:38:2: warning: no newline at end of filecompiling external.ccexternal.cc:43:2: warning: no newline at end of filecompiling function.ccfunction.cc:58:2: warning: no newline at end of filecompiling gc.ccgc.cc:43:2: warning: no newline at end of filecompiling handles.cchandles.cc:34:2: warning: no newline at end of filecompiling heap.ccheap.cc:31:2: warning: no newline at end of filecompiling init.ccinit.cc:39:2: warning: no newline at end of filecompiling invocation.ccinvocation.cc:86:2: warning: no newline at end of filecompiling locker.cclocker.cc:77:2: warning: no newline at end of filecompiling message.ccmessage.cc:51:2: warning: no newline at end of filecompiling object.ccobject.cc:334:2: warning: no newline at end of filecompiling primitive.ccprimitive.cc:8:2: warning: no newline at end of filecompiling rr.ccrr.cc:83:2: warning: no newline at end of filecompiling script.ccscript.cc:80:17: warning: no newline at end of filecompiling signature.ccsignature.cc:18:2: warning: no newline at end of filecompiling stack.ccstack.cc:76:2: warning: no newline at end of filecompiling string.ccstring.cc:47:17: warning: no newline at end of filecompiling template.cctemplate.cc:175:2: warning: no newline at end of filecompiling trycatch.cctrycatch.cc:87:2: warning: no newline at end of filecompiling v8.ccv8.cc:87:2: warning: no newline at end of filecompiling value.ccvalue.cc:239:2: warning: no newline at end of filelinking shared-object v8/init.so/usr/bin/ld:/usr/local/rvm/gems/ruby-1.9.3-p125/gems/libv8-3.11.8.3-x86_64-linux/vendor/v8/out/x64.release/obj.target/tools/gyp/libv8_base.a: file format not recognized; treating as linker script/usr/bin/ld:/usr/local/rvm/gems/ruby-1.9.3-p125/gems/libv8-3.11.8.3-x86_64-linux/vendor/v8/out/x64.release/obj.target/tools/gyp/libv8_base.a:1: syntax errorcollect2: ld returned 1 exit statusmake: *** [init.so] Error 1Gem files will remain installed in /usr/local/rvm/gems/ruby-1.9.3-p125/gems/therubyracer-0.11.0 for inspection.Results logged to /usr/local/rvm/gems/ruby-1.9.3-p125/gems/therubyracer-0.11.0/ext/v8/gem_make.out",Unable to install therubyracer on centos (errors with V8 and GCC)
Ruby using += in conjunction with the send method," How can one use send with +=? <code>  a = 20; a.send ""+="", 10undefined method `+=' for 20:Fixnuma = 20; a += 10=> 30",Using `+=` with `send` method
remove decimal from number_to_currency," I have a float price: I get: $39.00How can I remove .00, I want get: <code>  number_to_currency(m.price, :locale => 'en_us') $39",Rails: remove decimal from number_to_currency
Ruby If..ElsIf..Else On Single Line?," With the ruby ternary operator we can write the following logic for a simple if else construct: But what if I wanted to write this as if foo 'a' elsif bar 'b' else 'c'?I could write it as the following, but it's a little difficult to follow: Are there any better options for handling such a scenario or is this our best bet if we wish to condense if..elsif..else logic into a single line?  <code>  a = true ? 'a' : 'b' #=> ""a"" foo = truea = foo ? 'a' : (bar ? 'b' : 'c') #=> ""a""foo = falsebar = truea = foo ? 'a' : (bar ? 'b' : 'c') #=> ""b""",Ruby if .. elsIf .. else on a single line?
Does ruby support multiple inheritance, How does ruby support multiple inheritance so that I can inherit from multiple classes? <code> ,How does ruby support multiple inheritance?
punctuation after a link in ruby hamly," I have this code: That renders:A debtor with the court's approval can hire attorneys via Section 327.I know this is extremely picky, but I do not want the period bolded. When I try: It yields:A debtor with the court's approval can hire attorneys via Section 327 .I would like to know how do I get:A debtor with the court's approval can hire attorneys via Section 327. <code>  %p A debtor with the court's approval can hire attorneys via %a{:id=>""proc"",:href=>'/codes#rule327'}Section 327. %p A debtor with the court's approval can hire attorneys via %a{:id=>""proc"",:href=>'/codes#rule327'}Section 327 \.",punctuation after a link in ruby haml
ruby: is it possible to convert a JSON string to an object?," Possible Duplicate: Parsing a JSON string in ruby Is it possible to convert a JSON string into a Ruby object? I would like to access its information with an expression similar to: JSON string: <code>  drawer.stations.tv.header { ""drawer"" : { ""stations"" : { ""tv"" : { ""header"" : ""TV Channels"", ""logos"" : { ""one"" : ""www1"", ""two"" : ""www2"", ""three"" : ""www3"" } } } }}",Is it possible to convert a JSON string to an object?
"Ruby on rails: How are these two different? render @users, render 'new'"," In RoR, I sometimes see: or How are the two different? <code>  render @users render 'new' ",How are render @users and render 'new' different?
Ruby lazy regexp search through a file," I need to scan a 300MB text file with a regex.Reading the whole file and taking it into a variable eats over 700MB of RAM and then fails with ""cannot allocate memory"" error.The match can be in two or three lines, so I cannot use line-to-line stepping in loop.Is there any lazy method to do a full file scan with a regex without reading it into a separate variable?UPDDone. Now you can use this function to read by chunks.Modify it for your goals. <code>  def prepare_session_hash(fname, regex_string, start=0) @session_login_hash = {} File.open(fname, 'rb') { |f| fsize = f.size bsize = fsize / 8 if start > 0 f.seek(start) end overlap = 200 while true if (f.tell() >= overlap) and (f.tell() < fsize) f.seek(f.tell() - overlap) end buffer = f.read(bsize) if buffer buffer.scan(s) { |match| @session_login_hash[match[0]] = match[1] } else return @session_login_hash end end }end",Regexp search through a very large file
Regexp search through a huge file," I need to scan a 300MB text file with a regex.Reading the whole file and taking it into a variable eats over 700MB of RAM and then fails with ""cannot allocate memory"" error.The match can be in two or three lines, so I cannot use line-to-line stepping in loop.Is there any lazy method to do a full file scan with a regex without reading it into a separate variable?UPDDone. Now you can use this function to read by chunks.Modify it for your goals. <code>  def prepare_session_hash(fname, regex_string, start=0) @session_login_hash = {} File.open(fname, 'rb') { |f| fsize = f.size bsize = fsize / 8 if start > 0 f.seek(start) end overlap = 200 while true if (f.tell() >= overlap) and (f.tell() < fsize) f.seek(f.tell() - overlap) end buffer = f.read(bsize) if buffer buffer.scan(s) { |match| @session_login_hash[match[0]] = match[1] } else return @session_login_hash end end }end",Regexp search through a very large file
Display http headers using ruby's open-uri," with Open::URI, I can do the following: Is it possible to get the HTTP headers of a request so things can be debugged, something like Curls' curl -I http://google.com? Is this possible? <code>  require 'open-uri'#check statusopen('http://google.com').status#get entire htmlopen('http://google.com').read $ curl -I google.comHTTP/1.1 301 Moved PermanentlyLocation: http://www.google.com/Content-Type: text/html; charset=UTF-8Date: Mon, 17 Dec 2012 14:28:17 GMTExpires: Wed, 16 Jan 2013 14:28:17 GMTCache-Control: public, max-age=2592000Server: gwsContent-Length: 219X-XSS-Protection: 1; mode=blockX-Frame-Options: SAMEORIGIN",Display HTTP headers using Open::URI?
How do I translate this Python Code into Ruby? (HOF)," I'm trying to learn Ruby right now after learning Python and I'm having trouble translating this code to Ruby: Do I have to translate this using blocks? Or is there a similar syntax in Ruby? <code>  def compose1(f, g): """"""Return a function h, such that h(x) = f(g(x))."""""" def h(x): return f(g(x))return h",Using Higher Order Functions in Ruby
How to pass a function instead of a block to collect method in Ruby?," Possible Duplicate: Shorter way to pass every element of an array to a function I know this will work: but in Python, I just need to write: or I was wondering whether I can skip the steps of making a block in Ruby, and did this: Does anyone have ideas about how to do this? <code>  def inc(a) a+1end[1,2,3].map{|a| inc a} map(inc, [1,2,3]) [inc(x) for x in [1,2,3]) [1,2,3].map inc# => ArgumentError: wrong number of arguments (0 for 1)# from (irb):19:in `inc'",How to pass a function instead of a block
colon sign `:` give translation error in internationalization api. ruby on rails," I have a string in en: locale which is The colon sign is giving me error which is can not load translations from C:/Documents and Settings/rajg/discoveryaws/branches/internationalization/config/locales/en.yml, expected it to return a hash, but does notHow can I make this work? <code>  display_device: to play : get player",colon (:) gives load error in locale YAML file
parsing json and writing unit tests," I'm brand new to ruby (first day working with ruby) so please forgive any novice questions and lack of understanding.I'm trying to validate the responses to http callouts.For example, let's say the endpoint is the following: And, I'm trying to authenticate a user by sending a get request like this: Now, I want to validate the response and do the following:- parse the response to ensure that it is valid JSON- do some validation and verify the JSON has the correct data (verify that id == 4 for example)- if an error is encountered, raise an exception using the 'raise' method.In my first feeble attempt I tried the following: Now, this returned that getting the current user was successful, but how do I actually parse the json, verify the correct id, and raise an exception if an error occurred? <code>  https://applicationname-api-sbox02.herokuapp.com get_response = RestClient.get( ""https://applicationname-api-sbox02.herokuapp.com/api/v1/users"", { ""Content-Type"" => ""application/json"", ""Authorization"" => ""token 4d012314b7e46008f215cdb7d120cdd7"", ""Manufacturer-Token"" => ""8d0693ccfe65104600e2555d5af34213"" } ) puts get_response.bodyif get_response.code == 200puts ""********* Get current user successful""elseputs ""Get current user failed!!""end ",How to test a JSON REST API
How to tell which openssl lib is actually being used by my RVM-installed ruby," I discovered that I can successfully install ruby with any of the following commands: Regardless of which of the above commands I used, I can then type: I appear to have ssl support regardless of what I do. I guess rvm or the ruby build process don't mind invalid options or values. I have no idea if the --with-openssl-dir option was respected even when I type it (apparently) correctly.Is rvm linking my ruby with the openssl lib that I intended (the one in /usr/local)? How do I tell which openssl lib a ruby was compiled/linked with?I'm using Linux Mint 13. <code>  $ rvm reinstall 1.9.3-p327$ rvm reinstall 1.9.3-p327 --with-openssl-dir=/usr/local$ rvm reinstall 1.9.3-p327 --with-openssl-dir=/afdlkjasd_not_a_dir$ rvm reinstall 1.9.3-p327 --with-openssl-dirffadsf=/afdlkjasd_not_a_dir $ rvm use 1.9.3-p327Using /home/clay/rvm/gems/ruby-1.9.3-p327$ which ruby/home/clay/.rvm/rubies/ruby-1.9.3-p327/bin/ruby$ ruby -e ""puts require('openssl')""true",How to tell which openssl lib is actually being used by an RVM-installed ruby
Ruby Rbenv tries to run Zeus from Bundle despite it being a global gem," (Update: Problem caused by zsh, see accepted answer)Long ago, I followed this great guide to using Rbenv with bundler https://gist.github.com/1384279 and all was well in Ruby Land. (I installed it correctly)Bundler gem is installed globally for the current ruby version. All gems for each project are bundle installed from their respective gemfiles.I am attempting to install Zeus globally (like how bundler is installed globally) rather than adding it to the gemfile of each project. I have succeeded, as you can see zeus is installed globally along with bundler... however: As far as I can discern, zeus is being sought as if it is bundle installed, but its not bundle installed its globally installed.How do I get the shell to look at the global gems before the bundled gems? <code>  joe@computer:~/some_project> rbenv versions 1.9.3-p194* 1.9.3-p327-perf (set by /Users/joe/some_project/.rbenv-version)joe@computer:~/.rbenv/versions/1.9.3-p327-perf/lib/ruby/gems/1.9.1/gems> ls -a. method_source-0.7.1 zeus-0.13.1.. rake-0.9.2.2bundler-1.2.0.rc.2 rdoc-3.9.4 joe@computer:~/some_project> rbenv rehashjoe@computer:~/some_project> zeus initUsers/joe/.rbenv/versions/1.9.3-p327-perf/lib/ruby/gems/1.9.1/gems/bundler-1.2.0.rc.2/lib/bundler/rubygems_integration.rb:147:in `block in replace_gem': zeus is not part of the bundle. Add it to Gemfile. (Gem::LoadError)from /Users/joe/.rbenv/versions/1.9.3-p327-perf/bin/zeus:22:in `<main>'",Ruby Rbenv tries to run Zeus from Bundle despite it being a global gem (Using ZSH)
Why can't Ruby define singleton methods on Symbols or Fixnums?," There are a some Ruby classes that don't allow singleton methods to be defined on their instances. For example, Symbol: I thought this might be a restriction on all immediate values, but it seems to work for nil, true, and false (but not instances of Fixnum or Bignum): I don't understand why why Ruby allows singleton methods to be defined on certain classes of objects but not others. <code>  var = :asymboldef var.hello ""hello""end# TypeError: can't define singleton method ""hello"" for Symbol var = truedef var.hello ""hello""endvar.hello #=> ""hello""",Why can't singleton methods be defined on Symbols or Fixnums?
What <tt> stands for in ruby comments?," Going over source code written in Ruby, like Rails, I often see that small code is wrapped with tt tag, like in rails/activesupport/core_ext/array/access.rb What is the convention behind this, when and why it was decided to use this notation? <code>  # Equal to <tt>self[2]</tt>. # # %w( a b c d e).third # => ""c"" def third self[2] end",What does <tt> stand for in Ruby comments?
Cant create MongoClient.new," I don't know what the deal is with this. Everything works fine until i try to create a new MongoClient <code>  irb(main):001:0> require 'rubygems'=> trueirb(main):002:0> require 'mongo'=> trueirb(main):003:0> include Mongo=> Objectirb(main):004:0> client = MongoClient.new('127.0.0.1', 27017)NameError: uninitialized constant MongoClient from (irb):4 from :0irb(main):005:0>",Can't create MongoClient.new
a set object and reopening String," In an attempt to answer this question: How can I make the set difference insensitive to case?, I was experimenting with sets and strings, trying to have a case-insensitive set of strings. But for some reason when I reopen String class, none of my custom methods are invoked when I add a string to a set. In the code below I see no output, but I expected at least one of the operators that I overloaded to be invoked. Why is this?EDIT: If I create a custom class, say, String2, where I define a hash method, etc, these methods do get called when I add my object to a set. Why not String? <code>  require 'set'class String alias :compare_orig :<=> def <=> v p '<=>' downcase.compare_orig v.downcase end alias :eql_orig :eql? def eql? v p 'eql?' eql_orig v end alias :hash_orig :hash def hash p 'hash' downcase.hash_orig endendSet.new << 'a'",a set of strings and reopening String
Add to array if there is no that item there," I have a Ruby class I want to push MyClass#item1 to unique_array_of_item1, but only if unique_array_of_item1 doesn't contain that item1 yet. There is a simple solution I know: just iterate through my_array and check if unique_array_of_item1 already contains the current item1 or not.Is there any more efficient solution? <code>  class MyClass attr_writer :item1, :item2endmy_array = get_array_of_my_class() #my_array is an array of MyClassunique_array_of_item1 = []",Add element to an array if it's not there already
How do I determine the length of a Fixnum in Ruby?," I want find the length of a Fixnum, num, without converting it into a String.In other words, how many digits are in num without calling the .to_s() method: <code>  num.to_s.length","Without Converting to a String, How Many Digits Does a Fixnum Have?"
Get the IP Address of local machine - Rails," I am doing Rails development in Ubuntu 12.04LTS OS. I want to capture my local IP address in a file, not the loopback 127.0.0.1, the one which I get using ifconfig. Please suggest a solution. <code> ",How to get the IP address of my local machine in Ruby?
Get the IP address of local machine," I am doing Rails development in Ubuntu 12.04LTS OS. I want to capture my local IP address in a file, not the loopback 127.0.0.1, the one which I get using ifconfig. Please suggest a solution. <code> ",How to get the IP address of my local machine in Ruby?
Get the IP address of local machine Rails," I am doing Rails development in Ubuntu 12.04LTS OS. I want to capture my local IP address in a file, not the loopback 127.0.0.1, the one which I get using ifconfig. Please suggest a solution. <code> ",How to get the IP address of my local machine in Ruby?
How to start rails server localhost:3000 on ubuntu 12.04," i am beginner at ruby on rails.I did everything on the official page. (http://rubyonrails.org/download)And i try to start new project but the localhost doest not work on ubuntu 12.04.I use these command: Here is the console output: do you have any idea? how i can create a new project and how i can see the localhost:3000 ?Edit:i think, my problem is about the server. i use rails s command to start server and it takes some errors: <code>  rails new /home/mehmet/Desktop/test/ create create README.rdoc create Rakefile create config.ru create .gitignore create Gemfile create app create app/assets/images/rails.png create app/assets/javascripts/application.js create app/assets/stylesheets/application.css create app/controllers/application_controller.rb create app/helpers/application_helper.rb create app/mailers create app/models create app/views/layouts/application.html.erb create app/mailers/.gitkeep create app/models/.gitkeep create config create config/routes.rb create config/application.rb create config/environment.rb create config/environments create config/environments/development.rb create config/environments/production.rb create config/environments/test.rb create config/initializers create config/initializers/backtrace_silencers.rb create config/initializers/inflections.rb create config/initializers/mime_types.rb create config/initializers/secret_token.rb create config/initializers/session_store.rb create config/initializers/wrap_parameters.rb create config/locales create config/locales/en.yml create config/boot.rb create config/database.yml create db create db/seeds.rb create doc create doc/README_FOR_APP create lib create lib/tasks create lib/tasks/.gitkeep create lib/assets create lib/assets/.gitkeep create log create log/.gitkeep create public create public/404.html create public/422.html create public/500.html create public/favicon.ico create public/index.html create public/robots.txt create script create script/rails create test/fixtures create test/fixtures/.gitkeep create test/functional create test/functional/.gitkeep create test/integration create test/integration/.gitkeep create test/unit create test/unit/.gitkeep create test/performance/browsing_test.rb create test/test_helper.rb create tmp/cache create tmp/cache/assets create vendor/assets/javascripts create vendor/assets/javascripts/.gitkeep create vendor/assets/stylesheets create vendor/assets/stylesheets/.gitkeep create vendor/plugins create vendor/plugins/.gitkeep run bundle install/usr/lib/ruby/gems/1.9.1/gems/railties-3.2.9/lib/rails/generators/app_base.rb:254: warning: Insecure world writable dir /home/mehmet/.rvm/bin in PATH, mode 040777/usr/lib/ruby/gems/1.9.1/gems/bundler-1.2.3/lib/bundler.rb:263: warning: Insecure world writable dir /home/mehmet/.rvm/bin in PATH, mode 040777Fetching gem metadata from https://rubygems.org/...........Fetching gem metadata from https://rubygems.org/..Using rake (10.0.3) Using i18n (0.6.1) Using multi_json (1.5.0) Using activesupport (3.2.9) Using builder (3.0.4) Using activemodel (3.2.9) Using erubis (2.7.0) Using journey (1.0.4) Using rack (1.4.1) Using rack-cache (1.2) Using rack-test (0.6.2) Using hike (1.2.1) Using tilt (1.3.3) Using sprockets (2.2.2) Using actionpack (3.2.9) Using mime-types (1.19) Using polyglot (0.3.3) Using treetop (1.4.12) Using mail (2.4.4) Using actionmailer (3.2.9) Using arel (3.0.2) Using tzinfo (0.3.35) Using activerecord (3.2.9) Using activeresource (3.2.9) Using bundler (1.2.3) Using coffee-script-source (1.4.0) Using execjs (1.4.0) Using coffee-script (2.2.0) Using rack-ssl (1.3.2) Using json (1.7.5) Using rdoc (3.12) Using thor (0.16.0) Using railties (3.2.9) Using coffee-rails (3.2.2) Using jquery-rails (2.1.4) Using rails (3.2.9) Using sass (3.2.4) Using sass-rails (3.2.5) Using sqlite3 (1.3.6) Using uglifier (1.3.0) Your bundle is complete! Use `bundle show [gemname]` to see where a bundled gem is installed. /usr/lib/ruby/gems/1.9.1/gems/railties-3.2.9/lib/rails/script_rails_loader.rb:11: warning: Insecure world writable dir /home/mehmet/.rvm/bin in PATH, mode 040777/usr/lib/ruby/gems/1.9.1/gems/bundler-1.2.3/lib/bundler/runtime.rb:197: warning: Insecure world writable dir /home/mehmet/.rvm/bin in PATH, mode 040777/usr/lib/ruby/gems/1.9.1/gems/execjs-1.4.0/lib/execjs/runtimes.rb:51:in `autodetect': Could not find a JavaScript runtime. See https://github.com/sstephenson/execjs for a list of available runtimes. (ExecJS::RuntimeUnavailable) from /usr/lib/ruby/gems/1.9.1/gems/execjs-1.4.0/lib/execjs.rb:5:in `<module:ExecJS>' from /usr/lib/ruby/gems/1.9.1/gems/execjs-1.4.0/lib/execjs.rb:4:in `<top (required)>' from /usr/lib/ruby/gems/1.9.1/gems/coffee-script-2.2.0/lib/coffee_script.rb:1:in `require' from /usr/lib/ruby/gems/1.9.1/gems/coffee-script-2.2.0/lib/coffee_script.rb:1:in `<top (required)>' from /usr/lib/ruby/gems/1.9.1/gems/coffee-script-2.2.0/lib/coffee-script.rb:1:in `require' from /usr/lib/ruby/gems/1.9.1/gems/coffee-script-2.2.0/lib/coffee-script.rb:1:in `<top (required)>' from /usr/lib/ruby/gems/1.9.1/gems/coffee-rails-3.2.2/lib/coffee-rails.rb:1:in `require' from /usr/lib/ruby/gems/1.9.1/gems/coffee-rails-3.2.2/lib/coffee-rails.rb:1:in `<top (required)>' from /usr/lib/ruby/gems/1.9.1/gems/bundler-1.2.3/lib/bundler/runtime.rb:68:in `require' from /usr/lib/ruby/gems/1.9.1/gems/bundler-1.2.3/lib/bundler/runtime.rb:68:in `block (2 levels) in require' from /usr/lib/ruby/gems/1.9.1/gems/bundler-1.2.3/lib/bundler/runtime.rb:66:in `each' from /usr/lib/ruby/gems/1.9.1/gems/bundler-1.2.3/lib/bundler/runtime.rb:66:in `block in require' from /usr/lib/ruby/gems/1.9.1/gems/bundler-1.2.3/lib/bundler/runtime.rb:55:in `each' from /usr/lib/ruby/gems/1.9.1/gems/bundler-1.2.3/lib/bundler/runtime.rb:55:in `require' from /usr/lib/ruby/gems/1.9.1/gems/bundler-1.2.3/lib/bundler.rb:128:in `require' from /home/mehmet/Desktop/testtt/config/application.rb:7:in `<top (required)>' from /usr/lib/ruby/gems/1.9.1/gems/railties-3.2.9/lib/rails/commands.rb:53:in `require' from /usr/lib/ruby/gems/1.9.1/gems/railties-3.2.9/lib/rails/commands.rb:53:in `block in <top (required)>' from /usr/lib/ruby/gems/1.9.1/gems/railties-3.2.9/lib/rails/commands.rb:50:in `tap' from /usr/lib/ruby/gems/1.9.1/gems/railties-3.2.9/lib/rails/commands.rb:50:in `<top (required)>' from script/rails:6:in `require' from script/rails:6:in `<main>'mehmet@vefanet:~/Desktop/testtt$ rails s -p 3005 /usr/lib/ruby/gems/1.9.1/gems/railties-3.2.9/lib/rails/script_rails_loader.rb:11: warning: Insecure world writable dir /home/mehmet/.rvm/bin in PATH, mode 040777/usr/lib/ruby/gems/1.9.1/gems/bundler-1.2.3/lib/bundler/runtime.rb:197: warning: Insecure world writable dir /home/mehmet/.rvm/bin in PATH, mode 040777/usr/lib/ruby/gems/1.9.1/gems/execjs-1.4.0/lib/execjs/runtimes.rb:51:in `autodetect': Could not find a JavaScript runtime. See https://github.com/sstephenson/execjs for a list of available runtimes. (ExecJS::RuntimeUnavailable) from /usr/lib/ruby/gems/1.9.1/gems/execjs-1.4.0/lib/execjs.rb:5:in `<module:ExecJS>' from /usr/lib/ruby/gems/1.9.1/gems/execjs-1.4.0/lib/execjs.rb:4:in `<top (required)>' from /usr/lib/ruby/gems/1.9.1/gems/coffee-script-2.2.0/lib/coffee_script.rb:1:in `require' from /usr/lib/ruby/gems/1.9.1/gems/coffee-script-2.2.0/lib/coffee_script.rb:1:in `<top (required)>' from /usr/lib/ruby/gems/1.9.1/gems/coffee-script-2.2.0/lib/coffee-script.rb:1:in `require' from /usr/lib/ruby/gems/1.9.1/gems/coffee-script-2.2.0/lib/coffee-script.rb:1:in `<top (required)>' from /usr/lib/ruby/gems/1.9.1/gems/coffee-rails-3.2.2/lib/coffee-rails.rb:1:in `require' from /usr/lib/ruby/gems/1.9.1/gems/coffee-rails-3.2.2/lib/coffee-rails.rb:1:in `<top (required)>' from /usr/lib/ruby/gems/1.9.1/gems/bundler-1.2.3/lib/bundler/runtime.rb:68:in `require' from /usr/lib/ruby/gems/1.9.1/gems/bundler-1.2.3/lib/bundler/runtime.rb:68:in `block (2 levels) in require' from /usr/lib/ruby/gems/1.9.1/gems/bundler-1.2.3/lib/bundler/runtime.rb:66:in `each' from /usr/lib/ruby/gems/1.9.1/gems/bundler-1.2.3/lib/bundler/runtime.rb:66:in `block in require' from /usr/lib/ruby/gems/1.9.1/gems/bundler-1.2.3/lib/bundler/runtime.rb:55:in `each' from /usr/lib/ruby/gems/1.9.1/gems/bundler-1.2.3/lib/bundler/runtime.rb:55:in `require' from /usr/lib/ruby/gems/1.9.1/gems/bundler-1.2.3/lib/bundler.rb:128:in `require' from /home/mehmet/Desktop/testtt/config/application.rb:7:in `<top (required)>' from /usr/lib/ruby/gems/1.9.1/gems/railties-3.2.9/lib/rails/commands.rb:53:in `require' from /usr/lib/ruby/gems/1.9.1/gems/railties-3.2.9/lib/rails/commands.rb:53:in `block in <top (required)>' from /usr/lib/ruby/gems/1.9.1/gems/railties-3.2.9/lib/rails/commands.rb:50:in `tap' from /usr/lib/ruby/gems/1.9.1/gems/railties-3.2.9/lib/rails/commands.rb:50:in `<top (required)>' from script/rails:6:in `require' from script/rails:6:in `<main>'mehmet@vefanet:~/Desktop/testtt$ rails s/usr/lib/ruby/gems/1.9.1/gems/railties-3.2.9/lib/rails/script_rails_loader.rb:11: warning: Insecure world writable dir /home/mehmet/.rvm/bin in PATH, mode 040777/usr/lib/ruby/gems/1.9.1/gems/bundler-1.2.3/lib/bundler/runtime.rb:197: warning: Insecure world writable dir /home/mehmet/.rvm/bin in PATH, mode 040777/usr/lib/ruby/gems/1.9.1/gems/execjs-1.4.0/lib/execjs/runtimes.rb:51:in `autodetect': Could not find a JavaScript runtime. See https://github.com/sstephenson/execjs for a list of available runtimes. (ExecJS::RuntimeUnavailable) from /usr/lib/ruby/gems/1.9.1/gems/execjs-1.4.0/lib/execjs.rb:5:in `<module:ExecJS>' from /usr/lib/ruby/gems/1.9.1/gems/execjs-1.4.0/lib/execjs.rb:4:in `<top (required)>' from /usr/lib/ruby/gems/1.9.1/gems/coffee-script-2.2.0/lib/coffee_script.rb:1:in `require' from /usr/lib/ruby/gems/1.9.1/gems/coffee-script-2.2.0/lib/coffee_script.rb:1:in `<top (required)>' from /usr/lib/ruby/gems/1.9.1/gems/coffee-script-2.2.0/lib/coffee-script.rb:1:in `require' from /usr/lib/ruby/gems/1.9.1/gems/coffee-script-2.2.0/lib/coffee-script.rb:1:in `<top (required)>' from /usr/lib/ruby/gems/1.9.1/gems/coffee-rails-3.2.2/lib/coffee-rails.rb:1:in `require' from /usr/lib/ruby/gems/1.9.1/gems/coffee-rails-3.2.2/lib/coffee-rails.rb:1:in `<top (required)>' from /usr/lib/ruby/gems/1.9.1/gems/bundler-1.2.3/lib/bundler/runtime.rb:68:in `require' from /usr/lib/ruby/gems/1.9.1/gems/bundler-1.2.3/lib/bundler/runtime.rb:68:in `block (2 levels) in require' from /usr/lib/ruby/gems/1.9.1/gems/bundler-1.2.3/lib/bundler/runtime.rb:66:in `each' from /usr/lib/ruby/gems/1.9.1/gems/bundler-1.2.3/lib/bundler/runtime.rb:66:in `block in require' from /usr/lib/ruby/gems/1.9.1/gems/bundler-1.2.3/lib/bundler/runtime.rb:55:in `each' from /usr/lib/ruby/gems/1.9.1/gems/bundler-1.2.3/lib/bundler/runtime.rb:55:in `require' from /usr/lib/ruby/gems/1.9.1/gems/bundler-1.2.3/lib/bundler.rb:128:in `require' from /home/mehmet/Desktop/testtt/config/application.rb:7:in `<top (required)>' from /usr/lib/ruby/gems/1.9.1/gems/railties-3.2.9/lib/rails/commands.rb:53:in `require' from /usr/lib/ruby/gems/1.9.1/gems/railties-3.2.9/lib/rails/commands.rb:53:in `block in <top (required)>' from /usr/lib/ruby/gems/1.9.1/gems/railties-3.2.9/lib/rails/commands.rb:50:in `tap' from /usr/lib/ruby/gems/1.9.1/gems/railties-3.2.9/lib/rails/commands.rb:50:in `<top (required)>' from script/rails:6:in `require' from script/rails:6:in `<main>'",How to start rails server localhost:3000 on ubuntu 12.04
How to start rails server localhost:3000 on ubuntu 12.04 [SOLVED]," i am beginner at ruby on rails.I did everything on the official page. (http://rubyonrails.org/download)And i try to start new project but the localhost doest not work on ubuntu 12.04.I use these command: Here is the console output: do you have any idea? how i can create a new project and how i can see the localhost:3000 ?Edit:i think, my problem is about the server. i use rails s command to start server and it takes some errors: <code>  rails new /home/mehmet/Desktop/test/ create create README.rdoc create Rakefile create config.ru create .gitignore create Gemfile create app create app/assets/images/rails.png create app/assets/javascripts/application.js create app/assets/stylesheets/application.css create app/controllers/application_controller.rb create app/helpers/application_helper.rb create app/mailers create app/models create app/views/layouts/application.html.erb create app/mailers/.gitkeep create app/models/.gitkeep create config create config/routes.rb create config/application.rb create config/environment.rb create config/environments create config/environments/development.rb create config/environments/production.rb create config/environments/test.rb create config/initializers create config/initializers/backtrace_silencers.rb create config/initializers/inflections.rb create config/initializers/mime_types.rb create config/initializers/secret_token.rb create config/initializers/session_store.rb create config/initializers/wrap_parameters.rb create config/locales create config/locales/en.yml create config/boot.rb create config/database.yml create db create db/seeds.rb create doc create doc/README_FOR_APP create lib create lib/tasks create lib/tasks/.gitkeep create lib/assets create lib/assets/.gitkeep create log create log/.gitkeep create public create public/404.html create public/422.html create public/500.html create public/favicon.ico create public/index.html create public/robots.txt create script create script/rails create test/fixtures create test/fixtures/.gitkeep create test/functional create test/functional/.gitkeep create test/integration create test/integration/.gitkeep create test/unit create test/unit/.gitkeep create test/performance/browsing_test.rb create test/test_helper.rb create tmp/cache create tmp/cache/assets create vendor/assets/javascripts create vendor/assets/javascripts/.gitkeep create vendor/assets/stylesheets create vendor/assets/stylesheets/.gitkeep create vendor/plugins create vendor/plugins/.gitkeep run bundle install/usr/lib/ruby/gems/1.9.1/gems/railties-3.2.9/lib/rails/generators/app_base.rb:254: warning: Insecure world writable dir /home/mehmet/.rvm/bin in PATH, mode 040777/usr/lib/ruby/gems/1.9.1/gems/bundler-1.2.3/lib/bundler.rb:263: warning: Insecure world writable dir /home/mehmet/.rvm/bin in PATH, mode 040777Fetching gem metadata from https://rubygems.org/...........Fetching gem metadata from https://rubygems.org/..Using rake (10.0.3) Using i18n (0.6.1) Using multi_json (1.5.0) Using activesupport (3.2.9) Using builder (3.0.4) Using activemodel (3.2.9) Using erubis (2.7.0) Using journey (1.0.4) Using rack (1.4.1) Using rack-cache (1.2) Using rack-test (0.6.2) Using hike (1.2.1) Using tilt (1.3.3) Using sprockets (2.2.2) Using actionpack (3.2.9) Using mime-types (1.19) Using polyglot (0.3.3) Using treetop (1.4.12) Using mail (2.4.4) Using actionmailer (3.2.9) Using arel (3.0.2) Using tzinfo (0.3.35) Using activerecord (3.2.9) Using activeresource (3.2.9) Using bundler (1.2.3) Using coffee-script-source (1.4.0) Using execjs (1.4.0) Using coffee-script (2.2.0) Using rack-ssl (1.3.2) Using json (1.7.5) Using rdoc (3.12) Using thor (0.16.0) Using railties (3.2.9) Using coffee-rails (3.2.2) Using jquery-rails (2.1.4) Using rails (3.2.9) Using sass (3.2.4) Using sass-rails (3.2.5) Using sqlite3 (1.3.6) Using uglifier (1.3.0) Your bundle is complete! Use `bundle show [gemname]` to see where a bundled gem is installed. /usr/lib/ruby/gems/1.9.1/gems/railties-3.2.9/lib/rails/script_rails_loader.rb:11: warning: Insecure world writable dir /home/mehmet/.rvm/bin in PATH, mode 040777/usr/lib/ruby/gems/1.9.1/gems/bundler-1.2.3/lib/bundler/runtime.rb:197: warning: Insecure world writable dir /home/mehmet/.rvm/bin in PATH, mode 040777/usr/lib/ruby/gems/1.9.1/gems/execjs-1.4.0/lib/execjs/runtimes.rb:51:in `autodetect': Could not find a JavaScript runtime. See https://github.com/sstephenson/execjs for a list of available runtimes. (ExecJS::RuntimeUnavailable) from /usr/lib/ruby/gems/1.9.1/gems/execjs-1.4.0/lib/execjs.rb:5:in `<module:ExecJS>' from /usr/lib/ruby/gems/1.9.1/gems/execjs-1.4.0/lib/execjs.rb:4:in `<top (required)>' from /usr/lib/ruby/gems/1.9.1/gems/coffee-script-2.2.0/lib/coffee_script.rb:1:in `require' from /usr/lib/ruby/gems/1.9.1/gems/coffee-script-2.2.0/lib/coffee_script.rb:1:in `<top (required)>' from /usr/lib/ruby/gems/1.9.1/gems/coffee-script-2.2.0/lib/coffee-script.rb:1:in `require' from /usr/lib/ruby/gems/1.9.1/gems/coffee-script-2.2.0/lib/coffee-script.rb:1:in `<top (required)>' from /usr/lib/ruby/gems/1.9.1/gems/coffee-rails-3.2.2/lib/coffee-rails.rb:1:in `require' from /usr/lib/ruby/gems/1.9.1/gems/coffee-rails-3.2.2/lib/coffee-rails.rb:1:in `<top (required)>' from /usr/lib/ruby/gems/1.9.1/gems/bundler-1.2.3/lib/bundler/runtime.rb:68:in `require' from /usr/lib/ruby/gems/1.9.1/gems/bundler-1.2.3/lib/bundler/runtime.rb:68:in `block (2 levels) in require' from /usr/lib/ruby/gems/1.9.1/gems/bundler-1.2.3/lib/bundler/runtime.rb:66:in `each' from /usr/lib/ruby/gems/1.9.1/gems/bundler-1.2.3/lib/bundler/runtime.rb:66:in `block in require' from /usr/lib/ruby/gems/1.9.1/gems/bundler-1.2.3/lib/bundler/runtime.rb:55:in `each' from /usr/lib/ruby/gems/1.9.1/gems/bundler-1.2.3/lib/bundler/runtime.rb:55:in `require' from /usr/lib/ruby/gems/1.9.1/gems/bundler-1.2.3/lib/bundler.rb:128:in `require' from /home/mehmet/Desktop/testtt/config/application.rb:7:in `<top (required)>' from /usr/lib/ruby/gems/1.9.1/gems/railties-3.2.9/lib/rails/commands.rb:53:in `require' from /usr/lib/ruby/gems/1.9.1/gems/railties-3.2.9/lib/rails/commands.rb:53:in `block in <top (required)>' from /usr/lib/ruby/gems/1.9.1/gems/railties-3.2.9/lib/rails/commands.rb:50:in `tap' from /usr/lib/ruby/gems/1.9.1/gems/railties-3.2.9/lib/rails/commands.rb:50:in `<top (required)>' from script/rails:6:in `require' from script/rails:6:in `<main>'mehmet@vefanet:~/Desktop/testtt$ rails s -p 3005 /usr/lib/ruby/gems/1.9.1/gems/railties-3.2.9/lib/rails/script_rails_loader.rb:11: warning: Insecure world writable dir /home/mehmet/.rvm/bin in PATH, mode 040777/usr/lib/ruby/gems/1.9.1/gems/bundler-1.2.3/lib/bundler/runtime.rb:197: warning: Insecure world writable dir /home/mehmet/.rvm/bin in PATH, mode 040777/usr/lib/ruby/gems/1.9.1/gems/execjs-1.4.0/lib/execjs/runtimes.rb:51:in `autodetect': Could not find a JavaScript runtime. See https://github.com/sstephenson/execjs for a list of available runtimes. (ExecJS::RuntimeUnavailable) from /usr/lib/ruby/gems/1.9.1/gems/execjs-1.4.0/lib/execjs.rb:5:in `<module:ExecJS>' from /usr/lib/ruby/gems/1.9.1/gems/execjs-1.4.0/lib/execjs.rb:4:in `<top (required)>' from /usr/lib/ruby/gems/1.9.1/gems/coffee-script-2.2.0/lib/coffee_script.rb:1:in `require' from /usr/lib/ruby/gems/1.9.1/gems/coffee-script-2.2.0/lib/coffee_script.rb:1:in `<top (required)>' from /usr/lib/ruby/gems/1.9.1/gems/coffee-script-2.2.0/lib/coffee-script.rb:1:in `require' from /usr/lib/ruby/gems/1.9.1/gems/coffee-script-2.2.0/lib/coffee-script.rb:1:in `<top (required)>' from /usr/lib/ruby/gems/1.9.1/gems/coffee-rails-3.2.2/lib/coffee-rails.rb:1:in `require' from /usr/lib/ruby/gems/1.9.1/gems/coffee-rails-3.2.2/lib/coffee-rails.rb:1:in `<top (required)>' from /usr/lib/ruby/gems/1.9.1/gems/bundler-1.2.3/lib/bundler/runtime.rb:68:in `require' from /usr/lib/ruby/gems/1.9.1/gems/bundler-1.2.3/lib/bundler/runtime.rb:68:in `block (2 levels) in require' from /usr/lib/ruby/gems/1.9.1/gems/bundler-1.2.3/lib/bundler/runtime.rb:66:in `each' from /usr/lib/ruby/gems/1.9.1/gems/bundler-1.2.3/lib/bundler/runtime.rb:66:in `block in require' from /usr/lib/ruby/gems/1.9.1/gems/bundler-1.2.3/lib/bundler/runtime.rb:55:in `each' from /usr/lib/ruby/gems/1.9.1/gems/bundler-1.2.3/lib/bundler/runtime.rb:55:in `require' from /usr/lib/ruby/gems/1.9.1/gems/bundler-1.2.3/lib/bundler.rb:128:in `require' from /home/mehmet/Desktop/testtt/config/application.rb:7:in `<top (required)>' from /usr/lib/ruby/gems/1.9.1/gems/railties-3.2.9/lib/rails/commands.rb:53:in `require' from /usr/lib/ruby/gems/1.9.1/gems/railties-3.2.9/lib/rails/commands.rb:53:in `block in <top (required)>' from /usr/lib/ruby/gems/1.9.1/gems/railties-3.2.9/lib/rails/commands.rb:50:in `tap' from /usr/lib/ruby/gems/1.9.1/gems/railties-3.2.9/lib/rails/commands.rb:50:in `<top (required)>' from script/rails:6:in `require' from script/rails:6:in `<main>'mehmet@vefanet:~/Desktop/testtt$ rails s/usr/lib/ruby/gems/1.9.1/gems/railties-3.2.9/lib/rails/script_rails_loader.rb:11: warning: Insecure world writable dir /home/mehmet/.rvm/bin in PATH, mode 040777/usr/lib/ruby/gems/1.9.1/gems/bundler-1.2.3/lib/bundler/runtime.rb:197: warning: Insecure world writable dir /home/mehmet/.rvm/bin in PATH, mode 040777/usr/lib/ruby/gems/1.9.1/gems/execjs-1.4.0/lib/execjs/runtimes.rb:51:in `autodetect': Could not find a JavaScript runtime. See https://github.com/sstephenson/execjs for a list of available runtimes. (ExecJS::RuntimeUnavailable) from /usr/lib/ruby/gems/1.9.1/gems/execjs-1.4.0/lib/execjs.rb:5:in `<module:ExecJS>' from /usr/lib/ruby/gems/1.9.1/gems/execjs-1.4.0/lib/execjs.rb:4:in `<top (required)>' from /usr/lib/ruby/gems/1.9.1/gems/coffee-script-2.2.0/lib/coffee_script.rb:1:in `require' from /usr/lib/ruby/gems/1.9.1/gems/coffee-script-2.2.0/lib/coffee_script.rb:1:in `<top (required)>' from /usr/lib/ruby/gems/1.9.1/gems/coffee-script-2.2.0/lib/coffee-script.rb:1:in `require' from /usr/lib/ruby/gems/1.9.1/gems/coffee-script-2.2.0/lib/coffee-script.rb:1:in `<top (required)>' from /usr/lib/ruby/gems/1.9.1/gems/coffee-rails-3.2.2/lib/coffee-rails.rb:1:in `require' from /usr/lib/ruby/gems/1.9.1/gems/coffee-rails-3.2.2/lib/coffee-rails.rb:1:in `<top (required)>' from /usr/lib/ruby/gems/1.9.1/gems/bundler-1.2.3/lib/bundler/runtime.rb:68:in `require' from /usr/lib/ruby/gems/1.9.1/gems/bundler-1.2.3/lib/bundler/runtime.rb:68:in `block (2 levels) in require' from /usr/lib/ruby/gems/1.9.1/gems/bundler-1.2.3/lib/bundler/runtime.rb:66:in `each' from /usr/lib/ruby/gems/1.9.1/gems/bundler-1.2.3/lib/bundler/runtime.rb:66:in `block in require' from /usr/lib/ruby/gems/1.9.1/gems/bundler-1.2.3/lib/bundler/runtime.rb:55:in `each' from /usr/lib/ruby/gems/1.9.1/gems/bundler-1.2.3/lib/bundler/runtime.rb:55:in `require' from /usr/lib/ruby/gems/1.9.1/gems/bundler-1.2.3/lib/bundler.rb:128:in `require' from /home/mehmet/Desktop/testtt/config/application.rb:7:in `<top (required)>' from /usr/lib/ruby/gems/1.9.1/gems/railties-3.2.9/lib/rails/commands.rb:53:in `require' from /usr/lib/ruby/gems/1.9.1/gems/railties-3.2.9/lib/rails/commands.rb:53:in `block in <top (required)>' from /usr/lib/ruby/gems/1.9.1/gems/railties-3.2.9/lib/rails/commands.rb:50:in `tap' from /usr/lib/ruby/gems/1.9.1/gems/railties-3.2.9/lib/rails/commands.rb:50:in `<top (required)>' from script/rails:6:in `require' from script/rails:6:in `<main>'",How to start rails server localhost:3000 on ubuntu 12.04
Result from ActiveRecord::Base.connection.execute(sql)," How can I find number of records processed by PostgreSQL after executing a SQL statement using ActiveRecord::Base Connection class? Or can you suggest better way to do this. Please keep in mind that above update statement is a simple one to keep question brief. My real queries are ""set based"" and involves complex create temp tables, update, insert statements. <code>  temp_sql = ""UPDATE table_a SET column_a ='abc' WHERE column_b = 1""result = ActiveRecord::Base.establish_connection(@db).connection.execute(temp_sql)",Result from ActiveRecord::Base.connection.execute(sql) - PostgreSQL
BEGIN { ... } in Ruby," What does BEGIN mean in Ruby, and how is it called? For example, given this code: why is puts ""This is sentence 2."" executed first? <code>  puts ""This is sentence 1.""BEGIN { puts ""This is sentence 2.""}",What does Ruby's BEGIN do?
check if a string is XML formatted in Ruby, I'm wondering if there's a function in Ruby like is_xml?(string) to identify if a given string is XML formatted. <code> ,Check if a string is XML formatted
HAML and link_to rails," I am trying to create a link using HAML which looks like the this It is not taking the Ruby code and it is displaying that as a string Last updated on<%=@last_data.date_from.month %>and in the URL as well it is not taking the function Time.now.month or Time.now.year .How do I pass Ruby code in URL and in the string ? <code>  =link_to(""Last updated on<%=@last_data.date_from.month %>"",'/member/abc/def?month={Time.now.month}&range=xyz&year={Time.now.year}')",How do I use HAML in a dynamic link?
Why floating point numbers are printed THAT differently?," It's kind of a common knowledge that (most) floating point numbers are not stored precisely (when IEEE-754 format is used). So one shouldn't do this: ... as it will result in false, unless some specific arbitrary-precision type/class was used (BigDecimal in Java/Ruby, BCMath in PHP, Math::BigInt/Math::BigFloat in Perl, to name a few) instead.Yet I wonder why when one tries to print the result of this expression, 0.3 - 0.2, scripting languages (Perl and PHP) give 0.1, but ""virtual-machine"" ones (Java, JavaScript and Erlang) give something more similar to 0.09999999999999998 instead?And why is it also inconsistent in Ruby? version 1.8.6 (codepad) gives 0.1, version 1.9.3 (ideone) gives 0.0999... <code>  0.3 - 0.2 === 0.1; // very wrong",Why are floating point numbers printed so differently?
Ruby setting objects to nil, I am building an app and wonder if setting an unused object tonil is a common practice in production level coding.I understand that it is a mere hint for the garbage collector and won't always dispose of an object. <code> ,Is it common to set objects to nil?
Set last day of month in ruby," I made new object Date.new with args (year, month). After create ruby added 01 number of day to this object by default. Is there any way to add not first day, but last day of month that i passed as arg(e.g. 28 if it will be 02month or 31 if it will be 01month) ? <code> ",Get last day of the month in Ruby
How to pass parameter on Vagrant up and have it in the scope of Chef cookbook?, I'm looking for a way to pass parameter to Chef cookbook like: And then use some_parameter inside one of the Chef cookbooks. <code>  $ vagrant up some_parameter,How to pass parameter on 'vagrant up' and have it in the scope of Vagrantfile?
Can't modify returned string from Nokogiri search," I can't remove whitespaces from a string.My HTML is: My code is: gsub, strip, etc. don't work. Why, and how do I fix this? I'm using Ruby 1.9.3 so Unicode shouldn't be problem. <code>  <p class='your-price'>Cena pro Vs: <strong>139&nbsp;<small>K</small></strong></p> #encoding: utf-8require 'rubygems'require 'mechanize'agent = Mechanize.newsite = agent.get(""http://www.astratex.cz/podlozky-pod-raminka/doplnky"")price = site.search(""//p[@class='your-price']/strong/text()"")val = price.first.text => ""139""val.strip => ""139""val.gsub("" "", """") => ""139"" val.class => Stringval.dump => ""\""139\\u{a0}\"""" !val.encoding => #<Encoding:UTF-8>__ENCODING__ => #<Encoding:UTF-8>Encoding.default_external => #<Encoding:UTF-8>",I can't remove whitespaces from a string parsed by Nokogiri
Ruby Win32API - Fetching a string as a return value from a DLL call," Problem:I'd like to use in my Ruby program an algorithm that is coded in C and exposed through a DLL.I would like to treat the algorithm as a black box that I can call from within Ruby -- simply pass in the required parameters and use the result.Ruby (both 1.8.7 and 1.9.3) has the Win32API module which seems intended to make it quite easy to interface with dynamic libraries to do exactly what I'm after.But the problem is that I can't seem to get the Win32API call to send back a string.Details:The third-party C function is CodeGen(). It take 6 parameters, including a source string, an arbitrary string to serve as encryption key, and, for simplicity, 4 numerical parameters, one signed int, one unsigned long, and two unsigned shorts. From these, CodeGen() implements a black-box algorithm to return a resulting string.The C prototype for CodeGen() is: Note that both the input strings are constants, i.e. they are supplied to CodeGen() as strings -- so pointers to constant stringsThe return value for CodeGen() is also a string, of fixed maximum length, so it will return a pointer.My Question:How do I go about setting up the call to CodeGen() and getting back the string it is supposed to generate?My attempts:The code below simply gives me integers as the return value, when I am expecting to obtain a string. However, instead of getting a string back, I get back an integer. Edit: Could this be a pointer?Although I'm using Ruby 1.9.3 on Windows 7, 64-bit edition, I've also tested the above on Windows XP, 32-bits, and using Ruby 1.8.7, so I'm pretty sure it's something to do with my use of the Win32API itself.Not sure whether the problem is any of these:do the integers (3, 0, ...) need to be packed? do I need to distinguish between short and long types? am I not properly handling the return value?if the return value is a pointer, how do I use this in Ruby?something else?Any insight would be much appreciated! <code>  const char *CodeGen( int encryp_level, const char *source_str, const char *encryp_key, unsigned long param_a, unsigned short param_b, unsigned short param_c ) require 'Win32API'codeGen = Win32API.new(""encrypt.dll"", ""CodeGen"", ""ISSIII"", ""S"")ret_str = codeGen.Call(3, ""foo"", ""bar"", 0, 0, 0)puts ret_str",Calling C code from within Ruby -- How to use the returned pointer?
Interfacing Ruby and C via Win32API - How to fetch an encrypted string as the return value from a DLL function call," Problem:I'd like to use in my Ruby program an algorithm that is coded in C and exposed through a DLL.I would like to treat the algorithm as a black box that I can call from within Ruby -- simply pass in the required parameters and use the result.Ruby (both 1.8.7 and 1.9.3) has the Win32API module which seems intended to make it quite easy to interface with dynamic libraries to do exactly what I'm after.But the problem is that I can't seem to get the Win32API call to send back a string.Details:The third-party C function is CodeGen(). It take 6 parameters, including a source string, an arbitrary string to serve as encryption key, and, for simplicity, 4 numerical parameters, one signed int, one unsigned long, and two unsigned shorts. From these, CodeGen() implements a black-box algorithm to return a resulting string.The C prototype for CodeGen() is: Note that both the input strings are constants, i.e. they are supplied to CodeGen() as strings -- so pointers to constant stringsThe return value for CodeGen() is also a string, of fixed maximum length, so it will return a pointer.My Question:How do I go about setting up the call to CodeGen() and getting back the string it is supposed to generate?My attempts:The code below simply gives me integers as the return value, when I am expecting to obtain a string. However, instead of getting a string back, I get back an integer. Edit: Could this be a pointer?Although I'm using Ruby 1.9.3 on Windows 7, 64-bit edition, I've also tested the above on Windows XP, 32-bits, and using Ruby 1.8.7, so I'm pretty sure it's something to do with my use of the Win32API itself.Not sure whether the problem is any of these:do the integers (3, 0, ...) need to be packed? do I need to distinguish between short and long types? am I not properly handling the return value?if the return value is a pointer, how do I use this in Ruby?something else?Any insight would be much appreciated! <code>  const char *CodeGen( int encryp_level, const char *source_str, const char *encryp_key, unsigned long param_a, unsigned short param_b, unsigned short param_c ) require 'Win32API'codeGen = Win32API.new(""encrypt.dll"", ""CodeGen"", ""ISSIII"", ""S"")ret_str = codeGen.Call(3, ""foo"", ""bar"", 0, 0, 0)puts ret_str",Calling C code from within Ruby -- How to use the returned pointer?
Using Win32API to call C code from within Ruby - How to fetch an encrypted string as the return value from a DLL function call," Problem:I'd like to use in my Ruby program an algorithm that is coded in C and exposed through a DLL.I would like to treat the algorithm as a black box that I can call from within Ruby -- simply pass in the required parameters and use the result.Ruby (both 1.8.7 and 1.9.3) has the Win32API module which seems intended to make it quite easy to interface with dynamic libraries to do exactly what I'm after.But the problem is that I can't seem to get the Win32API call to send back a string.Details:The third-party C function is CodeGen(). It take 6 parameters, including a source string, an arbitrary string to serve as encryption key, and, for simplicity, 4 numerical parameters, one signed int, one unsigned long, and two unsigned shorts. From these, CodeGen() implements a black-box algorithm to return a resulting string.The C prototype for CodeGen() is: Note that both the input strings are constants, i.e. they are supplied to CodeGen() as strings -- so pointers to constant stringsThe return value for CodeGen() is also a string, of fixed maximum length, so it will return a pointer.My Question:How do I go about setting up the call to CodeGen() and getting back the string it is supposed to generate?My attempts:The code below simply gives me integers as the return value, when I am expecting to obtain a string. However, instead of getting a string back, I get back an integer. Edit: Could this be a pointer?Although I'm using Ruby 1.9.3 on Windows 7, 64-bit edition, I've also tested the above on Windows XP, 32-bits, and using Ruby 1.8.7, so I'm pretty sure it's something to do with my use of the Win32API itself.Not sure whether the problem is any of these:do the integers (3, 0, ...) need to be packed? do I need to distinguish between short and long types? am I not properly handling the return value?if the return value is a pointer, how do I use this in Ruby?something else?Any insight would be much appreciated! <code>  const char *CodeGen( int encryp_level, const char *source_str, const char *encryp_key, unsigned long param_a, unsigned short param_b, unsigned short param_c ) require 'Win32API'codeGen = Win32API.new(""encrypt.dll"", ""CodeGen"", ""ISSIII"", ""S"")ret_str = codeGen.Call(3, ""foo"", ""bar"", 0, 0, 0)puts ret_str",Calling C code from within Ruby -- How to use the returned pointer?
Using Win32API to call C code from within Ruby -- How to use the returned pointer?," Problem:I'd like to use in my Ruby program an algorithm that is coded in C and exposed through a DLL.I would like to treat the algorithm as a black box that I can call from within Ruby -- simply pass in the required parameters and use the result.Ruby (both 1.8.7 and 1.9.3) has the Win32API module which seems intended to make it quite easy to interface with dynamic libraries to do exactly what I'm after.But the problem is that I can't seem to get the Win32API call to send back a string.Details:The third-party C function is CodeGen(). It take 6 parameters, including a source string, an arbitrary string to serve as encryption key, and, for simplicity, 4 numerical parameters, one signed int, one unsigned long, and two unsigned shorts. From these, CodeGen() implements a black-box algorithm to return a resulting string.The C prototype for CodeGen() is: Note that both the input strings are constants, i.e. they are supplied to CodeGen() as strings -- so pointers to constant stringsThe return value for CodeGen() is also a string, of fixed maximum length, so it will return a pointer.My Question:How do I go about setting up the call to CodeGen() and getting back the string it is supposed to generate?My attempts:The code below simply gives me integers as the return value, when I am expecting to obtain a string. However, instead of getting a string back, I get back an integer. Edit: Could this be a pointer?Although I'm using Ruby 1.9.3 on Windows 7, 64-bit edition, I've also tested the above on Windows XP, 32-bits, and using Ruby 1.8.7, so I'm pretty sure it's something to do with my use of the Win32API itself.Not sure whether the problem is any of these:do the integers (3, 0, ...) need to be packed? do I need to distinguish between short and long types? am I not properly handling the return value?if the return value is a pointer, how do I use this in Ruby?something else?Any insight would be much appreciated! <code>  const char *CodeGen( int encryp_level, const char *source_str, const char *encryp_key, unsigned long param_a, unsigned short param_b, unsigned short param_c ) require 'Win32API'codeGen = Win32API.new(""encrypt.dll"", ""CodeGen"", ""ISSIII"", ""S"")ret_str = codeGen.Call(3, ""foo"", ""bar"", 0, 0, 0)puts ret_str",Calling C code from within Ruby -- How to use the returned pointer?
ruby conditional inclusion of a key-value pair in a hash," Can someone help me shorten the following method? I began with this, which I liked just fine: Now I want to add an optional key. The tersest syntax I can think of is this: The modified method works, but I'm dissatisfied with waste of virtual ink. Is there a way to shorten it? I realize one could employ a ternary operator on the hash literal, but that would force (I think) the repetition the ""foo"" => ""bar"" pair on each branch of the condition, which is also slightly less than pristine. <code>  def self.some_hash { ""foo"" => ""bar"" }end def self.some_hash(some_key=nil) answer = { ""foo"" => ""bar"" } answer[some_key] = ""yucky, long-winded syntax"" if some_key answerend",Conditional inclusion of a key-value pair in a hash
Convert CSV file into array of hashes in ruby," I have a csv file, some hockey stats, for example: I want to save them in an array of hashes. I don't have any headers and I would like to add keys to each value like ""time"" => ""09.09.2008"" and so on. Each line should by accessible like arr[i], each value by for example arr[i][""time""]. I prefer CSV class rather than FasterCSV or split. Can you show the way or redirect to some thread where a similar problem was solved? <code>  09.09.2008,1,HC Vitkovice Steel,BK Mlada Boleslav,1:0 (PP)09.09.2008,1,HC Lasselsberger Plzen,RI OKNA ZLIN,6:209.09.2008,1,HC Litvinov,HC Sparta Praha,3:5",Convert CSV file into array of hashes
Tainted objects in Ruby, When do Ruby objects need to be made tainted and when should we untaint them? How does the concept of tainted object make a Ruby script run in safe mode? Can anyone elaborate on this to make the concept clear with some code snippets? <code> ,"What are tainted objects, and when should we untaint them?"
"getting ""rvm is not a function"" error on mac os x and no posted solutions work"," I'm on Mac OS x 10.8.2 (""Mountain Lion""), and I successfully installed RVM 1.17.8 and its dependencies. I'm able to use it to install Ruby versions using rvm install 1.9.2, but I can't execute rvm use <version> without getting this error: I have the following in ~/.bash_profile, which I have set to run, using source ~/.bash_profile, whenever a terminal window is launched: I've tried running source ~/.rvm/scripts/rvm, which runs without returning an error, but I still get the ""RVM is not a function"" error when I try to use RVM to set the Ruby version within the terminal session.I also tried uninstalling and reinstalling RVM using rvm implode. I've run out of ideas and I can't seem to find any more solutions online. Help? <code>  RVM is not a function, selecting rubies with 'rvm use ...' will not work.You need to change your terminal emulator preferences to allow login shell.Sometimes it is required to use `/bin/bash --login` as the command.Please visit https://rvm.io/integration/gnome-terminal/ for a example. export SVN_EDITOR=vimPATH=$PATH:$HOME/.rvm/bin # Add RVM to PATH for scripting[ -r ~/.bashrc ] && source ~/.bashrc","I'm getting ""RVM is not a function"" error on Mac OS X, and no posted solutions work"
Difference between File::exist? and File::exists?," On ruby-doc, the documentation entries for File::exist? and File::exists? are duplicated with different semantics: one entry says returns true if file_name is a directory; the other says returns true if file_name is a file.I don't think either entry is correct. Both methods seem to be implemented in file.c using rb_file_exist_p, which, seems to try to call fstat() if the value passed is an IO, or stat() if it's a string. Both fstat() and stat() return 0 on success and -1 on error, and this is passed back to rb_file_exist_p, and turned into a boolean result. It seems to me thatthere are two methods for making code read more easily; there are no semantic differencesneither really relates to a file existing, but to whether a file-like item exists, e.g. a file, a dir, a socket, a fifo etc.perhaps the document could say that the methods tell the caller whether or not a thing that has file-like semantics is there, but more specific tests will tell what it actually is: e.g. directory?, file?, socket? etc.Is my understanding of the (lack of) difference in the methods correct, and is it worth suggesting a change to the document ? <code> ",Difference between `File::exist?` and `File::exists?`
Splat on a hash or array," A splat on a hash converts it into an array.[*{foo: :bar}] # => [[:foo, :bar]]Is there some hidden mechanism (such as implicit class cast) going on here, or is it a built-in primitive feature?Besides an array, are nil and hash the only things that disappear/change with the splat operator under Ruby 1.9? <code> ",Splat on a hash
How do I list all objects created from a class in ruby?," Is there any way in Ruby for a class to know how many instances of it exist and can it list them?Here is a sample class: Now I create project objects of this class: What I would like is to have class methods like Project.all and Project.count to return a listing and count of current projects. How do I do this? <code>  class Project attr_accessor :name, :tasks def initialize(options) @name = options[:name] @tasks = options[:tasks] end def self.all # return listing of project objects end def self.count # return a count of existing projects endend options1 = { name: 'Building house', priority: 2, tasks: []}options2 = { name: 'Getting a loan from the Bank', priority: 3, tasks: []}@project1 = Project.new(options1)@project2 = Project.new(options2)",How do I list all objects created from a class in Ruby?
how the description mentioned Regexp Quantifier differs from each other in Ruby?," How do the following quantifiers differ - with respect of scenarios, speed, etc.?, ?? and ?+ all match 0 or 1 times.*, *? and*+` all match 0 or more times.+, +? and ++ all match 1 or more times.?, * and + are greedy.??, *? and +? are reluctant/lazy. ?+, *+ and ++ are possessive.Can anyone help me to understand what these terms mean? Why are there three variations of each quantifier for the same job? <code> ","What are the differences between lazy, greedy and possessive quantifiers?"
How to make two tasks share options?," With Thor one can use method_option to set the options for a particular task. To set the options for all tasks in a class one can use class_option. But what about the case where one wants some tasks of a class, but not all, to share options?In the following task1 and task2 shares options but they do not share all options and they share no options with task3. The problem with stating method_option :type, :type => :string, :required => true, :default => 'foo' for both task1 and task2 is that it violates the DRY principle. Is there an idiomatic way of handling this? <code>  require 'thor'class Cli < Thor desc 'task1', 'Task 1' method_option :type, :type => :string, :required => true, :default => 'foo' def task1 end desc 'task2', 'Task 2' method_option :type, :type => :string, :required => true, :default => 'foo' method_option :value, :type => :numeric def task2 end desc 'task3', 'Task 3' method_option :verbose, :type => :boolean, :aliases => '-v' def task3 endendCli.start(ARGV)",How to make two thor tasks share options?
"How do I search a ruby array using a partial string, and return the index?"," I want to search through an array using a partial string, and then get the index where that string is found. For example: Using a.grep will return the full string, and using a.any? will return a correct true/false statement, but neither returns the index where the match was found, or at least I can't figure out how to do it.I'm working on a piece of code that reads a file, looks for a specific header, and then returns the index of that header so it can use it as an offset for future searches. Without starting my search from a specific index, my other searches will get false positives. <code>  a = [""This is line 1"", ""We have line 2 here"", ""and finally line 3"", ""potato""]a.index(""potato"") # this returns 3a.index(""We have"") # this returns nil","How do I search an array using a partial string, and return the index?"
Xcode - installing cocoapods no response," Trying to install CocoaPods from the terminal: After entering my root password, nothing happens.How can I debug that? <code>  $ sudo gem install cocoapods",Installing CocoaPods: no response
Xcode - Installing CocoaPods no response," Trying to install CocoaPods from the terminal: After entering my root password, nothing happens.How can I debug that? <code>  $ sudo gem install cocoapods",Installing CocoaPods: no response
How to format ruby logger, How do you format the ruby logger? <code> ,How to format ruby logger?
How the `Look-ahead` and `look-behind` concept supports such `Zero-Width Assertions` concept in Regex of Ruby?," I just gone through the concept Zero-Width Assertions from the documentation. And some quick questions comes into my mind- why such name Zero-Width Assertions?How the Look-ahead and look-behind concept supports suchZero-Width Assertions concept?What such ?<=s,<!s,=s,<=s - 4 symbols are instructing inside the pattern? can you help me here to focus to understand what is actually going onI also tried some tiny codes to understand the logic, but not that much confident with the output of those: Can anyone help me here to understand?EDITHere i have tried two snippets one with ""Zero-Width Assertions"" concepts as below: and the other is without ""Zero-Width Assertions"" concepts as below: Both the above produces same output,now internally how the both regexp move by their own to produce output- could you help me to visualize?Thanks <code>  irb(main):001:0> ""foresight"".sub(/(?!s)ight/, 'ee')=> ""foresee""irb(main):002:0> ""foresight"".sub(/(?=s)ight/, 'ee')=> ""foresight""irb(main):003:0> ""foresight"".sub(/(?<=s)ight/, 'ee')=> ""foresee""irb(main):004:0> ""foresight"".sub(/(?<!s)ight/, 'ee')=> ""foresight"" irb(main):002:0> ""foresight"".sub(/(?!s)ight/, 'ee')=> ""foresee"" irb(main):003:0> ""foresight"".sub(/ight/, 'ee')=> ""foresee""",How the Look-ahead and Look-behind concept supports such Zero-Width Assertions concept in Regex of Ruby?
Ruby get array index based on child hash value," Say I have this: How do I get the index based on id? What I want to do is return 0 when I search for id: 34, and 1 when I search for id: 2. What is the most efficient way? <code>  [ { :id => 34, :votes_count => 3 }, { :id => 2, :votes_count => 0 },]",Get array index based on child hash value
ruby declare multiple objects at same line," If I want to declare three new arrays (a1, a2, a3), I can do this: But now I want to do it all on one line, like but this fails. How can I assign them all to an empty array on one line? <code>  a1=[]a2=[]a3=[] a1, a2, a3 = []",Assign one value to multiple objects in one statement
Assigning multiple variables to the same value in one line," If I want to declare three new arrays (a1, a2, a3), I can do this: But now I want to do it all on one line, like but this fails. How can I assign them all to an empty array on one line? <code>  a1=[]a2=[]a3=[] a1, a2, a3 = []",Assign one value to multiple objects in one statement
Assign one value to multiple objects in one line," If I want to declare three new arrays (a1, a2, a3), I can do this: But now I want to do it all on one line, like but this fails. How can I assign them all to an empty array on one line? <code>  a1=[]a2=[]a3=[] a1, a2, a3 = []",Assign one value to multiple objects in one statement
"Ruby using || to determine value, using an empty string instead of a nil value"," I usually do so if input = nil But how can I do this so instead of nil It also counts an empty string '' as nilI want so that if I do Is there a simple elegant way to do this without if? <code>  value = input || ""default"" value = ""default"" input = ''value = input || ""default""=> ""default""","Ruby/Rails using || to determine value, using an empty string instead of a nil value"
"How to read midi file, change its instrument and write it back?"," I want to parse an already existing .mid file, change its instrument, from 'acoustic grand piano' to 'violin' for example, and save it back or as another .mid file. From what I saw in the documentation, the instrument gets altered with a program_change or patch_change directive but I cannot find any library that does this in MIDI files that exist already. They all seem to support it only MIDI files created from scratch. <code> ","How do I read a midi file, change its instrument, and write it back?"
What is flip flop in regexp context," I have heard and read about flip-flops with regular expressions in Perl and Ruby recently, but I was unable to find how they really work and what the common use cases are.Can anyone explain this in a language-agnostic manner?Now that I understand what it is, and how it works, I would rephrase the question to be simply: What is a flip-flop operator? <code> ",What is a flip-flop operator?
What is flip flop operator," I have heard and read about flip-flops with regular expressions in Perl and Ruby recently, but I was unable to find how they really work and what the common use cases are.Can anyone explain this in a language-agnostic manner?Now that I understand what it is, and how it works, I would rephrase the question to be simply: What is a flip-flop operator? <code> ",What is a flip-flop operator?
Setting/getting Ruby environment variables," I have a Rakefile which has tasks for deploying or building an application. This Rakefile is used in both production and development.I would like the build task to know what the environment is. Can this be done without passing a parameter to the task when I run it? Can it be done with environment variables?When in development, I need the task to look like this: And in production, like this: <code>  task :build => :clean do compass compile -e development jekyllend task :build => :clean do compass compile -e production jekyllend",Getting Ruby environment variables from Rake
Ruby Nokogiri Javascript Parsing," I need to parse an array out of a website. The part of the JavaScript I want to parse looks like this: I get the whole JavaScript using something like this: Is there an easy way to parse all the variables? <code>  _arPic[0] = ""http://example.org/image1.jpg"";_arPic[1] = ""http://example.org/image2.jpg"";_arPic[2] = ""http://example.org/image3.jpg"";_arPic[3] = ""http://example.org/image4.jpg"";_arPic[4] = ""http://example.org/image5.jpg"";_arPic[5] = ""http://example.org/image6.jpg""; product_page = Nokogiri::HTML(open(full_url)) product_page.css(""div#main_column script"")[0]",How to parse JavaScript using Nokogiri and Ruby
ruby not loading CSV from stdlib," I'm not really sure why this isn't working and I am stuck finding a solution. Very simply, I am running a little script that does require 'CSV', which has been working fine on my Mac with 1.9.3-p327, but has not been working from the server on p374.The error I get is /home/deployer/.rbenv/versions/1.9.3-p374/lib/ruby/1.9.1/rubygems/custom_require.rb:36:in require': cannot load such file -- CSV (LoadError)<br> from /home/deployer/.rbenv/versions/1.9.3-p374/lib/ruby/1.9.1/rubygems/custom_require.rb:36:inrequire' <code> ",Ruby not loading CSV from stdlib
Mock file input on Rspec," I have a question on how to use rspec to mock a file input. I have a following code for the class, but not exactly know a why to mock a file input. filepath is /path/to/the/fileI did my search on Google and usually turns out to be loading the actual file instead of mocking, but I'm actually looking the opposite where only mock, but not using the actual file. Is it possible to use EOF delimiter for this file input mocking? <code>  module Service class Signing def initialize(filepath) @config = YAML.load_file(filepath) raise ""Missing config file."" if @config.nil? end def sign() end private def which() end end end file = <<EOFA_NAME: ABCA_ALIAS: my_aliasEOF",Mock file input as file path on Rspec
Autoloading from custom folder in app/," We're currently developing a custom cms engine for ROR 3.2. In this process several class types originated that we want to be first class citizens in our rails application, meaning they should reside under the app folder of the application and it's plugins.Currently we're having the following types:DataSourceDataTypeViewI created multible directories under the app folder to hold these:app/data_sourceapp/data_typeapp/viewMore types will follow and I'm a little worried with polluting the app folder with so many directories. Thus i want to move them into a subdirectory/module that holds all Types defined by the cms.All classes should be inside a MyCms namespace and the directory layout should look like this:app/my_cms/data_sourceapp/my_cms/data_typeapp/my_cms/viewBut now I'm having trouble with autoloading because rails default autoloading would excpect the paths to be like this:app/data_source/my_cmsapp/data_type/my_cmsapp/view/my_cmsBut this way I would not have grouped all object types in one directory.What I want is somewhat similar to view grouping of isolated engines. In Devise for example, all views are grouped in the views/devise subdirectory.Any idea how this could be achieved without to much custom implementation? <code> ",Autoloading from namespace inside a custom folder in app
How to know whether a FileUtils command was successfull?," I don't see any return value from FileUtils commands.I'd like to do something like: I read the documentation for FileUtils, and also read a ""Getting executed command from ruby FileUtils"", but I cannot figure how to use the answer. <code>  really=(gets.chomp==""y"")if really success = FileUtils.rm_rf ""./PROJECT_#{@name}"" #does not workendputs ""./PROJECT_#{@name} deleted"" if success",How to know whether a FileUtils command was successful?
Using AvtiveRecord fixtures in RPspec without rails," I am using some ActiveRecord models outside of Rails for which I am writing unit tests. In my tests, I would like to be able to use fixtures and thought I would use some of rspec-rails features for that. I cannot simply use require ""rspec-rails"" because it has some Rails dependencies and I am not using Rails.Here is the spec_helper I am using: And here is an example of a test The problem is that, this way, the fixtures are not loaded. I looked into the rspec-rails code but cannot figure out what module I should extend or method I should call. <code>  require 'active_record'require 'active_record/fixtures'require 'active_support'require 'rspec/rails/extensions/active_record/base'require 'rspec/rails/adapters'require 'rspec/rails/fixture_support' # Includes ActiveRecord::TestFixtures # into the RSpec configrequire 'my_models'# Setup database connectionenvironment = ""test""configuration = YAML::load(File.open('config/database.yml'))ActiveRecord::Base.establish_connection(configuration[environment])RSpec.configure do |config| config.fixture_path = File.expand_path(""../../test/fixtures"", __FILE__) # If you're not using ActiveRecord, or you'd prefer not to run each of your # examples within a transaction, remove the following line or assign false # instead of true. config.use_transactional_fixtures = true # Run specs in random order to surface order dependencies. If you find an # order dependency and want to debug it, you can fix the order by providing # the seed, which is printed after each run. # --seed 1234 config.order = ""random"" # Run each test inside a DB transaction config.around(:each) do |test| ActiveRecord::Base.transaction do test.run raise ActiveRecord::Rollback end endend require 'spec_helper'describe Transaction do before :each do self.class.fixtures :users, :merchants end it ""should do this and that"" do ... endend",Loading ActiveRecord fixtures with RSpec without Rails
Using ActiveRecord fixtures in RPspec without rails," I am using some ActiveRecord models outside of Rails for which I am writing unit tests. In my tests, I would like to be able to use fixtures and thought I would use some of rspec-rails features for that. I cannot simply use require ""rspec-rails"" because it has some Rails dependencies and I am not using Rails.Here is the spec_helper I am using: And here is an example of a test The problem is that, this way, the fixtures are not loaded. I looked into the rspec-rails code but cannot figure out what module I should extend or method I should call. <code>  require 'active_record'require 'active_record/fixtures'require 'active_support'require 'rspec/rails/extensions/active_record/base'require 'rspec/rails/adapters'require 'rspec/rails/fixture_support' # Includes ActiveRecord::TestFixtures # into the RSpec configrequire 'my_models'# Setup database connectionenvironment = ""test""configuration = YAML::load(File.open('config/database.yml'))ActiveRecord::Base.establish_connection(configuration[environment])RSpec.configure do |config| config.fixture_path = File.expand_path(""../../test/fixtures"", __FILE__) # If you're not using ActiveRecord, or you'd prefer not to run each of your # examples within a transaction, remove the following line or assign false # instead of true. config.use_transactional_fixtures = true # Run specs in random order to surface order dependencies. If you find an # order dependency and want to debug it, you can fix the order by providing # the seed, which is printed after each run. # --seed 1234 config.order = ""random"" # Run each test inside a DB transaction config.around(:each) do |test| ActiveRecord::Base.transaction do test.run raise ActiveRecord::Rollback end endend require 'spec_helper'describe Transaction do before :each do self.class.fixtures :users, :merchants end it ""should do this and that"" do ... endend",Loading ActiveRecord fixtures with RSpec without Rails
Using ActiveRecord fixtures in RPspec without Rails," I am using some ActiveRecord models outside of Rails for which I am writing unit tests. In my tests, I would like to be able to use fixtures and thought I would use some of rspec-rails features for that. I cannot simply use require ""rspec-rails"" because it has some Rails dependencies and I am not using Rails.Here is the spec_helper I am using: And here is an example of a test The problem is that, this way, the fixtures are not loaded. I looked into the rspec-rails code but cannot figure out what module I should extend or method I should call. <code>  require 'active_record'require 'active_record/fixtures'require 'active_support'require 'rspec/rails/extensions/active_record/base'require 'rspec/rails/adapters'require 'rspec/rails/fixture_support' # Includes ActiveRecord::TestFixtures # into the RSpec configrequire 'my_models'# Setup database connectionenvironment = ""test""configuration = YAML::load(File.open('config/database.yml'))ActiveRecord::Base.establish_connection(configuration[environment])RSpec.configure do |config| config.fixture_path = File.expand_path(""../../test/fixtures"", __FILE__) # If you're not using ActiveRecord, or you'd prefer not to run each of your # examples within a transaction, remove the following line or assign false # instead of true. config.use_transactional_fixtures = true # Run specs in random order to surface order dependencies. If you find an # order dependency and want to debug it, you can fix the order by providing # the seed, which is printed after each run. # --seed 1234 config.order = ""random"" # Run each test inside a DB transaction config.around(:each) do |test| ActiveRecord::Base.transaction do test.run raise ActiveRecord::Rollback end endend require 'spec_helper'describe Transaction do before :each do self.class.fixtures :users, :merchants end it ""should do this and that"" do ... endend",Loading ActiveRecord fixtures with RSpec without Rails
Using ActiveRecord fixtures from RPspec without Rails," I am using some ActiveRecord models outside of Rails for which I am writing unit tests. In my tests, I would like to be able to use fixtures and thought I would use some of rspec-rails features for that. I cannot simply use require ""rspec-rails"" because it has some Rails dependencies and I am not using Rails.Here is the spec_helper I am using: And here is an example of a test The problem is that, this way, the fixtures are not loaded. I looked into the rspec-rails code but cannot figure out what module I should extend or method I should call. <code>  require 'active_record'require 'active_record/fixtures'require 'active_support'require 'rspec/rails/extensions/active_record/base'require 'rspec/rails/adapters'require 'rspec/rails/fixture_support' # Includes ActiveRecord::TestFixtures # into the RSpec configrequire 'my_models'# Setup database connectionenvironment = ""test""configuration = YAML::load(File.open('config/database.yml'))ActiveRecord::Base.establish_connection(configuration[environment])RSpec.configure do |config| config.fixture_path = File.expand_path(""../../test/fixtures"", __FILE__) # If you're not using ActiveRecord, or you'd prefer not to run each of your # examples within a transaction, remove the following line or assign false # instead of true. config.use_transactional_fixtures = true # Run specs in random order to surface order dependencies. If you find an # order dependency and want to debug it, you can fix the order by providing # the seed, which is printed after each run. # --seed 1234 config.order = ""random"" # Run each test inside a DB transaction config.around(:each) do |test| ActiveRecord::Base.transaction do test.run raise ActiveRecord::Rollback end endend require 'spec_helper'describe Transaction do before :each do self.class.fixtures :users, :merchants end it ""should do this and that"" do ... endend",Loading ActiveRecord fixtures with RSpec without Rails
Loading ActiveRecord fixtures with RPspec without Rails," I am using some ActiveRecord models outside of Rails for which I am writing unit tests. In my tests, I would like to be able to use fixtures and thought I would use some of rspec-rails features for that. I cannot simply use require ""rspec-rails"" because it has some Rails dependencies and I am not using Rails.Here is the spec_helper I am using: And here is an example of a test The problem is that, this way, the fixtures are not loaded. I looked into the rspec-rails code but cannot figure out what module I should extend or method I should call. <code>  require 'active_record'require 'active_record/fixtures'require 'active_support'require 'rspec/rails/extensions/active_record/base'require 'rspec/rails/adapters'require 'rspec/rails/fixture_support' # Includes ActiveRecord::TestFixtures # into the RSpec configrequire 'my_models'# Setup database connectionenvironment = ""test""configuration = YAML::load(File.open('config/database.yml'))ActiveRecord::Base.establish_connection(configuration[environment])RSpec.configure do |config| config.fixture_path = File.expand_path(""../../test/fixtures"", __FILE__) # If you're not using ActiveRecord, or you'd prefer not to run each of your # examples within a transaction, remove the following line or assign false # instead of true. config.use_transactional_fixtures = true # Run specs in random order to surface order dependencies. If you find an # order dependency and want to debug it, you can fix the order by providing # the seed, which is printed after each run. # --seed 1234 config.order = ""random"" # Run each test inside a DB transaction config.around(:each) do |test| ActiveRecord::Base.transaction do test.run raise ActiveRecord::Rollback end endend require 'spec_helper'describe Transaction do before :each do self.class.fixtures :users, :merchants end it ""should do this and that"" do ... endend",Loading ActiveRecord fixtures with RSpec without Rails
How to find out if a string in ruby contains only characters or only digits," I just started tinkering with Ruby earlier this week and I've run into something that I don't quite know how to code. I'm converting a scanner that was written in Java into Ruby for a class assignment, and I've gotten down to this section: lookAhead is a single character picked out of the string (moving by one space each time it loops through) and these two methods determine if it is a character or a digit, returning the appropriate token type. I haven't been able to figure out a Ruby equivalent to Character.isLetter() and Character.isDigit(). <code>  if (Character.isLetter(lookAhead)){ return id();}if (Character.isDigit(lookAhead)){ return number();}",Ruby: How to find out if a character is a letter or a digit?
How to find out in ruby if a character is a letter or a digit," I just started tinkering with Ruby earlier this week and I've run into something that I don't quite know how to code. I'm converting a scanner that was written in Java into Ruby for a class assignment, and I've gotten down to this section: lookAhead is a single character picked out of the string (moving by one space each time it loops through) and these two methods determine if it is a character or a digit, returning the appropriate token type. I haven't been able to figure out a Ruby equivalent to Character.isLetter() and Character.isDigit(). <code>  if (Character.isLetter(lookAhead)){ return id();}if (Character.isDigit(lookAhead)){ return number();}",Ruby: How to find out if a character is a letter or a digit?
"Iterate between two DateTime's, with a 1 hour step"," I'm looking for an efficient way, in Ruby 1.9.x/Rails 3.2.x, to iterate between two DateTime objects, with a one-hour step. I understand that an issue with this is that 1.hour is just the number of seconds, but my attempts to convert that to a DateTime object and use that as the step doesn't work either.I looked at ""Beware of Ruby Sugar"". It mentions, near the bottom, that DateTime has a direct step method. I confirmed this by running methods on a DateTime object, but I cannot find any documentation on step in DateTime, in either Ruby's or Rails' documents. <code>  ('2013-01-01'.to_datetime .. '2013-02-01'.to_datetime).step(1.hour) do |date| ...end","Iterating between two DateTimes, with a one hour step"
Bundler stucks while installing or updating gems," I recently tried to run bundle update and one of my cores was stuck at 100%. I tried to reset everything, including deleting my RVM gemset but nothing helped.I used bundle install --verbose to see what's going on and the whole process stopped at this point: How do I solve this? <code>  Unmet Dependencies: [""spicycode-rcov"", ""tenderlove-frex""]Fetching gem metadata from http://rubygems.org/Query List: [""spicycode-rcov"", ""tenderlove-frex""]Query Gemcutter Dependency Endpoint API: spicycode-rcov tenderlove-frexFetching from: http://rubygems.org/api/v1/dependencies?gems=spicycode-rcov,tenderlove-frexHTTP SuccessQuery List: []",Bundler stuck while installing or updating gems
How does one mimify a javascript partial within a rails erb file?, The application is not using the standard asset pipeline due to having some of the javascript being rendered dynamically by controller variables. I'd like to minify the js before appending/inline-ing it into the html file that it would be served out from. I've tried <render :partial => 'javascript.js'> which is the standard way to render a partial in an erb.Ideally i'd just be able to do <render :partial => Minify.new.minify('javascript.js')> to render out a minified version of the js <code> ,How does one minify a javascript partial within a rails erb file?
How to install rmagic gem on Windows?," How do I install rmagick gem for Windows XP? I already installed ImageMagick with the header files, and I installed RailsInstaller.org which comes with DevKit. I don't know where to look to fix these errors. Here is the contents of gem_make.out Here is the contents of extconf.rb This is the contents of mkmf.log I also have Cygwin and tried there, but encountered a different ruby related error. I can see a few errors, like 'Invalid drive specification', but I don't know where that is coming from.  <code>  C:\RailsInstaller\ImageMagick-6.8.2-Q16>ruby -vruby 1.9.3p125 (2012-02-16) [i386-mingw32]C:\RailsInstaller\ImageMagick-6.8.2-Q16>gem -v1.8.16C:\RailsInstaller\ImageMagick-6.8.2-Q16>path=%PATH%;C:\RailsInstaller\ImageMagick-6.8.2-Q16C:\RailsInstaller\ImageMagick-6.8.2-Q16>identifyVersion: ImageMagick 6.8.2-0 2013-01-24 Q16 http://www.imagemagick.orgCopyright: Copyright (C) 1999-2013 ImageMagick Studio LLCC:\RailsInstaller\ImageMagick-6.8.2-Q16>gem install rmagickTemporarily enhancing PATH to include DevKit...Building native extensions. This could take a while...ERROR: Error installing rmagick: ERROR: Failed to build gem native extension. C:/RailsInstaller/Ruby1.9.3/bin/ruby.exe extconf.rbchecking for Ruby version >= 1.8.5... yesInvalid drive specification.Unable to get ImageMagick version*** extconf.rb failed ***Could not create Makefile due to some reason, probably lack ofnecessary libraries and/or headers. Check the mkmf.log file for moredetails. You may need configuration options.Provided configuration options: --with-opt-dir --without-opt-dir --with-opt-include --without-opt-include=${opt-dir}/include --with-opt-lib --without-opt-lib=${opt-dir}/lib --with-make-prog --without-make-prog --srcdir=. --curdir --ruby=C:/RailsInstaller/Ruby1.9.3/bin/rubyGem files will remain installed in C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/rmagick-2.13.1 for inspection.Results logged to C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/rmagick-2 .13.1/ext/RMagick/gem_make.outC:\RailsInstaller\ImageMagick-6.8.2-Q16>dir include Volume in drive C has no label. Volume Serial Number is F8E5-EDB8 Directory of C:\RailsInstaller\ImageMagick-6.8.2-Q16\include01/29/2013 04:33 PM <DIR> .01/29/2013 04:33 PM <DIR> ..01/29/2013 04:33 PM <DIR> magick01/29/2013 04:33 PM <DIR> Magick++09/05/2009 04:47 PM 419 Magick++.h01/29/2013 04:33 PM <DIR> wand C:/RailsInstaller/Ruby1.9.3/bin/ruby.exe extconf.rbchecking for Ruby version >= 1.8.5... yesInvalid drive specification.Unable to get ImageMagick version*** extconf.rb failed ***Could not create Makefile due to some reason, probably lack ofnecessary libraries and/or headers. Check the mkmf.log file for moredetails. You may need configuration options.Provided configuration options: --with-opt-dir --without-opt-dir --with-opt-include --without-opt-include=${opt-dir}/include --with-opt-lib --without-opt-lib=${opt-dir}/lib --with-make-prog --without-make-prog --srcdir=. --curdir --ruby=C:/RailsInstaller/Ruby1.9.3/bin/ruby require ""mkmf""require ""date""RMAGICK_VERS = ""2.13.1""MIN_RUBY_VERS = ""1.8.5""MIN_RUBY_VERS_NO = MIN_RUBY_VERS.tr(""."","""").to_iMIN_IM_VERS = ""6.4.9""MIN_IM_VERS_NO = MIN_IM_VERS.tr(""."","""").to_i# Test for a specific value in an enum typedef have_enum_value(enum, value, headers=nil, &b) checking_for ""#{enum}.#{value}"" do if try_compile(<<""SRC"", &b)#{COMMON_HEADERS}#{cpp_include(headers)}/*top*/int main() { #{enum} t = #{value}; t = t; return 0; }SRC $defs.push(format(""-DHAVE_ENUM_%s"", value.upcase)) true else false end endend# Test for multiple values of the same enum typedef have_enum_values(enum, values, headers=nil, &b) values.each do |value| have_enum_value(enum, value, headers, &b) endenddef exit_failure(msg) Logging::message msg message msg+""\n"" exit(1)end# Seems like lots of people have multiple versions of ImageMagick installed.def check_multiple_imagemagick_versions() versions = [] path = ENV['PATH'].split(File::PATH_SEPARATOR) path.each do |dir| file = File.join(dir, ""Magick-config"") if File.executable? file vers = `#{file} --version`.chomp.strip prefix = `#{file} --prefix`.chomp.strip versions << [vers, prefix, dir] end end versions.uniq! if versions.size > 1 msg = ""\nWarning: Found more than one ImageMagick installation. This could cause problems at runtime.\n"" versions.each do |vers, prefix, dir| msg << "" #{dir}/Magick-config reports version #{vers} is installed in #{prefix}\n"" end msg << ""Using #{versions[0][0]} from #{versions[0][1]}.\n\n"" Logging::message msg message msg endend# Ubuntu (maybe other systems) comes with a partial installation of# ImageMagick in the prefix /usr (some libraries, no includes, and no# binaries). This causes problems when /usr/lib is in the path (e.g., using# the default Ruby installation).def check_partial_imagemagick_versions() prefix = config_string(""prefix"") matches = [ prefix+""/lib/lib?agick*"", prefix+""/include/ImageMagick"", prefix+""/bin/Magick-config"", ].map do |file_glob| Dir.glob(file_glob) end matches.delete_if { |arr| arr.empty? } if 0 < matches.length and matches.length < 3 msg = ""\nWarning: Found a partial ImageMagick installation. Your operating system likely has some built-in ImageMagick libraries but not all of ImageMagick. This will most likely cause problems at both compile and runtime.\nFound partial installation at: ""+prefix+""\n"" Logging::message msg message msg endendif RUBY_PLATFORM =~ /mswin/ abort <<END_MSWIN+----------------------------------------------------------------------------+| This rmagick gem is for use only on Linux, BSD, OS X, and similar systems || that have a gnu or similar toolchain installed. The rmagick-win32 gem is a || pre-compiled version of RMagick bundled with ImageMagick for use on || Microsoft Windows systems. The rmagick-win32 gem is available on RubyForge.|| See http://rmagick.rubyforge.org/install-faq.html for more information. |+----------------------------------------------------------------------------+END_MSWINendunless checking_for(""Ruby version >= #{MIN_RUBY_VERS}"") do version = RUBY_VERSION.tr(""."","""").to_i version >= MIN_RUBY_VERS_NOend exit_failure ""Can't install RMagick #{RMAGICK_VERS}. Ruby #{MIN_RUBY_VERS} or later required.\n""end# Magick-config is not available on Windowsif RUBY_PLATFORM !~ /mswin|mingw/ # Check for compiler. Extract first word so ENV['CC'] can be a program name with arguments. cc = (ENV[""CC""] or Config::CONFIG[""CC""] or ""gcc"").split(' ').first unless find_executable(cc) exit_failure ""No C compiler found in ${ENV['PATH']}. See mkmf.log for details."" end # Check for Magick-config unless find_executable(""Magick-config"") exit_failure ""Can't install RMagick #{RMAGICK_VERS}. Can't find Magick-config in #{ENV['PATH']}\n"" end check_multiple_imagemagick_versions() check_partial_imagemagick_versions() # Ensure minimum ImageMagick version unless checking_for(""ImageMagick version >= #{MIN_IM_VERS}"") do version = `Magick-config --version`.chomp.tr(""."","""").to_i version >= MIN_IM_VERS_NO end exit_failure ""Can't install RMagick #{RMAGICK_VERS}. You must have ImageMagick #{MIN_IM_VERS} or later.\n"" end $magick_version = `Magick-config --version`.chomp # Ensure ImageMagick is not configured for HDRI unless checking_for(""HDRI disabled version of ImageMagick"") do not (`Magick-config --version`[""HDRI""]) end exit_failure ""\nCan't install RMagick #{RMAGICK_VERS}.""+ ""\nRMagick does not work when ImageMagick is configured for High Dynamic Range Images.""+ ""\nDon't use the --enable-hdri option when configuring ImageMagick.\n"" end # Save flags $CFLAGS = ENV[""CFLAGS""].to_s + "" "" + `Magick-config --cflags`.chomp $CPPFLAGS = ENV[""CPPFLAGS""].to_s + "" "" + `Magick-config --cppflags`.chomp $LDFLAGS = ENV[""LDFLAGS""].to_s + "" "" + `Magick-config --ldflags`.chomp $LOCAL_LIBS = ENV[""LIBS""].to_s + "" "" + `Magick-config --libs`.chompelsif RUBY_PLATFORM =~ /mingw/ # mingw `convert -version` =~ /Version: ImageMagick (\d+\.\d+\.\d+)-\d+ / abort ""Unable to get ImageMagick version"" unless $1 $magick_version = $1 $LOCAL_LIBS = '-lCORE_RL_magick_ -lX11'else # mswin `convert -version` =~ /Version: ImageMagick (\d+\.\d+\.\d+)-\d+ / abort ""Unable to get ImageMagick version"" unless $1 $magick_version = $1 $CFLAGS = ""-W3"" $CPPFLAGS = %Q{-I""C:\\Program Files\\Microsoft Platform SDK for Windows Server 2003 R2\\Include"" -I""C:\\Program Files\\ImageMagick-#{$magick_version}-Q8\\include""} # The /link option is required by the Makefile but causes warnings in the mkmf.log file. $LDFLAGS = %Q{/link /LIBPATH:""C:\\Program Files\\Microsoft Platform SDK for Windows Server 2003 R2\\Lib"" /LIBPATH:""C:\\Program Files\\ImageMagick-#{$magick_version}-Q8\\lib"" /LIBPATH:""C:\\ruby\\lib""} $LOCAL_LIBS = 'CORE_RL_magick_.lib X11.lib'end#headers = %w{assert.h ctype.h errno.h float.h limits.h math.h stdarg.h stddef.h stdint.h stdio.h stdlib.h string.h time.h}headers = %w{assert.h ctype.h stdio.h stdlib.h math.h time.h}headers << ""stdint.h"" if have_header(""stdint.h"") # defines uint64_theaders << ""sys/types.h"" if have_header(""sys/types.h"")if have_header(""wand/MagickWand.h"") headers << ""wand/MagickWand.h""else exit_failure ""\nCan't install RMagick #{RMAGICK_VERS}. Can't find MagickWand.h.""endif RUBY_PLATFORM !~ /mswin|mingw/ unless have_library(""MagickCore"", ""InitializeMagick"", headers) || have_library(""Magick"", ""InitializeMagick"", headers) || have_library(""Magick++"",""InitializeMagick"",headers) exit_failure ""Can't install RMagick #{RMAGICK_VERS}. "" + ""Can't find the ImageMagick library or one of the dependent libraries. "" + ""Check the mkmf.log file for more detailed information.\n"" endendhave_func(""snprintf"", headers) [""AcquireImage"", # 6.4.1 ""AffinityImage"", # 6.4.3-6 ""AffinityImages"", # 6.4.3-6 ""AutoGammaImageChannel"", # 6.5.5-1 ""AutoLevelImageChannel"", # 6.5.5-1 ""BlueShiftImage"", # 6.5.4-3 ""ConstituteComponentTerminus"", # 6.5.7-9 ""DeskewImage"", # 6.4.2-5 ""EncipherImage"", # 6.3.8-6 ""EqualizeImageChannel"", # 6.3.6-9 ""FloodfillPaintImage"", # 6.3.7 ""FunctionImageChannel"", # 6.4.8-8 ""GetAuthenticIndexQueue"", # 6.4.5-6 ""GetAuthenticPixels"", # 6.4.5-6 ""GetImageAlphaChannel"", # 6.3.9-2 ""GetVirtualPixels"", # 6.4.5-6 ""LevelImageColors"", # 6.4.2 ""LevelColorsImageChannel"", # 6.5.6-4 ""LevelizeImageChannel"", # 6.4.2 ""LiquidRescaleImage"", # 6.3.8-2 ""MagickLibAddendum"", # 6.5.9-1 ""OpaquePaintImageChannel"", # 6.3.7-10 ""QueueAuthenticPixels"", # 6.4.5-6 ""RemapImage"", # 6.4.4-0 ""RemoveImageArtifact"", # 6.3.6 ""SelectiveBlurImageChannel"", # 6.5.0-3 ""SetImageAlphaChannel"", # 6.3.6-9 ""SetImageArtifact"", # 6.3.6 ""SetMagickMemoryMethods"", # 6.4.1 ""SparseColorImage"", # 6.3.6-? ""SyncAuthenticPixels"", # 6.4.5-6 ""TransparentPaintImage"", # 6.3.7-10 ""TransparentPaintImageChroma"" # 6.4.5-6 ].each do |func| have_func(func, headers) endchecking_for(""QueryMagickColorname() new signature"") do if try_compile(<<""SRC"")#{COMMON_HEADERS}#{cpp_include(headers)}/*top*/int main() { MagickBooleanType okay; Image *image; MagickPixelPacket *color; char *name; ExceptionInfo *exception; okay = QueryMagickColorname(image, color, SVGCompliance, name, exception); return 0; }SRC $defs.push(""-DHAVE_NEW_QUERYMAGICKCOLORNAME"") true else false endendhave_struct_member(""Image"", ""type"", headers) # ???have_struct_member(""DrawInfo"", ""kerning"", headers) # 6.4.7-8have_struct_member(""DrawInfo"", ""interline_spacing"", headers) # 6.5.5-8have_struct_member(""DrawInfo"", ""interword_spacing"", headers) # 6.4.8-0have_type(""DitherMethod"", headers) # 6.4.2have_type(""MagickFunction"", headers) # 6.4.8-8have_type(""ImageLayerMethod"", headers) # 6.3.6 replaces MagickLayerMethodhave_type(""long double"", headers)#have_type(""unsigned long long"", headers)#have_type(""uint64_t"", headers)#have_type(""__int64"", headers)#have_type(""uintmax_t"", headers)#check_sizeof(""unsigned long"", headers)#check_sizeof(""Image *"", headers)have_enum_values(""AlphaChannelType"", [""CopyAlphaChannel"", # 6.4.3-7 ""BackgroundAlphaChannel""], headers) # 6.5.2-5have_enum_values(""CompositeOperator"", [""BlurCompositeOp"", # 6.5.3-7 ""DistortCompositeOp"", # 6.5.3-10 ""LinearBurnCompositeOp"", # 6.5.4-3 ""LinearDodgeCompositeOp"", # 6.5.4-3 ""MathematicsCompositeOp"", # 6.5.4-3 ""PegtopLightCompositeOp"", # 6.5.4-3 ""PinLightCompositeOp"", # 6.5.4-3 ""VividLightCompositeOp""], headers) # 6.5.4-3have_enum_values(""CompressionType"", [""DXT1Compression"", # 6.3.9-3 ""DXT3Compression"", # 6.3.9-3 ""DXT5Compression"", # 6.3.9-3 ""ZipSCompression"", # 6.5.5-4 ""PizCompression"", # 6.5.5-4 ""Pxr24Compression"", # 6.5.5-4 ""B44Compression"", # 6.5.5-4 ""B44ACompression""], headers) # 6.5.5-4have_enum_values(""DistortImageMethod"", [""BarrelDistortion"", # 6.4.2-5 ""BarrelInverseDistortion"", # 6.4.3-8 ""BilinearForwardDistortion"", # 6.5.1-2 ""BilinearReverseDistortion"", # 6.5.1-2 ""DePolarDistortion"", # 6.4.2-6 ""PolarDistortion"", # 6.4.2-6 ""PolynomialDistortion"", # 6.4.2-4 ""ShepardsDistortion""], headers) # 6.4.2-4have_enum_value(""DitherMethod"", ""NoDitherMethod"", headers) # 6.4.3have_enum_values(""FilterTypes"", [""KaiserFilter"", # 6.3.6 ""WelshFilter"", # 6.3.6-4 ""ParzenFilter"", # 6.3.6-4 ""LagrangeFilter"", # 6.3.7-2 ""BohmanFilter"", # 6.3.7-2 ""BartlettFilter"", # 6.3.7-2 ""SentinelFilter""], headers) # 6.3.7-2have_enum_values(""MagickEvaluateOperator"", [""PowEvaluateOperator"", # 6.4.1-9 ""LogEvaluateOperator"", # 6.4.2 ""ThresholdEvaluateOperator"", # 6.4.3 ""ThresholdBlackEvaluateOperator"", # 6.4.3 ""ThresholdWhiteEvaluateOperator"", # 6.4.3 ""GaussianNoiseEvaluateOperator"", # 6.4.3 ""ImpulseNoiseEvaluateOperator"", # 6.4.3 ""LaplacianNoiseEvaluateOperator"", # 6.4.3 ""MultiplicativeNoiseEvaluateOperator"", # 6.4.3 ""PoissonNoiseEvaluateOperator"", # 6.4.3 ""UniformNoiseEvaluateOperator"", # 6.4.3 ""CosineEvaluateOperator"", # 6.4.8-5 ""SineEvaluateOperator"", # 6.4.8-5 ""AddModulusEvaluateOperator""], # 6.4.8-5 headers)have_enum_values(""MagickFunction"", [""ArcsinFunction"", # 6.5.2-8 ""ArctanFunction"", # 6.5.2-8 ""PolynomialFunction"", # 6.4.8-8 ""SinusoidFunction""], headers) # 6.4.8-8have_enum_values(""ImageLayerMethod"", [""FlattenLayer"", # 6.3.6-2 ""MergeLayer"", # 6.3.6 ""MosaicLayer"", # 6.3.6-2 ""TrimBoundsLayer"" ], headers) # 6.4.3-8have_enum_values(""VirtualPixelMethod"", [""HorizontalTileVirtualPixelMethod"", # 6.4.2-6 ""VerticalTileVirtualPixelMethod"", # 6.4.2-6 ""HorizontalTileEdgeVirtualPixelMethod"", # 6.5.0-1 ""VerticalTileEdgeVirtualPixelMethod"", # 6.5.0-1 ""CheckerTileVirtualPixelMethod""], # 6.5.0-1 headers)# Now test Ruby 1.9.0 features.headers = [""ruby.h""]if have_header(""ruby/io.h"") headers << ""ruby/io.h""else headers << ""rubyio.h""endhave_func(""rb_frame_this_func"", headers)# Miscellaneous constants$defs.push(""-DRUBY_VERSION_STRING=\""ruby #{RUBY_VERSION}\"""")$defs.push(""-DRMAGICK_VERSION_STRING=\""RMagick #{RMAGICK_VERS}\"""")create_header()# Prior to 1.8.5 mkmf duplicated the symbols on the command line and in the# extconf.h header. Suppress that behavior by removing the symbol array.$defs = []# Force re-compilation if the generated Makefile changed.$config_h = ""Makefile rmagick.h""create_makefile(""RMagick2"")SUMMARY = <<""END_SUMMARY""#{""="" * 70}#{DateTime.now.strftime(""%a %d%b%y %T"")}This installation of RMagick #{RMAGICK_VERS} is configured forRuby #{RUBY_VERSION} (#{RUBY_PLATFORM}) and ImageMagick #{$magick_version}#{""="" * 70}END_SUMMARYLogging::message SUMMARYmessage SUMMARY checking for Ruby version >= 1.8.5... -------------------- yes--------------------",How to install rmagick gem on Windows?
Benefits of using Hash#fetch over hash[:key], I am not sure in what situation I would want to use Hash#fetch over Hash#[]. Is there a common scenario in where it would be of good use? <code> ,Benefits of using `Hash#fetch` over `Hash#[]`
RSpec: Detect Thread Created," In RSpec, I have function that creates a new thread, and inside that thread performs some actionin my case, calls TCPSocket#readline. Here's the function as it is right now: Due to thread scheduling, my test will fail if written as such: Currently the only way I know to hack around this is to use sleep 0.1. Is there a way to properly delay the test until that thread is running? <code>  def read Thread.new do while line = @socket.readline #TODO: stuff end endend it ""reads from socket"" do subject.socket.should_receive(:readline) subject.readend",RSpec: Testing with Threads
You don't have write permissions into the /Library/Ruby/Gems/1.8 directory," I'm trying to install a gem using gem install mygem or update RubyGems using gem update --system, and it fails with this error: Does anyone have an idea how to solve this? <code>  ERROR: While executing gem ... (Gem::FilePermissionError)You don't have write permissions for the /Library/Ruby/Gems/2.0.0 directory.",How to install a gem or update RubyGems if it fails with a permissions error
Installing gem or updating RubyGems fails with permissions error," I'm trying to install a gem using gem install mygem or update RubyGems using gem update --system, and it fails with this error: Does anyone have an idea how to solve this? <code>  ERROR: While executing gem ... (Gem::FilePermissionError)You don't have write permissions for the /Library/Ruby/Gems/2.0.0 directory.",How to install a gem or update RubyGems if it fails with a permissions error
How to install a gem or updatie RubyGems if it fails with a permissions error," I'm trying to install a gem using gem install mygem or update RubyGems using gem update --system, and it fails with this error: Does anyone have an idea how to solve this? <code>  ERROR: While executing gem ... (Gem::FilePermissionError)You don't have write permissions for the /Library/Ruby/Gems/2.0.0 directory.",How to install a gem or update RubyGems if it fails with a permissions error
Ruby strptime vs. strftime?," What's the difference between strptime and strftime? I see that strptime is a method in the DateTime class, and strftime is a method in the Time class.What's the difference between Time and DateTime, other than that they have different core methods? The explanation for the Time class in the Ruby docs is helpful, but the one for DateTime just says ""datetime"". There's also the Date class, which says it provides Date and DateTime. Help me make sense of this.I see strptime and I want to pronounce it ""strip time"", but that doesn't make sense. Is there a good mnemonic-device for it?What do strptime and strftime mean, anyway?How do you remember which does what? <code> ",How to understand strptime vs. strftime
Ruby strptime vs. strftime," What's the difference between strptime and strftime? I see that strptime is a method in the DateTime class, and strftime is a method in the Time class.What's the difference between Time and DateTime, other than that they have different core methods? The explanation for the Time class in the Ruby docs is helpful, but the one for DateTime just says ""datetime"". There's also the Date class, which says it provides Date and DateTime. Help me make sense of this.I see strptime and I want to pronounce it ""strip time"", but that doesn't make sense. Is there a good mnemonic-device for it?What do strptime and strftime mean, anyway?How do you remember which does what? <code> ",How to understand strptime vs. strftime
"Custom field in form_for rails, dont in model some controller"," I want to pass a parameter to my controller, its a simple check box but I dont know how I introduce this in my form_for of a model, see this is my view: I want to make a extra checkbox but how can I make this, no a object in model but a object some to check to make a if else in controller, if check if no check, please help-me and thanks a lot, thanks <code>  <%= form_for @finance,:html => { :id => 'go_finance' } do |f| %> <br> Transferir de :<%= f.select :from_money, @places.map { |p| [p.place, p.id] } %> para: <%= f.select :to_money, @places.map { |p| [p.place, p.id] } %> <br> Entrada: <%= f.text_field :input,:id => ""input"",:placeholder => ""Quanto foi ganho ?"" %> Sada: <%= f.text_field :output,:id => ""output"",:placeholder => ""Quanto foi gasto ?"" %> <br> Nota: <%= f.text_area :note %> <%= f.submit %><% end -%>",Custom field in form_for which isn't in model
how to click on a specific coordinates of a element," I need click on a specific coordinates of a element with watir-webdriver. With selemium-webdriver it will be looks like: But how do it with watir? <code>  @driver.action.move_to(element, 30, 0).click.perform",How to click on a specific coordinates of an element
How do i create spaces in ruby?," How would i put line breaks in between lines like this: Because it would just output this: <code>  print ""Hi""print ""Hi"" HiHi",How do i create line breaks in ruby?
Fix ruby string to n characters," How to force Ruby string variable output using puts to n characters so that if the variable is longer, it will be truncated, if shorter, it will be expanded by trailing or leading spaces?Is there some standard method to do this? <code> ",How to force Ruby string to n characters
How do I read text from non visible div with Watir (Ruby)?," There is a div on a page that is not visible but has some value I want to capture. Calling text on it returns me an empty string.How do I get the value displayed without having to deal with the raw html? Can I force .text to return me the actual value regardless of the visiblity of the text in the browser? PS: There are many many divs (the page is caching response and display them accordingly). I considered changing all the display:none in the page or clicking to make them visible but I'd prefer to avoid this if possible.If not possible a solution with changing all the display none would be the preferred work around.PPS: Damned, I tried to overload the visible? method in the Watir::Element class to always return true, but that didn't do the trick. <code>  irb(main):1341:0> d.first.visible?=> falseirb(main):1344:0> d.first.html=> ""<div class=\""day\"">7</div>""irb(main):1345:0> d.first.text=> """" irb(main):1502:0> d.first.visible?=> trueirb(main):1504:0> d.first.text=> """"",How do I read text from non visible elements with Watir (Ruby)?
How do I get parent the class name in Ruby, Let assume I have a classes A and B where B inherits A. How do I print parent class name in B Some things I have tried Thanks :) <code>  class Aendclass B < Aend >> B.new.class #=> B #which is correct>> B.new.parent #=> Undefined method `parent`>> B.parent #=> Object>> B.parent.class #=> Class,How do I get the parent's class name in Ruby
Devise and subdomains," I have seen a lot of questions about this topic, but a lot of them have contradictory information, and for some reason it didnt work for me.I have:a top level domain: i.e. lvh.me (development).each user has subdomains: i.e. userdomain.lvh.meThe login form is in the top level domain: lvh.me I want:If an user logs in, the session needs to be shared between all the subdomains. I mean, the session needs to be active in lvh.me:3000/something and userdomain.lvh.me:3000If an user logs out from lvh.me:3000/something it should work, and if the user logs out from userdomain.lvh.me:3000 it should work also.I triedSetting in an initializer the following:MyApplication::Application.config.session_store :cookie_store, :key => '_mykey', :domain => :allWhat happened?I can login in lvh.me:3000, I am correctly redirected to lvh.me:3000/internalpage and if I go to subdomain.lvh.me:3000 it works great. I can also logout from lvh.me:3000/internalpage BUT if I try to logout from subdomain.lvh.me:3000 it doesn't work. The destroy action in Devise SessionsController is executed and everything, but the session doesn't die.According to http://excid3.com/blog/sharing-a-devise-user-session-across-subdomains-with-rails-3/, The trick here is the :domain option. What this does is sets the level of the TLD (top level domain) and tells Rails how long the domain is. The part you want to watch out for here is that if you set :domain => :all like is recommend in some places, it simply wont work unless youre using localhost. :all defaults to a TLD length of 1, which means if youre testing with Pow (myapp.dev) it wont work either because that is a TLD of length 2.So, after reading that I also triedMyApplication::Application.config.session_store :cookie_store, :key => '_mykey', :domain => 'lvh.me'What happened?I can login in lvh.me:3000, I am correctly redirected to lvh.me:3000/internalpage and if I go to subdomain.lvh.me:3000 it doesn't work, i have no session there. If I go back to lvh.me:3000/internalpage my session has disappeared. What happened there?What else?Then, after reading rails 3.2 subdomains and devise I changed my initializer line to Note the ""."" before the domain name.According to the post in SO: This allows this cookie to be accessible across subdomains and the application should maintain it's session across subdomains. May not be 100% what you are looking for but it should get you going in the right direction.What happened?Nothing, it didn't work. Same behavior if compared with the last thing I tried.I finally tried What does Rails 3 session_store domain :all really do? , creating a custom class to handle the cookies. But I had no luck.Of course that I deleted all the cookies and temp files before each attempt. Also I changed the name of the cookie.Any help? Thanks! <code>  MyApplication::Application.config.session_store :cookie_store, :key => '_mykey', :domain => '.lvh.me'",Devise not working well with multiple subdomains on RoR3 application
Devise not sharing session between multiple subdomains," I have seen a lot of questions about this topic, but a lot of them have contradictory information, and for some reason it didnt work for me.I have:a top level domain: i.e. lvh.me (development).each user has subdomains: i.e. userdomain.lvh.meThe login form is in the top level domain: lvh.me I want:If an user logs in, the session needs to be shared between all the subdomains. I mean, the session needs to be active in lvh.me:3000/something and userdomain.lvh.me:3000If an user logs out from lvh.me:3000/something it should work, and if the user logs out from userdomain.lvh.me:3000 it should work also.I triedSetting in an initializer the following:MyApplication::Application.config.session_store :cookie_store, :key => '_mykey', :domain => :allWhat happened?I can login in lvh.me:3000, I am correctly redirected to lvh.me:3000/internalpage and if I go to subdomain.lvh.me:3000 it works great. I can also logout from lvh.me:3000/internalpage BUT if I try to logout from subdomain.lvh.me:3000 it doesn't work. The destroy action in Devise SessionsController is executed and everything, but the session doesn't die.According to http://excid3.com/blog/sharing-a-devise-user-session-across-subdomains-with-rails-3/, The trick here is the :domain option. What this does is sets the level of the TLD (top level domain) and tells Rails how long the domain is. The part you want to watch out for here is that if you set :domain => :all like is recommend in some places, it simply wont work unless youre using localhost. :all defaults to a TLD length of 1, which means if youre testing with Pow (myapp.dev) it wont work either because that is a TLD of length 2.So, after reading that I also triedMyApplication::Application.config.session_store :cookie_store, :key => '_mykey', :domain => 'lvh.me'What happened?I can login in lvh.me:3000, I am correctly redirected to lvh.me:3000/internalpage and if I go to subdomain.lvh.me:3000 it doesn't work, i have no session there. If I go back to lvh.me:3000/internalpage my session has disappeared. What happened there?What else?Then, after reading rails 3.2 subdomains and devise I changed my initializer line to Note the ""."" before the domain name.According to the post in SO: This allows this cookie to be accessible across subdomains and the application should maintain it's session across subdomains. May not be 100% what you are looking for but it should get you going in the right direction.What happened?Nothing, it didn't work. Same behavior if compared with the last thing I tried.I finally tried What does Rails 3 session_store domain :all really do? , creating a custom class to handle the cookies. But I had no luck.Of course that I deleted all the cookies and temp files before each attempt. Also I changed the name of the cookie.Any help? Thanks! <code>  MyApplication::Application.config.session_store :cookie_store, :key => '_mykey', :domain => '.lvh.me'",Devise not working well with multiple subdomains on RoR3 application
Ruby 'map()' a single object," I am looking for a way to 'map' a single item in Ruby.I want to call this function and pass it a block, the object will be yielded to the block, and then the result of the block will be returned to the caller. Exactly what map does, but for a single element.The motivation is that sometimes you generate objects that are just used to construct something else. The original object is then no longer needed. It would be nice to just put the conversion into a block and eliminate the temporary.As a contrived example, let's assume that I want to create an integer that represents the month/year combination. For today's date, the code would look something like: I'd really like it if I could do something like: But I don't know what 'some_function' is (or if it even exists).If there is a more Ruby way of handling something like this, I'm all ears. I am aware of monkey patching classes, but I am looking to handle those cases that are a bit more transient. <code>  day = Date.todaymonth_number = day.year * 100 + day.month month_number = Date.today.some_function { |d| d.year * 100 + d.month }",Ruby map() for a single object
how rescue $! wroks in Ruby?," I know that the global variable $! holds the most recent exception object, but I am having confusion with the syntax below. Can anyone help me understand the following syntax? <code>  rescue $!",How does `rescue $!` work?
how `rescue $!` works in Ruby?," I know that the global variable $! holds the most recent exception object, but I am having confusion with the syntax below. Can anyone help me understand the following syntax? <code>  rescue $!",How does `rescue $!` work?
When 'send' is meant to be used?," as far as I understand 'send' method, this is same as this So what is the point using 'send' method? <code>  some_object.some_method(""im an argument"") some_object.send :some_method, ""im an argument""","What is the point of using ""send"" instead of a normal method call?"
Is it possible to sort a list of objects depending on if the individual object's response to a method?," I am wanting to display a gallery of products where I include products that are both for sale and not for sale. Only I want the products that are for sale to appear at the front of the list and the objects that are not for sale will appear at the end of the list.An easy way for me to accomplish this is to make two lists, then merge them (one list of on_sale? objects and one list of not on_sale? objects): . . . But do to the structure of my existing app, this would require an excessive amount of refactoring due to an oddity in my code (I lose my pagination, and I would rather not refactor). It would be easier if there were a way to sort the existing list of objects by my product model's method on_sale? which returns a boolean value.Is it possible to more elegantly iterate through an existing list and sort it by this true or false value in rails? I only ask because there is so much I'm not aware of hidden within this framework / language (ruby) and I'd like to know if they work has been done before me.  <code>  available_products = []sold_products = []@products.each do |product| if product.on_sale? available_products << product else sold_products << product endend",Is it possible to sort a list of objects depending on the individual object's response to a method?
Why doesn't sort or the flying saucer operator (<=>) work on booleans in Ruby?," In ""Is it possible to sort a list of objects depending on if the individual object's response to a method?"", I discovered that the flying saucer doesn't work on booleans. Consider:Ruby 1.8.7: Ruby 1.9.3: It may have something to do with true and false not having a canonical sort order, because which comes first? But, that sounds pretty weak to me. Is this a bug in sort? <code>  [true, false].sort # => undefined method `<=>' for true:TrueClass (NoMethodError)true <=> false # => undefined method `<=>' for true:TrueClass (NoMethodError) [true, false].sort # => comparison of TrueClass with false failed (ArgumentError)true <=> false # => niltrue <=> true # => 0false <=> true # => nil",Why doesn't sort or the spaceship (flying saucer) operator (<=>) work on booleans in Ruby?
Escape single quote in Xpath with Nokogiri," I have an XPath query that looks like this, with both single and double quotes. How do I escape the apostrophe properly so that the query works? I tried: but it doesn't seem to do it for me.Any ideas? <code>  ""//li[text()='Frank&apos;s car']"" ""//li[text()='Frank's car']""",Escape single quote in XPath with Nokogiri?
Escape single quote in XPath with Nokogiri," I have an XPath query that looks like this, with both single and double quotes. How do I escape the apostrophe properly so that the query works? I tried: but it doesn't seem to do it for me.Any ideas? <code>  ""//li[text()='Frank&apos;s car']"" ""//li[text()='Frank's car']""",Escape single quote in XPath with Nokogiri?
therubyracer nodejs execjs which should I use?," I am following the ruby on rails getting started guide on a new install of Ubuntu 12.10. I'm up to running rake db:create but I get the following error:rake aborted!Could not find a JavaScript runtime. See https://github.com/sstephenson/execjs for a list of available runtimes.I've searched around and the suggested solutions (see list below) are to install some either therubyracer or nodejs but they don't explain why.rake db:create - Could not find a JavaScript runtimeRails 3.1 error - Could not find a JavaScript runtime?http://datacodescotch.blogspot.com.au/2011/11/rails-31-spree-and-rake-aborted-could.htmlhttp://www.blog.railshouse.com/Before I go installing stuff I want to know what the differences are between these JavaScript runtimes and why I would choose one over the other?Update:I just read https://github.com/sstephenson/execjs (I know I should have read this first, sorry) and it seems to me that execjs is not a JavaScript runtime and I already have it... so it's down to therubyracer and nodejs ... please excuse my ignorance, I've amended my questionIn addition to Intrepidd's answer:The ruby on rails getting started guide supports Intrepidd's answer. See section 4.1 ""Starting up the Web Server"" where it says: Rails adds the therubyracer gem to Gemfile in a commented line for new apps and you can uncomment if you need it.For the rails noobs out there (like me) the GemFile is in the root folder of your rails application. After uncommenting that line in my GemFile I had to run bundle install to install therubyracer gem. <code> ","therubyracer or nodejs, which should I use?"
Accessing constat variables outside a class ruby," When I want to access the constant CONST in class Test in from outside of the class, I have to do this: Why do I get an error when I do this? If obj is an object of the Test class, why do I get an error if I try to access the constant through the object? <code>  class Test CONST = 7end puts Test::CONST puts obj::CONST",Accessing constants outside a class
What does to_proc method means to a rails starter?," I am learning rails and following this thread. I am stuck with the to_proc method. I consider symbols only as alternatives to strings (they are like strings but cheaper in terms of memory). If there is anything else I am missing for symbols, then please tell me. Please explain in simple way what to_proc means and what it is used for. <code> ",What does to_proc method mean?
"Ruby: Why the inline string block in Ruby is named ""eos""?"," Why is the inline string block in Ruby named ""eos""?UpdateThank you for denoting the right way. I always thought that ""eos"" was a reserved word, but it seems that any word may be used: I also discovered that this construction is named HeredocThis showed me that even the silliest questions can be a learning opportunity. <code>  a = <<MYSTRINGline 1line 2mystring #the thing is case sensitiveline3MYSTRING#The actual end of the string","Why is the inline string block in Ruby named ""eos""?"
"Why the inline string block in Ruby is named ""eos""?"," Why is the inline string block in Ruby named ""eos""?UpdateThank you for denoting the right way. I always thought that ""eos"" was a reserved word, but it seems that any word may be used: I also discovered that this construction is named HeredocThis showed me that even the silliest questions can be a learning opportunity. <code>  a = <<MYSTRINGline 1line 2mystring #the thing is case sensitiveline3MYSTRING#The actual end of the string","Why is the inline string block in Ruby named ""eos""?"
"Why is the inline string block in Ruby is named ""eos""?"," Why is the inline string block in Ruby named ""eos""?UpdateThank you for denoting the right way. I always thought that ""eos"" was a reserved word, but it seems that any word may be used: I also discovered that this construction is named HeredocThis showed me that even the silliest questions can be a learning opportunity. <code>  a = <<MYSTRINGline 1line 2mystring #the thing is case sensitiveline3MYSTRING#The actual end of the string","Why is the inline string block in Ruby named ""eos""?"
Ruby data time in string convert to date time with millisecons," This is a Ruby question (1.9.1)I have the following date and time in a string: I first want to convert it from string to date and time and thenadd 10 seconds to it and convert it back to the same string format asabove.I wrote this code: Which outputs: I did not see ""195"". I tried format = ""%d %b %Y %H:%M:%S.%3N"" and this gives: <code>  29 Sep 2013 12:25:00.367 format = ""%d %b %Y %H:%M:%S""date_time = ""29 Sep 2013 22:11:30.195""parsed_time = DateTime.strptime(date_time, format)puts "" new date time is #{parsed_time}"" new date time is 2013-09-29T22:11:30+00:00 fileOpTest:34:in `strptime': invalid date (ArgumentError) from fileOpTest:34:in `<main>'",Ruby date time in string conversion to date time with milliseconds
Ruby date time in string convert to date time with millisecons," This is a Ruby question (1.9.1)I have the following date and time in a string: I first want to convert it from string to date and time and thenadd 10 seconds to it and convert it back to the same string format asabove.I wrote this code: Which outputs: I did not see ""195"". I tried format = ""%d %b %Y %H:%M:%S.%3N"" and this gives: <code>  29 Sep 2013 12:25:00.367 format = ""%d %b %Y %H:%M:%S""date_time = ""29 Sep 2013 22:11:30.195""parsed_time = DateTime.strptime(date_time, format)puts "" new date time is #{parsed_time}"" new date time is 2013-09-29T22:11:30+00:00 fileOpTest:34:in `strptime': invalid date (ArgumentError) from fileOpTest:34:in `<main>'",Ruby date time in string conversion to date time with milliseconds
How to creating one log every day using Ruby standard Logger ?," I'm using ruby standard logger, I want rotational daily one, so in my code I have : It is working perfectly, but it created two files errors.log.20130217 and errors.log.20130217.1. How can I force it to create just one file a day ?  <code>  Logger.new(""#{$ROOT_PATH}/log/errors.log"", 'daily') ",Creating only one log every day using Ruby standard Logger
"How can I capture STDOUT of a code , in code itself?"," I want to store the STDOUT of the code so far (in this case hi \nbye into a variable say 'result' and print it ) The reason I am doing this is I have integrate an R code into my Ruby code, output of which is given to the STDOUT as the R code runs , but the ouput cannot be accessed inside the code to do some evaluations. Sorry if this is confusing. So the ""puts result"" line should give me hi and bye. <code>  puts ""hi""puts ""bye"" puts result",How can I capture STDOUT to a string?
how to pass a lambda to Hash.each," How can I pass a lambda to hash.each, so I can re-use some code? <code>  > h = { a: 'b' }> h.each do |key, value| end => {:a=>""b""}> test = lambda do |key, value| puts ""#{key} = #{value}"" end > test.call('a','b')a = b> h.each &testArgumentError: wrong number of arguments (1 for 2) from (irb):1:in `block in irb_binding' from (irb):5:in `each' from (irb):5 from /Users/jstillwell/.rvm/rubies/ruby-1.9.3-p362/bin/irb:16:in `<main>'> h.each testArgumentError: wrong number of arguments(1 for 0) from (irb):8:in `each' from (irb):8 from /Users/jstillwell/.rvm/rubies/ruby-1.9.3-p362/bin/irb:16:in `<main>'",How do I pass a lambda to Hash.each?
RBENV_VERSION being auto set," tmux is auto setting RBENV_VERSION when I start tmux...Anyone know how to stop it?Because it auto sets it, I need to do $ export RBENV_VERSIONto unset it and make .ruby-version work. Thx. <code> ",How to stop making tmux auto setting RBENV_VERSION
Ruby - Capybara reading drop down into an array," I'd like to put a dropdown list's options into an array generically in capybara. After the process I'm expecting to have an arrray of strings, containing all dropdown options. I've tried the code below but the length of my array stays 1 regardless of what the option count is. <code>  periods = Array.new()periods = all('#MainContent_dd')print periods.length",Capybara writing drop down's options texts into an array
Why do C-based lanuages distinguish between string and char?," I've noticed that languages like Java have a char primitive and a string class. Other languages like Python and Ruby just have a string class. Those languages instead use a string of length 1 to represent a character.I was wondering whether that distinction was because of historical reasons. I understand the language that directly influenced Java has a char type, but no strings. Strings are instead formed using char* or char[].But I wasn't sure if there was an actual purpose for doing it that way. I'm also curious if one way has an advantage over another in certain situations.Why do languages like Java distinguish between the char primitive and the string class, while languages like Ruby and Python do not?Surely there must be some sort of design concern about it, be it convention, efficiency, clarity, ease of implementation, etc. Did the language designer really just pick a character representation out of a hat, so to speak? <code> ",Why do languages like Java distinguish between string and char while others do not?
Why do lanuages like Java distinguish between string and char while others do not?," I've noticed that languages like Java have a char primitive and a string class. Other languages like Python and Ruby just have a string class. Those languages instead use a string of length 1 to represent a character.I was wondering whether that distinction was because of historical reasons. I understand the language that directly influenced Java has a char type, but no strings. Strings are instead formed using char* or char[].But I wasn't sure if there was an actual purpose for doing it that way. I'm also curious if one way has an advantage over another in certain situations.Why do languages like Java distinguish between the char primitive and the string class, while languages like Ruby and Python do not?Surely there must be some sort of design concern about it, be it convention, efficiency, clarity, ease of implementation, etc. Did the language designer really just pick a character representation out of a hat, so to speak? <code> ",Why do languages like Java distinguish between string and char while others do not?
implemet a rails before filter in ruby without rails," I am using g a logger in all of my classes. I want each msg to begin with class name and method name like so: this is what i'm doing now : i want to use a before_filter like in rails to prevent duplicity, I am using sinatra but the classes are plain old ruby 1.9.3 classesideas?? <code>  Class_name::Method_name class FOO def initialize end def bar msg_prefix = ""#{self.class}::#{__method__}"" ... some code ... @logeer = ""#{msg_prefix} msg ..."" end def bar2 msg_prefix = ""#{self.class}::#{__method__}"" ... some code 2 ... @logeer = ""#{msg_prefix} msg2 ..."" endend",implement a rails before_filter in ruby without rails
Ways to scrape web pages with Ruby," I'm trying to scrape web pages in a Ruby script that I'm working on. The purpose of the project is to show which ETFs and stock mutual funds are most compatible with the value investing philosophy.Some examples of pages I'd like to scrape are: What web scraping tools do you recommend for Ruby, and why? Keep in mind that there are thousands of stock funds out there, so any tool I use has to be reasonably quick.I am new to Ruby, but I have experience using lxml to scrape web pages in Python (https://github.com/jhsu802701/dopplervalueinvesting/blob/master/screen.py). Once the pages on 5000+ stocks are downloaded, lxml can scrape them all in just a few minutes. (I remember trying BeautifulSoup but rejecting it because it was too slow.) <code>  http://finance.yahoo.com/q/pr?s=SPY+Profilehttp://finance.yahoo.com/q/hl?s=SPY+Holdingshttp://www.marketwatch.com/tools/mutual-fund/list/V",Web page scraping gems/tools available in Ruby
How to add usr/local/bin to path environment variable on ubuntu 12.0.4," I have just installed ruby.1.8.6 on Ubuntu 12.0.4.I am learning ruby out of a book and after the installation process it says ""Once it's completed, you should add /usr/local/bin to your PATH environment variable. I'll assume that, being a Linux user""And I'm stuck as the guy has a wrong assumption.How do I add usr/local/bin to the path environment variable? <code> ",How to add usr/local/bin to path environment variable on ubuntu 12.0.4?
Paperclip & seeds," Let's says I have the following entry in my seeds.rb file : If I seed it, it tries to process the image specified, I get this error : My images are backed up, so I don't really need to create them; but I need the record though. I can't comment the paperclip directive in my model; then it works; but I guess there might be another solution.Is there another pattern to follow in order to accomplish it ? Or a turnaround to tell paperclip not to process the image ? <code>  Image.create(:id => 52, :asset_file_name => ""somefile.jpg"", :asset_file_size => 101668, :asset_content_type => ""image/jpeg"", :product_id => 52) No such file or directory - {file path} etc...",Using Paperclip within seeds.rb
How to get the hidden element values in capybara?," I need to get the value of a hidden element. I tried the following code: it returns nil. <code>  page.find(:xpath, ""//span[@id='sample']"").text",How to get the hidden element value in capybara?
How create rails_admin navigation labels without create empty models?," In rails admin, you can define a navigation label to a model and its children like so: Is there a way to add labels to the navigation menu without creating models (i.e. just for grouping)? <code>  # in rails_admin.rbconfig.model Order do navigation_label 'Orders related'endconfig.model OrderProducts do parent Orderend",How to create rails_admin navigation labels without creating empty models?
"ruby module, require and include"," I'm trying to use Ruby modules (mixins).I have test.rb: and lib/mymodule.rb: Quite simple setup. But it does not work :( : Where is my error? <code>  #!/usr/bin/env rubyrequire_relative 'lib/mymodule'class MyApp include MyModule self.halloend module MyModule def hallo puts ""hallo"" endend ruby test.rbtest.rb:8:in `<class:MyApp>': undefined method `hallo' for MyApp:Class (NoMethodError) from test.rb:6:in `<main>'","Ruby: module, require and include"
net ftp ruby can't connet to server," I am trying to create a script to list and download data from a FTP server with Ruby. I am new to Ruby so I looked for documentation how to use Net::FTP. I have trouble understanding why this doesn't work: That doesn't work, returning this error: Can anyone explain what's wrong with my script? <code>  require 'net/ftp'server = ""ftp.server.com""user = ""myuser""password = ""mypassword""Net::FTP.open(server, user, password) do |ftp| files = ftp.chdir('mydirectory/') files = ftp.list puts ""list out of directory:"" puts filesend /home/adhown/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/net/ftp.rb:298:in `getresp': 425 >Failed to establish connection. (Net::FTPTempError) from /home/adhown/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/net/ftp.rb:325:in `block in sendcmd' from /home/adhown/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/monitor.rb:211:in `mon_synchronize' from /home/adhown/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/net/ftp.rb:323:in `sendcmd' from /home/adhown/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/net/ftp.rb:402:in `transfercmd' from /home/adhown/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/net/ftp.rb:478:in `block (2 levels) in retrlines' from /home/adhown/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/net/ftp.rb:178:in `with_binary' from /home/adhown/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/net/ftp.rb:477:in `block in retrlines' from /home/adhown/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/monitor.rb:211:in `mon_synchronize' from /home/adhown/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/net/ftp.rb:476:in `retrlines' from /home/adhown/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/net/ftp.rb:722:in `list' from test_ftp.rb:10:in `block in ' from /home/adhown/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/net/ftp.rb:116:in `open' from test_ftp.rb:8:in `'",Why can't Net::FTP connect to server?
Ruby is there simpler (one-line) syntax to alias one class method," I know I can do the following, and it's just 3 lines: But out of curiosity, is there a simpler way (without semicolons) like: <code>  class << self alias :generate :newend class_alias :generate, :new",Is there simpler (one-line) syntax to alias one class method?
Ruby How get an hash value by numeric index," Have a hash: I can refer to the hash value: but I would like to refer by numeric index: Is it possible?  <code>  h = {:a => ""val1"", :b => ""val2"", :c => ""val3""} h[:a], h[:c] h[0] => val1h[2] => val3",How to get a hash value by numeric index
Rspec test custom validator," I have the following validator in my model: How can I test it using Rspec?Here is what I have tried so far: (thanks to zetetic) But I get the following errors: What am I doing wrong? And how can I achieve my goal?Any help or suggestion would be appreciated.Thanks. <code>  class ContinuumValidator < ActiveModel::Validator def validate(record) if !record.end_time.nil? and record.end_time < record.start_time record.errors[:base] << ""An event can not be finished if it did not start yet..."" end endendclass Hrm::TimeEvent < ActiveRecord::Base validates_with ContinuumValidatorend describe ""validation error"" do before do @time_event = Hrm::TimeEvent.new(start_time: ""2012-10-05 10:00:00"", end_time: ""2012-10-05 09:00:00"", event_type: 2) end it ""should not be valid if end time is lower than start time"" do @time_event.should_not be_valid end it ""raises an error if end time is lower than start time"" do @time_event.errors.should include(""An event can not be finished if it did not start yet..."") endend 1) Hrm::TimeEvent validation error raises an error if end time is lower than start time Failure/Error: @time_event.errors.should include(""An event can not be finished if it did not start yet..."") expected #<ActiveModel::Errors:0x007fd1d8e02c50 @base=#<Hrm::TimeEvent id: nil, start_time: ""2012-10-05 08:00:00"", end_time: ""2012-10-05 07:00:00"", event_type: 2, employee_id: nil, created_at: nil, updated_at: nil, not_punched: false, validated: false, replace_id: nil>, @messages={}> to include ""An event can not be finished if it did not start yet..."" Diff: @@ -1,2 +1,5 @@ -[""An event can not be finished if it did not start yet...""] +#<ActiveModel::Errors:0x007fd1d8e02c50 + @base= + #<Hrm::TimeEvent id: nil, start_time: ""2012-10-05 08:00:00"", end_time: ""2012-10-05 07:00:00"", event_type: 2, employee_id: nil, created_at: nil, updated_at: nil, not_punched: false, validated: false, replace_id: nil>, + @messages={}>",RSpec test custom validator
ruby hash to csv line," I'd like to map a hash to a CSV line.I have a couple of objects in a hash: I want to transform this into a CSV file with the keys as columns and the values for each row.I can easily create the headers by creating a CSV::Row like this: I cannot rely on the order and more important, not all values are filled all the time.But when I now try to add rows to the table via << and array, the mapping of the headers is ignored. It has to be in the right order.To demonstrate this, I wrote this little script: I would expect this output: Instead the values in the order as they appear. So the output is this: The strangest part is, when I do a lookup via ['key'] I get the correct values: So is there any way to write to a CSV file as I expect? <code>  person1 = {'first_name' => 'John', 'second_name' => 'Doe', 'favorite_color' => 'blue', 'favorite_band' => 'Backstreet Boys'}person2 = {'first_name' => 'Susan', 'favorite_color' => 'green', 'second_name' => 'Smith'} h = CSV::Row.new(all_keys_as_array,[],true) require 'csv'person1 = {'first_name' => 'John', 'second_name' => 'Doe', 'favorite_color' => 'blue', 'favorite_band' => 'Backstreet Boys'}person2 = {'first_name' => 'Susan', 'favorite_color' => 'green', 'second_name' => 'Smith'}persons = [person1, person2]all_keys_as_array = %w{first_name second_name favorite_color favorite_band}h = CSV::Row.new(all_keys_as_array,[],true)t = CSV::Table.new([h])persons.each do |p| r = CSV::Row.new([],[],false) p.each do |k, v| r << {k => v} end t << rendputs t.to_csv first_name,last_name,favorite_color,favorite_bandJohn,Doe,blue,Backstreet BoysSusan,Smith,green, first_name,second_name,favorite_color,favorite_bandJohn,Doe,blue,Backstreet BoysSusan,green,Smith puts ""favorite_bands: #{t['favorite_band']}""> favorite_bands: [nil, ""Backstreet Boys"", nil]",How to output a hash to a CSV line
Greater time period between implicit and explicit wait gets considered," My two scenarios - 1) First Which gives the driver 45 seconds to search for the text(which is expected)2) Second This now gives the driver 30 seconds to search for the text(not expected)Is there a way to make selenium wait only for the explicit wait time and not for the greater of the two?Note - Not declaring the implicit wait time is not an option, cause I cannot afford to let selenium hang each time the driver is unable to find something. Using Selenium version 30, windows, ff <code>  @driver.manage.timeouts.implicit_wait = 30@wait = Selenium::WebDriver::Wait.new(:timeout => 45) # Time greater than implicit@wait.until {@driver.find_element(:tag_name => ""body"").text.include?(""hey"")} @driver.manage.timeouts.implicit_wait = 30@wait = Selenium::WebDriver::Wait.new(:timeout => 5) # Time less than implicit@wait.until {@driver.find_element(:tag_name => ""body"").text.include?(""hey"")}",Combining implicit wait and explicit wait together results in unexpected wait times
complex case statement in ruby sequel," I have a fairly complex case statement that works in MySQL: However, all attempts to write this in Sequel have failed. I am using this as a template: (from Jeremy Evans' Github)My best guess would be: Any ideas? <code>  SELECT # rest of code omittedCASE WHEN code = 'a' THEN 'x' WHEN code IN ('m', 'n') THEN 'y' WHEN class IN ('p', 'q') AND amount < 0 THEN 'z' ELSE NULL END AS statusFROM # rest of code omitted Sequel.case([[:c, 1], [:d, 2]], 0) # (CASE WHEN ""c"" THEN 1 WHEN ""d"" THEN 2 ELSE 0 END) dataset.select( # rest of code omitted...[[(:code => 'a'), 'x'],[(:code => 'b'), 'y'],[(:class => ['p', 'q'], :amount < 0), 'z']].case(nil).as(:status))",Writing a complex case statement in Sequel?
ruby gem install rails <version> multiple times overriding existing files?," What would happen if I keep typing in gem install rails using different versions of Rails? For instance, I can type in: or which gives me version 3.2.12. QuestionsWill each installation overwrite the previous one?Will it remove all the old files and add the new version that I'm installing?Or if I run it twice, it will keep some files?I'm using Ubuntu. <code>  gem install rails --verson 3.2.10 gem install rails",Will installing multiple versions of Rails overwrite previous installations?
How to use the debugger with ruby 2.0?," I know the debugger gem is not and never will be compatible with ruby 2.0 per ""officially support ruby 2.X"".In the changelog of Ruby 2.0 is:Debug supportDTrace support, which enables run-time diagnosis inproduction TracePoint, which is an improved tracing APIIs there something out of the box for debugging with Ruby 2.0? Can somebody explain this to me? <code> ",How to use the debugger with Ruby 2.0?
Troubles with ruby-2.0.0-p0 installation using RVM," I recently came across of the ruby-2.0.0-p0 installation. After the successfully installation of the rvm i type the following command at the bash. This this the result log. Note that the process goes without troubles until the installation of ruby gems.What's going on here ??Any help appreciated.First comment output Second comment output And the other command  <code>  rvm install ruby-2.0.0-p0 Searching for binary rubies, this might take some time.No binary rubies available for: debian/wheezy_sid/i386/ruby-2.0.0-p0.Continuing with compilation. Please read 'rvm mount' to get more information on binary rubies.Installing Ruby from source to: /home/javier/.rvm/rubies/ruby-2.0.0-p0, this may take a while depending on your cpu(s)...ruby-2.0.0-p0 - #downloading ruby-2.0.0-p0, this may take a while depending on your connection...ruby-2.0.0-p0 - #extracting ruby-2.0.0-p0 to /home/javier/.rvm/src/ruby-2.0.0-p0ruby-2.0.0-p0 - #extracted to /home/javier/.rvm/src/ruby-2.0.0-p0ruby-2.0.0-p0 - #configuringruby-2.0.0-p0 - #compilingruby-2.0.0-p0 - #installingRemoving old Rubygems files...Installing rubygems-2.0.0 for ruby-2.0.0-p0 ...Error running 'env GEM_PATH=/home/javier/.rvm/gems/ruby-2.0.0-p0:/home/javier/.rvm/gems/ruby-2.0.0-p0@global:/home/javier/.rvm/gems/ruby-2.0.0-p0:/home/javier/.rvm/gems/ruby-2.0.0-p0@global GEM_HOME=/home/javier/.rvm/gems/ruby-2.0.0-p0 /home/javier/.rvm/rubies/ruby-2.0.0-p0/bin/ruby /home/javier/.rvm/src/rubygems-2.0.0/setup.rb', please read /home/javier/.rvm/log/ruby-2.0.0-p0/rubygems.install.logInstallation of rubygems did not complete successfully.Saving wrappers to '/home/javier/.rvm/bin'.ruby-2.0.0-p0 - #adjusting #shebangs for (gem irb erb ri rdoc testrb rake).ruby-2.0.0-p0 - #importing default gemsets, this may take time ...Install of ruby-2.0.0-p0 - #completeMaking gemset ruby-2.0.0-p0 pristine.Error running '' under ,please read /home/javier/.rvm/log/ruby-2.0.0-p0/gemset.pristine.logMaking gemset ruby-2.0.0-p0@global pristine.Error running '' under ,please read /home/javier/.rvm/log/ruby-2.0.0-p0/gemset.pristine.log cat /home/javier/.rvm/log/ruby-2.0.0-p0/rubygems.install.log /home/javier/.rvm/src/rubygems-2.0.0/lib/rubygems/core_ext/kernel_require.rb:45:in `require': cannot load such file -- openssl (LoadError)from /home/javier/.rvm/src/rubygems-2.0.0/lib/rubygems/core_ext/kernel_require.rb:45:in `require'from /home/javier/.rvm/src/rubygems-2.0.0/lib/rubygems/security.rb:8:in `<top (required)>'from /home/javier/.rvm/src/rubygems-2.0.0/lib/rubygems/core_ext/kernel_require.rb:45:in `require'from /home/javier/.rvm/src/rubygems-2.0.0/lib/rubygems/core_ext/kernel_require.rb:45:in `require'from /home/javier/.rvm/src/rubygems-2.0.0/lib/rubygems/package.rb:43:in `<top (required)>'from /home/javier/.rvm/src/rubygems-2.0.0/lib/rubygems/core_ext/kernel_require.rb:45:in `require'from /home/javier/.rvm/src/rubygems-2.0.0/lib/rubygems/core_ext/kernel_require.rb:45:in `require'from /home/javier/.rvm/src/rubygems-2.0.0/lib/rubygems/installer.rb:8:in `<top (required)>'from /home/javier/.rvm/src/rubygems-2.0.0/lib/rubygems/core_ext/kernel_require.rb:45:in `require'from /home/javier/.rvm/src/rubygems-2.0.0/lib/rubygems/core_ext/kernel_require.rb:45:in `require'from /home/javier/.rvm/src/rubygems-2.0.0/lib/rubygems/request_set.rb:5:in `<top (required)>'from /home/javier/.rvm/src/rubygems-2.0.0/lib/rubygems.rb:195:in `finish_resolve'from /home/javier/.rvm/src/rubygems-2.0.0/lib/rubygems/rdoc.rb:14:in `<top (required)>'from /home/javier/.rvm/src/rubygems-2.0.0/lib/rubygems/core_ext/kernel_require.rb:45:in `require'from /home/javier/.rvm/src/rubygems-2.0.0/lib/rubygems/core_ext/kernel_require.rb:45:in `require'from /home/javier/.rvm/src/rubygems-2.0.0/lib/rubygems/uninstaller.rb:10:in `<top (required)>'from /home/javier/.rvm/src/rubygems-2.0.0/lib/rubygems/core_ext/kernel_require.rb:45:in `require'from /home/javier/.rvm/src/rubygems-2.0.0/lib/rubygems/core_ext/kernel_require.rb:45:in `require'from /home/javier/.rvm/src/rubygems-2.0.0/lib/rubygems/commands/setup_command.rb:440:in `uninstall_old_gemcutter'from /home/javier/.rvm/src/rubygems-2.0.0/lib/rubygems/commands/setup_command.rb:144:in `execute'from /home/javier/.rvm/src/rubygems-2.0.0/lib/rubygems/command.rb:305:in `invoke_with_build_args'from /home/javier/.rvm/src/rubygems-2.0.0/lib/rubygems/command_manager.rb:170:in `process_args'from /home/javier/.rvm/src/rubygems-2.0.0/lib/rubygems/command_manager.rb:130:in `run'from /home/javier/.rvm/src/rubygems-2.0.0/lib/rubygems/gem_runner.rb:60:in `run'from setup.rb:45:in `<main>'RubyGems 2.0.0 installed rvm use --default 2.0.0 RVM is not a function, selecting rubies with 'rvm use ...' will not work.You need to change your terminal emulator preferences to allow login shell.Sometimes it is required to use `/bin/bash --login` as the command.Please visit https://rvm.io/integration/gnome-terminal/ for a example.",Troubles with ruby-2.X installation using RVM
Why do brackets affect hashes?," When I used respond_with and passed a literal hash, it gave me the error: However, when I enclosed the literal hash in parentheses like so: the function runs without a hitch. Why do the parentheses make a difference? Isn't a hash an enclosed call? <code>  syntax error, unexpected tASSOC, expecting '}'`respond_with {:status => ""Not found""}` respond_with({:status => ""Not found""})",Why do parentheses affect hashes?
Why do brackets affect hashes / associative lists?," When I used respond_with and passed a literal hash, it gave me the error: However, when I enclosed the literal hash in parentheses like so: the function runs without a hitch. Why do the parentheses make a difference? Isn't a hash an enclosed call? <code>  syntax error, unexpected tASSOC, expecting '}'`respond_with {:status => ""Not found""}` respond_with({:status => ""Not found""})",Why do parentheses affect hashes?
How to test sorted hashes for equality in Ruby ( 1.9.2)?," Ruby 1.9.2 introduced order into hashes. How can I test two hashes for equality considering the order?Given: I want a comparison operator that returns false for h1 and h2. Neither of the followings work: <code>  h1 = {""a""=>1, ""b""=>2, ""c""=>3}h2 = {""a""=>1, ""c""=>3, ""b""=>2} h1 == h2 # => trueh1.eql? h2 # => true",How to test order-conscious equality of hashes
How to test order-conscious hashes for equality in Ruby ( 1.9.2)?," Ruby 1.9.2 introduced order into hashes. How can I test two hashes for equality considering the order?Given: I want a comparison operator that returns false for h1 and h2. Neither of the followings work: <code>  h1 = {""a""=>1, ""b""=>2, ""c""=>3}h2 = {""a""=>1, ""c""=>3, ""b""=>2} h1 == h2 # => trueh1.eql? h2 # => true",How to test order-conscious equality of hashes
ruby: how to find non-unique elements in array and print each with number of occurrances?," I have and need to print something like (sorted descending by number of occurrences): I understand first part (finding NON-unique) is: or How to output each non-unique with number of occurrences sorted backwards? <code>  a = [""a"", ""d"", ""c"", ""b"", ""b"", ""c"", ""c""] c:3b:2 b = a.select{ |e| a.count(e) > 1 }=> [""c"", ""b"", ""b"", ""c"", ""c""] puts b.select{|e, c| [e, a.count(e)] }.uniqcb",ruby: how to find non-unique elements in array and print each with number of occurrences?
Rails: how to redirect_to json path," How I can redirect not to html format but to json?I want smthing like this: But this doesn't work, I still redirected to html path. <code>  redirect_to user_path(@user), format: :json",Rails: how to set json format for redirect_to
Whey instance_eval does not like lambda, I have the following class: Why does the secondinstance_eval fail with a wrong number of arguments (1 for 0) error? <code>  class User code1 = Proc.new { } code2 = lambda { } define_method :test do self.class.instance_eval &code1 self.class.instance_eval &code2 endendUser.new.test,Why does instance_eval succeed with a Proc but not with a Lambda?
What does a .gem file contains ? how it is being used by the rails framework ?, I just created a test gem using bundle and it created a .gem file with unreadable content so I was wondering what does that .gem file contains ? is this binary data ? as I used to think that .gem files contains packaged ruby functionshow is this .gem file being used by rails framework ? since it doesn't look like a module Thanks <code> ,What does a .gem file contain? How it is being used by Rails framework?
Why do we can't override `||` and `&&` in Ruby?," David A. Black stated in his book: [T]he conditional assignment operator ||=, as well as its rarely spotted cousin &&=, both of which provide the same kind of shortcut as the pseudooperator methods but are based on operators, namely || and &&, which you cant override.Why did he specifically mention that we can't override || and &&? <code> ",Why can't we override `||` and `&&`?
Rails asset pipeline not including required files in application.js manefest," The rails asset pipeline isn't including files required in application.js.The only javascript file rendered to the browser is application.js, and the require lines are not compiled to include tags as they should be: in config/application.rb I have config.assets.enable = trueI'm using rails 3.2.8, and I've tried ruby 1.9.3-p398 and 2.0.0-p0 installed using rvm.How do I get application.js to include the files required?EDIT: It looks like the lock on this question was recently unlocked, and activity has increased. It has been a while since I worked on this, and the code doesn't exist anymore. If I am remembering correctly I reinstalled ruby and rails and that fixed the problem. Should I close this question? What is the proper procedure in this situation?  <code>  // This is a manifest file that'll be compiled into application.js, which will include all the files// listed below.//// Any JavaScript/Coffee file within this directory, lib/assets/javascripts, vendor/assets/javascripts,// or vendor/assets/javascripts of plugins, if any, can be referenced here using a relative path.//// It's not advisable to add code directly here, but if you do, it'll appear at the bottom of the// the compiled file.//// WARNING: THE FIRST BLANK LINE MARKS THE END OF WHAT'S TO BE PROCESSED, ANY BLANK LINE SHOULD// GO AFTER THE REQUIRES BELOW.////= require jquery//= require jquery_ujs//= require twitter/bootstrap//= require bootstrap//= require_tree .;",Rails asset pipeline not including required files in application.js manifest
Creating a nested hash from a sorted array in Ruby," I have an array of objects that has been sorted according to several properties of these objects. In order of priority, these properties are foo, bar and baz. This means that the objects are first sorted by foo; then subsequences having the same foo value are sorted by bar; and then those with the same foo and bar values are sorted by baz. I would like to turn this into a nested hash that reflects this grouping. Basically I'm looking for a recursive Enumerable#group_by. The keys would be values of foo, bar, and baz; the values would be either sub-hashes or arrays of the objects. Here is an example: <code>  [obj1, obj2, ... objn].group_by_recursive(:foo, :bar, :baz)#=> { foo_val_1 => { bar_val_1 => { baz_val_1 => [ obj1, obj2, obj3 ], baz_val_2 => [ obj4, obj5 ] }, bar_val_2 => { baz_val_1 => [ obj6, obj7 ], baz_val_2 => [ obj8 ] }, }, foo_val_2 => { ... }, ... }",Creating a nested hash from a sorted array in Ruby-- recursive group_by
How to create a space contained Ruby symbol," I am creating a Ruby hash for movie names storage.When the hash's keys are strings that contains whitespaces, it works just fine.As in:movies = {""Avatar"" => 5, ""Lord of the rings"" => 4, ""Godfather"" => 4}Now I am trying to replace the use of strings with symbols:movies = {Avatar: 5, Lord of the rings: 4, Godfather: 4}Obviously that doesn't work.How does Ruby handle whitespaces in symbol naming? <code> ",How to create a symbol from a string that has whitespaces?
find_or_initialize_by in ruby doesnt work with 2 columns?," I am trying to insert data in my database using ActiveRecord.When I use pdays = MyModel.new for initialization rather then the below find_or_initialize_by, the script runs fine. But it ONLY runs once. I need this to run daily to perform updates. When I try running the script the second time with pdays = MyModel.new, then no duplicate key constraint is raised.Hence I am trying the below find_or_initialize_by with 2 arguments, but that gives an error: undefined method `find_or_initialize_by'2 columns together make the unique record: <code>  vertica_traffic.each do |vdays| pdays = MyModel.find_or_initialize_by([:local_dt], vdays[:community_id]) pdays[:local_date] = vdays_traffic[:local_d] pdays[:community_id] = vdays_traffic[:community_id] pdays[:uniquesters] = vdays_traffic[:uniques] pdays.saveend",find_or_initialize_by doesn't work with 2 columns
Ruby: Fast anagram solving," Given two strings, I would like to determine whether or not they are anagrams of one another. Here is the solution that I came up with: But I am thinking that there is probably a better one. I analyzed the efficiency of this solution, and came up with: chars: splits a string into an array of characters O(n)sort: sorts a string alphabetically, I don't know how sort is implemented in Ruby but I assumed O(n log n) since that is the generally best known sorting efficiencyjoin: builds a string from an array of characters O(n)==: The string comparison itself will have to examine every character of the strings 2*O(n)Given the above, I categorized the efficiency of the entire solution as O(n log n) since sorting had the highest efficiency. Is there a better way to do this that is more efficient than O(n log n)? <code>  # output messagesdef anagram puts ""Anagram!"" exit enddef not_anagram puts ""Not an anagram!"" exitend# main methodif __FILE__ == $0 # read two strings from the command line first, second = gets.chomp, gets.chomp # special case 1 not_anagram if first.length != second.length # special case 2 anagram if first == second # general case # Two strings must have the exact same number of characters in the # correct case to be anagrams. # We can sort both strings and compare the results if first.chars.sort.join == second.chars.sort.join anagram else not_anagram endend",Fast anagram solving
custom sort method in ruby," I want to specify a custom block method to sort an object array by evaluating two properties. However, after many searches, I didn't find to any example without the <=> operator.I want to compare a to b: This is my code and it doesn't work: This block is within a function return is exiting the function and returning -1. <code>  if a.x less than b.x return -1if a.x greater than b.x return 1if a.x equals b.x, then compare by another property , like a.y vs b.y ar.sort! do |a,b| if a.x < b.y return -1 elseif a.x > b.x return 1 else return a.y <=> b.yend",How to create a custom sort method in Ruby
Ruby: split a string into chunks of specified size without breaking words," I need to split a string into chunks according to a specific size. I cannot break words between chunks, so I need to catch when adding the next word will go over chunk size and start the next one (it's ok if a chunk is less than specified size).Here is my working code, but I would like to find a more elegant way to do this. <code>  def split_into_chunks_by_size(chunk_size, string) string_split_into_chunks = [""""] string.split("" "").each do |word| if (string_split_into_chunks[-1].length + 1 + word.length > chunk_size) string_split_into_chunks << word else string_split_into_chunks[-1] << "" "" + word end end return string_split_into_chunksend",Split a string into chunks of specified size without breaking words
Order of items that are in a tie in sort," Is sort in Ruby stable? That is, for elements that are in a tie for sort, is the relative order among them preserved from the original order? For example, given: is it guaranteed that we always get for the following without any variation for the relative order among the elements with the :id value :d, :f, and among :b, :e, :g, and among :c, :h? If that is the case, where in the documentation is it described?This question may or may not have connection with this question. <code>  a = [ {id: :a, int: 3}, {id: :b, int: 1}, {id: :c, int: 2}, {id: :d, int: 0}, {id: :e, int: 1}, {id: :f, int: 0}, {id: :g, int: 1}, {id: :h, int: 2},] a.sort_by{|h| h[:int]} [ {id: :d, int: 0}, {id: :f, int: 0}, {id: :b, int: 1}, {id: :e, int: 1}, {id: :g, int: 1}, {id: :c, int: 2}, {id: :h, int: 2}, {id: :a, int: 3},]",Is sort in Ruby stable?
Ruby .map based on condition," I have a struct like this: If I want to get the IP address of all devices, I can use test_clients.map(&:ip). How do I select the IP addresses of specific devices, say all device types called ""tablet""? How can I do that with map? <code>  Struct.new(""Test"", :loc, :type, :hostname, :ip)clients = [Struct::TestClient.new(1, :pc, ""pc1"", ""192.168.0.1"")Struct::TestClient.new(1, :pc, ""pc2"", ""192.168.0.2"")Struct::TestClient.new(1, :tablet, ""tablet1"", ""192.168.0.3"")Struct::TestClient.new(1, :tablet, ""tablet2"", ""192.168.0.3"")and etc...]",`map` based on condition
Setting a ruby variable," Maybe I've just been staring at my screen too long today, but something I think should be very basic is stumping me.I'm trying to make a 'copy' of a variable so I can manipulate it without modifying the original. I want foo not to be changed.  <code>  # original var is setfoo = [""a"",""b"",""c""]# i want a copy of the original var so i dont modify the originalbar = foo# modify the copied varbar.delete(""b"")# output the valuesputs bar # outputs: [""a"",""c""] - this is rightputs foo # outputs: [""a"",""c""] - why is this also getting modified?",How to copy a ruby variable?
Disallow attr_accessor to set nil, I have a data object that contains dozens of attr_accessor fields for various inputs. Can I somehow define the class so that all setters for all fields will e.g. set the value as an empty string instead of the attempted nil? <code> ,attr_accessor which transforms nil into string on write
Is there an equivalent to Array::sample for hashes in ruby ?, I'm looking to extract n random key-value pairs from a hash. <code> ,Is there an equivalent to `Array::sample` for hashes?
How to read POST data in rack request?," When I run the curl command to send a POST request with data to my Rack application, my code prints out {}. That is coming from puts req.POST() in the code below.Why does it print out {} instead of the POST data? And how do I correctly access the POST data in my Rack application? <code>  curl -v -H ""Content-type: application/json"" -X POST -d '{""name"":""abc"", ""id"":""12"", ""subject"":""my subject""}' http://localhost:9292 require 'json'class Greeter def call(env) req = Rack::Request.new(env) if req.post? puts req.POST() end [200, {""Content-Type"" => ""application/json""}, [{x:""Hello World!""}.to_json]] endendrun Greeter.new",How to read POST data in rack request
Ruby serialize array and deserialize back," How do I serialize an array and deserialize it back from a string? I tried the following code, but it doesn't really return the original array of integers but does for the array of strings. Is there a way to get it back to integers without having the .collect{ |x| x.to_i }? <code>  x = [1,2,3].join(',') # maybe this is not the correct way to serialize to string? => '1,2,3' x = x.split(',') => [ '1', '2', '3' ]",How to serialize an array and deserialize back
"Class, Module, their eigenclasses and method lookup in ruby"," Let's open class Module and add a method to it: I can call this method by doing this, which is understandable because class of Class is Class, whose superclass is Module. so it can call instance methods defined in Module.Now, the method bar below is defined on Module's eigenclass: but now also works.Can someone explain me how Class can access methods in Module's eigenclass?I think I got it now. Method look up doesn't work the way I explained before. when I do Class.foo, the method is searched in Class's eigenclass and then it's superclass which is Module's eigenclass all the way upto BasicObject's eigenclass at which point it turns upon itself (like a serpent eating it's own tail) to look for method in Class (as Class is the superclass of BasicObject's eigenclass) and then to it's superclass Module, where it finds the method. Similarly, when I do Class.bar, method is searched in Class's eigenclass and then in Module's eigenclass where it finds it. When I do and guess wot is the output when I do: This is my current understanding: <code>  class Module def foo puts ""phew"" end end Class.foo class Module def self.bar puts ""bar"" end end Class.bar class Class def check puts ""class instance method"" endend class Module def self.check puts ""modules eigenclass method"" end def check puts ""module instance method"" end end Class.check ","Class, Module, their eigenclasses, and method lookup"
Instance variables in Ruby modules?, How is it possible that I can have instance variables in a module even though I cannot create an instance of the module? What would be the purpose of @stack in module Stacklike below? <code>  module Stacklike def stack @stack ||= [] endend,Instance variables in modules?
Rils Activeadmin - custom association select box," In my Rails application, I have the following model: I am creating ActiveAdmin CRUD for my Idea model with the custom form that looks something like that looks something like that: The requirement is to have the custom text for a content of the member association, i.e ""#{last_name}, #{first_name}"". Is it possible to customize my member select box to achieve it?Any help will be appreciated. <code>  class Idea < ActiveRecord::Base belongs_to :userendclass User < ActiveRecord::Base has_many :ideasend form do |f| f.inputs do f.input :member f.input :description endend",Rails Activeadmin - custom association select box
Access an instance variable without using @ sign," Here is an example from a book: In the method add_unique_word the author access the variable unique without using the @ sign (unique.size - 1). How is it possible, and why it is so? <code>  class TextCompressor attr_reader :unique, :index def initialize( text ) @unique = [] @index = [] add_text( text ) end def add_text( text ) words = text.split words.each { |word| add_word( word ) } end def add_word( word ) i = unique_index_of( word ) || add_unique_word( word ) @index << i end def unique_index_of( word ) @unique.index(word) end def add_unique_word( word ) @unique << word unique.size - 1 endend",Access an instance variable without using the @ sign
"Possessive generic quantifier `{m,n}+` in Ruby 1.9.3 isn't correct?"," Possessive quantifiers are greedy and refuse backtrack. A regex /.{1,3}+b/ should mean: Match any character except line breaks, 1 to 3 times, as many as possible and don't backtrack. Tthen match the character b.In this example: no substitution should take place, contrary to fact.The result in these two examples differs: Compare this with Scala, where they give the same answer: Is this a Ruby bug, or is it possible to motivate this behavior? Perhaps, Oniguruma for some reason implemented possessive with all quantifiers ?, *, + except the generic quantifier {m,n}? If that's the case, why? <code>  'ab'.sub /.{1,3}+b/, 'c' #=> ""c"" 'aab'.sub /.{0,1}+b/, 'c' #=> ""c""'aab'.sub /.?+b/, 'c' #=> ""ac"" scala> "".{0,1}+b"".r.replaceAllIn(""aab"", ""c"")res1: String = acscala> "".?+b"".r.replaceAllIn(""aab"", ""c"")res2: String = ac","Possessive generic quantifier {m,n}+ not implemented in Ruby 1.9.3?"
"Possessive generic quantifier {m,n}+ in Ruby 1.9.3 isn't correct?"," Possessive quantifiers are greedy and refuse backtrack. A regex /.{1,3}+b/ should mean: Match any character except line breaks, 1 to 3 times, as many as possible and don't backtrack. Tthen match the character b.In this example: no substitution should take place, contrary to fact.The result in these two examples differs: Compare this with Scala, where they give the same answer: Is this a Ruby bug, or is it possible to motivate this behavior? Perhaps, Oniguruma for some reason implemented possessive with all quantifiers ?, *, + except the generic quantifier {m,n}? If that's the case, why? <code>  'ab'.sub /.{1,3}+b/, 'c' #=> ""c"" 'aab'.sub /.{0,1}+b/, 'c' #=> ""c""'aab'.sub /.?+b/, 'c' #=> ""ac"" scala> "".{0,1}+b"".r.replaceAllIn(""aab"", ""c"")res1: String = acscala> "".?+b"".r.replaceAllIn(""aab"", ""c"")res2: String = ac","Possessive generic quantifier {m,n}+ not implemented in Ruby 1.9.3?"
Sass change detected but style.css only gets overwritten every 5th - 7th time i save," I am using Sass and Ruby (newest version) on a Windows 7 64-bit machine, and I am working on a shared folder on my home server. (But, I have to admit the problem itself occurs on the server as well, since I tried to install Ruby and -watch the files on the server directly).The problem is as follows: if I save for the first time, a change is detected and my style.css gets overwritten directly. After that, I always need to save up to 7 times in order to get the style.css overwritten. Every time, there is a change detected but nothing is compiled. Here's a screen: Here is glance at my base.sass, which imports all the partials: Has anyone had a similar issue on Windows? <code>  >>> Sass is watching for changes. Press Ctrl-C to stop.overwrite style.css>>> Change detected to: E:/Websites/xxx/wp-content/themes/xxx/sass/default-styles.sass>>> Change detected to: E:/Websites/xxx/wp-content/themes/xxx/sass/default-styles.sass>>> Change detected to: E:/Websites/xxx/wp-content/themes/xxx/sass/default-styles.sass>>> Change detected to: E:/Websites/xxx/wp-content/themes/xxx/sass/default-styles.sass>>> Change detected to: E:/Websites/xxx/wp-content/themes/xxx/sass/default-styles.sass>>> Change detected to: E:/Websites/xxx/wp-content/themes/xxx/sass/default-styles.sass>>> Change detected to: E:/Websites/xxx/wp-content/themes/xxx/sass/default-styles.sassoverwrite style.css // Core variables and mixins@import variables// Default HTML Formatting@import default-styles// Grid@import grid// Header and Menus@import header// Blog@import blog",Sass change detected but style.css only overwritten every 5th - 7th time I save
"Why does installing Ruby on Rails generate error ""size of array 'ruby_check_sizeof_voidp' is negative?", When installing Ruby on Rails (via gem install rails) you may get the following error message: There will also be many warnings like this: and an additional error Why does this happen and how can I install Rails successfully? <code>  c:/Ruby193/include/ruby-1.9.1/ruby/ruby.h:109:14: error: size of array 'ruby_check_sizeof_voidp' is negative c:/Ruby193/include/ruby-1.9.1/ruby/ruby.h:1333:12: warning: cast to pointer from integer of different size [-Wint-to-pointer-cast] c:/Ruby193/include/ruby-1.9.1/ruby/missing.h:41:8: error: redefinition of 'struct timespec',"Why does installing Ruby on Rails generate error ""size of array 'ruby_check_sizeof_voidp' is negative""?"
Why do we pass parameter 0 in method exit," In the book learn ruby the hard way, I found a syntax to exit from the program: Why is the parameter 0 being passed in the exit method here even though it works if I pass another integer or do not pass any parameter? What is the significance of 0? <code>  Process.exit(0)","Why do we pass 0 as a parameter to ""exit""?"
"Return Statements inside Procs, Lambdas, and Blocks"," I am having a lot of trouble understanding how return works in blocks, procs, and lambdas. For instance, in the following case, why does batman_ironman_proc work, while batman_yield throw an error? <code>  def batman_ironman_proc victor = Proc.new { return ""Batman will win!"" } victor.call ""Iron Man will win!""enddef batman_yield yield ""Iron man will win!""endvictor = Proc.new { return ""Batman will win!"" }puts batman_ironman_proc #batman_yield(&victor) === This code throws an error.","Return statements inside procs, lambdas, and blocks"
Missing library while installing ruby-filemagic, I needed gem ruby-filemagic for some requirements in my project. While running bundle install its giving me this error Please help me with this problem. <code>  *** ERROR: missing required library to compile this module*** extconf.rb failed ***,Missing library while installing ruby-filemagic gem on Linux
How to fix: Liquid Exception: Tag '{%' was not properly terminated with regexp: /\%\}/, I'm getting this output from my Jekyll website generator Liquid Exception: Tag '{%' was not properly terminated with regexp: /\%}/What's going on? <code> ,How to fix: Liquid Exception: Tag '{%' was not properly terminated with regexp: /\%\}/?
"Ruby 2.0.0p0 IRB error: ""DL is deprecated, please use Fiddle"""," I just uninstalled my older versions of Ruby, removed all of my gems(including Rails), and installed Ruby 2.0. In other words, a totally clean re-install. Upon starting IRB, I received this message: Note: I'm on a Windows machine.What does this message mean? <code>  DL is deprecated, please use Fiddle","Ruby 2.0.0p0 IRB warning: ""DL is deprecated, please use Fiddle"""
DRY within a chef recipe," What's the best way to do a little DRY within a chef recipe? I.e. just break out little bits of the Ruby code, so I'm not copying pasting it over and over again.The following fails of course, with: I may have multiple ruby_blocks in one recipe, as they do different things and need to have different not_if blocks to be truley idempotent. <code>  NoMethodError: undefined method `connect_root' for Chef::Resource::RubyBlock def connect_root(root_password) m = Mysql.new(""localhost"", ""root"", root_password) begin yield m ensure m.close endendruby_block ""set readonly"" do block do connect_root node[:mysql][:server_root_password] do |connection| command = 'SET GLOBAL read_only = ON' Chef::Log.info ""#{command}"" connection.query(command) end end not_if do ro = nil connect_root node[:mysql][:server_root_password] do |connection| connection.query(""SELECT @@read_only as ro"") {|r| r.each_hash {|h| ro = h['ro'] } } end ro endend",DRY within a Chef recipe
"curses.rb ""this is a stub, used for indexing"" in most methods?"," I was investigating curses.rb of the curses gem, I found this everywhere: I don't understand the stub part. Where's the code that actually does all the work? <code>  def attrset(attrs) #This is a stub, used for indexingend# bkgdset(ch)# # Manipulate the background of the current window# with character Integer +ch+# # see also Curses.bkgdsetdef bkgdset(ch) #This is a stub, used for indexingend# bkgd(ch)# # Set the background of the current window# and apply character Integer +ch+ to every character.# # see also Curses.bkgddef bkgd(ch) #This is a stub, used for indexingend# Returns an Interer (+ch+) for the character property in the current window.def getbkgd() #This is a stub, used for indexingend","""This is a stub, used for indexing"" in most methods?"
Middleman + Slim = Not Found," I'm new to Middleman and ruby in general.I've installed RubyI've installed Middleman and the gems to get it running.I need to use slim instead of the default template system.So I installed the Slim gem. Slim's website only says that I need to require 'slim' in order to get it to work.The middleman website says I only need add the template engine to the config.rb file, but it gives no examples...For someone with no ruby background, this is no help.I looked for several config.rb on git and they all have: And I added that to my config.rb file and created the layout.slim and the index.html.slimWhen I refresh my local server I get: I have middleman installed with Boilerplace. I'm not sure if there are more files that I need to change, but I can't find any good resources online, which is odd.Could anyone give me some direction as to what I'm missing? <code>  require 'slim' # Set slim-lang output styleSlim::Engine.set_default_options :pretty => true# Set template languagesset :slim, :layout_engine => :slim Not Found`/' not found.",How to install and use Slim template engine with Middleman
Validation on japanese charactor," I have a Japanese project that needs to validate a half width and full width Japanese character, 14 chars are allowed on half width and 7 characters on full width.Is there anyone who knows how to implement that?Right now on my model is not a good choiceI'm currently using ror 2.3.5Both fullwidth and halfwidth can be used <code>  class Customer validates_length_of :name, :maximum => 14end",Validate Japanese Character in Active Record Callback
Grouping a array," I have the following setup. I want to get all Users for an Invoice that have tasks and sum up their quantities Here is what I got I get this, which is close to what I want How can I group this by user_id and sum up the total so that I have something like this? <code>  Invoice has_many Jobs has_many Tasks belongs_to user class Invoice < ActiveRecord::Base has_many :jobsendclass Job < ActiveRecord::Base belongs_to :invoice has_many :tasks endclass Task < ActiveRecord::Base belongs_to :job belongs_to :user end @invoice = Invoice.find(params[:id])jobs = @invoice.jobs.joins(:tasks) .select('tasks.user_id, (sum(tasks.quantity)*jobs.price) as total') .group('tasks.user_id, jobs.id') .order('tasks.user_id') - !ruby/object:Job attributes: user_id: '1' total: '60.00'- !ruby/object:Job attributes: user_id: '1' total: '50.00'- !ruby/object:Job attributes: user_id: '2' total: '120.00'- !ruby/object:Job attributes: user_id: '2' total: '100.00' user_id: 1total: 110user_id: 2total: 220",Grouping an array and get sum
Measure response time for a http request using Ruby," I'm building a small website for personal use to test an API my company makes. My boss wants a website where we can enter a website, request a form using GET or POST, and the number of times to send the request. He wants the request logged, the time per request, and the average time for all the requests.Is there a way to measure the response time for a GET or POST request using Ruby?I looked through the Net::HTTP library, but didn't see anything that returned the time taken.Are there any websites that already do this? They'd need to have a GUI so non-techies can use it. If not, I was planning on having a simple form that runs a script, writes the ouput of that script to a text file or spreadsheet, and then sends it to the user.Any other suggestions? (A nice AJAX looking interface might work nicely, but would probably require database storage. At 10000 requests per run, that could get hefty. <code> ",Measure response time for a HTTP request using Ruby
Ruby - Cannot access local Sinatra server from another computer on same network, I have a simple Sinatra server that I run through textmate but I can't access from another computer on the same network.I'm running Ruby 1.9.3p327 and Sinatra 1.4.1 on a Mac OS 10.8.3. Firewall is disabled.I tested the same scenario on different networks and computers.The computer responds to simple pings but when I try to telnet port 4567 I can't establish a connection. <code> ,Cannot access local Sinatra server from another computer on same network
Getting ruby documentation from command line," Is there a way to find out which part of my ri command that is not showing Ruby's documentation: When I use pry: What should I do to make the documentation appear? <code>  $ ruby --version ruby 1.9.3p392 (2013-02-22 revision 39386) [i686-linux] $ ri --version ri 3.12.2 $ ri String Nothing known about String $ pry --version Pry version 0.9.12 on Ruby 1.9.3 $ pry [1] pry(main)> ri String # shows String documentation [2] pry(main)> ri String.split error: 'String.split' not found [3] pry(main)> ri String.strip String.strip not found, maybe you meant: String#strip_heredoc",How to get the Ruby documentation from the command line
Getting Ruby documentation from command line?," Is there a way to find out which part of my ri command that is not showing Ruby's documentation: When I use pry: What should I do to make the documentation appear? <code>  $ ruby --version ruby 1.9.3p392 (2013-02-22 revision 39386) [i686-linux] $ ri --version ri 3.12.2 $ ri String Nothing known about String $ pry --version Pry version 0.9.12 on Ruby 1.9.3 $ pry [1] pry(main)> ri String # shows String documentation [2] pry(main)> ri String.split error: 'String.split' not found [3] pry(main)> ri String.strip String.strip not found, maybe you meant: String#strip_heredoc",How to get the Ruby documentation from the command line
Converting an array of words to a sentence in Ruby," I want to convert an array of morphemes produced by a PTB-style tokenizer: To a sentence: What is a sensible way to accomplish this? <code>  [""The"", ""house"", ""is"", ""n't"", ""on"", ""fire"", "".""] ""The house isn't on fire.""",Converting an array of morphemes to a sentence in Ruby
How can I iterate over a reversed range with a specifc step in Ruby?," I can iterate like this but, since reversed range is equal to empty range, I cannot iterate this way it will earn me nothing. Of course, I can iterate backward like this but downto method doesn't allow me to set other step except default 1. It's something very basic, so I suppose there should be a built-in way to do this, which i don't know. <code>  (0..10).step(2){|v| puts v} (10..0).step(2){|v| puts v} 10.downto(0){|v| puts v}",How can I iterate over a reversed range with a specific step in Ruby?
Rails Return many content_tags from Helper module," I've written the following helper: It is currently parsed these arrays. And it returns: Is there a way to accumulate the content_tag? so it returns: My only solution right now is to use a partial instead. But that's going to get very messy once I starting adding more to case condition. <code>  def section_to_html (block) case block[0].downcase when ""paragraph"" block.shift block.each do |value| return content_tag(:p, value) end end end [""paragraph"", ""This is the first paragraph.""][""paragraph"", ""This is the second."", ""And here's an extra paragraph.""] <p>This is the first paragraph.</p><p>This is the second.</p> <p>This is the first paragraph.</p><p>This is the second.</p><p>And here's an extra paragraph.</p>",Rails Return multiple content_tags from Helper module
How do I require NumberHelper and make it work?," I'm trying to write a simple Sinatra thingy but I need ActionView::Helpers::NumberHelper from action pack.http://api.rubyonrails.org/classes/ActionView/Helpers/NumberHelper.html The question is, how do I install and use it? Why doesn't this simple step work?Moreover, if I require all the crap: How to make sense from all of this? Why does not this module work? Why doesn't it require whatever it needs? What does it need? Where is starts_with?Google is utterly silent on those questions.UPD: And now I get the following It seems to me that my NumberHelper is broken. This isn't a good behavior. <code>  irb(main):001:0> require 'action_view/helpers/number_helper'irb(main):002:0> number_with_precision(1)NoMethodError: undefined method `number_with_precision' for main:Objectirb(main):004:0> ActionView::Helpers::NumberHelper.number_with_precision(1)NoMethodError: undefined method `number_with_precision' for ActionView::Helpers::NumberHelper:Module irb(main):001:0> require 'action_pack'irb(main):004:0> require 'action_view'irb(main):005:0> include ActionView::Helpers::NumberHelperirb(main):006:0> number_to_phone(12345)NoMethodError: undefined method `starts_with?' for ""12345"":String number_with_precision(1, :locale => 'fr')TypeError: wrong argument type nil (expected Fixnum)",Rails: How do I require NumberHelper and make it work?
Can someone help me understand this Ruby code?," Railscasts put out a great episode on refactoring. One method is to move complex controller logic into service objects instead of pushing it down the model. In one service object, the following code is used: What does the new key word serve in both method bodies? new User.find_by_. How is that different from User.find_by_ ?Here's the calling code: Also, why the attr_reader :user needed? <code>  class PasswordReset attr_reader :user def self.from_email(email) new User.find_by_email(email) end def self.from_token(token) new User.find_by_password_reset_token!(token) end ...end def create # controller password_reset = PasswordReset.from_email(params[:email]) if password_reset.user password_reset.send_email redirect_to root_url, notice: ""Email sent with password reset instructions."" else redirect_to new_password_reset_url, alert: ""Email address does not match a user account."" end end",How does the `new` keyword work in this Ruby method definition?
ruby module vs using class composition," A question similar to this has been asked before, but I am asking specifically about using composition as an alternative to using module mixins. If I need to 'use' a class but not inherit it , I would simply compose it and use it. Why would I like to create a module for this: The only difference I see is there wont be many Helper objects lying around if I use modules. But I don't see anything with more objects lying around vs less bigger objects. Moreover, I don't know if I need to subclass it in the future. So how do I decide if the users of my library want to use a module mixin, or would want to use composition? <code>  class Helper def do_somthing endend class MyStuff def initialize helper = Helper.new helper.do_something endend module Helper def do_something end endclass MyStuff include Helperend",When do we use ruby module vs using class composition?
determining type of an object in ruby, I'll use python as an example of what I'm looking for (you can think of it as pseudocode if you don't know Python): I know in ruby I can do : But is this the proper way to determine the type of the object? <code>  >>> a = 1>>> type(a)<type 'int'> 1.9.3p194 :002 > 1.class => Fixnum ,Determining type of an object in ruby
Sintra and question mark," I need to make some methods with Sinatra that should look like: http//:localhost:1234/add?string_to_addBut when I declare it like this: it doesn't see the string_to_add param.How should I declare my method and use this parameter to make things work? <code>  get ""/add?:string_to_add"" do...end",Sinatra and question mark
Does multibyte character interfere with pseudo-global variables within a regex?," With this regex: the following strings match: but with these regexes: they show difference: What is interfering? The string encoding is UTF-8, and the OS is Linux (i.e., $/ is ""\n""). Are the multibyte characters interfering with $/? How? <code>  regex1 = /\z/ ""hello"" =~ regex1 # => 5"""" =~ regex1 # => 5 regex2 = /#$/?\z/regex3 = /\n?\z/ ""hello"" =~ regex2 # => 5""hello"" =~ regex3 # => 5"""" =~ regex2 # => nil"""" =~ regex3 # => nil",Does multibyte character interfere with end-line character within a regex?
ruby recursion stack level too deep," I have this ruby code: Seems to be working for values up until 999. When I try 9999 it gives me this: So, I added this: but nothing happened. My ruby version is: I also increased the machine's stack size ulimit -s 32768 which I think is 32MB?I don't think it is my code's fault as it works with smaller numbers, and I don't think 9999 is a big number. I have 8GB of RAM and I think it is more than enough. Any ideas/help? <code>  def get_sum n return 0 if n<1 (n%3==0 || n%5==0) ? n+get_sum(n-1) : get_sum(n-1) #continue executionend puts get_sum 999 stack level too deep (SystemStackError) RubyVM::InstructionSequence.compile_option = { :tailcall_optimization => true, :trace_instruction => false} ruby 1.9.3p392 (2013-02-22 revision 39386) [x86_64-darwin12.2.1]","Why do I get ""stack level too deep"" with recursion?"
Trying to remove yum wick is protected in Centos," Well, I'm trying to execute the following command. Because I need that file (?), however facing problems while installing ruby with rvm, as libffi-devel is a dependecy of rvm to install ruby.However it gives me the following error, and of course it doesn't delete anything. I've already tried with --skip-broken and I get this: As you may see, I'm not an expert in Linux, but I need to install Ruby with rvm and I can't because of this error, does anyone of you have an idea of what am i doing wrong?Thank you :) <code>  yum remove libffi-3.0.9-1.el5.rf.i386 Error: Trying to remove ""yum"", which is protected You could try using --skip-broken to work around the problem You could try running: rpm -Va --nofiles --nodigest Error: Trying to remove ""yum"", which is protected You could try running: rpm -Va --nofiles --nodigest",Trying to remove yum which is protected in Centos
Why images are not showing in my rails basic app," my index.html.erb code - and images are under app\assets\images..but still images are not appearing on front end.When I Firebug it, i believe image tag is correctly forming...let me know what i am missing in this part. Screenshot -Images are in place as well -Let me know what I am doing wrong and how do i fix it.EDITgithub.com/swapnesh/depotLet me know why it is not working in my case.Although changing /images/product1.jpg To /assets/product1.jpg makes it working. <code>  <h1>Listing products</h1><table border=""1""><% @products.each do |product| %> <tr> <td><%= product.title %></td> <td><%= product.description %></td> <td><%= image_tag(product.image_url, :class => 'list_image') %></td> <td><%= product.price %></td> <td><%= link_to 'Show', product %></td> <td><%= link_to 'Edit', edit_product_path(product) %></td> <td><%= link_to 'Destroy', product, method: :delete, data: { confirm: 'Are you sure?' } %></td> </tr><% end %></table><br /><%= link_to 'New Product', new_product_path %> <img src=""/images/product1.jpg"" class=""list_image"" alt=""Product1"">",Rails: Why images are not showing in my rails basic app
Really simple Sinatra LDAP authentication," I looked at the Sinatra docs and they only seem to reference HTTP authentication. I'm looking for a really simple way to control access to routes based on a user being authorised/authenticated via an LDAP server. I've already built a class that does the LDAP bit and returns an LDAP object if the user has successfully authenticated and nil if they haven't: I can use this to determine if they've successfully authenticated or not. As a next step I want to splice this into a simple Sinatra app that provides a form to collect the LDAP user and password: Then I want to only allow routes if the 'DirectoryUser' object exists: I've spent hours trying to find an answer to this but so far and can't seem to find anything that works for me.  <code>  >>DirectoryUser.authenticate('user', 'password')#<DirectoryUser:0x007ffb589a2328> require 'directoryUser'require 'sinatra'enable :sessions get '/form' do username = params[:username] password = params[:password] haml :form end get '/protected' do # Only if DirectoryUser object exists ""This route is protected""endget '/unprotected' do ""This route is unprotected""end",How do I do a really simple Sinatra LDAP authentication?
is there an easy way to do multiline indented strings in Ruby?," Say I wanted to have a very large block of pretty printed html code strait inline with my ruby code. What is the cleanest way to do this without losing any formatting in my string or having to remember some sort of gsub regex.Encoding it all in one line is easy to do but hard to read: Multiline text in ruby is easier to read but the string can't be indented with the rest of the code: For example the following is indented with my code, but the string now has four extra spaces in front of every line: Most people go with the HEREDOC code above, and do a regex replace on the result to take out the extra whitespace at the beginning of each line. I would like a way where I don't have to go through the trouble of regexing each time. <code>  1.times do # Note that the spaces have been changed to _ so that they are easy to see here. doc = ""\n<html>\n__<head>\n____<title>\n______Title\n____</title>\n__</head>\n__<body>\n____Body\n__</body>\n</html>\n"" ans = ""Your document: %s"" % [doc] puts ansend 1.times do doc = ""<html> <head> <title> Title </title> </head>",Is there an easy way to do multiline indented strings in Ruby?
How to create a Ruby DateTime in a specific time zone for a Rails app?," I have users entering in dates in a Ruby on Rails website. I parse the dates into a DateTime object with something like: or Both DateTimes will not be in the time zone of the user which I previously set with something like: How do I parse the above DateTimes to be in the right time zone? I know the DateTime.new method has a 7th argument for the time offset. Is there an easy way to look up the offset for a time zone in a given time? Or should I be using something other than DateTime? <code>  date = DateTime.new(params[:year].to_i, params[:month].to_i, params[:day].to_i, params[:hour].to_i, params[:minute].to_i) date = DateTime.parse(params[:date]) Time.zone = ""Pacific Time (US & Canada)""",How to create a Ruby DateTime from existing Time.zone for Rails?
Error in ruby server," When I start my Rails server using rails s, I getting this error: How do I fix it? <code>  /usr/local/lib/site_ruby/1.8/rubygems/dependency.rb:296:in `to_specs': Could not find 'railties' (>= 0) among 10 total gem(s) (Gem::LoadError)from /usr/local/lib/site_ruby/1.8/rubygems/dependency.rb:307:in `to_spec'from /usr/local/lib/site_ruby/1.8/rubygems/core_ext/kernel_gem.rb:47:in `gem'from /usr/bin/rails:22","Why do I get ""Could not find 'railties' error with Rails server?"
Testing Cron Jobs in development; Rails, I have a custom environment called 'reports' that is setup to hit a slave database. I am trying to configure some cron jobs using the Whenever gem and want to test them in development before I deploy. Is there any way to test cron jobs in development? Is there anyway I could schedule them locally and then start my reports server and see if they run? Thank You! <code> ,Rails: Testing Cron Jobs in development environment
Ruby not finding new version of openssl," Where and when does OpenSSL::OPENSSL_VERSION_NUMBER get set? And why isn't it getting set to the latest OpenSSL that I've just installed?First the error(s): If I go directly into irb, I can see that Ruby is using the ""old"" openssl: This tells me that Ruby isn't finding the local version of OpenSSL that I just built, which should be at least 0x908000. The relevant code: explains why it's not finding SHA512.But I don't know why Ruby is using the old version of OpenSSL. I built OpenSSL and Ruby from fresh sources using But this ruby doesn't appear to find the openssl 1.0.1e that I just built. My understanding was that the --with-open-ssl-dir argument to ./configure was necessary and sufficient to tell ruby to use the new OpenSSL, but that didn't seem to work.Any ideas on how to get Ruby to recognize the new OpenSSL that I've built?I've tried running ruby extconf.rb ; make ; make install as suggested by @Gaurish (below), but that still finds the OpenSSL installed in the system, not in my project root directory. <code>  $ gem install activesupport -v '3.2.13'Error while executing gem ... (RuntimeError)Unsupported digest algorithm (SHA512) $ irb>> require 'openssl'=> true>> OpenSSL::Digest.new('sha512')RuntimeError: Unsupported digest algorithm (sha512)>> OpenSSL::OPENSSL_VERSION_NUMBER.to_s(16)""9070cf"" # file: usr/lib/ruby/2.0.0/openssl/digest.rb...alg = %w(DSS DSS1 MD2 MD4 MD5 MDC2 RIPEMD160 SHA SHA1)if OPENSSL_VERSION_NUMBER > 0x00908000 alg += %w(SHA224 SHA256 SHA384 SHA512)end SANDBOX=/Users/me/sandboxes/ruby2PATH=$(SANDBOX)/usr/bin:$(PATH)# Create a fresh OpenSSL from sources(downloaded and unpacked http://www.openssl.org/source/openssl-1.0.1e.tar.gz)$ ./config --prefix=$(SANDBOX)/usr --openssldir=$(SANDBOX)/usr/openssl$ make ; make install ; make clean# verify openssl$ which openssl/Users/me/sandboxes/ruby2/usr/bin/openssl$ openssl versionOpenSSL 1.0.1e 11 Feb 2013# Create a fresh Ruby from sources(download and unpack http://ftp.ruby-lang.org/pub/ruby/2.0/ruby-2.0.0-p0.tar.gz)$ ./configure --prefix=$(SANDBOX)/usr --with-open-ssl-dir=$(SANDBOX)/usr/openssl$ make ; make intalll ; make clean# verify ruby$ which ruby/Users/me/sandboxes/ruby2/usr/bin/ruby",Ruby not finding new version of OpenSSL
Ruby not finding new version of OpenSSL (not setting OpenSSL::OPEN_SSL_VERSION as expected)," Where and when does OpenSSL::OPENSSL_VERSION_NUMBER get set? And why isn't it getting set to the latest OpenSSL that I've just installed?First the error(s): If I go directly into irb, I can see that Ruby is using the ""old"" openssl: This tells me that Ruby isn't finding the local version of OpenSSL that I just built, which should be at least 0x908000. The relevant code: explains why it's not finding SHA512.But I don't know why Ruby is using the old version of OpenSSL. I built OpenSSL and Ruby from fresh sources using But this ruby doesn't appear to find the openssl 1.0.1e that I just built. My understanding was that the --with-open-ssl-dir argument to ./configure was necessary and sufficient to tell ruby to use the new OpenSSL, but that didn't seem to work.Any ideas on how to get Ruby to recognize the new OpenSSL that I've built?I've tried running ruby extconf.rb ; make ; make install as suggested by @Gaurish (below), but that still finds the OpenSSL installed in the system, not in my project root directory. <code>  $ gem install activesupport -v '3.2.13'Error while executing gem ... (RuntimeError)Unsupported digest algorithm (SHA512) $ irb>> require 'openssl'=> true>> OpenSSL::Digest.new('sha512')RuntimeError: Unsupported digest algorithm (sha512)>> OpenSSL::OPENSSL_VERSION_NUMBER.to_s(16)""9070cf"" # file: usr/lib/ruby/2.0.0/openssl/digest.rb...alg = %w(DSS DSS1 MD2 MD4 MD5 MDC2 RIPEMD160 SHA SHA1)if OPENSSL_VERSION_NUMBER > 0x00908000 alg += %w(SHA224 SHA256 SHA384 SHA512)end SANDBOX=/Users/me/sandboxes/ruby2PATH=$(SANDBOX)/usr/bin:$(PATH)# Create a fresh OpenSSL from sources(downloaded and unpacked http://www.openssl.org/source/openssl-1.0.1e.tar.gz)$ ./config --prefix=$(SANDBOX)/usr --openssldir=$(SANDBOX)/usr/openssl$ make ; make install ; make clean# verify openssl$ which openssl/Users/me/sandboxes/ruby2/usr/bin/openssl$ openssl versionOpenSSL 1.0.1e 11 Feb 2013# Create a fresh Ruby from sources(download and unpack http://ftp.ruby-lang.org/pub/ruby/2.0/ruby-2.0.0-p0.tar.gz)$ ./configure --prefix=$(SANDBOX)/usr --with-open-ssl-dir=$(SANDBOX)/usr/openssl$ make ; make intalll ; make clean# verify ruby$ which ruby/Users/me/sandboxes/ruby2/usr/bin/ruby",Ruby not finding new version of OpenSSL
`Can't locate Git.pm in @INC` for svn2git," I am attempting to import an svn repo into git via svn2git. When I run svn2git --verbose https://url_to_repo I end up getting the following output: It is obvious that Perl is unable to find the module within the path, however everything I've tried so far on CentOS 5.9 has not yielded results. For example, the following are installed: Any ideas of how to resolve this issue?So it turns out that for some reason Perl doesn't know how to look at /usr/lib/perl5/vendor_perl/5.8.8/. If I make links to every module that it needs within /usr/lib/perl5/site_perl/5.8.8 it works seemingly fine and without error. So the real question here is HOW do you force Perl to look under that vendor_perl folder? <code>  Running command: git svn init --prefix=svn/ --no-metadata --trunk=trunk --tags=tags --branches=branches https://url_for_repositoryCan't locate Git.pm in @INC (@INC contains: /usr/lib/perl5/site_perl/5.8.8 /home/cpdirect/perl5/lib/perl5 /usr/local/lib/perl5/5.8.8/x86_64-linux /usr/local/lib/perl5/5.8.8 /usr/local/lib/perl5/site_perl/5.8.8/x86_64-linux /usr/local/lib/perl5/site_perl/5.8.8 /usr/local/lib/perl5/site_perl .) at /usr/libexec/git-core/git-svn line 80.BEGIN failed--compilation aborted at /usr/libexec/git-core/git-svn line 80.command failed:2>&1 git svn init --prefix=svn/ --no-metadata --trunk=trunk --tags=tags --branches=branches https://url_for_repository git-1.7.11.3-1.el5.rfgit-svn-1.7.11.3-1.el5.rfcpanel-git-1.7.11.3-1.cp1136",How to include other folders within the @INC for Perl? (Was: `Can't locate Git.pm in @INC` for svn2git)
Rubyzip: in memory or blob record of the zip file," I have this code, which writes a zip file to disk, reads it back, uploads to s3, then deletes the file: This code works already but what I want is to not create the zip file anymore, to save a few steps. I was wondering if there is a way to export the zipfile data directly to s3 without having to first create a tmpfile, read it back, then delete it? <code>  compressed_file = some_temp_pathZip::ZipOutputStream.open(compressed_file) do |zos| some_file_list.each do |file| zos.put_next_entry(file.some_title) zos.print IO.read(file.path) endend # Write zip files3 = Aws::S3.new(S3_KEY, S3_SECRET)bucket = Aws::S3::Bucket.create(s3, S3_BUCKET)bucket.put(""#{BUCKET_PATH}/archive.zip"", IO.read(compressed_file), {}, 'authenticated-read')File.delete(compressed_file)",Rubyzip: Export zip file directly to S3 without writing tmpfile to disk?
Rubyzip: get buffer / in memory / blob record of the zip file," I have this code, which writes a zip file to disk, reads it back, uploads to s3, then deletes the file: This code works already but what I want is to not create the zip file anymore, to save a few steps. I was wondering if there is a way to export the zipfile data directly to s3 without having to first create a tmpfile, read it back, then delete it? <code>  compressed_file = some_temp_pathZip::ZipOutputStream.open(compressed_file) do |zos| some_file_list.each do |file| zos.put_next_entry(file.some_title) zos.print IO.read(file.path) endend # Write zip files3 = Aws::S3.new(S3_KEY, S3_SECRET)bucket = Aws::S3::Bucket.create(s3, S3_BUCKET)bucket.put(""#{BUCKET_PATH}/archive.zip"", IO.read(compressed_file), {}, 'authenticated-read')File.delete(compressed_file)",Rubyzip: Export zip file directly to S3 without writing tmpfile to disk?
Rails 4 strong parameters failing," Probably doing something stupid here, but here's my basic cookie cutter class: And when creating a new instance of League: What exactly am I doing wrong here? This is a Rails 4.0.0.beta1 build + Ruby 2.0** UPDATE **I realize now that strong parameters are enforced in the Controller now and not in the model. The original question still stands. If they are permitted on the controller level, how can I properly whitelist attributes if I'm creating instances in the Rails console? Wouldn't I need to also use attr_accessible in this case also thereby completely duplicating what strong parameters is trying to ""fix""? <code>  class League < ActiveRecord::Base private def league_params params.require(:full_name).permit! endend 2.0.0-p0 :001 > l = League.new(full_name: 'foo', short_name: 'bar')WARNING: Can't mass-assign protected attributes for League: full_name, short_name",Rails 4 strong parameters failing when creating instances in rails console
"Function name convention for ""convert bar to foo"""," I have a very common pattern of ""given a Foo, return a Bar,"" for example, given a user_id, return a User.Is there a conventional naming pattern for these sorts of functions? Following Joel on Software, I've personally used a lot of bar_from_foo(), but I rarely see other people do this and it quickly becomes verbose, e.g. Is there a conventional way to name, or namespace (e.g. User.from_map()) in any of the popular languages out there? I am particularly interested in Python but any language you can think of would br useful. <code>  widgets = user_widgets_from_user(user_from_param_map(params))","Function name convention for ""convert foo to bar"""
"stuck on codecademy ""converting between symbols and strings"" ruby lesson"," These are Codecademy's instructions: We have an array of strings we'd like to later use as hash keys, but we'd rather they be symbols. Create a new array, symbols. Use .each to iterate over the strings array and convert each string to a symbol, adding those symbols to symbols.This is the code I wrote (the strings array was provided): I know I'm probably doing multiple things wrong, but I've got through the ruby track this far with very little difficulty, so I'm not sure why this one is stumping me. Firstly, it's not converting the strings to symbols, and secondly, it's not pushing them to the symbols array. <code>  strings = [""HTML"", ""CSS"", ""JavaScript"", ""Python"", ""Ruby""]symbols = []strings.each { |x| x.to_sym }symbols.push(strings)","Codecademy ""converting between symbols and strings"" ruby lesson"
Ruby: Reproduce random array sort," I have an array of objects that I want to sort by random. For this case I can use array.shuffle. But what if I want to reproduce that order later on the same array? Is there any way that I can provide a seed, random number, whatever, so that I can reproduce this sequence later?I want to generate a random list of objects from a MongoDB database (using MongoID), and that list has to be reproduced later. But as far as I know, there is no really good way, to implement a random sort directly in MongoDB. There could be a lot of objects (>1,000,000), but computation time is for the first try not the fact that matters. <code> ",Reproduce random array sort
Testing for nil or empty variable," I'm trying to set a variable conditionally in Ruby. I need to set it if the variable is nil or empty (0 length string). I've come up with the following: While it works, it doesn't seem very Ruby-like to me. Is the a more succinct way of expressing the above? <code>  variable = id if variable.nil? || (!variable.nil? && variable.empty?)",Testing for empty or nil-value string
Ruby evalute without eval?," How could I evaluate at mathematical string without using eval?Example: Anyway that can be evaluated without using eval?Maybe something with regex..? <code>  mathstring = ""3+3""",Ruby evaluate without eval?
Open and save base64 encoded image in Ruby," From several posts I've seen, I am trying this But then I can't open the image with a viewer, do I have to do something more? <code>  x = Base64.decode64(""data:image/png;base64,iVBOR...."")File.open('test.png','wb') {|file| file.write x}",Open and save base64 encoded image data URI in Ruby
Single block AES decryption in Ruby (OpenSSL)," I need to play around with some AES snippets.I've got some cipher text c and a key k. The cipher text has been encrypted using AES-CBC, with the IV prepended. No padding is present, the plain text's length is a multiple of 16.So I'm doing this: and it's working just fine.Now I need to do the CBC mode by hand, so I need ""plain"" AES decryption of a single block.I'm trying this: And it fails with How do I do it?  <code>  aes = OpenSSL::Cipher::Cipher.new(""AES-128-CCB"")aes.decryptaes.key = kaes.iv = c[0..15]aes.update(c[16..63]) + aes.final aes = OpenSSL::Cipher::Cipher.new(""AES-128-ECB"")aes.decryptaes.key = kaes.iv = c[0..15]aes.update(c[16..31]) + aes.final in `final': bad decrypt (OpenSSL::Cipher::CipherError)",Single block AES decryption in Ruby
What is minimum set of methods that have direct access to the source code?," There are several ways to access the source code of a library from within a Ruby code that require/loads that library. Among these ways, some read the library file directly and parse it. Others access the source through some built in methods that provide information about the source (such as the abstract syntax tree). In a situation where I have no access to directly read the content of the file (as in the former ways), the only way to access the source would be through accessing the built-in methods that provide the information. By redefining these methods to do something else, I will completely loose access to the source code. What are the minimum set of methods such that if I redefine them to something else, I will completely loose access to the source code of the library on an external file?To rephrase the questionSuppose:There is a user that can write any Ruby code in file A.There is a static Ruby file B written by me, which loads file A and calls the main routine defined in A, and also defines some classes/methods that the user can use in A.The user does not have +r (read) or +w (write) permission to B.Which (standard Ruby) methods do I have to redefine (nullify) or remove by writing so in file B in order to make it impossible for the user to access the source written in file B (via whatever code the user can write in file A) when I run file B?There are some libraries like sorcerer, pry, that can extract the source code of the methods it has access to. There must be some primitive commands within plain Ruby that these libraries rely upon to make it possible for them to access the source code. What are the methods that make this kind of things possible?If you don't know the full answer but know how a particular library extracts the source of some method, then that will still help. <code> ",What methods make it possible to access the source code?
ruby: binding.pry in BasicObject," pry would be great for debugging a subclass of BasicObject !https://github.com/pry/pry says that pry has:""Exotic object support (BasicObject instances...""But how to do that?As can be expected a BasicObject does not understand binding. When method_missing is invoked, where to send binding? <code>  NameError: undefined local variable or method `binding' for #<C30Course:0xbefbc0c>",binding.pry in BasicObject
"Ruby, net/http, HTTP request path is empty error"," I'm using Net::HTTP to make a HTTP request. I get the error ""HTTP request path is empty"", but I strongly feel that it is not. The code is below: The error is: Can anyone point towards my mistake? <code>  REQUEST_IP = ""localhost""REQUEST_PORT = ""8081""REQUEST_PATH = ""myweb/rest""def customServiceMailAndMessageRequest user_id, message url = 'http://' + REQUEST_IP + "":"" + REQUEST_PORT + ""/"" + REQUEST_PATH + '/users/' + user_id + '/messages/sendMailAndMessage?message=' + message uri = URI(url) request = Net::HTTP::Get.new(uri.path) request['Content-Type'] = 'application/json' request['Accept'] = 'application/json' response = Net::HTTP.new(uri.host,uri.port) do |http| http.request(request) end puts responseend /usr/lib/ruby/1.8/net/http.rb:1478:in `initialize': HTTP request path is empty (ArgumentError) from /usr/lib/ruby/1.8/net/http.rb:1596:in `initialize'","Why do I get Net::HTTP ""request path is empty"" error?"
Path form string with param," I need a good way to create a set of Rails 3 paths from an array, in the link_to helper.I have: This way i need to construct a set of paths: As you can see, i need to add same prefix _super_users for every single path, and pass user object. As the final result, i need something like: Your suggestions are really appreciated. <code>  TITLES = ['foo', 'bar', 'baz']TITLES.each do |t| = link_to t, (.....path....) foo_super_users_path(user)bar_super_users_path(user)baz_super_users_path(user) link_to t, foo_super_users_path(user)link_to t, bar_super_users_path(user)link_to t, baz_super_users_path(user)",Path from string with parameter
Is building a production web application using MagLev for ruby a good idea?," I'm a fan of Rails and ruby in general, and may embark upon building enterprise applications for financial institutions. I really like the idea of maglev, and wonder whether it's worth consideration. I haven't found much information as to whether maglev is being used in production in the wild, let alone for a high-security purpose.Has anyone successfully deployed mission-critical applications using MagLev? If so, can you provide details about your experience and maybe name the application? <code> ",Is it possible to build a production web application using MagLev for ruby?
Difference b/w timeout and open timeout?," In the Ruby RestClient gem, what's the difference between the timeout and open-timeout functionality?http://www.ruby-doc.org/gems/docs/w/wgibbs-rest-client-1.0.5/RestClient/Resource.html#method-i-open_timeoutI didn't get anything from the doc file of the gem either. <code> ",What is the difference between timeout and open timeout?
Rails - How to onfigure action mailer (should I register domain)?," I am creating a simple non-profit application with Ruby on Rails. I have to set up the following settings in order to be able to send emails with Gmail: I am completely new with this stuff and have no idea what exactly I should do.How to populate the settings above if I have gmail account? Do Ineed to buy a domain and can be it bought from google in order touse the settings above?Is it better to set up mail server on my PC? I looked thoughthis tutorial but as far as I understand I still need to buy adomain.Also, as it is said here: Setting up an email server is a difficult process involving a number of different programs, each of which needs to be properly configured.because of this and my poor skills I am looking for the simplest solution.I have read the rails action mailer tutorial and have an idea about what these parameters are used for, but the things around the Gmail and the mail server are not clear at all. <code>  Depot::Application.configure doconfig.action_mailer.delivery_method = :smtpconfig.action_mailer.smtp_settings = { address:""smtp.gmail.com"", port:587, domain:""domain.of.sender.net"", authentication: ""plain"", user_name:""dave"", password:""secret"", enable_starttls_auto: true}end",How to configure action mailer (should I register domain)?
Rails - How to configure action mailer (should I register domain)?," I am creating a simple non-profit application with Ruby on Rails. I have to set up the following settings in order to be able to send emails with Gmail: I am completely new with this stuff and have no idea what exactly I should do.How to populate the settings above if I have gmail account? Do Ineed to buy a domain and can be it bought from google in order touse the settings above?Is it better to set up mail server on my PC? I looked thoughthis tutorial but as far as I understand I still need to buy adomain.Also, as it is said here: Setting up an email server is a difficult process involving a number of different programs, each of which needs to be properly configured.because of this and my poor skills I am looking for the simplest solution.I have read the rails action mailer tutorial and have an idea about what these parameters are used for, but the things around the Gmail and the mail server are not clear at all. <code>  Depot::Application.configure doconfig.action_mailer.delivery_method = :smtpconfig.action_mailer.smtp_settings = { address:""smtp.gmail.com"", port:587, domain:""domain.of.sender.net"", authentication: ""plain"", user_name:""dave"", password:""secret"", enable_starttls_auto: true}end",How to configure action mailer (should I register domain)?
rails check is file exist by url without downloading it," I need to write code which will determine if a file exists by checking its URL.Currently I implement this: But, it's not working right because each time it downloads the file, which is really slow if I have big files or a lot of them.How do I determine if a file exists on the remote side without downloading it? <code>  error_code = 400;response = Net::HTTP.get_response(URI(url));return response.code.to_i < error_code;",How do I check if a file exists using its URL without downloading it?
Rails filter an ActiveRecord relation without turning it into an array," I have an ActiveRecord relation of a user's previous ""votes""... I need to filter these down to votes only on the current ""challenge"", so Ruby's select method seemed like the best way to do that... But I also need to update the attributes of these records, and the select method turns my relation into an array which can't be updated or saved! How can I filter down my relation like the select method is doing, but not lose the ability to update/save it the items with ActiveRecord?Poking around the Google it seems like named_scope's appear in all the answers for similar questions, but I can't figure out it they can specifically accomplish what I'm after. <code>  @previous_votes = current_user.votes @previous_votes = current_user.votes.select { |v| v.entry.challenge_id == Entry.find(params[:entry_id]).challenge_id } @previous_votes.update_all :ignore => false# ...# undefined method `update_all' for #<Array:0x007fed7949a0c0>",Use Ruby's select method on a Rails relation and update it
Filter an ActiveRecord relation in Rails without turning it into an array," I have an ActiveRecord relation of a user's previous ""votes""... I need to filter these down to votes only on the current ""challenge"", so Ruby's select method seemed like the best way to do that... But I also need to update the attributes of these records, and the select method turns my relation into an array which can't be updated or saved! How can I filter down my relation like the select method is doing, but not lose the ability to update/save it the items with ActiveRecord?Poking around the Google it seems like named_scope's appear in all the answers for similar questions, but I can't figure out it they can specifically accomplish what I'm after. <code>  @previous_votes = current_user.votes @previous_votes = current_user.votes.select { |v| v.entry.challenge_id == Entry.find(params[:entry_id]).challenge_id } @previous_votes.update_all :ignore => false# ...# undefined method `update_all' for #<Array:0x007fed7949a0c0>",Use Ruby's select method on a Rails relation and update it
"Ruby custom error classes: the message attribute, and inheritance"," I can't seem to find much information about custom exception classes.What I do knowYou can declare your custom error class and let it inherit from StandardError, so it can be rescued: This allows you to raise it using: and later, get that message when rescuing What I don't knowI want to give my exception some custom fields, but I want to inherit the message attribute from the parent class. I found out reading on this topic that @message is not an instance variable of the exception class, so I'm worried that my inheritance won't work.Can anyone give me more details to this? How would I implement a custom error class with an object attribute? Is the following correct: And then: to get: will it work, and if it does, is this the correct way of doing things? <code>  class MyCustomError < StandardErrorend raise MyCustomError, ""A message"" rescue MyCustomError => e puts e.message # => ""A message"" class MyCustomError < StandardError attr_reader :object def initialize(message, object) super(message) @object = object endend raise MyCustomError.new(anObject), ""A message"" rescue MyCustomError => e puts e.message # => ""A message"" puts e.object # => anObject",Ruby custom error classes: inheritance of the message attribute
Include and OR logic operator?," I am starting learn Ruby, need some help with the include? method.The below code works just fine: But when I code it this way: If gives me error when I run it: Is this because the include? method cannot have handle logic operator?Thanks <code>  x = 'ab.c'if x.include? ""."" puts 'hello'else puts 'no'end x = 'ab.c'y = 'xyz'if x.include? ""."" || y.include? ""."" puts 'hello'else puts 'no'end test.rb:3: syntax error, unexpected tSTRING_BEG, expecting keyword_then or ';' or '\n'if x.include? ""."" || y.include? ""."" ^test.rb:5: syntax error, unexpected keyword_else, expecting end-of-input",How can I logically OR two include? conditions in Ruby?
"Even though ""gem 'pg'"" is in my Gemfile, bundle install ignores it. Why?"," Currently WorkingNot sure what happened.Built gemfile.lock on a linux box and moved it over. Had missing things, ran bundle install, worked.Bundle is ignoring my inclusion of the ""pg"" gem in my Gemfile. Installing pg through gem install pg works fine, and it shows up when I use gem list --local.Gemfile: bundle install (no pg): bundle show pg: gem list --local (pg exists): Also, if I try to run rails s, rake db:create, etc., I get: Using: <code>  source 'http://rubygems.org'gem 'rails' gem 'pg' Using rake (10.0.4)Using i18n (0.6.1)Using multi_json (1.7.2)Using activesupport (3.2.13)Using builder (3.0.4)Using activemodel (3.2.13)Using erubis (2.7.0)Using journey (1.0.4)Using rack (1.4.5)Using rack-cache (1.2)Using rack-test (0.6.2)Using hike (1.2.2)Using tilt (1.3.7)Using sprockets (2.2.2)Using actionpack (3.2.13)Using mime-types (1.23)Using polyglot (0.3.3)Using treetop (1.4.12)Using mail (2.5.3)Using actionmailer (3.2.13)Using arel (3.0.2)Using tzinfo (0.3.37)Using activerecord (3.2.13)Using activeresource (3.2.13)Using json (1.7.7)Using rack-ssl (1.3.3)Using bundler (1.3.5)Using rdoc (3.12.2)Using thor (0.18.1)Using railties (3.2.13)Using rails (3.2.13)Your bundle is complete!Use `bundle show [gemname]` to see where a bundled gem is installed. Could not find gem 'pg'.Did you mean pg? *** LOCAL GEMS ***actionmailer (3.2.13)actionpack (3.2.13)activemodel (3.2.13, 3.1.11)activerecord (3.2.13) activeresource (3.2.13)activesupport (3.2.13, 3.1.11)arel (3.0.2)bigdecimal (1.2.0)builder (3.0.4)bundler (1.3.5)erubis (2.7.0)hike (1.2.2)i18n (0.6.4, 0.6.1)io-console (0.4.2)journey (1.0.4)json (1.7.7)mail (2.5.3)mime-types (1.23)minitest (4.3.2)multi_json (1.7.2)pg (0.15.1 x64-mingw32)polyglot (0.3.3)psych (2.0.0)rack (1.4.5, 1.3.10)rack-cache (1.2)rack-mount (0.8.3)rack-ssl (1.3.3)rack-test (0.6.2)rails (3.2.13)railties (3.2.13)rake (10.0.4, 0.9.6)rdoc (4.0.0, 3.12.2)rubygems-update (2.0.3)sprockets (2.2.2, 2.0.4)test-unit (2.0.0.0)thor (0.18.1)tilt (1.3.7)treetop (1.4.12)tzinfo (0.3.37) rake aborted!Please install the postgresql adapter: `gem install activerecord-postgresql-adapter` (pg is not part of the bundle. Add it to Gemfile.)Tasks: TOP => db:create(See full trace by running task with --trace) Windows 7, 64-bitRails 3.2.13ruby 2.0.0p0 (2013-02-24) [x64-mingw32]Bundler version 1.3.5","Why does bundle ignore ""gem 'pg'""?"
Xpath vs Ruby: inverse lookup," In Ruby we can access an array with negative numbers like array[-1] to get the last object in the array. How do I do this using XPath?I can't do this: I found a solution here on Stack Overflow, but that is a query that just changes the upper limit to get elements. This could return one last item or last item and prevous.What if I want to get only the prevous element like array[-2] in Ruby? <code>  result = node.xpath('.//ROOT/TAG[-1]/KEY_NAME')",How to get the last element of a sequence in XPath?
How do I do an inverse lookup in XPath?," In Ruby we can access an array with negative numbers like array[-1] to get the last object in the array. How do I do this using XPath?I can't do this: I found a solution here on Stack Overflow, but that is a query that just changes the upper limit to get elements. This could return one last item or last item and prevous.What if I want to get only the prevous element like array[-2] in Ruby? <code>  result = node.xpath('.//ROOT/TAG[-1]/KEY_NAME')",How to get the last element of a sequence in XPath?
Index from the end of a collection in XPath," In Ruby we can access an array with negative numbers like array[-1] to get the last object in the array. How do I do this using XPath?I can't do this: I found a solution here on Stack Overflow, but that is a query that just changes the upper limit to get elements. This could return one last item or last item and prevous.What if I want to get only the prevous element like array[-2] in Ruby? <code>  result = node.xpath('.//ROOT/TAG[-1]/KEY_NAME')",How to get the last element of a sequence in XPath?
How to convert method or lambda to non-lambda proc?," As shown in the ruby example below, I can't call a lambda with wrong number of arguments as Proc created from a Method because it is strict about the number of arguments: How do I get a Proc that is not a lambda from either a Proc that is or from a Method? <code>  # method with no argsdef a; endinstance_eval(&method(:a))# ArgumentError: wrong number of arguments (1 for 0)method(:a).to_proc.call(1, 2, 3)# ArgumentError: wrong number of arguments (3 for 0)method(:a).to_proc.lambda?# => true",How to convert method or lambda to non-lambda proc
Looping over attributes of object of a model," The simple way to loop over all attributes of an object when using Active Record is But this doesn't work, when we are not using Active Record. How can I iterate over all the attributes of an object then? For eg -: I have a model in Rails which does not use active record.The object from model order_item can be used in the controller like order_item_object.product_id, order_item_object.quantity, order_item_object.quoted_price. But when I try to order_item_object.attributes.each do |k,v| ...., I get undefined method ""attributes"" for #<Order:0x00000005aa81b0>How should I go about this? <code>  order_item_object.attributes.each do |key,value|....end",Looping over attributes of object of a Non-Active-Record-Model
how to install ruby 2.0.0 correctly on ubuntu 12.04," I have successfully installed rvm, but when I run the following commands Or: I have the following errors: How can I fix these errors? <code>  sudo apt-get update rvm install 2.0.0 W: Failed to fetch http://ppa.launchpad.net/cheleb/blender-svn/ubuntu/dists/precise/main/source/Sources 404 Not FoundW: Failed to fetch http://ppa.launchpad.net/cheleb/blender-svn/ubuntu/dists/precise/main/binary-amd64/Packages 404 Not FoundW: Failed to fetch http://ppa.launchpad.net/cheleb/blender-svn/ubuntu/dists/precise/main/binary-i386/Packages 404 Not FoundW: Failed to fetch http://ppa.launchpad.net/ferramroberto/oneiric/ubuntu/dists/precise/main/source/Sources 404 Not FoundW: Failed to fetch http://ppa.launchpad.net/ferramroberto/oneiric/ubuntu/dists/precise/main/binary-amd64/Packages 404 Not FoundW: Failed to fetch http://ppa.launchpad.net/ferramroberto/oneiric/ubuntu/dists/precise/main/binary-i386/Packages 404 Not Found",How do I install ruby 2.0.0 correctly on Ubuntu 12.04?
Rails Guard half working on Windows," I'm working through Michael Hartl's Rails tutorial which is excellent so far. I'm on the Advanced Setup Chapter, where he goes through configuring the Rails environment in a way conducive to TDD. I installed Guard, and it runs properly all the way through running the tests I have in my spec/ folder. But then, it spits out this error: I have wdm installed. I don't know why it can't load it. It seems like Listen is having problems loading up WDM. It quits after it says ""Guard is now watching...""I haven't reproduced the rest of the stack trace for obvious reasons. I installed Rails using the latest Rails Installer. What's going on here? Do I need to worry about this? It appears to work at least partially... <code>  C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/listen-1.0.2/lib/listen/adapter.rb:195:in `require': cannot load such file -- wdm (LoadError)",Guard won't load WDM
Declaring variables in ruby," When do I know when to declare a variable and not to in Ruby?I would like to know why the first code needs input to be declared as a string and outside of the block, while the second block doesn't. versus: <code>  input = ''while input != 'bye' puts input input = gets.chompendputs 'Come again soon!' while true input = gets.chomp puts input if input == 'bye' break endendputs 'Come again soon!'",Declaring variables in Ruby?
Why Enumerable#find returns an Array even called on an Hash?," The documentation for Enumerable#find/#detect says: find(ifnone = nil) { |obj| block } obj or nil find(ifnone = nil) an_enumerator Passes each entry in enum to block. Returns the first for which block is not false. If no object matches, calls ifnone and returns its result when it is specified, or returns nil otherwise.However, when it is called on the Hash, the result has changed the type to Array instead of the original Hash. Is it some implementation fault or some historical conventions regarding this datatype? <code>  {a: 'a', b:'b'}.find {|k, v| v == 'b'}# => [:b, 'b']",Why does Enumerable#find/#detect return an Array even when called on an Hash?
How to use Link_to," I am a totally newbie in Rails.I have created a web application, I can access through /posts/123/comments/ or /posts/123/comments/new, but i don't know how to use link_to in the index view to show a concrete comment, when i try to link it, appears ""no route"" or ""undefined symbol"".I have a nested have_many relation between posts and comments defined in the models and in the routes.rb and post_comments GET /posts/:post_id/sensors(.:format) comments#index appears when I execute rake routes.How I can do it? <code> ",How to use Link_to with nested resources
Rails/Ruby: How to remove bundler on a mac," I am getting a whole bunch of these errors: On all my versions of Ruby and I want to see if either my gems are messed or if I have to re-install rbenv. I am running Snow Leopard is there a way to uninstall bundler so that I can re-install it I tried the Bundler website and calling bundle -h in the console, no help there.Then I tried bundle implode to which bundle laughed maniacally. I also tried bundle uninstall which didn't work. <code>  bundle exec rake db:migrate/Users/robpaulo/gems/gems/bcrypt-ruby-3.0.1/lib/bcrypt_ext.bundle: [BUG] Segmentation faultruby 1.9.3p327 (2012-11-10 revision 37606) [x86_64-darwin10.8.0]",How to remove bundler on a mac
How to integrate a standalone python script into a Rails application?," I've got a program that has a small file structure going on and is then ran using I want my Rails users to press a button and have this happen for them, with the result either uploaded somewhere or just thrown to them as a download link or something of the sort - the output of do_work.py (say, it's result.txt)I also want to clarify that the script results in the creation on the filesystem of 3 separate files, which are not text files (which shouldn't matter and isn't really the problem here)What is the best way to go about it? Can rake run exec Python? More importantly, is this doable on heroku?I have Python installed on my system but the provided answer by sockmonk doesn't seem to work - it returns nil. Mind you, other commands like ls seem to work.Could it be a permissions problem? Incidentally, trying this in irb: Brings up the Python terminal INSIDE of irb. It will not take params for whatever reason however. <code>  python do_work.py foo bar def index value = %x( python --version ) render :text => valueend %x(python)",How to integrate a standalone Python script into a Rails application?
Do I have to precompile assets every time I adjust Javascript files in Rails 3.2?," I'm trying to learn TDD and BDD and do it the right way. The stack I'm using ( or trying to use, Spork doesn't work with Guard for me) is Minitest-Guard-Spork-Capybara. I am focusing on Unit Tests for models and Specs for integration tests.I have a lot of Ajax in this application. I just did a save_and_open_page on one of my tests and of course the page came up hideous of course, because it couldn't find any of the assets.My question is, if I am to test JS functionality, do I have to precompile assets every single time in order to test them, or is there some way to have the pipeline default to dev mode for testing purposes.I am certain this is a n00b question, but that's where I am with testing. Trying to do things right. <code> ","When testing, do I have to precompile assets every time I adjust Javascript files in Rails 3.2?"
Ruby: Parsing YML into a hash/object," I have a YAML file with a few entries that look like this: I'm using the following Ruby method to parse that YAML file into a set of objects I can iterate over: Now, that method works, but I find it queer that I need to use item[1][:title] to access the attributes of the object I'm iterating over. How can I build my YAML file or my parsing code to allow me to use the more standard item[:title]? <code>  001: :title: Some title :description: Some body text maybe002: :title: Some title :description: Some body text maybe def parse_yaml(file) YAML::load(File.open(File.join(settings.yaml_folder, file)))enddef use_yaml @items = parse_yaml('items.yml') @items.each do |item| x = item[1][:title] etc... endend",How do I parse YAML into a hash/object?
Garbage collector in rails?," I have tried to Google a lot about Rails Garbage collector, but I didn't get a reliable answer. Has anyone got a source to show how garbage collection is implemented in Rails? How can we control it? <code> ",Garbage collector in Ruby on Rails?
how to setup email content type in rubymail?," I am sending email using the Mail gem. Here's my code: I don't know how to set up the content type, so that I can format my email as html for example. Though I actually just wish to be able to define bold text like my email client does: bold text. Does anybody know which content-type I need to specify in order to achieve this, and how to implement it with mail?Just a note, the code above works fine for sending plain text email. <code>  require 'mail'require 'net/smtp'Mail.defaults dodelivery_method :smtp, { :address => ""smtp.arrakis.es"", :port => 587, :domain => 'webmail.arrakis.com', :user_name => 'myname@domain.com', :password => 'pass', :authentication => 'plain', :enable_starttls_auto => true }endMail::ContentTypeField.new(""text/html"") #this doesnt workmsgstr= File.read('text2.txt')list.each do |entity| begin Mail.deliver do from 'myname@domain.com' to ""#{entity}"" subject 'a good subject' body msgstr end rescue => e endendend",How to setup send HTML email with mail gem?
How to setup send HTML emails with mail gem?," I am sending email using the Mail gem. Here's my code: I don't know how to set up the content type, so that I can format my email as html for example. Though I actually just wish to be able to define bold text like my email client does: bold text. Does anybody know which content-type I need to specify in order to achieve this, and how to implement it with mail?Just a note, the code above works fine for sending plain text email. <code>  require 'mail'require 'net/smtp'Mail.defaults dodelivery_method :smtp, { :address => ""smtp.arrakis.es"", :port => 587, :domain => 'webmail.arrakis.com', :user_name => 'myname@domain.com', :password => 'pass', :authentication => 'plain', :enable_starttls_auto => true }endMail::ContentTypeField.new(""text/html"") #this doesnt workmsgstr= File.read('text2.txt')list.each do |entity| begin Mail.deliver do from 'myname@domain.com' to ""#{entity}"" subject 'a good subject' body msgstr end rescue => e endendend",How to setup send HTML email with mail gem?
How to mock aws-skd gem?," I have some code that uploads a file to Amazon S3, using the aws-sdk gem. Apparently it does an HTTP put to upload the file.Is there a good way to mock this functionality of the aws-sdk gem?I tried using Webmock, but the aws-sdk gem seems to do a get latest/meta-data/iam/security-credentials/ first. It seems that using Webmock may not be the best way to mock this functionality.Working in RSpec. <code> ",How to mock aws-sdk gem?
create new Table in ruby on rails," I try to create a new table in rails. Every example I find and try sadly does not work with me...so that's what I tried till now: (I use Ruby version 1.9 and Rails Version 3.2.13making a new model in the terminal: that generated following code: if I try to rake db:migrate i get the following error message: if I remove the "","" I get this error message: my research got me to also to this way of creating a table: if I try to rake the db with that example I get this error message: What do I do wrong?  <code>  rails generate model content content_id:auto-generated, law_id:integer, parent_id:integer, titel:string, text:string, content:string, url:string class CreateContents < ActiveRecord::Migration def change create_table :contents do |t| t.auto-generated, :content_id t.integer, :law_id t.integer, :parent_id t.string, :titel t.string, :text t.string, :content t.string :url t.timestamps end endend syntax error, unexpected ',', expecting keyword_end t.auto-generated, :content_id ^ syntax error, unexpected tSYMBEG, expecting keyword_do or '{' or '(' t.auto-generated :content_id ^ class CreateContents < ActiveRecord::Migration def change create_table :contents do |t| t.auto-generated ""content_id"" t.integer ""law_id"" t.integer ""parent_id"" t.string ""titel"" t.string ""text"" t.string ""content"" t.string ""url"" t.timestamps end endend syntax error, unexpected tSTRING_BEG, expecting keyword_do or '{' or '(' t.auto-generated ""content_id"" ^",Create new Table in ruby on rails
Ruby: Update rails locale yaml file without loosing comments and variables," I'm building a Ruby script that changes the contents of the config/locales/*.yml Rails locales files. These files contain many useful comments and variables.By loading, updating, and dumping them, I loose these comments and variables.How do I programatically update the YAML file while preserving comments and variables? <code> ",How do I update Rails locale YAML file without loosing comments and variables?
"inject with index, brackets"," I try to clean my Code. The first Version uses each_with_index. In the second version I tried to compact the code with the Enumerable.inject_with_index-construct, that I found here.It works now, but seems to me as obscure as the first code.Add even worse I don't understand the brackets around element,index in but they are necessaryWhat is the use of these brackets?How can I make the code clear and readable?FIRST VERSION -- WITH ""each_with_index"" SECOND VERSION -- WITH ""inject"" AND index <code>  .. .inject(groups) do |group_container, (element,index)| class Array # splits as good as possible to groups of same size # elements are sorted. I.e. low elements go to the first group, # and high elements to the last group # # the default for number_of_groups is 4 # because the intended use case is # splitting statistic data in 4 quartiles # # a = [1, 8, 7, 5, 4, 2, 3, 8] # a.sorted_in_groups(3) # => [[1, 2, 3], [4, 5, 7], [8, 8]] # # b = [[7, 8, 9], [4, 5, 7], [2, 8]] # b.sorted_in_groups(2) {|sub_ary| sub_ary.sum } # => [ [[2, 8], [4, 5, 7]], [[7, 8, 9]] ] def sorted_in_groups(number_of_groups = 4) groups = Array.new(number_of_groups) { Array.new } return groups if size == 0 average_group_size = size.to_f / number_of_groups.to_f sorted = block_given? ? self.sort_by {|element| yield(element)} : self.sort sorted.each_with_index do |element, index| group_number = (index.to_f / average_group_size).floor groups[group_number] << element end groups endend class Array def sorted_in_groups(number_of_groups = 4) groups = Array.new(number_of_groups) { Array.new } return groups if size == 0 average_group_size = size.to_f / number_of_groups.to_f sorted = block_given? ? self.sort_by {|element| yield(element)} : self.sort sorted.each_with_index.inject(groups) do |group_container, (element,index)| group_number = (index.to_f / average_group_size).floor group_container[group_number] << element group_container end endend",Ruby inject with index and brackets
"""omniauth-twitter"" callback is not working properly in ruby on rails"," i am using omniauth-twitter gem to enable Twitter login in my rails application. Here is my code ...gemfile - routes.rb - User_controller.rb - session_helper.rb - User.rb model - erb code - Email id is not fetched from twitter. Please help <code>  gem 'omniauth', '~> 1.1.1'gem 'omniauth-twitter' match '/auth/twitter/callback', to: 'users#twitter_login' match 'auth/failure', to: 'static_pages#home' def twitter_login auth = request.env['omniauth.auth'] authentication = Authentication.find_by_provider_and_uid(auth['provider'],auth['uid']) if authentication sign_in authentication.user redirect_to root_url else if(User.where(:email => auth['extra']['raw_info']['email']).exists?) flash[:notice] = ""You already have account in ibetter"" redirect_to root_url else user = User.new user.apply_omniauth(auth) if user.save(:validate => false) sign_in user flash[:notice] = ""Welcome to Ginfy"" redirect_to root_url else flash[:error] = ""Error while creating a user account. Please try again."" redirect_to root_url end end end end def sign_in(user) cookies.permanent[:remember_token] = user.remember_token self.current_user = user end before_save { |user| user.email = email.downcase } def apply_omniauth(auth) self.email = auth['extra']['raw_info']['email'] self.name = auth['extra']['raw_info']['name'] authentications.build(:provider => auth['provider'], :uid => auth['uid'], :token => auth['credentials']['token']) end <%= link_to image_tag(""login-twitter.png"", alt: ""twitter""), ""/auth/twitter"",:class => ""popup"", :""data-width"" => ""600"", :""data-height"" => ""400"" %>","""omniauth-twitter"" email id is not fetched from twitter in ruby on rails"
Nokogiri: remove white space between HTML nodes," I'm trying to remove whitespace from an HTML fragment between <p> tags as you can see, there always is a blank space between the <p> </p> tags.The problem is that the blank spaces create <br> tags when saving the string into my database.Methods like strip or gsub only remove the whitespace in the nodes, resulting in: whereas I'd like to have: I'm using:Nokogiri 1.5.6Ruby 1.9.3Rails UPDATE:Occasionally there are children nodes of the <p>Tags that generate the same problem: white space between Sample CodeNote: the Code normally is in one Line, I reformatted it because it would be unbearable otherwise... How would I strip those white spaces aswell?SOLUTIONIt turns out that I messed up using the gsub method and didn't further investigate the possibility of using gsub with regex...The simple solution was adding It deleted whitespace between all different kinds of nodes... Regex ftw! <code>  <p>Foo Bar</p> <p>bar bar bar</p> <p>bla</p> <p>FooBar</p> <p>barbarbar</p> <p>bla</p> <p>Foo Bar</p><p>bar bar bar</p><p>bla</p> <p> <p> <strong>Selling an Appartment</strong> </p> <ul> <li> <p>beautiful apartment!</p> </li> <li> <p>near the train station</p> </li> . . . </ul> <ul> <li> <p>10 minutes away from a shopping mall </p> </li> <li> <p>nice view</p> </li> </ul> . . .</p> data = data.gsub(/>\s+</, ""><"")",How do I remove white space between HTML nodes?
Why methods from extended module aren't available in class methods?," I thought there were no differences between methods declared within a class << self block and those declared with a self. prefix, but there are: Why are constants of A available in m1 but not in m2? <code>  module A VAR = 'some_constant'endclass B extend A class << self def m1 puts VAR end end def self.m2 puts VAR endendB.m1 # => OKB.m2 # => uninitialized constant B::VAR",Why are constants from extended module not available in class methods declared with self.?
Why are methods from extended module not available in class methods?," I thought there were no differences between methods declared within a class << self block and those declared with a self. prefix, but there are: Why are constants of A available in m1 but not in m2? <code>  module A VAR = 'some_constant'endclass B extend A class << self def m1 puts VAR end end def self.m2 puts VAR endendB.m1 # => OKB.m2 # => uninitialized constant B::VAR",Why are constants from extended module not available in class methods declared with self.?
ruby require_relative gives LoadError: cannot infer basepath," I am currently in I can go into irb and require a file but it's a really long require... I want to use require_relative, as in but I get: <code>  Dropbox/96_2013/work/ror/dmc/dmStaffing/QA/selenium_server_wyatt/spec/2day/units/ require '/home/durrantm/Dropbox/96_2013/work/ror/dmc/dmStaffing/QA/selenium_server_wyatt/spec/2day/units/login_as_admin_spec.rb'=> true $ cd /home/durrantm/Dropbox/96_2013/work/ror/dmc/dmStaffing/QA/selenium_server_wyatt/spec/2day/$ pwd/home/durrantm/Dropbox/96_2013/work/ror/dmc/dmStaffing/QA/selenium_server_wyatt/spec/2day$ irbirb(main):001:0> require_relative 'units/login_as_admin_spec.rb' LoadError: cannot infer basepath",ruby require_relative gives LoadError: cannot infer basepath inside IRB
difference between << and += in ruby syntax," I have been playing around with arrays a bit, and found myself in trouble understanding the following code: What happened with this? Why aren't all the arrays equal to each other? <code>  first_array = []second_array = []third_array = [] # I initialized 3 empty arraysthird_array << [1,2,3,4,5,6,7,8,9] # I loaded 1..9 into third_array[0]puts third_array.size # => 1first_array << third_array # 1..9 was loaded into first_array[0]second_array += third_array # 1..9 was loaded into second_array[0]puts first_array == third_array # falseputs second_array == third_array # trueputs first_array == second_array # falseputs first_array.size # 1puts second_array.size # 1puts third_array.size # 1 second_array += third_array # I have no clue",What is the difference between << and +=?
How to pass white space from cucumber table?," I try to pass white space character in my test.So I try the following in my cucumber step I get {""company_name""=>"""", ""phone""=>""\#{nil}""} I get {""company_name""=>"""", ""phone""=>""""} I get {""company_name""=>""\\s"", ""phone""=>""\nil""} I get {""company_name""=>""\"" \"""", ""phone""=>""' '""}What I should put in the table to get the following hash {""company_name""=>"" "", ""phone""=>"" ""} ? <code>  If I enter:|company_name|phone|||#{nil}| |company_name|phone|| | | |company_name|phone||\s|\nil| |company_name|phone||"" ""|' '|",How to get white space or nil object from cucumber table?
Post JSON via HTTP in Ruby (after conversion from Python)," I yield - I've tried for hours to crack this nut but can't figure it out. I'm too new to Ruby (and have no Python background!) to translate this and then post my JSON data to a site that requires user/pass, and then get the response data.This is the Python code: where data is: I'm trying to replicate the functionality of this code in Ruby for use with a Rails application, but between figuring out how the Python requests.post() function operates and then writing the Ruby code for POST and GET, I've become totally lost.I tried Net::HTTP but I'm not clear if I should be putting the username/pass in the body or use the basic_auth method -- basic_auth seems to only work inside Net::HTTP.get ... and Net::HTTP doesn't seem to easily handle JSON, but again, I could be totally out to lunch at this point.Any suggestions or help would be greatly appreciated! <code>  r = requests.post('https://keychain.oneid.com/validate/', json.dumps(data), auth=('username', 'password'))r.json() {""some"" => ""data"", ""fun"" => ""times""}",How do I post JSON via HTTP in Ruby after conversion from Python?
"With Nokogiri, how do you wrap the text contents of an element with a new tag?"," I have a Nokogiri::XML::Element in which looks like this: What I want to do is just extract the text from the div (which is the Nokogiri Element) and then wrap the text with a new tag so it looks like this: The Nokogiri .wrap functions seems to wrap tags, not their text contents with a new tag, I was wondering how you wrap the inter tag contents. <code>  <div class=""berg"">This is some text!</div> <div class=""berg""><span>This is some text!</span></div>",How can I wrap the text contents of an element with a new tag?
Can't get autogenerated Ruby DevKit configuration file," I've installed Ruby 2.0 with a Windows Ruby Installer, Unpacked DevKit (DevKit-mingw64-64-4.7.2-20130224-1432-sfx.exe) to Program Files and ran but the generated config.yml file doesn't list my Ruby path. Its contents looks as follows: How to make dk.rb to generate valid config.yml? <code>  ruby dk.rb init # This configuration file contains the absolute path locations of all# installed Rubies to be enhanced to work with the DevKit. This config# file is generated by the 'ruby dk.rb init' step and may be modified# before running the 'ruby dk.rb install' step. To include any installed# Rubies that were not automagically discovered, simply add a line below# the triple hyphens with the absolute path to the Ruby root directory.## Example:## ---# - C:/ruby19trunk# - C:/ruby192dev#---",Can't get Ruby DevKit configuration file autogenerated properly
Ruby fetch vs. array index?, From Ruby Koans about_hashes.rb:Why might you want to use #fetch instead of #[] when accessing hash keys? <code> ,fetch vs. [] when working with hashes?
How do functions use hash arguments in Ruby?," I saw hash arguments used in some library methods as I've been learning. E.g., Can someone explain how a method uses arguments like this, and how you could create a method that makes use of Hash arguments? <code>  list.search(:titles, genre: 'jazz', duration_less_than: 270)",How do methods use hash arguments in Ruby?
How is the __LINE__ constants implemented in Ruby?," It seems the __FILE__ and __LINE__ constants are dynamically updated with the current file and line numbers under execution, I am wondering how is the behaviour implemented in Ruby?I've greped the source code but there are too many noises for __LINE__ and __FILE__ appearance, I am wonder anyone could help me point to the source code and provide a clue to understand its behaviour. Explanation in either Rubinis or MRI will be fine. <code> ",How is the __LINE__ and __FILE__ constants implemented in Ruby?
Ruby's new lambda syntax works in rails?," Ruby has lambda syntax, so I can use the -> symbol: This works very well, but when I try to do this: all of the return the same syntax error: Am I missing something? <code>  a = 0new -> { a < 5 } do puts a a += 1end match ""/"", to: -> { |e| [404, {}, [""Hello! I am micro rack app""]] }, via: [:get]match( ""/"", to: -> { |e| [404, {}, [""Hello! I am micro rack app""]] }, via: [:get] )match( ""/"", { to: -> { |e| [404, {}, [""Hello! I am micro rack app""]] }, via: [:get] }) $ ruby -c -e 'match( ""/"", to: -> { |e| [404, {}, [""Hello! I am micro rack app""]] }, via: [:get] )'-e:1: syntax error, unexpected '|'match( ""/"", to: -> { |e| [404, {}, [""Hello! I am mi...",How do I use Ruby's new lambda syntax?
Ruby's new lambda syntax?," Ruby has lambda syntax, so I can use the -> symbol: This works very well, but when I try to do this: all of the return the same syntax error: Am I missing something? <code>  a = 0new -> { a < 5 } do puts a a += 1end match ""/"", to: -> { |e| [404, {}, [""Hello! I am micro rack app""]] }, via: [:get]match( ""/"", to: -> { |e| [404, {}, [""Hello! I am micro rack app""]] }, via: [:get] )match( ""/"", { to: -> { |e| [404, {}, [""Hello! I am micro rack app""]] }, via: [:get] }) $ ruby -c -e 'match( ""/"", to: -> { |e| [404, {}, [""Hello! I am micro rack app""]] }, via: [:get] )'-e:1: syntax error, unexpected '|'match( ""/"", to: -> { |e| [404, {}, [""Hello! I am mi...",How do I use Ruby's new lambda syntax?
Why is splat argument in ruby not used all the time, I know splat arguments are used when we do not know the number of arguments that would be passed. I wanted to know whether I should use splat all the time. Are there any risks in using the splat argument whenever I pass on arguments? <code> ,Why is splat argument in ruby not used all the time?
What does the question mark (?) operator in ruby?," I saw this operator in HAML code. I wonder what it is for.I see the following works: And this doesn't work: So I suppose that it takes a character a argument and returns a string with that character.questions:What does this operator do?When should one use it?If it really only creates a one-character string, why was it included in the language? Doesn't it break the language orthogonality? What is the benefit? <code>  > ?{=> ""{"" > ?\s=> "" "" > ?a=> ""a"" > ?abSyntaxError: (irb):4: syntax error, unexpected '?'",What does the unary question mark (?) operator do?
What does the question mark (?) operator do?," I saw this operator in HAML code. I wonder what it is for.I see the following works: And this doesn't work: So I suppose that it takes a character a argument and returns a string with that character.questions:What does this operator do?When should one use it?If it really only creates a one-character string, why was it included in the language? Doesn't it break the language orthogonality? What is the benefit? <code>  > ?{=> ""{"" > ?\s=> "" "" > ?a=> ""a"" > ?abSyntaxError: (irb):4: syntax error, unexpected '?'",What does the unary question mark (?) operator do?
Conditional image resizing with carrierwave," I need to create different versions of uploaded image conditionally. I know Carrierwave supports this feature. But my requirements are a bit tricky.For each uploaded image I need to create 2 versions and need to scale the original image based on conditions.Below code will give you better idea what I am trying to do: Apparently this is not working. Carrierwave throws this error:Errno::ENOENT - No such file or directory - #<ActionDispatch::Http::UploadedFile:0xe41d508>And I tried another variation: This doesn't throw any error. But it always generates the image in retina size (1st condition)So I tried one more variation: This doesnt throw any error and also not created any version.Can someone help me out?Update:Based on the suggestion by @DMKE, I made this changes, now it works fine <code>  version :leftright, :if => :image? do process :resize_to_fill => [667*2, 778*2] ,:if => :is_retina_resolution? process :resize_to_fill => [667, 778] ,:if => !:is_retina_resolution?endversion :updown, :if => :image? do process :resize_to_fill => [1024*2, 487*2] ,:if => :is_retina_resolution? process :resize_to_fill => [1024, 487] ,:if => !:is_retina_resolution?end#resize the original imageprocess :resize_to_fill => [1024*2, 768*2] ,:if => :is_retina_resolution?process :resize_to_fill => [1024, 768] ,:if => !:is_retina_resolution?def is_retina_resolution?(new_file) image = MiniMagick::Image.open(new_file.file) true if image[:height] >= 1536 and image[:width] >= 2048end version :leftright, :if => :image? do if :is_retina_resolution? process :resize_to_fill => [667*2, 778*2] else process :resize_to_fill => [667, 778] endendversion :updown, :if => :image? do if :is_retina_resolution? process :resize_to_fill => [1024*2, 487*2] else process :resize_to_fill => [1024, 487] endenddef is_retina_resolution?(new_file) image = MiniMagick::Image.open(new_file) true if image[:height] >= 1536 and image[:width] >= 2048end version :leftright, :if => :image? && :is_retina_resolution do process :resize_to_fill => [667*2, 778*2] endversion :leftright, :if => :image? && !:is_retina_resolution do process :resize_to_fill => [667, 778] endversion :updown, :if => :image? && :is_retina_resolution do process :resize_to_fill => [1024*2, 487*2] endversion :updown, :if => :image? && !:is_retina_resolution do process :resize_to_fill => [1024, 487] end version :leftright, :if => :image? do process :resize_to_fill => [667*2, 778*2] ,:if => :is_retina_resolution? process :resize_to_fill => [667, 778] ,:if => :is_not_retina_resolution?endversion :updown, :if => :image? do process :resize_to_fill => [1024*2, 487*2] ,:if => :is_retina_resolution? process :resize_to_fill => [1024, 487] ,:if => :is_not_retina_resolution? end#resize the original imageprocess :resize_to_fill => [1024*2, 768*2] ,:if => :image_and_retina?process :resize_to_fill => [1024, 768] ,:if => :image_and_not_retina?process :if => :not_image?def image_and_retina?(img) is_img = image? img return false unless is_img return is_retina_resolution?(img)enddef image_and_not_retina?(img) is_img = image? img return false unless is_img return !is_retina_resolution?(img)end# returns true if image filedef image?(new_file) self.file.content_type.include? 'image'enddef not_image?(new_file) !self.file.content_type.include? 'image'enddef is_retina_resolution?(new_file) image = MiniMagick::Image.open(self.file.file) true if image[:height] >= 1536 and image[:width] >= 2048enddef is_not_retina_resolution?(new_file) image = MiniMagick::Image.open(self.file.file) true if image[:height] < 1536 and image[:width] < 2048end",Conditional image resizing with Carrierwave
Rails: Conditional image resizing with Carrierwave," I need to create different versions of uploaded image conditionally. I know Carrierwave supports this feature. But my requirements are a bit tricky.For each uploaded image I need to create 2 versions and need to scale the original image based on conditions.Below code will give you better idea what I am trying to do: Apparently this is not working. Carrierwave throws this error:Errno::ENOENT - No such file or directory - #<ActionDispatch::Http::UploadedFile:0xe41d508>And I tried another variation: This doesn't throw any error. But it always generates the image in retina size (1st condition)So I tried one more variation: This doesnt throw any error and also not created any version.Can someone help me out?Update:Based on the suggestion by @DMKE, I made this changes, now it works fine <code>  version :leftright, :if => :image? do process :resize_to_fill => [667*2, 778*2] ,:if => :is_retina_resolution? process :resize_to_fill => [667, 778] ,:if => !:is_retina_resolution?endversion :updown, :if => :image? do process :resize_to_fill => [1024*2, 487*2] ,:if => :is_retina_resolution? process :resize_to_fill => [1024, 487] ,:if => !:is_retina_resolution?end#resize the original imageprocess :resize_to_fill => [1024*2, 768*2] ,:if => :is_retina_resolution?process :resize_to_fill => [1024, 768] ,:if => !:is_retina_resolution?def is_retina_resolution?(new_file) image = MiniMagick::Image.open(new_file.file) true if image[:height] >= 1536 and image[:width] >= 2048end version :leftright, :if => :image? do if :is_retina_resolution? process :resize_to_fill => [667*2, 778*2] else process :resize_to_fill => [667, 778] endendversion :updown, :if => :image? do if :is_retina_resolution? process :resize_to_fill => [1024*2, 487*2] else process :resize_to_fill => [1024, 487] endenddef is_retina_resolution?(new_file) image = MiniMagick::Image.open(new_file) true if image[:height] >= 1536 and image[:width] >= 2048end version :leftright, :if => :image? && :is_retina_resolution do process :resize_to_fill => [667*2, 778*2] endversion :leftright, :if => :image? && !:is_retina_resolution do process :resize_to_fill => [667, 778] endversion :updown, :if => :image? && :is_retina_resolution do process :resize_to_fill => [1024*2, 487*2] endversion :updown, :if => :image? && !:is_retina_resolution do process :resize_to_fill => [1024, 487] end version :leftright, :if => :image? do process :resize_to_fill => [667*2, 778*2] ,:if => :is_retina_resolution? process :resize_to_fill => [667, 778] ,:if => :is_not_retina_resolution?endversion :updown, :if => :image? do process :resize_to_fill => [1024*2, 487*2] ,:if => :is_retina_resolution? process :resize_to_fill => [1024, 487] ,:if => :is_not_retina_resolution? end#resize the original imageprocess :resize_to_fill => [1024*2, 768*2] ,:if => :image_and_retina?process :resize_to_fill => [1024, 768] ,:if => :image_and_not_retina?process :if => :not_image?def image_and_retina?(img) is_img = image? img return false unless is_img return is_retina_resolution?(img)enddef image_and_not_retina?(img) is_img = image? img return false unless is_img return !is_retina_resolution?(img)end# returns true if image filedef image?(new_file) self.file.content_type.include? 'image'enddef not_image?(new_file) !self.file.content_type.include? 'image'enddef is_retina_resolution?(new_file) image = MiniMagick::Image.open(self.file.file) true if image[:height] >= 1536 and image[:width] >= 2048enddef is_not_retina_resolution?(new_file) image = MiniMagick::Image.open(self.file.file) true if image[:height] < 1536 and image[:width] < 2048end",Conditional image resizing with Carrierwave
Ruby: Intermingling attr_accessor and an initialize method in one class.," I see code like: I understand this allows me to do things like person = Person.new and to use @name elsewhere in my class like other methods. Then, I saw code like: I'm just at a loss with these two methods mesh. What are the particular uses of def initialize(name)? I suppose attr_accessor allows me to read and write. That implies they are two separate methods. Yes? Want clarifications on def initialize and attr_accessor and how they mesh. <code>  class Person def initialize(name) @name = name endend class Person attr_accessor :nameend...person = Person.newperson.name = ""David""",Intermingling attr_accessor and an initialize method in one class
Ruby on rails - paperclip - nomethoderror," I'm trying to make a create product page in rails. This includes adding multiple images. I have one model for products one for photos and for users. I'm using the paperclip gem for photo upload. But I have 2 problems.My file input is not allowing me to select multiple imagesWhen I view a product no pictures show because pictures are not being saved to databaseP.S. I use HAML and I dont have a photo controller.Products controller create product page product model photo model User Model show product page <code>  class ProductsController < ApplicationController before_filter :current_user, only: [:create, :destory] before_filter :correct_user, only: :destory def new @product = Product.new @photo = Photo.new 5.times { @product.photos.build } end def create @photo = current_user.photos.build(params[:photo]) @product = current_user.products.build(params[:product]) if @product.save render ""show"", :notice => ""Sale created!"" else render ""new"", :notice => ""Somehting went wrong!"" endenddef show@product = Product.find(params[:id]) end = form_for @product, :html => { :multipart => true } do |f| - if @product.errors.any? .error_messages %h2 Form is invalid %ul - for message in @product.errors.full_messages %li = message %p = f.label :name = f.text_field :name %p = fields_for :photos do |f_i| =f_i.file_field :image %p.button = f.submit class Product < ActiveRecord::Base attr_accessible :description, :name, :price, :condition, :ship_method, :ship_price, :quantity, :photo has_many :photos, dependent: :destroy accepts_nested_attributes_for :photos belongs_to :user class Photo < ActiveRecord::Base attr_accessible :product_id belongs_to :product has_attached_file :image, :styles => { :thumb=> ""100x100#"", :small => ""300x300>"", :large => ""600x600>"" }end class User < ActiveRecord::Base attr_accessible :email, :password, :password_confirmation, :name attr_accessor :password has_many :products, dependent: :destroy has_many :photos,:through=>:products %b seller = @product.user.name %br - @product.photos.each do |photo| = image_tag photo.image.url",Ruby on rails - paperclip not saving to database
(Ruby) How to return true if only one specific key in a hash has a true value (all the other values are false)," For instance: I want a boolean expression that evaluates to true iff only :fight is true, and the rest are false (as illustrated above).I can hack this together, but I'm trying to train myself to write more elegant ruby. Thanks!EDIT: The hack being:(options[:fight] == true && options.delete(:fight).values.all {|x| !x}) <code>  options = { fight: true, use_item: false, run_away: false, save_game: false }",How to return true if only one specific key in a hash has a true value (all the other values are false)
ruby optionparser require arguments," The code below works, but I am manually raising argument errors for the required arguments using fetch, when I want to build the required arguments into the native OptionParser sytax for required parameters: <code>  # ocra script.rb -- --type=valueoptions = {}OptionParser.new do |opts| opts.banner = ""Usage: example.rb [options]"" opts.on(""--type [TYPE]"",String, [:gl, :time], ""Select Exception file type (gl, time)"") do |t| options[""type""] = t end opts.on(""--company [TYPE]"",String, [:jaxon, :doric], ""Select Company (jaxon, doric)"") do |t| options[""company""] = t endend.parse!opts = {}opts['type'] = options.fetch('type') do raise ArgumentError,""no 'type' option specified as a parameter (gl or time)""endopts['company'] = options.fetch('company') do raise ArgumentError,""no 'company' option specified as a parameter (doric or jaxon)""end",How to generate OptionParser require arguments
Opposite of string.next in Ruby?," Is there a method in Ruby that does the opposite String#succ? If you run succ or next you get this: I want the opposite: Is this possible? I was having a hard time finding this in the Ruby docs. Maybe it doesn't exist? <code>  a = ""4.4.10""a.succ=> ""4.4.11"" a = ""4.4.10""a.previous=> ""4.4.09""",What is the opposite of string.next?
How do I tell bundler to ignore gems that don't exist?," My organization has a number of in-house gems that are used in automated testing, but are not required for a production deployment. I am trying to use Bundler and so in my Gemfile I've wrapped those gems in: However, when I run: I still get I'm trying to understand why Bundler isn't ignoring that gem when I've told it to. <code>  group :test, :development do gem 'dashboard_summary'end $ bundle install --without staging development test Could not find gem 'dashboard_summary (>= 0) ruby' in the gems available on this machine.",How to tell bundler to ignore gems that don't exist?
Run commands as root from rails," I'm thinking about writing a Rails application to manage servers like cPanel. The hardest part is to select the best way to run commands that require root privileges, like adduser, or doing things that require another user's privileges, like changing nginx config files. I know only two ways to achieve this:I can write a standalone daemon that will be run as root and do all the work, receiving commands through IPC or something like this.Run Rail's server as the root user, and do anything from it or execute commands/bash scripts from it.Which of these ways are best? Does there exist another way to to this? <code> ",How do I run commands as root from Rails?
"Pusher in rails app: ""Unknown auth_key"" - server side not triggering events"," I am trying to insert Pusher into my already quite late stage Rails app. The client side works fine - using the Pusher Event Creator triggers the desired javascript. The server side is not working however:Using the following code in my notifications controller create action to test: Gives this error: (and nothing new appears in the Debug Console)I am running this in the development environment. I've tested the 'pusher/notify' sample app on my system and that works fine, both client and server.in development.rb: Update - full log output: <code>  Pusher.trigger('private-4','new_message', {:from => ""christian"", :subject => ""hello""}) Pusher::AuthenticationError (Unknown auth_key): app/controllers/notifications_controller.rb:57:in `block in create' app/controllers/notifications_controller.rb:38:in `create' # Pusher require 'pusher' Pusher.app_id = '{redacted}' Pusher.key = '{redacted}' Pusher.secret = '{redacted}' Pusher.logger = Rails.logger Unknown auth_key (Pusher::AuthenticationError)/usr/local/rvm/gems/ruby-1.9.3-p392@rails3tutorial2ndEd/gems/pusher-0.11.3/lib/pusher/request.rb:99:in `handle_response'/usr/local/rvm/gems/ruby-1.9.3-p392@rails3tutorial2ndEd/gems/pusher-0.11.3/lib/pusher/request.rb:52:in `send_sync'/usr/local/rvm/gems/ruby-1.9.3-p392@rails3tutorial2ndEd/gems/pusher-0.11.3/lib/pusher/resource.rb:18:in `post'/usr/local/rvm/gems/ruby-1.9.3-p392@rails3tutorial2ndEd/gems/pusher-0.11.3/lib/pusher/client.rb:134:in `post'/usr/local/rvm/gems/ruby-1.9.3-p392@rails3tutorial2ndEd/gems/pusher-0.11.3/lib/pusher/client.rb:216:in `trigger'/usr/local/rvm/gems/ruby-1.9.3-p392@rails3tutorial2ndEd/gems/pusher-0.11.3/lib/pusher/channel.rb:59:in `trigger!'/usr/local/rvm/gems/ruby-1.9.3-p392@rails3tutorial2ndEd/gems/pusher-0.11.3/lib/pusher/channel.rb:71:in `trigger'/Users/christian/Sites/casenexus/app/controllers/notifications_controller.rb:60:in `block in create'/usr/local/rvm/gems/ruby-1.9.3-p392@rails3tutorial2ndEd/gems/actionpack-3.2.8/lib/action_controller/metal/mime_responds.rb:270:in `call'/usr/local/rvm/gems/ruby-1.9.3-p392@rails3tutorial2ndEd/gems/actionpack-3.2.8/lib/action_controller/metal/mime_responds.rb:270:in `retrieve_collector_from_mimes'/usr/local/rvm/gems/ruby-1.9.3-p392@rails3tutorial2ndEd/gems/actionpack-3.2.8/lib/action_controller/metal/mime_responds.rb:194:in `respond_to'/Users/christian/Sites/casenexus/app/controllers/notifications_controller.rb:40:in `create'/usr/local/rvm/gems/ruby-1.9.3-p392@rails3tutorial2ndEd/gems/actionpack-3.2.8/lib/action_controller/metal/implicit_render.rb:4:in `send_action'/usr/local/rvm/gems/ruby-1.9.3-p392@rails3tutorial2ndEd/gems/actionpack-3.2.8/lib/abstract_controller/base.rb:167:in `process_action'/usr/local/rvm/gems/ruby-1.9.3-p392@rails3tutorial2ndEd/gems/actionpack-3.2.8/lib/action_controller/metal/rendering.rb:10:in `process_action'/usr/local/rvm/gems/ruby-1.9.3-p392@rails3tutorial2ndEd/gems/actionpack-3.2.8/lib/abstract_controller/callbacks.rb:18:in `block in process_action'/usr/local/rvm/gems/ruby-1.9.3-p392@rails3tutorial2ndEd/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:447:in `_run__2723577406764024271__process_action__2755147847840742796__callbacks'/usr/local/rvm/gems/ruby-1.9.3-p392@rails3tutorial2ndEd/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:405:in `__run_callback'/usr/local/rvm/gems/ruby-1.9.3-p392@rails3tutorial2ndEd/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:385:in `_run_process_action_callbacks'/usr/local/rvm/gems/ruby-1.9.3-p392@rails3tutorial2ndEd/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:81:in `run_callbacks'/usr/local/rvm/gems/ruby-1.9.3-p392@rails3tutorial2ndEd/gems/actionpack-3.2.8/lib/abstract_controller/callbacks.rb:17:in `process_action'/usr/local/rvm/gems/ruby-1.9.3-p392@rails3tutorial2ndEd/gems/actionpack-3.2.8/lib/action_controller/metal/rescue.rb:29:in `process_action'/usr/local/rvm/gems/ruby-1.9.3-p392@rails3tutorial2ndEd/gems/actionpack-3.2.8/lib/action_controller/metal/instrumentation.rb:30:in `block in process_action'/usr/local/rvm/gems/ruby-1.9.3-p392@rails3tutorial2ndEd/gems/activesupport-3.2.8/lib/active_support/notifications.rb:123:in `block in instrument'/usr/local/rvm/gems/ruby-1.9.3-p392@rails3tutorial2ndEd/gems/activesupport-3.2.8/lib/active_support/notifications/instrumenter.rb:20:in `instrument'/usr/local/rvm/gems/ruby-1.9.3-p392@rails3tutorial2ndEd/gems/activesupport-3.2.8/lib/active_support/notifications.rb:123:in `instrument'/usr/local/rvm/gems/ruby-1.9.3-p392@rails3tutorial2ndEd/gems/actionpack-3.2.8/lib/action_controller/metal/instrumentation.rb:29:in `process_action'/usr/local/rvm/gems/ruby-1.9.3-p392@rails3tutorial2ndEd/gems/actionpack-3.2.8/lib/action_controller/metal/params_wrapper.rb:207:in `process_action'/usr/local/rvm/gems/ruby-1.9.3-p392@rails3tutorial2ndEd/gems/activerecord-3.2.8/lib/active_record/railties/controller_runtime.rb:18:in `process_action'/usr/local/rvm/gems/ruby-1.9.3-p392@rails3tutorial2ndEd/gems/newrelic_rpm-3.6.1.87/lib/new_relic/agent/instrumentation/rails3/action_controller.rb:38:in `block in process_action'/usr/local/rvm/gems/ruby-1.9.3-p392@rails3tutorial2ndEd/gems/newrelic_rpm-3.6.1.87/lib/new_relic/agent/instrumentation/controller_instrumentation.rb:318:in `perform_action_with_newrelic_trace'/usr/local/rvm/gems/ruby-1.9.3-p392@rails3tutorial2ndEd/gems/newrelic_rpm-3.6.1.87/lib/new_relic/agent/instrumentation/rails3/action_controller.rb:37:in `process_action'/usr/local/rvm/gems/ruby-1.9.3-p392@rails3tutorial2ndEd/gems/actionpack-3.2.8/lib/abstract_controller/base.rb:121:in `process'/usr/local/rvm/gems/ruby-1.9.3-p392@rails3tutorial2ndEd/gems/actionpack-3.2.8/lib/abstract_controller/rendering.rb:45:in `process'/usr/local/rvm/gems/ruby-1.9.3-p392@rails3tutorial2ndEd/gems/actionpack-3.2.8/lib/action_controller/metal.rb:203:in `dispatch'/usr/local/rvm/gems/ruby-1.9.3-p392@rails3tutorial2ndEd/gems/actionpack-3.2.8/lib/action_controller/metal/rack_delegation.rb:14:in `dispatch'/usr/local/rvm/gems/ruby-1.9.3-p392@rails3tutorial2ndEd/gems/actionpack-3.2.8/lib/action_controller/metal.rb:246:in `block in action'/usr/local/rvm/gems/ruby-1.9.3-p392@rails3tutorial2ndEd/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:73:in `call'/usr/local/rvm/gems/ruby-1.9.3-p392@rails3tutorial2ndEd/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:73:in `dispatch'/usr/local/rvm/gems/ruby-1.9.3-p392@rails3tutorial2ndEd/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:36:in `call'/usr/local/rvm/gems/ruby-1.9.3-p392@rails3tutorial2ndEd/gems/journey-1.0.4/lib/journey/router.rb:68:in `block in call'/usr/local/rvm/gems/ruby-1.9.3-p392@rails3tutorial2ndEd/gems/journey-1.0.4/lib/journey/router.rb:56:in `each'/usr/local/rvm/gems/ruby-1.9.3-p392@rails3tutorial2ndEd/gems/journey-1.0.4/lib/journey/router.rb:56:in `call'/usr/local/rvm/gems/ruby-1.9.3-p392@rails3tutorial2ndEd/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:600:in `call'/usr/local/rvm/gems/ruby-1.9.3-p392@rails3tutorial2ndEd/gems/omniauth-1.1.4/lib/omniauth/strategy.rb:184:in `call!'/usr/local/rvm/gems/ruby-1.9.3-p392@rails3tutorial2ndEd/gems/omniauth-1.1.4/lib/omniauth/strategy.rb:164:in `call'/usr/local/rvm/gems/ruby-1.9.3-p392@rails3tutorial2ndEd/gems/newrelic_rpm-3.6.1.87/lib/new_relic/rack/error_collector.rb:12:in `call'/usr/local/rvm/gems/ruby-1.9.3-p392@rails3tutorial2ndEd/gems/newrelic_rpm-3.6.1.87/lib/new_relic/rack/agent_hooks.rb:18:in `call'/usr/local/rvm/gems/ruby-1.9.3-p392@rails3tutorial2ndEd/gems/newrelic_rpm-3.6.1.87/lib/new_relic/rack/browser_monitoring.rb:16:in `call'/usr/local/rvm/gems/ruby-1.9.3-p392@rails3tutorial2ndEd/gems/newrelic_rpm-3.6.1.87/lib/new_relic/rack/developer_mode.rb:28:in `call'/usr/local/rvm/gems/ruby-1.9.3-p392@rails3tutorial2ndEd/gems/warden-1.2.1/lib/warden/manager.rb:35:in `block in call'/usr/local/rvm/gems/ruby-1.9.3-p392@rails3tutorial2ndEd/gems/warden-1.2.1/lib/warden/manager.rb:34:in `catch'/usr/local/rvm/gems/ruby-1.9.3-p392@rails3tutorial2ndEd/gems/warden-1.2.1/lib/warden/manager.rb:34:in `call'/usr/local/rvm/gems/ruby-1.9.3-p392@rails3tutorial2ndEd/gems/actionpack-3.2.8/lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'/usr/local/rvm/gems/ruby-1.9.3-p392@rails3tutorial2ndEd/gems/rack-1.4.5/lib/rack/etag.rb:23:in `call'/usr/local/rvm/gems/ruby-1.9.3-p392@rails3tutorial2ndEd/gems/rack-1.4.5/lib/rack/conditionalget.rb:35:in `call'/usr/local/rvm/gems/ruby-1.9.3-p392@rails3tutorial2ndEd/gems/actionpack-3.2.8/lib/action_dispatch/middleware/head.rb:14:in `call'/usr/local/rvm/gems/ruby-1.9.3-p392@rails3tutorial2ndEd/gems/actionpack-3.2.8/lib/action_dispatch/middleware/params_parser.rb:21:in `call'/usr/local/rvm/gems/ruby-1.9.3-p392@rails3tutorial2ndEd/gems/actionpack-3.2.8/lib/action_dispatch/middleware/flash.rb:242:in `call'/usr/local/rvm/gems/ruby-1.9.3-p392@rails3tutorial2ndEd/gems/rack-1.4.5/lib/rack/session/abstract/id.rb:210:in `context'/usr/local/rvm/gems/ruby-1.9.3-p392@rails3tutorial2ndEd/gems/rack-1.4.5/lib/rack/session/abstract/id.rb:205:in `call'/usr/local/rvm/gems/ruby-1.9.3-p392@rails3tutorial2ndEd/gems/actionpack-3.2.8/lib/action_dispatch/middleware/cookies.rb:339:in `call'/usr/local/rvm/gems/ruby-1.9.3-p392@rails3tutorial2ndEd/gems/activerecord-3.2.8/lib/active_record/query_cache.rb:64:in `call'/usr/local/rvm/gems/ruby-1.9.3-p392@rails3tutorial2ndEd/gems/activerecord-3.2.8/lib/active_record/connection_adapters/abstract/connection_pool.rb:473:in `call'/usr/local/rvm/gems/ruby-1.9.3-p392@rails3tutorial2ndEd/gems/actionpack-3.2.8/lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'/usr/local/rvm/gems/ruby-1.9.3-p392@rails3tutorial2ndEd/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:405:in `_run__2979100583981751168__call__3555748325778021510__callbacks'/usr/local/rvm/gems/ruby-1.9.3-p392@rails3tutorial2ndEd/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:405:in `__run_callback'/usr/local/rvm/gems/ruby-1.9.3-p392@rails3tutorial2ndEd/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:385:in `_run_call_callbacks'/usr/local/rvm/gems/ruby-1.9.3-p392@rails3tutorial2ndEd/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:81:in `run_callbacks'/usr/local/rvm/gems/ruby-1.9.3-p392@rails3tutorial2ndEd/gems/actionpack-3.2.8/lib/action_dispatch/middleware/callbacks.rb:27:in `call'/usr/local/rvm/gems/ruby-1.9.3-p392@rails3tutorial2ndEd/gems/actionpack-3.2.8/lib/action_dispatch/middleware/reloader.rb:65:in `call'/usr/local/rvm/gems/ruby-1.9.3-p392@rails3tutorial2ndEd/gems/actionpack-3.2.8/lib/action_dispatch/middleware/remote_ip.rb:31:in `call'/usr/local/rvm/gems/ruby-1.9.3-p392@rails3tutorial2ndEd/gems/actionpack-3.2.8/lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'/usr/local/rvm/gems/ruby-1.9.3-p392@rails3tutorial2ndEd/gems/actionpack-3.2.8/lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'/usr/local/rvm/gems/ruby-1.9.3-p392@rails3tutorial2ndEd/gems/railties-3.2.8/lib/rails/rack/logger.rb:26:in `call_app'/usr/local/rvm/gems/ruby-1.9.3-p392@rails3tutorial2ndEd/gems/railties-3.2.8/lib/rails/rack/logger.rb:16:in `call'/usr/local/rvm/gems/ruby-1.9.3-p392@rails3tutorial2ndEd/gems/actionpack-3.2.8/lib/action_dispatch/middleware/request_id.rb:22:in `call'/usr/local/rvm/gems/ruby-1.9.3-p392@rails3tutorial2ndEd/gems/rack-1.4.5/lib/rack/methodoverride.rb:21:in `call'/usr/local/rvm/gems/ruby-1.9.3-p392@rails3tutorial2ndEd/gems/rack-1.4.5/lib/rack/runtime.rb:17:in `call'/usr/local/rvm/gems/ruby-1.9.3-p392@rails3tutorial2ndEd/gems/activesupport-3.2.8/lib/active_support/cache/strategy/local_cache.rb:72:in `call'/usr/local/rvm/gems/ruby-1.9.3-p392@rails3tutorial2ndEd/gems/rack-1.4.5/lib/rack/lock.rb:15:in `call'/usr/local/rvm/gems/ruby-1.9.3-p392@rails3tutorial2ndEd/gems/actionpack-3.2.8/lib/action_dispatch/middleware/static.rb:62:in `call'/usr/local/rvm/gems/ruby-1.9.3-p392@rails3tutorial2ndEd/gems/railties-3.2.8/lib/rails/engine.rb:479:in `call'/usr/local/rvm/gems/ruby-1.9.3-p392@rails3tutorial2ndEd/gems/railties-3.2.8/lib/rails/application.rb:223:in `call'/usr/local/rvm/gems/ruby-1.9.3-p392@rails3tutorial2ndEd/gems/rack-1.4.5/lib/rack/content_length.rb:14:in `call'/usr/local/rvm/gems/ruby-1.9.3-p392@rails3tutorial2ndEd/gems/railties-3.2.8/lib/rails/rack/log_tailer.rb:17:in `call'/usr/local/rvm/gems/ruby-1.9.3-p392@rails3tutorial2ndEd/gems/rack-1.4.5/lib/rack/handler/webrick.rb:59:in `service'/usr/local/rvm/rubies/ruby-1.9.3-p392/lib/ruby/1.9.1/webrick/httpserver.rb:138:in `service'/usr/local/rvm/rubies/ruby-1.9.3-p392/lib/ruby/1.9.1/webrick/httpserver.rb:94:in `run'/usr/local/rvm/rubies/ruby-1.9.3-p392/lib/ruby/1.9.1/webrick/server.rb:191:in `block in start_thread' Rendered layouts/_flash.html.haml (1.8ms) Rendered notifications/create.js.erb (4.3ms)","Pusher in Rails: ""Unknown auth_key"" - server side not triggering events"
How to Rspec Testing ActionController::Live writing to Stream in Rails 4?," I am currently experimenting with ActionController::Live and I can't figure out how to test this properly.In my controller I have this written But when I inspect the object in my rspec test I see this When I write the ""data"" to the stream, I can't figure out whyit doesn't show up in the array. When I remove the first response.stream.write line the buf returns an empty array. <code>  response.stream.write(""event: #{event}\n"") response.stream.write(""data: #{post.to_json}\n\n"") (rdb:1) response.stream.instance_variable_get(:@buf) [""event: event\n""]",How to test with Rspec and ActionController::Live while writing to stream in Rails 4?
Does define_method override a method with the same name?," I have come across the following code : This gives output So, how does the define_method :say_hi override the original method :say_hi ? Or does define_method change the original method definition ? <code>  class MethodLogger def log_method((klass,method_name) klass.class_eval do alias_method ""#{method_name}_original"" method_name define_method method_name do puts ""#{Time.now}: Called #{method_name}"" send ""#{method_name}_original"" end end end endclass Tweet def say_hi puts ""Hi"" endendlogger =MethodLogger.newlogger.log_method(Tweet,:say_hi) 2012-09-11 12:54:09 -400: Called say_hi",Does define_method override a method with the same name as its argument?
Should rbenv be installed system wide or at a user level," I'm building a vagrant setup, and part of that is installing rbenv. I'm using librarian-chef to manage all my chef cookbooks, and it installs rbenv and ruby-build.However, when I tried to ssh into my Vagrant VM and type ruby -v I got the standard system-installed ruby 1.8.7 (2012-02-08 patchlevel 358) [x86_64-linux]. Thinking that maybe rbenv was not installed, I tried running rbenv versions, but rbenv was in fact installed: So then I tried rbenv install [version]: That failed with Permission denied. I tried installing again with sudo: And that worked. Then I tried running rbenv versions again: But it still says only system ruby is installed. However, if I run it with sudo: rbenv versions now shows 1.9.3 was installed.So there seems to be a disconnect, in that that rbenv and my ruby version are now installed on a system level and not on the user level.I am using the rbenv-cookbook. I would like to have rbenv set up with chef, because that saves me from setting it up manually, post-install.The other issue I'm having is that it seem like everything that is ruby-controlled, such as gem, is also suffering the same disconnect. <code>  vagrant@precise64:~$ rbenv versions* system (set by /opt/rbenv/version) vagrant@precise64:~$ rbenv install 1.9.3-p327[...]BUILD FAILED[...]test -z ""/opt/rbenv/versions/1.9.3-p327/include"" || /bin/mkdir -p ""/opt/rbenv/versions/1.9.3-p327/include""/bin/mkdir: cannot create directory `/opt/rbenv/versions/1.9.3-p327': Permission denied sudo rbenv install 1.9.3-p327 vagrant@precise64:~$ rbenv versions* system (set by /opt/rbenv/version) vagrant@precise64:~$ sudo rbenv versions* system (set by /home/vagrant/.rbenv/version) 1.9.3-p327 vagrant@precise64:~$ gem install bundlerFetching: bundler-1.3.5.gem (100%)ERROR: While executing gem ... (Gem::FilePermissionError) You don't have write permissions into the /opt/vagrant_ruby/lib/ruby/gems/1.8 directory.","Should rbenv be installed system-wide, or at a user level?"
"Ruby / Rails - How do i change the timezone of a Time, without changing the time"," I have a record foo in the database which has :start_time and :timezone attributes.The :start_time is a Time in UTC - 2001-01-01 14:20:00, for example.The :timezone is a string - America/New_York, for example.I want to create a new Time object with the value of :start_time but whose timezone is specified by :timezone. I do not want to load the :start_time and then convert to :timezone, because Rails will be clever and update the time from UTC to be consistent with that timezone.Currently, Instead, I want to see ie. I want to do: <code>  t = foo.start_time=> 2000-01-01 14:20:00 UTCt.zone=> ""UTC""t.in_time_zone(""America/New_York"")=> Sat, 01 Jan 2000 09:20:00 EST -05:00 => Sat, 01 Jan 2000 14:20:00 EST -05:00 t=> 2000-01-01 14:20:00 UTCt.zone = ""America/New_York""=> ""America/New_York""t=> 2000-01-01 14:20:00 EST","Ruby / Rails - Change the timezone of a Time, without changing the value"
Read/Write binary files in ruby," I've written a simple Huffman encoding in Ruby. As output I've got an array, for example: I need to write, and then read, it to and from a file. I tried several methods: I get a simple text file and not binary.Or: Which looks like it works, but then I can't read it into array.Which encoding should I use? <code>  [""010"", ""1111"", ""10"", ""10"", ""110"", ""1110"", ""001"", ""110"", ""000"", ""10"", ""011""] IO.binwrite(""out.cake"", array) File.open(""out.cake"", 'wb' ) do |output| array.each do | byte | output.print byte.chr endend",Write array of radix-2 numeric strings to binary file in Ruby
How do I read/write binary files?," I've written a simple Huffman encoding in Ruby. As output I've got an array, for example: I need to write, and then read, it to and from a file. I tried several methods: I get a simple text file and not binary.Or: Which looks like it works, but then I can't read it into array.Which encoding should I use? <code>  [""010"", ""1111"", ""10"", ""10"", ""110"", ""1110"", ""001"", ""110"", ""000"", ""10"", ""011""] IO.binwrite(""out.cake"", array) File.open(""out.cake"", 'wb' ) do |output| array.each do | byte | output.print byte.chr endend",Write array of radix-2 numeric strings to binary file in Ruby
Understanding ruby metaprogramming using method_added to overwrite class methods dynamically," I have the following code from Programming Ruby 1.9 (slightly adapted) I just want to ensure my thought process is accurate I'm still trying to wrap my head around how this works. I was hoping if someone could confirm my thought process as I want to make sure I understand what is going on here. The comments were added by myself.I really consider my understanding of method binding, singleton classes, and meta-programming to be novice at best.Firstly, Trace::included is called by any class that includes it. This method does two things, gets a list of existing functions in that class (if any) and overrides their methods using inject. Then it modifies the singleton class of the class that included the module and overrides the default method_added method to ensure every time a method is added past the additional include inject will affect it. This method uses a variable to prevent infinite recursion because the call to inject will evoke method_added by its nature.Trace::works as follows: set self to the context that exists within the class definition using instance_eval. Therefore the scope(?) is modified to how it would be within that class definition. Then we set method_object to instance_method(meth) which will get the original method that will added. Since instance_method does not have an explicit receiver, it will default to self which will be the same as the context of being within the class definition?Then we use define_method to define a method with the same name. Because we are in the context of instance_eval, this is equivalent to defining an instance method and will override the existing method. our method accepts an arbitrary number of arguments and a block if one exists.We add some flare to place our ""Tracing"" then we also call the original method that we stored in method_object, as the original is being overwritten. This method is unbound, so we must bind it to the current context using bind(self) so it has the same context as it would originally? we then use call and pass through the arguments and the block, storing its return value, and returning its return value after printing it. I really hope that I am describing this adequately. Is my description accurate? I am particularly uncertain about the bolded content and the following line: <code>  module Trace def self.included(culprit) #Inject existing methods with tracing code: culprit.instance_methods(false).each do |func| inject(culprit, func) end #Override the singletons method_added to ensure all future methods are injected. def culprit.method_added(meth) unless @trace_calls_internal @trace_calls_internal = true Trace.inject(self, meth) #This will call method_added itself, the condition prevents infinite recursion. @trace_calls_internal = false end end end def self.inject(target, meth) target.instance_eval do #Get the method method_object = instance_method(meth) #Rewrite dat sheet define_method(meth) do |*args, &block| puts ""==> Called #{meth} with #{args.inspect}"" #the bind to self will put the context back to the class. result = method_object.bind(self).call(*args, &block) puts ""<== #{meth} returned #{result.inspect}"" result end end endendclass Example def one(arg) puts ""One called with #{arg}"" endend#No tracing for the above.ex1 = Example.newex1.one(""Sup"") #Not affected by Trace::injectclass Example #extend the class to include tracing. include Trace #calls Trace::inject on existing methods via Trace::included def two(a1, a2) #triggers Example::method_added(two) and by extension Trace::inject a1 + a2 endendex1.one(""Sup again"") #Affected by Trace::injectputs ex1.two(5, 4) #Affected by Trace::inject method_object.bind(self).call(*args, &block)",Understanding ruby metaprogramming using method_added to overwrite instance methods dynamically
nokogiri find node return siblings," Is there a way to find a specific value in a node and then return all its sibling values? For example, I would like to find find the id node that contains ID 5678 and then get the email address and all images associated with ID 5678. Here's a sample XML file. <code>  Nokogiri::XML.parse(File.open('info.xml')) <xmlcontainer> <details> <id>1234</id> <email>sdfsdf@sdasd.com</email> <image>images/1.jpg</image> <image>images/2.jpg</image> <image>images/3.jpg</image> </details> <details> <id>5678</id> <email>zzzz@zzz.com</email> <image>images/4.jpg</image> <image>images/5.jpg</image> </details> <details> <id>9011</id> <email>aaaa@aaa.com</email> <image>images/6.jpg</image> <image>images/7.jpg</image> </details></xmlcontainer>",Getting the siblings of a node with Nokogiri
"rails server wont start, not sure of error"," I created a new rails app in folder 'issues' and when I wanted to 'ruby s' I got an error. Any help will be much appreciated I added 'therubyracer' gem into my Gemfile and then '$ bundle install' Works! <code>  [thiago@netbox issues]$ rails s/home/thiago/.rvm/gems/ruby-1.9.3-p429/gems/execjs-1.4.0/lib/execjs/runtimes.rb:51:in `autodetect': Could not find a JavaScript runtime. See https://github.com/sstephenson/execjs for a list of available runtimes. (ExecJS::RuntimeUnavailable) from /home/thiago/.rvm/gems/ruby-1.9.3-p429/gems/execjs-1.4.0/lib/execjs.rb:5:in `<module:ExecJS>' from /home/thiago/.rvm/gems/ruby-1.9.3-p429/gems/execjs-1.4.0/lib/execjs.rb:4:in `<top (required)>' from /home/thiago/.rvm/gems/ruby-1.9.3-p429/gems/coffee-script-2.2.0/lib/coffee_script.rb:1:in `require' from /home/thiago/.rvm/gems/ruby-1.9.3-p429/gems/coffee-script-2.2.0/lib/coffee_script.rb:1:in `<top (required)>' from /home/thiago/.rvm/gems/ruby-1.9.3-p429/gems/coffee-script-2.2.0/lib/coffee-script.rb:1:in `require' from /home/thiago/.rvm/gems/ruby-1.9.3-p429/gems/coffee-script-2.2.0/lib/coffee-script.rb:1:in `<top (required)>' from /home/thiago/.rvm/gems/ruby-1.9.3-p429/gems/coffee-rails-3.2.2/lib/coffee-rails.rb:1:in `require' from /home/thiago/.rvm/gems/ruby-1.9.3-p429/gems/coffee-rails-3.2.2/lib/coffee-rails.rb:1:in `<top (required)>' from /home/thiago/.rvm/gems/ruby-1.9.3-p429@global/gems/bundler-1.3.5/lib/bundler/runtime.rb:72:in `require' from /home/thiago/.rvm/gems/ruby-1.9.3-p429@global/gems/bundler-1.3.5/lib/bundler/runtime.rb:72:in `block (2 levels) in require' from /home/thiago/.rvm/gems/ruby-1.9.3-p429@global/gems/bundler-1.3.5/lib/bundler/runtime.rb:70:in `each' from /home/thiago/.rvm/gems/ruby-1.9.3-p429@global/gems/bundler-1.3.5/lib/bundler/runtime.rb:70:in `block in require' from /home/thiago/.rvm/gems/ruby-1.9.3-p429@global/gems/bundler-1.3.5/lib/bundler/runtime.rb:59:in `each' from /home/thiago/.rvm/gems/ruby-1.9.3-p429@global/gems/bundler-1.3.5/lib/bundler/runtime.rb:59:in `require' from /home/thiago/.rvm/gems/ruby-1.9.3-p429@global/gems/bundler-1.3.5/lib/bundler.rb:132:in `require' from /home/thiago/Documents/wdi/rails_practice/issues/config/application.rb:7:in `<top (required)>' from /home/thiago/.rvm/gems/ruby-1.9.3-p429/gems/railties-3.2.13/lib/rails/commands.rb:53:in `require' from /home/thiago/.rvm/gems/ruby-1.9.3-p429/gems/railties-3.2.13/lib/rails/commands.rb:53:in `block in <top (required)>' from /home/thiago/.rvm/gems/ruby-1.9.3-p429/gems/railties-3.2.13/lib/rails/commands.rb:50:in `tap' from /home/thiago/.rvm/gems/ruby-1.9.3-p429/gems/railties-3.2.13/lib/rails/commands.rb:50:in `<top (required)>' from script/rails:6:in `require' from script/rails:6:in `<main>' Gemfilesource 'https://rubygems.org'gem 'rails', '3.2.8'gem 'sqlite3'group :assets dogem 'sass-rails', '~> 3.2.3'gem 'coffee-rails', '~> 3.2.1'gem 'uglifier', '>= 1.0.3'endgem 'jquery-rails'gem 'therubyracer' # added",Rails server does not start -> Could not find a JavaScript runtime
Rails server does not start. Not sure about the error.," I created a new rails app in folder 'issues' and when I wanted to 'ruby s' I got an error. Any help will be much appreciated I added 'therubyracer' gem into my Gemfile and then '$ bundle install' Works! <code>  [thiago@netbox issues]$ rails s/home/thiago/.rvm/gems/ruby-1.9.3-p429/gems/execjs-1.4.0/lib/execjs/runtimes.rb:51:in `autodetect': Could not find a JavaScript runtime. See https://github.com/sstephenson/execjs for a list of available runtimes. (ExecJS::RuntimeUnavailable) from /home/thiago/.rvm/gems/ruby-1.9.3-p429/gems/execjs-1.4.0/lib/execjs.rb:5:in `<module:ExecJS>' from /home/thiago/.rvm/gems/ruby-1.9.3-p429/gems/execjs-1.4.0/lib/execjs.rb:4:in `<top (required)>' from /home/thiago/.rvm/gems/ruby-1.9.3-p429/gems/coffee-script-2.2.0/lib/coffee_script.rb:1:in `require' from /home/thiago/.rvm/gems/ruby-1.9.3-p429/gems/coffee-script-2.2.0/lib/coffee_script.rb:1:in `<top (required)>' from /home/thiago/.rvm/gems/ruby-1.9.3-p429/gems/coffee-script-2.2.0/lib/coffee-script.rb:1:in `require' from /home/thiago/.rvm/gems/ruby-1.9.3-p429/gems/coffee-script-2.2.0/lib/coffee-script.rb:1:in `<top (required)>' from /home/thiago/.rvm/gems/ruby-1.9.3-p429/gems/coffee-rails-3.2.2/lib/coffee-rails.rb:1:in `require' from /home/thiago/.rvm/gems/ruby-1.9.3-p429/gems/coffee-rails-3.2.2/lib/coffee-rails.rb:1:in `<top (required)>' from /home/thiago/.rvm/gems/ruby-1.9.3-p429@global/gems/bundler-1.3.5/lib/bundler/runtime.rb:72:in `require' from /home/thiago/.rvm/gems/ruby-1.9.3-p429@global/gems/bundler-1.3.5/lib/bundler/runtime.rb:72:in `block (2 levels) in require' from /home/thiago/.rvm/gems/ruby-1.9.3-p429@global/gems/bundler-1.3.5/lib/bundler/runtime.rb:70:in `each' from /home/thiago/.rvm/gems/ruby-1.9.3-p429@global/gems/bundler-1.3.5/lib/bundler/runtime.rb:70:in `block in require' from /home/thiago/.rvm/gems/ruby-1.9.3-p429@global/gems/bundler-1.3.5/lib/bundler/runtime.rb:59:in `each' from /home/thiago/.rvm/gems/ruby-1.9.3-p429@global/gems/bundler-1.3.5/lib/bundler/runtime.rb:59:in `require' from /home/thiago/.rvm/gems/ruby-1.9.3-p429@global/gems/bundler-1.3.5/lib/bundler.rb:132:in `require' from /home/thiago/Documents/wdi/rails_practice/issues/config/application.rb:7:in `<top (required)>' from /home/thiago/.rvm/gems/ruby-1.9.3-p429/gems/railties-3.2.13/lib/rails/commands.rb:53:in `require' from /home/thiago/.rvm/gems/ruby-1.9.3-p429/gems/railties-3.2.13/lib/rails/commands.rb:53:in `block in <top (required)>' from /home/thiago/.rvm/gems/ruby-1.9.3-p429/gems/railties-3.2.13/lib/rails/commands.rb:50:in `tap' from /home/thiago/.rvm/gems/ruby-1.9.3-p429/gems/railties-3.2.13/lib/rails/commands.rb:50:in `<top (required)>' from script/rails:6:in `require' from script/rails:6:in `<main>' Gemfilesource 'https://rubygems.org'gem 'rails', '3.2.8'gem 'sqlite3'group :assets dogem 'sass-rails', '~> 3.2.3'gem 'coffee-rails', '~> 3.2.1'gem 'uglifier', '>= 1.0.3'endgem 'jquery-rails'gem 'therubyracer' # added",Rails server does not start -> Could not find a JavaScript runtime
cannot load such file -- nokogiri (LoadError)," I installed Nokogiri without any issues by running: When I run nokogiri.rb: I got the error: I'm using Ruby 1.9.3, but for some reason it refers to Ruby 1.9.1. Can this be the cause? <code>  $ sudo gem install nokogiriBuilding native extensions. This could take a while...Successfully installed nokogiri-1.5.91 gem installedInstalling ri documentation for nokogiri-1.5.9...Installing RDoc documentation for nokogiri-1.5.9... #!/usr/bin/ruby -wrequire 'nokogiri'puts ""Current directory is: #{ Dir.pwd }""Dir.chdir(""/home/askar/xml_files1"") do |dirname| puts ""Now in: #{ Dir.pwd }"" xml_files = Dir.glob(""ShipmentRequest*.xml"") if xml_files.empty? puts ""#{ dirname } is empty."" else xml_files.each do |file| doc = Nokogiri::XML(open(file)) # ... do something with the doc ... end endend $ ruby nokogiri.rb /home/askar/.rvm/rubies/ruby-1.9.3-p429/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require': cannot load such file -- nokogiri (LoadError) from /home/askar/.rvm/rubies/ruby-1.9.3-p429/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'",Why can't I load Nokogiri?
Why cannot I load Nokogiri?," I installed Nokogiri without any issues by running: When I run nokogiri.rb: I got the error: I'm using Ruby 1.9.3, but for some reason it refers to Ruby 1.9.1. Can this be the cause? <code>  $ sudo gem install nokogiriBuilding native extensions. This could take a while...Successfully installed nokogiri-1.5.91 gem installedInstalling ri documentation for nokogiri-1.5.9...Installing RDoc documentation for nokogiri-1.5.9... #!/usr/bin/ruby -wrequire 'nokogiri'puts ""Current directory is: #{ Dir.pwd }""Dir.chdir(""/home/askar/xml_files1"") do |dirname| puts ""Now in: #{ Dir.pwd }"" xml_files = Dir.glob(""ShipmentRequest*.xml"") if xml_files.empty? puts ""#{ dirname } is empty."" else xml_files.each do |file| doc = Nokogiri::XML(open(file)) # ... do something with the doc ... end endend $ ruby nokogiri.rb /home/askar/.rvm/rubies/ruby-1.9.3-p429/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require': cannot load such file -- nokogiri (LoadError) from /home/askar/.rvm/rubies/ruby-1.9.3-p429/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'",Why can't I load Nokogiri?
Installing ruby 1.9.3 on vagrant rbenv," i am attempting an vagrant install and would like to have 1.9.3-p327 as the default ruby version. i am using chef-solo and librarian-chef to manage the vagrant machine. my vagrant file provisioning for chef-solo looks like this and the cheffile that librarian-cheff looks for looks like this and from these two i should be able to run the vagrant file unfortunately it looks as if where i am specifying the version of ruby to chef-solo is bombing out. it was working yesterday afternoon which leads me to think that someone has updated a cookbook between then and now. so when i called librarian-chef install it pulled it and has freaked out.. if i comment out the json that specifies the ruby version then it works. it seems as if ill have to specify versions of rbenv but what are trusted versions and where can i find them.Edit: you will also have to specify the user details in the json. since your installing to system and user(vagrant) levels. and chef is using the ruby that the vagrant box provides. here is what my updated ruby version for rbenv json looks like. <code>  config.vm.provision :chef_solo do |chef|chef.cookbooks_path = ""cookbooks""chef.add_recipe ""apt""chef.add_recipe ""build-essential""chef.add_recipe ""git""chef.add_recipe ""ruby_build""chef.add_recipe ""rbenv::system""chef.add_recipe ""rbenv::vagrant""chef.add_recipe ""sqlite""chef.add_recipe ""nodejs""chef.add_recipe ""mysql""chef.add_recipe ""redisio""chef.add_recipe ""redisio::install""chef.add_recipe ""redisio::redis_gem""chef.add_recipe ""zlib""chef.add_recipe ""wkhtmltopdf""chef.json = { ""rbenv"" => { ""rubies"" => [ ""1.9.3-p327"" ], ""global"" => ""1.9.3-p327"", ""gems"" => { ""1.9.3-p327"" => [ { ""name"" => ""bundler"" } ] } }}end site 'http://community.opscode.com/api/v1'cookbook 'apt'cookbook 'git'cookbook 'build-essential'cookbook 'rbenv', git: 'https://github.com/fnichol/chef-rbenv.git'cookbook 'ruby_build'cookbook 'sqlite', git: 'git://github.com/opscode-cookbooks/sqlite.git'cookbook 'nodejs', git: 'http://github.com/mdxp/nodejs-cookbook'cookbook 'mysql', git: 'git://github.com/opscode-cookbooks/mysql.git'cookbook 'redisio', git: 'git://github.com/brianbianco/redisio.git'cookbook 'zlib', git: 'git://github.com/opscode-cookbooks/zlib'cookbook 'wkhtmltopdf', git: 'git://github.com/firstbanco/chef-wkhtmltopdf.git' ================================================================================Error executing action `install` on resource 'rbenv_ruby[1.9.3-p327] (system)'================================================================================NoMethodError-------------undefined method `loaded_recipe?' for #<Chef::RunContext:0x7f34cf773ed0>Cookbook Trace:---------------/tmp/vagrant-chef-1/chef-solo-1/cookbooks/rbenv/providers/ruby.rb:88:in `ruby_build_missing?'/tmp/vagrant-chef-1/chef-solo-1/cookbooks/rbenv/providers/ruby.rb:43:in `perform_install'/tmp/vagrant-chef-1/chef-solo-1/cookbooks/rbenv/providers/ruby.rb:33:in `class_from_file'Resource Declaration:---------------------# In /tmp/vagrant-chef-1/chef-solo-1/cookbooks/rbenv/recipes/system.rb 27: else 28: rbenv_ruby rubie 29: end Compiled Resource: ------------------# Declared in /tmp/vagrant-chef-1/chef-solo-1/cookbooks/rbenv/recipes/system.rb:28:in `from_file'rbenv_ruby(""1.9.3-p327"") do retry_delay 2 retries 0 recipe_name ""system"" definition ""1.9.3-p327"" action :install cookbook_name :rbenvend[2013-05-31T09:55:55+00:00] ERROR: Running exception handlers[2013-05-31T09:55:55+00:00] ERROR: Exception handlers complete[2013-05-31T09:55:55+00:00] FATAL: Stacktrace dumped to /tmp/vagrant-chef-1/chef-stacktrace.out[2013-05-31T09:55:55+00:00] FATAL: NoMethodError: rbenv_ruby[1.9.3-p327] (system) (rbenv::system line 28) had an error: NoMethodError: undefined method `loaded_recipe?' for #<Chef::RunContext:0x7f34cf773ed0>Chef never successfully completed! Any errors should be visible in theoutput above. Please fix your recipes so that they properly complete. chef.json = { 'rbenv' => { 'user_installs' => [ { 'user' => 'vagrant', 'rubies' => ['1.9.3-p327'], 'global' => '1.9.3-p327', 'gems' => { '1.9.3-p327' => [ { 'name' => 'bundler' }, { 'name' => 'rake' } ] } } ] },",Installing ruby 1.9.3 on vagrant rbenv NoMethodError loaded_recipe?
Rails: UTC offset," I'm trying to get the UTC offset for a datetime. The datetime is saved as: Fri, 31 May 2013 15:19:08 EDT -04:00 What I'd like to get is ""-04:00"". When I do object.utc_offset, I get -14400. What function should I use? <code> ",Get UTC offset in Ruby
Ruby on Rails if string is not equal to or other string is not equal to," I am just learning RoR so please bear with me. I am trying to write an if or statement with strings. Here is my code: I have tried many other ways, using parentheses and || but nothing seems to work. Maybe its because of my JS background...How can I test if a variable is not equal to string one or string two? <code>  <% if controller_name != ""sessions"" or controller_name != ""registrations"" %>",Test if string is not equal to either of two strings
Compass watch - cannot load such file -- sass/script/node (LoadError)," I'm having a problem with my compass watch command - it worked fine up until a few days ago. I have made no changes to my config files.I reinstalled Compass, used rvm to update Ruby. I checked my custom_require.rb file but I really don't know what to look for. It seems to be trying to load the file ""sass/script/node"" somewhere and from http://sass-lang.com/docs/yardoc/Sass/Script/Node.html I gather the filepath - but I have nothing there. Anyone have any ideas? <code>  /Users/sampurcell/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:60:in `require': cannot load such file -- sass/script/node (LoadError) from /Users/sampurcell/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:60:in `rescue in require' from /Users/sampurcell/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:35:in `require' from /Users/sampurcell/.rvm/gems/ruby-1.9.3-p194/gems/compass-0.12.2/lib/compass/sass_extensions/monkey_patches/browser_support.rb:1:in `<top (required)>' from /Users/sampurcell/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:55:in `require' from /Users/sampurcell/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:55:in `require' from /Users/sampurcell/.rvm/gems/ruby-1.9.3-p194/gems/compass-0.12.2/lib/compass/sass_extensions/monkey_patches.rb:2:in `block in <top (required)>' from /Users/sampurcell/.rvm/gems/ruby-1.9.3-p194/gems/compass-0.12.2/lib/compass/sass_extensions/monkey_patches.rb:1:in `each' from /Users/sampurcell/.rvm/gems/ruby-1.9.3-p194/gems/compass-0.12.2/lib/compass/sass_extensions/monkey_patches.rb:1:in `<top (required)>' from /Users/sampurcell/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:55:in `require' from /Users/sampurcell/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:55:in `require' from /Users/sampurcell/.rvm/gems/ruby-1.9.3-p194/gems/compass-0.12.2/lib/compass/sass_extensions.rb:9:in `<top (required)>' from /Users/sampurcell/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:55:in `require' from /Users/sampurcell/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:55:in `require' from /Users/sampurcell/.rvm/gems/ruby-1.9.3-p194/gems/compass-0.12.2/lib/compass.rb:5:in `block in <top (required)>' from /Users/sampurcell/.rvm/gems/ruby-1.9.3-p194/gems/compass-0.12.2/lib/compass.rb:4:in `each' from /Users/sampurcell/.rvm/gems/ruby-1.9.3-p194/gems/compass-0.12.2/lib/compass.rb:4:in `<top (required)>' from /Users/sampurcell/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:55:in `require' from /Users/sampurcell/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:55:in `require' from /Users/sampurcell/.rvm/gems/ruby-1.9.3-p194/gems/compass-0.12.2/bin/compass:20:in `block in <top (required)>' from /Users/sampurcell/.rvm/gems/ruby-1.9.3-p194/gems/compass-0.12.2/bin/compass:8:in `fallback_load_path' from /Users/sampurcell/.rvm/gems/ruby-1.9.3-p194/gems/compass-0.12.2/bin/compass:19:in `<top (required)>' from /Users/sampurcell/.rvm/gems/ruby-1.9.3-p194/bin/compass:19:in `load' from /Users/sampurcell/.rvm/gems/ruby-1.9.3-p194/bin/compass:19:in `<main>' from /Users/sampurcell/.rvm/gems/ruby-1.9.3-p194/bin/ruby_noexec_wrapper:14:in `eval' from /Users/sampurcell/.rvm/gems/ruby-1.9.3-p194/bin/ruby_noexec_wrapper:14:in `<main>'","Why does ""compass watch"" say it cannot load sass/script/node (LoadError)?"
Vim slow over ssh with ruby syntax highlighting," I've been using vim over ssh to work for a week or two now and all has been going great. Today I decided to add in some syntax highlighting, autocomplete, and some other general plugins. Set up vundle and went to work. My current .vimrc can be found at https://github.com/scottopell/dotfiles/blob/master/.vimrc I have cloned my vimrc and vim files onto my local ubuntu desktop and vim runs exactly as expected, no slowness on any files that I can find. Same plugins and same vimrc and no slowness on ruby files. update I can reproduce this issue with the following .vimrc and an empty ~/.vim folder.However, vim on this vps is very slow with ruby/haml files. Much moreso ruby files. When I open any ruby file, startup takes about 2 seconds (timed with --startuptime). With a comparable length haml file, its about .5 seconds. This slowness isn't just on startup either, moving around and editing the file are both painfully slow.Haml/erb(they are basically the same) Ruby Without syntax highlighting on the same ruby file as above I have tried using mosh(http://mosh.mit.edu) and it doesn't help. not really relevant anymoreAs you can see in my .vimrc file, I have tried a few different solutions to this problem.I have tried running with all plugins disabled (I moved them all from ~/vim/bundle/PLUGINNAME to ~/vim/bundle/disabled/PLUGINNAME, is this correct?), set ruby path, set foldlevel to manual, disabled my colorscheme, nothing helps. see edit3I can post the full startupttime log for any file if that will help.I have tested a few other languages(php, c, python, vimL) and none experience any slowdown.EDIT: Just to clarify, I am running an ssh session with ssh user@server then once inside the server I am doing vim file.rb.EDIT2: I just tried accessing the server directly and the slowness persists without ssh, I have updated to reflect that this isn't a problem with ssh.EDIT3: I can reproduce the issue with a .vimrc file that contains the single line syntax on with an empty ~/.vim folderEDIT4 I uninstalled my compiled version of vim and any versions that I may have installed through apt, manually removed all vim stuff from my system, and I can run vim with vim -u NONE /path/to/file.rb then do :syn on and the issue will be there. The file in question is a rails controller, but like I've said, I can recreate it to some degree with most any file, but rails controllers see to be the worst. <code>  syntax on 268.818 000.005: before starting main loop848.871 580.053: first screen update 199.613 000.004: before starting main loop2937.859 2738.246: first screen update 149.047 000.004: before starting main loop152.912 003.865: first screen update ",Vim slow with ruby syntax highlighting
"Ruby's analogue of Python's variables, undeclared in the class definition"," I can store any number of variables undeclared in the class definition in a class instance in Python.How can I do something like this in Ruby? <code>  class C: passa = C()b = C()a.a = 1a.b = 2b.test1 = 11print a.a, a.b, b.test1","What is Ruby's analogue of Python's variables, undeclared in the class definition?"
How to convert a string to a hash in ruby/rails without using eval?," Here is the string which needs to convert into a hash. We can not use eval because eval will execute the method return_misc_definitions('project_status') in the string. Is there pure string operation to accomplish this conversion in Ruby/Rails? <code>  ""{:status => {:label => 'Status', :collection => return_misc_definitions('project_status') } }""",How to convert a string to a hash in Ruby on Rails without using eval?
NET::SCP Wildcard," I need to download a file daily from a client that I have SCP but not SSH access to.The file name will always be /outgoing/Extract/visit_[date]-[timestamp].dat.gz'For example yesterdays file was called visits_20130604-090003.dat.gzI can not rely on the fact that the time stamp will always be the same, but the date should always be yesterdays date:My set up so far:My home directory contains to sub-directories named downloads_fullname and downloads_wildcard.It also contains an simple ruby script named foo.rb.The contents of foo.rb are this` When run the downloads_fullname directory contains the file, but the downloads_wildcard directory does not.Is there any way to use wildcarding in Net::SCP? Or does anybody have any sly workarounds? I tried \*to no avail. <code>  #! /usr/bin/rubyrequire 'net/ssh'require 'net/scp'yesterday = (Time.now - 86400).strftime('%Y%m%d')Net::SCP.start('hostname', 'username') do |scp| scp.download!('/outgoing/Extract/visits_' + yesterday + '-090003.dat.gz', 'downloads_fullname') scp.download!('/outgoing/Extract/visits_' + yesterday + '-*.dat.gz', 'downloads_wildcard')end",Ruby NET::SCP containing Wildcard
rails url/path with parameters, I would like to produce a URL as from this route How do I pass parameters to get_class_swimming_students_path ? <code>  /swimming/students/get_times/2013-01-01/2013-02-02 get_class_swimming_students GET /swimming/students/get_times/:start_date/:end_date(.:format) swimming/students#get_times,Rails: URL/path with parameters
How can I ignore invalid byte sequences in UTF-8 strings?," I have an Rails application surviving from migrations since Rails version 1 and I would like to ignore all invalid byte sequences on it, to keep the backwards compatibility.I can't know the input encoding.Exemple: I can overcome this problem in one line, by using the following, for example: However I would like to always ignore the invalid byte sequences and disable this errors. On Ruby itself or in Rails. <code>  > ""- Men\xFC -"".split(""n"")ArgumentError: invalid byte sequence in UTF-8 from (irb):4:in `split' from (irb):4 from /home/fotanus/.rvm/rubies/ruby-2.0.0-rc2/bin/irb:16:in `<main>' > ""- Men\xFC -"".unpack(""C*"").pack(""U*"").split(""n"") => [""- Me"", "" -""] ",How can I globally ignore invalid byte sequences in UTF-8 strings?
How to install a specific version of a ruby gem?," Using the command-line gem tool, how can I install a specific version of a gem? <code> ",Ruby: How to install a specific version of a ruby gem?
using sequel to select one field from database," I am using Sinatra and Sequel with PostgreSQL. After authentication, I want to welcome the user by printing their name but I cannot get only the value of the user's name from the database, it comes out as a hash. The query is: and the resulting piece of data is: which looks rather weird, I would prefer it to read ""Welcome, Rich"". What am I doing wrong here? I tried the same query without 'first"" at the end and that does not work either.  <code>  current_user = DB[:users].select(:username).where('password = ?', password).first Welcome, {:username=>""Rich""}",How to use Sequel to select one field from database
How to switch to an older version of rails ...," I'm trying to follow an older book written in 2011. So, randomly picked 3.1.3 version since that's Nov 2011. How do I switch to that version in my RVM? Currently have Rails 4.0.0.beta1 version ... Please don't suggest to put it in the Gemfile because there are a lot of other dependencies that will just be too troublesome to deal with, hence if I just switch, I'm assuming it means that other dependencies will be taken care of at the same time too, right? UPDATE UPDATE AGAIN  <code>  **-s-MacBook-Pro:agile **$ rails -vRails 4.0.0.beta1**-s-MacBook-Pro:agile **$ gem install rails -v 3.1.3Successfully installed rails-3.1.31 gem installed**-s-MacBook-Pro:agile **$ rvm gemset create rails 313gemset created rails => /Users/**/.rvm/gems/ruby-1.9.3-p392@railsgemset created 313 => /Users/**/.rvm/gems/ruby-1.9.3-p392@313**-s-MacBook-Pro:agile **$ ruby -vruby 1.9.3p392 (2013-02-22 revision 39386) [x86_64-darwin10.8.0]**-s-MacBook-Pro:agile **$ rvm 1.9.3p392-head@rails313Unknown ruby interpreter version: '1.9.3p392'.**-s-MacBook-Pro:agile **$ **-s-MacBook-Pro:agile **$ rvm gemset use 313Using ruby-1.9.3-p392 with gemset 313**-s-MacBook-Pro:agile **$ rails -v/Library/Ruby/Site/1.8/rubygems/dependency.rb:296:in `to_specs': Could not find 'rails' (>= 0) among 2 total gem(s) (Gem::LoadError)from /Library/Ruby/Site/1.8/rubygems/dependency.rb:307:in `to_spec'from /Library/Ruby/Site/1.8/rubygems/core_ext/kernel_gem.rb:47:in `gem'from /usr/bin/rails:18**-s-MacBook-Pro:agile **$ ",How to switch to an older version of rails
Freezing variables in Ruby not work," I am learning Ruby, and I just found interesting behaviour when using the Object#freeze method with variables. After I freeze a variable (either Fixnum or Array), I am still able to modify it! It is strange, since as far as I am concerned this should not happen and TypeError should be raised.Here's my code: The same is for array: But when I try to push something into the array after freezing, it raises an arror, as expected: Can somebody explain to me this issue? It seems strange.Edit I am using Windows XP + Ruby 1.9.3-p429 <code>  test = 666var = 90#okvar += 5puts ""var.frozen? #{var.frozen?}"" var.freeze puts ""var.frozen? #{var.frozen?}""var = testputs ""var = #{var}"" test = [666]var = [90]#okvar += [5]puts ""var.frozen? #{var.frozen?}"" var.freeze puts ""var.frozen? #{var.frozen?}""var = testputs ""var = #{var}"" test = [666]var = [90]#okvar += [5]puts ""var.frozen? #{var.frozen?}"" var.freeze puts ""var.frozen? #{var.frozen?}""var << testputs ""var = #{var}""",Freezing variables in Ruby doesn't work
Freezing variables in Ruby don't work," I am learning Ruby, and I just found interesting behaviour when using the Object#freeze method with variables. After I freeze a variable (either Fixnum or Array), I am still able to modify it! It is strange, since as far as I am concerned this should not happen and TypeError should be raised.Here's my code: The same is for array: But when I try to push something into the array after freezing, it raises an arror, as expected: Can somebody explain to me this issue? It seems strange.Edit I am using Windows XP + Ruby 1.9.3-p429 <code>  test = 666var = 90#okvar += 5puts ""var.frozen? #{var.frozen?}"" var.freeze puts ""var.frozen? #{var.frozen?}""var = testputs ""var = #{var}"" test = [666]var = [90]#okvar += [5]puts ""var.frozen? #{var.frozen?}"" var.freeze puts ""var.frozen? #{var.frozen?}""var = testputs ""var = #{var}"" test = [666]var = [90]#okvar += [5]puts ""var.frozen? #{var.frozen?}"" var.freeze puts ""var.frozen? #{var.frozen?}""var << testputs ""var = #{var}""",Freezing variables in Ruby doesn't work
"""ERROR: sql.h not found"" when installing ruby-odbc on Ubuntu"," Attempting to install ruby-odbc gem on Debian/Ubuntu results in the following error;""ERROR: sql.h not found"" <code> ","""ERROR: sql.h not found"" when installing ruby-odbc gem on Ubuntu"
Is it possible to iterate 3 arrays in ruby at the same time?," We can iterate two arrays at the same time using Array's zip method like: Is it possible to iterate three arrays? Can we use the transpose method to do the same? <code>  @budget.zip(@actual).each do |budget, actual| ...end",Is it possible to iterate three arrays at the same time?
ruby sort_by directories and files," I'm running Ruby 1.9.3p392. For some reason, I am not getting the results back as expected. I do get all folders first followed by all files, however, the name sorting is failing.As an example, I get these for my folders:contentimagesbinFor files:global.asaxweb.configfavicon.icoIt groups the dir/file portion correct, but the names are sorted incorrectly.The output to the console looks like this after sorting: <code>  Item = Struct.new( :name, :dir, :sort_dir )entries = ftp.list()entries.map!{|e| Net::FTP::List.parse(e) }.map!{|e| Item.new( e.basename, e.dir?, (e.dir? ? 0 : 1) ) }render json: entries.sort_by{ |e| [ e.sort_dir, e.name ]} #<struct FtpController::Item name=""Content"", dir=true, sort_dir=0>#<struct FtpController::Item name=""Images"", dir=true, sort_dir=0>#<struct FtpController::Item name=""Scripts"", dir=true, sort_dir=0>#<struct FtpController::Item name=""Views"", dir=true, sort_dir=0>#<struct FtpController::Item name=""bin"", dir=true, sort_dir=0>#<struct FtpController::Item name=""Global.asax"", dir=false, sort_dir=1>#<struct FtpController::Item name=""Web.config"", dir=false, sort_dir=1>#<struct FtpController::Item name=""favicon.ico"", dir=false, sort_dir=1>#<struct FtpController::Item name=""packages.config"", dir=false, sort_dir=1>#<struct FtpController::Item name=""robots.txt"", dir=false, sort_dir=1>",ruby sort_by multiple fields
How can you to call class methods on mailers when they're not defined as such?," When sending mail in Rails, usually one would do something like this: But if we look inside UserMailer we can see this: Notice that the method name is not prefixed with self. Looking at it, it seems like you need to instantiate the object first as below. How does Rails do this? <code>  UserMailer.password_reset(user).deliver def password_reset(user) # not self.password_reset # ...end UserMailer.new.password_reset(user).deliver",How can you call class methods on mailers when they're not defined as such?
Difference between 1.second.from_now and 1.seconds_from_now in Ruby's ActiveSupport library?, I was curious about what the difference is between the two. They look the same to me And they both have the same class <code>  irb(main):001:0> require 'active_support/core_ext'=> trueirb(main):002:0> 1.second.from_now == 1.seconds.from_now=> false irb(main):003:0> p 1.second.from_now; p 1.seconds.from_now; nil2013-06-14 17:50:28 +05302013-06-14 17:50:28 +0530=> nil irb(main):004:0> 1.second.from_now.class == 1.seconds.from_now.class=> true,Difference between 1.second.from_now and 1.seconds.from_now in Ruby's ActiveSupport library?
TextMate 2 `Failure running Jump to Method Definition` error: undefined method `current_line' for TextMate:Module," Update: I figured it out. Ctrl-F only works when the method I'm searching is NOT selected. The cursor only needs to be IN the method name. I just upgraded to TextMate2.When I select a method and use Ctrl+F to go to its definition, I get: Here's the trace: I'm also given an option to Edit Command"". Here's the code for the ""Jump to Method"" Definition: Am I missing an environment variable? <code>  > Failure running Jump to Method Definition /Users/ilikepie/Library/Application Support/TextMate/Managed/Bundles/Ruby on Rails.tmbundle/Support/lib/rails/text_mate.rb:54:in `method_missing': undefined method `current_line' for TextMate:Module (NoMethodError) from /Users/ilikepie/Library/Application Support/TextMate/Managed/Bundles/Ruby on Rails.tmbundle/Support/bin/jump_to_method_definition.rb:13:in `initialize' from /Users/ilikepie/Library/Application Support/TextMate/Managed/Bundles/Ruby on Rails.tmbundle/Support/bin/jump_to_method_definition.rb:147:in `new' from /Users/ilikepie/Library/Application Support/TextMate/Managed/Bundles/Ruby on Rails.tmbundle/Support/bin/jump_to_method_definition.rb:147 #!/usr/bin/env bash[[ -f ""${TM_SUPPORT_PATH}/lib/bash_init.sh"" ]] && . ""${TM_SUPPORT_PATH}/lib/bash_init.sh""RUBYLIB=""$TM_BUNDLE_SUPPORT/lib:$RUBYLIB""""${TM_RUBY:=ruby}"" -- ""${TM_BUNDLE_SUPPORT}/bin/jump_to_method_definition.rb""",'Failure running Jump to Method Definition' error: undefined method `current_line' for TextMate:Module
Monkey patching a Rails gem," I'm using the Devise authentication gem in my Rails project, and I want to change the keys it's using in flash alerts. (Devise uses :notice and :alert flash keys, but I want to change them to :success and :error so that I can display nice green/red boxes with Bootstrap.)So I want to be able to somehow override the set_flash_message method in DeviseController.Here's the new method: But I just don't know where to put it. UPDATE:Based on an answer I created a config/initializers/overrides.rb file with the following code: But this causes an error on every Devise action: Routing Error: undefined method 'prepend_before_filter' for Devise::SessionsController:Class <code>  def set_flash_message(key, kind, options = {}) if key == 'alert' key = 'error' elsif key == 'notice' key = 'success' end message = find_message(kind, options) flash[key] = message if message.present?end class DeviseController def set_flash_message(key, kind, options = {}) if key == 'alert' key = 'error' elsif key == 'notice' key = 'success' end message = find_message(kind, options) flash[key] = message if message.present? endend",Monkey patching Devise (or any Rails gem)
Overriding Devise (or any Rails gem) controller method," I'm using the Devise authentication gem in my Rails project, and I want to change the keys it's using in flash alerts. (Devise uses :notice and :alert flash keys, but I want to change them to :success and :error so that I can display nice green/red boxes with Bootstrap.)So I want to be able to somehow override the set_flash_message method in DeviseController.Here's the new method: But I just don't know where to put it. UPDATE:Based on an answer I created a config/initializers/overrides.rb file with the following code: But this causes an error on every Devise action: Routing Error: undefined method 'prepend_before_filter' for Devise::SessionsController:Class <code>  def set_flash_message(key, kind, options = {}) if key == 'alert' key = 'error' elsif key == 'notice' key = 'success' end message = find_message(kind, options) flash[key] = message if message.present?end class DeviseController def set_flash_message(key, kind, options = {}) if key == 'alert' key = 'error' elsif key == 'notice' key = 'success' end message = find_message(kind, options) flash[key] = message if message.present? endend",Monkey patching Devise (or any Rails gem)
Monkey patching Devise (or any Rails gem) controller method," I'm using the Devise authentication gem in my Rails project, and I want to change the keys it's using in flash alerts. (Devise uses :notice and :alert flash keys, but I want to change them to :success and :error so that I can display nice green/red boxes with Bootstrap.)So I want to be able to somehow override the set_flash_message method in DeviseController.Here's the new method: But I just don't know where to put it. UPDATE:Based on an answer I created a config/initializers/overrides.rb file with the following code: But this causes an error on every Devise action: Routing Error: undefined method 'prepend_before_filter' for Devise::SessionsController:Class <code>  def set_flash_message(key, kind, options = {}) if key == 'alert' key = 'error' elsif key == 'notice' key = 'success' end message = find_message(kind, options) flash[key] = message if message.present?end class DeviseController def set_flash_message(key, kind, options = {}) if key == 'alert' key = 'error' elsif key == 'notice' key = 'success' end message = find_message(kind, options) flash[key] = message if message.present? endend",Monkey patching Devise (or any Rails gem)
Monkey patching a controller method of Devise (or any Rails gem)," I'm using the Devise authentication gem in my Rails project, and I want to change the keys it's using in flash alerts. (Devise uses :notice and :alert flash keys, but I want to change them to :success and :error so that I can display nice green/red boxes with Bootstrap.)So I want to be able to somehow override the set_flash_message method in DeviseController.Here's the new method: But I just don't know where to put it. UPDATE:Based on an answer I created a config/initializers/overrides.rb file with the following code: But this causes an error on every Devise action: Routing Error: undefined method 'prepend_before_filter' for Devise::SessionsController:Class <code>  def set_flash_message(key, kind, options = {}) if key == 'alert' key = 'error' elsif key == 'notice' key = 'success' end message = find_message(kind, options) flash[key] = message if message.present?end class DeviseController def set_flash_message(key, kind, options = {}) if key == 'alert' key = 'error' elsif key == 'notice' key = 'success' end message = find_message(kind, options) flash[key] = message if message.present? endend",Monkey patching Devise (or any Rails gem)
What is meant by Modular in Sinatra," I was wondering if someone could simplify the explanation for what Modular is within a Sinatra app. I see that there is the classic setup and a modular setup within sinatra, but from reading the docs I can't quite grasp what Modular is doing.I would really like an explanation at its basic level if possible and why putting this in profile.rb would change the setup of the app (if that is the case). Please keep in mind that I'm a newbie, so simple and thorough explanations are best! <code>  require 'rubygems'require 'sinatra'class Profile < Sinatra::Baseget '/' do erb :indexendend",What is meant by Modular in Sinatra?
"Ruby - unexpected '=', expecting ')'"," Here is my program: On line 1, it is complaining tests.rb:1: syntax error, unexpected '=', expecting ')' def calculate(*numbers, options = {}) ________________________________________________^ [Finished in 0.1s with exit code 1]I thought it might have been a problem with default values in Ruby, because before v1.9, you were required to have all default values in order - but this shouldn't be the issue because my version is ruby 2.0.0p195 (2013-05-14) [i386-mingw32]I've tried transposing the spaces all over, because ruby seems to be particular with those things when it comes to methods, but no dice. Could it be my splat variable *numbers ? <code>  def calculate(*numbers, options = {}) add(numbers) if options[:add] subtract(numbers) if options[:add] == falseenddef add(*numbers) numbers.reduce(:+)enddef subtract(*numbers) numbers.reduce(:-)endp calculate(1,2)",Optional argument after splat argument
Array.sort_by broken in jruby 1.7.2?," This is not a trick question: What's going on here? I would have expected the arrays to be opposite one another (as they are with sort and the same parameters). <code>  [1,2,3].sort_by { |x, y| x <=> y }=> [1, 2, 3] [1,2,3].sort_by { |x, y| y <=> x }=> [1, 2, 3] ",Subtle difference between sort and sort_by
Subtle differences bewteen sort and sort_by," This is not a trick question: What's going on here? I would have expected the arrays to be opposite one another (as they are with sort and the same parameters). <code>  [1,2,3].sort_by { |x, y| x <=> y }=> [1, 2, 3] [1,2,3].sort_by { |x, y| y <=> x }=> [1, 2, 3] ",Subtle difference between sort and sort_by
Subtle difference bewteen sort and sort_by," This is not a trick question: What's going on here? I would have expected the arrays to be opposite one another (as they are with sort and the same parameters). <code>  [1,2,3].sort_by { |x, y| x <=> y }=> [1, 2, 3] [1,2,3].sort_by { |x, y| y <=> x }=> [1, 2, 3] ",Subtle difference between sort and sort_by
simple_from's collection_radio_button and custom label class," I'm trying to make a star rating form with radio collection using FontAwesome, for this I actually need to change the label classes of the collection_radio_button input generated by simple_form but can't find any obvious solution.So far I use: Which generates: But I'd like the labels to have an extra class, like: UPDATE: This class is defined statically at: https://github.com/plataformatec/simple_form/blob/master/lib/simple_form/tags.rb#L43 <code>  form_for @user do |f| f.collection_radio_buttons :rating, [[1, 'Bad'] ,[2, 'Ok'], [3, 'Great']], :first, :last, { item_wrapper_tag: false }end <input id=""review_rating_1"" name=""review[rating]"" type=""radio"" value=""1"" /><label class=""collection_radio_buttons"" for=""review_rating_1"">Bad</label><input id=""review_rating_2"" name=""review[rating]"" type=""radio"" value=""2"" /><label class=""collection_radio_buttons"" for=""review_rating_2"">Ok</label><input id=""review_rating_3"" name=""user[options]"" type=""radio"" value=""3"" /><label class=""collection_radio_buttons"" for=""review_rating_3"">Great</label> <input id=""review_rating_3"" name=""user[options]"" type=""radio"" value=""3"" /><label class=""collection_radio_buttons icon-star"" for=""review_rating_3"">Great</label>",simple_form's collection_radio_button and custom label class
Rspec correct place for testing authorization," Where should I test authorization with RSpec? When you create a Rails application with RSpec, there are three folders that seems to be adequate:spec/routingspec/requestsspec/controllersIn which one should I test if the user is logged in? Should I test in more than one spec type? <code> ",RSpec: Which is the right place for testing authorization?
Ruby string (or array) to array of arrays," I have a string with an array of arrays inside: Can I convert this to the array of arrays, without using eval or a regular expression, gsub, etc.?Can I make turn it into:  <code>  ""[[1, 2], [3, 4], [5, 6]]"" [[1, 2], [3, 4], [5, 6]]",How do I convert a string to an array of arrays?
Can't install nokogiri for ruby in windows," I know this is simple but I just can't figure it out. I need to run a script in Ruby and it requires Nokogiri. I do have some experience in other languages but not in Ruby.Here is my system :Ruby 2.0.0-p195 (x64) is installed @ C:\Programs\RubyLanguageRuby Development Kit (mingw64-64-4.7.2-20130224-1432) is installed @ C:\Programs\RubyDevKitWhen I run gem install nokogiri I get this error: Easy enough. So I followed the link of above and did to step 3. However step 4 says generate ""config.yml"". So I did. Now the file is an empty list with some comments. I still can't install Nokogiri because of error above and I don't seem to get anywhere with DevKit . What I am saying is that the steps in the Development Kit installation is not clear enough for me.Update it now says installation of Nokogiri failed ( DevKit Works according to step 5 : Installing documentation for json-1.8.01 gem installed ) CMD log <code>  ERROR: Error installing nokogiri: The 'nokogiri' native gem requires installed build tools.Please update your PATH to include build tools or download the DevKitfrom 'http://rubyinstaller.org/downloads' and follow the instructionsat 'http://github.com/oneclick/rubyinstaller/wiki/Development-Kit' mkmf.log: package configuration for libxslt is not foundpackage configuration for libxml-2.0 is not foundpackage configuration for libiconv is not foundfind_header: checking for libxml/parser.h... -------------------- no""x86_64-w64-mingw32-gcc -o conftest.exe -IC:/Programs/RubyLanguage/include/ruby-2.0.0/x64-mingw32 -IC:/Programs/RubyLanguage/include/ruby-2.0.0/ruby/backward -IC:/Programs/RubyLanguage/include/ruby-2.0.0 -I. -IC:/Programs/RubyLanguage/include/libxml2 -IC:/Programs/RubyLanguage/include -DFD_SETSIZE=2048 -D_WIN32_WINNT=0x0501 -D_FILE_OFFSET_BITS=64 -O3 -fno-omit-frame-pointer -fno-fast-math -g -Wall -Wextra -Wno-unused-parameter -Wno-parentheses -Wno-long-long -Wno-missing-field-initializers -Wunused-variable -Wpointer-arith -Wwrite-strings -Wdeclaration-after-statement -Wimplicit-function-declaration -DXP_WIN -DXP_WIN32 -DUSE_INCLUDED_VASPRINTF -O3 -Wall -Wcast-qual -Wwrite-strings -Wconversion -Wmissing-noreturn -Winline conftest.c -L. -LC:/Programs/RubyLanguage/lib -LC:/Programs/RubyLanguage/lib -L. -lx64-msvcrt-ruby200 -lshell32 -lws2_32 -limagehlp -lshlwapi ""In file included from C:/Programs/RubyLanguage/include/ruby-2.0.0/ruby/defines.h:153:0, from C:/Programs/RubyLanguage/include/ruby-2.0.0/ruby/ruby.h:70, from C:/Programs/RubyLanguage/include/ruby-2.0.0/ruby.h:33, from conftest.c:1:C:/Programs/RubyLanguage/include/ruby-2.0.0/ruby/win32.h: In function 'rb_w32_pow':C:/Programs/RubyLanguage/include/ruby-2.0.0/ruby/win32.h:776:16: warning: conversion to 'double' from 'long double' may alter its value [-Wconversion]In file included from C:/Programs/RubyLanguage/include/ruby-2.0.0/ruby.h:33:0, from conftest.c:1:C:/Programs/RubyLanguage/include/ruby-2.0.0/ruby/ruby.h: In function 'rb_float_value':C:/Programs/RubyLanguage/include/ruby-2.0.0/ruby/ruby.h:777:6: warning: negative integer implicitly converted to unsigned type [-Wsign-conversion]C:/Programs/RubyLanguage/include/ruby-2.0.0/ruby/ruby.h:777:6: warning: negative integer implicitly converted to unsigned type [-Wsign-conversion]checked program was:/* begin */1: #include ""ruby.h""2: 3: #include <winsock2.h>4: #include <windows.h>5: int main(int argc, char **argv)6: {7: return 0;8: }/* end */""x86_64-w64-mingw32-gcc -E -IC:/Programs/RubyLanguage/include/ruby-2.0.0/x64-mingw32 -IC:/Programs/RubyLanguage/include/ruby-2.0.0/ruby/backward -IC:/Programs/RubyLanguage/include/ruby-2.0.0 -I. -IC:/Programs/RubyLanguage/include/libxml2 -IC:/Programs/RubyLanguage/include -DFD_SETSIZE=2048 -D_WIN32_WINNT=0x0501 -D_FILE_OFFSET_BITS=64 -O3 -fno-omit-frame-pointer -fno-fast-math -g -Wall -Wextra -Wno-unused-parameter -Wno-parentheses -Wno-long-long -Wno-missing-field-initializers -Wunused-variable -Wpointer-arith -Wwrite-strings -Wdeclaration-after-statement -Wimplicit-function-declaration -DXP_WIN -DXP_WIN32 -DUSE_INCLUDED_VASPRINTF -O3 -Wall -Wcast-qual -Wwrite-strings -Wconversion -Wmissing-noreturn -Winline conftest.c -o conftest.i""conftest.c:5:27: fatal error: libxml/parser.h: No such file or directorycompilation terminated.checked program was:/* begin */1: #include ""ruby.h""2: 3: #include <winsock2.h>4: #include <windows.h>5: #include <libxml/parser.h>/* end */ Microsoft Windows [Version 6.1.7601]Copyright (c) 2009 Microsoft Corporation. All rights reserved.C:\Users\SEPEHR>gem install nokogiriTemporarily enhancing PATH to include DevKit...Building native extensions. This could take a while...ERROR: Error installing nokogiri: ERROR: Failed to build gem native extension. C:/Programs/RubyLanguage/bin/ruby.exe extconf.rbchecking for libxml/parser.h... no-----libxml2 is missing. please visit http://nokogiri.org/tutorials/installing_nokogiri.html for help with installing dependencies.-----*** extconf.rb failed ***Could not create Makefile due to some reason, probably lack of necessarylibraries and/or headers. Check the mkmf.log file for more details. You mayneed configuration options.Provided configuration options: --with-opt-dir --without-opt-dir --with-opt-include --without-opt-include=${opt-dir}/include --with-opt-lib --without-opt-lib=${opt-dir}/lib --with-make-prog --without-make-prog --srcdir=. --curdir --ruby=C:/Programs/RubyLanguage/bin/ruby --with-zlib-dir --without-zlib-dir --with-zlib-include --without-zlib-include=${zlib-dir}/include --with-zlib-lib --without-zlib-lib=${zlib-dir}/lib --with-iconv-dir --without-iconv-dir --with-iconv-include --without-iconv-include=${iconv-dir}/include --with-iconv-lib --without-iconv-lib=${iconv-dir}/lib --with-xml2-dir --without-xml2-dir --with-xml2-include --without-xml2-include=${xml2-dir}/include --with-xml2-lib --without-xml2-lib=${xml2-dir}/lib --with-xslt-dir --without-xslt-dir --with-xslt-include --without-xslt-include=${xslt-dir}/include --with-xslt-lib --without-xslt-lib=${xslt-dir}/lib --with-libxslt-config --without-libxslt-config --with-pkg-config --without-pkg-config --with-libxml-2.0-config --without-libxml-2.0-config --with-pkg-config --without-pkg-config --with-libiconv-config --without-libiconv-config --with-pkg-config --without-pkg-configGem files will remain installed in C:/Programs/RubyLanguage/lib/ruby/gems/2.0.0/gems/nokogiri-1.6.0 for inspection.Results logged to C:/Programs/RubyLanguage/lib/ruby/gems/2.0.0/gems/nokogiri-1.6.0/ext/nokogiri/gem_make.out",Can't install Nokogiri for Ruby in Windows
"ruby, get timestamp including milliseconds"," I use this command a lot on OS X to create a timestamp for archiving purposes: This gives an answer in this format: I'd like to add milliseconds to the end of this string. Is it possible to get that with Ruby from the command line?It's unfortunately not possible to do this on OS X by adding something to the command above: Add milliseconds to timestamp (bash, unix)  <code>  date -n +%Y%m%d%H%M%S 20130625230005",Get timestamp including milliseconds
how do i use ruby rails to generate a local xml file, I have a project that I am working on and I do not know much about Rails or Ruby.I need to generate an XML file from user input.Can some direct me to any resource that can show me how to do this pretty quickly and easily? <code> ,What can I use to generate a local XML file?
IntelliJ IDEA 12 not stopping at brekpoint in rails/ruby," I have IDEA 12 and cannot properly use debugger in Rails/Ruby [a similar question is this one Idea 11 breakpoints & ruby]. When I pressed DEBUG the first time on a rails/ruby app it correctly installed the ruby-debug-base19x and ruby-debug-ide. Issuing a gem list | grep debug shows these gems: The debug [local debug] is starting successfully and I have this in the console: The only thing is that the breakpoints are never hit. I tried to put breakpoints in Controllers and Views but nothing changed. I tried plenty of times to install uninstall gems but I never managed to have the debugger working in Rails/Ruby. Tried also with the remote debugging but nothing as well. <code>  debugger-ruby_core_source (1.2.2)ruby-debug-base19x (0.11.30.pre12)ruby-debug-ide (0.4.17.beta16) /home/user/.rvm/rubies/ruby-1.9.3-p194/bin/ruby -e at_exit{sleep(1)};$stdout.sync=true;$stderr.sync=true;load($0=ARGV.shift) /home/user/.rvm/gems/ruby-1.9.3-p194/gems/ruby-debug-ide-0.4.17.beta16/bin/rdebug-ide --port 55940 --dispatcher-port 37293 -- /home/user/work/IdeaProjects/rails/xtrade/script/rails server -b 0.0.0.0 -p 3000 -e developmentFast Debugger (ruby-debug-ide 0.4.17.beta16, ruby-debug-base19x 0.11.30.pre12) listens on 127.0.0.1:55940=> Booting WEBrick=> Rails 3.2.11 application starting in development on http://0.0.0.0:3000=> Call with -d to detach=> Ctrl-C to shutdown server[2013-06-26 20:53:32] INFO WEBrick 1.3.1[2013-06-26 20:53:32] INFO ruby 1.9.3 (2012-04-20) [x86_64-linux][2013-06-26 20:53:32] INFO WEBrick::HTTPServer#start: pid=32688 port=3000",IntelliJ IDEA 12 not stopping at breakpoints in rails/ruby
Why does `%i` denote string to symbol array interpolation in Ruby?," Ruby has classically supported the following literals: My understanding of the origin of those are as follows:%q[] is for quotes%r[] is for regex%w[] is for words%x[] is for executeRuby 2.0 introduced the %i notation: Why i? <code>  %q[quack quack] #=> ""quack quack""%r[quack quack] #=> /quack quack/%w[quack quack] #=> [""quack"", ""quack""]%x[echo quack quack] #=> ""quack quack\n"" %i[quack quack] #=> [:quack, :quack]",What is the origin of `%i` notation?
Ruby hash ordering preserved?," If I iterate over a hash once, then do so again without modifying the contents, are the keys guaranteed to appear in the same order?A quick test suggests as much: Another question, if the above is allowed, can I iterate through it changing only values, without adding any new keys, and have the ordering of the keys be unchanged?similar to this python question: Do dicts preserve iteration order if they are not modified?Unlike the proposed duplicate I'm not interested in whether the elements have a fully specified order, only the restriction that two consecutive iterations without modification provide the same sequence. <code>  > h = {'a' => 1, 'b' => 2, 'c' => 3}> 100_000.times.map { h.to_s == h.to_s }.all?=> true",Hash ordering preserved between iterations if not modified?
Hash ordering preserved between iterations?," If I iterate over a hash once, then do so again without modifying the contents, are the keys guaranteed to appear in the same order?A quick test suggests as much: Another question, if the above is allowed, can I iterate through it changing only values, without adding any new keys, and have the ordering of the keys be unchanged?similar to this python question: Do dicts preserve iteration order if they are not modified?Unlike the proposed duplicate I'm not interested in whether the elements have a fully specified order, only the restriction that two consecutive iterations without modification provide the same sequence. <code>  > h = {'a' => 1, 'b' => 2, 'c' => 3}> 100_000.times.map { h.to_s == h.to_s }.all?=> true",Hash ordering preserved between iterations if not modified?
Rails: Order by field in related model with ActiveRecord condition," I am trying to order by a field in a related model in Rails. All of the solutions I have researched have not addressed if the related model is filtered by another parameter?Item model Related Model: I am retrieving Items using a where clause: I need to order by the 'Position' column in the related table. The trouble has been that in the Priority model, an item could be listed for multiple companies. So the positions are dependent on which company_id they have. When I display the items, it is for one company, ordered by position within the company. What is the proper way to accomplish this? Any help is appreciated.PS - I am aware of acts_as_list however found it did not quite suit my setup here, so I am manually handling saving the sorting while still using jquery ui sortable.  <code>  class Item < ActiveRecord::Base has_many :priorities class Priority < ActiveRecord::Base belongs_to :item validates :item_id, presence: true validates :company_id, presence: true validates :position, presence: trueend @items = Item.where('company_id = ? and approved = ?', @company.id, true).all",Order by field in related model with ActiveRecord condition
How to move first element to the end of array ruby," What is the best way to move the first element of the array till the end of this same array?ie: [a,b,c,d]""Some operation""result: [b,c,d,a]What should this ""Some operation"" be? <code> ",How to move first element to the end of array
"WARNING: Nokogiri was built against LibXML version 2.8.0, but has dynamically loaded 2.9.0"," Mac users, see:Mac user and getting WARNING: Nokogiri was built against LibXML version 2.7.8, but has dynamically loaded 2.7.3 I'm using linux (openSUSE 12.3) and running nokogiri -v shows: <code>  WARNING: Nokogiri was built against LibXML version 2.8.0, but dynamically loaded 2.9.0# Nokogiri (1.6.0)---warnings:- Nokogiri was built against LibXML version 2.8.0, but dynamically loaded 2.9.0nokogiri: 1.6.0ruby: version: 2.0.0 platform: x86_64-linux description: ruby 2.0.0p247 (2013-06-27 revision 41674) [x86_64-linux] engine: rubylibxml: binding: extension source: packaged libxml2_path: /home/william/.rvm/gems/ruby-2.0.0-p247/gems/nokogiri-1.6.0/ports/x86_64-suse-linux/libxml2/2.8.0 libxslt_path: /home/william/.rvm/gems/ruby-2.0.0-p247/gems/nokogiri-1.6.0/ports/x86_64-suse-linux/libxslt/1.1.26 compiled: 2.8.0 loaded: 2.9.0","on Linux, how can I resolve WARNING: Nokogiri was built against LibXML version 2.8.0, but has dynamically loaded 2.9.0 ?"
"how to remove this WARNING: Nokogiri was built against LibXML version 2.8.0, but has dynamically loaded 2.9.0"," Mac users, see:Mac user and getting WARNING: Nokogiri was built against LibXML version 2.7.8, but has dynamically loaded 2.7.3 I'm using linux (openSUSE 12.3) and running nokogiri -v shows: <code>  WARNING: Nokogiri was built against LibXML version 2.8.0, but dynamically loaded 2.9.0# Nokogiri (1.6.0)---warnings:- Nokogiri was built against LibXML version 2.8.0, but dynamically loaded 2.9.0nokogiri: 1.6.0ruby: version: 2.0.0 platform: x86_64-linux description: ruby 2.0.0p247 (2013-06-27 revision 41674) [x86_64-linux] engine: rubylibxml: binding: extension source: packaged libxml2_path: /home/william/.rvm/gems/ruby-2.0.0-p247/gems/nokogiri-1.6.0/ports/x86_64-suse-linux/libxml2/2.8.0 libxslt_path: /home/william/.rvm/gems/ruby-2.0.0-p247/gems/nokogiri-1.6.0/ports/x86_64-suse-linux/libxslt/1.1.26 compiled: 2.8.0 loaded: 2.9.0","on Linux, how can I resolve WARNING: Nokogiri was built against LibXML version 2.8.0, but has dynamically loaded 2.9.0 ?"
Native extensions fallback to pure ruby if not supported on gem install," I am developing a gem, which is currently pure Ruby, but I have also been developing a faster C variant for one of the features. The feature is usable, but sometimes slow, in pure Ruby. The slowness would only impact some of the potential users (depends which features they need, and how they use them), so it makes sense to have the gem available with graceful fallback to Ruby-only functions if it cannot compile on a target system.I would like to maintain the Ruby and C variants of the feature in a single gem, and provide the best (i.e. fastest) experience from the gem on installation. That would allow me to support the widest set of potential users from a single project of mine. It would also allow other people's dependent gems and projects to use the best available dependency on a target system, as opposed to a lowest-common-denominator version for compatibility.I would expect the require to fallback at runtime to appear in the main lib/foo.rb file simply like this: However, I don't know how to get the gem installation to check (or try and fail) for native extension support so that the gem installs correctly whether or not it can build 'foo_extended'. When I researched how to do this, I mainly found discussions from a few years back e.g. http://permalink.gmane.org/gmane.comp.lang.ruby.gems.devel/1479 and http://rubyforge.org/pipermail/rubygems-developers/2007-November/003220.html that imply Ruby gems do not really support this feature. Nothing recent though, so I am hoping someone on SO has some more up-to-date knowledge?My ideal solution would be a way to detect, prior to attempting a build of the extension, that the target Ruby did not support (or perhaps simply not want, at the project level) C native extensions. But also, a try/catch mechanism would be OK if not too dirty.Is this possible, if so how? Or is the advice to have two gem variants published (e.g. foo and foo_ruby), that I am finding when I search, still current best practice? <code>  begin require 'foo/foo_extended'rescue LoadError require 'foo/ext_bits_as_pure_ruby'end",Native extensions fallback to pure Ruby if not supported on gem install
How can I format a float to a certain number of digits?," I am trying to format a float in Ruby to exactly four digits, including the decimal.For instance: Right now, I am trying to format the float as follows: Which successfully limits the decimal places to two.I'm also aware of: Which succesfully turns 1 into 01, but loses the decimal places.I tried to combine these like so: to no apparent effect. It has the same results as %.2f.Is there a way to force Ruby to format the string into this four digit format? <code>  1 => 01.002.4 => 02.401.4455 => 01.45 str_result = "" %.2f "" %result str_result = "" %2d "" %result str_result = "" %2.2f "" %result",How can I format a float to a certain number of decimal and integer digits?
Get HTTP Headers before downloading with open-uri (Ruby)," I am currently using OpenURI to download a file in Ruby. Unfortunately, it seems impossible to get the HTTP headers without downloading the full file: Running the code above shows that it first downloads the full file and only then prints the header I need.Is there a way to get the headers before the full file is downloaded, so I can cancel the download if the headers are not what I expect them to be? <code>  open(base_url, :content_length_proc => lambda {|t| if t && 0 < t pbar = ProgressBar.create(:total => t) end }, :progress_proc => lambda {|s| pbar.progress = s if pbar }) {|io| puts io.size puts io.meta['content-disposition'] }",How to get HTTP headers before downloading with Ruby's OpenUri
dynamic method calling in ruby," As far as I am aware there are three ways to dynamically call a method in Ruby:Method 1: Method 2: Method 3: By benchmarking them I have established that Method 1 is by far the fastest, Method 2 is slower, and Method 3 is by far the slowest.I have also found that .call and .send both allow calling private methods, while eval does not.So my question is: is there any reason to ever use .send or eval? Why would you not always just use the fastest method? What other differences do these methods of calling dynamic methods have? <code>  s = SomeObject.newmethod = s.method(:dynamic_method)method.call s = SomeObject.news.send(:dynamic_method) s = SomeObject.neweval ""s.dynamic_method""",Dynamic method calling in Ruby
Issue regarding rails version also the ruby version installation," When I use rvm use 1.9.2, I get Rails v3.0.0: When I use rvm use 2.0.0, I get Rails v3.2.13: I need Rails v3.2.13 with Ruby 1.9.2.When I used rvm use 1.9.2 --default and gem install rails -v 3.2.13, I got the following error: <code>  vikas@admin1-DL-H61MXEL:~$ rvm use 1.9.2 --defaultUsing /home/vikas/.rvm/gems/ruby-1.9.2-p320vikas@admin1-DL-H61MXEL:~$ rails -vRails 3.0.0 vikas@admin1-DL-H61MXEL:~$ rvm use 2.0.0Using /home/vikas/.rvm/gems/ruby-2.0.0-p195vikas@admin1-DL-H61MXEL:~$ rails -vRails 3.2.13 While executing gem ... (Gem::FilePermissionError) You don't have write permissions into the /home/vikas/.rvm/gems/ruby-1.9.2-p320/bin directory. This is the error I'm facing now.","Why do I get ""write permission"" errors installing Rails?"
how to prepare string in ruby for terminal (exec)," I am attempting to start mplayer. My filename contains spaces and these should be escaped. This is the code I am using: where #{song.file} contains a path like ""/home/example/music/01 - a song.mp3"". How can I escape this variable properly (and possible other weird characters that the title may contain) so the terminal will accept my command? <code>  @player_pid = fork do exec ""/usr/bin/mplayer #{song.file}""end",How to escape strings for terminal in Ruby?
How to escape strings for terminal," I am attempting to start mplayer. My filename contains spaces and these should be escaped. This is the code I am using: where #{song.file} contains a path like ""/home/example/music/01 - a song.mp3"". How can I escape this variable properly (and possible other weird characters that the title may contain) so the terminal will accept my command? <code>  @player_pid = fork do exec ""/usr/bin/mplayer #{song.file}""end",How to escape strings for terminal in Ruby?
Active Record set_table_name error for .sqitel file," I'm trying to interact with a .sqlite file by connecting to it with Active Record. I'm doing this: The connection to the database works as printing out the database tables gives: But the attempt to map ZPATIENT table to Patient Active Record models fails with: Not sure what I am doing wrong? Do I need to do some sort of migration for Active Record to understand how to map the table to models? <code>  require 'active_record'# Connect to DBActiveRecord::Base.establish_connection( :adapter => 'sqlite3', :database => 'database.sqlite')# Log the tables to make sure Active Record is connected to the DB correcltyputs ActiveRecord::Base.connection.tables# Map from existing table records to a Active Record modelclass Patient < ActiveRecord::Base set_table_name ""ZPATIENT""end ZPATIENTZZCONFIGZ_PRIMARYKEYZ_METADATA ~/.rvm/gems/ruby-1.9.3-p448/gems/activerecord-4.0.0/lib/active_record/dynamic_matchers.rb:22:in `method_missing': undefined method `set_table_name' for Patient(Table doesn't exist):Class (NoMethodError) from script.rb:8:in `<class:Patient>' from script.rb:7:in `<main>'",Active Record set_table_name error for .sqlite file
Rails Installtion error :The 'atomic' native gem requires installed build tools," i m installing Rails 3 on my windows.I installed latest ruby 2.0.0, and i updated gems.but when i installing rails by using gem install rails , successful message has come but at last i found plese help me... <code>  ERROR: Error installing rails: The 'atomic' native gem requires installed build tools Please update your PATH to include build tools or download the DevKit from 'http://rubyinstaller.org/downloads' and follow the instructions at 'http://github.com/oneclick/rubyinstaller/wiki/Development-Kit'",Rails Installation error :The 'atomic' native gem requires installed build tools
"In Rails, what exactly does tLABEL mean?"," I usually gloss over this error when I get it and just fix whatever syntax error caused it, but out of curiosity, what exactly does tLABEL mean in unexpected tLABEL? I've tried searching for the answer, but just get a ton of people trying to get help with their errors. I've also found this definition: tlabel is a nonwindowed VCL control that displays non editable text on a form. It is defined in the StdCtrls.pas unit.but I don't think that is a very accessible definition.  <code> ","In Ruby, what exactly does tLABEL mean?"
Call method without returning its value, Suppose I want to write a method in ruby whose last line is a method call but I do not want to return its return value. Is there a more elegant way to accomplish this other than adding a nil after the call? <code>  def f(param) # some extra logic with param g(param) # I don't want to return the return of gend,Best way to prevent returning last evaluated expression
I'm getting a permission denied error while installing a Ruby Gem (Jekyll)," I'm attempting to install Jekyll. After running gem install jekyll I get this error: I can see that Jekyll is installed when I run gem list so I'm thoroughly confused: I've had a lot of problems with my user paths in the past, so I'm wondering if this error could have something to do with that?Here is the output of gem env: Here is my "".bash_profile"": Could somebody please help me get Jekyll installed, or at least get past this permissions error? <code>  ERROR: While executing gem ... (Errno::EACCES) Permission denied - /usr/local/lib/ruby/gems/2.0.0/gems/jekyll-1.0.3/CONTRIBUTING.md *** LOCAL GEMS ***bigdecimal (1.2.0)classifier (1.3.3)colorator (0.1)commander (4.1.3)directory_watcher (1.4.1)fast-stemmer (1.0.2)highline (1.6.19)io-console (0.4.2)jekyll (1.0.3)json (1.7.7)kramdown (1.0.2)liquid (2.5.0)maruku (0.6.1)minitest (4.3.2)posix-spawn (0.3.6)psych (2.0.0)pygments.rb (0.5.1)rake (0.9.6)rdoc (4.0.0)rubygems-update (2.0.3)safe_yaml (0.7.1)syntax (1.0.0)test-unit (2.0.0.0)yajl-ruby (1.1.0) RubyGems Environment: - RUBYGEMS VERSION: 2.0.3 - RUBY VERSION: 2.0.0 (2013-02-24 patchlevel 0) [x86_64-darwin12.3.0] - INSTALLATION DIRECTORY: /usr/local/Cellar/ruby/2.0.0-p0/lib/ruby/gems/2.0.0 - RUBY EXECUTABLE: /usr/local/Cellar/ruby/2.0.0-p0/bin/ruby - EXECUTABLE DIRECTORY: /usr/local/Cellar/ruby/2.0.0-p0/bin - RUBYGEMS PLATFORMS: - ruby - x86_64-darwin-12 - GEM PATHS: - /usr/local/Cellar/ruby/2.0.0-p0/lib/ruby/gems/2.0.0 - /Users/me/.gem/ruby/2.0.0 - GEM CONFIGURATION: - :update_sources => true - :verbose => true - :backtrace => false - :bulk_threshold => 1000 - REMOTE SOURCES: - https://rubygems.org/ export PATH=""/usr/local/bin:/usr/local/sbin:~/bin:$PATH""[[ -s ""$HOME/.rvm/scripts/rvm"" ]] && source ""$HOME/.rvm/scripts/rvm"" # Load RVM into a shell session *as a function*PATH=$PATH:above/path/to/gemssource ~/.rvm/scripts/rvm","Why do I get a ""permission denied"" error while installing a gem?"
Really basic Ruby Quz," The code below: produces: Why does function 'a' called show first? I expected a= to be shown first. <code>  def a print ""Function 'a' called\n"" 99endprint ""a="", a, ""\n"" Function 'a' calleda=99",Order of output
Confused about the order of output. Can someone explain?," The code below: produces: Why does function 'a' called show first? I expected a= to be shown first. <code>  def a print ""Function 'a' called\n"" 99endprint ""a="", a, ""\n"" Function 'a' calleda=99",Order of output
How to compare to txt files with rspec, I have a method which compares if two text files have the same content.How do I compare if two text files have the same content using RSpec? <code> ,How do I compare two text files with RSpec?
How do I compare two text files with rspec?, I have a method which compares if two text files have the same content.How do I compare if two text files have the same content using RSpec? <code> ,How do I compare two text files with RSpec?
(Ruby) Is there a way to know how many parameters are needed for a method?," Using irb, we can list methods for particular object by doing following: But if I want to know how many parameters are needed for a particular method, how can I achieve this? I mean is there any way (by hitting some command on irb), we can get number of parameters for particular method (instead of referring to docs)?.methods returns only method names, not list of parameters for method. <code>  ""Name"".methods",Is there a way to know how many parameters are needed for a method?
Using Nokogiri to parse XML file," I'm having some issues with Nokogiri.I am trying to parse this XML file: I want all of that information displayed to the screen, that's it.Should be simple right?I am doing this: Each Items is a node, and under that there are children nodes of Item?I create a map of this, which returns a hash, and the code in {} goes through each node and places the children text into @block.Then I can display all of the child node's text to the screen.I have no idea how far or close I am, because I've read so many articles, and am still a little confused on the basics especially since usually with a new language, I read from a file and output to the screen for a basic program. <code>  <Collection version=""2.0"" id=""74j5hc4je3b9""> <Name>A Funfair in Bangkok</Name> <PermaLink>Funfair in Bangkok</PermaLink> <PermaLinkIsName>True</PermaLinkIsName> <Description>A small funfair near On Nut in Bangkok.</Description> <Date>2009-08-03T00:00:00</Date> <IsHidden>False</IsHidden> <Items> <Item filename=""AGC_1998.jpg""> <Title>Funfair in Bangkok</Title> <Caption>A small funfair near On Nut in Bangkok.</Caption> <Authors>Anthony Bouch</Authors> <Copyright>Copyright Anthony Bouch</Copyright> <CreatedDate>2009-08-07T19:22:08</CreatedDate> <Keywords> <Keyword>Funfair</Keyword> <Keyword>Bangkok</Keyword> <Keyword>Thailand</Keyword> </Keywords> <ThumbnailSize width=""133"" height=""200"" /> <PreviewSize width=""532"" height=""800"" /> <OriginalSize width=""2279"" height=""3425"" /> </Item> <Item filename=""AGC_1164.jpg"" iscover=""True""> <Title>Bumper Cars at a Funfair in Bangkok</Title> <Caption>Bumper cars at a small funfair near On Nut in Bangkok.</Caption> <Authors>Anthony Bouch</Authors> <Copyright>Copyright Anthony Bouch</Copyright> <CreatedDate>2009-08-03T22:08:24</CreatedDate> <Keywords> <Keyword>Bumper Cars</Keyword> <Keyword>Funfair</Keyword> <Keyword>Bangkok</Keyword> <Keyword>Thailand</Keyword> </Keywords> <ThumbnailSize width=""200"" height=""133"" /> <PreviewSize width=""800"" height=""532"" /> <OriginalSize width=""3725"" height=""2479"" /> </Item> </Items></Collection> require 'nokogiri'doc = Nokogiri::XML(File.open(""sample.xml""))@block = doc.css(""items item"").map {|node| node.children.text}puts @block",How do I use Nokogiri to parse an XML file?
Ruby regex match including new line," I have a regex to grab everything between ""*"": I want the match to be able to include newline characters. How can I do it? <code>  str = ""Donec sed odio dui. *Nullam id dolor id nibh ultricies vehicula ut*""str.match(/\*(.*)\*/)[1]",Regex match including new line
"What does [""string""].pack('H*') mean in Ruby?", I need to translate some Ruby code to JavaScript and came across the following function: What exactly does [h].pack('H*') mean in this context? How would it translate to JavaScript? <code>  def sha1_hex(h) Digest::SHA1.hexdigest([h].pack('H*'))end,"What does [""string""].pack('H*') mean?"
How to delete a specific line in a text file (ruby)," How can I delete a single, specific line from a text file? For example the third line, or any other line. I tried this: Unfortunately, it does nothing. I tried a lot of other solutions, but nothing works. <code>  line = 2file = File.open(filename, 'r+')file.each { last_line = file.pos unless file.eof? }file.seek(last_line, IO::SEEK_SET)file.close",Deleting a specific line in a text file?
How to delete every other lines in a text file," How can I delete a single, specific line from a text file? For example the third line, or any other line. I tried this: Unfortunately, it does nothing. I tried a lot of other solutions, but nothing works. <code>  line = 2file = File.open(filename, 'r+')file.each { last_line = file.pos unless file.eof? }file.seek(last_line, IO::SEEK_SET)file.close",Deleting a specific line in a text file?
How to delete a specific line in a text file (ruby)," How can I delete a single, specific line from a text file? For example the third line, or any other line. I tried this: Unfortunately, it does nothing. I tried a lot of other solutions, but nothing works. <code>  line = 2file = File.open(filename, 'r+')file.each { last_line = file.pos unless file.eof? }file.seek(last_line, IO::SEEK_SET)file.close",Deleting a specific line in a text file?
How to delete a specific line in a text file," How can I delete a single, specific line from a text file? For example the third line, or any other line. I tried this: Unfortunately, it does nothing. I tried a lot of other solutions, but nothing works. <code>  line = 2file = File.open(filename, 'r+')file.each { last_line = file.pos unless file.eof? }file.seek(last_line, IO::SEEK_SET)file.close",Deleting a specific line in a text file?
Deleteing a specific line in a text file?," How can I delete a single, specific line from a text file? For example the third line, or any other line. I tried this: Unfortunately, it does nothing. I tried a lot of other solutions, but nothing works. <code>  line = 2file = File.open(filename, 'r+')file.each { last_line = file.pos unless file.eof? }file.seek(last_line, IO::SEEK_SET)file.close",Deleting a specific line in a text file?
Enable stack dump on exception in Rails 4 console," I am using Ruby on Rails with the pry gem. When an error occurs during a rake task, I get a very nice stack trace. When however I do something in my rails console that triggers an exception, I only get to see the error message and the one line of code that triggered it (which most of the time is somewhere in the rails core).Is there a way to enable these stack dumps in the console? <code> ",Enable stack dump on exception in Rails console
form_for error messages in Rails 4, What is the preferred way to display validation error messages using form_for in Rails 4? <code>  <%= form_for @post do |f| %> ...<% end %>,form_for error messages in Ruby on Rails
substuting the value of varible inside back tick operator," How can I substitute the value of a variable inside the backtick operator? <code>  script_dir = File.expand_path File.dirname(__FILE__)p `ruby -e p ""$script_dir""` # this does not work",Substituting the value of variable inside backtick operator
How to make an optional strong parameters key yet still filter params nested in it?," I have this in my controller: Let's assume this rspec spec, which works as expected: However, the following causes ActionController::ParameterMissing: It has to do with controller macros that I use for other actions and through which I cannot control the params being sent (the macros checks for user credentials, so I don't really care about actually testing an #update action, rather I just test before_filters for it).So my question is: How do I make params[:item] optional, yet still filter attributes within it if it's present? <code>  params.require(:item).permit! put :update, id: @item.id, item: { name: ""new name"" } put :update, id: @item.id, item: nil",How to make an optional strong parameters key but filter nested params?
Add prefix to each key in Ruby hash," I have the following keys in my hash: I want to add the ""shipping_"" prefix to each of them so they would become: instead. How can I do this? <code>  address, postcode shipping_address, shipping_postcode",How do I add a prefix to each key in a hash?
When do I need to restart serveur in Rails?," I have noticed that when I change rails project files such as a html.erb or .css, I don't have to restart the server with the rails -s command. But I think when I want to install a new gem I have to. The thing is that I'm trying to get jQuery to work, so i'm tired of doing rails -s all the time.Can anyone tell me when do I have to run rails -s again when I'm modifying my app and when can I afford NOT to do it? By not doing it, I mean simply refreshing the webpage to see the changes. <code> ",When do I need to restart server in Rails?
I want to parse and scrape the meta tags of a URL with Nokigiri," I am using Nokogiri to pull the <h1> and <title> tags,but I am having trouble getting these: I have this code: I looked in the docs and didn't find anything. Would I use regex to do this?Thanks. <code>  <meta name=""description"" content=""I design and develop websites and applications.""><meta name=""keywords"" content=""web designer,web developer""> url = 'https://en.wikipedia.org/wiki/Emma_Watson' page = Nokogiri::HTML(open(url))puts page.css('title')[0].text puts page.css('h1')[0].textputs page.css('description')puts META DESCRIPTIONputs META KEYWORDS",How do I parse and scrape the meta tags of a URL with Nokogiri?
How do I parse and scrape the meta tags of a URL with Nokigiri?," I am using Nokogiri to pull the <h1> and <title> tags,but I am having trouble getting these: I have this code: I looked in the docs and didn't find anything. Would I use regex to do this?Thanks. <code>  <meta name=""description"" content=""I design and develop websites and applications.""><meta name=""keywords"" content=""web designer,web developer""> url = 'https://en.wikipedia.org/wiki/Emma_Watson' page = Nokogiri::HTML(open(url))puts page.css('title')[0].text puts page.css('h1')[0].textputs page.css('description')puts META DESCRIPTIONputs META KEYWORDS",How do I parse and scrape the meta tags of a URL with Nokogiri?
Delete first x entires of an array," I have an array of items, and I need to delete the first x items of it. Is there a built-in function in the Ruby Array class to do this? I had a search around and only found, what looked like, incredibly messy or inefficient ways to do it.I'd preferably like something like this: <code>  my_items = [ 'item1', 'item2', 'item3', 'item4' ]trimmed_items = my_items.delete(y, x) # deleting x entries from index y",Delete first x elements of an array
How does ruby keeps track of variables," I am confused with the way Ruby keeps track of variables. For example:case 1: will give you an error saying undefined local variable or method a.case 2: will give you same the error for the second a, not for the first a.case 3: If you compare case 2 and case 3, in case 2 it ignored the error first a. I think its because of ruby's execution path has not reached the variable a due to false in condition. Same thing when I do with assignment in case 3. It gives me variable a defined but with nil value. Can someone explain the way it works? <code>  if true a end if false a end a if false a=2 end a #=> nil defined? a #=> 'local-variable'",How does ruby keep track of variables
undefined method `update' for nil:NilClass rails 4.0.0," I'm a beginner in Ruby on Rails and stack overflow. So sorry if there are mistakes in asking this question or...I'm trying to write edit/update for my blogger project. This is my controller: This is my view: and when I want to update any post I keep getting this error: NoMethodError in PostsController#update undefined method `update' for nil:NilClassAny help will be appreciated! :) <code>  def edit @post = Post.find params[:id] end def update @post.update(params[:post].permit(:title, :summary, :content)) redirect_to posts_path end <h1>Edit Page</h1> <%= form_for @post do |f| %> Title: <%= f.text_field :title %> Summary: <%= f.text_area :summary %> Content: <%= f.text_area :content %> <%= f.submit ""Update"" %><% end %>",Undefined method `update' for nil:NilClass rails 4.0.0
List of instance methods of current class only in Ruby," I have an instance o of class O. I'd like to know what o is capable of.o.methods will give me many methods. So I usually do o.methods - Object.instance_methods. But that is not concise.I want to do something like o.methods - o.class.superclass.instance_methods. That is, just the methods defined in O itself.Is there some other way? <code> ",List of instance methods of current class only
Rails 4 UnPermitted Parameters for Array," I have an array field in my model and I'm attempting to update it. My strong parameter method is below My action in my controller is as follows However, whenever I submit the update the post, in my development log I see The parameters passed through is I want to think it has something to do with the fact that the attribute categories is an array since everything else looks fine. Then again, I could be wrong. So, what's wrong with my code and why is not letting me save the categories field when clearly it is permitted to do so? Thanks. <code>  def post_params params[""post""][""categories""] = params[""post""][""categories""].split("","") params.require(:post).permit(:name, :email, :categories)end def update post = Post.find(params[:id] if post and post.update_attributes(post_params) redirect_to root_url else redirect_to posts_url endend Unpermitted parameters: categories Parameters: {""utf8""=>"""", ""authenticity_token""=>""auth token"", ""id""=>""10"", ""post""=>{""name""=>""Toni Mitchell"", ""email""=>""eileen_hansen@hayetokes.info"", ""categories""=>"",2""}}",Rails 4 Unpermitted Parameters for Array
Why is there no deep copy method in ruby," I am working on a solution for technical drawings (svg/ruby). I want to manipulate rectangles, and have an add! method in this class: I also need an add method returning a Rect, but not manipulating self: dup and clone don't do my thing but: does.Why does such a basic functionality not exist in plain Ruby? Please just don't tell me that I could reverse add and add!, letting add do the job, and add! calling it. <code>  class Rect def add!(delta) @x1+=delta ... # and so on self endend def add(delta) r=self.dup/clone/""copy"" # <-- not realy the 3 and no quotes, just in text here r.add! deltaend def copy; Marshal.load(Marshal.dump(self)); end",Why isn't there a deep copy method in Ruby?
"no deep copy method in ruby, is there a strong reason for that?"," I am working on a solution for technical drawings (svg/ruby). I want to manipulate rectangles, and have an add! method in this class: I also need an add method returning a Rect, but not manipulating self: dup and clone don't do my thing but: does.Why does such a basic functionality not exist in plain Ruby? Please just don't tell me that I could reverse add and add!, letting add do the job, and add! calling it. <code>  class Rect def add!(delta) @x1+=delta ... # and so on self endend def add(delta) r=self.dup/clone/""copy"" # <-- not realy the 3 and no quotes, just in text here r.add! deltaend def copy; Marshal.load(Marshal.dump(self)); end",Why isn't there a deep copy method in Ruby?
Why isn't there a deep copy method?," I am working on a solution for technical drawings (svg/ruby). I want to manipulate rectangles, and have an add! method in this class: I also need an add method returning a Rect, but not manipulating self: dup and clone don't do my thing but: does.Why does such a basic functionality not exist in plain Ruby? Please just don't tell me that I could reverse add and add!, letting add do the job, and add! calling it. <code>  class Rect def add!(delta) @x1+=delta ... # and so on self endend def add(delta) r=self.dup/clone/""copy"" # <-- not realy the 3 and no quotes, just in text here r.add! deltaend def copy; Marshal.load(Marshal.dump(self)); end",Why isn't there a deep copy method in Ruby?
Rails 4 datatypes?, Where can I find a list of data types that can be used in Ruby on Rails 4? Such as text string integer float date I keep learning about new ones and I'd love to have a list I could easily refer to. <code> ,Rails 4: List of available datatypes
delete from Array and return deleted elements in Ruby," How can I delete some elements from an array and select them?For example: What I can use instead of foo.get_a.sth? <code>  class Foo def initialize @a = [1,2,3,4,5,6,7,8,9] end def get_a return @a endendfoo = Foo.newb = foo.get_a.sth{ |e| e < 4 }p b # => [1,2,3]p foo.get_a # => [4,5,6,7,8,9,10]",Delete from Array and return deleted elements in Ruby
Rounding to 2 decimal places in ruby and fixing to include zero values, I want any items that are rounded such as this: To be output like this: Instead of this: How do I do this in Ruby? <code>  (5.101 * 100).round / 100.0 5.10 5.1,How do I round to two decimal places?
"When using a model where the name is the same single as plural, has_many, :through isn't working in one direction"," I am building an app to generate a character for the Star Wars RPG. I added the Species model. Species is the same singular as it is plural, which is throwing me for a loop. I can get the routes to work fine in the app by using species_index_path, but for some reason, the has_many :characteristics, :through => :species_characteristics isn't working in one direction.For instance, I have two models that are properly seeded (and work) in the console: Characteristics and Species. Characteristics is setup in the following way: Species is setup in the following way: The model between them just has a belongs_to for each of them.If I call Characteristic.first.species from the console, I get the list of species related to that characteristic.If I call Species.first.characteristics, however, I get the following: I looking in to adding a new inflection, or some way around this but I'm coming up with nothing. Does anyone have a better method short of renaming the model to something like Race?TLDR: has_many relationship doesn't work only in one direction due to an uninitialized constant error, likely because of an inflection issue. Is there any way to fix it other than renaming the model? <code>  class Characteristic < ActiveRecord::Base has_many :species_characteristics has_many :species, :through => :species_characteristics has_many :skillsend class Species < ActiveRecord::Base has_many :species_characteristics has_many :characteristics, :through => :species_characteristicsend NameError: uninitialized constant Species::Characteristics","With a model where the name is the same single as plural, `has_many, :through` isn't working in one direction"
There is a way to do something like rails server --sandbox?," Is there a way to run rails server in sandboxed mode?I would want all the changes made on the rails app to be rolled back after the server is stopped.For example, doing the command rails console --sandbox. <code> ",Is there is a way to do something like rails server --sandbox?
Increment/decrement a character in Ruby," I have a string that is one character long and can be any possible character value: I thought this might work: But, as you can see, it didn't. How can I increment/decrement my character?Edit:Ruby doesn't seem to be set up to do this. Maybe I'm approaching this the wrong way. I want to manipulate raw data in terms of 8-bit chunks. How can I best accomplish that sort of operation? <code>  irb(main):001:0> ""\x0""=> ""\u0000"" irb(main):002:0> ""\x0"" += 1SyntaxError: (irb):2: syntax error, unexpected tOP_ASGN, expecting $end""\x0"" += 1 ^ from /opt/rh/ruby193/root/usr/bin/irb:12:in `<main>'",How do I increment/decrement a character in Ruby for all possible values?
Increment/decrement a character in Ruby for all possible values," I have a string that is one character long and can be any possible character value: I thought this might work: But, as you can see, it didn't. How can I increment/decrement my character?Edit:Ruby doesn't seem to be set up to do this. Maybe I'm approaching this the wrong way. I want to manipulate raw data in terms of 8-bit chunks. How can I best accomplish that sort of operation? <code>  irb(main):001:0> ""\x0""=> ""\u0000"" irb(main):002:0> ""\x0"" += 1SyntaxError: (irb):2: syntax error, unexpected tOP_ASGN, expecting $end""\x0"" += 1 ^ from /opt/rh/ruby193/root/usr/bin/irb:12:in `<main>'",How do I increment/decrement a character in Ruby for all possible values?
Capturing variables in Ruby functions," In CoffeeScript: In Ruby: Okay, so apparently JavaScript functions are set up to capture variables in the scope they are created in, but Ruby's methods are not. Is there a way to make Ruby methods behave like JavaScript functions in this regard? <code>  f = -> v = 5 g = -> v g()f() # returns 5 as expected def f v = 5 def g v # undefined local variable or method `v' for main:Object (NameError) end gendf",Capturing variables in Ruby methods
Rails 4 Turbolinks make js not working correct," I use some code working nicely on Rails 3 but not on Rails 4, I guess it is caused by Turbolinks but I don't know much about it, can't dig more deep to solve my problem, here is the code:view: controller: and js: I have two question about this code, first: the controller code like this isn't workthe js code is transfer to client but not run, I have to add render layout: false at bottom of that action, no need this on Rails 3second question: when I first visit this page, reload the page, comment function works, but if I click a link from other pages to jump to this page, I submit this form will cause ajax request call multiple times, multiple comments will be createdthanks in advs <code>  a/v/m/_new_comment.slim .new-comment - if current_user = render ""editor_toolbar"" = form_for(Comment.new, :remote => true, :url => mission_comments_path(@mission)) do |f| = f.text_area :content, :class => ""span10"", :rows => ""4"", :tabindex => ""1"" #preview.hidden = ""Loading..."" = f.submit t(""missions.submit_comment""), ""data-disable-with"" => t(""missions.submitting""), :class => ""btn btn-primary"", :tabindex => ""2""- else = render ""need_login_to_comment"" def create @mission = Mission.find(params[:mission_id]) @comment = @mission.comments.build(comment_params) @comment.user = current_user if @comment.save @mission.events.create(user: current_user, action: ""comment"") render layout: falseend <% if @comment.errors.any? %> $("".new-comment textarea"").focus();<% else %> $("".comments"").append(""<%= j (render @comment, :index => @mission.comments.count-1) %>""); $("".new-comment #preview"").addClass(""hidden"").html(''); $("".new-comment textarea"").css(""display"", ""block"").val(''); $("".editor-toolbar .preview"").removeClass(""active""); $("".editor-toolbar .edit"").addClass(""active"");<% end %>",Rails 4 Turbolinks make form submit multiple times
to get list of all the prefixes of a string in ruby," is there any inbuilt function in the Ruby String class that can give me all the prefixes of a string in Ruby. Something like: Currently I have made a custom function for this: But I am looking for something more rubylike, less code and something magical.Note: of course it goes without saying original_string should remain as it is. <code>  ""ruby"".all_prefixes => [""ruby"", ""rub"", ""ru"", ""r""] def all_prefixes search_string dup_string = search_string.dup return_list = [] while(dup_string.length != 0) return_list << dup_string.dup dup_string.chop! end return_list end",Get a list of all the prefixes of a string
RVM - Installing ruby 1.9.3 URL Error," I recently had my computer (OS- Mac OS X 10.6.8) wiped and I am re-installing all my development tools.I have RVM installed once again; however, it won't let me install Ruby 1.9.3.So far I have tried:rvm install 1.9.3rvm install 1.9.3-p194rvm install 1.9.3-p448rvm install 1.9.3 --with-gcc=clangAll returning the same command line error: <code>  Searching for binary rubies, this might take some time.No binary rubies available for: osx/10.6/x86_64/ruby-1.9.3-p448.Continuing with compilation. Please read 'rvm help mount' to get more information on binary rubies.Checking requirements for osx.Warning: port definitions are more than two weeks old, consider using selfupdateCertificates in '/opt/local/etc/openssl/cert.pem' already are up to date.Requirements installation successful.Installing Ruby from source to: /home/kjbradley/.rvm/rubies/ruby-1.9.3-p448, this may take a while depending on your cpu(s)...ruby-1.9.3-p448 - #downloading ruby-1.9.3-p448, this may take a while depending on your connection... % Total % Received % Xferd Average Speed Time Time Time Current Dload Upload Total Spent Left Speed 0 0 0 0 0 0 0 0 --:--:-- --:--:-- --:--:-- 0curl: (22) The requested URL returned error: 404The requested url does not exist(22): 'http://ftp.ruby-lang.org/pub/ruby/1.9/ruby-1.9.3-p448.tar.bz2'Trying ftp:// URL instead.curl: (7) couldn't connect to hostThere was an error(7), please check /home/kjbradley/.rvm/log//*.logThere has been an error fetching the ruby interpreter. Halting the installation.",Why do I get a 404 error installing Ruby 1.9.3?
split string keeping delimiter in ruby," I have text like: I'm trying to split it on either a ? or . or !: When I print out the results, the punctuation delimiters are missing. Do you like to code How I love to code I'm always codingHow can I keep the punctuation? <code>  content = ""Do you like to code? How I love to code! I'm always coding."" content.split(/[?.!]/)",How do I keep the delimiters when splitting a Ruby string?
How do I split a string keeping the delimiters in Ruby?," I have text like: I'm trying to split it on either a ? or . or !: When I print out the results, the punctuation delimiters are missing. Do you like to code How I love to code I'm always codingHow can I keep the punctuation? <code>  content = ""Do you like to code? How I love to code! I'm always coding."" content.split(/[?.!]/)",How do I keep the delimiters when splitting a Ruby string?
Whats the easiest way to get the headers for a CSV file in Ruby?," All I need to do is get the headers from a CSV file. file.csv is: My code is: Which gives me: I've been looking at Ruby CSV documentation for hours and this is driving me crazy. I am convinced that there must be a simple one-liner that can return the headers to me. Any ideas? <code>  ""A"", ""B"", ""C"" ""1"", ""2"", ""3"" table = CSV.open(""file.csv"", :headers => true)puts table.headerstable.each do |row| puts row end true""1"", ""2"", ""3""",What's the easiest way to get the headers from a CSV file in Ruby?
Whats the easiest way to get the headers from a CSV file in Ruby?," All I need to do is get the headers from a CSV file. file.csv is: My code is: Which gives me: I've been looking at Ruby CSV documentation for hours and this is driving me crazy. I am convinced that there must be a simple one-liner that can return the headers to me. Any ideas? <code>  ""A"", ""B"", ""C"" ""1"", ""2"", ""3"" table = CSV.open(""file.csv"", :headers => true)puts table.headerstable.each do |row| puts row end true""1"", ""2"", ""3""",What's the easiest way to get the headers from a CSV file in Ruby?
How does ruby handle infinity conditions?," I am trying to find out how ruby handles zero division. Ruby returns different results based on the class. This is what I tried What is happening here? Shouldn't I get a ZeroDivisionError for all the above cases?Update Is ""Infinity"" a standard data type, then? <code>  0/0 # => ZeroDivisionError: divided by 0 1/0 # => ZeroDivisionError: divided by 01.0/0 # => Infinity0.0/0.0 # => NaN (1.0/0).class # => Float",How does ruby handle zero division?
How to read a CSV file into an HTML table using Ruby?," I am trying to read a simple CSV file into an HTML table to be displayed in a browser, but I'm running into trouble. This is what I'm trying:Controller: View: Output: Basically I am only getting the header, and the CSV body isn't being read and rendered. <code>  def show @csv = CSV.open(""file.csv"", :headers => true)end <% @csv.read %><% @csv.headers.each do |head| %><%= head %><% end %><table border=""1""> <% @csv.each do |row| %> <tr> <% row.each do |element| %> <td> <%= element %> </td> <% end %> </tr> <% end %></table> Name Start Date End Date Quantity Postal Code",How do I read a CSV file into an HTML table using Ruby?
Rmagick can't use JPEG?," Trying to give RMagick a whirl, using Mac OSX and homebrew.Versions:Mac OSX 10.7.5, HomeBrew 0.9.4., Ruby 2.0, Rmagick 2.13.2, ImageMagick 6.8.6-3.Here is my Ruby code, in a file named rename.rb: and here is my terminal output: It seems though I have the proper delegates installed (I'm not entirely sure, however, since I'm a n00b at ImageMagick). If I run convert -list configure, I get this: any ideas? Thanks! <code>  require 'RMagick'include Magickcat = ImageList.new(""test.jpg"")cat.displayexit rename.rb:5:in `display': delegate library support not built-in `test.jpg' (X11) @ error/display.c/DisplayImages/16067 (Magick::ImageMagickError) from rename.rb:5:in `<main>' ...DELEGATES bzlib fontconfig freetype jng jpeg png rsvg tiff xml zlib...",ImageMagick can't use JPEG (OSX/X11)?
Is Ruby DataMapper Still Maintained?," I'm looking to use a more separated system for my models in a Ruby on Rails project. It looked like the solution was DataMapper. However, I see that none of their repositories have been updated in the last year, and when installed in a Rails 4 project, it has gem version dependency conflicts with newer Gems. Searching doesn't turn up any content on using it with Rails 4.What is its state now? Should I use it, or something else? <code> ",Can DataMapper still be used for Rails?
What's wrong with my ruby installation?, When I run ruby -version I get: What could be wrong? <code>  ruby 1.8.7 (2012-02-08 patchlevel 358) [universal-darwin11.0]-e:1: undefined local variable or method `rsion' for main:Object (NameError),Why can I not determine my ruby installation's version?
Ruby: call private class method from private instance method," I am new to Ruby and came from C# world. In C# it is legal to do stuff like this: Is it possible to do something similar in Ruby?A little bit of context: I have a Rails app... One of the models has a private method that sets up some dependencies. There is a class method that creates initialized instance of the model. For legacy reasons there are some instances of the model that are not initialized correctly. I added an instance method that initializes 'uninitialized' instances where I want to do same initialization logic. Is there a way to avoid duplication?Sample: I tried to convert my private method to a private class method, but I still get an error: <code>  public class Test{ public void Method() { PrivateMethod(); } private void PrivateMethod() { PrivateStaticMethod(); } private static void PrivateStaticMethod() { }} class MyModel < ActiveRecord::Base def self.create_instance model = MyModel.new model.init_some_dependencies # this fails model end def initialize_instance // do some other work other_init // call private method init_some_dependencies end private def init_some_dependencies endend class MyModel < ActiveRecord::Base def self.create_instance model = MyModel.new MyModel.init_some_dependencies_class(model) model end def initialize_instance # do some other work other_init # call private method init_some_dependencies end private def init_some_dependencies MyModel.init_some_dependencies_class(self) # now this fails with exception end def self.init_some_dependencies_class(model) # do something with model end private_class_method :init_some_dependencies_classend",Call private class method from private instance method
"RSpec: Allow vs Stub, what's the difference?"," What is the difference between the following lines of (rspec) code and regardless if they are the same or different, when should you use one instead of the other? versus <code>  book = double(""book"")allow(book).to receive(:title) { ""The RSpec Book"" } book = double(""book"")book.stub(:title).and_return(""The RSpec Book"")","Allow vs Stub, what's the difference?"
"rvm use 2.0.0 --default doesn't work first time, works 2nd time - but not for new windows"," Above doesn't work first time, works 2nd time.Try to set ruby version to 2.0.0 for any new shell windows.Doing gives Then doing the same now gives no error, i.e. but new windows are still giving me ruby 1.9.3, not 2.0.0My .bashrc file has in it: My .bash_profile has: Trying seems to work but at the end of a lot of green output shows: A new terminal windows with rvm list rubies shows this: <code>  $ rvm use 2.0.0 --default Warning! PATH is not properly set up, '/home/durrantm/.rvm/gems/ruby-1.9.3-p125/bin' is not at first place, usually this is caused by shell initialization files - check them for 'PATH=...' entries, it might also help to re-add RVM to your dotfiles: 'rvm get stable --auto-dotfiles', to fix temporarily in this shell session run: 'rvm use ruby-1.9.3-p125'.Using /home/durrantm/.rvm/gems/ruby-2.0.0-p247 $ rvm use 2.0.0 --default $ rvm use 2.0.0 --defaultUsing /home/durrantm/.rvm/gems/ruby-2.0.0-p247durrantm.../durrantm$ PATH=$PATH:$HOME/.rvm/bin # Add RVM to PATH for scripting[[ -s ""/home/durrantm/.rvm/scripts/rvm"" ]] && . ""/home/durrantm/.rvm/scripts/rvm"" source ~/.profilecase $- in *i*) . ~/.bashrc;; esac rvm get stable Could not update RVM, get some help at #rvm IRC channel at freenode servers. $ rvm list rubiesWarning! PATH is not properly set up, '/home/durrantm/.rvm/gems/ruby-1.9.3-p125/bin' is not at first place, usually this is caused by shell initialization files - check them for 'PATH=...' entries, it might also help to re-add RVM to your dotfiles: 'rvm get stable --auto-dotfiles', to fix temporarily in this shell session run: 'rvm use ruby-1.9.3-p125'.rvm rubies=> ruby-1.9.3-p125 [ x86_64 ] ruby-1.9.3-p194 [ x86_64 ] * ruby-2.0.0-p247 [ x86_64 ]# => - current# =* - current && default# * - default","Getting ""Warning! PATH is not properly set up"" when doing rvm use 2.0.0 --default"
What does Double *(splat) operator do in Ruby," Have you seen a function declared like this? I understand that a single * is the splat operator. What does ** mean? <code>  def foo a, **b ...end",What does a double * (splat) operator do
What does Double *(splat) operators do in Ruby," Have you seen a function declared like this? I understand that a single * is the splat operator. What does ** mean? <code>  def foo a, **b ...end",What does a double * (splat) operator do
FATAL: Password Authentication Failed For User," I'm having an issue connecting my Postgres database. I created a user for it (it never prompted me for a password), so I ran the command ALTER USER user_name WITH PASSWORD password to create one. I set the user and password in my database.yml file in my config directory for my Rails project. It's still telling me that I have an authentication failure (like my title) and I have no idea why. I modified my pg_hba.conf file from this answer from this link. The only thing I can think of that would solve this issue is making my user a superuser. But I'd like to know why this isn't working right now without making it a superuser. Anyone have any idea?Edit: <code>  => Booting Thin=> Rails 3.2.11 application starting in production on http://0.0.0.0:3000=> Call with -d to detach=> Ctrl-C to shutdown serverExiting/home/ubuntu/.rbenv/versions/1.9.3-p327/lib/ruby/gems/1.9.1/gems/activerecord-3.2.11/lib/active_record/connection_adapters/postgresql_adapter.rb:1208:in `initialize': FATAL: password authentication failed for user ""crowdcode"" (PG::Error)FATAL: password authentication failed for user ""crowdcode"" from /home/ubuntu/.rbenv/versions/1.9.3-p327/lib/ruby/gems/1.9.1/gems/activerecord-3.2.11/lib/active_record/connection_adapters/postgresql_adapter.rb:1208:in `new' from /home/ubuntu/.rbenv/versions/1.9.3-p327/lib/ruby/gems/1.9.1/gems/activerecord-3.2.11/lib/active_record/connection_adapters/postgresql_adapter.rb:1208:in `connect' from /home/ubuntu/.rbenv/versions/1.9.3-p327/lib/ruby/gems/1.9.1/gems/activerecord-3.2.11/lib/active_record/connection_adapters/postgresql_adapter.rb:326:in `initialize' from /home/ubuntu/.rbenv/versions/1.9.3-p327/lib/ruby/gems/1.9.1/gems/activerecord-3.2.11/lib/active_record/connection_adapters/postgresql_adapter.rb:28:in `new' from /home/ubuntu/.rbenv/versions/1.9.3-p327/lib/ruby/gems/1.9.1/gems/activerecord-3.2.11/lib/active_record/connection_adapters/postgresql_adapter.rb:28:in `postgresql_connection' from /home/ubuntu/.rbenv/versions/1.9.3-p327/lib/ruby/gems/1.9.1/gems/activerecord-3.2.11/lib/active_record/connection_adapters/abstract/connection_pool.rb:315:in `new_connection' from /home/ubuntu/.rbenv/versions/1.9.3-p327/lib/ruby/gems/1.9.1/gems/activerecord-3.2.11/lib/active_record/connection_adapters/abstract/connection_pool.rb:325:in `checkout_new_connection' from /home/ubuntu/.rbenv/versions/1.9.3-p327/lib/ruby/gems/1.9.1/gems/activerecord-3.2.11/lib/active_record/connection_adapters/abstract/connection_pool.rb:247:in `block (2 levels) in checkout' from /home/ubuntu/.rbenv/versions/1.9.3-p327/lib/ruby/gems/1.9.1/gems/activerecord-3.2.11/lib/active_record/connection_adapters/abstract/connection_pool.rb:242:in `loop' from /home/ubuntu/.rbenv/versions/1.9.3-p327/lib/ruby/gems/1.9.1/gems/activerecord-3.2.11/lib/active_record/connection_adapters/abstract/connection_pool.rb:242:in `block in checkout' from /home/ubuntu/.rbenv/versions/1.9.3-p327/lib/ruby/1.9.1/monitor.rb:211:in `mon_synchronize' from /home/ubuntu/.rbenv/versions/1.9.3-p327/lib/ruby/gems/1.9.1/gems/activerecord-3.2.11/lib/active_record/connection_adapters/abstract/connection_pool.rb:239:in `checkout' from /home/ubuntu/.rbenv/versions/1.9.3-p327/lib/ruby/gems/1.9.1/gems/activerecord-3.2.11/lib/active_record/connection_adapters/abstract/connection_pool.rb:102:in `block in connection' from /home/ubuntu/.rbenv/versions/1.9.3-p327/lib/ruby/1.9.1/monitor.rb:211:in `mon_synchronize' from /home/ubuntu/.rbenv/versions/1.9.3-p327/lib/ruby/gems/1.9.1/gems/activerecord-3.2.11/lib/active_record/connection_adapters/abstract/connection_pool.rb:101:in `connection' from /home/ubuntu/.rbenv/versions/1.9.3-p327/lib/ruby/gems/1.9.1/gems/activerecord-3.2.11/lib/active_record/connection_adapters/abstract/connection_pool.rb:410:in `retrieve_connection' from /home/ubuntu/.rbenv/versions/1.9.3-p327/lib/ruby/gems/1.9.1/gems/activerecord-3.2.11/lib/active_record/connection_adapters/abstract/connection_specification.rb:171:in `retrieve_connection' from /home/ubuntu/.rbenv/versions/1.9.3-p327/lib/ruby/gems/1.9.1/gems/activerecord-3.2.11/lib/active_record/connection_adapters/abstract/connection_specification.rb:145:in `connection' from /home/ubuntu/.rbenv/versions/1.9.3-p327/lib/ruby/gems/1.9.1/gems/activerecord-3.2.11/lib/active_record/model_schema.rb:308:in `clear_cache!' from /home/ubuntu/.rbenv/versions/1.9.3-p327/lib/ruby/gems/1.9.1/gems/activerecord-3.2.11/lib/active_record/railtie.rb:97:in `block (2 levels) in <class:Railtie>' from /home/ubuntu/.rbenv/versions/1.9.3-p327/lib/ruby/gems/1.9.1/gems/activesupport-3.2.11/lib/active_support/callbacks.rb:418:in `_run__898392718112352949__prepare__1631078305261036285__callbacks' from /home/ubuntu/.rbenv/versions/1.9.3-p327/lib/ruby/gems/1.9.1/gems/activesupport-3.2.11/lib/active_support/callbacks.rb:405:in `__run_callback' from /home/ubuntu/.rbenv/versions/1.9.3-p327/lib/ruby/gems/1.9.1/gems/activesupport-3.2.11/lib/active_support/callbacks.rb:385:in `_run_prepare_callbacks' from /home/ubuntu/.rbenv/versions/1.9.3-p327/lib/ruby/gems/1.9.1/gems/activesupport-3.2.11/lib/active_support/callbacks.rb:81:in `run_callbacks' from /home/ubuntu/.rbenv/versions/1.9.3-p327/lib/ruby/gems/1.9.1/gems/actionpack-3.2.11/lib/action_dispatch/middleware/reloader.rb:74:in `prepare!' from /home/ubuntu/.rbenv/versions/1.9.3-p327/lib/ruby/gems/1.9.1/gems/actionpack-3.2.11/lib/action_dispatch/middleware/reloader.rb:48:in `prepare!' from /home/ubuntu/.rbenv/versions/1.9.3-p327/lib/ruby/gems/1.9.1/gems/railties-3.2.11/lib/rails/application/finisher.rb:47:in `block in <module:Finisher>' from /home/ubuntu/.rbenv/versions/1.9.3-p327/lib/ruby/gems/1.9.1/gems/railties-3.2.11/lib/rails/initializable.rb:30:in `instance_exec' from /home/ubuntu/.rbenv/versions/1.9.3-p327/lib/ruby/gems/1.9.1/gems/railties-3.2.11/lib/rails/initializable.rb:30:in `run' from /home/ubuntu/.rbenv/versions/1.9.3-p327/lib/ruby/gems/1.9.1/gems/railties-3.2.11/lib/rails/initializable.rb:55:in `block in run_initializers' from /home/ubuntu/.rbenv/versions/1.9.3-p327/lib/ruby/gems/1.9.1/gems/railties-3.2.11/lib/rails/initializable.rb:54:in `each' from /home/ubuntu/.rbenv/versions/1.9.3-p327/lib/ruby/gems/1.9.1/gems/railties-3.2.11/lib/rails/initializable.rb:54:in `run_initializers' from /home/ubuntu/.rbenv/versions/1.9.3-p327/lib/ruby/gems/1.9.1/gems/railties-3.2.11/lib/rails/application.rb:136:in `initialize!' from /home/ubuntu/.rbenv/versions/1.9.3-p327/lib/ruby/gems/1.9.1/gems/railties-3.2.11/lib/rails/railtie/configurable.rb:30:in `method_missing' from /home/ubuntu/Git/crowdcode/config/environment.rb:5:in `<top (required)>' from /home/ubuntu/.rbenv/versions/1.9.3-p327/lib/ruby/gems/1.9.1/gems/activesupport-3.2.11/lib/active_support/dependencies.rb:251:in `require' from /home/ubuntu/.rbenv/versions/1.9.3-p327/lib/ruby/gems/1.9.1/gems/activesupport-3.2.11/lib/active_support/dependencies.rb:251:in `block in require' from /home/ubuntu/.rbenv/versions/1.9.3-p327/lib/ruby/gems/1.9.1/gems/activesupport-3.2.11/lib/active_support/dependencies.rb:236:in `load_dependency' from /home/ubuntu/.rbenv/versions/1.9.3-p327/lib/ruby/gems/1.9.1/gems/activesupport-3.2.11/lib/active_support/dependencies.rb:251:in `require' from /home/ubuntu/Git/crowdcode/config.ru:3:in `block in <main>' from /home/ubuntu/.rbenv/versions/1.9.3-p327/lib/ruby/gems/1.9.1/gems/rack-1.4.5/lib/rack/builder.rb:51:in `instance_eval' from /home/ubuntu/.rbenv/versions/1.9.3-p327/lib/ruby/gems/1.9.1/gems/rack-1.4.5/lib/rack/builder.rb:51:in `initialize' from /home/ubuntu/Git/crowdcode/config.ru:in `new' from /home/ubuntu/Git/crowdcode/config.ru:in `<main>' from /home/ubuntu/.rbenv/versions/1.9.3-p327/lib/ruby/gems/1.9.1/gems/rack-1.4.5/lib/rack/builder.rb:40:in `eval' from /home/ubuntu/.rbenv/versions/1.9.3-p327/lib/ruby/gems/1.9.1/gems/rack-1.4.5/lib/rack/builder.rb:40:in `parse_file' from /home/ubuntu/.rbenv/versions/1.9.3-p327/lib/ruby/gems/1.9.1/gems/rack-1.4.5/lib/rack/server.rb:200:in `app' from /home/ubuntu/.rbenv/versions/1.9.3-p327/lib/ruby/gems/1.9.1/gems/railties-3.2.11/lib/rails/commands/server.rb:46:in `app' from /home/ubuntu/.rbenv/versions/1.9.3-p327/lib/ruby/gems/1.9.1/gems/rack-1.4.5/lib/rack/server.rb:304:in `wrapped_app' from /home/ubuntu/.rbenv/versions/1.9.3-p327/lib/ruby/gems/1.9.1/gems/rack-1.4.5/lib/rack/server.rb:254:in `start' from /home/ubuntu/.rbenv/versions/1.9.3-p327/lib/ruby/gems/1.9.1/gems/railties-3.2.11/lib/rails/commands/server.rb:70:in `start' from /home/ubuntu/.rbenv/versions/1.9.3-p327/lib/ruby/gems/1.9.1/gems/railties-3.2.11/lib/rails/commands.rb:55:in `block in <top (required)>' from /home/ubuntu/.rbenv/versions/1.9.3-p327/lib/ruby/gems/1.9.1/gems/railties-3.2.11/lib/rails/commands.rb:50:in `tap' from /home/ubuntu/.rbenv/versions/1.9.3-p327/lib/ruby/gems/1.9.1/gems/railties-3.2.11/lib/rails/commands.rb:50:in `<top (required)>' from script/rails:6:in `require' from script/rails:6:in `<main>'",Rails: FATAL: Password Authentication Failed For User
"undefined method `action' for PostsController(Table doesn't exist):Class, I have an action defined in my controller so why doesn't it work"," I am pretty new to coding, so I decided to start the Ruby on Rails guide for version 4.0.0 and have had problem after problem. I am currently running version 4.0.0 and I have followed the guide step by step.Once I got to 5.2 First form I began to get errors and was using other people's posts to solve my questions, but this error doesn't seem to happen for anyone else, so here it is: Here is my code: Here is my view: My form is: The error states that I don't have an action method defined, but I'm not sure how to define one in the first place, however this is not all. When I go to my localhost:3000/posts/new page I get the same error but for PostsController#newCan someone please help me!!  <code>  NoMethodError in PostsController#indexundefined method `action' for PostsController(Table doesn't exist):Class class PostsController < ActiveRecord::Base attr_accessible :title, :text def new end def create @post = Post.new(params[:post].permit(:title, :text)) @post.save redirect_to @post end def show @post = Post.find(params[:id]) end def index @post = Post.all end def action end private def post_params params.require(:post).permit(:title, :text) end end <p> <strong> Title: </strong> <%= @post.title %></p><p> <strong> Text: </strong> <%= @post.text %></p> <h1> New Post </h1> <%= form_for :posts, url: posts_path do |f| %> <p> <%= f.label :title %><br> <%= f.text_field :title %> </p> <p> <%= f.label :text%><br> <%= f.text_area :text %> </p> <p> <%= f.submit %> </p> <% end %>",Why do I get undefined method `action' for PostsController(Table doesn't exist)?
wysihml5 & activerecord post content is different from content saved in db," i'm trying to implement wysihml5 in a sinatra app using Activerecord.The rich text editor works great and when i submit the form i got right html post to controller: Then, i remove hash entry ""_wysihtml5_mode"" from request.params to create the db entry, then i convert content to json: The problem is i can't get my value back as begining: How could i get back this unicode charcters to their utf-8 style (i might be wrong, i m not comfortable with characters table). It seems that during convertion to json, a "" is added at the begining: This might be the problem? Any ideas? <code>  pry:> request.params=> {""title"" => ""title text"",""content"" => ""<b>bold text</b><br><i>italic text</i>"",""_wysihtml5_mode"" => 1} pry:> request.params.delete(""_wysihtml5_mode"")=> 1pry:> request.params[""content""].to_json=> ""\""\\u003Cb\\u003Ebold text\\u003C/b\\u003E...pry:> class.create(request.params) pry:> class.last.content=> ""\""\\u003Cb\\u003Ebold text\\u003C/b\\u003E...pry:> JSON.parse(class.last.content)JSON::ParseError: 743: unexpected token at '""\\u003Cb\\u003Ebold text\\u003C/b\\u003E... ""<b>bold => ""\""\\u003Cb\\u003Ebold",to_json on single value can't be parse back
activerecord & unicode characters," i'm trying to implement wysihml5 in a sinatra app using Activerecord.The rich text editor works great and when i submit the form i got right html post to controller: Then, i remove hash entry ""_wysihtml5_mode"" from request.params to create the db entry, then i convert content to json: The problem is i can't get my value back as begining: How could i get back this unicode charcters to their utf-8 style (i might be wrong, i m not comfortable with characters table). It seems that during convertion to json, a "" is added at the begining: This might be the problem? Any ideas? <code>  pry:> request.params=> {""title"" => ""title text"",""content"" => ""<b>bold text</b><br><i>italic text</i>"",""_wysihtml5_mode"" => 1} pry:> request.params.delete(""_wysihtml5_mode"")=> 1pry:> request.params[""content""].to_json=> ""\""\\u003Cb\\u003Ebold text\\u003C/b\\u003E...pry:> class.create(request.params) pry:> class.last.content=> ""\""\\u003Cb\\u003Ebold text\\u003C/b\\u003E...pry:> JSON.parse(class.last.content)JSON::ParseError: 743: unexpected token at '""\\u003Cb\\u003Ebold text\\u003C/b\\u003E... ""<b>bold => ""\""\\u003Cb\\u003Ebold",to_json on single value can't be parse back
Split SPECIFIC part of string using regular expression in Ruby," I want to split a string by comma: I don't want to split a sub-string if it is wrapped by parenthesis: should yield: Any suggestion? <code>  ""a,s"".split ',' # => ['a', 's'] ""a,s(d,f),g,h"" ['a', 's(d,f)', 'g', 'h']","How do I split a string by commas except inside parenthesis, using a regular expression?"
Split specific part of string using regular expression," I want to split a string by comma: I don't want to split a sub-string if it is wrapped by parenthesis: should yield: Any suggestion? <code>  ""a,s"".split ',' # => ['a', 's'] ""a,s(d,f),g,h"" ['a', 's(d,f)', 'g', 'h']","How do I split a string by commas except inside parenthesis, using a regular expression?"
Rails 4 and JavaScript: How to include js.erb file in view/ folder," I have a JavaScript file to use with a view. There needs to be Ruby code in it, and I need to do render in Ruby, so I understand that I can't put the JavaScript file in the asset pipeline. I can put it in the same view folder as the .html.erb file.How do I include the JavaScript file, or use that JavaScript file for that view file? I tried javascript_include_tag in my view (that uses the asset pipeline apparently), using script src=""myfile.js"" for the myfile.js.erb file (but it can't find myfile.js), and names my js.erb file (users.js.erb) the same as my .html.erb file (users.html.erb), but all to no avail. <code> ",How to include js.erb file in view folder
Ruby - Slim - Options - 'selected' ( pre populate form )," I have a problem with the Slim template engine in a Sinatra project. I have an edit form to be filled when the route is triggered. There is an issue with HTML select option. I need something like this when the edit form is loaded. Notice that Mrs. option is selected: I tried: The exception was about an attribute error. Then I tried something like this: but then the output was something like this: I guess the string""false"" is interpreted as true. That failed. I tried some combinations with round brackets but couldn't get it to work.How could I set the selected attribute of an option in a select list in Slim? <code>  <select name=""person[title]"" id=""person[title]""> <option value=""Mr."">Mr.</option> <option value=""Mrs."" selected>Mrs.</option></select> option[value=""Mrs."" ""#{person.title == :mrs ? 'selected' : ''}""] option[value=""Mrs."" selected=""#{person.title == :mrs ? true : false}""] <option value""Mrs."" selected=""false"">Mrs.</option>",Controlling the existence of an attribute
Options 'selected' (pre populate form)," I have a problem with the Slim template engine in a Sinatra project. I have an edit form to be filled when the route is triggered. There is an issue with HTML select option. I need something like this when the edit form is loaded. Notice that Mrs. option is selected: I tried: The exception was about an attribute error. Then I tried something like this: but then the output was something like this: I guess the string""false"" is interpreted as true. That failed. I tried some combinations with round brackets but couldn't get it to work.How could I set the selected attribute of an option in a select list in Slim? <code>  <select name=""person[title]"" id=""person[title]""> <option value=""Mr."">Mr.</option> <option value=""Mrs."" selected>Mrs.</option></select> option[value=""Mrs."" ""#{person.title == :mrs ? 'selected' : ''}""] option[value=""Mrs."" selected=""#{person.title == :mrs ? true : false}""] <option value""Mrs."" selected=""false"">Mrs.</option>",Controlling the existence of an attribute
"In Ruby, what Infinity and NaN are?"," I can get Infinity and NaN by but when I want to access Infinity or NaN directly: What are Infinity and NaN? Are they objects, keywords, or something else? <code>  n = 9.0 / 0 #=> Infinityn.class #=> Floatm = 0 / 0.0 #=> NaNm.class #=> Float Infinity #=> uninitialized constant Infinity (NameError)NaN #=> uninitialized constant NaN (NameError)",What are the types of Infinity and NaN?
"In Ruby, what are the types of Infinity and NaN?"," I can get Infinity and NaN by but when I want to access Infinity or NaN directly: What are Infinity and NaN? Are they objects, keywords, or something else? <code>  n = 9.0 / 0 #=> Infinityn.class #=> Floatm = 0 / 0.0 #=> NaNm.class #=> Float Infinity #=> uninitialized constant Infinity (NameError)NaN #=> uninitialized constant NaN (NameError)",What are the types of Infinity and NaN?
remote code execution in ruby with contantize," I'm trying to wrap my head around remote code execution vulnerabilities in ruby/rails when contantize is used.I understand that being able to provide any class name to the server could be potentially dangerous, but I'm wondering if this by itself is dangerous.for example, if a rails controller code looks something like this (i.e. executes a hardcoded method on the instantiated object): Is this code vulnerable? Or only in combination with being able to also specify the method to be called on the class? <code>  klass = params[:class].classify.constantizeklass.do_something_with_id(params[:id]) if klass.respond_to?('do_something_with_id')",remote code execution in ruby with constantize
"Two (or more) part comparable, is there a pretty syntax?"," The <=> method should return -1, 0 or 1 for ""less than"", ""equal to"", and ""greater than"", respectively. For some types of sortable objects, it is normal to base the sort order on multiple properties. The following works, but I think it looks clumsy: Trying it: Perl treats 0 as a false value, which allows complex comparisons with different syntax: I find the fall-through on 0 via the || operator simple to read and elegant. One thing I like about using || is the short-circuiting of calculations once the comparison has a value.I cannot find anything similar in Ruby. Are there any nicer ways to build the same complex of comparisons (or anything else picking the first non-zero item), ideally without needing to calculate all values in advance? <code>  class LeagueStats attr_accessor :points, :goal_diff def initialize pts, gd @points = pts @goal_diff = gd end def <=> other compare_pts = points <=> other.points return compare_pts unless compare_pts == 0 goal_diff <=> other.goal_diff endend [ LeagueStats.new( 10, 7 ), LeagueStats.new( 10, 5 ), LeagueStats.new( 9, 6 )].sort# => [# #<LS @points=9, @goal_diff=6>,# #<LS @points=10, @goal_diff=5>,# #<LS @points=10, @goal_diff=7># ] { return ( $self->points <=> $other->points ) || ( $self->goal_diff <=> $other->goal_diff ); }",Is there a pretty syntax for complex comparison?
Connect to existing Postgresql database with ActiveRecord WITHOUT RAILS," I am not using rails, and I'm trying to use ActiveRecord to make it easier to work with an existing database. This is just a script so I have no database.yml or any other files. I've set up my database connection using I'm not really familiar with databases, so I'll just state what I know about this one. There are quite a few schemas. The schema I'm interested in is the management schema that has the table ""host"". I've created a class Host in the script like this: I'm then trying to pull all rows that match the criteria with this query and to store it into an array. but I am getting this error every single time. I don't really understand why this is happening, so I tried to see what the database looks like with this command ActiveRecord::Base.connection.tables but all I got was an empty array. I'm not sure what could be happening. I'm obviously doing something wrong, I just can't figure out what. Keep in mind, this is all in a single file script. Edit: So I can see the schemas if I use ActiveRecord::Base.connection.schema_names. This gives me an array => [""db_stats"", ""management"", ""management_audit"", ""public""] Using pgadmin, I know that the table I want is in management, so how do I access that?  <code>  ActiveRecord::Base.establish_connection( adapter: 'postgresql', host: 'thehosthere', database: 'management', username: 'management_readonly', password: '', port: '5432') class Host < ActiveRecord::Base self.table_name = ""host""end servers = Host.where(:realm => 'stage', :status => 'UP').pluck(:hostname) ruby environments_are_okDev.rb/usr/local/rvm/gems/ruby-1.9.3-p448/gems/activerecord-4.0.0/lib/active_record/connection_adapters/postgresql_adapter.rb:768:in `exec': PG::UndefinedTable: ERROR: relation ""host"" does not exist (ActiveRecord::StatementInvalid)LINE 5: WHERE a.attrelid = '""host""'::regclass ^: SELECT a.attname, format_type(a.atttypid, a.atttypmod), pg_get_expr(d.adbin, d.adrelid), a.attnotnull, a.atttypid,a.atttypmod FROM pg_attribute a LEFT JOIN pg_attrdef d ON a.attrelid = d.adrelid AND a.attnum = d.adnum WHERE a.attrelid = '""host""'::regclass AND a.attnum > 0 AND NOT a.attisdropped ORDER BY a.attnum from /usr/local/rvm/gems/ruby-1.9.3-p448/gems/activerecord-4.0.0/lib/active_record/connection_adapters/postgresql_adapter.rb:768:in `exec_no_cache' from /usr/local/rvm/gems/ruby-1.9.3-p448/gems/activerecord-4.0.0/lib/active_record/connection_adapters/postgresql/database_statements.rb:138:in `block in exec_query' from /usr/local/rvm/gems/ruby-1.9.3-p448/gems/activerecord-4.0.0/lib/active_record/connection_adapters/abstract_adapter.rb:425:in `block in log' from /usr/local/rvm/gems/ruby-1.9.3-p448/gems/activesupport-4.0.0/lib/active_support/notifications/instrumenter.rb:20:in `instrument' from /usr/local/rvm/gems/ruby-1.9.3-p448/gems/activerecord-4.0.0/lib/active_record/connection_adapters/abstract_adapter.rb:420:in `log' from /usr/local/rvm/gems/ruby-1.9.3-p448/gems/activerecord-4.0.0/lib/active_record/connection_adapters/postgresql/database_statements.rb:137:in `exec_query' from /usr/local/rvm/gems/ruby-1.9.3-p448/gems/activerecord-4.0.0/lib/active_record/connection_adapters/postgresql_adapter.rb:915:in `column_definitions' from /usr/local/rvm/gems/ruby-1.9.3-p448/gems/activerecord-4.0.0/lib/active_record/connection_adapters/postgresql/schema_statements.rb:174:in `columns' from /usr/local/rvm/gems/ruby-1.9.3-p448/gems/activerecord-4.0.0/lib/active_record/connection_adapters/schema_cache.rb:114:in `block in prepare_default_proc' from /usr/local/rvm/gems/ruby-1.9.3-p448/gems/activerecord-4.0.0/lib/active_record/connection_adapters/schema_cache.rb:56:in `yield' from /usr/local/rvm/gems/ruby-1.9.3-p448/gems/activerecord-4.0.0/lib/active_record/connection_adapters/schema_cache.rb:56:in `default' from /usr/local/rvm/gems/ruby-1.9.3-p448/gems/activerecord-4.0.0/lib/active_record/connection_adapters/schema_cache.rb:56:in `columns' from /usr/local/rvm/gems/ruby-1.9.3-p448/gems/activerecord-4.0.0/lib/active_record/model_schema.rb:208:in `columns' from /usr/local/rvm/gems/ruby-1.9.3-p448/gems/activerecord-4.0.0/lib/active_record/model_schema.rb:247:in `column_names' from /usr/local/rvm/gems/ruby-1.9.3-p448/gems/activerecord-4.0.0/lib/active_record/relation/delegation.rb:60:in `block in method_missing' from /usr/local/rvm/gems/ruby-1.9.3-p448/gems/activerecord-4.0.0/lib/active_record/relation.rb:270:in `scoping' from /usr/local/rvm/gems/ruby-1.9.3-p448/gems/activerecord-4.0.0/lib/active_record/relation/delegation.rb:60:in `method_missing' from /usr/local/rvm/gems/ruby-1.9.3-p448/gems/activerecord-4.0.0/lib/active_record/relation/calculations.rb:152:in `block in pluck' from /usr/local/rvm/gems/ruby-1.9.3-p448/gems/activerecord-4.0.0/lib/active_record/relation/calculations.rb:151:in `map!' from /usr/local/rvm/gems/ruby-1.9.3-p448/gems/activerecord-4.0.0/lib/active_record/relation/calculations.rb:151:in `pluck' from environments_are_okDev.rb:51:in `run' from environments_are_okDev.rb:97:in `<main>'",Connect to existing Postgresql database with ActiveRecord without rails
Which Ruby version am I really running?," I'm running Ubuntu 12.04 LTS, and installed Ruby via RVM.The problem is, when I type ruby -v into the terminal, it says that my Ruby version is 1.8.7, and using the shotgun gem for Sinatra also says that I'm running Ruby 1.8.7. But when I type rvm list it shows that the only version of Ruby that I have installed is 2.0.0 and it is my current and default version.I installed Ruby 2.0.0 via RVM and it is the only version I had installed on my machine.Now when I tried to install Rails 4 but got an error saying that I need Ruby 1.9 or higher.How do I know what version am I really on, and how do I set 2.0.0 as my only version?  <code> ",Which Ruby version am I really running?
Find ruby version used by system," I'm running Ubuntu 12.04 LTS, and installed Ruby via RVM.The problem is, when I type ruby -v into the terminal, it says that my Ruby version is 1.8.7, and using the shotgun gem for Sinatra also says that I'm running Ruby 1.8.7. But when I type rvm list it shows that the only version of Ruby that I have installed is 2.0.0 and it is my current and default version.I installed Ruby 2.0.0 via RVM and it is the only version I had installed on my machine.Now when I tried to install Rails 4 but got an error saying that I need Ruby 1.9 or higher.How do I know what version am I really on, and how do I set 2.0.0 as my only version?  <code> ",Which Ruby version am I really running?
"Ruby $1, $2 ... variables inside gsub block"," Given the following two pieces of code: Why are the outputs of these two pieces of code different? Is there a way to pass a block to gsub from outside of the method definition so that the variables $1, $2 would be evaluated in the same way as if the block was given inside the method definition? <code>  def hello(z) ""hello"".gsub(/(o)/, &z)endz = proc {|m| p $1}hello(z)# prints: nil def hello z = proc {|m| p $1} ""hello"".gsub(/(o)/, &z)endhello# prints: ""o""","Using $1, $2, etc. global variables inside method definition"
"Ruby $1, $2 ... variables inside method definition"," Given the following two pieces of code: Why are the outputs of these two pieces of code different? Is there a way to pass a block to gsub from outside of the method definition so that the variables $1, $2 would be evaluated in the same way as if the block was given inside the method definition? <code>  def hello(z) ""hello"".gsub(/(o)/, &z)endz = proc {|m| p $1}hello(z)# prints: nil def hello z = proc {|m| p $1} ""hello"".gsub(/(o)/, &z)endhello# prints: ""o""","Using $1, $2, etc. global variables inside method definition"
How to assign a Struct class to a variable's value?," I have a variable var = ""some_name"" and I would like to create a new object and assign it to some_name. How can I do it? E.g. <code>  var = ""some_name""some_name = Struct.new(:name) # I need thisa = some_name.new('blah') # so that I can do this.",How to dynamically create a local variable?
"rails - can I 'rake spec' a directory, e.g. models"," I can rake spec and all specs run.However trying to run specs for one directory, as in does not provide any output or errors.One option is that I can do or but I was wondering if I could stay within Rake. <code>  rake spec/models/ or rake spec/models/*.rb rspec spec/models/*.rb rspec spec/models/","How to 'rake spec' one directory, e.g. models?"
"Can I 'rake spec' a directory, e.g. models?"," I can rake spec and all specs run.However trying to run specs for one directory, as in does not provide any output or errors.One option is that I can do or but I was wondering if I could stay within Rake. <code>  rake spec/models/ or rake spec/models/*.rb rspec spec/models/*.rb rspec spec/models/","How to 'rake spec' one directory, e.g. models?"
"Missing template error, Ruby on Rails"," I am making a website that has a user page that is supposed to allow users to create announcement posts.When I try to create a new announcement post through the website, an error pops up as follows: If I create the create.html.erb at the location, the form will return false as always.The user page (/app/view/users/show.html.erb): shared/_announcement_form.html.erb: UsersController: AnnouncementsController: I have checked that I can create the announcement manually in the console. What am I doing wrong? <code>  Template is missingMissing template announcements/create, application/create with {:locale=>[:en], :formats=>[:html], :handlers=>[:erb, :builder, :raw, :ruby, :jbuilder, :coffee]}. Searched in: * "".../app/views"" <% provide(:title, 'Admin Page') %><% if signed_in? %> <div class=""container""> <%= link_to ""Sign out"", signout_path, method: ""delete"" %> <br /> <% if @announcements.any? %> <h3>Announcements (<%= @announcements.count %>)</h3> <ol> <%= render @announcements %> </ol> <%= will_paginate @announcements %> <% end %> <%= render 'shared/announcement_form' %> </div><% else %><script type=""text/javascript""> window.location.href= '<%= signin_path %>' </script><% end %> <%= form_for(@announcement) do |f| %> <%= render 'shared/error_messages', object: f.object %> <div class=""field""> <%= f.text_area :title, placeholder: ""Compose new title..."" %> </div> <div class=""field""> <%= f.text_area :content, placeholder: ""Compose new announcement..."" %> </div> <%= f.submit ""Post"", class: ""btn btn-large btn-primary"" %><% end %> class UsersController < ApplicationController def new end def show @user = User.find(params[:id]) @announcement = current_user.announcements.build if signed_in? @announcements = @user.announcements.paginate(:page => params[:a_page], :per_page => 10) endend class AnnouncementsController < ApplicationController before_action :signed_in_user, only: [:create, :destroy] def create @announcement = current_user.announcements.build(announcement_params) if @announcement.save flash[:success] = ""Announcement created!"" redirect_to root_url else flash[:error] = ""Failed to create announcement!"" end end def destroy end private def announcement_params params.require(:announcement).permit(:content) params.require(:announcement).permit(:title) endend",How to fix a missing template error?
meaning of Ruby sharp(#) symbol," What are the various meanings of the Ruby sharp/number sign/pound/hash(#) symbolHow many contexts does the symbol # in Ruby have ?I know that #` represents comment or 'convert to the value': However I also see some Ruby docs describe built-in methods like these: Why do they describe the same thing using 2 different symbols ?I am new in Ruby. Thanks  <code>  # a comment i = 1print ""#{i}"" # simple example Array#fillFile::file?","What is the # (sharp, number, pound, hash) sign used for in Ruby?"
What is the # sign used for in Ruby?," What are the various meanings of the Ruby sharp/number sign/pound/hash(#) symbolHow many contexts does the symbol # in Ruby have ?I know that #` represents comment or 'convert to the value': However I also see some Ruby docs describe built-in methods like these: Why do they describe the same thing using 2 different symbols ?I am new in Ruby. Thanks  <code>  # a comment i = 1print ""#{i}"" # simple example Array#fillFile::file?","What is the # (sharp, number, pound, hash) sign used for in Ruby?"
33.75<degree<=56.25 Rails," I'm trying to express a condition like this: But Ruby gives this error: I'm guessing that one way to do it is something like: But there is no another, easier way? <code>  if 33.75 < degree <= 56.25 # some codeend undefined method `<=' for true:TrueClass if 33.75 < degree and degree <= 56.25 # codeend",How to check if a value is included between two other values?
why does **(date_now - date_sent)** return a Rational type?," I am trying to perform subtraction operation on dates. Why does date_now - date_sent return a Rational type? <code>  date_sent = Date.parse(""2013-01-01"") #=> Tue, 01 Jan 2013date_now = Date.today #=> Wed, 04 Sep 2013days = (date_now - date_sent) #=> (246/1)",why does subtraction between dates return a Rational type?
How to handle 503 errors with open-uri," If a website returns a '503 service unavailable' error then open-uri throws an exception. For example: However if you then visit it in a web browser, it actually displays a page with a CAPTCHA and not an error.How can I make sure open-uri doesn't just throw this as an exception but actually handles the response and provides me with the page content? <code>  require 'open-uri'open('http://www.google.co.uk/sorry/?continue=http://www.google.co.uk/search%3Fq%3Dhello%26oq%3Dhello%26ie%3DUTF-8')# OpenURI::HTTPError: 503 Service Unavailable# ...",How can I handle 503 errors with open-uri?
Checking the type of a method parameter in Ruby," I am not sure if an object I pass to a method is of the proper type. I might pass a string to a function that can only handle integers. What about some kind of runtime ensurance? I couldn't see a better option than: Any better alternatives? <code>  def someFixNumMangler(input) raise ""wrong type: integer required"" unless input.class == FixNum other_stuffend",Checking the type of a method parameter
How to scrap a webPage with dynamic content added by javascript," I am trying to scrape this webpage, it have lazy load as we scroll it gets loaded. Using Nokogiri I am able to scrape the initial page, but not the rest of the page which load after scrolling. <code> ",How to scrape a web page with dynamic content added by JavaScript?
Ruby equivalent for python try, I'm trying to convert some Python code into Ruby. Is there an equivalent in Ruby to the try statement in Python? <code> ,"Ruby equivalent for Python's ""try""?"
Chop a string in Ruby into fixed length string ignoring new line or space characters," I have a string containing many new line and spaces. I need to split it into fixed length sub strings. E.g And now i would like to split it into say strings of length 17.so now it should result in Comment: My string may contain any character (white space/word etc) <code>  a = ""This is some\nText\nThis is some text"" [""This is some\nText"", ""\nThis is some tex"", ""t""]",Chop a string in Ruby into fixed length string ignoring (not considering/regardless) new line or space characters
Rails interfaces?," I have the following classes: CachedObject is a non-database object that is getting pulled from a third-party API and stored locally. CachedObject will be stored in both the database and Dalli (memcache), the real-time code will ping the Dalli source for a copy of the object, and the Dalli source will search the database source and update its cache if the object does not exist. So it's a nested call that requires each child class of CachedObjectSource to implement the same set of methods. IE, an interface.Is there a way to write the CachedObjectSource class so that its child classes must implement the interface? Am I going about this the wrong way? <code>  CachedObjectCachedObjectSourceCachedObjectDbSource < CachedObjectSourceCachedObjectDalliSource < CachedObjectSource",Ruby interface classes?
Rails 4: Flash messages linger for an extra page view," I am using the following code in my layout to display two types of flash messages: They both work fine, but whenever one is triggered, it will still appear for one additional page view. I'm not using any caching gems.Why is this happening? And how do I fix it? <code>  <% if !flash[:notice].nil? %> <div class=""row""> <div class=""flash notice col-xs-12""> <%= flash[:notice] %> </div> </div> <% end %> <% if !flash[:error].nil? %> <div class=""row""> <div class=""flash error col-xs-12""> <%= flash[:error] %> </div> </div> <% end %> <%= debug(flash[:notice]) %> <%= debug(flash[:error]) %>",Rails 4: Flash message persists for the next page view
Rails 4: Flash messages persists for the next page views," I am using the following code in my layout to display two types of flash messages: They both work fine, but whenever one is triggered, it will still appear for one additional page view. I'm not using any caching gems.Why is this happening? And how do I fix it? <code>  <% if !flash[:notice].nil? %> <div class=""row""> <div class=""flash notice col-xs-12""> <%= flash[:notice] %> </div> </div> <% end %> <% if !flash[:error].nil? %> <div class=""row""> <div class=""flash error col-xs-12""> <%= flash[:error] %> </div> </div> <% end %> <%= debug(flash[:notice]) %> <%= debug(flash[:error]) %>",Rails 4: Flash message persists for the next page view
Rails 4: Flash messages persist for the next page view," I am using the following code in my layout to display two types of flash messages: They both work fine, but whenever one is triggered, it will still appear for one additional page view. I'm not using any caching gems.Why is this happening? And how do I fix it? <code>  <% if !flash[:notice].nil? %> <div class=""row""> <div class=""flash notice col-xs-12""> <%= flash[:notice] %> </div> </div> <% end %> <% if !flash[:error].nil? %> <div class=""row""> <div class=""flash error col-xs-12""> <%= flash[:error] %> </div> </div> <% end %> <%= debug(flash[:notice]) %> <%= debug(flash[:error]) %>",Rails 4: Flash message persists for the next page view
Why git is looking inside vendors directory?," I have the .gitignore file with this code: but when I do : in any situation (before and after add and commit), I get a long text output like this: The vendors directory is in .gitignore file, so I don't know what is happening.I've tried with: but nothing changes. <code>  /app/cache/*/app/logs/*/app/bootstrap*/vendor/*/web/bundles//app/config/parameters.yml $ git status ... # deleted: vendor/doctrine/orm/tools/sandbox/cli-config.php # deleted: vendor/doctrine/orm/tools/sandbox/doctrine # deleted: vendor/doctrine/orm/tools/sandbox/doctrine.php # deleted: vendor/doctrine/orm/tools/sandbox/index.php # deleted: vendor/doctrine/orm/tools/sandbox/xml/Entities.Address.dcm.xml # deleted: vendor/doctrine/orm/tools/sandbox/xml/Entities.User.dcm.xml # deleted: vendor/doctrine/orm/tools/sandbox/yaml/Entities.Address.dcm.yml # deleted: vendor/doctrine/orm/tools/sandbox/yaml/Entities.User.dcm.yml # modified: vendor/friendsofsymfony/user-bundle/FOS/UserBundle # modified: vendor/gedmo/doctrine-extensions # modified: vendor/herzult/forum-bundle/Herzult/Bundle/ForumBundle # modified: vendor/kriswallsmith/assetic # modified: vendor/symfony/property-access/Symfony/Component/PropertyAccess/.gitignore # modified: vendor/symfony/property-access/Symfony/Component/PropertyAccess/StringUtil.php # modified: vendor/symfony/symfony/CHANGELOG-2.1.md ... $ sudo git clean -dxf",Why is git looking inside vendors directory?
Rails 4 session cookie tamper detection," BackgroundI'm an experienced web developer (mostly with Python and CherryPy) who has implemented secure session management from scratch before, and is now learning Rails. I'm investigating the behavior of Rails sessions as exposed by the session object that is available in the ActionController instance and view contexts.Question/ProblemI have read that the default implementation of sessions in Rails 4 uses an encrypted and tamper-proof cookie. Cool, I guess that means I can use it to hold a user ID for user sessions without worrying about session forging (tamper-proof) or anyone being able to find out what their ID is (encrypted). I wanted to test this and see what rails would do if the session cookie was altered. So, I went and altered the content of the session cookie attribute using a browser add-on, and when I reload the page with the new cookie value, Rails just happily gives me different new values for session_id and _csrf_token.What happened to session cookie integrity!?Shouldn't rails detect (via HMAC signature) that the cookie was altered and then tell me about it somehow?I'm terrified that I'm missing something obscenely obvious, but I've been having no luck searching for an answer on the web, and the source code isn't giving it up easily either (I'm new to ruby). Thanks in advance.The ExperimentI created a new app and generated a controller with an index action: Then I added these two lines to the app/views/layouts/application.html.erb file: I started up the dev server and navigated my browser to ""localhost:3000/home/index"". As expected, the page has the following lines at the bottom: Reloading the page gives me the same values, although the app sets a new value of the _my_app_session cookie attribute every time. That seems weird to me, but I'm getting the same session hash values, so I guess it's cool. Then, I used a cookie editing add-on for Chrome to alter the value of the _my_app_session cookie attribute (replacing the first character of the attribute value). Reloading the page shows completely different values without anything happening. WAT? <code>  $ rails new my_app$ cd my_app; rails g controller home index <%= session.keys %><br/><%= session.values %> [""session_id"", ""_csrf_token""][""8c1558cabe6c86cfb37d6191f2e03bf8"", ""S8i8/++8t6v8W8RMeyvnNu3Pjvj+KkMo2UEcm1oVVZg=""]",Detecting Rails 4 Session cookie tampering
Ruby dynamic constant name access," I have a class API that pulls objects from a third party API and builds them into objects that are subclasses of type APIObject. APIObject subclasses match the object names from the API that I'm pulling from: I would like to define a class method in APIObject that allows me to pull objects using standard Rails accessors: I would like the method to translate this call into an API call like this: I would like to access the name of the APIObject subclass (User) using self.class.name and use that to call the constant (API::User), but I know API::self.class.name won't work. I could rewrite this method over and over again for every subclass, but it seems like this should be possible without doing that. Suggestions? <code>  User < APIObjectAccount < APIObject user = User.find id API::User::findById id",Get Ruby class constant dynamically by name
Copy one tabel record to another in rails," I have a User model and users table. A user can have many phone numbers so I have a separate Model named Phone.I am using this association for that: Model Above code works fine. Admin want to copy any user's record into user_temp and phone_temp table as well (I have separate models named UserTemp and PhoneTemp).How can I do this?  <code>  User attr_accessible :id, :name, :screenname,:fullname,:phones_attributes has_many :phones,:dependent => :destroyPhone attr_accessible :phone belongs to :users",Copy one table record to another in rails
"""Full screen"" terminal application with ruby (or other languages)"," Have you ever used cli tools like vim or htop? All these will maximize inside the terminal and have no scrollback but when you exit, they disappear and you can see what you typed in before.Example:(terminal window with scrollback)(maximized vim without scrollback)(back in shell with scrollback and vim gone)How can I do this in my own application, preferably ruby? <code> ",Full screen terminal application with ruby (or other languages)
"confused with ""fail"" word in ruby"," I am learning Ruby and encountered the fail keyword. What does it mean? <code>  if password.length < 8 fail ""Password too short""endunless username fail ""No user name set""end",What does the fail keyword do in Ruby?
What does the fail keyword in ruby does?," I am learning Ruby and encountered the fail keyword. What does it mean? <code>  if password.length < 8 fail ""Password too short""endunless username fail ""No user name set""end",What does the fail keyword do in Ruby?
What does the fail keyword do in ruby?," I am learning Ruby and encountered the fail keyword. What does it mean? <code>  if password.length < 8 fail ""Password too short""endunless username fail ""No user name set""end",What does the fail keyword do in Ruby?
Escape String - Ouput rails string in Javascript," I'm trying to assign a string value to a javascript object in my .erb file like so: The problem is, if the value of name is Tom's small ears, the output of data.name would be Tom&#x27;s small ears.Is there a way to escape special characters?I tried doing 'name': '<%= raw @product.name %>' but Uncaught SyntaxError: Unexpected identifier gets output into the console.Doing <%= escape_javascript @product.name %> outputs Tom\&#x27;s small earsEdit@Stefan's comment under MrYoshiji's answer worked for me. <code>  var data = { 'name': '<%= @product.name %>', ...};",Escape String - Output rails string in Javascript
getting error while installing PostgreSQL gem," I am learning Ruby on Rails and trying to develop an application.In my application I am trying to use the default SQLite database in the Development Mode and PostgreSQL in the Production Mode.But I'm getting the following error while trying to install pg gem using: gem install pg After that I again tried with gem install pg -- --with-pg-config= '/usr/bin/pg_config'and the following error is displayed: <code>  Buildingnativeextensions.Thiscouldtakeawhile...ERROR:Errorinstallingpg:ERROR:Failedtobuildgemnativeextension./home/tusharkhatiwada/.rvm/rubies/ruby-2.0.0-p247/bin/rubyextconf.rbcheckingforpg_config...yesUsingconfigvaluesfrom/usr/bin/pg_configYouneedtoinstallpostgresql-server-dev-X.Yforbuildingaserver-sideextensionorlibpq-devforbuildingaclient-sideapplication.Youneedtoinstallpostgresql-server-dev-X.Yforbuildingaserver-sideextensionorlibpq-devforbuildingaclient-sideapplication.checkingforlibpq-fe.h...noCan'tfindthe'libpq-fe.hheader***extconf.rbfailed***CouldnotcreateMakefileduetosomereason,probablylackofnecessarylibrariesand/orheaders.Checkthemkmf.logfileformoredetails.Youmayneedconfigurationoptions.Providedconfigurationoptions:--with-opt-dir--without-opt-dir--with-opt-include--without-opt-include=${opt-dir}/include--with-opt-lib--without-opt-lib=${opt-dir}/lib--with-make-prog--without-make-prog--srcdir=.--curdir--ruby=/home/tusharkhatiwada/.rvm/rubies/ruby-2.0.0-p247/bin/ruby--with-pg--without-pg--with-pg-config--without-pg-config--with-pg_config--without-pg_config--with-pg-dir--without-pg-dir--with-pg-include--without-pg-include=${pg-dir}/include--with-pg-lib--without-pg-lib=${pg-dir}/Gemfileswillremaininstalledin/home/tusharkhatiwada/.rvm/gems/ruby-2.0.0-p247@rails4.0.0/gems/pg-0.17.0forinspection.Resultsloggedto/home/tusharkhatiwada/.rvm/gems/ruby-2.0.0-p247@rails4.0.0/gems/pg-0.17.0/ext/gem_make.out Buildingnativeextensionswith:'--with-pg-config=/usr/bin/pg_config'Thiscouldtakeawhile...ERROR:Errorinstallingpg:ERROR:Failedtobuildgemnativeextension./home/tusharkhatiwada/.rvm/rubies/ruby-2.0.0-p247/bin/rubyextconf.rb--with-pg-config=/usr/bin/pg_configUsingconfigvaluesfromsh:1::Permissiondeniedsh:1::Permissiondeniedcheckingforlibpq-fe.h...noCan'tfindthe'libpq-fe.hheader***extconf.rbfailed***CouldnotcreateMakefileduetosomereason,probablylackofnecessarylibrariesand/orheaders.Checkthemkmf.logfileformoredetails.Youmayneedconfigurationoptions.Providedconfigurationoptions:--with-opt-dir--without-opt-dir--with-opt-include--without-opt-include=${opt-dir}/include--with-opt-lib--without-opt-lib=${opt-dir}/lib--with-make-prog--without-make-prog--srcdir=.--curdir--ruby=/home/tusharkhatiwada/.rvm/rubies/ruby-2.0.0-p247/bin/ruby--with-pg--without-pg--with-pg-config--with-pg-dir--without-pg-dir--with-pg-include--without-pg-include=${pg-dir}/include--with-pg-lib--without-pg-lib=${pg-dir}/Gemfileswillremaininstalledin/home/tusharkhatiwada/.rvm/gems/ruby-2.0.0-p247@rails4.0.0/gems/pg-0.17.0forinspection.Resultsloggedto/home/tusharkhatiwada/.rvm/gems/ruby-2.0.0-p247@rails4.0.0/gems/pg-0.17.0/ext/gem_make.out",Installing the PostgreSQL gem with 'gem pq' fails with ERROR: Failed to build gem native extension
Xpath to select between two html comments," I have a big HTML page. But I want to select certain nodes using Xpath: I can select HTML after the <!-- begin content --> using: Also I can select HTML before the <!-- end content --> using: But do I have to have XPath to select all the HTML between the two comments? <code>  <html> ........<!-- begin content --> <div>some text</div> <div><p>Some more elements</p></div><!-- end content -->.......</html> ""//comment()[. = ' begin content ']/following::*"" ""//comment()[. = ' end content ']/preceding::*"" ",XPath to select between two HTML comments?
"activerecord query with belongs_to, for noobs"," I'm not strong in sql and relatively new to rails. The I can query directly by client_id and get a record back as expected But I would like to query by client.name This give me an error that tells me that client is not a method of case. Ultimately, what I'm trying to do is very simple: get the first Case that belongs to client ""Foo"". The query I would expect to use is this. What should it be? <code>  Case attr_accessible client_id belongs_to ClientClient attr_accessibe name has_many Cases Case.where(client_id: 1) Case.where(client.name => ""Foo"") Undefined method or local variable Case.where(client.name => ""Foo"").first",activerecord where clause on relation belongs_to
Installing Ruby Gem in Windows," I'm new to ruby. I tried to install Ruby Gems on my PC by following the steps given in the site http://rubygems.org/pages/download.I downloaded the package from the mentioned site, changed the directory to the directory in which the setup resides, and tried to run setup using the command setup.rb in command prompt.But I get a window pop up that says ""Windows can't open this file"" and prompts me to select a program to open this file.What should I do now? Let me know if I am doing something wrong. <code> ",Installing RubyGems in Windows
Integer.respond_to?(:even?) => false," I've been going over the Ruby Koans and I've found the about_open_classes.rb koan interesting. Specially the last test where they modify Integer#even? method. I wanted to play around with this concept so I opened Irb and tried running Integer.respond_to?(:even?), but to my surprise I got false. Then I tried Fixnum.respond_to?(:even?) and got false. I also tried Integer.respond_to?(:respond_to?) and got true and when I do 2.even? I get true too. I have no idea what is going on. Can anyone tell what I'm missing? <code> ",Why Integer.respond_to?(:even?) returns false?
Did I install ruby 193 correctly on RHEL?," Before you say yum -y install ruby193... I did that.Please note that I am not a Ruby developer, but need this program as part of another developer's work via web services. (He is not available.) Any help would be greatly appreciated.I attempted to install a library per instructions and got: I noticed that ruby.h is only on the machine at /usr/lib64/ruby/1.8/x86_64-linux/ruby.h.What am I missing? <code>  [root@ctbroker console]# gem install json -v '1.8.0'Building native extensions. This could take a while...ERROR: Error installing json:ERROR: Failed to build gem native extension. /opt/rh/ruby193/root/usr/bin/ruby extconf.rbmkmf.rb can't find header files for ruby at /opt/rh/ruby193/root/usr/share/include/ruby.hGem files will remain installed in /opt/rh/ruby193/root/usr/local/share/gems/gems/json-1.8.0 for inspection.Results logged to /opt/rh/ruby193/root/usr/local/share/gems/gems/json-1.8.0/ext/json/ext/generator/gem_make.out",Did I install Ruby 1.9.3 correctly on RHEL?
Rails: to_date with a month/date/year format," I have a simple question here. I have an instance variable with a created_at. How would I convert it to Month, day, year ~ September, 13, 1987When I tried = @example.created_at In my view it gives me 1987-09-13Oddly enough when I do this method in console I get Sun, 13 Sep 1987How do I turn my variable to month, date, year?Why does it return something different in console? <code> ",Rails: to_date with a month/day/year format
Why doesn't Ruby treat mothod= the same as any other method?," Consider the following code snippet: I expect the expression Example.new.my_attr = 5 to return 15, but that turns out to be wrong. The original return value is always returned, even when I call the = method explicitly: How and why does Ruby do this? Does Ruby treat methods that end in = specially, or is it some other mechanism? I guess this precludes chaining on return values of = methods, right? Is there a way to make Ruby behave differently, or is this just how it is?Update: Credit to @jeffgran for this: This is a workaround, but on another level even more perplexing, since that would mean send is clearly not always equivalent in behavior to calling a method directly. <code>  class Example def my_attr=(value) @_my_attr = value @_my_attr * 3 endend Example.new.my_attr = 5 # => 5Example.new.my_attr=(5) # => 5 Example.new.send(:my_attr=, 5) # => 15",Why isn't `method=` treated the same as any other method?
Delete empty string in string array ruby," I want to get delete_if to delete empty strings from an array. With the solution below, the array still contains many empty strings. Is there anything missing? <code>  products = my_text.split(/\t+/)products.delete_if {|element| element == "" "" || """" || element.nil?}",How do I delete empty strings in array
How do I delete empty strings in array?," I want to get delete_if to delete empty strings from an array. With the solution below, the array still contains many empty strings. Is there anything missing? <code>  products = my_text.split(/\t+/)products.delete_if {|element| element == "" "" || """" || element.nil?}",How do I delete empty strings in array
How is each_for_object supposed to work?," I'm trying to figure out how each_with_object is supposed to be used.I have a sum example that doesn't work: I would assume that the result would be 6 ! Where is my mistake ? <code>  > (1..3).each_with_object(0) {|i,sum| sum+=i}=> 0",How is each_with_object supposed to work?
Using rbenv doesnt' work with sudo," Any commands that use sudo don't seem to work with RBenv.I'm trying to install ActiveRecord and it says I don't have write permission, so when I try this: It says: How can I get around this? <code>  ERROR: While executing gem ... (Gem::FilePermissionError) You don't have write permissions into the /usr/local/rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1 directory. sudo: gem: command not found",Using rbenv doesn't work with sudo?
Using rbenv doesnt' work with sudo?," Any commands that use sudo don't seem to work with RBenv.I'm trying to install ActiveRecord and it says I don't have write permission, so when I try this: It says: How can I get around this? <code>  ERROR: While executing gem ... (Gem::FilePermissionError) You don't have write permissions into the /usr/local/rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1 directory. sudo: gem: command not found",Using rbenv doesn't work with sudo?
How can I find where gem files are installed?," I can finds gems that are installed using gem list, but it doesn't show me where the gems are installed.How can I find where the gems are, and how can I know before installing a gem where it will be installed? <code> ",How to find where gem files are installed
Save multiple records at once in rails," How would I save this array in one call with Rails? Can I just call Rails.create(tax_rates)?Also, is there a way to remove duplicate symbols so they look neater? <code>  tax_rates = [{ :income_from => 0 :income_to => 18200 :start => ""01-07-2013"" :finish => ""30-06-2014"" :rate => nil :premium => nil },{ :income_from => 18201 :income_to => 37000 :start => ""01-07-2013"" :finish => ""30-06-2014"" :rate => 0.19 :premium => nil },{ :income_from => 18201 :income_to => 37000 :start => ""01-07-2013"" :finish => ""30-06-2014"" :rate => 0.19 :premium => nil }]",How would I save multiple records at once in Rails?
Ruby: Create array of dates," I'm looking for an elegant way to make a range of datetimes, e.g.: The step should be configurable, e.g. hourly, daily, monthly.I'd like times to be inclusive, i.e. include end_time.Additional requirements are:Original timezone should be preserved, i.e. if it's different from the local timezone, it should still be maintained.Should use proper advance methods, e.g. Rails :advance, to handle things like variable number of days in months.Ideally performance will be good, but that's not a primary requirement.Is there an elegant solution? <code>  def DateRange(start_time, end_time, period) ...end>> results = DateRange(DateTime.new(2013,10,10,12), DateTime.new(2013,10,10,14), :hourly)>> puts results2013-10-10:12:00:002013-10-10:13:00:002013-10-10:14:00:00",Ruby: Create range of dates
Creating a histogram in Ruby," How do I create a histogram of an array of integers? For example: I want to create a histogram based on how many entries there are for 0, 1, 2, and so on. Is there an easy way to do it in Ruby?The output should be two arrays. The first array should contain the groups (bins), the second array should contain the number of occurrences (frequencies).For data given above, I would expect the following output: <code>  data = [0,1,2,2,2,2,2,3,3,3,3,3,3,4,4,4,4,5,5,6,6,6,7,7,7,7,7,8,9,9,10] bins # => [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10]frequencies # => [1, 1, 5, 6, 4, 2, 3, 5, 1, 2, 1]",How to create a histogram from a flat Array in Ruby
rails 4 LIKE query- activeRecord adds quotes problems," I am trying to do a like query like so But when it is run something is adding quotes which causes the sql statement to come out like so So you can see my problem.I am using Rails 4 and Postgres 9 both of which I have never used so not sure if its and an activerecord thing or possibly a postgres thing.How can I set this up so I have like '%my_search%' in the end query? <code>  def self.search(search, page = 1 ) paginate :per_page => 5, :page => page, :conditions => [""name LIKE '%?%' OR postal_code like '%?%'"", search, search], order => 'name'end SELECT COUNT(*)FROM ""schools"" WHERE (name LIKE '%'havard'%' OR postal_code like '%'havard'%')):",Rails 4 LIKE query - ActiveRecord adds quotes
Ruby: Assign variable to another variable only if not nil," I have @obj.items_per_page, which is 20 at the beginning, and I want the method below to assign value to it only if many_items is not nil: With the code above, even if many_items is nil, @obj.items_per_page remains at 20. Why? And is that ""good"" coding? Shouldn't I use something like Or is there a third way? I don't feel completely comfortable with either way. <code>  def fetch_it_baby (many_items = nil) @obj.items_per_page = many_items @obj.items_per_page = many_items || @obj.items_per_page",Assign variable only if not nil
Using the fetch method for nested hash," I have the following hash: I can access the age by: What if I used Hash#fetch method? How can I retrieve a key from a nested hash?As Sergio mentioned, the way to do it (without creating something for myself) would be by a chain of fetch methods: <code>  hash = {'name' => { 'Mike' => { 'age' => 10, 'gender' => 'm' } } } hash['name']['Mike']['age'] hash.fetch('name').fetch('Mike').fetch('age')",How do I use the fetch method for nested hash?
"watir webdriver, phantomjs, and javascript alerts"," Im trying to automate some tasks on a webpage, and part of it includes clicking a link thatll show a javascript alert where you have to press OK. Trouble is, when it gets to that point, it fails with the following error Searching online, it seems like the trouble may be related to ghostdriver and that maybe phantomjs cant do it, but that notion seems a bit weird to me (its called phantom*js*, after all, and an alert is pretty basic javascript), but maybe Im looking at it wrong.Running the script with chrome, it works flawlessly. <code>  /Users/username/.gem/ruby/2.0.0/gems/selenium-webdriver-2.35.1/lib/selenium/webdriver/remote/http/common.rb:66:in `create_response': unexpected response, code=405, content-type=""text/plain"" (Selenium::WebDriver::Error::WebDriverError)Invalid Command Method - Request => {""headers"":{""Accept"":""application/json"",""Accept-Encoding"":""gzip;q=1.0,deflate;q=0.6,identity;q=0.3"",""Cache-Control"":""no-cache"",""Connection"":""close"",""Host"":""127.0.0.1:8910"",""User-Agent"":""Ruby""},""httpVersion"":""1.1"",""method"":""GET"",""url"":""/alert_text"",""urlParsed"":{""anchor"":"""",""query"":"""",""file"":""alert_text"",""directory"":""/"",""path"":""/alert_text"",""relative"":""/alert_text"",""port"":"""",""host"":"""",""password"":"""",""user"":"""",""userInfo"":"""",""authority"":"""",""protocol"":"""",""source"":""/alert_text"",""queryKey"":{},""chunks"":[""alert_text""]},""urlOriginal"":""/session/6772bf50-2ad9-11e3-86e7-55e618e30fa2/alert_text""} from /Users/username/.gem/ruby/2.0.0/gems/selenium-webdriver-2.35.1/lib/selenium/webdriver/remote/http/default.rb:66:in `request' from /Users/username/.gem/ruby/2.0.0/gems/selenium-webdriver-2.35.1/lib/selenium/webdriver/remote/http/common.rb:40:in `call' from /Users/username/.gem/ruby/2.0.0/gems/selenium-webdriver-2.35.1/lib/selenium/webdriver/remote/bridge.rb:634:in `raw_execute' from /Users/username/.gem/ruby/2.0.0/gems/selenium-webdriver-2.35.1/lib/selenium/webdriver/remote/bridge.rb:612:in `execute' from /Users/username/.gem/ruby/2.0.0/gems/selenium-webdriver-2.35.1/lib/selenium/webdriver/remote/bridge.rb:150:in `getAlertText' from /Users/username/.gem/ruby/2.0.0/gems/selenium-webdriver-2.35.1/lib/selenium/webdriver/common/alert.rb:9:in `initialize' from /Users/username/.gem/ruby/2.0.0/gems/selenium-webdriver-2.35.1/lib/selenium/webdriver/common/target_locator.rb:76:in `new' from /Users/username/.gem/ruby/2.0.0/gems/selenium-webdriver-2.35.1/lib/selenium/webdriver/common/target_locator.rb:76:in `alert' from /Users/username/.gem/ruby/2.0.0/gems/watir-webdriver-0.6.4/lib/watir-webdriver/alert.rb:93:in `assert_exists' from /Users/username/.gem/ruby/2.0.0/gems/watir-webdriver-0.6.4/lib/watir-webdriver/alert.rb:37:in `ok' from ./olx:21:in `block in <main>' from ./olx:19:in `times' from ./olx:19:in `<main>'","phantomjs via watir-webdriver, not handling javascript alerts"
How to remove last word from a sentence(a string)," How to go about removing the last element? For example, I have strings like these: I need a neat way of showing the output: This is what I could do: I was wondering if there's any neat way of doing this maybe in one line, like: str.split("" "", 2).last => ""testing string"", which should show ""my testing"" instead.EDITThank you guys for the multiple and interesting answers. I appreciate your effort and time. But, I had to be fair, so I decided to benchmark everybody's answer. Here is the report with benchmark: Which makes it clear that answer p str2[0...str2.rindex(' ')] is performing well. Though I liked other approaches as well, very thoughtful and interesting. Thanks.Second EditionAs per @theTineMan comment here is the updated benchmark: <code>  str1 = ""My testing String""str2 = ""My another testing string"" str1 = ""My testing""str2 = ""My another testing"" str1 = str1.split("" "")str1.delete(str1.last)str1.join("" "")# => ""My testing"" #!/usr/bin/rubyrequire 'benchmark'str2 = ""My another testing string""n = 500Benchmark.bm(20) do |x| x.report(""str2[/(.*)\s/,1] ""){ n.times { str2[/(.*)\s/,1] } } x.report(""str2[0...str2.rindex(' ')] ""){ n.times { str2[0...str2.rindex(' ')] } } x.report(""str2.split(' ')[0...-1].join(' ') ""){ n.times { str2.split(' ')[0...-1].join(' ') } } x.report(""str2[/.*(?=\s)/] ""){ n.times { str2[/.*(?=\s)/] } }end user system total realstr2[/(.*) /,1] 0.000000 0.000000 0.000000 ( 0.001394)str2[0...str2.rindex(' ')] 0.000000 0.000000 0.000000 ( 0.000956)str2.split(' ')[0...-1].join(' ') 0.010000 0.000000 0.010000 ( 0.002569)str2[/.*(?= )/] 0.000000 0.000000 0.000000 ( 0.001351) require 'benchmark'str2 = ""My another testing string""n = 999999Benchmark.bmbm(20) do |x| x.report(""str2[/(.*)\s/,1] ""){ n.times { str2[/(.*)\s/,1] } } x.report(""str2[0...str2.rindex(' ')] ""){ n.times { str2[0...str2.rindex(' ')] } } x.report(""str2.split(' ')[0...-1].join(' ') ""){ n.times { str2.split(' ')[0...-1].join(' ') } } x.report(""str2[/.*(?=\s)/] ""){ n.times { str2[/.*(?=\s)/] } }endRehearsal ----------------------------------------------------------------------str2[/(.*) /,1] 1.030000 0.000000 1.030000 ( 1.033787)str2[0...str2.rindex(' ')] 0.850000 0.000000 0.850000 ( 0.853124)str2.split(' ')[0...-1].join(' ') 4.740000 0.000000 4.740000 ( 4.750215)str2[/.*(?= )/] 0.990000 0.000000 0.990000 ( 0.990726)------------------------------------------------------------- total: 7.610000sec user system total realstr2[/(.*) /,1] 1.020000 0.000000 1.020000 ( 1.014772)str2[0...str2.rindex(' ')] 0.830000 0.000000 0.830000 ( 0.839385)str2.split(' ')[0...-1].join(' ') 4.620000 0.010000 4.630000 ( 4.629874)str2[/.*(?= )/] 0.990000 0.000000 0.990000 ( 0.988224)",How to remove last word from a sentence (a string)
Ruby_Installation_Error-Watir, I'm running into the following error: I have installed the gem watir and my system configurations are as follows:OS:Windows7IE:10 <code>  #ERRORC:\Users\Farooq>D:D:\>irbirb(main):001:0> require 'rubygems'=> falseirb(main):002:0> require 'watir'LoadError: cannot load such file -- watir/loader from D:/Ruby193/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require' from D:/Ruby193/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require' from D:/Ruby193/lib/ruby/gems/1.9.1/gems/commonwatir-4.0.0/lib/watir.rb:1:in `<top (required)>' from D:/Ruby193/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:60:in `require' from D:/Ruby193/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:60:in `rescue in require' from D:/Ruby193/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:35:in `require' from (irb):2 from D:/Ruby193/bin/irb:12:in `<main>'irb(main):003:0>,Ruby_Installation_Error_Watir
cant install any gems on my mac," I tried doing gem install for just about any gem and I have been getting errors. I think I need to reset and or update something on my computer but not sure what.Here is some of the command line code errors: Does anyone know what I need to do to fix this? I got a new computer and was wondering if I need to set up the user differently or something? <code>  ERROR: Could not find a valid gem 'multi_json' (>= 0), here is why: Unable to download data from https://rubygems.org/ - SSL_connect returned=1 errno=0 state=SSLv3 read server certificate B: certificate verify failed (https://s3.amazonaws.com/production.s3.rubygems.org/latest_specs.4.8.gz)ERROR: Could not find a valid gem 'cowsay' (>= 0), here is why: Unable to download data from https://rubygems.org/ - SSL_connect returned=1 errno=0 state=SSLv3 read server certificate B: certificate verify failed (https://s3.amazonaws.com/production.s3.rubygems.org/latest_specs.4.8.gz)sudo gem install rubygems-updatePassword:ERROR: Could not find a valid gem 'rubygems-update' (>= 0), here is why: Unable to download data from https://rubygems.org/ - SSL_connect returned=1 errno=0 state=SSLv3 read server certificate B: certificate verify failed (https://s3.amazonaws.com/production.s3.rubygems.org/latest_specs.4.8.gz)",Why can't I install any gems on my Mac?
Find the largest value for an array of hashes with common keys," I have two arrays, each containing any number of hashes with identical keys but differing values: Despite having any number, the number of hashes will always be equal.How could I find the largest :value_length for every hash whose value is of a certain type?For instance, the largest :value_length for a hash with a :type of 0 would be 4. The largest :value_length for a hash with a :type of 1 would be 8.I just can't get my head around this problem. <code>  ArrayA = [{value: ""abcd"", value_length: 4, type: 0},{value: ""abcdefgh"", value_length: 8, type: 1}]ArrayB = [{value: ""ab"", value_length: 2, type: 0},{value: ""abc"", value_length: 3, type: 1}]",Find the largest value for an array of hashes with common keys?
How to run a rake task by terminal in rails, I have defined a rake task as follows in a file called file_locker_task.rake How do I execute this rake task from the command line?I tried:rake myspace:process and rake process but both are throwing an error like this: <code>  namespace :myspace do task :process => :environment do FileLocker.lock_files endend rake aborted!Don't know how to build task 'process',How to run a rake task by command line in rails
Equivalent of Rails try method in Javascript, In Rails I can do this: this method returns nil if user is nil else user.name. Here name is a method defined on the user object.I know it can be done using if..then..else in Javascript but is there an equivalent compact method to do the same in Javascript?Googling points to Javascript's try command which is not what I am looking for. <code>  x = user.try(:name),Javascript equivalent of Rails try method
Dynamicaly create class inherited from ActiveRecord," I want to be able to dynamically create classes, for scripting outside my Rails app, that inherit from ActiveRecord.I'm stuck on something like this: How do I make it work, or can someone show me better way to do it? <code>  require 'active_record'def create_arec(table_name) Class.new ActiveRecord::Base do self.table_name = table_name yield endendBand = create_arec 'bands' do scope :only_rock, -> {where genre: 'rock'}endrock_bands = Band.only_rock #undefined method `only_rock'",Dynamically create a class inherited from ActiveRecord?
Converting a ruby hash string to a python dictionary," I'm working with some command output that's returned as the string of a Ruby hash. (From something called mcollective).Here is an example string I'm receiving: I'm capable of writing a mini parser for this, but it would be a fiddly task. Does anyone know of a library or code snippet that could convert this for me into a Python dictionary?If you think I should just parse it, any tips are welcome. <code>  {:changes=>{""total""=>0}, :events=>{""failure""=>0, ""success""=>0, ""total""=>0}, :version=> {""puppet""=>""2.7.21 (Puppet Enterprise 2.8.1)"", ""config""=>1381497648}, :time=> {""filebucket""=>0.000287, ""cron""=>0.00212, ""package""=>0.398982, ""exec""=>0.001314, ""config_retrieval""=>5.60761618614197, ""anchor""=>0.001157, ""service""=>0.774906, ""total""=>9.85111718614197, ""host""=>0.002662, ""user""=>0.063606, ""file""=>2.998467, ""last_run""=>1381497660}, :resources=> {""skipped""=>6, ""failed_to_restart""=>0, ""out_of_sync""=>0, ""failed""=>0, ""total""=>112, ""restarted""=>0, ""scheduled""=>0, ""changed""=>0}}",Converting a Ruby hash string to a Python dictionary
"In Ruby: ""Your Ruby version is 1.9.3, but your Gemfile specified 2.0.0"""," I created a Ruby project, but when running bundle update and bundle install it returns an error: An image of it is: http://i.imgur.com/dZMhI11.png?1My gemfile is: <code>  Your Ruby version is 1.9.3, but your Gemfile specified 2.0.0 ruby '2.0.0'#ruby-gemset=railstutorial_rails_4_0gem 'rails', '4.0.0'group :development do gem 'sqlite3', '1.3.8'endgem 'sass-rails', '4.0.0'gem 'uglifier', '2.1.1'gem 'coffee-rails', '4.0.0'gem 'jquery-rails', '3.0.4'gem 'turbolinks', '1.1.1'gem 'jbuilder', '1.0.2'group :doc do gem 'sdoc', '0.3.20', require: falseend","How to fix ""Your Ruby version is 1.9.3, but your Gemfile specified 2.0.0"""
querying on a time range across all dates," I'm trying to query a purchases table in my rails database (Postgres) and I want to query on time ranges.For example, I'd like to know how many purchases were made between 2 PM and 3 PM across all dates.There is a created_at column in this table but I don't see how to accomplish this without searching for a specific date as well.I've tried:Purchases.where(""created_at BETWEEN ? and ?"", Time.now - 1.hour, Time.now)But this ultimately will just search for today's date with those times. <code> ",Query on a time range ignoring the date of timestamps
"How to create a nested loop with Ruby the ""Right Way!"""," I'm in the process of learning Ruby, taking a Berkeley's MOOC, and, in some of these MOOC's homework we have an exercise that says: Define a method sum_to_n? which takes an array of integers and an additional integer, n, as arguments and returns true if any two elements in the array of integers sum to n. An empty array should sum to zero by definition.I already created two methods that can do the job, but I'm not comfortable with any of them because I think they are not written in the Ruby Way. I hope some of you can help me to learn which would be the right way!The first method I made uses the each method for both iterations, but what I don't like about this method is that every number is summed with every other number, even with the same number, doing something like this: As you can see, there's a lot of repeated sums, and I don't want that.This is the code: With the other method I got what I wanted, just a few sums without repeating any of them or even summing the same numbers, but it looks HORRIBLE, and I'm pretty sure someone would love to kill me for doing it this way, but the method does a great job as you can see: This is the code: Well, I hope you guys have fun doing a better and prettier method as I did trying.Thank you for your help.  <code>  arr[1, 2, 3, 4] => 1+1, 1+2, 1+3, 1+4, 2+1, 2+2, 2+3, 2+4, 3+1, 3+2... 4+3, 4+4 def sum_to_n?(arr, n) arr.each {|x| arr.each {|y| return true if x + y == n && x != y}} return true if n == 0 && arr.length == 0 return falseend arr[1, 2, 3, 4] => 1+2, 1+3, 1+4, 2+3, 2+4, 3+4 def sum_to_n?(arr, n) for i in 0..arr.length - 1 k = i + 1 for k in k..arr.length - 1 sum = arr[i] + arr[k] if sum == n return true end end end return true if n == 0 && arr.length == 0 return falseend","How to create a nested loop with Ruby the ""Right Way!""?"
how to use regular expression in featching data from graphite?," I want to fetch data from different counters from graphite in one single request like:- and so on.. 20 more.But I don't want to fetch in that request how can i do that?This is what I tried: It gets json data for 'module_xyz_abc' too, but that i don't want. <code>  summarize(site.testing_server_2.triggers_unknown.count,'1hour','sum')&format=jsonsummarize(site.testing_server_2.requests_failed.count,'1hour','sum')&format=jsonsummarize(site.testing_server_2.core_network_bad_soap.count,'1hour','sum')&format=json summarize(site.testing_server_2.module_xyz_abc.count,'1hour','sum')&format=json summarize(site.testing_server_2.*.count,'1hour','sum')&format=json&from=-24hour",How to use regular expression in fetching data from graphite?
Metaprogramming Ruby: uninclude a module out from a module after including it, Is there a way to work around the fact that ruby contains no uninclude keyword?? <code>  module Xendmodule Yendmodule Z #TODO include X replacement of including Y #TODO include Y replacement of including Xend,Ruby 2.0 How do I uninclude a module out from a module after including it?
How do I uninclude a module out from a module after including it?, Is there a way to work around the fact that ruby contains no uninclude keyword?? <code>  module Xendmodule Yendmodule Z #TODO include X replacement of including Y #TODO include Y replacement of including Xend,Ruby 2.0 How do I uninclude a module out from a module after including it?
What is the best practice for handling nil objects and properties in ruby?," Say I have a User object, which has an email property, and I need the upper cased last letter of their email: If u or email is nil in this chain, then I get a NoMethodError: undefined method 'blah' for nil:Nilclass. I should be able to work around it in most cases, but sometimes, a nil gets where it shouldn't or its hard to contain. One way would be verbose: But this gets annoying and hazardous in a view, or in a long chain of a.bunch.of.properties.down.a.hierarchy. I read about try method in Rails: This is less verbose, but I feel icky writing all those tries. And once I put try in the chain, I have to use them all the way down. Is there a better way? <code>  u = User.find(1) letter = u.email.upcase.last u = User.find(1)letter = nilif u && u.email letter = u.email.upcase.lastend u = User.find(1)letter = u.try(:email).try(:upcase).try(:last)",What is the best practice for handling nil objects and properties?
How does to_enum(:method) recieve its block here?," This code, from an example I found, counts the number of elements in the array which are equal to their index. But how ? I could not have done it only with chaining, and the order of evaluation within the chain is confusing.What I understand is we're using the overload of Enumerable#count which, if a block is given, counts the number of elements yielding a true value. I see that each_with_index has the logic for whether the item is equal to it's index. What I don't understand is how each_with_index becomes the block argument of count, or why the each_with_index works as though it was called directly on [4,1,2,0]. If map_with_index existed, I could have done: but help me understand this enumerable-based style please - it's elegant! <code>  [4, 1, 2, 0].to_enum(:count).each_with_index{|elem, index| elem == index} [4,1,2,0].map_with_index{ |e,i| e==i ? e : nil}.compact",How does to_enum(:method) receive its block here?
Ruby Split string by multiple delimiters," I want to split a string by whitespaces, , and ' using a single ruby command. word.split will split by white spaces; word.split("","") will split by ,;word.split(""\'"") will split by '.How to do all three at once?  <code> ",Split string by multiple delimiters
no implicit conversion of String into Integer (TypeError)," I have some code which I run in very similar circumstances. This is the first circumstance, where I have an imdb_id of a film I want details of: And this gives the following result: This is as expected. In the second circumstance, I have the title and year of the same film: From this, I get the exact same JSON output: But when I try and call puts json[""imdb_id""], I get this error: This always happens when fetching using the title and year, yet it seems unexplained as the JSON output is exactly the same. <code>  url = ""http://mymovieapi.com/?id=#{self.imdb_id}&type=json&plot=none&episode=0&lang=en-US&aka=simple&release=simple&business=0&tech=0""doc = Hpricot(open(url)).to_sjson = JSON.parse(doc)puts jsonputs json[""imdb_id""] {""rating_count""=>493949,""genres""=>[""Drama"", ""Romance""],""rated""=>""PG-13"",""language""=>[""English"", ""French"", ""German"", ""Swedish"", ""Italian"", ""Russian""],""rating""=>7.6,""country""=>[""USA""],""release_date""=>19980403,""title""=>""Titanic"",""year""=>1997,""filming_locations""=>""Santa Clarita, California, USA"",""imdb_id""=>""tt0120338"",""directors""=>[""James Cameron""],""writers""=>[""James Cameron""],""actors""=>[""Leonardo DiCaprio"", ""Kate Winslet"", ""Billy Zane"", ""Kathy Bates"", ""Frances Fisher"", ""Gloria Stuart"", ""Bill Paxton"", ""Bernard Hill"", ""David Warner"", ""Victor Garber"", ""Jonathan Hyde"", ""Suzy Amis"", ""Lewis Abernathy"", ""Nicholas Cascone"", ""Anatoly M. Sagalevitch""],""also_known_as""=>[""Tai tan ni ke hao""],""poster""=>{""imdb""=>""http://ia.media-imdb.com/images/M/MV5BMjExNzM0NDM0N15BMl5BanBnXkFtZTcwMzkxOTUwNw@@._V1_SY317_CR0,0,214,317_.jpg"", ""cover""=>""http://imdb-poster.b0.upaiyun.com/000/120/338.jpg!cover?_upt=66ac07591382594194""},""runtime""=>[""194 min""],""type""=>""M"",""imdb_url""=>""http://www.imdb.com/title/tt0120338/""}tt0120338 url = ""http://mymovieapi.com/?title=#{self.title}&type=json&plot=simple&episode=0&limit=1&year=#{self.year}&yg=1&mt=none&lang=en-US&offset=&aka=simple&release=simple&business=0&tech=0""doc = Hpricot(open(url)).to_sjson = JSON.parse(doc)puts jsonputs json[""imdb_id""] {""rating_count""=>493949,""genres""=>[""Drama"", ""Romance""],""rated""=>""PG-13"", ""language""=>[""English"", ""French"", ""German"", ""Swedish"", ""Italian"", ""Russian""],""rating""=>7.6,""country""=>[""USA""],""release_date""=>19980403,""title""=>""Titanic"",""year""=>1997,""filming_locations""=>""Santa Clarita, California, USA"",""imdb_id""=>""tt0120338"",""directors""=>[""James Cameron""],""writers""=>[""James Cameron""],""actors""=>[""Leonardo DiCaprio"", ""Kate Winslet"", ""Billy Zane"", ""Kathy Bates"", ""Frances Fisher"", ""Gloria Stuart"", ""Bill Paxton"", ""Bernard Hill"", ""David Warner"", ""Victor Garber"", ""Jonathan Hyde"", ""Suzy Amis"", ""Lewis Abernathy"", ""Nicholas Cascone"", ""Anatoly M. Sagalevitch""],""also_known_as""=>[""Tai tan ni ke hao""],""poster""=>{""imdb""=>""http://ia.media-imdb.com/images/M/MV5BMjExNzM0NDM0N15BMl5BanBnXkFtZTcwMzkxOTUwNw@@._V1_SY317_CR0,0,214,317_.jpg"",""cover""=>""http://imdb-poster.b0.upaiyun.com/000/120/338.jpg!cover?_upt=ec8bdec31382594417""},""runtime""=>[""194 min""],""type""=>""M"",""imdb_url""=>""http://www.imdb.com/title/tt0120338/""} no implicit conversion of String into Integer (TypeError)","Why do I get ""no implicit conversion of String into Integer (TypeError)""?"
"Rspec: What's the difference between ""include_examples"" and ""it_behaves_like"""," In RSpec, what's the difference between it_behaves_like and include_examples?The documentation says: include_examples include(s) the examples in the current context it_behaves_like ""name"" include(s) the examples in a nested contextBut what does this actually mean? Replacing one with the other doesn't seem to have an effect on whether my tests pass or fail. Is there a reason to prefer one over the other in some situations?Also, are it_should_behave_like and it_behaves_like just synonyms? <code> ","What's the difference between ""include_examples"" and ""it_behaves_like""?"
Ruby namespacing with a classs vs. module," Consider the Ruby class Foo::Bar.The convention is for the 'Foo' namespace to be a module, but it could just as easily be a class: Versus: In the second case, Bar is not an inner class of Foo, it's just another constant defined on the singleton of Foo. The superclass is Object in both cases and they only include the Kernel module. Their ancestor chains are identical.So, besides operations you could make with Foo depending on its class (instantiate if a class, extend/include if a module), does the nature of the namespace have any effect on Bar? Are there compelling reasons to choose one many of name-spacing over another?The only sort of weird things I see you can do are Foo::Bar.new.extend Foo and Foo.new.class::Bar respectively.My own most-common use of a class defined in a class would be a helper struct/class that is meant to be only used internally by the class: The closest I found to this discussion is in ""Using Class vs Module for packaging code in Ruby"". <code>  module Foo; class Bar; end; end class Foo; class Bar; end; end class Foo Bar = Struct.new(:something) do def digest puts ""eating #{something}"" end end def eat(something) Bar.new(something).digest endend",Ruby namespacing with a class vs. module?
Error installing ruby gem, I updated my Mac OS to 10.9 Mavericks yesterday. My current Ruby version shows as ruby 2.0.0p247 (2013-06-27 revision 41674) [universal.x86_64-darwin13]I got Rails installed on my machine and when I try to install gems I get the following message: I am trying all this in my home directory. Any suggestions? <code>  Fetching: eventmachine-1.0.3.gem (100%)ERROR: While executing gem ... (Gem::FilePermissionError)You don't have write permissions for the /Library/Ruby/Gems/2.0.0 directory.,Installing gem fails with permissions error
"Render rails partial sorted by one field, then another, one sorted ascending, one sorted descending"," I would like to render a partial that sorts by score, then by name (if multiple players have the same score).Right now I am using this: This works, but it is sorting the scores in ascending order, and I would like to sort them in descending order. How can I flip the sort order for the score, but not for name, which I would still like to sort in ascending order?Thanks! <code>  <%= render @players.sort_by { |p| [p.scored_vote(current_week), p.last_name] } %>","Rails sort_by method with two fields one sorted ascending, one sorted descending"
metaprograming String#scan and globals," My goal is to replace methods in the String class with other methods that do additional work (this is for a research project). This works for many methods by writing code in the String class similar to For some methods, I need to handle a Proc as well, which is no problem. However, for the scan method, invoking it has the side effect of setting special global variables from the regular expression match. As documented, these variables are local to the thread and the method.Unfortunately, some Rails code makes calls to scan which makes use of the $& variable. That variable gets set inside my version of the scan method, but because it's local, it doesn't make it back to the original caller which uses the variable. Does anyone know a way to work around this? Please let me know if the problem needs clarification.If it helps at all, all the uses I've seen so far of the $& variable are inside a Proc passed to the scan function, so I can get the binding for that Proc. However, the user doesn't seem to be able to change $& at all, so I don't know how that will help much.Current Code Of course I'll do more things before returning r, but this even is problematic -- so for simplicity we'll stick with this. As a test case, consider: This works fine both with and without my version of scan. With the ""vanilla"" String class this produces the same thing as Namely, it prints ""ll"" and ""ld"" and returns ""hello world"". With the modified string class it prints two blank lines (since $& was nil) and then returns ""hello world"". I'll be happy if we can get that working! <code>  alias_method :center_OLD, :centerdef center(args*) r = self.send(*([:center_OLD] + args)) #do some work here #return somethingend class String alias_method :scan_OLD, :scan def scan(*args, &b) begin sargs = [:scan_OLD] + args if b.class == Proc r = self.send(*sargs, &b) else r = self.send(*sargs) end r rescue => error puts error.backtrace.join(""\n"") end endend ""hello world"".scan(/l./) { |x| puts x } ""hello world"".scan(/l./) { puts $&; }",metaprograming String#scan and globals?
undefined method `raw' for controller for rails4?," Currently, I am upgrading my application from rails 3.2 to rails 4. When I navigate to a particular tab, I get the following error: My code: Why is this method now undefined? <code>  undefined method `raw' for #<LeaseController:0x00000006935e30> vacant.tenant = raw(""Vacant"") vacant.lease_start_date = raw(""&nbsp;"") vacant.rent_end = raw(""&nbsp;"") vacant.base_rent_monthly_amount = raw("""") vacant.base_rent_annual_psf = raw("""") vacant.options = raw("""") vacant.security_deposit_amount = raw("""") vacant.tis_amount = raw("""") vacant.lcs_amount =raw("""")",undefined method `raw' for controller for rails 4
undefined method `raw' for controller for rails 4," Currently, I am upgrading my application from rails 3.2 to rails 4. When I navigate to a particular tab, I get the following error: My code: Why is this method now undefined? <code>  undefined method `raw' for #<LeaseController:0x00000006935e30> vacant.tenant = raw(""Vacant"") vacant.lease_start_date = raw(""&nbsp;"") vacant.rent_end = raw(""&nbsp;"") vacant.base_rent_monthly_amount = raw("""") vacant.base_rent_annual_psf = raw("""") vacant.options = raw("""") vacant.security_deposit_amount = raw("""") vacant.tis_amount = raw("""") vacant.lcs_amount =raw("""")",undefined method `raw' for controller for rails 4
Ruby remove characters from a string," I have several strings that look like this: They are all different lengths. How could I remove the parentheses from all these strings in a loop? <code>  ""((String1))""",How to delete specific characters from a string in Ruby?
How to trim specific characters from a string in Ruby?," I have several strings that look like this: They are all different lengths. How could I remove the parentheses from all these strings in a loop? <code>  ""((String1))""",How to delete specific characters from a string in Ruby?
How to add translations of globalize and sunspot-solr," How do i index arabic profile translations with sunspot solr. Can i use globalize and sunspot or should use some other approach?models/profile.rb <code>  translates :name, :descriptionvalidates :namevalidates :descriptionsearchable do text :name text :descriptionend",How to use globalize and sunspot in rails 4
How I can optimize active_admin, Last time I got the problem with active_admin. In tables where I have 5000+ rows of data it's work very slowly. How I can optimize it? Maybe somebody know some async load plugins for this module? <code> ,How can I optimize active_admin
Using let variables inside before block Rspec," I have the following code inside most of my tests: But I'm getting the following warning: My question is, what is the correct way of doing this? I can't find much information about the warning itself.Thanks!EDIT: My goal is to use the user variable so I can pass it on to sign_in, which signs the user in, and use it later on another tests (I check for the company attribute of the User) <code>  describe 'index' let(:company) { FactoryGirl.create(:company) } let(:user) { FactoryGirl.create(:user, company: company) } before do sign_in user visit products_path end...end WARNING: let declaration 'user' accessed in a 'before(:all)'","In RSpec, using let variable inside before :all block"
rails gem install ERROR: Error installing libv8: ERROR: Failed to build gem native extension," I made a rails project with, succeeded.moved to the project dir and added the gems and run after that, i have this error. sorry for some Koreans. It says, It can't find the chosen path or something like that.and i tried to run this command throwing the same error. <code>  rails new test_bootstrap. gem ""therubyracer""gem ""less-rails"" #Sprockets (what Rails 3.1 uses for its asset pipeline) supports LESSgem ""twitter-bootstrap-rails"" bundle install Installing libv8 (3.16.14.3)Gem::Installer::ExtensionBuildError: ERROR: Failed to build gem native extension.c:/RailsInstaller/Ruby1.9.3/bin/ruby.exe extconf.rbcreating Makefile . . .c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/libv8-3.16.14.3/ext/libv8/builder.rb:58:in `setup_python!': libv8 requirespython 2 to be installed in order to build, but it is currently not available (RuntimeError) from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/libv8-3.16.14.3/ext/libv8/builder.rb:42:in `block in build_libv8/builder.rb:42:in `block in build_libv8!' from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/libv8-3.16.14.3/ext/libv8/builder.rb:40:in `chdir' from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/libv8-3.16.14.3/ext/libv8/builder.rb:40:in `build_libv8!' from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/libv8-3.16.14.3/ext/libv8/location.rb:24:in `install!' from extconf.rb:7:in `<main>' Gem files will remain installed in c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/libv8-3.16.14.3 for inspection.Results logged to c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/libv8-3.16.14.3/ext/libv8/gem_make.outAn error occurred while installing libv8 (3.16.14.3), and Bundler cannotcontinue.Make sure that `gem install libv8 -v '3.16.14.3'` succeeds before bundling. gem install libv8 -v '3.16.14.3' ",Error installing libv8: ERROR: Failed to build gem native extension
"ruby-debug Could not create Makefile due to some reason, probably lack of necessary libraries and/or headers"," My Rails is 3.2.1.4, Ruby is 1.9.3p448.I got an error when I install ruby-debug: Who can tell me where the error is? <code>  Building native extensions. This could take a while...ERROR: Error installing ruby-debug: ERROR: Failed to build gem native extension. /home/hxh/.rvm/rubies/ruby-1.9.3-p448/bin/ruby extconf.rbCan't handle 1.9.x yet*** extconf.rb failed ***Could not create Makefile due to some reason, probably lack ofnecessary libraries and/or headers. Check the mkmf.log file for moredetails. You may need configuration options.Provided configuration options: --with-opt-dir --without-opt-dir --with-opt-include --without-opt-include=${opt-dir}/include --with-opt-lib --without-opt-lib=${opt-dir}/lib --with-make-prog --without-make-prog --srcdir=. --curdir --ruby=/home/hxh/.rvm/rubies/ruby-1.9.3-p448/bin/rubyGem files will remain installed in /home/hxh/.rvm/gems/ruby-1.9.3-p448/gems/linecache-0.46 for inspection.Results logged to /home/hxh/.rvm/gems/ruby-1.9.3-p448/gems/linecache-0.46/ext/gem_make.out",How to install ruby-debug when needing necessary libraries and/or headers
Upgrade from rails 3 to rails 4," I am trying to update one project from Rails 3 to Rails 4. In Rails 3 I was doing: When I call sale.tint_types, it does the following query in Rails 3: I updated it for Rails 4 like this: The query changes to: It adds code in the order clause and this makes PostgreSQL to through an error. I assume that it's because of the scope, but I can't figure out how to get that ORDER BY code out.Any help is appreciated,Thanks! <code>  class Sale < ActiveRecord::Base has_many :windows, :dependent => :destroy has_many :tint_codes, :through => :windows, :uniq => true, :order => 'code ASC' has_many :tint_types, :through => :tint_codes, :uniq => true, :order => 'value ASC'end SELECT DISTINCT ""tint_types"".* FROM ""tint_types"" INNER JOIN ""tint_codes"" ON ""tint_types"".""id"" = ""tint_codes"".""tint_type_id"" INNER JOIN ""windows"" ON ""tint_codes"".""id"" = ""windows"".""tint_code_id"" WHERE ""windows"".""sale_id"" = 2 ORDER BY value ASC class Sale < ActiveRecord::Base has_many :windows, :dependent => :destroy has_many :tint_codes, -> { order('code').uniq }, :through => :windows has_many :tint_types, -> { order('value').uniq }, :through => :tint_codesend SELECT DISTINCT ""tint_types"".* FROM ""tint_types"" INNER JOIN ""tint_codes"" ON ""tint_types"".""id"" = ""tint_codes"".""tint_type_id"" INNER JOIN ""windows"" ON ""tint_codes"".""id"" = ""windows"".""tint_code_id"" WHERE ""windows"".""sale_id"" = $1 ORDER BY value, code",Wrong order on has_many association when upgrading from rails 3 to rails 4
Ruby: Add several values to the same key," how can I add several values to the same key? Something like this: well, this doesn't work like with array.  <code>  x = {}x[""k1""] = nilx[""k1""] << {""a"" => ""a""}x[""k1""] << {""b"" => ""b""}",How to add several values to the same key
Ruby - replace substring from..to," How I can replace substring from some character to another by other string? <code>  first = 4last = 11replacement = '...''show me the money'.replace_part(first, last, replacement)# => 'show...money'",How to replace substring with another substring (by index from..to)
Replace substring from..to," How I can replace substring from some character to another by other string? <code>  first = 4last = 11replacement = '...''show me the money'.replace_part(first, last, replacement)# => 'show...money'",How to replace substring with another substring (by index from..to)
After destroying user model cannot add user model back in," So I was working on Rails and getting a bit frustrated with my user model so I destroyed it (I'm also using devise which may be a source of error). In my defense I was tired, frustrated, and a bit on the tipsy side. I tried to add it back in with a simple rails g scaffold user first:text last:text, but I get the following error when trying to generate the model. How do I fix this all back up? <code>  /home/action/.rvm/gems/ruby-2.0.0-p247/gems/activesupport-4.0.0/lib/active_support/inflector/methods.rb:226:in `const_get': uninitialized constant User (NameError) from /home/action/.rvm/gems/ruby-2.0.0-p247/gems/activesupport-4.0.0/lib/active_support/inflector/methods.rb:226:in `block in constantize' from /home/action/.rvm/gems/ruby-2.0.0-p247/gems/activesupport-4.0.0/lib/active_support/inflector/methods.rb:224:in `each' from /home/action/.rvm/gems/ruby-2.0.0-p247/gems/activesupport-4.0.0/lib/active_support/inflector/methods.rb:224:in `inject' from /home/action/.rvm/gems/ruby-2.0.0-p247/gems/activesupport-4.0.0/lib/active_support/inflector/methods.rb:224:in `constantize' from /home/action/.rvm/gems/ruby-2.0.0-p247/gems/devise-3.1.1/lib/devise.rb:285:in `get' from /home/action/.rvm/gems/ruby-2.0.0-p247/gems/devise-3.1.1/lib/devise/mapping.rb:77:in `to' from /home/action/.rvm/gems/ruby-2.0.0-p247/gems/devise-3.1.1/lib/devise/mapping.rb:72:in `modules' from /home/action/.rvm/gems/ruby-2.0.0-p247/gems/devise-3.1.1/lib/devise/mapping.rb:89:in `routes' from /home/action/.rvm/gems/ruby-2.0.0-p247/gems/devise-3.1.1/lib/devise/mapping.rb:156:in `default_used_route' from /home/action/.rvm/gems/ruby-2.0.0-p247/gems/devise-3.1.1/lib/devise/mapping.rb:66:in `initialize' from /home/action/.rvm/gems/ruby-2.0.0-p247/gems/devise-3.1.1/lib/devise.rb:319:in `new' from /home/action/.rvm/gems/ruby-2.0.0-p247/gems/devise-3.1.1/lib/devise.rb:319:in `add_mapping' from /home/action/.rvm/gems/ruby-2.0.0-p247/gems/devise-3.1.1/lib/devise/rails/routes.rb:210:in `block in devise_for' from /home/action/.rvm/gems/ruby-2.0.0-p247/gems/devise-3.1.1/lib/devise/rails/routes.rb:209:in `each' from /home/action/.rvm/gems/ruby-2.0.0-p247/gems/devise-3.1.1/lib/devise/rails/routes.rb:209:in `devise_for' from /home/action/workspace/surrigo/config/routes.rb:2:in `block in <top (required)>' from /home/action/.rvm/gems/ruby-2.0.0-p247/gems/actionpack-4.0.0/lib/action_dispatch/routing/route_set.rb:316:in `instance_exec' from /home/action/.rvm/gems/ruby-2.0.0-p247/gems/actionpack-4.0.0/lib/action_dispatch/routing/route_set.rb:316:in `eval_block' from /home/action/.rvm/gems/ruby-2.0.0-p247/gems/actionpack-4.0.0/lib/action_dispatch/routing/route_set.rb:294:in `draw' from /home/action/workspace/surrigo/config/routes.rb:1:in `<top (required)>' from /home/action/.rvm/gems/ruby-2.0.0-p247/gems/railties-4.0.0/lib/rails/application/routes_reloader.rb:40:in `block in load_paths' from /home/action/.rvm/gems/ruby-2.0.0-p247/gems/railties-4.0.0/lib/rails/application/routes_reloader.rb:40:in `each' from /home/action/.rvm/gems/ruby-2.0.0-p247/gems/railties-4.0.0/lib/rails/application/routes_reloader.rb:40:in `load_paths' from /home/action/.rvm/gems/ruby-2.0.0-p247/gems/railties-4.0.0/lib/rails/application/routes_reloader.rb:16:in `reload!' from /home/action/.rvm/gems/ruby-2.0.0-p247/gems/railties-4.0.0/lib/rails/application/routes_reloader.rb:26:in `block in updater' from /home/action/.rvm/gems/ruby-2.0.0-p247/gems/activesupport-4.0.0/lib/active_support/file_update_checker.rb:75:in `call' from /home/action/.rvm/gems/ruby-2.0.0-p247/gems/activesupport-4.0.0/lib/active_support/file_update_checker.rb:75:in `execute' from /home/action/.rvm/gems/ruby-2.0.0-p247/gems/railties-4.0.0/lib/rails/application/routes_reloader.rb:27:in `updater' from /home/action/.rvm/gems/ruby-2.0.0-p247/gems/railties-4.0.0/lib/rails/application/routes_reloader.rb:6:in `execute_if_updated' from /home/action/.rvm/gems/ruby-2.0.0-p247/gems/railties-4.0.0/lib/rails/application/finisher.rb:69:in `block in <module:Finisher>' from /home/action/.rvm/gems/ruby-2.0.0-p247/gems/railties-4.0.0/lib/rails/initializable.rb:30:in `instance_exec' from /home/action/.rvm/gems/ruby-2.0.0-p247/gems/railties-4.0.0/lib/rails/initializable.rb:30:in `run' from /home/action/.rvm/gems/ruby-2.0.0-p247/gems/railties-4.0.0/lib/rails/initializable.rb:55:in `block in run_initializers' from /home/action/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/tsort.rb:150:in `block in tsort_each' from /home/action/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/tsort.rb:183:in `block (2 levels) in each_strongly_connected_component' from /home/action/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/tsort.rb:219:in `each_strongly_connected_component_from' from /home/action/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/tsort.rb:182:in `block in each_strongly_connected_component' from /home/action/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/tsort.rb:180:in `each' from /home/action/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/tsort.rb:180:in `each_strongly_connected_component' from /home/action/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/tsort.rb:148:in `tsort_each' from /home/action/.rvm/gems/ruby-2.0.0-p247/gems/railties-4.0.0/lib/rails/initializable.rb:54:in `run_initializers' from /home/action/.rvm/gems/ruby-2.0.0-p247/gems/railties-4.0.0/lib/rails/application.rb:215:in `initialize!' from /home/action/.rvm/gems/ruby-2.0.0-p247/gems/railties-4.0.0/lib/rails/railtie/configurable.rb:30:in `method_missing' from /home/action/workspace/surrigo/config/environment.rb:13:in `<top (required)>' from /home/action/.rvm/gems/ruby-2.0.0-p247/gems/railties-4.0.0/lib/rails/application.rb:189:in `require_environment!' from /home/action/.rvm/gems/ruby-2.0.0-p247/gems/railties-4.0.0/lib/rails/commands.rb:45:in `<top (required)>' from bin/rails:4:in `require' from bin/rails:4:in `<main>'","After destroying user model, cannot add user model back in"
Error installing mysql2: ERROR: Failed to build gem native extension, error while running bundle install when i run Make sure that gem install mysql2 -v '0.3.11'.I still get the same error. <code>  Installing mysql2 (0.3.11) with native extensions Gem::Installer::ExtensionBuildError: ERROR: Failed to build gem native extension....Make sure that `gem install mysql2 -v '0.3.11'` succeeds before bundling.,ERROR: Failed to build gem native extension - Error installing mysql2
How to sort movies alphebetically in rails?," If you visit http://ccvideofinder.heroku.com/, it's a good example of what I'm referring to. How can this be done in Rails? I was thinking maybe using case/when statements but after fooling around with IRB for some time I couldn't figure it out.In the model: In the controller: <code>  class Movies < ActiveRecord::Base validates_presence_of :title def self.find_by_first_letter(letter) find(:all, :conditions => ['title LIKE ?', ""#{letter}%""], :order => 'title ASC') endend @result = Movie.find_by_first_letter(params[:letter])",How to sort movies alphabetically in Rails?
Ruby Hash Initialization (Default value nil)," I've been reading the Ruby docs, and looking at some other posts on the issue, but I am still wondering about this: In the Hash documentation the default value for a Hash is nil, which is why I am getting this error I assume. Is there a better way to insert each key/(value += 1) into the numbers array? <code>  #counts each number in an array oncearray = [1,1,2,5,3,2,5,3,3,3]numbers = {}array.each { |num| numbers[num] += 1 }=> in `block in mode': undefined method `+' for nil:NilClass (NoMethodError)",Ruby Hash initialization (default value nil)
Include module in MiniTest like in RSpec," In RSpec I could create helper modules in /spec/support/... and include it in every spec like this: and use it in my tests like this: How can I include a module into all MiniTest tests without repeating myself in every test? <code>  module MyHelpers def help1 puts ""hi"" endend RSpec.configure do |config| config.include(MyHelpers)end describe User do it ""does something"" do help1 endend",Include module in all MiniTest tests like in RSpec
"pg_search using associated_against gives error ""column [modal_name].[association_column_name] does not exist"""," I'm trying to use pg_search to search through an associated model. When I run a search I get the error ""PG::Error: ERROR: column plans.name does not exist"". I'm running the search in the ""plans"" model and trying to search against association the ""place"" with a column ""name"". The has_many :through model that connects these is polymorphic. Somehow the sql query is combining the two and throwing an error. I've run the associated_against migration (rails g pg_search:migration:associated_against), scoured the documentation, and looked for others with the error and come up with nothing, it must be that I'm just overlooking something. It runs correctly (without the more extensive search results) if I just remove the associated_against line in plan.rb. Any help would be appreciated!Plan.rb: Place.rb: Controller: Full Error Message: <code>  class Plan < ActiveRecord::Base belongs_to :user has_many :plan_places, :dependent => :destroy has_many :places, through: :plan_places, source: :plan include PgSearch pg_search_scope :search, :against => [:title, :summary], associated_against: { places: [:name, :address]}, using: {tsearch: {dictionary: ""english""}}, ignoring: :accents def self.text_query(query) if query.present? search(query) else scoped end endend class Place < ActiveRecord::Base has_many :plan_places, as: :sortable #polymorphic -- could this be the issue?? has_many :plans, through: :plan_places include PgSearch multisearchable :against => [:name, :address] pg_search_scope :search, against: [:name, :address], using: {tsearch: {dictionary: ""english""}}, ignoring: :accents def self.text_query(query) if query.present? search(query) else scoped end endend def index query = params[:query] @plans = Plan.text_query(query) end PG::Error: ERROR: column plans.name does not existLINE 1: ...OUTER JOIN (SELECT ""plans"".""id"" AS id, string_agg(""plans"".""n... ^: SELECT ""plans"".*, ((ts_rank((to_tsvector('english', unaccent(coalesce(""plans"".""title""::text, ''))) || to_tsvector('english', unaccent(coalesce(""plans"".""summary""::text, ''))) || to_tsvector('english', unaccent(coalesce(pg_search_ef8b0c36567cc241900c73.pg_search_1d546fcf34c118d2a7b8f6::text, ''))) || to_tsvector('english', unaccent(coalesce(pg_search_ef8b0c36567cc241900c73.pg_search_f3147101e01c522d780049::text, '')))), (to_tsquery('english', ''' ' || unaccent('giraffe') || ' ''')), 0))) AS pg_search_rank FROM ""plans"" LEFT OUTER JOIN (SELECT ""plans"".""id"" AS id, string_agg(""plans"".""name""::text, ' ') AS pg_search_1d546fcf34c118d2a7b8f6, string_agg(""plans"".""address""::text, ' ') AS pg_search_f3147101e01c522d780049 FROM ""plans"" INNER JOIN ""plan_places"" ON ""plan_places"".""plan_id"" = ""plans"".""id"" INNER JOIN ""plans"" ""places_plans"" ON ""places_plans"".""id"" = ""plan_places"".""plan_id"" GROUP BY ""plans"".""id"") pg_search_ef8b0c36567cc241900c73 ON pg_search_ef8b0c36567cc241900c73.id = ""plans"".""id"" WHERE (((to_tsvector('english', unaccent(coalesce(""plans"".""title""::text, ''))) || to_tsvector('english', unaccent(coalesce(""plans"".""summary""::text, ''))) || to_tsvector('english', unaccent(coalesce(pg_search_ef8b0c36567cc241900c73.pg_search_1d546fcf34c118d2a7b8f6::text, ''))) || to_tsvector('english', unaccent(coalesce(pg_search_ef8b0c36567cc241900c73.pg_search_f3147101e01c522d780049::text, '')))) @@ (to_tsquery('english', ''' ' || unaccent('giraffe') || ' ''')))) ORDER BY pg_search_rank DESC, ""plans"".""id"" ASC, created_at DESC","pg_search using associated_against gives error ""column [model_name].[associated_column_name] does not exist"""
Why negative numbers are rounded down after division in Ruby?," I am looking through a documentation on divmod. Part of a table showing the difference between methods div, divmod, modulo, and remainder is displayed below:Why is 13.div(-4) rounded to -4 and not to -3? Is there any rule or convention in Ruby to round down negative numbers? If so, why is the following code not rounding down? <code>  -3.25.round() #3",Why are negative numbers rounded down after division in Ruby?
"Why are Python and Ruby so slow, while Lisp implementations are fast?"," I find that simple things like function calls and loops, and even just loops incrementing a counter take far more time in Python and Ruby than in Chicken Scheme, Racket, or SBCL.Why is this so? I often hear people say that slowness is a price you pay for dynamic languages, but Lisps are very dynamic and are not ridiculously slow (they are usually less than 5 times slower than C; Ruby and Python can go into the double digits). Besides, Lisp style uses recursion, and not always tail recursion, a lot, the stack is a linked list of continuations in the heap, etc, which seem to be things that should make Lisp slower than the imperative-style Python and Ruby.Racket and SBCL are JITted, but Chicken Scheme is either statically compiled, or uses a non-optimizing interpreter, both of which should be badly suited to dynamic languages and slow. Yet even using the naive csi interpreter for Chicken Scheme (which doesn't even do bytecode compilation!), I get speeds far beyond Python and Ruby.Why exactly are Python and Ruby so ridiculously slow compared to the similarly dynamic Lisps? Is it because they are object oriented and need huge vtables and type heirarchies?Example: factorial function. Python: Racket: Timing results: <code>  def factorial(n): if n == 0: return 1 else: return n*factorial(n-1)for x in xrange(10000000): i = factorial(10) #lang racket(define (factorial n) (cond [(zero? n) 1] [else (* n (factorial (sub1 n)))]))(define q 0)(for ([i 10000000]) (set! q (factorial 10))) ithisa@miyasa /scratch> time racket factorial.rktracket factorial.rkt 1.00s user 0.03s system 99% cpu 1.032 totalithisa@miyasa /scratch> time python factorial.pypython factorial.py 13.66s user 0.01s system 100% cpu 13.653 total","Consider some basic logic implementation, why are Python and Ruby so slow, while Lisp versions faster?"
Rub Each loop in slim-lang," I want to be able to loop through an instance var through a javascript but I'm not quite sure how to make it work. What I tried:Using <% @spots.each do |spot| %> and without the quotes for the #{} <code>  javascript: -@spots.each do |spot| map.addMarker({ lat: ""#{spot.latitude}"", lng: ""#{spot.longitude}"", title: ""spot"", }); });",Ruby Each loop in Slim
Ruby Each loop in slim-lang," I want to be able to loop through an instance var through a javascript but I'm not quite sure how to make it work. What I tried:Using <% @spots.each do |spot| %> and without the quotes for the #{} <code>  javascript: -@spots.each do |spot| map.addMarker({ lat: ""#{spot.latitude}"", lng: ""#{spot.longitude}"", title: ""spot"", }); });",Ruby Each loop in Slim
Store the day of the week and time," I have a two-part question about storing days of the week and time in a database. I'm using Rails 4.0, Ruby 2.0.0, and Postgres.I have certain events, and those events have a schedule. For the event ""Skydiving"", for example, I might have Tuesday and Wednesday and 3 pm.Is there a way for me to store the record for Tuesday and Wednesday in one row or should I have two records?What is the best way to store the day and time? Is there a way to store day of week and time (not datetime) or should these be separate columns? If they should be separate, how would I store the day of the week? I was thinking of storing them as integer values, 0 for Sunday, 1 for Monday, since that's how the wday method for the Time class does it. Any suggestions would be super helpful. <code> ",Store the day of the week and time?
Ruby gem 'net/http'," I am trying to use some Ruby code found here.In the code it has: However, when I write in the terminal: It gives the error: Could someone tell me how to install this gem please? <code>  require 'net/http' sudo gem install net/http ERROR: Could not find a valid gem 'net/http' (>= 0) in any repository",How do I install the Ruby gem 'net/http'?
How to get HTML of an element using Poltergeist?," I'm using Capybara with the Poltergeist driver. My question is: how to get the HTML (string) of a node?I've read that using the RackTest driver you can get it like this: But with Poltergeist calling #native on a node returns a Capybara::Poltergeist::Node, not a native Nokogiri element. And then calling #native again on the Capybara::Poltergeist::Node returns the same Capybara::Poltergeist::Node again (that is, it returns self).It has become slightly irritating having to look at the HTML from the entire page to find what I'm looking for :P <code>  find(""table"").native #=> native Nokogiri elementfind(""table"").native.to_html #=> ""...""",How to get HTML of an element when using Poltergeist?
Strange behavior in packed ruby strings," I'm confused by some ruby behavior. Look at the following code: This makes sense. Now: The pack option ""C"" stands for 8-bit unsigned (unsigned char), which should be fine to store a value of 128. Also both strings print the same thing, so why are they not equal? Does this have something to do with encoding stuff?I'm on ruby 2.0.0p247. <code>  [127].pack(""C"") == ""\x7f"" # => true [128].pack(""C"") # => ""\x80""""\x80"" # => ""\x80""[128].pack(""C"") == ""\x80"" # => false",Strange behavior in packed Ruby strings
Tertiary operator within Rails view," I'm new to Rails, so forgive me if it's something simple, but it does seem as if though what I've written is correct. I'm using a ternary operator in my view to decide whether to add a class of active or not: And I've debugged and know for sure that is_current_page('') is returning true. <code>  <li class=""<% is_current_page('') ? 'active' : '' %>"">",Ternary operator within Rails view
Using .each_with_index," I want to take a array and make it an order list. Currently I'm trying to do it in this way: the output should be [""1. a"", ""2. b"", ""3. c""].How do I get the proper output to be the new value for the r array? <code>  r = [""a"", ""b"",""c""]r.each_with_index { |w, index| puts ""#{index+1}. #{w}"" }.map.to_a# 1. a# 2. b# 3. c#=> [""a"", ""b"", ""c""]",Using each_with_index with map
"Ruby, Two Gems share same Require"," When I call: These two gems clash: https://github.com/robertsosinski/retryablehttps://github.com/carlo/retryableas they both have a 'retryable' file they ask the user to require. I'm interested in using the first gem, however this doesn't always happen. This code is executed as a part of my own gem, and it has to be reliable across all users.Is there a way to require specifically from a gem (as the gem names are different of course)?How do I resolve this naming conflict?EDIT: To clarify, this is the official repo and the gem names are actually different (""retryable-rb"" and ""carlo-retryable""), however they both ask their users to require the lib/retryable.rb file with require 'retryable' <code>  require 'retryable' ",Two gems share same require?
Sidekiq server no loading configuration file," I'm trying to setup sidekiq with my sinatra application, and I'm havingtrouble starting up the sidekiq workers to run in the daemon mode, with a configuration file.My project has the following structure: The ultimate goal is to create some rake tasks to handle all sidekiq tasks.For now, I'm just trying to the get things to work correctly via the command line, and then I'll get it working via rake.sidekiq.yml When I run this command in the project directory: bundle exec sidekiq -C './config/sidekiq.yml' -e 'development' -d I get the following: My confusion is that I have the logfile set in the config file. My assumption is that it's not picking up or reading the cofig file correctly.I tried tweaking the paths, and using full paths with the config file, but it did not seem to change anything the error message. I've also tweaked the config file itself, assuming the format might be off, but no dice.Does anyone see what I'm doing wrong here? Please let me know if you need any more information.thanks. <code>  project- config-- sidekiq.yml #Sidekiq Config File- app-- app.rb #Sinatra Application File- Rakefile- Gemfile- etc. # Sidekiq Configuration---development: logile: ./log/sidekiq_development.log verbose: true pidfile: ./tmp/pids/sidekiq.pid concurrency: 1 queues: - [household_import, 7] You really should set a logfile if you're going to daemonize/Users/gutter007/git/webapps/project/vendor/bundle/gems/sidekiq-2.16.1/lib/sidekiq/cli.rb:141:in `daemonize' /Users/gutter007/git/webapps/project/vendor/bundle/gems/sidekiq-2.16.1/lib/sidekiq/cli.rb:39:in `parse' /Users/gutter007/git/webapps/project/vendor/bundle/gems/sidekiq-2.16.1/bin/sidekiq:7:in `<top (required)>' /Users/gutter007/git/webapps/project/vendor/bundle/bin/sidekiq:23:in `load' /Users/gutter007/git/webapps/project/vendor/bundle/bin/sidekiq:23:in `<main>'",Sidekiq server not loading configuration file
How do I calculate the next occurrence of a time 04:00 am?," What is an efficient way to get the next occurrence of 04:00 am EST?For example, if the date and time is 2013/11/19 01:30:00 then next occurrence would be 2013/11/19 04:00:00, however if it is 2013/11/19 17:00:00 then next occurrence would be 2013/11/20 04:00:00 <code> ",How do I calculate the next occurrence of a time 04:00 am EST?
Call class member methods as object methods," I have the following class: The central member here is @alphabet.I'd like to make it some sort of a container class to invoke Array methods directly like instead of explicitly accessing @alphabet: I know I could define a lot of methods like but I'm looking for a proper way of ""inheriting"" them. <code>  class Alphabet attr_reader :letter_freqs, :statistic_letter def initialize(lang) @lang = lang case lang when :en @alphabet = ('A'..'Z').to_a @letter_freqs = { ... } when :ru @alphabet = (''..'').to_a.insert(6, '') @letter_freqs = { ... } ... end @statistic_letter = @letter_freqs.max_by { |k, v| v }[0] endendfoo = Alphabet.new(:en) foo[i]foo.include? foo.alphabet[i]foo.alphabet.include? def [](i) @alphabet[i]end",Delegate attribute methods to the parent object
Add run script build phase to Xcode project with podspec," I'm trying to write Cocoapods specification for my library which must modify Xcode project and add ""Run Script Build Phase"" to project's target. I thought I can use post_install hook.But ""pod spec lint"" says that this hook is deprecated: I have no idea how I can replace post_install hook with *resource_bundles* or *prepare_command*.Who knows any other approach to solve my problem? Is it possible?And another problem is how to modify Xcode project to add build phase, but it is actual only when ""post_hook problem"" is solved. <code>  - WARN | [iOS] The post install hook of the specification DSL has been deprecated, use the `resource_bundles` or the `prepare_command` attributes.",Add run script build phase to Xcode project from podspec
how push job in specific queue and limit number workers with sidekiq?," I know we can do: But in this case it's the Worker which is assigned to only one queue: ""Foo"".I need to assign a Job (and not a Worker) in specific queue.With Resque it's easy: Further, for concurrency problem, i need to limit the number of Worker on each queue at 1. How can I do this? <code>  sidekiq_options queue: ""Foo"" Resque.enqueue_to(queue_name, my_job)",How to push job in specific queue and limit number workers with sidekiq?
Mavericks Ruby Install Issue - No available formla for gcc46," I have Homebrew installed, I'm trying to install RVM with: and I get this error: brew doctor says I'm ready to brew.In the log I see: Error: Download failed: ftp://gcc.gnu.org/pub/gcc/infrastructure/gmp-4.3.2.tar.bz2 <code>  rvm install 1.9.3-head Installing required packages:gcc46Error running 'requirements_osx_brew_libs_install gcc46',please read /Users/mike/.rvm/log/1384918134_ruby-1.9.3-head/package_install_gcc46.logRequirements installation failed with status: 1","""No available formula for gcc46"" while installing Ruby 1.9.3 on OS X with RVM:"
Validation on before_transition for state_machine gem," What is the correct syntax for performing a validation on before a transition in the state_machine gem?I've tried the following, But I get the following error, I've also tried writing it as, But this causes a rollback after the record is saved, which is less than ideal. I'd like to stop the state machine from transitioning into :orange in the first place.The core problem is that in my controller I have logic that relies on the result of object.save. The validation I have for my state machine doesn't kick in until after the initial save, so save gets returned as true and the controller goes on to logic it shouldn't hit if the object isn't valid.I've worked around this by testing the validity manually in addition to checking the save, but it feels like there should be a way to have the validation fire before the object saves.  <code>  before_transition :apple => :orange do validate :validate_coreenddef validate_core if core.things.blank? errors.add(:core, 'must have one thing') endend undefined method `validate' for #<StateMachine::Machine:0x007ffed73e0bd8> state :orange do validate :validate_coreend",Validation before persistance on state_machine gem
"Trying to push to heroku, but unable"," Everything works fine locally, but I get that error when I try to push to heroku: Running: rake assets:precompile /tmp/build_1903c764-07ce-4d06-aa45-6e78dec68af8/vendor/bundle/ruby/2.0.0/gems/activerecord-3.2.13/lib/active_record/connection_adapters/postgresql_adapter.rb:1216:in `initialize' ... etcI suspect it has to do something with database.yml, so here it is: <code>  Connecting to database specified by DATABASE_URL rake aborted! could not connect to server: Connection refused Is the server running on host ""127.0.0.1"" and accepting TCP/IP connections on port 5432? /tmp/build_1903c764-07ce-4d06-aa45-6e78dec68af8/vendor/bundle/ruby/2.0.0/gems/activerecord-3.2.13/lib/active_record/connection_adapters/postgresql_adapter.rb:1216:in `new' development: adapter: mysql2 encoding: utf8 database: dev-db pool: 5 timeout: 5000 socket: /tmp/mysql.socktest: adapter: mysql2 encoding: utf8 database: test-db pool: 5 timeout: 5000 socket: /tmp/mysql.sockproduction: adapter: postgresql encoding: utf8 database: prod-db pool: 5 timeout: 5000 # socket: /tmp/mysql.sock","Heroku Rails deploy fails with error ""could not connect to server: Connection refused"""
How to remove the first occurence of s substring in string in Ruby," How can I remove the first occurence of a given substring?I have: and, when I call: I want the phrase to look like barfoo.I tried with delete and slice but the first removes all the occurrences but the second just returns the slice. <code>  phrase = ""foobarfoo"" phrase.some_method_i_dont_know_yet (""foo"")",How do I remove the first occurence of a substring in string?
Ruby Nested Yield?, I want to write a code that satisfies: and I have: which gives me nil. I'm still very confused about yield. Any help is greatly appreciated. <code>  SomeClass.new.execute(method) == 3 class SomeClass def execute(method) def method yield end endendmethod = 1+2,How does a nested yield work?
Why does .strip not remove the leading whitespace in Ruby?," I tried to strip the leading whitespace of a string: I expect it to return ""Bagsvrd"" instead. <code>  ""Bagsvrd"".strip # => ""Bagsvrd""",Why does strip not remove the leading whitespace?
Restrict an integer to a range in Ruby?, I have an instance variable @limit which must be greater than 0 and no greater than 20. I currently have code like this: This looks ugly. Is there a better way to restrict an integer to a range of values? <code>  @limit = (params[:limit] || 10).to_i@limit = 20 if @limit > 20@limit = 0 if @limit < 0,How to restrict an integer to a range in Ruby
Rails 4.0.2 I18n validation deprecation warning, I just updated to rails 4.0.2 and I'm getting this warning: [deprecated] I18n.enforce_available_locales will default to true in the future. If you really want to skip validation of your locale you can set I18n.enforce_available_locales = false to avoid this message.Is there any security issue in setting it to false? <code> ,Rails I18n validation deprecation warning
How to use 'an enumerator' in Ruby," In the Ruby Array Class documentation, I often find: If no block is given, an enumerator is returned instead.Why would I not pass a block to #map? What would be the use of my doing just: instead of doing: Can someone show me a very practical example of using this enumerator? <code>  [1,2,3,4].map [1,2,3,4].map{ |e| e * 10 } # => [10, 20, 30, 40]",How to use an enumerator
accessing Rails helper module methods inside corresponding controller," I have a controller, I want to create a helper for this controller that I can use without including it. I tried creating a helper with the same name as the controller like so and the helper that i created was and the error that i got was is there any conventions that i am missing out? <code>  class Cars::EnginesController < ApplicationController def start_engine check_fuel endend module Cars::EnginesHelper def check_fuel logger.debug(""cheking fuel"") endend undefined local variable or method `check_fuel' for #<Cars::EnginesController:0x1160e8c80>",Rails helper modules in controller
Hashes within a Hash," I have a hash like this: I would like to identify the five continents individually, and the countries that belong to them, such that I end up with something like this: for all of the continents.I tried this: and it works much too well. I get a new hash: but I have two problems: I create a new hash for each African country.Each new hash contains all the keys, which includes all non-African countries.I think the first problem has to do with the each method so I have to set some conditional, right? The second problem, I have no idea how to fix. Any pointers would be greater appreciated.  <code>  Some_hash = {""Albania""=>""Europe"", ""Andorra""=>""Europe"", ""Austria""=>""Europe"", Lebanon""=>""Asia"", ""Macau""=>""Asia"", ""Malaysia""=>""Asia"", ""Papua New Guinea""=>""Asia"", ""Jamaica""=>""North America"", ""Martinique""=>""North America"", ""Argentina""=>""South America"", ""Chile""=>""South America"", ""Sao Tome and Principe""=>""Africa"", ""Senegal""=>""Africa"", ""Somalia""=>""Africa"",} {""Africa"" => [""Senegal"", ""Somalia""]}{""Europe"" => [""Albania"", ""Andorra"", ""Austria""]} def country inflation_hash = {} XPath.match( data, ""//country"").map do |element| inflation_hash[element.attributes[""name""]] = element.attributes[""continent""] end inflation_hash.each do |country, continent| new_hash = {} if inflation_hash.has_value?(""Africa"") == true new_hash[""Africa""] = inflation_hash.keys puts new_hash end endend {Africa => []} ",How do I summarize hashes within a hash?
using external TTF fonts to generate PDF with Japanese text using prawn," Prawn has a limited number of fonts under Prawn::BASEDIR}/data/fonts/I have tried gkai00mp.ttf, but generated PDF shows only the 1st letter """" of , for example. I feel like this font is good for Chinese characters. Is it possible to upload and use external fonts? If yes, where that fonts can be obtained from?My environment:Latest Ruby and Rails.Prawn version 0.12.0 <code>  font(""#{Prawn::BASEDIR}/data/fonts/gkai00mp.ttf"") do text """"end",Using external TTF fonts to generate PDF with Japanese text using prawn
Spooky monkey patching semantics," Redefining Float#/ appears to have no effect: But when another infix operator Float#* is redefined, Float#/ suddenly takes on the new definition: I would love to hear if anybody can explain the source of this behavior and if anybody else gets the same results.Ruby: ruby 2.0.0p353 (2013-11-22) [x64-mingw32]To quickly confirm the bug, run this script. <code>  class Float def /(other) ""magic!"" end end puts 10.0/2.0 # => 5.0 class Float def /(other) ""magic!"" end def *(other) ""spooky"" endendputs 10.0/2.0 # => ""magic!""",Monkey Patching Float Infix Operator's Produces Unexpected Results
Monkey Patching Infix Float Operator's Produces Unexpected Results," Redefining Float#/ appears to have no effect: But when another infix operator Float#* is redefined, Float#/ suddenly takes on the new definition: I would love to hear if anybody can explain the source of this behavior and if anybody else gets the same results.Ruby: ruby 2.0.0p353 (2013-11-22) [x64-mingw32]To quickly confirm the bug, run this script. <code>  class Float def /(other) ""magic!"" end end puts 10.0/2.0 # => 5.0 class Float def /(other) ""magic!"" end def *(other) ""spooky"" endendputs 10.0/2.0 # => ""magic!""",Monkey Patching Float Infix Operator's Produces Unexpected Results
When is attr_acessor neccesary in Rails 4?, I occasionally see attribute accessors/readers/writers in the code for models. Are these necessary if I want to be able to update attributes from the view / controller code?I am a beginner so I am really talking about basic applications. <code> ,Why is attr_accessor necessary in Rails?
Why is attr_accessor necessary in Rails 4?, I occasionally see attribute accessors/readers/writers in the code for models. Are these necessary if I want to be able to update attributes from the view / controller code?I am a beginner so I am really talking about basic applications. <code> ,Why is attr_accessor necessary in Rails?
Ruby + OOP best practices: Why are setter methods not used in initialization?," Recently I've been reading ""Practical Object Oriented Design in Ruby"", and I noticed one of the best practices was to use accessor methods instead of directly grabbing the @instance_variable. For example: It makes sense to keep things DRY, and, in case I need to process @bar somehow before actually grabbing its value. However, I noticed that the initialize method sets the value of the @bar instance variable directly: Is there a reason for this? Shouldn't the setter method be used instead of directly using the = operator to set the value of the instance variable? <code>  class Foo attr_accessor :bar def initialize(my_argument) @bar = my_argument end # bad # def lorem_ipsum # @bar * 999 # end # good def lorem_ipsum bar * 999 endend class Foo attr_accessor :bar def initialize(my_argument) @bar = my_argument #<-- why isn't self.bar = my_argument used here? end",Why are setter methods not used in initialization?
Bundle with ruby installed by chef," I tried to install Ruby 2.0.0-p353 on Vagrant using knife-solo.When I logged in as root and vagrant, ruby -v returns Ruby 2.0.0-p353.However, when I run bundle install in a Rails project, the following statement is displayed: The default version of Ruby is 1.8.7, so I think bundle install is referring to this.What should I do to solve this problem? <code>  Your Ruby version is 1.8.7, but your Gemfile specified 2.0.0 $ cat site-cookbooks/ruby/recipes/default.rbgroup 'rbenv' do action :create members 'vagrant' append trueendgit '/usr/local/rbenv' do repository 'git://github.com/sstephenson/rbenv.git' reference 'master' action :checkout user ""#{node.user}"" group 'rbenv'enddirectory '/usr/local/rbenv/plugins' do owner ""#{node.user}"" group 'rbenv' mode 0755 action :createendtemplate '/etc/profile.d/rbenv.sh' do owner ""#{node.user}"" group ""#{node.user}"" mode 0644endgit '/usr/local/rbenv/plugins/ruby-build' do repository 'git://github.com/sstephenson/ruby-build.git' reference 'master' action :checkout user ""#{node.user}"" group 'rbenv'endexecute 'ruby install' do not_if ""source /etc/profile.d/rbenv.sh; rbenv versions | grep #{node.ruby.version}"" command ""source /etc/profile.d/rbenv.sh; rbenv install #{node.ruby.version}"" action :runendexecute 'ruby change' do command ""source /etc/profile.d/rbenv.sh; rbenv global #{node.ruby.version}; rbenv rehash"" action :runend$ cat site-cookbooks/ruby/attributes/default.rbdefault['user'] = 'root'default['ruby']['version'] = '2.0.0-p353'$ cat site-cookbooks/ruby/templates/default/rbenv.sh.rbexport RBENV_ROOT=/usr/local/rbenvexport PATH=""$RBENV_ROOT/bin:$PATH""eval ""$(rbenv init -)""",Bundle install is using a different Ruby version?
The different ruby version when bundle install," I tried to install Ruby 2.0.0-p353 on Vagrant using knife-solo.When I logged in as root and vagrant, ruby -v returns Ruby 2.0.0-p353.However, when I run bundle install in a Rails project, the following statement is displayed: The default version of Ruby is 1.8.7, so I think bundle install is referring to this.What should I do to solve this problem? <code>  Your Ruby version is 1.8.7, but your Gemfile specified 2.0.0 $ cat site-cookbooks/ruby/recipes/default.rbgroup 'rbenv' do action :create members 'vagrant' append trueendgit '/usr/local/rbenv' do repository 'git://github.com/sstephenson/rbenv.git' reference 'master' action :checkout user ""#{node.user}"" group 'rbenv'enddirectory '/usr/local/rbenv/plugins' do owner ""#{node.user}"" group 'rbenv' mode 0755 action :createendtemplate '/etc/profile.d/rbenv.sh' do owner ""#{node.user}"" group ""#{node.user}"" mode 0644endgit '/usr/local/rbenv/plugins/ruby-build' do repository 'git://github.com/sstephenson/ruby-build.git' reference 'master' action :checkout user ""#{node.user}"" group 'rbenv'endexecute 'ruby install' do not_if ""source /etc/profile.d/rbenv.sh; rbenv versions | grep #{node.ruby.version}"" command ""source /etc/profile.d/rbenv.sh; rbenv install #{node.ruby.version}"" action :runendexecute 'ruby change' do command ""source /etc/profile.d/rbenv.sh; rbenv global #{node.ruby.version}; rbenv rehash"" action :runend$ cat site-cookbooks/ruby/attributes/default.rbdefault['user'] = 'root'default['ruby']['version'] = '2.0.0-p353'$ cat site-cookbooks/ruby/templates/default/rbenv.sh.rbexport RBENV_ROOT=/usr/local/rbenvexport PATH=""$RBENV_ROOT/bin:$PATH""eval ""$(rbenv init -)""",Bundle install is using a different Ruby version?
"Ruby on Rails : get route (path) with controller, action & param"," I am quite new to RoR and I am looking for a way of getting a route for a given controller, action & param.Something similar to url_for() but without the domain and protocol.Lets say I have : I need to get : It would be best if I do not have to manually build the route and if I don't need to split the result of url_for().Does RoR natively support such a feature? It's probably an easy question, but I couldn't find an answer. <code>  params = {""controller""=>""controller"", ""action""=>""edit"", ""project_id""=>""1""} route = ""/controller/edit/1""","Ruby on Rails : get route using controller, action & param"
"Difference lambda, scope, class method in Rails + best practice"," The code snippet has three methods: lambda, scope and class method.All of them returns the same results.Questions:Is there any best practice in Ruby/Rails when it is preferred to use one over the other ?In what cases would you use lambda, scope or class method ( best practices ).  <code>  class Cars < ActiveRecord::Base attr_accessible :manufacturer, :price, :used #one scope :used_and_cheap_lambda, lambda { where('used = ?', true ).where('price >= ?',30000) } #two scope :used_and_cheap_scope, where('used = ?', true ).where('price >= ?',30000) #three def self.used_and_cheap_class where('used = ?', true ).where('price >= ?',30000) endendCars.used_and_cheap_lambda.count=> #24Cars.used_and_cheap_class.count=> #24Cars.used_and_cheap_scope.count=> #24","Rails: What's the difference between lambda, scope and class method? What's best practice?"
Do you need to use `.chomp` before using `.to_i` or `.to_f` in Ruby?," I see people use the following code: or I don't understand why, when the result of those lines are always the same as when there is no chomp after gets.Is gets.chomp.to_i really necessary, or is gets.to_i just enough? <code>  gets.chomp.to_i gets.chomp.to_f",Is it **ever** necessary to use 'chomp' before using `to_i` or `to_f`?
Do I need to use 'chomp' before using `to_i` or `to_f`?," I see people use the following code: or I don't understand why, when the result of those lines are always the same as when there is no chomp after gets.Is gets.chomp.to_i really necessary, or is gets.to_i just enough? <code>  gets.chomp.to_i gets.chomp.to_f",Is it **ever** necessary to use 'chomp' before using `to_i` or `to_f`?
Is it ever necessary to use 'chomp' before using `to_i` or `to_f`?," I see people use the following code: or I don't understand why, when the result of those lines are always the same as when there is no chomp after gets.Is gets.chomp.to_i really necessary, or is gets.to_i just enough? <code>  gets.chomp.to_i gets.chomp.to_f",Is it **ever** necessary to use 'chomp' before using `to_i` or `to_f`?
How do I accurately determine worst case time complexity of my solution?," Given an array of integers, write a method which returns all unique pairs which add up to 100.Example data: I was solving this problem this weekend and while my solution seems scalable and efficient, I wanted to determine what the worst case time complexity of my solution is?Here's my solution: If both the loops are O(N) each, and I add them up: O(N + N), this would equal O(2N) and taking the 2 to be a constant, can I assume my solution is O(N) ? <code>  sample_data = [0, 1, 100, 99, 0, 10, 90, 30, 55, 33, 55, 75, 50, 51, 49, 50, 51, 49, 51]sample_output = [[1,99], [0,100], [10,90], [51,49], [50,50]] def solution(arr) res = [] h = Hash.new # this seems to be O(N) arr.each do |elem| h[elem] = true end # how do I determine what Time complexity of this could be? arr.each do |elem| if h[100-elem] h[100-elem] = false h[elem] = false res << [elem, 100-elem] end end res end",What is the Big-O complexity of my code?
Do all? and any? guarantee shortcut evaluation?," Testing out some code in both pry and irb, I get the following results: In [2] and [3] I see that there appears to be short-circuit evaluation that aborts the iteration as soon as possible, but is this guaranteed behaviour? Reading the documentation there is no mention of this behaviour. I realise that I can use inject instead as that will iterate over everything, but I'm interested in finding out what the official Ruby view is. <code>  [1] pry(main)> a = [1, 3, 5, 7, 0]=> [1, 3, 5, 7, 0][2] pry(main)> a.any? {|obj| p obj; 3 / obj > 1}1=> true[3] pry(main)> a.all? {|obj| p obj; 3 / obj > 1}13=> false",Do all? and any? guarantee short-circuit evaluation?
Ruby - Building blank XML tags with NokoGiri," I'm trying to build up an XML document using Nokogiri. Everything is pretty standard so far; most of my code just looks something like: However, that results in a tag like <Tag4/> instead of <Tag4></Tag4>, which is what my end user has specified that the output needs to be.How do I tell Nokogiri to put full tags around a nil value? <code>  builder = Nokogiri::XML::Builder.new do |xml| ... xml.Tag1(object.attribute_1) xml.Tag2(object.attribute_2) xml.Tag3(object.attribute_3) xml.Tag4(nil) endbuilder.to_xml",Building blank XML tags with Nokogiri?
add multiple elements to an array ruby," I can easily add one element to an existing array: How would I add multiple elements to my array?I'd like to do something like arr << [2, 3], but this adds an array to my array #=> [1, [2, 3]] <code>  arr = [1]arr << 2# => [1, 2]",How do I add multiple elements to an array?
rake db:migrate is being aborted do to rake version difrence," I am getting the error used bundle and it did not fix the problem... any ideas as to help fix this problem? <code>  rake db:migrate --tracerake aborted!You have already activated rake 10.1.1, but your Gemfile requires rake 10.1.0. Using bundle exec may solve this./Users/iang/.rvm/gems/ruby-2.0.0-p247@global/gems/bundler-1.3.5/lib/bundler/runtime.rb:33:in `block in setup'/Users/iang/.rvm/gems/ruby-2.0.0-p247@global/gems/bundler-1.3.5/lib/bundler/runtime.rb:19:in `setup'/Users/iang/.rvm/gems/ruby-2.0.0-p247@global/gems/bundler-1.3.5/lib/bundler.rb:120:in `setup'/Users/iang/.rvm/gems/ruby-2.0.0-p247@global/gems/bundler-1.3.5/lib/bundler/setup.rb:7:in `<top (required)>'/Users/iang/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/site_ruby/2.0.0/rubygems/core_ext/kernel_require.rb:116:in `require'/Users/iang/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/site_ruby/2.0.0/rubygems/core_ext/kernel_require.rb:116:in `rescue in require'/Users/iang/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/site_ruby/2.0.0/rubygems/core_ext/kernel_require.rb:122:in `require'/Users/iang/code/Projects/work/startco/config/boot.rb:4:in `<top (required)>'/Users/iang/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/site_ruby/2.0.0/rubygems/core_ext/kernel_require.rb:51:in `require'/Users/iang/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/site_ruby/2.0.0/rubygems/core_ext/kernel_require.rb:51:in `require'/Users/iang/code/Projects/work/startco/config/application.rb:1:in `<top (required)>'/Users/iang/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/site_ruby/2.0.0/rubygems/core_ext/kernel_require.rb:51:in `require'/Users/iang/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/site_ruby/2.0.0/rubygems/core_ext/kernel_require.rb:51:in `require'/Users/iang/code/Projects/work/startco/Rakefile:4:in `<top (required)>'/Users/iang/.rvm/gems/ruby-2.0.0-p247/gems/rake-10.1.1/lib/rake/rake_module.rb:25:in `load'/Users/iang/.rvm/gems/ruby-2.0.0-p247/gems/rake-10.1.1/lib/rake/rake_module.rb:25:in `load_rakefile'/Users/iang/.rvm/gems/ruby-2.0.0-p247/gems/rake-10.1.1/lib/rake/application.rb:637:in `raw_load_rakefile'/Users/iang/.rvm/gems/ruby-2.0.0-p247/gems/rake-10.1.1/lib/rake/application.rb:94:in `block in load_rakefile'/Users/iang/.rvm/gems/ruby-2.0.0-p247/gems/rake-10.1.1/lib/rake/application.rb:165:in `standard_exception_handling'/Users/iang/.rvm/gems/ruby-2.0.0-p247/gems/rake-10.1.1/lib/rake/application.rb:93:in `load_rakefile'/Users/iang/.rvm/gems/ruby-2.0.0-p247/gems/rake-10.1.1/lib/rake/application.rb:77:in `block in run'/Users/iang/.rvm/gems/ruby-2.0.0-p247/gems/rake-10.1.1/lib/rake/application.rb:165:in `standard_exception_handling'/Users/iang/.rvm/gems/ruby-2.0.0-p247/gems/rake-10.1.1/lib/rake/application.rb:75:in `run'/Users/iang/.rvm/gems/ruby-2.0.0-p247/gems/rake-10.1.1/bin/rake:33:in `<top (required)>'/Users/iang/.rvm/gems/ruby-2.0.0-p247/bin/rake:23:in `load'/Users/iang/.rvm/gems/ruby-2.0.0-p247/bin/rake:23:in `<main>'",rake db:migrate is being aborted due to rake version difference
rake db:migrate is being aborted do to rake version difference," I am getting the error used bundle and it did not fix the problem... any ideas as to help fix this problem? <code>  rake db:migrate --tracerake aborted!You have already activated rake 10.1.1, but your Gemfile requires rake 10.1.0. Using bundle exec may solve this./Users/iang/.rvm/gems/ruby-2.0.0-p247@global/gems/bundler-1.3.5/lib/bundler/runtime.rb:33:in `block in setup'/Users/iang/.rvm/gems/ruby-2.0.0-p247@global/gems/bundler-1.3.5/lib/bundler/runtime.rb:19:in `setup'/Users/iang/.rvm/gems/ruby-2.0.0-p247@global/gems/bundler-1.3.5/lib/bundler.rb:120:in `setup'/Users/iang/.rvm/gems/ruby-2.0.0-p247@global/gems/bundler-1.3.5/lib/bundler/setup.rb:7:in `<top (required)>'/Users/iang/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/site_ruby/2.0.0/rubygems/core_ext/kernel_require.rb:116:in `require'/Users/iang/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/site_ruby/2.0.0/rubygems/core_ext/kernel_require.rb:116:in `rescue in require'/Users/iang/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/site_ruby/2.0.0/rubygems/core_ext/kernel_require.rb:122:in `require'/Users/iang/code/Projects/work/startco/config/boot.rb:4:in `<top (required)>'/Users/iang/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/site_ruby/2.0.0/rubygems/core_ext/kernel_require.rb:51:in `require'/Users/iang/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/site_ruby/2.0.0/rubygems/core_ext/kernel_require.rb:51:in `require'/Users/iang/code/Projects/work/startco/config/application.rb:1:in `<top (required)>'/Users/iang/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/site_ruby/2.0.0/rubygems/core_ext/kernel_require.rb:51:in `require'/Users/iang/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/site_ruby/2.0.0/rubygems/core_ext/kernel_require.rb:51:in `require'/Users/iang/code/Projects/work/startco/Rakefile:4:in `<top (required)>'/Users/iang/.rvm/gems/ruby-2.0.0-p247/gems/rake-10.1.1/lib/rake/rake_module.rb:25:in `load'/Users/iang/.rvm/gems/ruby-2.0.0-p247/gems/rake-10.1.1/lib/rake/rake_module.rb:25:in `load_rakefile'/Users/iang/.rvm/gems/ruby-2.0.0-p247/gems/rake-10.1.1/lib/rake/application.rb:637:in `raw_load_rakefile'/Users/iang/.rvm/gems/ruby-2.0.0-p247/gems/rake-10.1.1/lib/rake/application.rb:94:in `block in load_rakefile'/Users/iang/.rvm/gems/ruby-2.0.0-p247/gems/rake-10.1.1/lib/rake/application.rb:165:in `standard_exception_handling'/Users/iang/.rvm/gems/ruby-2.0.0-p247/gems/rake-10.1.1/lib/rake/application.rb:93:in `load_rakefile'/Users/iang/.rvm/gems/ruby-2.0.0-p247/gems/rake-10.1.1/lib/rake/application.rb:77:in `block in run'/Users/iang/.rvm/gems/ruby-2.0.0-p247/gems/rake-10.1.1/lib/rake/application.rb:165:in `standard_exception_handling'/Users/iang/.rvm/gems/ruby-2.0.0-p247/gems/rake-10.1.1/lib/rake/application.rb:75:in `run'/Users/iang/.rvm/gems/ruby-2.0.0-p247/gems/rake-10.1.1/bin/rake:33:in `<top (required)>'/Users/iang/.rvm/gems/ruby-2.0.0-p247/bin/rake:23:in `load'/Users/iang/.rvm/gems/ruby-2.0.0-p247/bin/rake:23:in `<main>'",rake db:migrate is being aborted due to rake version difference
How to use new_record and changed method in rails - best practise," Trying to undestand new record?,changed ? and persisted ? on the example below.How, this code has this result: Trying to come to this result: *Question is: *How to do it?. Want to record the number of changed and new records. *UPDATE* code according to answer:- attempt to change only 1 record, not 2.  <code>  # NOW # there is 0 new record after running new_data array # there is 0 changed record(s) after running new_data array # there is 3 persisted record(s) after running new_data array # WANT#there is 1 new record(s) after running new_data array#there is 1 changed record(s) after running new_data array#there is 2 persisted record(s) after running new_data array Cars.delete_alloriginal_data = [ {:brand => 'Mercedes', :used => false, :year => 2000 }, {:brand => 'Honda', :used => true , :year => 2000 }, {:brand => 'Nissan', :used => false, :year => 2000 }]new_data = [ # updating year to 2013 {:brand => 'Mercedes', :used => false, :year => 2013 }, # new record {:brand => 'Tesla', :used => false, :year => 2013 }, # same data {:brand => 'Nissan', :used => false, :year => 2000 }]# create new carsoriginal_data.each do |c| Cars.create(c)end# updatespersisted = 0new_records = 0changed_records = 0new_data.each do |c| car = Cars.where(:brand => c[:brand]).first_or_create persisted +=1 if car.persisted? new_records +=1 if car.new_record? changed_records +=1 if car.changed?endputs ""there is #{new_records} new record(s) after running new_data array""puts ""there is #{changed_records} changed record(s) after running new_data array""puts ""there is #{persisted} persisted record(s) after running new_data array"" # updatespersisted = 0new_records = 0changed_records = 0new_data.each do |c| car = Cars.where(:brand => c[:brand]).first_or_initialize car.assign_attributes(c) persisted +=1 if car.persisted? new_records +=1 if car.new_record? changed_records +=1 if car.changed? car.saveendthere is 1 new record(s) after running new_data arraythere is 2 changed record(s) after running new_data arraythere is 2 persisted record(s) after running new_data array","How to use new_record?, changed? and persisted? methods in rails in this example"
How can I escape the console output when assigning a value to a variable in Ruby, Is it possible to escape that effect when assigning to a value: I have a code that has lots of assignings and when I am trying to test it I can not see the result because of all these returned values: <code>  irb(main):584:0>a = true=>trueirb(main):584:0> truefalsetruefalsetruetrue..,How can I avoid the console output when assigning a value to a variable in Ruby
ruby open_http: 403 Forbidden (OpenURI::HTTPError)," I am trying to pull data from my Google+ API, using this script: However, I keep getting this error: I am not sure what is wrong here, any help would be great. <code>  require 'open-uri'require 'json'google_api_key = 'put your google api key here'page_id = '105672627985088123672'data = open(""https://www.googleapis.com/plus/v1/people/#{page_id}?key=#{google_api_key}"").read obj = JSON.parse(data)puts obj['plusOneCount'].to_i /Users/xng/.rvm/rubies/ruby-1.9.2-p320/lib/ruby/1.9.1/open-uri.rb:346:in `open_http': 403 Forbidden (OpenURI::HTTPError) from /Users/xng/.rvm/rubies/ruby-1.9.2-p320/lib/ruby/1.9.1/open-uri.rb:769:in `buffer_open' from /Users/xng/.rvm/rubies/ruby-1.9.2-p320/lib/ruby/1.9.1/open-uri.rb:203:in `block in open_loop' from /Users/xng/.rvm/rubies/ruby-1.9.2-p320/lib/ruby/1.9.1/open-uri.rb:201:in `catch' from /Users/xng/.rvm/rubies/ruby-1.9.2-p320/lib/ruby/1.9.1/open-uri.rb:201:in `open_loop' from /Users/xng/.rvm/rubies/ruby-1.9.2-p320/lib/ruby/1.9.1/open-uri.rb:146:in `open_uri' from /Users/xng/.rvm/rubies/ruby-1.9.2-p320/lib/ruby/1.9.1/open-uri.rb:671:in `open' from /Users/xng/.rvm/rubies/ruby-1.9.2-p320/lib/ruby/1.9.1/open-uri.rb:33:in `open' from gplus.rb:8:in `<main>'",open_http: 403 Forbidden (OpenURI::HTTPError)
Why does this regex runs differenetly in sed than in Perl/Ruby?," I have a regex that gives me one result in sed but another in Perl (and Ruby).I have the string one;two;;three and I want to highlight the substrings delimited by the ;. So I do the following in Perl: (Or, in Ruby: print ""one;two;;three"".gsub(/([^;]*)/, ""[\\1]"").)The result is: (I know the reason for the spurious empty substrings.)Curiously, when I run the same regexp in sed I get a different result. I run: and I get: What is the reason for this different result?EDIT:Somebody replied ""because sed is not perl"". I know that. The reason I'm asking my question is because I don't understand how sed copes so well with zero-length matches. <code>  $a = ""one;two;;three"";$a =~ s/([^;]*)/[\1]/g;print $a; [one][];[two][];[];[three][] echo ""one;two;;three"" | sed -e 's/[^;]*/[\0]/g' [one];[two];[];[three]",Why does this regex run differently in sed than in Perl/Ruby?
Why does this regex run differenetly in sed than in Perl/Ruby?," I have a regex that gives me one result in sed but another in Perl (and Ruby).I have the string one;two;;three and I want to highlight the substrings delimited by the ;. So I do the following in Perl: (Or, in Ruby: print ""one;two;;three"".gsub(/([^;]*)/, ""[\\1]"").)The result is: (I know the reason for the spurious empty substrings.)Curiously, when I run the same regexp in sed I get a different result. I run: and I get: What is the reason for this different result?EDIT:Somebody replied ""because sed is not perl"". I know that. The reason I'm asking my question is because I don't understand how sed copes so well with zero-length matches. <code>  $a = ""one;two;;three"";$a =~ s/([^;]*)/[\1]/g;print $a; [one][];[two][];[];[three][] echo ""one;two;;three"" | sed -e 's/[^;]*/[\0]/g' [one];[two];[];[three]",Why does this regex run differently in sed than in Perl/Ruby?
split string after last occurrence of a character," I have the string below:this sentence: should be: split after last colon: sentenceI want to split the above string on the last colon (:) such that the resulting array will contain these two elements: <code>  [""this sentence: should be: splited after last colon:"", ""sentence""]",Split string on the last occurrence of a character
Insert element at the beginning of Ruby Hash," I have a use-case where I have an existing hash: I need to add id as one of the keys. When I use response.merge(id: 'some_id') and then convert it into JSON, I got id as the last element, which I don't want.I want to insert id: 'some_id' at the beginning of response.I have tried this, but it doesn't feel good to iterate over it: Basically, I need a similar feature like Ruby Array's unshift. <code>  response = { aa: 'aaa', bb: 'bbb' } new_response = { id: 'some id' }response.keys.reverse.each {|key| new_response[key] = response[key] } irb(main):042:0> arr = [1, 2, 3]=> [1, 2, 3]irb(main):043:0> arr.unshift(5)=> [5, 1, 2, 3]",Insert element at the beginning of Ruby Hash?
The heroku command exists in these Ruby versions, After I updated my Ruby version with rbenv I wasn't able to use the Heroku command-line tool.I got this error: Reinstalling the tool belt from toolbelt.heroku.com didn't help. <code>  > herokurbenv: heroku: command not foundThe `heroku' command exists in these Ruby versions: 2.0.0-p195,The heroku command exists in these Ruby versions?
Get filenames and split from file extension in Ruby," I'm working on a program to download a video from YouTube, convert it to MP3 and create a directory structure for the files.My code is: The first one goes to the already created music folder. Inside that I'm executing get. After that I have two files in the directory: ""xyz.mp4"" and ""xyz.m4a"".I would like to fetch the filename without the extension so I can handle both files differently.I'm using an array, but an array for just one match sounds crazy for me.Has anyone another idea? <code>  FileUtils.cd(""#{$musicdir}/#{$folder}"") do YoutubeDlhelperLibs::Downloader.get($url) if File.exists?('*.mp4') puts 'Remove unneeded tempfile' Dir['*.mp4'].each do |waste| File.delete(waste) end else puts 'Temporary file already deleted' end Dir['*.m4a'].each do |rip| rip.to_s rip.split puts 'Inside the function' puts rip endend",Get file name and extension in Ruby
Get file name and extension in Ruby," I'm working on a program to download a video from YouTube, convert it to MP3 and create a directory structure for the files.My code is: The first one goes to the already created music folder. Inside that I'm executing get. After that I have two files in the directory: ""xyz.mp4"" and ""xyz.m4a"".I would like to fetch the filename without the extension so I can handle both files differently.I'm using an array, but an array for just one match sounds crazy for me.Has anyone another idea? <code>  FileUtils.cd(""#{$musicdir}/#{$folder}"") do YoutubeDlhelperLibs::Downloader.get($url) if File.exists?('*.mp4') puts 'Remove unneeded tempfile' Dir['*.mp4'].each do |waste| File.delete(waste) end else puts 'Temporary file already deleted' end Dir['*.m4a'].each do |rip| rip.to_s rip.split puts 'Inside the function' puts rip endend",Get file name and extension in Ruby
Get file name and extension?," I'm working on a program to download a video from YouTube, convert it to MP3 and create a directory structure for the files.My code is: The first one goes to the already created music folder. Inside that I'm executing get. After that I have two files in the directory: ""xyz.mp4"" and ""xyz.m4a"".I would like to fetch the filename without the extension so I can handle both files differently.I'm using an array, but an array for just one match sounds crazy for me.Has anyone another idea? <code>  FileUtils.cd(""#{$musicdir}/#{$folder}"") do YoutubeDlhelperLibs::Downloader.get($url) if File.exists?('*.mp4') puts 'Remove unneeded tempfile' Dir['*.mp4'].each do |waste| File.delete(waste) end else puts 'Temporary file already deleted' end Dir['*.m4a'].each do |rip| rip.to_s rip.split puts 'Inside the function' puts rip endend",Get file name and extension in Ruby
Get file name and extension? (solved)," I'm working on a program to download a video from YouTube, convert it to MP3 and create a directory structure for the files.My code is: The first one goes to the already created music folder. Inside that I'm executing get. After that I have two files in the directory: ""xyz.mp4"" and ""xyz.m4a"".I would like to fetch the filename without the extension so I can handle both files differently.I'm using an array, but an array for just one match sounds crazy for me.Has anyone another idea? <code>  FileUtils.cd(""#{$musicdir}/#{$folder}"") do YoutubeDlhelperLibs::Downloader.get($url) if File.exists?('*.mp4') puts 'Remove unneeded tempfile' Dir['*.mp4'].each do |waste| File.delete(waste) end else puts 'Temporary file already deleted' end Dir['*.m4a'].each do |rip| rip.to_s rip.split puts 'Inside the function' puts rip endend",Get file name and extension in Ruby
Get file name and extension?," I'm working on a program to download a video from YouTube, convert it to MP3 and create a directory structure for the files.My code is: The first one goes to the already created music folder. Inside that I'm executing get. After that I have two files in the directory: ""xyz.mp4"" and ""xyz.m4a"".I would like to fetch the filename without the extension so I can handle both files differently.I'm using an array, but an array for just one match sounds crazy for me.Has anyone another idea? <code>  FileUtils.cd(""#{$musicdir}/#{$folder}"") do YoutubeDlhelperLibs::Downloader.get($url) if File.exists?('*.mp4') puts 'Remove unneeded tempfile' Dir['*.mp4'].each do |waste| File.delete(waste) end else puts 'Temporary file already deleted' end Dir['*.m4a'].each do |rip| rip.to_s rip.split puts 'Inside the function' puts rip endend",Get file name and extension in Ruby
ERROR while starting PUMA server with workers," I am new to Rails and Puma, so the issue might be too silly with simple solutions, also please guide me if you think i am doing something wrong.I am trying to start the Puma server for my rails with the worker. If i set workers to 0 with the server starts perfectly but if i set worker to 1 or more it gives the following error: Specifications:Windows 7Ruby 1.9.3p448 (2013-06-27) [i386-mingw32] MRI Rail 4.0.0 PumaVersion 2.7.1, codename: Earl of Sandwich Partition <code>  puma -w0 E:\RoR_tryouts\ws_13.11.13\todo>puma -w3[2120] *** SIGUSR2 not implemented, signal based restart unavailable![2120] *** SIGUSR1 not implemented, signal based restart unavailable![2120] Puma starting in cluster mode...[2120] * Version 2.7.1, codename: Earl of Sandwich Partition[2120] * Min threads: 0, max threads: 16[2120] * Environment: development[2120] * Process workers: 3[2120] * Phased restart available[2120] * Listening on tcp://0.0.0.0:9292C:/Ruby/Ruby193/lib/ruby/gems/1.9.1/gems/puma-2.7.1/lib/puma/cluster.rb:229:in `trap': unsupported signal SIGCHLD (ArgumentError) from C:/Ruby/Ruby193/lib/ruby/gems/1.9.1/gems/puma-2.7.1/lib/puma/cluster.rb:229:in `run' from C:/Ruby/Ruby193/lib/ruby/gems/1.9.1/gems/puma-2.7.1/lib/puma/cli.rb:442:in `run' from C:/Ruby/Ruby193/lib/ruby/gems/1.9.1/gems/puma-2.7.1/bin/puma:10:in `<top (required)>' from C:/Ruby/Ruby193/bin/puma:23:in `load' from C:/Ruby/Ruby193/bin/puma:23:in `<main>'",Error while starting Puma server with workers
How do round datetime to the nearest hour in Rails?," Basically I'd like to get a random datetime within the last year: But how do I go about specifying or limiting this to times on the hour? For example:  <code>  rand(1.year).ago #=> Sun, 22 Sep 2013 18:37:44 UTC +00:00 (example) Sun, 22 Sep 2013 18:00:00 UTC +00:00Sat, 02 Nov 2013 10:00:00 UTC +00:00Fri, 12 Apr 2013 21:00:00 UTC +00:00",How do get a random DateTime rounded to beginning of hour in Rails?
getting my ruby file to load into pry," I'm trying to edit my Ruby file with Pry. There are few variables that are set in it, and for whatever reason I can't seem to cd into them because they aren't being defined even after I 'load' the file.Here is the code: In Pry I do: and then this is the output: Then when I try to do something like: This is what I get.I think I'm not loading the file correctly although I've been searching for hours and I can't figure out how to properly do this. I was doing it right months ago when I had made a scraper with Ruby, but this time I'm having trouble just getting started because of this bit. Thanks for your help in advance! <code>  require 'nokogiri'require 'open-uri'doc = Nokogiri.XML('<foo><bar /><foo>', nil, 'UTF-8') url = ""http://superbook.eventmarketer.com/category/agencies/"" puts ""Finished!"" load ""./AgencyListingScraper.rb"" 7] pry(main)> load './AgencyListingScraper.rb'Finished!=> true[8] pry(main)> [8] pry(main)> urlNameError: undefined local variable or method `url' for main:Objectfrom (pry):6:in `__pry__'[9] pry(main)> cd urlError: Bad object path: url. Failed trying to resolve: url. #<NameError: undefined local variable or method `url' for main:Object>[10] pry(main)> ",Getting my Ruby file to load into Pry?
Debugger gem not supportet in Ruby 2.1.0," I just upgraded my RVM Ruby installation to version 2.1.0 and tried to bundle install when I got the following error: The error of course is self-explanatory, but I was wondering if there was a way to make the Debugger gem work with the latest release of Ruby?  <code>  Gem::Ext::BuildError: ERROR: Failed to build gem native extension.Ruby version 2.1.0 is not supported.*** extconf.rb failed ***",Debugger gem not supported in Ruby 2.1.0 / 2.1.1 / 2.1.2
Debugger gem not supported in Ruby 2.1.0," I just upgraded my RVM Ruby installation to version 2.1.0 and tried to bundle install when I got the following error: The error of course is self-explanatory, but I was wondering if there was a way to make the Debugger gem work with the latest release of Ruby?  <code>  Gem::Ext::BuildError: ERROR: Failed to build gem native extension.Ruby version 2.1.0 is not supported.*** extconf.rb failed ***",Debugger gem not supported in Ruby 2.1.0 / 2.1.1 / 2.1.2
Debugger gem not supported in Ruby 2.1.0 / 2.1.1," I just upgraded my RVM Ruby installation to version 2.1.0 and tried to bundle install when I got the following error: The error of course is self-explanatory, but I was wondering if there was a way to make the Debugger gem work with the latest release of Ruby?  <code>  Gem::Ext::BuildError: ERROR: Failed to build gem native extension.Ruby version 2.1.0 is not supported.*** extconf.rb failed ***",Debugger gem not supported in Ruby 2.1.0 / 2.1.1 / 2.1.2
"Ruby on Rails - has_one relation, how to check if it really has one?"," I have a simple problem, related to associations.I have a model for book, that has_one reservation.Reservation belongs_to book.I want to make sure in the create method of reservations controller that a book is not reserved already when a reservation is made. In other words, I need to check if any other reservation exists for that book. How do i do that?EDIT:Aaaand i made it, thanks everyone for the tips, learned some new stuff. When i tried offered solutions, I got no_method errors, or nil_class etc. That got me thinking, that the objects I'm trying to work on simply don't exist. Krule gave me the idea to use book.find, so i tried working with that.Ultimately i got it working with: Thanks everybody for your anwsers, I know it's basic stuff but i learned a lot. Cheers! <code>  book=Book.find_by_id(reservation_params[:book_id])unless book.is_reserved?","Ruby on Rails - has_one relation, how to check if it has an existing association?"
How to code/run Ruby on Chromebook?," On the desktop, I can use a text editor with the ruby interpreter to run everything, but there isn't an interpreter available for Chromebook. Is there any online software/program/webapp that would let me run Ruby code or emulate it? Kind of like Codeacademy where you put your stuff into the one section and it displays the results in another 'console' section.I found something called OpenShift, and I'm wondering if it would let me upload a .rb file and have it run or something so I can see what I'm making. <code> ",How to code/run Ruby on Chromebook
Built in Ruby methods," If there is a defined built in ruby method, is it always preferable to use the built-in method?If I have code such as: What is the advantage to instead using the built-in ruby method? <code>  if i == 0 if i.zero?",Built-in Ruby methods
Ruby: perform map only when not nil," The following breaks if names is nil. How can I have this map execute only if it's not nil? <code>  self.topics = names.split("","").map do |n| Topic.where(name: n.strip).first_or_create!end",Perform map only when not nil?
Ruby: dynamic method chain," How can I call a nested hash of methods names on an object?For example, given the following hash: I would like to create a method that, given the above hash, does the equivalent of the following: The idea is that I need to get a specific attribute from an unknown association (unknown to this method, but known to the programmer).I would like to be able to specify a method chain to retrieve that attribute in the form of a nested hash. For example: <code>  hash = {:a => {:b => {:c => :d}}} object.send(:a).send(:b).send(:c).send(:d) hash = {:manufacturer => {:addresses => {:first => :postal_code}}}car.execute_method_hash(hash)=> 90210",Dynamic method chain?
Install Nokogiri 1.6.1 under Ruby 2.0.0p353 (rvm based installation) fails (OSX Mavericks)," I've tried to install Nokogiri 1.6.1 under Ruby and RVM but is failing with the following error: <code>  Gem::Installer::ExtensionBuildError: ERROR: Failed to build gem native extension./Users/lmo0/.rvm/rubies/ruby-2.0.0-p353/bin/ruby extconf.rb Extracting libxml2-2.8.0.tar.gz into tmp/x86_64-apple-darwin13.0.0/ports/libxml2/2.8.0... OKRunning 'configure' for libxml2 2.8.0... OKRunning 'compile' for libxml2 2.8.0... OKRunning 'install' for libxml2 2.8.0... OKActivating libxml2 2.8.0 (from /Users/lmo0/.rvm/gems/ruby-2.0.0-p353/gems/nokogiri-1.6.1/ports/x86_64-apple-darwin13.0.0/libxml2/2.8.0)...Extracting libxslt-1.1.26.tar.gz into tmp/x86_64-apple-darwin13.0.0/ports/libxslt/1.1.26... OKRunning 'configure' for libxslt 1.1.26... ERROR, review 'tmp/x86_64-apple-darwin13.0.0/ports/libxslt/1.1.26/configure.log' to see what happened.*** extconf.rb failed ***Could not create Makefile due to some reason, probably lack of necessarylibraries and/or headers. Check the mkmf.log file for more details. You mayneed configuration options.Provided configuration options: --with-opt-dir --with-opt-include --without-opt-include=${opt-dir}/include --with-opt-lib --without-opt-lib=${opt-dir}/lib --with-make-prog --without-make-prog --srcdir=. --curdir --ruby=/Users/lmo0/.rvm/rubies/ruby-2.0.0-p353/bin/ruby/Users/lmo0/.rvm/gems/ruby-2.0.0-p353/gems/mini_portile-0.5.2/lib/mini_portile.rb:265:in `block in execute': Failed to complete configure task (RuntimeError) from /Users/lmo0/.rvm/gems/ruby-2.0.0-p353/gems/mini_portile-0.5.2/lib/mini_portile.rb:257:in `chdir' from /Users/lmo0/.rvm/gems/ruby-2.0.0-p353/gems/mini_portile-0.5.2/lib/mini_portile.rb:257:in `execute' from /Users/lmo0/.rvm/gems/ruby-2.0.0-p353/gems/mini_portile-0.5.2/lib/mini_portile.rb:65:in `configure' from /Users/lmo0/.rvm/gems/ruby-2.0.0-p353/gems/mini_portile-0.5.2/lib/mini_portile.rb:108:in `cook' from extconf.rb:101:in `block in <main>' from extconf.rb:131:in `call' from extconf.rb:131:in `block in <main>' from extconf.rb:122:in `tap' from extconf.rb:122:in `<main>'Gem files will remain installed in /Users/lmo0/.rvm/gems/ruby-2.0.0-p353/gems/nokogiri-1.6.1 for inspection.Results logged to /Users/lmo0/.rvm/gems/ruby-2.0.0-p353/gems/nokogiri-1.6.1/ext/nokogiri/gem_make.out",Install Nokogiri 1.6.1 under Ruby 2.0.0p353 (rvm based installation) fails (OSX Mavericks)?
Generate an nested JSON array in JBuilder," I have this models in ruby on railsBranch model: has_many :menus Menu model: has_many :products Product model: with the following code in the view: gets: But as I get the products of each menu?, I suspect I need to iterate menu, but I have tried several ways without success.  <code>  class Branch < ActiveRecord::Base belongs_to :place belongs_to :city has_many :menus , dependent: :destroy belongs_to :type_placeend class Menu < ActiveRecord::Base attr_accessible :description, :product_name, :price, :category_id, :menu_id belongs_to :branch has_many :products, dependent: :destroyend class Product < ActiveRecord::Base belongs_to :menu belongs_to :categoryend if @condition json.code :success json.branch do json.array!(@branches) do |json, branch| json.(branch, :id, :branch_name, :barcode) json.menu branch.menus, :id, :menu_name end endelse json.code :error json.message 'Mensaje de error'end { ""code"": ""success"", ""branch"": [{ ""id"": 1, ""branch_name"": ""Sucursal 1"", ""barcode"": ""zPOuByzEFe"", ""menu"": [ { ""id"": 2, ""menu_name"": ""carta sucursal 1"" } ]},{ ""id"": 2, ""branch_name"": ""Sucursal Via Centro"", ""barcode"": ""RlwXjAVtfx"", ""menu"": [ { ""id"": 1, ""menu_name"": ""carta via centro"" }, { ""id"": 5, ""menu_name"": ""carta via centro vinos"" } ]},{ ""id"": 3, ""branch_name"": ""dddd"", ""barcode"": ""eSbJqLbsyP"", ""menu"": [ ] } ]}",Generate a nested JSON array in JBuilder
How ruby TCPSocket timeout is defined?," gives Errno::ETIMEDOUT: Operation timed out - connect(2)Questions:How can I define the timeout value for TCPSocket.new?How can I properly catch the timeout (or, in general, socket) exception(s)? <code>  $ irb1.9.3-p448 :001 > require 'socket' => true 1.9.3-p448 :002 > TCPSocket.new('www.example.com', 111)",How is Ruby TCPSocket timeout defined?
How to set params for routing by default in Rails?," There is the following code for routing: It is possible to set default format for all resources using 1 string without 'defaults' hash on each line? Thanks.  <code>  resources :orders, only: [:create], defaults: { format: 'json' } resources :users, only: [:create, :update], defaults: { format: 'json' } resources :delivery_types, only: [:index], defaults: { format: 'json' } resources :time_corrections, only: [:index], defaults: { format: 'json' }",How to set default format for routing in Rails?
can't find header files for ruby - on suse," I'm attempting to install compass on SUSE Enterprise 11 SP3. I get the following. Any ideas? <code>  gem install compassBuilding native extensions. This could take a while...ERROR: Error installing compass:ERROR: Failed to build gem native extension./usr/bin/ruby extconf.rb<b>mkmf.rb can't find header files for ruby at /usr/lib64/ruby/ruby.h</b>extconf failed, exit code 1Gem files will remain installed in /usr/lib64/ruby/gems/1.8/gems/ffi-1.9.3 for inspection.Results logged to /usr/lib64/ruby/gems/1.8/extensions/x86_64-linux/1.8/ffi-1.9.3gem_make.out",Can't find header files for Ruby on SUSE?
Can't find header files for ruby," I'm attempting to install compass on SUSE Enterprise 11 SP3. I get the following. Any ideas? <code>  gem install compassBuilding native extensions. This could take a while...ERROR: Error installing compass:ERROR: Failed to build gem native extension./usr/bin/ruby extconf.rb<b>mkmf.rb can't find header files for ruby at /usr/lib64/ruby/ruby.h</b>extconf failed, exit code 1Gem files will remain installed in /usr/lib64/ruby/gems/1.8/gems/ffi-1.9.3 for inspection.Results logged to /usr/lib64/ruby/gems/1.8/extensions/x86_64-linux/1.8/ffi-1.9.3gem_make.out",Can't find header files for Ruby on SUSE?
no database connection in rails console, My rails application works fine when I run rake db:migrate but the problem occurs when I try to start the rails console. <code>  2.0.0p247 :003 > User => User(no database connection),No database connection in rails console
Ruby - Bad value for range," When I run the following code: I get a ""bad value for range"" error. Why does this happen how do I fix it? Normal ranges that use variables for some values work perfectly including for loops, why does this not work?Note: I want the for loop to stay as a for loop. <code>  def db(y) return self % y == 0endputs ""To number:""n = gets.chompfor i in 1..n if i.db(3) puts ""Fizz!"" if i.db(5) puts ""FIZZBUZZ!"" end elsif i.db(5) puts ""Buzz!"" else puts i endend",Bad value for range
Ping for reachability of remote host in Ruby," I tried using for reachability of the remote host. This statement returns null even if I'm able to ping the IP manually. Is there an efficient way to determine the reachability of the remote machine in Ruby? <code>  Ping.pingecho(""10.102.52.42"", 30)",How to ping for reachability of remote host in Ruby
ruby attr_accessor on class variables," attr_accessor does not work on the following code. The error says ""undefined method 'things' for Parent:Class (NoMethodError)"": However the following code works <code>  class Parent @@things = [] attr_accessor :thingsendParent.things << :carp Parent.things class Parent @@things = [] def self.things @@things end def things @@things endendParent.things << :carp Parent.things",Attr_accessor on class variables
Operator precedence (ruby): Why does this return false?, I've been studying operator precedence and it was explained to me that x =! 5 returns false. I can't seem to explain why to myself again. I know =! isn't a operator so then x and 5 remain. So does that mean Ruby doesn't know what to do? If so ruby should return an error because x can have no value? Does Ruby stop at the operator and then assign a value of false to x? <code>  x =! 5 => false,Why does `x =! 5` return false?
Parse/read Large XML in with minimal memory footprint," I have a very large XML file (300mb) of the following format: Now I need to read it and iterate through the point nodes doing something for each. Currently I'm doing it with Nokogiri like this: However that's not very efficient, since it parses everything whole hug, and hence creating a huge memory footprint (several GB). Is there a way to do this in chunks instead? Might be called streaming if I'm not mistaken?EDITThe suggested answer using nokogiris sax parser might be okay, but it gets very messy when there is several nodes within each point that I need to extract content from and process differently. Instead of returning a huge array of entries for later processing, I would much rather prefer if I could access one point at a time, process it, and then move on to the next ""forgetting"" the previous. <code>  <data> <point> <id><![CDATA[1371308]]></id> <time><![CDATA[15:36]]></time> </point> <point> <id><![CDATA[1371308]]></id> <time><![CDATA[15:36]]></time> </point> <point> <id><![CDATA[1371308]]></id> <time><![CDATA[15:36]]></time> </point></data> require 'nokogiri'xmlfeed = Nokogiri::XML(open(""large_file.xml""))xmlfeed.xpath(""./data/point"").each do |item| save_id(item.xpath(""./id"").text)end",Parse/read Large XML file with minimal memory footprint
ruby - extracting the unique values per key from an array of hashes," From a hash like the below one, need to extract the unique values per key Need to extract the unique values per key in an arrayunique values for 'a' should give unique values for 'b' should give unique values for 'c' should give Thoughts ?  <code>  array_of_hashes = [ {'a' => 1, 'b' => 2 , 'c' => 3} , {'a' => 4, 'b' => 5 , 'c' => 3}, {'a' => 6, 'b' => 5 , 'c' => 3} ] [1,4,6] [2,5] [3]",Ruby - extracting the unique values per key from an array of hashes
Ruby - how to initialize a hash with keys from an array," How to initialize a hash with keys from an array like the following? Desired hash h should be:  <code>  keys = [ 'a' , 'b' , 'c' ] puts h # { 'a' => nil , 'b' => nil , 'c' => nil }",How to initialize a hash with keys from an array?
How to initialize a hash with keys from an array?," How to initialize a hash with keys from an array like the following? Desired hash h should be:  <code>  keys = [ 'a' , 'b' , 'c' ] puts h # { 'a' => nil , 'b' => nil , 'c' => nil }",How to initialize a hash with keys from an array?
Ruby - How to initialize a hash with keys from an array?," How to initialize a hash with keys from an array like the following? Desired hash h should be:  <code>  keys = [ 'a' , 'b' , 'c' ] puts h # { 'a' => nil , 'b' => nil , 'c' => nil }",How to initialize a hash with keys from an array?
Build list of objects with trait rspec," I'm using factory_bot to create objects in my test, here is a example of my factory: So I can create a user with photo like: Or without photo : Or create a list of users : But how can I build a list of users with trait (trait being :with_photo), if I wanted to create five of them with photo?Note: FactoryBot was previously called FactoryGirl <code>  factory :user do name ""John"" surname ""Doe"" trait :with_photo do ignore do photo_count 1 end after(:create) do |user, evaluator| FactoryBot.create_list(:photo, evaluator.photo_count) end endend FactoryBot.create(:user, :with_photo) FactoryBot.create(:user) FactoryBot.build_list(:user, 5)",FactoryBot to build list of objects with trait
Build list of objects with trait," I'm using factory_bot to create objects in my test, here is a example of my factory: So I can create a user with photo like: Or without photo : Or create a list of users : But how can I build a list of users with trait (trait being :with_photo), if I wanted to create five of them with photo?Note: FactoryBot was previously called FactoryGirl <code>  factory :user do name ""John"" surname ""Doe"" trait :with_photo do ignore do photo_count 1 end after(:create) do |user, evaluator| FactoryBot.create_list(:photo, evaluator.photo_count) end endend FactoryBot.create(:user, :with_photo) FactoryBot.create(:user) FactoryBot.build_list(:user, 5)",FactoryBot to build list of objects with trait
Unable to deploy with Capistrano and rbenv," For years I used RVM as my Ruby version manager, but I want to switch to rbenv for its simplicity. However I'm finding some strange problems deploying. Here's where it seems to go wrong: Okay, so I specify the rbenv version I want -- Huh. That's weird. Any idea where I'm going wrong? The bundle install command appears to think that 2.0.0-p353 is absent, but rbenv versions shows it. What might be up? <code>  # env RBENV_ROOT=\""/home/deploy/.rbenv\"" PATH=\""/home/deploy/.rbenv/shims:/home/deploy/.rbenv/bin:$PATH\"" /home/deploy/.rbenv/bin/rbenv exec bundle install --gemfile /domains/myapp.com/releases/20140119013611/Gemfile --path /domains/myapp.com/shared/bundle --deployment --without development test> rbenv: bundle: command not found> The `bundle' command exists in these Ruby versions:> 2.0.0-p353 # env RBENV_ROOT=\""/home/deploy/.rbenv\"" PATH=\""/home/deploy/.rbenv/shims:/home/deploy/.rbenv/bin:$PATH\"" RBENV_VERSION=\""2.0.0-p353\"" /home/deploy/.rbenv/bin/rbenv exec bundle install --gemfile /domains/myapp.com/releases/20140119013611/Gemfile --path /domains/myapp.com/shared/bundle --deployment --without development test> rbenv: version `""2.0.0-p353""' is not installed # rbenv versions> system> * 2.0.0-p353 (set by /home/deploy/.rbenv/version)",Bundler can't seem to find correct Ruby through Rbenv
Can anybody tell me why ruby load path use unshift instead of concat?," I find ruby load path is an array, and many projects use it like this: It can add local files to the front of ruby path array to enable us require or load.So, I hope to know why don't we use push to add the file at the end of the array? <code>  $:.unshift(File.expand_path(""../../lib"", __FILE__))","When changing the $LOAD_PATH, why do you use unshift instead of push?"
Can anybody tell me why ruby load path use unshift instead of push?," I find ruby load path is an array, and many projects use it like this: It can add local files to the front of ruby path array to enable us require or load.So, I hope to know why don't we use push to add the file at the end of the array? <code>  $:.unshift(File.expand_path(""../../lib"", __FILE__))","When changing the $LOAD_PATH, why do you use unshift instead of push?"
Why ruby load path use unshift instead of push?," I find ruby load path is an array, and many projects use it like this: It can add local files to the front of ruby path array to enable us require or load.So, I hope to know why don't we use push to add the file at the end of the array? <code>  $:.unshift(File.expand_path(""../../lib"", __FILE__))","When changing the $LOAD_PATH, why do you use unshift instead of push?"
RSpec test to see if a method was called," When writing RSpec tests, I find myself writing a lot of code that looks like this in order to ensure that a method was called during the execution of a test (for the sake of argument, let's just say I can't really interrogate the state of the object after the call because the operation the method performs is not easy to see the effect of). What I want to know is: Is there a nicer syntax available than this? Am I missing some funky RSpec awesomeness that would reduce the above code down to a few lines? should_receive sounds like it should do this but reading further it sounds like that's not exactly what it does.  <code>  describe ""#foo"" it ""should call 'bar' with appropriate arguments"" do called_bar = false subject.stub(:bar).with(""an argument I want"") { called_bar = true } subject.foo expect(called_bar).to be_true endend",RSpec: how to test if a method was called?
"Ruby, how to reference Root module?"," When I have a module like this: I can access/modify MyModule referencing it: But what about the Root namespace, the :: one?, I'm looking for something like: The const_set thing is just an example, please don't try to solve this concrete situation but the way of actually making reference to the Root namespace <code>  module MyModule class MyClass endend MyModule.const_set(""MY_CONSTANT"", ""value"") ::.const_set(""MY_CONSTANT"", ""value"")","Ruby, how to reference Root namespace?"
"RAILS - ""Could not find generator figaro:install"""," I'm using the ""Learn Ruby On Rails"" pdf book from learn-rails.com.I'm at chapter 13, ""Configure"". Where we are supposed to do the command: ""rails generate figaro:install"" In chapter 12 we installed the figaro gem,: ""Weve already installed the figaro gem in the Gemfile and run bundle install.""When I run that command I get: ""Could not find generator figaro:install.""I started searching for similar questions, and I did find this question here: rails generate - ""Could not find generator""where they were recommended to include ""migration"" into the command as well.I included it in my command and I got it to do something, but I don't think it's doing what it should be? Then about 20 more lines as well. I just didn't want to put it all here.The author goes on to say:""Using the rails generate command, the figaro gem generates a config/application.yml file and lists it in your .gitignore file. The .gitignore file prevents the config/application.yml file from being saved in the Git repository so your credentials are kept private.""When I go to my project directory, and look inside the ""config"" folder, I do have an ""application"" file, but it ends with "".rb"" and not ""yml"". So obviously the command didn't do what it is supposed to do, right?Does anyone have any ideas for me?I'm using Ruby 2.0.0 and Rails 4.0.2 with RVM on Mac OSX 10.7.5 <code>  invoke active_record/Users/NormalUse/.rvm/gems/ruby-2.0.0-p353@learn-rails/gems/activerecord-4.0.2/lib/rails/generators/active_record/migration/migration_generator.rb:57:in `validate_file_name!': Illegal name for migration file: figaro:install (ActiveRecord::IllegalMigrationNameError)(only lower case letters, numbers, and '_' allowed)from /Users/NormalUse/.rvm/gems/ruby-2.0.0-p353@learn-rails/gems/activerecord-4.0.2/lib/rails/generators/active_record/migration/migration_generator.rb:10:in `create_migration_file'","""Could not find generator figaro:install"""
Ruby 2.1 nokogiri install error," I know this is an issue that has been ""solved"" many times here, but I have tried all of the solutions and still can't get it to work. Here is my error: When I have libxml2 installed via brew: and RVM: and GCC: I have tried everything in this and other threads:""Install Nokogiri 1.6.1 under Ruby 2.0.0p353 (rvm based installation) fails (OSX Mavericks)?""Also I don't even have Nokogiri defined in my Gemfile.OK, I found the configure.log file: And in the config.log I found: <code>  22-01-14 17:57:56> gem install nokogiriBuilding native extensions. This could take a while...ERROR: Error installing nokogiri:ERROR: Failed to build gem native extension./Users/josh/.rvm/rubies/ruby-2.1.0/bin/ruby extconf.rbExtracting libxml2-2.8.0.tar.gz into tmp//ports/libxml2/2.8.0... OKRunning 'configure' for libxml2 2.8.0... ERROR, review 'tmp//ports/libxml2/2.8.0/configure.log' to see what happened.*** extconf.rb failed ***Could not create Makefile due to some reason, probably lack of necessarylibraries and/or headers. Check the mkmf.log file for more details. You mayneed configuration options.Provided configuration options: --with-opt-dir --without-opt-dir --with-opt-include --without-opt-include=${opt-dir}/include --with-opt-lib --without-opt-lib=${opt-dir}/lib --with-make-prog --without-make-prog --srcdir=. --curdir --ruby=/Users/josh/.rvm/rubies/ruby-2.1.0/bin/ruby /Users/josh/.rvm/gems/ruby-2.1.0/gems/mini_portile-0.5.2/lib/mini_portile.rb:265:in `block in execute': Failed to complete configure task (RuntimeError) from /Users/josh/.rvm/gems/ruby-2.1.0/gems/mini_portile-0.5.2/lib/mini_portile.rb:257:in `chdir' from /Users/josh/.rvm/gems/ruby-2.1.0/gems/mini_portile-0.5.2/lib/mini_portile.rb:257:in `execute' from /Users/josh/.rvm/gems/ruby-2.1.0/gems/mini_portile-0.5.2/lib/mini_portile.rb:65:in `configure' from /Users/josh/.rvm/gems/ruby-2.1.0/gems/mini_portile-0.5.2/lib/mini_portile.rb:108:in `cook' from extconf.rb:101:in `block in <main>' from extconf.rb:119:in `call' from extconf.rb:119:in `block in <main>' from extconf.rb:109:in `tap' from extconf.rb:109:in `<main>'extconf failed, exit code 1Gem files will remain installed in /Users/josh/.rvm/gems/ruby-2.1.0/gems/nokogiri-1.6.1 for inspection.Results logged to /Users/josh/.rvm/gems/ruby-2.1.0/extensions/x86_64-darwin-12/2.1.0-static/nokogiri-1.6.1/gem_make.out 22-01-14 17:57:56> brew listab cmake freetype gettext jpeg libksba libvo-aacenc lzlib openjpeg proj speex xvidapple-gcc42 elasticsearch freexl giflib json-c liblwgeom libvorbis memcached openssl qt sqlite xzapr faac frei0r git lame libogg libvpx mongodb opus readline texi2html yasmapr-util fdk-aac fribidi gpp libass libpng libxml2 mysql orc redis theoraautoconf ffmpeg gd graphviz libevent libspatialite libxslt node pcre rtmpdump ttfautohintautomake fontconfig gdal grep libgeotiff libtiff libyaml openconnect phantomjs schroedinger wkhtmltopdfcloc fontforge geos imagemagick libgpg-error libtool little-cms2 opencore-amr pkg-config sdl x26422-01-14 17:57:56> brew list libxml2/usr/local/Cellar/libxml2/2.8.0/bin/xmllint/usr/local/Cellar/libxml2/2.8.0/bin/xmlcatalog/usr/local/Cellar/libxml2/2.8.0/bin/xml2-config/usr/local/Cellar/libxml2/2.8.0/include/libxml2/ (47 files)/usr/local/Cellar/libxml2/2.8.0/lib/libxml2.2.dylib/usr/local/Cellar/libxml2/2.8.0/lib/pkgconfig/libxml-2.0.pc/usr/local/Cellar/libxml2/2.8.0/lib/ (3 other files)/usr/local/Cellar/libxml2/2.8.0/share/aclocal/libxml.m4/usr/local/Cellar/libxml2/2.8.0/share/doc/ (121 files)/usr/local/Cellar/libxml2/2.8.0/share/gtk-doc/ (55 files)/usr/local/Cellar/libxml2/2.8.0/share/man/ (4 files) 22-01-14 17:57:56> rvm listrvm rubies=* ruby-2.1.0 [ x86_64 ]# => - current# =* - current && default# * - default 22-01-14 17:57:56> gcc --versionConfigured with: --prefix=/Applications/Xcode.app/Contents/Developer/usr --with-gxx-include-dir=/usr/include/c++/4.2.1Apple LLVM version 5.0 (clang-500.2.79) (based on LLVM 3.3svn)Target: x86_64-apple-darwin13.0.2Thread model: posix 1 checking build system type... i386-apple-darwin13.0.2 2 checking host system type... i386-apple-darwin13.0.2 3 checking for a BSD-compatible install... /usr/bin/install -c 4 checking whether build environment is sane... yes 5 checking for a thread-safe mkdir -p... ./install-sh -c -d 6 checking for gawk... no 7 checking for mawk... no 8 checking for nawk... no 9 checking for awk... awk 10 checking whether make sets $(MAKE)... yes 11 checking for gcc... gcc-4.2.1 12 checking whether the C compiler works... no 13 configure: error: in `/Users/josh/.rvm/gems/ruby-2.1.0/gems/nokogiri-1.6.1/ext/nokogiri/tmp/ports/libxml2/2.8.0/libxml2-2.8.0': 14 configure: error: C compiler cannot create executables 15 See `config.log' for more details 83 configure:3326: checking for C compiler version84 configure:3335: gcc-4.2.1 --version >&585 configure: line 3337: gcc-4.2.1: command not found86 configure:3346: $? = 12787 configure:3335: gcc-4.2.1 -v >&588 configure: line 3337: gcc-4.2.1: command not found89 configure:3346: $? = 12790 configure:3335: gcc-4.2.1 -V >&591 configure: line 3337: gcc-4.2.1: command not found92 configure:3346: $? = 12793 configure:3335: gcc-4.2.1 -qversion >&594 configure: line 3337: gcc-4.2.1: command not found95 configure:3346: $? = 12796 configure:3366: checking whether the C compiler works97 configure:3388: gcc-4.2.1 conftest.c >&598 configure: line 3390: gcc-4.2.1: command not found",Ruby 2.1 and Nokogiri install error?
Ruby: run command to get output and exit code," This is a follow up question regarding ruby system command check exit code. I want to run command such that to get its output as well as exit code. Currently what I used in the code is: But this only captures output, and only captures the exit code. How to achieve both? <code>  rv = `#{cmd} 2>&1` rv = system(cmd)",How can an external command return both its output and its exit status to Ruby?
How can a command return both its output its exit status?," This is a follow up question regarding ruby system command check exit code. I want to run command such that to get its output as well as exit code. Currently what I used in the code is: But this only captures output, and only captures the exit code. How to achieve both? <code>  rv = `#{cmd} 2>&1` rv = system(cmd)",How can an external command return both its output and its exit status to Ruby?
require error error after installing compass and sass gems, I installed compass on ubuntu 12.04 like so: But after running this command: I get this error: /usr/local/lib/site_ruby/1.9.1/rubygems/core_ext/kernel_require.rb:135:in require': cannot load such file -- sass/script/node (LoadError) from /usr/local/lib/site_ruby/1.9.1/rubygems/core_ext/kernel_require.rb:135:inrescue in require' from /usr/local/lib/site_ruby/1.9.1/rubygems/core_ext/kernel_require.rb:144:in require' from /usr/lib/ruby/gems/1.9.1/gems/compass-0.12.2/lib/compass/sass_extensions/monkey_patches/browser_support.rb:1:in' from /usr/local/lib/site_ruby/1.9.1/rubygems/core_ext/kernel_require.rb:55:in require' from /usr/local/lib/site_ruby/1.9.1/rubygems/core_ext/kernel_require.rb:55:inrequire' from /usr/lib/ruby/gems/1.9.1/gems/compass-0.12.2/lib/compass/sass_extensions/monkey_patches.rb:2:in block in <top (required)>' from /usr/lib/ruby/gems/1.9.1/gems/compass-0.12.2/lib/compass/sass_extensions/monkey_patches.rb:1:ineach' from /usr/lib/ruby/gems/1.9.1/gems/compass-0.12.2/lib/compass/sass_extensions/monkey_patches.rb:1:in <top (required)>' from /usr/local/lib/site_ruby/1.9.1/rubygems/core_ext/kernel_require.rb:55:inrequire' from /usr/local/lib/site_ruby/1.9.1/rubygems/core_ext/kernel_require.rb:55:in require' from /usr/lib/ruby/gems/1.9.1/gems/compass-0.12.2/lib/compass/sass_extensions.rb:9:in' from /usr/local/lib/site_ruby/1.9.1/rubygems/core_ext/kernel_require.rb:55:in require' from /usr/local/lib/site_ruby/1.9.1/rubygems/core_ext/kernel_require.rb:55:inrequire' from /usr/lib/ruby/gems/1.9.1/gems/compass-0.12.2/lib/compass.rb:5:in block in <top (required)>' from /usr/lib/ruby/gems/1.9.1/gems/compass-0.12.2/lib/compass.rb:4:ineach' from /usr/lib/ruby/gems/1.9.1/gems/compass-0.12.2/lib/compass.rb:4:in <top (required)>' from /usr/local/lib/site_ruby/1.9.1/rubygems/core_ext/kernel_require.rb:55:inrequire' from /usr/local/lib/site_ruby/1.9.1/rubygems/core_ext/kernel_require.rb:55:in require' from /usr/lib/ruby/gems/1.9.1/gems/compass-0.12.2/bin/compass:20:inblock in ' from /usr/lib/ruby/gems/1.9.1/gems/compass-0.12.2/bin/compass:8:in fallback_load_path' from /usr/lib/ruby/gems/1.9.1/gems/compass-0.12.2/bin/compass:19:in' from /usr/bin/compass:23:in load' from /usr/bin/compass:23:in'when i run this: I get: ruby 1.9.3p0 (2011-10-30 revision 33570) [x86_64-linux]What need to be fixed here.Solution:As mentioned below: and that what fixed it for me. <code>  sudo gem install compasssudo gem install sass compass version ruby -v gem uninstall compassgem uninstall sassgem install compassgem uninstall sassgem install sass,ruby 1.9.1 error after installing compass gems
Ruby: multidimensional array which may contain nil sorting sometimes fails," I found this example in a failing test in one of my projects. Why does this work: But this does not: Tested Ruby versions: 2.0.0, 1.9.3. <code>  [[1,2,3], [2,3,4], [1,1,nil]].sort#=> [[1, 1, nil], [1, 2, 3], [2, 3, 4]] [[1,2,3], [nil,3,4], [1,1,nil]].sort#=> ERROR: ArgumentError: comparison of Array with Array failed",Ruby: Sorting a multidimensional array which may contain nil sometimes fails
How to Program with Simplicity," Rich Hickey describes paradigms from Clojure and Haskell in his talk Simple Made Easy. As a ruby/rails programmer (that's all I truly know), I loved his ideas, but didn't understand 2 of them:Using Queues, not Method ChainingRules instead of ConditionalsUsing Queues insteadObviously, in Rails we love method chaining, but I wanted to understand what a Queue would look like in Ruby the way he described it (54:54 in the Video): If thing A calls thing B, you just complected it. You have a when and where thing. A has to know where B is in order to call B. When that happens is whenever that happens is when A does it. Stick a Queue in there.Rules vs ConditionalsHe talks about not using conditionals or switch statements but Rules instead (30:00 in Video).This I simply don't get at all in terms of Ruby. How do I make decisions without using conditionals?Thanks all,Justin <code> ",Queues instead of method chaining and rules instead of conditionals in Ruby
Using a variable value as a hash key in Ruby?," I have a variable id and I want to use it as a key in a hash so that the value assigned to the variable is used as key of the hash.For instance, if I have the variable id = 1 the desired resulting hash would be { 1: 'foo' }.I've tried creating the hash with, But that doesn't work, instead resulting in a hash with the symbol :id to 'foo'.I could have sworn I've done this before but I am completely drawing a blank.  <code>  { id: 'foo'}",Ruby: Creating a hash key and value from a variable in Ruby
Creating a hash key from a variable in Ruby?," I have a variable id and I want to use it as a key in a hash so that the value assigned to the variable is used as key of the hash.For instance, if I have the variable id = 1 the desired resulting hash would be { 1: 'foo' }.I've tried creating the hash with, But that doesn't work, instead resulting in a hash with the symbol :id to 'foo'.I could have sworn I've done this before but I am completely drawing a blank.  <code>  { id: 'foo'}",Ruby: Creating a hash key and value from a variable in Ruby
How to include actionmailer class in rake task," I want to use ActionMailer in my rake task in order to send emails to people at a particular time. I have written a mailer class in app/mailers folder like this: Then I included the following line in my rake task: When I try to run the rake task: I get the following error: I think I have to somehow load the mailer class in my rake task, but I don't have any idea how to do that. Please help. <code>  class AlertsMailer < ActionMailer::Base default from: 'x@y.com' def mail_alert(email_addresses, subject, url) @url = '#{url}' mail(to: email_addresses, subject: 'Alert') do |format| format.html { render '/alerts/list' } end endend AlertsMailer.mail_alert(email_addresses, subject) rake update_db uninitialized constant AlertsMailer",How to include ActionMailer class in rake task?
How to include ActionMailer class in Rake task," I want to use ActionMailer in my rake task in order to send emails to people at a particular time. I have written a mailer class in app/mailers folder like this: Then I included the following line in my rake task: When I try to run the rake task: I get the following error: I think I have to somehow load the mailer class in my rake task, but I don't have any idea how to do that. Please help. <code>  class AlertsMailer < ActionMailer::Base default from: 'x@y.com' def mail_alert(email_addresses, subject, url) @url = '#{url}' mail(to: email_addresses, subject: 'Alert') do |format| format.html { render '/alerts/list' } end endend AlertsMailer.mail_alert(email_addresses, subject) rake update_db uninitialized constant AlertsMailer",How to include ActionMailer class in rake task?
Why cant I (or how an I) save the output of brew doctor with pipes?," I'm not sure just how specific this is, but when I run 'brew doctor' I see some error messages. If I want to save those messages I run brew doctor > brewErrors.txt. I see the errors in my terminal but if I cat brewErrors.txt I just get a file with a few inlines. Is this a more general issue (say of Ruby or some kind of library/method of reporting) or a super narrow one? And for the future, if I ever encounter this how can I work around/fix this? <code> ",Why can't I (or how can I) save the output of brew doctor with pipes?
Why cant I (or how can I) save the output of brew doctor with pipes?," I'm not sure just how specific this is, but when I run 'brew doctor' I see some error messages. If I want to save those messages I run brew doctor > brewErrors.txt. I see the errors in my terminal but if I cat brewErrors.txt I just get a file with a few inlines. Is this a more general issue (say of Ruby or some kind of library/method of reporting) or a super narrow one? And for the future, if I ever encounter this how can I work around/fix this? <code> ",Why can't I (or how can I) save the output of brew doctor with pipes?
How do I construct a given clause in cucumber?," I've been trying to learn about Cucumber in Ruby and I thought that the best way to do that would be to make my own project. However, I'm wondering what constitutes a good ""Given"" clause.As far as I understand, ""Given"" is basically a set up, ""When"" is the function under test, and ""Then"" is the expected result.For example, let's assume I am making a Minecraft scenario based on an entity stepping in lava. My current G-W-T looks like this: However, this ""Given"" step seems fairly 'off'. It doesn't make sense that I should have to be standing next to a block of lava for this scenario to work. Similarly - how would I write (and test) a GWT for a scenario that should always happen - for example, how could I ensure that as long as my entity remains in lava, that it will keep taking damage? I find it hard to write code that will test how long an entity has been standing in lava. How is the system to know how long the entity has been sat in lava? it seems to me that testing that sort of thing would require me almost writing the rest of the world in order to be able to say ""this entity has been in the lava for x seconds, advance the simulation, how much hp have I lost""Thoughts? <code>  Scenario: Take damage when I stand in lava. Given an entity is standing next to a block of lava with 10 health When the entity steps in the block of lava Then the entity should take 2 damage",How would I best express this time-dependent scenario in Cucumber?
How do I set the duration of a rails flash message?," I would like to set the number of seconds a flash notice is shown to the user, before it is automatically dismissed.  <code> ",How do I dismiss a Rails flash message after some duration?
How do I dismiss a Rails flash message after a set duration?," I would like to set the number of seconds a flash notice is shown to the user, before it is automatically dismissed.  <code> ",How do I dismiss a Rails flash message after some duration?
convert ruby date to string without loosing format," I'm trying to convert a Ruby Date object to a string. The format of the date is: Sun, 15 Sep 2013However, when I convert it to a string using #to_s it gives me the following: ""2013-09-15""Instead, I want it to become: ""Sun, 15 Sep 2013"" <code> ",convert ruby date to string without losing format
"Whenever I try to run the program, an error pops up saying ""string literal in condition (on line 10)"". What am I doing wrong?"," Whenever I try to run the program, an error pops up saying ""string literal in condition (on line 10)"". What am I doing wrong? <code>  puts ""Welcome to the best calculator there is. Would you like to (a) calculate the area of a geometric shape or (b) calculate the equation of a parabola? Please enter an 'a' or a 'b' to get started.""response = gets.chompif response == ""a"" or ""A"" puts ""ok.""elsif response == ""b"" or ""B"" puts ""awesome.""else puts ""I'm sorry. I did not get that. Please try again.""end","What does ""string literal in condition"" mean?"
Ruby find_all elements in an array that match a condition," I've an array of hash entries, and want to filter based on a paramater passed into the function.If there are three values in the hash, A, B, and C, I want to do something similar to: find all where A == 'a1' AND B='b2'so for above I get:{A:'a1', B:'b2', C:'c1'} and {A:'a1', B:'b2', C:'c2'} * put if / else statements, like params.has_key? 'B' then do something.* modify my code each time a new type of value is added to the Hash map (say now I have 'D').Note: The key of the hash is a symbol, but the value is a string and I want to do a ""contains"" not ""equals"".I think of it as SQL Select statement with where zero or more '==' clause <code>  data = [{A:'a1', B:'b1', C:'c1'}, {A:'a1', B:'b2', C:'c1'}, {A:'a1', B:'b2', C:'c2'}, {A:'a2', B:'b1', C:'c1'}, {A:'a2', B:'b2', C:'c1'}]data.find_all{ |d| d[:A].include?params[:A] } .find_all{ |d| d[:B].include?params[:B] } .find_all{ |d| d[:C].include?params[:C] }",find_all elements in an array that match a condition?
What is the difference betwee #encoding and #force_encoding in ruby?," I really do not understand the difference between #encode and #force_encoding in Ruby for the String class. I understand that ""kam"".force_encoding(""UTF-8"") will force ""kam"" to be in UTF-8 encoding, but how is #encode(encoding) different?http://ruby-doc.org/core-2.0/String.html#method-i-encoding <code> ",What is the difference between #encode and #force_encoding in ruby?
What is the difference betwee #encode and #force_encoding in ruby?," I really do not understand the difference between #encode and #force_encoding in Ruby for the String class. I understand that ""kam"".force_encoding(""UTF-8"") will force ""kam"" to be in UTF-8 encoding, but how is #encode(encoding) different?http://ruby-doc.org/core-2.0/String.html#method-i-encoding <code> ",What is the difference between #encode and #force_encoding in ruby?
how ActiveRecord::Relation object can call class methods," How can an ActiveRecord::Relation object call class methods? Now we can call : initial_tasks is a class method and we can't call class methods on an object.Project.first.tasks returns an ActiveRecord::Relation object, so how could it be able to call initial_tasks?Please explain. <code>  class Project < ActiveRecord::Base has_many :tasksendclass Task < ActiveRecord::Base belongs_to :project def self.initial_tasks # class methods # here return initial tasks endend Project.first.tasks.initial_tasks # how it works",How can an ActiveRecord::Relation object call class methods
how to find word with the greatest number of repeated letters ruby," My goal is to find the word with greatest number of repeated letters in a given string. For example, ""aabcc ddeeteefef iijjfff"" would return ""ddeeteefef"" because ""e"" is repeated five times in this word and that is more than all other repeating characters.So far this is what I got, but it has many problems and is not complete: The code I have only finds consecutive patterns; if the pattern is interrupted (such as with ""aabaaa"", it counts a three times instead of five). <code>  def LetterCountI(str) s = str.split("" "") i = 0 result = [] t = s[i].scan(/((.)\2+)/).map(&:max) u = t.max { |a, b| a.length <=> b.length } return u.split(//).count end",How to find word with the greatest number of repeated letters
chef libraries or definitions?," Being relatively new to Chef, I am required to create libraries or definitions from existing recipes.There recipes use bash resource, ruby block resource (which notifies another ruby block resource with delayed timing), template resource again which notifies a ruby block etc.What would be the best approach to this? Library or definition? I have read that if I use definition, I won't be able to notify a resource within the definition, does that mean I can notify a resource in a different definition file? I also read that in libraries you cant use the resources directly. If this is true, how can I use a resource within my library? <code> ",Chef libraries or definitions?
converting epoch time with milliseconds to datetime," I have used a ruby script to convert iso time stamp to epoch, the files that I am parsing has following time stamp structure: Since I want to keep milliseconds I used following ruby code to convert it to epoch time: But In python I tried following: But I don't get the original time date time back, I wonder is it related to how I am formatting?  <code>  2009-03-08T00:27:31.807 irb(main):010:0> DateTime.parse('2009-03-08T00:27:31.807').strftime(""%Q"")=> ""1236472051807"" import time time.strftime('%Y-%m-%d %H:%M:%S', time.gmtime(1236472051807)) >>> time.strftime('%Y-%m-%d %H:%M:%S', time.gmtime(1236472051807))'41152-03-29 02:50:07'>>> ",Converting epoch time with milliseconds to datetime
is there something like 'with_indifferent_access' for arrays usable for include??," I try to only use :symbols for key words in my app. I try to strict decide between :symbol => logic or string => UI/language specific But I get some ""values"" (ie. options and so on) per JSON, too, since there are no :symbols in JSON, all my invoked hashes have the ""with_indifferent_access"" attribute.but: is there something equal for array? like that ? edit: added rails to tags <code>  a=['std','elliptic', :cubic].with_indifferent_accessa.include? :std => true",is there something like 'with_indifferent_access' for arrays usable for include?
Reading and writing in JSON," david4dev's answer to this question claims that there are three equivalent ways to convert an object to a JSON string using the json library: and two equivalent ways to convert a JSON string to an object: But looking at the source code, each of them seems to be pretty much different, and there are some differences between them (e.g., 1).What are the differences among them? When to use which? <code>  JSON.dump(object)JSON.generate(object)object.to_json JSON.load(string)JSON.parse(string)",When to use dump vs. generate vs. to_json and load vs. parse in Ruby's JSON lib?
How to unpack a ruby .gem without 'gem unpack' available?, At work I am forced to use an old rubygem version. Upgrading is not possible due to IT department being lazy.Is there a way to unpack a .gem file without gem unpack?Thanks. <code> ,Unpack a ruby .gem without 'gem unpack' available?
How can I use a ruby variable in an inline javascript in haml," I have the following variable in my controller: In my haml view, I tried following, but it doesn't work (since it's using the default .erb syntax): How can I use the @status variable inside my inline JavaScript? <code>  class MyController < ApplicationController def my_method @status = ""status"" endend #app/views/mycontroller/me_method.html.haml:javascript alert(<%=raw @status %>)",How can I use a Ruby variable in an inline JavaScript in haml?
overwrite getter activerecord model rails," I'm trying to overwrite a getter method for an ActiveRecord model. I have an attribute called name in the model Category, and I'd like to be able to do something like this: If name_trans attribute is not nil, then return it, else return name attribute. How would I do this?This should then be called normally like this: <code>  def name name_trans || nameend @category.name",How can I overwrite a getter method in an ActiveRecord model?
Object memory allocation in ruby," I am wondering how memory allocation works in Ruby.In Ruby, we can open a class definition and add more instance variables/methods. In this case, new objects would require more memory than existing instances. How does it internally track memory allocated to an instance?For example, we have the following class definition: We created an instance of MyClass: At this point, m would be allocated some memory. Now, we open the class definition and add another instance variable b. This new method mySecondMethod and instance variable b are also available in the existing instance m of Myclass.Calling mySecondMethod to instantiate and initialize b: How does Ruby internally manage memory? Does it reallocate the memory chunk for instance m, or does it maintain some sort of pointers to the newly allocated memory? <code>  class MyClass def myMethod @a = 5 endend m = MyClass.newm.myMethod class MyClass def mySecondMethod @b = 5 endend m.mySecondMethod",Object memory allocation
how to pluck email from array of users.?," If I do User.all.pluck(:email) then it works fine.But if I do and then this is raising following error which means I cannot use pluck with arrays, so how can we get particular field value from an array of records in just one line like above.I don't want to loop through each record in an array. <code>  arr = Array.newarr = User.all arr.pluck(:email) undefined method `pluck' for #<Array:0x007f4ff8daf3c8>",how to pluck email from array of users
how to pluck email from array of users?," If I do User.all.pluck(:email) then it works fine.But if I do and then this is raising following error which means I cannot use pluck with arrays, so how can we get particular field value from an array of records in just one line like above.I don't want to loop through each record in an array. <code>  arr = Array.newarr = User.all arr.pluck(:email) undefined method `pluck' for #<Array:0x007f4ff8daf3c8>",how to pluck email from array of users
Scope of class vaiable," Setting a class variable @@foo in two classes B and C, where neither is a subclass of the other but they both include a common module A, seems to create @@foo separately for B and C, which A cannot access: But when @@foo is assigned in A, which works as an ancestor to both B and C, the @@foo that B and C access becomes the @@foo of A. What happened to the @@foo of B and C? Are they deleted when any of its ancestor's @@foo is assigned? <code>  module A; endclass B; include A; @@foo = 1 endclass C; include A; @@foo = 2 endmodule A; p @@foo end # => NameError: uninitialized class variable @@foo in Aclass B; p @@foo end # => 1class C; p @@foo end # => 2 module A; @@foo = 3 endclass B; p @@foo end # => 3class C; p @@foo end # => 3",Scope of class variable
deadlock detected witch capybara," I'm trying to pass this spec : This is a standard rails spec using capybara. I am using capybara-webkit for all scenario with javascript. When I'm trying to pass it, sometimes it works, sometimes it mark than there is a missing record in the database and sometime I have this error : I have a lock in a table. This not always the same table.It's better when I do this : Before and after the spec but it is not always working. If I run all my specs in the same file, I does not work.It appends when I was working on a unrelated things. It works with poltergeist.This is my spec_helper file : Here are the gem used : https://github.com/GCorbel/lescollectionneursassocies/blob/master/Gemfile.Any suggestions?For more details, please look at the Github repo : https://github.com/GCorbel/lescollectionneursassocies/. <code>  scenario ""Edit a service"", js: true do service = create_service_for(provider, title: ""First service"") fill_edit_service_form(service) expect(page).to have_css('#price', text: '10,00 $')end Run options: include {:locations=>{""./spec/acceptances/provider_services_spec.rb""=>[31]}}[K 1) Provider Services Edit a service Failure/Error: Unable to find matching line from backtrace ActiveRecord::StatementInvalid: PG::TRDeadlockDetected: ERROR: deadlock detected DETAIL: Process 24164 waits for AccessExclusiveLock on relation 3446991 of database 3446538; blocked by process 24184. Process 24184 waits for AccessShareLock on relation 3446902 of database 3446538; blocked by process 24164. HINT: See server log for query details. : ALTER TABLE ""active_admin_comments"" DISABLE TRIGGER ALL;ALTER TABLE ""provider_service_territory_provideds"" DISABLE TRIGGER ALL;ALTER TABLE ""provider_services"" DISABLE TRIGGER ALL;ALTER TABLE ""provider_divisions"" DISABLE TRIGGER ALL;ALTER TABLE ""provider_profiles"" DISABLE TRIGGER ALL;ALTER TABLE ""provider_service_intervention_level_provideds"" DISABLE TRIGGER ALL;ALTER TABLE ""provider_service_medium_provideds"" DISABLE TRIGGER ALL;ALTER TABLE ""provider_service_service_provideds"" DISABLE TRIGGER ALL;ALTER TABLE ""regions"" DISABLE TRIGGER ALL;ALTER TABLE ""service_formulas"" DISABLE TRIGGER ALL;ALTER TABLE ""region_translations"" DISABLE TRIGGER ALL;ALTER TABLE ""artists"" DISABLE TRIGGER ALL;ALTER TABLE ""admin_users"" DISABLE TRIGGER ALL;ALTER TABLE ""schema_migrations"" DISABLE TRIGGER ALL;ALTER TABLE ""services"" DISABLE TRIGGER ALL;ALTER TABLE ""services_provided"" DISABLE TRIGGER ALL;ALTER TABLE ""territories_provided"" DISABLE TRIGGER ALL;ALTER TABLE ""users"" DISABLE TRIGGER ALL;ALTER TABLE ""countries"" DISABLE TRIGGER ALL;ALTER TABLE ""coupons"" DISABLE TRIGGER ALL;ALTER TABLE ""currencies"" DISABLE TRIGGER ALL;ALTER TABLE ""formulas"" DISABLE TRIGGER ALL;ALTER TABLE ""collector_profiles"" DISABLE TRIGGER ALL;ALTER TABLE ""country_translations"" DISABLE TRIGGER ALL;ALTER TABLE ""images"" DISABLE TRIGGER ALL;ALTER TABLE ""intervention_levels_provided"" DISABLE TRIGGER ALL;ALTER TABLE ""measure_units"" DISABLE TRIGGER ALL;ALTER TABLE ""media_provided"" DISABLE TRIGGER ALL;ALTER TABLE ""messages"" DISABLE TRIGGER ALL;ALTER TABLE ""page_part_translations"" DISABLE TRIGGER ALL;ALTER TABLE ""orders"" DISABLE TRIGGER ALL;ALTER TABLE ""painting_categories"" DISABLE TRIGGER ALL;ALTER TABLE ""page_services"" DISABLE TRIGGER ALL;ALTER TABLE ""page_translations"" DISABLE TRIGGER ALL;ALTER TABLE ""painting_category_translations"" DISABLE TRIGGER ALL;ALTER TABLE ""page_parts"" DISABLE TRIGGER ALL;ALTER TABLE ""pages"" DISABLE TRIGGER ALL;ALTER TABLE ""painting_provenances"" DISABLE TRIGGER ALL;ALTER TABLE ""painting_prices"" DISABLE TRIGGER ALL;ALTER TABLE ""painting_technic_translations"" DISABLE TRIGGER ALL;ALTER TABLE ""painting_technics"" DISABLE TRIGGER ALL;ALTER TABLE ""painting_type_translations"" DISABLE TRIGGER ALL;ALTER TABLE ""period_translations"" DISABLE TRIGGER ALL;ALTER TABLE ""painting_types"" DISABLE TRIGGER ALL;ALTER TABLE ""paintings"" DISABLE TRIGGER ALL;ALTER TABLE ""periods"" DISABLE TRIGGER ALL # -e:1:in `<main>' 1/1 |========================= 100 ==========================>| Time: 00:00:03 Finished in 3.41 seconds1 example, 1 failureFailed examples:rspec ./spec/acceptances/provider_services_spec.rb:29 # Provider Services Edit a service Screenshot: /home/dougui/rails/lescollectionneurs/tmp/capybara/screenshot_2014-02-20-18-22-55.658.pngRandomized with seed 34053 Capybara.reset_sessions!DatabaseCleaner.clean ENV[""RAILS_ENV""] ||= 'test'require 'rubygems'require File.expand_path(""../../config/environment"", __FILE__)require 'rspec/rails'require 'rspec/autorun'require 'capybara/rails'require 'capybara-webkit'require 'database_cleaner'require 'capybara/firebug'require 'capybara-screenshot/rspec'if defined?(Spring) Spring.watch ""#{Rails.root}/spec/factories""else require 'shoulda-matchers'endDir[Rails.root.join(""spec/support/**/*.rb"")].each {|f| require f}RSpec.configure do |config| config.infer_base_class_for_anonymous_controllers = false config.use_transactional_fixtures = false config.order = ""random"" config.include FactoryGirl::Syntax::Methods config.include Warden::Test::Helpers, type: :feature config.include FeatureHelpers, type: :feature config.include Devise::TestHelpers, type: :controller config.include ControllerHelpers, type: :controller config.include EmailSpec::Helpers config.include EmailSpec::Matchers config.before(:suite) do DatabaseCleaner.strategy = :transaction DatabaseCleaner.clean_with(:truncation) end config.before(:each) do if example.metadata[:js] DatabaseCleaner.strategy = :truncation else DatabaseCleaner.start end end config.after(:each) do DatabaseCleaner.clean DatabaseCleaner.strategy = :transaction if example.metadata[:js] endendCapybara.javascript_driver = :webkitinclude ActionDispatch::TestProcessI18n.locale = :frGeocoder.configure(:lookup => :test)Geocoder::Lookup::Test.set_default_stub( [ { 'latitude' => 40.7143528, 'longitude' => -74.0059731, 'address' => 'New York, NY, USA', 'state' => 'New York', 'state_code' => 'NY', 'country' => 'United States', 'country_code' => 'US' } ])",deadlock detected with capybara-webkit
deadlock detected with capybara," I'm trying to pass this spec : This is a standard rails spec using capybara. I am using capybara-webkit for all scenario with javascript. When I'm trying to pass it, sometimes it works, sometimes it mark than there is a missing record in the database and sometime I have this error : I have a lock in a table. This not always the same table.It's better when I do this : Before and after the spec but it is not always working. If I run all my specs in the same file, I does not work.It appends when I was working on a unrelated things. It works with poltergeist.This is my spec_helper file : Here are the gem used : https://github.com/GCorbel/lescollectionneursassocies/blob/master/Gemfile.Any suggestions?For more details, please look at the Github repo : https://github.com/GCorbel/lescollectionneursassocies/. <code>  scenario ""Edit a service"", js: true do service = create_service_for(provider, title: ""First service"") fill_edit_service_form(service) expect(page).to have_css('#price', text: '10,00 $')end Run options: include {:locations=>{""./spec/acceptances/provider_services_spec.rb""=>[31]}}[K 1) Provider Services Edit a service Failure/Error: Unable to find matching line from backtrace ActiveRecord::StatementInvalid: PG::TRDeadlockDetected: ERROR: deadlock detected DETAIL: Process 24164 waits for AccessExclusiveLock on relation 3446991 of database 3446538; blocked by process 24184. Process 24184 waits for AccessShareLock on relation 3446902 of database 3446538; blocked by process 24164. HINT: See server log for query details. : ALTER TABLE ""active_admin_comments"" DISABLE TRIGGER ALL;ALTER TABLE ""provider_service_territory_provideds"" DISABLE TRIGGER ALL;ALTER TABLE ""provider_services"" DISABLE TRIGGER ALL;ALTER TABLE ""provider_divisions"" DISABLE TRIGGER ALL;ALTER TABLE ""provider_profiles"" DISABLE TRIGGER ALL;ALTER TABLE ""provider_service_intervention_level_provideds"" DISABLE TRIGGER ALL;ALTER TABLE ""provider_service_medium_provideds"" DISABLE TRIGGER ALL;ALTER TABLE ""provider_service_service_provideds"" DISABLE TRIGGER ALL;ALTER TABLE ""regions"" DISABLE TRIGGER ALL;ALTER TABLE ""service_formulas"" DISABLE TRIGGER ALL;ALTER TABLE ""region_translations"" DISABLE TRIGGER ALL;ALTER TABLE ""artists"" DISABLE TRIGGER ALL;ALTER TABLE ""admin_users"" DISABLE TRIGGER ALL;ALTER TABLE ""schema_migrations"" DISABLE TRIGGER ALL;ALTER TABLE ""services"" DISABLE TRIGGER ALL;ALTER TABLE ""services_provided"" DISABLE TRIGGER ALL;ALTER TABLE ""territories_provided"" DISABLE TRIGGER ALL;ALTER TABLE ""users"" DISABLE TRIGGER ALL;ALTER TABLE ""countries"" DISABLE TRIGGER ALL;ALTER TABLE ""coupons"" DISABLE TRIGGER ALL;ALTER TABLE ""currencies"" DISABLE TRIGGER ALL;ALTER TABLE ""formulas"" DISABLE TRIGGER ALL;ALTER TABLE ""collector_profiles"" DISABLE TRIGGER ALL;ALTER TABLE ""country_translations"" DISABLE TRIGGER ALL;ALTER TABLE ""images"" DISABLE TRIGGER ALL;ALTER TABLE ""intervention_levels_provided"" DISABLE TRIGGER ALL;ALTER TABLE ""measure_units"" DISABLE TRIGGER ALL;ALTER TABLE ""media_provided"" DISABLE TRIGGER ALL;ALTER TABLE ""messages"" DISABLE TRIGGER ALL;ALTER TABLE ""page_part_translations"" DISABLE TRIGGER ALL;ALTER TABLE ""orders"" DISABLE TRIGGER ALL;ALTER TABLE ""painting_categories"" DISABLE TRIGGER ALL;ALTER TABLE ""page_services"" DISABLE TRIGGER ALL;ALTER TABLE ""page_translations"" DISABLE TRIGGER ALL;ALTER TABLE ""painting_category_translations"" DISABLE TRIGGER ALL;ALTER TABLE ""page_parts"" DISABLE TRIGGER ALL;ALTER TABLE ""pages"" DISABLE TRIGGER ALL;ALTER TABLE ""painting_provenances"" DISABLE TRIGGER ALL;ALTER TABLE ""painting_prices"" DISABLE TRIGGER ALL;ALTER TABLE ""painting_technic_translations"" DISABLE TRIGGER ALL;ALTER TABLE ""painting_technics"" DISABLE TRIGGER ALL;ALTER TABLE ""painting_type_translations"" DISABLE TRIGGER ALL;ALTER TABLE ""period_translations"" DISABLE TRIGGER ALL;ALTER TABLE ""painting_types"" DISABLE TRIGGER ALL;ALTER TABLE ""paintings"" DISABLE TRIGGER ALL;ALTER TABLE ""periods"" DISABLE TRIGGER ALL # -e:1:in `<main>' 1/1 |========================= 100 ==========================>| Time: 00:00:03 Finished in 3.41 seconds1 example, 1 failureFailed examples:rspec ./spec/acceptances/provider_services_spec.rb:29 # Provider Services Edit a service Screenshot: /home/dougui/rails/lescollectionneurs/tmp/capybara/screenshot_2014-02-20-18-22-55.658.pngRandomized with seed 34053 Capybara.reset_sessions!DatabaseCleaner.clean ENV[""RAILS_ENV""] ||= 'test'require 'rubygems'require File.expand_path(""../../config/environment"", __FILE__)require 'rspec/rails'require 'rspec/autorun'require 'capybara/rails'require 'capybara-webkit'require 'database_cleaner'require 'capybara/firebug'require 'capybara-screenshot/rspec'if defined?(Spring) Spring.watch ""#{Rails.root}/spec/factories""else require 'shoulda-matchers'endDir[Rails.root.join(""spec/support/**/*.rb"")].each {|f| require f}RSpec.configure do |config| config.infer_base_class_for_anonymous_controllers = false config.use_transactional_fixtures = false config.order = ""random"" config.include FactoryGirl::Syntax::Methods config.include Warden::Test::Helpers, type: :feature config.include FeatureHelpers, type: :feature config.include Devise::TestHelpers, type: :controller config.include ControllerHelpers, type: :controller config.include EmailSpec::Helpers config.include EmailSpec::Matchers config.before(:suite) do DatabaseCleaner.strategy = :transaction DatabaseCleaner.clean_with(:truncation) end config.before(:each) do if example.metadata[:js] DatabaseCleaner.strategy = :truncation else DatabaseCleaner.start end end config.after(:each) do DatabaseCleaner.clean DatabaseCleaner.strategy = :transaction if example.metadata[:js] endendCapybara.javascript_driver = :webkitinclude ActionDispatch::TestProcessI18n.locale = :frGeocoder.configure(:lookup => :test)Geocoder::Lookup::Test.set_default_stub( [ { 'latitude' => 40.7143528, 'longitude' => -74.0059731, 'address' => 'New York, NY, USA', 'state' => 'New York', 'state_code' => 'NY', 'country' => 'United States', 'country_code' => 'US' } ])",deadlock detected with capybara-webkit
Sort an array of objects by attribute but preserve order," How do I stably sort an array? The value I want to sort by can have a lot of duplicates, and I'm not sure which sort algorithm ruby uses. I'm thinking insertion sort would have worked best for me. Example: Looking for  <code>  a = [[:a, 0], [:b, 1], [:c, 0], [:d, 0]]a.sort_by { |x, y| y } # => [[:a, 0], [:d, 0], [:c, 0], [:b, 1]] [[:a, 0], [:c, 0], [:d, 0], [:b, 1]]",How do I do stable sort?
Ruby: `require` vs. `gem` methods?," What's the difference between the require and gem methods?For example, what's the difference betweenrequire 'minitest' and gem 'minitest'? <code> ",`require` vs. `gem` methods?
How to define a private method in ruby?, Just started to learn Ruby. I'm confused with Ruby's private keyword.Let's say I have code like this Does private only applied to the #greeting or both - #greeting and #farewell? <code>  privatedef greeting random_response :greetingenddef farewell random_response :farewellend,How to define a private method in Ruby?
Determine if running in debug mode using ruby-debug-ide," I use RubyMine to write and debug my Ruby 2.0 code. It uses ruby-debug-ide for that purpose. I want to know if a program is running in debug mode.I know there is the Ruby $DEBUG global variable, but as far as I understand ruby-debug-ide didn't change it, because it didn't use the -d ruby flag.If I debug my file using Rubymine the command executed looks like this: I tried to use ARGV or $0, to determine if the command line contains the string 'rdebug-ide' but ARGV is an empty array and $0 is just '/home/user/file.rb', how can I get the full command line executed by RubyMine? <code>  /home/user/.rvm/rubies/ruby-2.0.0-p353/bin/ruby -e at_exit{sleep(1)};$stdout.sync=true;$stderr.sync=true;load($0=ARGV.shift) /home/user/.rvm/gems/ruby-2.0.0-p353/gems/ruby-debug-ide-0.4.22/bin/rdebug-ide --disable-int-handler --port 37737 --dispatcher-port 47992 -- /home/user/file.rb",Determine if a program is running in debug mode
How to override Homebrew formula's changes to compilation flags," I am debugging a Homebrew formula that is failing due to build variables being clobbered: I would like to preserve the flags that are removed by superenv, removing their replacements (which are added by superenv). I do want to specify architecture and optimization level, and I don't need to compile in links to XML or OpenGL libraries to a command-line app that does not process XML and does not have a graphical interface or renders a three-dimensional layout.Here's my formula's install block: Are there any changes to Ruby environment variables I can make in the install block of a Homebrew formula to prevent original flags from getting clobbered (as well as keep out unnecessary modifications)?What will not work This formula will be shared with others. The formula needs to be self-contained, as far as what settings it enables. I do not want to have to reconfigure and recompile the main Homebrew package manager to preserve flags, as this will require the end user to have to do the same customization to their Homebrew installation. <code>  clang++ called with: -mmacosx-version-min=10.7 -arch i386 -Weverything -O3 -std=c++11 -stdlib=libc++ -lc++ objects/foo.o objects/bar.o -o ../bin/foo_i386superenv removed: -arch i386 -Weverything -O3superenv added: -pipe -w -Os -march=native -isystem/usr/local/include -isystem/usr/include/libxml2 -isystem/System/Library/Frameworks/OpenGL.framework/Versions/Current/Headers -L/usr/local/lib -L/System/Library/Frameworks/OpenGL.framework/Versions/Current/Libraries -Wl,-headerpad_max_install_namessuperenv executed: clang++ -pipe -w -Os -march=native -mmacosx-version-min=10.7 -std=c++11 -stdlib=libc++ -lc++ objects/foo.o objects/bar.o -o ../bin/foo_i386 -isystem/usr/local/include -isystem/usr/include/libxml2 -isystem/System/Library/Frameworks/OpenGL.framework/Versions/Current/Headers -L/usr/local/lib -L/System/Library/Frameworks/OpenGL.framework/Versions/Current/Libraries -Wl,-headerpad_max_install_names def install ENV.deparallelize system 'make all' system 'make install'end","How to override, prevent or revert Homebrew's changes to compilation flags"
capistrano change ssh_options inside task," I trying to run capistrano v.3 task in same stage with diferent ssh_options.my production.rb say: With this configuration capistrano connect with user deploy which is correct for the rest of taks. But I need connect it for one specific task with an_other_user wich is well configured in server.Then my recipe say: When execute: cap production namespace:my_task_with_an_other_usercapistrano make ssh conexion with original :user ""deploy"" (the user declared in production.rb).How can I change the user and/or ssh_options it inside task? <code>  set :stage, :productionset :user, 'deploy'set :ssh_options, { user: 'deploy' } ...tasks with original user...task :my_task_with_an_other_user do set :user, 'an_other_user' set :ssh_options, { user: 'an_other_user' } on roles(:all) do |host| execute :mkdir, '-p', 'mydir' endend...other tasks with original user...",Capistrano 3 change ssh_options inside task
Ruby Regex: Positive lookahead doesn't stop at first occurence," I use the regex on the following data (There is no newline char in the data, I made it look better) to capture the Charset string However, my match ended up being It seems that the positive lookahead did not stop after the first occurrence. Is there a way to make it stop? <code>  (?<=Charset:\s).+(?=<br\/>) <div class=""box_t"">Parameters</div><div class=""box_c"">Charset: i763zLFYKBqVs@nZ8PyO}N9<br/>Input Base: 23<br/>Solution Base: 19<br/>Timelimit: 3.1416 seconds<br/></div> i763zLFYKBqVs@nZ8PyO}N9<br/>Input Base: 23<br/>Solution Base: 19<br/>Timelimit: 3.1416 seconds",Positive lookahead doesn't stop at first occurrence
Positive lookahead doesn't stop at first occurence," I use the regex on the following data (There is no newline char in the data, I made it look better) to capture the Charset string However, my match ended up being It seems that the positive lookahead did not stop after the first occurrence. Is there a way to make it stop? <code>  (?<=Charset:\s).+(?=<br\/>) <div class=""box_t"">Parameters</div><div class=""box_c"">Charset: i763zLFYKBqVs@nZ8PyO}N9<br/>Input Base: 23<br/>Solution Base: 19<br/>Timelimit: 3.1416 seconds<br/></div> i763zLFYKBqVs@nZ8PyO}N9<br/>Input Base: 23<br/>Solution Base: 19<br/>Timelimit: 3.1416 seconds",Positive lookahead doesn't stop at first occurrence
Returning all max/min values," Enumerable#max_by and Enumerable#min_by return one of the relevant elements (presumably the first one) when there are multiple max/min elements in the receiver. For example, the following: returns only 2 (or only 5).Instead, I want to return all max/min elements and in an array. In the example above, it would be [2, 5] (or [5, 2]). What is the best way to get this? <code>  [1, 2, 3, 5].max_by{|e| e % 3}",Returning all maximum or minimum values that can be multiple
"Which is better for Ruby mangement, rbenv or rvm?"," I'm new-ish to Ruby and Rails. I am looking for a purely objective list of features and advantages/disadvantages of each. In an effort to keep preference out of this, please refrain from answering unless you have used all 3 systems.  <code> ","What are the differences between rbenv, rvm, and chruby?"
Check if hash contains any empty fields," I have the following hash and I'm looking for an easy way to check if everything is empty in the hash. Not all values are always visible in the hash so sometimes the hash is without end_date / start_date or anything else. In pseudocode it would like this In this example it means that the hash will be empty at the end of the loop. Kind regards <code>  test=> {""0""=> {""_destroy""=>"""", ""START_DATE""=>"""", ""END_DATE""=>"""", ""EMPLOYER""=>"""", ""JOB_TITEL""=>"""", ""FUNCTIONAL_AREA""=>"""", ""INDUSTRY""=>"""", ""DESCRIPTION_TXT""=>"""", ""COUNTRY""=>"""", ""CITY""=>"""", ""REGION""=>"""", ""CONTRACT_TYPE""=>""""}, ""1""=> {""_destroy""=>"""", ""START_DATE""=>"""", ""END_DATE""=>"""", ""EMPLOYER""=>"""", ""JOB_TITEL""=>"""", ""FUNCTIONAL_AREA""=>"""", ""INDUSTRY""=>"""", ""DESCRIPTION_TXT""=>"""", ""COUNTRY""=>"""", ""CITY""=>"""", ""REGION""=>"""", ""CONTRACT_TYPE""=>""""}, ""2""=> {""_destroy""=>"""", ""START_DATE""=>"""", ""END_DATE""=>"""", ""EMPLOYER""=>"""", ""JOB_TITEL""=>"""", ""FUNCTIONAL_AREA""=>"""", ""INDUSTRY""=>"""", ""DESCRIPTION_TXT""=>"""", ""COUNTRY""=>"""", ""CITY""=>"""", ""REGION""=>"""", ""CONTRACT_TYPE""=>""""}} Start loop-> check if current position contains an empties => if all is empty delete position-> continueend loop",Check if hash contains any empty values
Stack level too deep when using carrierwave versions with sidekiq," I'm trying to use a sidekiq worker, which more or less saves a image file to database (using carrierwave). There are few files to save, which are a keyframes extracted from a video file. That's what that worker is about.My image uploader has a few versions defined and looks as follows: The thing is, when i'm trying to run my Sidekiq Worker, it throws Celluloid::FiberStackError: stack level too deep and the only way to fix that is to remove my version definitions. It works only if there are not any version assigned to the uploader. I have tried moving a save process to another worker or using Carrierwave::Backgrounder but i'm allways getting the same result.Have you any idea what can i do about it?Edit: My stracktrace is: SystemStackError: stack level too deep from /usr/local/rvm/rubies/ruby-2.1.1/lib/ruby/2.1.0/irb/workspace.rb:86 <code>  class KeyframeUploader < CarrierWave::Uploader::Base # ... # Keyframe thumbnail sizes version :small do process resize_to_fill: [180, 180], if: :square? process resize_to_fill: [320, 180], if: :not_square? end version :medium do process resize_to_fill: [460, 460], if: :square? process resize_to_fill: [640, 460], if: :not_square? end version :large do process resize_to_fill: [720, 720], if: :square? process resize_to_fill: [1280, 720], if: :not_square? end private # Checks if image is a square def square? file img = Magick::Image.read(file.path) img[0].columns == img[0].rows end # Oposite to #square? def not_square? file !square? file endend",Stack level too deep when using carrierwave versions
Ruby CSV remove new line," I am opening a CSV file and then converting it to JSON. This is all working fine except the JSON data has \n characters in the string. These are not part of the last element as far as I can tell from printing it and trying to chomp it. When I print the row it does have \n The JSON then looks like this when it is returned How can I remove these new line characters?EDIT:These are CSV::Row objects and do not support string operations like chomp or striptmpfile is in the format <code>  require 'csv'require 'json'def csv_to_json (tmpfile) JSON_ARRAY = Array.new CSV.foreach(tmpfile) do |row| print row[row.length - 1] if row[row.length - 1].chomp! == nil print row end JSON_ARRAY.push(row) end return JSON_ARRAY.to_json end [""field11,field12\n"", ""field21,field22\n""] field11,field21field21,field22",Ruby CSV::Row remove new line
What does /? mean in Ruby?," I just stumbled across this piece of code: What's this ""?/""? I've never seen writing strings this way. Apparently it works for single characters only: What does ? mean? <code>  if source[0] != ?/ source = compute_asset_path(source, options)end $ irb2.0.0p247 :001 > ?/=> ""/"" 2.0.0p247 :001 > ?a => ""a"" 2.0.0p247 :002 > ?fooSyntaxError: (irb):2: syntax error, unexpected '?'",What does ?/ mean in Ruby?
"most elegant way to get the value in an array, minimizing a certain class attribute?"," Say I have the following class: And I have an array of Person objects. Is there a concise, Ruby-like way to get the person with the minimum (or maximum) age? What about sorting them by it? <code>  class Person def initialize(name, age) @name = name @age = age end def get_age return @age endend","What is the most elegant way to get the value in an array, minimizing a certain class attribute?"
How to define hash function for a class including comparable," Imagine a class including comparable like this: How would you implement the hash function such that a.hash == b.hash in this case? In general I'd do: But this does not include pos_x and pos_y. <code>  class Element include Comparable attr_accessor :name, :pos_x, :pos_y def initialize(name, pos_x, pos_y) @name = name @pos_x = pos_x @pos_y = pos_y end def <=>(other) if (@pos_x == other.pos_x) and (@pos_y == other.pos_y) return 0 else return @name <=> other.name end end def eql?(other) self == other endend def hash @name.hashend",How to define hash function for a class including comparable?
Can sidekiq take advantage of multiple cpu cores?," I am new to Sidekiq and use it with Ruby on Amazon EC2 instances to do some work using ImageMagick with images.While running it I realized that every worker runs on the same core. I use EC2 c3.2xlarge machines and they have 8 cores. It shows CPU usage is 15% but one core used 100%, and the others are using 0%.Can Sidekiq use different CPU cores for different workers? If it can, is this inefficiency caused by ImageMagic and how can I make it to use other cores? <code> ",Can Sidekiq take advantage of multiple CPU cores?
how to merge array of hash based same keys in ruby?," How to merge array of hash based on the same keys in ruby?example : How to get result like this? <code>  a = [{:a=>1},{:a=>10},{:b=>8},{:c=>7},{:c=>2}] a = [{:a=>[1, 10]},{:b=>8},{:c=>[7, 2]}]",How to merge array of hash based on the same keys in ruby?
Spliting with empty space in Ruby," In both Ruby and JavaScript I can write expression "" x "".split(/[ ]+/). In JavaScript I get somehow reasonable result ["""", ""x"", """"], but in Ruby (2.0.0) i get ["""", ""x""], which is for me quite counterintuitive. I have problems to understand how regular expressions works in Ruby. Why don't I get the same result as in JavaScript or just [""x""]? <code> ",Splitting with empty space in Ruby
Unique coupon code, My Rails app needs to generate electronic coupons for users. Each coupon given should have a unique coupon code that can be redeemed on our system.For example a coupon for a free burrito. User A receives a coupon for a free burrito and then User B receives a coupon for a free burrito. The 2 coupons should have unique coupon codes.What is the best way to generate a code like this that is not easily forged? I don't want users to have a high success rate of typing in random numbers and redeeming other peoples coupons.I guess thinking about it like a gift card with a unique number on the back is what I am looking for. <code> ,"Generating unique, hard-to-guess ""coupon"" codes"
Time conversion between Ruby on Rails and JavaScript vice versa?, How to convert ruby time to javascript time and vice versa?Ruby on rails : Javascript : <code>  Time.now new Date(),Time conversion between ruby on rails and javascript vice versa?
Why am I getting CSRF detected with Omniauth and Google," I'm getting this OmniAuth::Strategies::OAuth2::CallbackError at /auth/google/callback csrf_detected | CSRF detectedMy code: My callback is returning both code and state. <code>  require 'sinatra'require ""sinatra/json""require ""sinatra/config_file""require 'omniauth-oauth2'require 'omniauth-google-oauth2'use Rack::Loggerconfig_file ""config/app_config.yml""use Rack::Session::Cookie, secret: '5fb7w345y3489f523y4h'configure do enable :sessionsenduse OmniAuth::Builder do provider :google_oauth2, settings.google[:client_id], settings.google[:secret], { :scope => ""userinfo.profile"", :access_type => ""offline"", :prompt => ""select_account consent"", :name => ""google"" }endget '/list' do json get_listendget '/' do %Q|<a href='/auth/google'>Sign in with Google</a>|endget '/auth/:name/callback' do @auth = request.env['omniauth.auth'] @auth.inspectend","""CSRF detected"" with Omniauth and Google"
Why does ruby behave differently when adding methods and submodules to a module?," In the following example, module M is included in class A and, afterwards, re-opened to add a submodule MM, and a method. Then, it is included in class B: Instances of both A and B can access M's method regardless of when they were added, but only B has the method of submodule MM: I think this is inconsistent behaviour and would like to understand why this happens.  <code>  module M def foo; ""foo"" end endclass A include Mendmodule MM def baz; ""baz"" end endmodule M include MM def bar; ""bar"" end endclass B include Mend a = A.newa.fooa.bara.baz # => Error: not definedb = B.newb.foob.barb.baz",Why is adding a method to a module handled differently to adding a submodule?
Why is it different between adding a method or a submodule to a module?," In the following example, module M is included in class A and, afterwards, re-opened to add a submodule MM, and a method. Then, it is included in class B: Instances of both A and B can access M's method regardless of when they were added, but only B has the method of submodule MM: I think this is inconsistent behaviour and would like to understand why this happens.  <code>  module M def foo; ""foo"" end endclass A include Mendmodule MM def baz; ""baz"" end endmodule M include MM def bar; ""bar"" end endclass B include Mend a = A.newa.fooa.bara.baz # => Error: not definedb = B.newb.foob.barb.baz",Why is adding a method to a module handled differently to adding a submodule?
"What are the speed differences (if any) in calling proc, Proc.new and lambda (and stabby lambda if they are different) in ruby"," Procs and lambdas differ with respect to method scoping and the effect of the return keyword. I am rather interested in the performance differences between them. I wrote a test as shown below: The result of this code is shown below. method(:my_method) is the slowest, which is because it checks a look up table for each iteration in the loop.Similarly, another test as below: returns this result: Proc.new is the slowest creation method, which is because we have the overhead of creating an entire object to wrap our proc.I assert that the execution time of the procs and lambdas are the same as one another regardless of their creation method.Why is normal method invocation so much faster than procs and lambdas (1/3 time reduction)?Do people think this is likely to change with different block functions etc.?Are there any other (performance based) reasons to chose between the different approaches? <code>  def time(&block) start = Time.now block.call p ""that took #{Time.now - start}""enddef test(proc) time{(0..10000000).each{|n| proc.call(n)}}enddef test_block(&block) time{(0..10000000).each{|n| block.call(n)}}enddef method_test time{(1..10000000).each{|n| my_method(n)}}endproc1 = Proc.new{|x| x*x}proc2 = proc{|x| x*x}lam1 = lambda{|x| x*x}lam2 = ->x{x*x}def my_method(x) x*xendtest(proc1)test(proc2)test(lam1)test(lam2)test_block{|x| x*x}test(method(:my_method))method_test ""that took 0.988388739""""that took 0.963193172""""that took 0.943111226""""that took 0.950506263""""that took 0.960760843""""that took 1.090146951""""that took 0.644500627"" def test2(&block) time{(0..1000000).each{block.call}}endtest2{Proc.new{|x| x*x}}test2{proc{|x| x*x}}test2{lambda{|x| x*x}}test2{->(x){x*x}} ""that took 0.415290453""""that took 0.378787963""""that took 0.3888118""""that took 0.391414639""","Speed differences between proc, Proc.new, lambda, and stabby lambda"
ruby - how can I select the longest string from an array?," However above [duplicate suggestion] is for multidimensional array, not targeting the simpler case I am posing here.For example if I have: I want to select three as it is the longest string. I tried: but Enumerable#max doesn't return the right result. <code>  'one','two','three','four','five' ['one','two','three','four','five'].select{|char_num| char_num.size.max} ",How can I select the longest string from a Ruby array?
Mysql2::Error: Incorrect string value - Easy Fix," I have a rails application running on production mode, but all of the sudden this error came up today when a user tried to save a record. More details (from production log): Now I saw some solutions that required dropping the databases and recreating it, but I cannot do that.Now mysql shows this: What is wrong and how can I change it so I do not have any problems with any characters?Also: Is this problem solvable with javascript? Convert it before sending it ?Thanks <code>  Mysql2::Error: Incorrect string value Parameters: {""utf8""=>""<9c><93>"" ... Mysql2::Error: Incorrect string value: '\xC5\x99\xC3\xA1k Mysql2::Error: Incorrect string value: '\xC5\x99\xC3\xA1k mysql> show variables like 'char%';+--------------------------+----------------------------+| Variable_name | Value |+--------------------------+----------------------------+| character_set_client | utf8 || character_set_connection | utf8 || character_set_database | latin1 || character_set_filesystem | binary || character_set_results | utf8 || character_set_server | latin1 || character_set_system | utf8 || character_sets_dir | /usr/share/mysql/charsets/ |+--------------------------+----------------------------+8 rows in set (0.04 sec)",Mysql2::Error: Incorrect string value
Can i skip jbuilder files when i generate a scaffold?, When I scaffold I don't want it to generate these files: But how? in my application.rb I have this: <code>  invoke jbuildercreate app/views/tests/index.json.jbuildercreate app/views/tests/show.json.jbuilder config.generators do |g| g.assets false g.helper false g.test_framework nilend,Skip jbuilder files when I generate a scaffold?
How this edit using block," How to refactor this code? I write on Sinatra I need to separate into a separate file my model looped comment This is my migration model comment <code>  <div class=""row""> <div class=""col-xs-3""> <% @user.posts.each do |post| %> <a href=""/posts/<%= post.id %>""><%= post.title %></a><br> <p><%= post.body %></p> <% unless post.comment.blank? %> <% post.comment.each do |comment| %> <p><%= comment.body %></p> <% unless comment.comment.blank? %> <% comment.comment.each do |comment2| %> <p><%= comment2.body %></p> <% unless comment2.comment.blank? %> <% comment2.comment.each do |comment3| %> <p><%= comment3.body %></p> <% end %> <% end %> <% end %> <% end %> <% end %> <% end %> <% end %> </div></div> def up create_table :comments do |t| t.string :body t.integer :post_id t.integer :comment_id t.timestamps end end",How to write partial ERB template in Sinatra?
uninitialized constant OpenSSL::SSL::SSL_OP_SSLv2 (NameError)," When using OpenSSL in C, we set options on the context to remove weak and wounded protocols like SSLv2 and SSLv3. From ssl.h, here is a bitmask of some of the options that are useful: However, I'm having trouble setting them in Ruby: Results in: The Ruby docs for 1.9.3 (and 2.0.0) don't even bother to mention it.How does one set the TLS context options in Ruby?Related: setting SSLContext options in ruby. But there's no way to attach the context to an http when http.use_ssl = true. <code>  #define SSL_OP_NO_SSLv2 0x01000000L#define SSL_OP_NO_SSLv3 0x02000000L#define SSL_OP_NO_TLSv1 0x04000000L#define SSL_OP_NO_TLSv1_2 0x08000000L#define SSL_OP_NO_TLSv1_1 0x10000000L if uri.scheme == ""https"" http.use_ssl = true http.verify_mode = OpenSSL::SSL::VERIFY_PEER http.options = OpenSSL::SSL::SSL_OP_NO_SSLv2 | OpenSSL::SSL::OP_NO_SSLv3 | OpenSSL::SSL::SSL_OP_NO_COMPRESSIONend $ ./TestCert.rb./TestCert.rb:12:in `<main>': uninitialized constant OpenSSL::SSL::SSL_OP_SSL2 (NameError)",How to set TLS context options in Ruby (like OpenSSL::SSL::SSL_OP_NO_SSLv2)
How to set TLS context options in Ruby (like OpenSSL::SSL::SSL_OP_SSLv2)," When using OpenSSL in C, we set options on the context to remove weak and wounded protocols like SSLv2 and SSLv3. From ssl.h, here is a bitmask of some of the options that are useful: However, I'm having trouble setting them in Ruby: Results in: The Ruby docs for 1.9.3 (and 2.0.0) don't even bother to mention it.How does one set the TLS context options in Ruby?Related: setting SSLContext options in ruby. But there's no way to attach the context to an http when http.use_ssl = true. <code>  #define SSL_OP_NO_SSLv2 0x01000000L#define SSL_OP_NO_SSLv3 0x02000000L#define SSL_OP_NO_TLSv1 0x04000000L#define SSL_OP_NO_TLSv1_2 0x08000000L#define SSL_OP_NO_TLSv1_1 0x10000000L if uri.scheme == ""https"" http.use_ssl = true http.verify_mode = OpenSSL::SSL::VERIFY_PEER http.options = OpenSSL::SSL::SSL_OP_NO_SSLv2 | OpenSSL::SSL::OP_NO_SSLv3 | OpenSSL::SSL::SSL_OP_NO_COMPRESSIONend $ ./TestCert.rb./TestCert.rb:12:in `<main>': uninitialized constant OpenSSL::SSL::SSL_OP_SSL2 (NameError)",How to set TLS context options in Ruby (like OpenSSL::SSL::SSL_OP_NO_SSLv2)
array is always greater," I am trying to compare two arrays to ensure that the corresponding values of one is always greater than the other. At this point I am thinking of using inject with an index and return if the comparison fails, like: Is there a better way of doing this? Kinda feeling like Ruby or Rails might already have something like this built-in and I missed it. <code>  a = [2, 3, 4]b = [1, 2, 3]# a[0] > b[0] ... a[x] > b[x] b.each_with_index.inject(true) do |cmp, (element,index)| if element > a[index] do cmp = false return endend",How to check that all elements of one array are greater than their counterparts in a parallel array (in Ruby).
Ruby regular expression for only 2 letters in ruby," I need to create regular expression for 2 and only 2 letters. I understood it has to be the following /[a-z]{2}/i, but it matches any string with 2 or more letters. Here is what I get: Any suggestion? <code>  my_reg_exp = /[a-z]{2}/imy_reg_exp.match('aa') # => #<MatchData ""aa"">my_reg_exp.match('AA') # => #<MatchData ""AA"">my_reg_exp.match('a') # => nilmy_reg_exp.match('aaa') # => #<MatchData ""aa"">",Regular expression for only 2 letters
Making Ruby rNet::HTTP::Get request with cookie," I'd like to open my stackoverflow.com page via ruby.And I'd like to see it as if I am authenticated.I took usr cookie from Google Chrome and created the following snippet: It does output a page, but I'm not authenticated there.Is it possible to make a Net::HTTP::Get request in Ruby with cookie? <code>  require 'net/http'require 'cgi'url = ""http://stackoverflow.com/users/1650525/alex-smolov""uri = URI(url)http = Net::HTTP.new(uri.host, 80)request = Net::HTTP::Get.new(uri.request_uri)cookie = CGI::Cookie.new(""usr"", ""[my cookie is here]"")request['Cookie'] = cookier = http.request(request)puts r.body",Making Ruby Net::HTTP::Get request with cookie
"""errno::eacces... permission denied"" running compass watch"," I just migrated my project files onto a new PC on the D: drive whilst my programs (Git, Node Js, Ruby, etc) are on the C: drive.I have tried to run compass watch after editing a SASS file, but encounter this error: I'm a novice with Ruby at the command line (as I only use it for web development purposes). What do I need to do to allow the permissions?Please let me know if I can provide more information.EDIT:Here's what was returned after running compass watch --trace: I don't know what to make from that though.From doing some reading (https://github.com/chriseppstein/compass/issues/1406) I believe it's something to do with the permissions or PATH for 'Ruby' & 'Ruby Gems' but I don't know what to do to resolve this. <code>  Errno::EACCES on line [""897""] of C: Permission denied - <D:/project_dir/stylesheets/app.css20140323-10532-gziux, D:/project_dir/stylesheets/app.css>Run with --trace to see the full backtrace D:\project_dir>compass watch --trace>>> Change detected at 21:53:53 to: app.scssoverwrite stylesheets/app.cssErrno::EACCES on line [""897""] of C: Permission denied - (D:/project_dir/stylesheets/app.css20140323-14712-11v62k7, D:/project_dir/stylesheets/app.css)C:/Ruby200-x64/lib/ruby/gems/2.0.0/gems/sass-3.2.18/lib/sass/util.rb:897:in `atomic_create_and_write_file'C:/Ruby200-x64/lib/ruby/gems/2.0.0/gems/compass-0.12.4/lib/compass/actions.rb:58:in `write_file' C:/Ruby200-x64/lib/ruby/gems/2.0.0/gems/compass-0.12.4/lib/compass/compiler.rb:143:in `compile' C:/Ruby200-x64/lib/ruby/gems/2.0.0/gems/compass-0.12.4/lib/compass/compiler.rb:118:in `compile_if_required' C:/Ruby200-x64/lib/ruby/gems/2.0.0/gems/compass-0.12.4/lib/compass/compiler.rb:103:in `block (2 levels) in run' C:/Ruby200-x64/lib/ruby/gems/2.0.0/gems/compass-0.12.4/lib/compass/compiler.rb:101:in `each' C:/Ruby200-x64/lib/ruby/gems/2.0.0/gems/compass-0.12.4/lib/compass/compiler.rb:101:in `block in run' C:/Ruby200-x64/lib/ruby/gems/2.0.0/gems/compass-0.12.4/lib/compass/compiler.rb:126:in `timed' C:/Ruby200-x64/lib/ruby/gems/2.0.0/gems/compass-0.12.4/lib/compass/compiler.rb:100:in `run' C:/Ruby200-x64/lib/ruby/gems/2.0.0/gems/compass-0.12.4/lib/compass/commands/watch_project.rb:147:in `recompile' C:/Ruby200-x64/lib/ruby/gems/2.0.0/gems/compass-0.12.4/lib/compass/commands/watch_project.rb:68:in `perform' C:/Ruby200-x64/lib/ruby/gems/2.0.0/gems/compass-0.12.4/lib/compass/commands/base.rb:18:in `execute' C:/Ruby200-x64/lib/ruby/gems/2.0.0/gems/compass-0.12.4/lib/compass/commands/project_base.rb:19:in `execute' C:/Ruby200-x64/lib/ruby/gems/2.0.0/gems/compass-0.12.4/lib/compass/exec/sub_command_ui.rb:43:in `perform!' C:/Ruby200-x64/lib/ruby/gems/2.0.0/gems/compass-0.12.4/lib/compass/exec/sub_command_ui.rb:15:in `run!' C:/Ruby200-x64/lib/ruby/gems/2.0.0/gems/compass-0.12.4/bin/compass:30:in `block in <top (required)>' C:/Ruby200-x64/lib/ruby/gems/2.0.0/gems/compass-0.12.4/bin/compass:44:in `call' C:/Ruby200-x64/lib/ruby/gems/2.0.0/gems/compass-0.12.4/bin/compass:44:in `<top (required)>' C:/Ruby200-x64/bin/compass:23:in `load' C:/Ruby200-x64/bin/compass:23:in `<main>'>>> Compass is polling for changes. Press Ctrl-C to Stop.","""Errno::EACCESS...permission denied"" running compass watch"
Add something to hash value if key exists," I have a Hash in Ruby: It has some key value pairs in it, say: If the hash contains a key 2, then I want to add ""Bananas"" to its value. If the hash doesn't have a key 2, I want to create a new key value pair 2=>""Bananas"".I know I can do this by first checkng whether the hash has the key 2 by using has_key? and then act accordingly. But this requires an if statement and more than one line.So is there a simple, elegant one-liner for achieving this? <code>  hash = Hash.new hash[1] = ""One""hash[2] = ""Two""",Add something to hash value if key exists?
invoking the same rake task twice in rspec," I am trying to test a rake task with rspec, and for that purpose I need to invoke it twice butit is only being invoked once. <code>  it 'first test' do Rake::Task['my_rake_task'].invoke # rake task was processedendit 'second test' do Rake::Task['my_rake_task'].invoke # rake task was NOT processedend",Invoking the same rake task twice in RSpec
Ruby: What is the effect of double-splat on method calls?," With a single splat, we can expand an array into multiple arguments, which is pretty different from passing the array directly: With keyword arguments however, I can't see any difference, since they are just syntactic sugar to hashes: Apart from the nice symmetry, is there any practical reason to use double-splats on method calls? (Note that this is distinct from using them on the method definition) <code>  def foo(a, b = nil, c = nil) aendargs = [1, 2, 3]foo(args) # Evaluates to foo([1, 2, 3]) => [1, 2, 3]foo(*args) # Evaluates to foo(1, 2, 3) => 1 def foo(key:) keyendargs = { key: 'value' }foo(args) # Evaluates to foo(key: 'value') => 'value'foo(**args) # Evaluates to foo(key: 'value') => 'value'",What is the point of using Ruby's double-splat (`**`) in method calls?
ruby equivalent to Python's array[i:] to select all array elements after and including i," I find myself wanting something like Python's ALL of the time these days.The solution always ends up being multi-lined and ugly. I'm wondering what the most elegant solutions out there might be, because mine are not worth showing. <code>  ary = [1,2,3,4,5,6,7,8]ary[2:] #=> [3,4,5,6,7,8]","Ruby equivalent to Python's ""array[i:]"" to select all array elements after i?"
"Ruby equivalent to Python's ""array[i:]"" to select all array elements after and including i?"," I find myself wanting something like Python's ALL of the time these days.The solution always ends up being multi-lined and ugly. I'm wondering what the most elegant solutions out there might be, because mine are not worth showing. <code>  ary = [1,2,3,4,5,6,7,8]ary[2:] #=> [3,4,5,6,7,8]","Ruby equivalent to Python's ""array[i:]"" to select all array elements after i?"
Rails :has_many and :belongs_to," How do I create sample data in my .yml for has_many and belongs_to variables.This is a sample adding these files into a simple rails new lab command in the terminal. I don't really know how to explain this in english. But I hope my code shows enough detail to get the point across.man.rb item.rb men.yml items.yml man_test.rb <code>  class Man < ActiveRecord::Base attr_accessible :name has_many :itemsend class Item < ActiveRecord::Base attr_accessible :name belongs_to :manend one: name: ManOne #items: one, twotwo: name: ManTwo #items: one, two one: name: ItemOnetwo: name: ItemTwo require 'test_helper'class ManTest < ActiveSupport::TestCase def test_man Man.all.each do |man| puts man.name.to_s + "": "" + man.items.to_s end assert true endend",Rails fixtures :has_many and :belongs_to
Ruby Hash in Ruby, I am really used at the following kind of code in Ruby: What is the correspondent data structure in Java? <code>  my_hash = {}my_hash['test'] = 1,Equivalent of Ruby Hash in Java
is the initialise method a built-in method in Ruby?," Is the initialize method a built-in method in Ruby?Why do we have to pass arguments when we create a new object, and why it goes directly to that initialize method? And, can we create a class without an initialize method? <code> ",Is the initialize method a built-in method in Ruby?
how to remove ruby from ubanto," I want to remove Ruby, so I try this. How can I remove this? <code>  sudo apt-get autoremove rubyReading package lists... DoneBuilding dependency tree Reading state information... DonePackage 'ruby' is not installed, so not removed0 upgraded, 0 newly installed, 0 to remove and 534 not upgraded.here@jaskaran:/$ whereis ruby ruby: /usr/bin/ruby /usr/lib/ruby /usr/bin/X11/ruby /usr/share/man/man1/ruby.1.gzhere@jaskaran:/$ ruby -vruby 1.9.3p194 (2012-04-20 revision 35410) [i686-linux]",How to remove Ruby from Ubuntu
how to remove ruby from Ubuntu," I want to remove Ruby, so I try this. How can I remove this? <code>  sudo apt-get autoremove rubyReading package lists... DoneBuilding dependency tree Reading state information... DonePackage 'ruby' is not installed, so not removed0 upgraded, 0 newly installed, 0 to remove and 534 not upgraded.here@jaskaran:/$ whereis ruby ruby: /usr/bin/ruby /usr/lib/ruby /usr/bin/X11/ruby /usr/share/man/man1/ruby.1.gzhere@jaskaran:/$ ruby -vruby 1.9.3p194 (2012-04-20 revision 35410) [i686-linux]",How to remove Ruby from Ubuntu
Rails migration error on running migration," When I do rake db:migrate, I get the following error: How can solve this? <code>  rake aborted!Gem::LoadError: You have already activated rake 10.2.2, but your Gemfile requires rake 10.1.0. Using bundle exec may solve this.",Rails migration error when running migration?
How to apoly a secondary sort for ruby array with reversed sort direction?," I have a ruby array in the format of [[""Anna"",70],[""Billy"",90],[""Billy"",100]]... I know I can apply secondary sort using the following However I want to sort first on Name asc and then sort on Score but descending. How could I achieve this?Thanks <code>  sort_by{ |o| [o.name, o.score]}",How to apply a secondary sort for ruby array with reversed sort direction?
How sort string range values," I want to sort an array of strings representing numerical ranges like the following: Using the sort method I get: I want it like this instead: <code>  b = [""0-5"", ""100-250"", ""5-25"", ""50-100"", ""250-500"", ""25-50""] b.sort # => [""0-5"", ""100-250"", ""25-50"", ""250-500"", ""5-25"", ""50-100""] [""0-5, ""5-25"", ""25-50"", ""50-100"", ""100-250"", ""250-500""]",Sorting range values
How sort string range values?," I want to sort an array of strings representing numerical ranges like the following: Using the sort method I get: I want it like this instead: <code>  b = [""0-5"", ""100-250"", ""5-25"", ""50-100"", ""250-500"", ""25-50""] b.sort # => [""0-5"", ""100-250"", ""25-50"", ""250-500"", ""5-25"", ""50-100""] [""0-5, ""5-25"", ""25-50"", ""50-100"", ""100-250"", ""250-500""]",Sorting range values
CarrierWave File Uploads didn't working in rails," I need to upload image to my filme collection applicationi use carrierwave to do this (follows the railscasts steps)step 1 i add gem 'carrierwave', '~> 0.9' to my Gemfile then run bundlestep 2 rails g uploader image then rails g scaffold filmes name moviestype after rake dbstep 3 rails g migration add_image_to_filmes image:string and then rake dbother step are same as railscastsin my filme modle in my _form.html.erb in show.html.erb problem is it didn't upload any image but film name and other fields are inserting to db.how can i fix this ?need quick help. <code>  attr_accessible :name, :moviestype, :image mount_uploader :image, ImageUploader <%= form_for @filme, :html => {:multipart => true} do |f| %> <% if @filme.errors.any? %> <div id=""error_explanation""> <h2><%= pluralize(@filme.errors.count, ""error"") %> prohibited this filme from being saved:</h2> <ul> <% @filme.errors.full_messages.each do |msg| %> <li><%= msg %></li> <% end %> </ul> </div> <% end %> <div class=""field""> <%= f.label :name %><br> <%= f.text_field :name %> </div> <div class=""field""> <%= f.label :moviestype %><br> <%= f.text_field :moviestype %> </div> <div class=""field""> <br> <%= f.file_field :image %> </div> <div class=""actions""> <%= f.submit %> </div><% end %> <p id=""notice""><%= notice %></p><p> <strong>Name:</strong> <%= @filme.name %></p><p> <strong>Moviestype:</strong> <%= @filme.moviestype %></p><%= image_tag @filme.image_url(:thumb) if @filme.image? %><%= link_to 'Edit', edit_filme_path(@filme) %> |<%= link_to 'Back', filmes_path %>",CarrierWave File Uploads not working in rails
How can show an array several times without repeat code?," I did a query in MySql but is working in Rails and mysql2 gem.Here is the information: The query is working fine without problems and showing this result: -Installed mysql2 gem for rails 2.3.8 -Created the controller: Here is the log: Here is the view (is working fine and without problems but seems to be too long write several times the same code) I tried to use inspect but it shows all the information in one td and not on each td: How can I do to show all this without writing lots of lines?Is it possible to make this in one line? without writing <%= policy[#NUMBER] %>Please somebody can help me with this?I will really appreciate it. <code>  http://sqlfiddle.com/#!2/9adb8/6 UNIT V1 A1 N1 V2 A2 N2 V3 A3 N3 V4 A4 N4 V5 A5 N5 LIFE 2 0 0 1 2 0 0 0 0 0 0 0 0 0 0 ROB 0 1 0 0 1 2 0 0 0 0 0 0 0 0 0 gem install mysql2 -v0.2.6 class PolicyController < ApplicationController def index @result = ActiveRecord::Base.connection.execute(""select distinct @sql := concat('SELECT pb.name as unit,',group_concat(concat('SUM(CASE WHEN p.state =0 AND ce.id=',id,' THEN 1 ELSE 0 END ) AS v',id,',SUM(CASE WHEN p.state =1 AND ce.id=',id,' THEN 1 ELSE 0 END ) AS a',id,',SUM(CASE WHEN p.state =2 AND ce.id=',id,' THEN 1 ELSE 0 END ) AS n',id)),' FROM cia_ensures ce LEFT JOIN policies p on ce.id = p.cia_ensure_id INNER JOIN policy_business_units pb ON pb.id = p.policy_business_unit_id INNER JOIN comercial_areas ca ON ca.id = pb.comercial_area_id AND ca.id=1 Group by p.policy_business_unit_id') from cia_ensures where id in(1,2,3,4,5);"") @result2 = ActiveRecord::Base.connection.execute(""prepare stmt from @sql;"") @result3 = ActiveRecord::Base.connection.execute(""execute stmt;"") endend SQL (0.9ms) select distinct @sql := concat('SELECT pb.name as unit,',group_concat(concat('SUM(CASE WHEN p.state =0 AND ce.id=',id,' THEN 1 ELSE 0 END ) AS v',id,',SUM(CASE WHEN p.state =1 AND ce.id=',id,' THEN 1 ELSE 0 END ) AS a',id,',SUM(CASE WHEN p.state =2 AND ce.id=',id,' THEN 1 ELSE 0 END ) AS n',id)),' FROM cia_ensures ce LEFT JOIN policies p on ce.id = p.cia_ensure_id INNER JOIN policy_business_units pb ON pb.id = p.policy_business_unit_id INNER JOIN comercial_areas ca ON ca.id = pb.comercial_area_id AND ca.id=1 Group by p.policy_business_unit_id') from cia_ensures where id in(1,2,3,4,5);SQL (0.9ms) prepare stmt from @sql;SQL (0.2ms) execute stmt; <table> <% @result3.each do |policy| %> <tr> <td><%= policy[0] %></td> <td><%= policy[1] %></td> <td><%= policy[2] %></td> <td><%= policy[3] %></td> <td><%= policy[4] %></td> <td><%= policy[5] %></td> ... </tr> <%end%> </table> <% @result3.each do |policy| %><tr> <td align=""center""><%= policy.inspect %></td></tr><%end%> ",How can I iterate through an array in rails view?
How can I show an array several times without repeating code?," I did a query in MySql but is working in Rails and mysql2 gem.Here is the information: The query is working fine without problems and showing this result: -Installed mysql2 gem for rails 2.3.8 -Created the controller: Here is the log: Here is the view (is working fine and without problems but seems to be too long write several times the same code) I tried to use inspect but it shows all the information in one td and not on each td: How can I do to show all this without writing lots of lines?Is it possible to make this in one line? without writing <%= policy[#NUMBER] %>Please somebody can help me with this?I will really appreciate it. <code>  http://sqlfiddle.com/#!2/9adb8/6 UNIT V1 A1 N1 V2 A2 N2 V3 A3 N3 V4 A4 N4 V5 A5 N5 LIFE 2 0 0 1 2 0 0 0 0 0 0 0 0 0 0 ROB 0 1 0 0 1 2 0 0 0 0 0 0 0 0 0 gem install mysql2 -v0.2.6 class PolicyController < ApplicationController def index @result = ActiveRecord::Base.connection.execute(""select distinct @sql := concat('SELECT pb.name as unit,',group_concat(concat('SUM(CASE WHEN p.state =0 AND ce.id=',id,' THEN 1 ELSE 0 END ) AS v',id,',SUM(CASE WHEN p.state =1 AND ce.id=',id,' THEN 1 ELSE 0 END ) AS a',id,',SUM(CASE WHEN p.state =2 AND ce.id=',id,' THEN 1 ELSE 0 END ) AS n',id)),' FROM cia_ensures ce LEFT JOIN policies p on ce.id = p.cia_ensure_id INNER JOIN policy_business_units pb ON pb.id = p.policy_business_unit_id INNER JOIN comercial_areas ca ON ca.id = pb.comercial_area_id AND ca.id=1 Group by p.policy_business_unit_id') from cia_ensures where id in(1,2,3,4,5);"") @result2 = ActiveRecord::Base.connection.execute(""prepare stmt from @sql;"") @result3 = ActiveRecord::Base.connection.execute(""execute stmt;"") endend SQL (0.9ms) select distinct @sql := concat('SELECT pb.name as unit,',group_concat(concat('SUM(CASE WHEN p.state =0 AND ce.id=',id,' THEN 1 ELSE 0 END ) AS v',id,',SUM(CASE WHEN p.state =1 AND ce.id=',id,' THEN 1 ELSE 0 END ) AS a',id,',SUM(CASE WHEN p.state =2 AND ce.id=',id,' THEN 1 ELSE 0 END ) AS n',id)),' FROM cia_ensures ce LEFT JOIN policies p on ce.id = p.cia_ensure_id INNER JOIN policy_business_units pb ON pb.id = p.policy_business_unit_id INNER JOIN comercial_areas ca ON ca.id = pb.comercial_area_id AND ca.id=1 Group by p.policy_business_unit_id') from cia_ensures where id in(1,2,3,4,5);SQL (0.9ms) prepare stmt from @sql;SQL (0.2ms) execute stmt; <table> <% @result3.each do |policy| %> <tr> <td><%= policy[0] %></td> <td><%= policy[1] %></td> <td><%= policy[2] %></td> <td><%= policy[3] %></td> <td><%= policy[4] %></td> <td><%= policy[5] %></td> ... </tr> <%end%> </table> <% @result3.each do |policy| %><tr> <td align=""center""><%= policy.inspect %></td></tr><%end%> ",How can I iterate through an array in rails view?
Error while starting rails server: TZInfo," I have created a new application using Ruby on Rails v4.1.0. When attempting to start a server or console on Windows, I am encountering the following error: How can I resolve this error? <code>  $ rails serverBooting WEBrickRails 4.1.0 application starting in development on ....Exitingc:/RailsInstaller/Ruby2.0.0/lib/ruby/gems/2.0.0/gems/tzinfo-1.1.0/lib/tzinfo/data_source.rb:199:in `rescue in create_default_data_source': No timezone data source could be found. To resolve this, either install TZInfo::Data (e.g. by running `gem install tzinfo-data`) or specify a zoneinfo directory using `TZInfo::DataSource.set(:zoneinfo, zoneinfo_path)`.(TZInfo::DataSourceNotFound) from c:/RailsInstaller/Ruby2.0.0/lib/ruby/gems/2.0.0/gems/tzinfo-1.1.0/lib/tzinfo/data_source.rb:196:in `create_default_data_source'",TZInfo::DataSourceNotFound error starting Rails v4.1.0 server on Windows
Error when starting rails server: TZInfo gem," I have created a new application using Ruby on Rails v4.1.0. When attempting to start a server or console on Windows, I am encountering the following error: How can I resolve this error? <code>  $ rails serverBooting WEBrickRails 4.1.0 application starting in development on ....Exitingc:/RailsInstaller/Ruby2.0.0/lib/ruby/gems/2.0.0/gems/tzinfo-1.1.0/lib/tzinfo/data_source.rb:199:in `rescue in create_default_data_source': No timezone data source could be found. To resolve this, either install TZInfo::Data (e.g. by running `gem install tzinfo-data`) or specify a zoneinfo directory using `TZInfo::DataSource.set(:zoneinfo, zoneinfo_path)`.(TZInfo::DataSourceNotFound) from c:/RailsInstaller/Ruby2.0.0/lib/ruby/gems/2.0.0/gems/tzinfo-1.1.0/lib/tzinfo/data_source.rb:196:in `create_default_data_source'",TZInfo::DataSourceNotFound error starting Rails v4.1.0 server on Windows
"Ruby how to shuffle an array, continuous?"," Calling Array#shuffle shuffles an array randomly, but I want to shuffle reproducibly i.e., the same way every time. Is there a method for that? I want to call, for example, shuffle_with_key(123) and get the same result every time. <code> ",How to shuffle an array the same way every time?
"Ruby how to shuffle an array, reproducible?"," Calling Array#shuffle shuffles an array randomly, but I want to shuffle reproducibly i.e., the same way every time. Is there a method for that? I want to call, for example, shuffle_with_key(123) and get the same result every time. <code> ",How to shuffle an array the same way every time?
Rails 4.1 - Spring vs Spork vs Zeus," Now with Spring built-in with rails 4.1, I am curious about why the dev-team chose Spring over the others (Zeus and Spork).Why did they choose Spring? <code> ",Rails 4.1 - Why Spring?
Rails first_or_create method," What does the first_or_create / first_or_create! method do in Rails?According to the documentation, the method ""has no description""... <code> ",Rails first_or_create ActiveRecord method
EOFError (end of file reached) in Ryby on Rails with http.request," I am trying to get json form url : but i get an error :`EOFError (end of file reached): app/controllers/sensors_controller.rb:35:in sensinfo'sensors_controller.rb:35: What am i did wrong? <code>  uri = URI.parse(""http://84.38.185.251:9262/send"")http = Net::HTTP.new(uri.host, uri.port)request = Net::HTTP::Get.new(uri.request_uri)response = http.request(request)response.code # => 301response.body # => The body (HTML, XML, blob, whatever)response[""cache-control""] # => public, max-age=2592000puts response.body response = http.request(request)",EOFError (end of file reached) in Ruby on Rails with http.request
"Ruby Mine complain that ""Cannot switch SDK."" even if the SDK is there and available"," My Ruby Mine 6.0.3 gives the message: I manage ruby environments with rvm. The wanted environment seems to be ok: Not only this, but also Mine seems to access the rvm environments quite well since opening File, Settings i can see: So why can't it switch to the correct environment? If, in the form above, I select it manually, it seems to work fine. But the ""cannot switch..."" message still appears each time I open the project. <code>  Project .ruby-version Settings: Cannot switch SDK. RVM SDK '2.1.1@rails3' wasn't found. rvm gemset listgemsets for ruby-2.1.1 (found in /home/agostino/.rvm/gems/ruby-2.1.1) (default) global rails3 => testproject","Ruby Mine complains that ""Cannot switch SDK."" even if the SDK is there and available"
"How to solve error ""Missing `secret_key_base` for 'production' environment"" on Heroku (Rails 4.1)"," I created a Rails application, using Rails 4.1, from scratch and I am facing a strange problem that I am not able to solve.Every time I try to deploy my application on Heroku I get an error 500: The secret.yml file contains the following configuration: On Heroku I configured the ""SECRET_KEY_BASE"" environment variable with the result of the rake secret command. If I launch heroku config, I can see the variable with the correct name and value.Why am I still getting this error? <code>  Missing `secret_key_base` for 'production' environment, set this value in `config/secrets.yml` secret_key_base: <%= ENV[""SECRET_KEY_BASE""] %>","How to solve error ""Missing `secret_key_base` for 'production' environment"" (Rails 4.1)"
How does gets and gets.chomp in ruby work?," I learned that gets creates a new line and asks the user to input something, and gets.chomp does the same thing except that it does not create a new line. gets must return an object, so you can call a method on it, right? If so, lets name that object returned by gets as tmp, then you can call the chomp method of tmp. But before gets returns tmp, it should print a new line on the screen. So what does chomp do? Does it remove the new line after the gets created it?Another way to re-expound my question is: Are the following actions performed when I call gets.chomp?gets prints a new linegets returns tmptmp.chomp removes the new lineUser inputIs this the right order? <code> ","How to use ""gets"" and ""gets.chomp"" in Ruby"
Rails - Carrierwave process throws no images in this image list ArgumentError," After attempting to implement a process to apply auto_orient! to my images I am getting this error: Carrierwave works fine without the process but throws an error when I try to upload images after adding the process. Here's the process: And here is my posts#create: <code>  ArgumentError (no images in this image list): app/uploaders/image_uploader.rb:36:in `fix_exif_rotation' app/controllers/posts_controller.rb:12:in `create' process :fix_exif_rotation def fix_exif_rotation manipulate! do |image| image = image.auto_orient! end end def create @user = User.find(current_user.id) @post = @user.posts.create(params[:post].permit(:text, :image)) redirect_to user_path(@user) end",Rails - Carrierwave process throws ArgumentError: no images in this image list
How to push seeds.rb to existed rails app (on Heroku)?," I store all my app's data in seeds.rb locally. However, after I pushing everything to Heroku, the app works well, but without any data. I do not want to re-input the mass data again, so does anyone have any ways to help me? <code> ",Heroku: How to push seeds.rb to existing rails app?
How to push seeds.rb to existing rails app (on Heroku)?," I store all my app's data in seeds.rb locally. However, after I pushing everything to Heroku, the app works well, but without any data. I do not want to re-input the mass data again, so does anyone have any ways to help me? <code> ",Heroku: How to push seeds.rb to existing rails app?
Ruby double-splat operator: destructive vs nondestructive," I noticed what I find to be a very surprising behavior with the ** (double-splat) operator in Ruby 2.1.1.When key-value pairs are used before a **hash, the hash remains unmodified; however, when key-value pairs are only used after the **hash, the hash is permanently modified. For comparison, consider the behavior of the single-* operator on arrays: The array remains unchanged throughout.Do we suppose the sometimes-destructive behavior of ** is intentional, or does it look more like a bug?In either case, where is the documentation describing how the ** operator is meant to work?I also asked this question in the Ruby Forum.UPDATEThe bug is fixed in Ruby 2.1.3+. <code>  h = { b: 2 }{ a: 1, **h } # => { a: 1, b: 2 }h # => { b: 2 }{ a: 1, **h, c: 3 } # => { a: 1, b: 2, c: 3 }h # => { b: 2 }{ **h, c: 3 } # => { b: 2, c: 3 }h # => { b: 2, c: 3 } a = [2][1, *a] # => [1, 2]a # => [2][1, *a, 3] # => [1, 2, 3]a # => [2][*a, 3] # => [2, 3]a # => [2]",Double-splat operator destructively modifies hash  is this a Ruby bug?
Ruby bug: double-splat operator destructively modifies hash," I noticed what I find to be a very surprising behavior with the ** (double-splat) operator in Ruby 2.1.1.When key-value pairs are used before a **hash, the hash remains unmodified; however, when key-value pairs are only used after the **hash, the hash is permanently modified. For comparison, consider the behavior of the single-* operator on arrays: The array remains unchanged throughout.Do we suppose the sometimes-destructive behavior of ** is intentional, or does it look more like a bug?In either case, where is the documentation describing how the ** operator is meant to work?I also asked this question in the Ruby Forum.UPDATEThe bug is fixed in Ruby 2.1.3+. <code>  h = { b: 2 }{ a: 1, **h } # => { a: 1, b: 2 }h # => { b: 2 }{ a: 1, **h, c: 3 } # => { a: 1, b: 2, c: 3 }h # => { b: 2 }{ **h, c: 3 } # => { b: 2, c: 3 }h # => { b: 2, c: 3 } a = [2][1, *a] # => [1, 2]a # => [2][1, *a, 3] # => [1, 2, 3]a # => [2][*a, 3] # => [2, 3]a # => [2]",Double-splat operator destructively modifies hash  is this a Ruby bug?
Ruby 2.1 bug: double-splat operator destructively modifies hash," I noticed what I find to be a very surprising behavior with the ** (double-splat) operator in Ruby 2.1.1.When key-value pairs are used before a **hash, the hash remains unmodified; however, when key-value pairs are only used after the **hash, the hash is permanently modified. For comparison, consider the behavior of the single-* operator on arrays: The array remains unchanged throughout.Do we suppose the sometimes-destructive behavior of ** is intentional, or does it look more like a bug?In either case, where is the documentation describing how the ** operator is meant to work?I also asked this question in the Ruby Forum.UPDATEThe bug is fixed in Ruby 2.1.3+. <code>  h = { b: 2 }{ a: 1, **h } # => { a: 1, b: 2 }h # => { b: 2 }{ a: 1, **h, c: 3 } # => { a: 1, b: 2, c: 3 }h # => { b: 2 }{ **h, c: 3 } # => { b: 2, c: 3 }h # => { b: 2, c: 3 } a = [2][1, *a] # => [1, 2]a # => [2][1, *a, 3] # => [1, 2, 3]a # => [2][*a, 3] # => [2, 3]a # => [2]",Double-splat operator destructively modifies hash  is this a Ruby bug?
Ruby bug: double-splat operator destructively modifies hash," I noticed what I find to be a very surprising behavior with the ** (double-splat) operator in Ruby 2.1.1.When key-value pairs are used before a **hash, the hash remains unmodified; however, when key-value pairs are only used after the **hash, the hash is permanently modified. For comparison, consider the behavior of the single-* operator on arrays: The array remains unchanged throughout.Do we suppose the sometimes-destructive behavior of ** is intentional, or does it look more like a bug?In either case, where is the documentation describing how the ** operator is meant to work?I also asked this question in the Ruby Forum.UPDATEThe bug is fixed in Ruby 2.1.3+. <code>  h = { b: 2 }{ a: 1, **h } # => { a: 1, b: 2 }h # => { b: 2 }{ a: 1, **h, c: 3 } # => { a: 1, b: 2, c: 3 }h # => { b: 2 }{ **h, c: 3 } # => { b: 2, c: 3 }h # => { b: 2, c: 3 } a = [2][1, *a] # => [1, 2]a # => [2][1, *a, 3] # => [1, 2, 3]a # => [2][*a, 3] # => [2, 3]a # => [2]",Double-splat operator destructively modifies hash  is this a Ruby bug?
Double-splat operator destructively modifies hash - is this a Ruby bug?," I noticed what I find to be a very surprising behavior with the ** (double-splat) operator in Ruby 2.1.1.When key-value pairs are used before a **hash, the hash remains unmodified; however, when key-value pairs are only used after the **hash, the hash is permanently modified. For comparison, consider the behavior of the single-* operator on arrays: The array remains unchanged throughout.Do we suppose the sometimes-destructive behavior of ** is intentional, or does it look more like a bug?In either case, where is the documentation describing how the ** operator is meant to work?I also asked this question in the Ruby Forum.UPDATEThe bug is fixed in Ruby 2.1.3+. <code>  h = { b: 2 }{ a: 1, **h } # => { a: 1, b: 2 }h # => { b: 2 }{ a: 1, **h, c: 3 } # => { a: 1, b: 2, c: 3 }h # => { b: 2 }{ **h, c: 3 } # => { b: 2, c: 3 }h # => { b: 2, c: 3 } a = [2][1, *a] # => [1, 2]a # => [2][1, *a, 3] # => [1, 2, 3]a # => [2][*a, 3] # => [2, 3]a # => [2]",Double-splat operator destructively modifies hash  is this a Ruby bug?
Difference between exit and abort," The abort documentation says abort will Terminate execution immediately, effectively by calling Kernel.exit(false).What exactly does ""immediately"" mean? What is the difference between abort and exit with non-true status? <code> ",What is the difference between exit and abort?
why do these two different regex's return different results in Ruby based upon position of underscore," I have the following:. I am unsure why the second one with the the underscore at the end behaves differently than the first. How is it being interpreted by RegEx parser to make it different? <code>  [11] pry(main)> ""ab BN123-4.56"".scan(/BN([0-9_\.-]+)/)=> [[""123-4.56""]][12] pry(main)> ""ab BN123-4.56"".scan(/BN([0-9\.-_]+)/)=> [[""123""]]",Why do these two different regex's return different results in Ruby based upon position of underscore
IntelliJ IDEA for non-Java users: What exactly is an SDK?," What exactly is an SDK, in the context of IntelliJ?For the education of non-Java developers of PHP, Ruby or JavaScript applications who prefer IntelliJ IDEA for its Polyglot capabilities, do any knowledgeable IntelliJ IDEA users please have a moment to explain:2. Why is the concept of an SDK (in the context of InteliJ) essential only to Java?As Ryan J writes in his answer below:An SDK (such as Java) can be very big, containing a lot of information and capability. Other SDK's may simply be a set of API's or libraries, and as such, may not be as conducive to being used with an IDE, and could be deemed as ""convenient"" from the perspective of a user that is not familiar with the concept of an SDK in the ""Java"" sense.Update: 1 Year Later. I've edited this question to focus on the simplest most useful answer I've found, and am awarding the correct answer to Ryan J. Simply put: Java is a platform. Platforms have SDKs. PHP, JavaScript, and Ruby are languages, with various available runtime environments not mentioned in this Q&A. This programmer now uses Sublime Text 3 for developing in those languages. At the expense of much processor overhead there were neat features in IntelliJ for refactoring, etc.. but IMO they are no match for having tight regex game.2. What is the ""Ruby SDK"" option if not an SDK?JetBrains support writes:Ruby has SDK for convenience as users may need multiple Ruby/RVM versions. The same applies to Python, multiple different virtualenvs can be defined and a user may need to switch between them (including Remote SDK on the server via SSH).3. What is the ""PHP Interpreter"" option if not an SDK?JetBrains support writes:PHP has no SDK in IDEA/PhpStorm.See http://youtrack.jetbrains.com/issue/WI-22627#comment=27-720859PhpStorm Project Lead Alexey Gopachenko is against the PHP SDK configuration. It would be probably removed or will be available only in IDEA, not sure.In my opinion, this makes a lot of sense. PHP is a language. We can use IDE extensions to better understand that language, but its API is completely exposed by text scripts.Shameless big up my personal favorite PHP workflow, Phundament. This programmer no longer endorses PHP. <code> ",IntelliJ IDEA: What qualifies as an SDK?
"IntelliJ IDEA for non-Java users: What exactly is an SDK, and why does Ruby/Rails qualify but not Node/Express?"," What exactly is an SDK, in the context of IntelliJ?For the education of non-Java developers of PHP, Ruby or JavaScript applications who prefer IntelliJ IDEA for its Polyglot capabilities, do any knowledgeable IntelliJ IDEA users please have a moment to explain:2. Why is the concept of an SDK (in the context of InteliJ) essential only to Java?As Ryan J writes in his answer below:An SDK (such as Java) can be very big, containing a lot of information and capability. Other SDK's may simply be a set of API's or libraries, and as such, may not be as conducive to being used with an IDE, and could be deemed as ""convenient"" from the perspective of a user that is not familiar with the concept of an SDK in the ""Java"" sense.Update: 1 Year Later. I've edited this question to focus on the simplest most useful answer I've found, and am awarding the correct answer to Ryan J. Simply put: Java is a platform. Platforms have SDKs. PHP, JavaScript, and Ruby are languages, with various available runtime environments not mentioned in this Q&A. This programmer now uses Sublime Text 3 for developing in those languages. At the expense of much processor overhead there were neat features in IntelliJ for refactoring, etc.. but IMO they are no match for having tight regex game.2. What is the ""Ruby SDK"" option if not an SDK?JetBrains support writes:Ruby has SDK for convenience as users may need multiple Ruby/RVM versions. The same applies to Python, multiple different virtualenvs can be defined and a user may need to switch between them (including Remote SDK on the server via SSH).3. What is the ""PHP Interpreter"" option if not an SDK?JetBrains support writes:PHP has no SDK in IDEA/PhpStorm.See http://youtrack.jetbrains.com/issue/WI-22627#comment=27-720859PhpStorm Project Lead Alexey Gopachenko is against the PHP SDK configuration. It would be probably removed or will be available only in IDEA, not sure.In my opinion, this makes a lot of sense. PHP is a language. We can use IDE extensions to better understand that language, but its API is completely exposed by text scripts.Shameless big up my personal favorite PHP workflow, Phundament. This programmer no longer endorses PHP. <code> ",IntelliJ IDEA: What qualifies as an SDK?
IntelliJ IDEA for non-Java users: Why does Ruby/Rails qualify as an SDK but not Node/Express? What exactly is an SDK?," What exactly is an SDK, in the context of IntelliJ?For the education of non-Java developers of PHP, Ruby or JavaScript applications who prefer IntelliJ IDEA for its Polyglot capabilities, do any knowledgeable IntelliJ IDEA users please have a moment to explain:2. Why is the concept of an SDK (in the context of InteliJ) essential only to Java?As Ryan J writes in his answer below:An SDK (such as Java) can be very big, containing a lot of information and capability. Other SDK's may simply be a set of API's or libraries, and as such, may not be as conducive to being used with an IDE, and could be deemed as ""convenient"" from the perspective of a user that is not familiar with the concept of an SDK in the ""Java"" sense.Update: 1 Year Later. I've edited this question to focus on the simplest most useful answer I've found, and am awarding the correct answer to Ryan J. Simply put: Java is a platform. Platforms have SDKs. PHP, JavaScript, and Ruby are languages, with various available runtime environments not mentioned in this Q&A. This programmer now uses Sublime Text 3 for developing in those languages. At the expense of much processor overhead there were neat features in IntelliJ for refactoring, etc.. but IMO they are no match for having tight regex game.2. What is the ""Ruby SDK"" option if not an SDK?JetBrains support writes:Ruby has SDK for convenience as users may need multiple Ruby/RVM versions. The same applies to Python, multiple different virtualenvs can be defined and a user may need to switch between them (including Remote SDK on the server via SSH).3. What is the ""PHP Interpreter"" option if not an SDK?JetBrains support writes:PHP has no SDK in IDEA/PhpStorm.See http://youtrack.jetbrains.com/issue/WI-22627#comment=27-720859PhpStorm Project Lead Alexey Gopachenko is against the PHP SDK configuration. It would be probably removed or will be available only in IDEA, not sure.In my opinion, this makes a lot of sense. PHP is a language. We can use IDE extensions to better understand that language, but its API is completely exposed by text scripts.Shameless big up my personal favorite PHP workflow, Phundament. This programmer no longer endorses PHP. <code> ",IntelliJ IDEA: What qualifies as an SDK?
IntelliJ IDEA for non-Java users: Why is Ruby/Rails SDK-worthy but not Node/Express?," What exactly is an SDK, in the context of IntelliJ?For the education of non-Java developers of PHP, Ruby or JavaScript applications who prefer IntelliJ IDEA for its Polyglot capabilities, do any knowledgeable IntelliJ IDEA users please have a moment to explain:2. Why is the concept of an SDK (in the context of InteliJ) essential only to Java?As Ryan J writes in his answer below:An SDK (such as Java) can be very big, containing a lot of information and capability. Other SDK's may simply be a set of API's or libraries, and as such, may not be as conducive to being used with an IDE, and could be deemed as ""convenient"" from the perspective of a user that is not familiar with the concept of an SDK in the ""Java"" sense.Update: 1 Year Later. I've edited this question to focus on the simplest most useful answer I've found, and am awarding the correct answer to Ryan J. Simply put: Java is a platform. Platforms have SDKs. PHP, JavaScript, and Ruby are languages, with various available runtime environments not mentioned in this Q&A. This programmer now uses Sublime Text 3 for developing in those languages. At the expense of much processor overhead there were neat features in IntelliJ for refactoring, etc.. but IMO they are no match for having tight regex game.2. What is the ""Ruby SDK"" option if not an SDK?JetBrains support writes:Ruby has SDK for convenience as users may need multiple Ruby/RVM versions. The same applies to Python, multiple different virtualenvs can be defined and a user may need to switch between them (including Remote SDK on the server via SSH).3. What is the ""PHP Interpreter"" option if not an SDK?JetBrains support writes:PHP has no SDK in IDEA/PhpStorm.See http://youtrack.jetbrains.com/issue/WI-22627#comment=27-720859PhpStorm Project Lead Alexey Gopachenko is against the PHP SDK configuration. It would be probably removed or will be available only in IDEA, not sure.In my opinion, this makes a lot of sense. PHP is a language. We can use IDE extensions to better understand that language, but its API is completely exposed by text scripts.Shameless big up my personal favorite PHP workflow, Phundament. This programmer no longer endorses PHP. <code> ",IntelliJ IDEA: What qualifies as an SDK?
IntelliJ IDEA: Where is the Node.js Project SDK?," What exactly is an SDK, in the context of IntelliJ?For the education of non-Java developers of PHP, Ruby or JavaScript applications who prefer IntelliJ IDEA for its Polyglot capabilities, do any knowledgeable IntelliJ IDEA users please have a moment to explain:2. Why is the concept of an SDK (in the context of InteliJ) essential only to Java?As Ryan J writes in his answer below:An SDK (such as Java) can be very big, containing a lot of information and capability. Other SDK's may simply be a set of API's or libraries, and as such, may not be as conducive to being used with an IDE, and could be deemed as ""convenient"" from the perspective of a user that is not familiar with the concept of an SDK in the ""Java"" sense.Update: 1 Year Later. I've edited this question to focus on the simplest most useful answer I've found, and am awarding the correct answer to Ryan J. Simply put: Java is a platform. Platforms have SDKs. PHP, JavaScript, and Ruby are languages, with various available runtime environments not mentioned in this Q&A. This programmer now uses Sublime Text 3 for developing in those languages. At the expense of much processor overhead there were neat features in IntelliJ for refactoring, etc.. but IMO they are no match for having tight regex game.2. What is the ""Ruby SDK"" option if not an SDK?JetBrains support writes:Ruby has SDK for convenience as users may need multiple Ruby/RVM versions. The same applies to Python, multiple different virtualenvs can be defined and a user may need to switch between them (including Remote SDK on the server via SSH).3. What is the ""PHP Interpreter"" option if not an SDK?JetBrains support writes:PHP has no SDK in IDEA/PhpStorm.See http://youtrack.jetbrains.com/issue/WI-22627#comment=27-720859PhpStorm Project Lead Alexey Gopachenko is against the PHP SDK configuration. It would be probably removed or will be available only in IDEA, not sure.In my opinion, this makes a lot of sense. PHP is a language. We can use IDE extensions to better understand that language, but its API is completely exposed by text scripts.Shameless big up my personal favorite PHP workflow, Phundament. This programmer no longer endorses PHP. <code> ",IntelliJ IDEA: What qualifies as an SDK?
send dynamically generated file as email in Rails (Ruby on Rails)," I am currently allowing users to select certain parameters and based on those, I generate a csv file and push it as a download to the users. e.g. Sometimes as the data becomes too large to compute, I do not want to make the users wait for the file to be pushed as download. I want to send this file as an attachment in an email.I can send an email normally. I can send an already present file as an attachment. I do not want to save this file. I want to email it directly to the user. How do I do that? <code>  send_data <generated csv data>, :disposition => 'attachment' :type => 'text/csv'",send dynamically generated file as email
Failed to allocate memory (No MemoryError) in Ruby," I wrote a simple script that is supposed to read an entire directory and then parse the HTML data into normal script by getting rid off the HTML tags and then write it into one file.I have 8GB memory and also plenty of available virtual memory. When I am doing this I have more than 5GB RAM available. The largest file in the directory is 3.8 GB.The script is The full error code is: Where line#27 is file.each_line do |line| and 33 is source << tmp_src. The failing file is the largest one (3.8 GB). What is the problem here? Why am I getting this error even though I have enough memory? Also how can I fix it? <code>  file_count = 1File.open(""allscraped.txt"", 'w') do |out1| for file_name in Dir[""allParts/*.dat""] do puts ""#{file_name}#:#{file_count}"" file_count +=1 File.open(file_name, ""r"") do |file| source = """" tmp_src = """" counter = 0 file.each_line do |line| scraped_content = line.gsub(/<.*?\/?>/, '') tmp_src << scraped_content if (counter % 10000) == 0 tmp_src = tmp_src.gsub( /\s{2,}/, ""\n"" ) source << tmp_src tmp_src = """" counter = 0 end counter += 1 end source << tmp_src.gsub( /\s{2,}/, ""\n"" ) out1.write(source) break end endend realscraper.rb:33:in `block (4 levels) in <main>': failed to allocate memory (NoMemoryError) from realscraper.rb:27:in `each_line' from realscraper.rb:27:in `block (3 levels) in <main>' from realscraper.rb:23:in `open' from realscraper.rb:23:in `block (2 levels) in <main>' from realscraper.rb:13:in `each' from realscraper.rb:13:in `block in <main>' from realscraper.rb:12:in `open' from realscraper.rb:12:in `<main>'",Failed to allocate memory (No MemoryError) in Ruby?
Installing libv8 and therubyracer gems on Mavericks (with system v8 installation)," I'm trying to install the following gem versions on Maverickslibv8 (3.16.14.3)therubyracer (0.12.1)Obviously therubyracer gems depends on libv8.1) Installing libv8What is libv8? My bit of research seems to indicaite it's some sort of javascript library used by Google Chrome?I was having trouble installing it, but this great post had both my error and a well-explained answer on how to bypass it.So I installed libv8 with It's my understanding that this installs the gem but uses my local system installation of the v8 library instead of... the version that comes with the gem? Either way, it was successful. 2) Installing therubyracerDuring the next step, I had trouble install therubyracer gem. I'm not quite sure what this gem does, just that it's a dependency of a rails project I'm trying to bundle install.It gives me the following error: From what I can gather, I chose to install libv8 using my local V8 library instead of what was provided with libv8, but now that local installation could not be located.How do I check if I do indeed have V8 installed and how do I locate it?I tried a few of the specified flags, none of them seemed to point the gem to the correct installation directoryThis might be a separate topic, but what is extconf.rb? I've seen it in a few places. And what's it trying to do with the gcc compiler in specific?Thanks!!EDIT: I tried this solution of uninstalling libv8 and re-installing via brew install. It was mentioned in a couple of similar questions as well. No luck.I also tried the CC, CXX, and CPP environment variables as described here, although I don't think that has any effect as it was already picking up my gcc v4.6 compiler. <code>  gem install libv8 -- --with-system-v8 Gem::Ext::BuildError: ERROR: Failed to build gem native extension. /Users/jeeves.butler/.rvm/rubies/ruby-1.9.2-p290/bin/ruby extconf.rb checking for main() in -lpthread... yeschecking for main() in -lobjc... yeschecking for v8.h... no*** extconf.rb failed ***Could not create Makefile due to some reason, probably lack ofnecessary libraries and/or headers. Check the mkmf.log file for moredetails. You may need configuration options.Provided configuration options: --with-opt-dir --with-opt-include --without-opt-include=${opt-dir}/include --with-opt-lib --without-opt-lib=${opt-dir}/lib --with-make-prog --without-make-prog --srcdir=. --curdir --ruby=/Users/jeeves.butler/.rvm/rubies/ruby-1.9.2-p290/bin/ruby --with-pthreadlib --without-pthreadlib --with-objclib --without-objclib --enable-debug --disable-debug --with-v8-dir --without-v8-dir --with-v8-include --without-v8-include=${v8-dir}/include --with-v8-lib --without-v8-lib=${v8-dir}/lib/Users/jeeves.butler/.rvm/gems/ruby-1.9.2-p290/gems/libv8-3.16.14.3/ext/libv8/location.rb:50:in 'configure': You have chosen to use the version of V8 found on your system (Libv8::Location::System::NotFoundError)and *not* the one that is bundled with the libv8 rubygem. However,it could not be located. please make sure you have a version ofv8 that is compatible with 3.16.14.3 installed. You mayneed to special --with-v8-dir options if it is in a non-standardlocationthanks,The Mgmt from /Users/jeeves.butler/.rvm/gems/ruby-1.9.2-p290/gems/libv8-3.16.14.3/lib/libv8.rb:7:in `configure_makefile' from extconf.rb:32:in `<main>'extconf failed, exit code 1Gem files will remain installed in /Users/jeeves.butler/.rvm/gems/ruby-1.9.2-p290/gems/therubyracer-0.12.1 for inspection.Results logged to /Users/jeeves.butler/.rvm/gems/ruby-1.9.2-p290/extensions/x86_64-darwin-13/1.9.1/therubyracer-0.12.1/gem_make.out",therubyracer - Gem::Ext::BuildError: ERROR: Failed to build gem native extension
get even and odd hashes from given hash in ruby," I have a hash: From it I want to get two hashes, one containing the pairs whose value (as integer) is positive, the other containing negative values, for example: How can I achieve this using the minimum amount of code? <code>  input = {""a""=>""440"", ""b""=>""-195"", ""c""=>""-163"", ""d""=>""100""} positive = {""a""=>""440"", ""d""=>""100"" } negative = {""b""=>""-195"", ""c""=>""-163"" }",How to split a hash in two hashes based on a condition?
Hot to split a hash in two hashes based on a condition?," I have a hash: From it I want to get two hashes, one containing the pairs whose value (as integer) is positive, the other containing negative values, for example: How can I achieve this using the minimum amount of code? <code>  input = {""a""=>""440"", ""b""=>""-195"", ""c""=>""-163"", ""d""=>""100""} positive = {""a""=>""440"", ""d""=>""100"" } negative = {""b""=>""-195"", ""c""=>""-163"" }",How to split a hash in two hashes based on a condition?
How to get the union/intersect/difference from two arrays of hashes and ignore some keys in ruby," I want to get the union/intersect/difference from two arrays of hashes for example: ... however when I want to only compare based on the names and ignore the ages without needing to remove them from the hashes for example: In this case i'm not getting the results that I want b/c the ages are different. Is there a way to get the union/intersect/difference and ignore the age key?edit: for a better example: Thanks in advance for the help! <code>  array1 = [{:name =>'Guy1', :age => 45},{:name =>'Guy2', :age => 45}]array2 = [{:name =>'Guy1', :age => 45},{:name =>'Guy3', :age => 45}] p array1 - array2 => [{:name=>""Guy2"", :age=>45}]p array2 - array1=> [{:name=>""Guy3"", :age=>45}]p array1 | array2 => [{:name=>""Guy1"", :age=>45}, {:name=>""Guy2"", :age=>45}, {:name=>""Guy3"", :age=>45}] array1 = [{:name =>'Guy1', :age => 45},{:name =>'Guy2', :age => 45}]array2 = [{:name =>'Guy1', :age => 46},{:name =>'Guy3', :age => 45}] array1 - array2 => [{:name=>""Guy1"", :age=>45}, {:name=>""Guy2"", :age=>45}]array2 - array1=> [{:name=>""Guy1"", :age=>46}, {:name=>""Guy3"", :age=>45}]array1 | array2 => [{:name=>""Guy1"", :age=>45}, {:name=>""Guy2"", :age=>45}, {:name=>""Guy1"", :age=>46}, {:name=>""Guy3"", :age=>45}] array1 = [{:name =>'Guy1', :age => 45},{:name =>'Guy2', :age => 45}]array2 = [{:name =>'Guy1'},{:name =>'Guy3'}]p array1 - array2p array2 - array1p array1 | array2p array1 & array2",How to get the union/intersect/difference from two arrays of hashes and ignore some keys
Can you access Ruby variables with outer scope in methods?," I'm learning Ruby and practicing by writing a Caesar cipher. Here's my code so far: It's saying that I don't have access to the rotation variable inside of the encrypt method. NameError: undefined local variable or method 'rotation' for main:Object.From what I understand, rotation is a local variable with outer scope, and should be accessible inside of the encrypt method. Obviously something is wrong with that reasoning, so could someone explain what's wrong? <code>  print ""Enter rotation: ""rotation = gets.chompprint ""Enter string to encrypt: ""string = gets.chompdef encrypt keys = (' '..'z').to_a values = (' '..'z').to_a.rotate(rotation) hash = Hash[keys.zip(values)] chars = string.split('') encrypted_chars = chars.collect { |char| hash[char] } encryptd_string = encrypted_chars.joinendputs ""Encrypted string: "" + encrypt",Can you access Ruby variables with outer scope inside of methods?
Ruby - How to check if two different numbers in an array equal a variable number?," In Ruby, I would like to take an array of numbers, select 2 different numbers, add those 2 numbers together and see weather there equal to a variable x.y'd a variable x. Here is the code I used for example arrayIsEqual (numArray, n) should return true, since 4 + 7 = n(11)How do I get this to work?I don't want it to be 2 random numbers, just any 2 different numbers that add up to n <code>  def arrayIsEqual? (numArray, x) return true if numArray.sample + numArray.sample == x return false if numArray.empty? || numArray.count == 1end numArray = [4,2,7,5]x = 11",Check if the sum of two different numbers in an array equal a variable number?
Check if two different numbers in an array equal a variable number?," In Ruby, I would like to take an array of numbers, select 2 different numbers, add those 2 numbers together and see weather there equal to a variable x.y'd a variable x. Here is the code I used for example arrayIsEqual (numArray, n) should return true, since 4 + 7 = n(11)How do I get this to work?I don't want it to be 2 random numbers, just any 2 different numbers that add up to n <code>  def arrayIsEqual? (numArray, x) return true if numArray.sample + numArray.sample == x return false if numArray.empty? || numArray.count == 1end numArray = [4,2,7,5]x = 11",Check if the sum of two different numbers in an array equal a variable number?
Shorthand for: return if present?, I use variable caching to cut down on execution time like so: Is there a shorthand for return @var if @var ? If its a single line method I use: Can something similar (short) be done with multiline methods? <code>  def some_method return @var if @var [some other code that gets executed only once]end @var ||= [some more code],Shorthand for: return if not nil
rest-client gem: Reading the body of a 400 response?," I am trying to read the body of a 400 response with the rest-client gem. The problem is that rest-client responds to 400 by throwing it as an error, so I can't figure out any way to get the body text.Here's the motivating example. Consider this call to the facebook graph API: If the access_token is expired or invalid, facebook does two things:Returns a 400 Bad Request HTTP responseReturns JSON in the response body with more info, like this: Because 400 response raises an Error, I can't figure out how to get the body of the response. That is, eg, if I run the GET request above in curl or in my browser, I can see the body, but I can't figure out how to access it in restclient. Here's an example: <code>  JSON.parse(RestClient.get(""https://graph.facebook.com/me?fields=id,email,first_name,last_name&access_token=#{access_token}"")) { ""error"": { ""message"": ""The access token could not be decrypted"", ""type"": ""OAuthException"", ""code"": 190 }} begin fb_response = JSON.parse(RestClient.get(""https://graph.facebook.com/me?fields=id,email,first_name,last_name&access_token=#{access_token}""))rescue => e # 400 response puts me here # How can I get the body of the above response now, so I can get details on the error? # eg, was it an expired token? A malformed token? Something else?end",Reading the body of a 400 response?
Assign a rendered partial to an instant variable," In rails 4, I want to render a partial (say the footer) on anywhere of a page. In home_controller.rb, I have this within a class: When I go to the index page and added: Nothing happens. I know I can render within the index page but Im asking if there is a way to assign the rendered link to a variable.Thanks!Edit: I have made a mistake with this question. I have defined: spree_application <code>  def spree_application @test = render :partial => 'spree/shared/footer'end <%= @test %>",Assign a rendered partial to an instance variable
how to convert ruby formatted json string to json hash in ruby?," I want to access json string like hash object so that i can access json using key value like temp[""anykey""]. How to convert ruby formatted json string into json object?I have following json string  <code>  temp = '{""accept""=>""*/*"", ""host""=>""localhost:4567"", ""version""=>""HTTP/1.1"", ""user_agent""=>""curl/7.22.0 (x86_64-pc-linux-gnu) libcurl/7.22.0 OpenSSL/1.0.1 zlib/1.2.3.4 libidn/1.23 librtmp/2.3"", ""http_token""=>""375fe428b1d32787864264b830c54b97""}'",How to convert ruby formatted json string to json hash in ruby?
Updating from rails 4.0 to 4.1," I'm trying to update my Rails 4.0 app to 4.1. The app uses sass-rails, and when I try to update it using bundle update rails I get the following error: Any idea how to work around it or fix it? <code>  Bundler could not find compatible versions for gem ""railties"": In Gemfile: rails (= 4.1) ruby depends on railties (= 4.1.0) ruby sass-rails (~> 4.0) ruby depends on railties (4.1.1)",Updating from Rails 4.0 to 4.1 gives sass-rails railties version conflicts
"How to programmatically remove ""singleton information"" on an instance to make it marshal"," I have created an object that failed to marshal due to a ""singleton metaclass definition executed on runtime"" (Is this description of what the code does correct?).This is performed by following code: What can I do to make the object marshall correct? Is it possible to ""remove"" the singleton components from class X of object instance_of_x? I really need an advise on that because of some of our objects needed to be cached through Marshal.dump serialization mechanism. This code is executed in ruby-1.9.3 but I expect it to behave similar in ruby-2.0 or ruby-2.1 <code>  # define class X that my use singleton class metaprogramming features# through call of method :break_marshalling!class X def break_marshalling! meta_class = class << self self end meta_class.send(:define_method, :method_y) do return end endend# prepare my instance of X nowinstance_of_x = X.new# marshalling fine hereMarshal.dump instance_of_x# break marshalling with metprogramming featuresinstance_of_x.break_marshalling!Marshal.dump instance_of_x# fails with TypeError: singleton can't be dumped ","How to programmatically remove ""singleton information"" on an instance to make it marshal?"
"How to programmatically remove ""singleton information"" on an instance to make it marshal ?"," I have created an object that failed to marshal due to a ""singleton metaclass definition executed on runtime"" (Is this description of what the code does correct?).This is performed by following code: What can I do to make the object marshall correct? Is it possible to ""remove"" the singleton components from class X of object instance_of_x? I really need an advise on that because of some of our objects needed to be cached through Marshal.dump serialization mechanism. This code is executed in ruby-1.9.3 but I expect it to behave similar in ruby-2.0 or ruby-2.1 <code>  # define class X that my use singleton class metaprogramming features# through call of method :break_marshalling!class X def break_marshalling! meta_class = class << self self end meta_class.send(:define_method, :method_y) do return end endend# prepare my instance of X nowinstance_of_x = X.new# marshalling fine hereMarshal.dump instance_of_x# break marshalling with metprogramming featuresinstance_of_x.break_marshalling!Marshal.dump instance_of_x# fails with TypeError: singleton can't be dumped ","How to programmatically remove ""singleton information"" on an instance to make it marshal?"
I can't get the img src using nokogiri and at_css," I'm trying to get the src value of a block of HTML. I am specifically trying to achieve this using the at_css and not using XPath.So far all I'm getting is either nil or a blank string.This is the HTML: The code I have is: Where page.doc is the Nokogiri HTML element. <code>  <div class="""" id=""imageProductContainer""> <a id=""idLinkProductMainImage"" href='URL'> <img id=""productMainImage"" src=""SRC.jpg"" alt=""alt"" title=""A Title"" align=""left"" class=""product_image_productpage_main selectorgadget_selected""> </a> </div> item = page.doc.at_css(""#productMainImage img"").text.strip unless page.doc.at_css(""#productMainImage img"").nil?puts item #prints blankitem = item[""src""]puts item #prints blank",How to get the img src using Nokogiri and at_css
Ruby Array concat versus +," I did small performance test of Ruby's array concat() vs + operation and concat() was way too fast.I however am not clear on why concat() is so fast?Can anyone help here?This is the code I used: <code>  t = Time.nowar = []for i in 1..10000ar = ar + [4,5]endputs ""Time for + "" + (Time.now - t).to_s t = Time.nowar = []for i in 1..10000ar.concat([4,5])endputs ""Time for concat "" + (Time.now - t).to_s ",Ruby Array concat versus + speed?
How does Enumerator.new works with block passed?," I struggle a little bit with understanding how the Enumerator.new method works.Assuming example from documentation: Where's the loop break condition, how does it know how many times loop should to iterate (as it doesn't have any explicit break condition and looks like infinite loop) ? <code>  fib = Enumerator.new do |y| a = b = 1 loop do y << a a, b = b, a + b endendp fib.take(10) # => [1, 1, 2, 3, 5, 8, 13, 21, 34, 55]",How does Enumerator.new work with block passed?
Why does Ruby's method lookup look for Kernel methods first when using send()?," I should be able to call Kernel methods on every object, and method format is defined on Kernel. Why is method_missing invoked on Kernel with the third example? <code>  class A def method_missing(meth, *args, &block) if meth == :foo puts 'ok' elsif meth == :format puts 'ok' end endenda = A.newa.foo # => oka.send(:foo) # => oka.format # => oka.send(:format) # => too few arguments (ArgumentError)",Why is Kernel method looked up only when `send` is used?
Ruby: Why do two strings concatenate," Why does this work in Ruby: I'm unsure as to why the strings were concatenated instead of a syntax error being given.I'm curious as to whether or not this is expected behavior and whether or not it's something the parser is responsible for wrangling (two strings without operators is considered a single string) or the language definition itself is specifying this behavior (implicit concat). <code>  ""foo"" ""bar""# => ""foobar""",Why do two strings separated by space concatenate in Ruby?
Why do two strings concatenate," Why does this work in Ruby: I'm unsure as to why the strings were concatenated instead of a syntax error being given.I'm curious as to whether or not this is expected behavior and whether or not it's something the parser is responsible for wrangling (two strings without operators is considered a single string) or the language definition itself is specifying this behavior (implicit concat). <code>  ""foo"" ""bar""# => ""foobar""",Why do two strings separated by space concatenate in Ruby?
Why are instance variables aren't listed in inspect for the sub classes of built in classes?," Why is there a change in behaviour in inspect when I subclass the built in class. But not seen when I am subclassing a custom one. <code>  class MainErrorendclass AnotherTestError < StandardError def initialize @label_test = ""hey!"" endendclass TestError < MainError def initialize @label_test = ""hey!"" endenda = AnotherTestError.newputs a.inspect # output: #<AnotherTestError: AnotherTestError>t = TestError.newputs t.inspect # output: #<TestError:0x007f99e12409f0 @label_test=""hey!"">",Why aren't instance variables listed in inspect for the subclasses of built-in classes?
Rails using nested resources without parent id," I have a class called Imprintables with nested resources Styles, Brands, Colors, and Sizes. I currently have this in my routes file: Which produces routes like this: I don't want to have all my nested resources tied to 1 specific imprintable. I want to have my routes look like: ...etc.Whats the best way to go about this? <code>  resources :imprintables do resources :styles, :brands, :colors resources :sizes do collection do post 'update_size_order' end endend /imprintables/:imprintable_id/brands/imprintables/:imprintable_id/colors/imprintables/:imprintable_id/styles/imprintables/:impritnable_id/sizes /imprintables/brands/imprintables/styles/imprintables/colors/imprintables/sizes",Using nested resources without the parent ID in Rails
Transliterate cyrillic sybols in string into latin in Ruby?, How do I transliterate Cyrillic symbols in string into Latin in Ruby? I can't find any docs on that. I thought there should be some standard function for that. <code> ,Transliterate cyrillic symbols in string into latin in Ruby?
rspec failing error: expected false to respond to `false?` Help needed," I am running this portion of a test: With this code: I don't know what I'm doing wrong, but my tests keep failing and saying this: I am confused at the error since it seems to be giving the correct answer. I would really appreciate if someone could take a few minutes to tell me what's wrong with my code. Thank you tons.  <code>  describe Dictionary do before do @d = Dictionary.new end it 'can check whether a given keyword exists' do @d.include?('fish').should be_false end class Dictionary def initialize @hash = {} end def add(new_entry) new_entry.class == String ? @hash[new_entry] = nil : new_entry.each { |noun, definition| @hash[noun] = definition} end def entries @hash end def keywords @hash.keys end def include?(word) if @hash.has_key?(word) true else false end end end > 1) Dictionary can check whether a given keyword exists> Failure/Error: @d.include?('fish').should be_false> expected false to respond to `false?`",rspec failing error: expected false to respond to `false?`
Ruby: Why do procs/blocks with splat arguments behave differently than methods and lambdas?," Why do Ruby (2.0) procs/blocks with splat arguments behave differently than methods and lambdas? Here's a confirmation of this behavior, but without explanation:http://makandracards.com/makandra/20641-careful-when-calling-a-ruby-block-with-an-array <code>  def foo (ids, *args) p idsendfoo([1,2,3]) # => [1, 2, 3]bar = lambda do |ids, *args| p idsendbar.call([1,2,3]) # => [1, 2, 3]baz = proc do |ids, *args| p idsendbaz.call([1,2,3]) # => 1def qux (ids, *args) yield ids, *argsendqux([1,2,3]) { |ids, *args| p ids } # => 1",Why do Ruby procs/blocks with splat arguments behave differently than methods and lambdas?
Why do procs/blocks with splat arguments behave differently than methods and lambdas?," Why do Ruby (2.0) procs/blocks with splat arguments behave differently than methods and lambdas? Here's a confirmation of this behavior, but without explanation:http://makandracards.com/makandra/20641-careful-when-calling-a-ruby-block-with-an-array <code>  def foo (ids, *args) p idsendfoo([1,2,3]) # => [1, 2, 3]bar = lambda do |ids, *args| p idsendbar.call([1,2,3]) # => [1, 2, 3]baz = proc do |ids, *args| p idsendbaz.call([1,2,3]) # => 1def qux (ids, *args) yield ids, *argsendqux([1,2,3]) { |ids, *args| p ids } # => 1",Why do Ruby procs/blocks with splat arguments behave differently than methods and lambdas?
Ruby: Strings that compare equal don't find same objects in Hash," I have two strings that appear equal: But when I look up values in a hash where the keys are the strings, they do not return the same thing in Ruby 2.1.0 and Ruby 2.1.1: What explanation is there for this behaviour? Ruby 1.9.3 works as expected. <code>  context = ""Marriott International Worlds Most ADMIRED Lodging Company by FORTUNE for 14th yr. via @FortuneMagazine http://cnnmon.ie/1kcFZSQ""slice_str = context.slice(105,24) # => ""http://cnnmon.ie/1kcFZSQ""str = ""http://cnnmon.ie/1kcFZSQ""slice_str == str # => trueslice_str.eql? str # => true redirects = {""http://cnnmon.ie/1kcFZSQ""=>""""}redirects.key?(slice_str) # => falseredirects.key?(str) # => true",Strings that compare equal don't find same objects in Hash
How to invoke this cryptic Sidekiq method," I came across following method in sidekiq gem. Its just invoked from test_sidekiq.rb. This is the only link I was able to find on SO.Google can't understand . Why doesn't Ruby complain about this encoding?What is the purpose of this method (not much looking at its body)?Why did author @mike-perham use this name? Just for fun, or testing some boundaries? <code>  def self. puts ""Calm down, bro""end","Why is """" with such an encoding used for a method name?"
"Why use such an encoding """" for Ruby method name?"," I came across following method in sidekiq gem. Its just invoked from test_sidekiq.rb. This is the only link I was able to find on SO.Google can't understand . Why doesn't Ruby complain about this encoding?What is the purpose of this method (not much looking at its body)?Why did author @mike-perham use this name? Just for fun, or testing some boundaries? <code>  def self. puts ""Calm down, bro""end","Why is """" with such an encoding used for a method name?"
text_field disabled Ruby on Rials," I have the following code to disable a text_field when a user is not an admin and it is working fine: But when a user is an admin the text_field just disappears. Does anyone know why this is happening and what I have to do? <code>  <div class=""form-group""><%= f.label :nome, ""Genero"" %><%= f.text_field :nome, class: ""form-control"", disabled: true if not is_admin? %></div>",text_field disabled in Ruby on Rails
text_field disabled Ruby on Rails," I have the following code to disable a text_field when a user is not an admin and it is working fine: But when a user is an admin the text_field just disappears. Does anyone know why this is happening and what I have to do? <code>  <div class=""form-group""><%= f.label :nome, ""Genero"" %><%= f.text_field :nome, class: ""form-control"", disabled: true if not is_admin? %></div>",text_field disabled in Ruby on Rails
Impossible to install cocoapods," I have ruby version : ruby 2.1.2p95 (2014-05-08 revision 45877) [x86_64-darwin13.0]When I try install cocoapods i get : Someone to help me solve this? <code>  $ sudo gem install cocoapods -VERROR: Could not find a valid gem 'cocoapods' (>= 0), here is why: Unable to download data from https://rubygems.org/ - no such name (https://api.rubygems.org/latest_specs.4.8.gz)GET https://api.rubygems.org/prerelease_specs.4.8.gz302 Moved TemporarilyGET https://s3.amazonaws.com/production.s3.rubygems.org/prerelease_specs.4.8.gz200 OKGET https://api.rubygems.org/specs.4.8.gz302 Moved TemporarilyGET https://s3.amazonaws.com/production.s3.rubygems.org/specs.4.8.gz200 OKERROR: Possible alternatives: cocoapods",OS X Yosemite : Impossible to install cocoapods
Ruby: How to pick top 5 values from a hash?," I have a hash of ids and their scores, it's something like this: How can I pick the top five and drop the rest ?I'm doing this: Then I do this:only Keys of the @orderedObjects: which gives me: ALL I need is [29, 39, 1, 55, 32] the first 5 indexes. But I'm stuck I don't know how to do this. <code>  @objects = {1=>57, 4=>12, 3=>9, 5=>3, 55=>47, 32=>39, 17=>27, 29=>97, 39=>58} @orderedObject = @objects.sort_by {|k,v| v}.reverse=>[[29, 97], [39, 58], [1, 57], [55, 47], [32, 39], [17, 27], [4, 12], [3, 9], [5, 3]] @keys = @orderedObject.map { |key, value| key } =>[29, 39, 1, 55, 32, 17, 4, 3, 5]",How to pick top 5 values from a hash?
Rails - Export records to downloadable excel file using axlsx gem," I have installed the axlsx gem successfully from https://github.com/randym/axlsxHere is my controller code that I used to create an excel file through this gem.But nothing happen with this code instead it shows me an error uninitialized mime Secondly,I try with this code: But unfortunately, it does not work. Can anyone tell me only hint not a solution to do my task?I have tried third times as per suggestion: It thrown me http 406 error <code>  class Coaches::PaymentsController < ApplicationController before_filter :authenticate_coach! # List all the payments def index if !params[:sort].blank? @payments = Payment.includes(:member).paginate(:page => params[:page], :order => sort_column + "" "" + sort_direction) else @payments = Payment.includes(:member).paginate(:page => params[:page], :order=>'id desc') end respond_to do |format| format.html # Change format to xlsx format.xlsx format.json { render json: @payments } end endend wb = xlsx_package.workbookwb.add_worksheet(name: ""Buttons"") do |sheet| @buttons.each do |button| sheet.add_row [button.name, button.category, button.price] endend def index if !params[:sort].blank? @payments = Payment.includes(:member).paginate(:page => params[:page], :order => sort_column + "" "" + sort_direction) else @payments = Payment.includes(:member).paginate(:page => params[:page], :order=>'id desc') end respond_to do |format| format.xlsx do p = Axlsx::Package.new wb = p.workbook wb.add_worksheet(name: ""Your worksheet name"") do |sheet| sheet.add_row [""First Column"", ""Second"", ""Third""] sheet.add_row [1, 2, 3] sheet.add_row [' preserving whitespace'] end send_data p.to_stream.read, type: ""application/xlsx"", filename: ""filename.xlsx"" end end end",Rails - Export records to downloadable excel file using axlsx gem (Keep MVC)
can't install postgres ruby gem..," I am having trouble install postgres on OSX mavericks. I have tried to follow the numerous guides on Stackoverflow with no luck. I installed the postgres.app and also postgres. I have found my pg_config file and tried this command: But I am still getting this error <code>  gem install pg -- --with-pg-config=/Applications/Postgres.app/Contents/Versions/9.3/bin/pg_config Building native extensions with: '--with-pg-config=/Applications/Postgres.app/Contents/Versions/9.3/bin/pg_config .'This could take a while...ERROR: Error installing pg:ERROR: Failed to build gem native extension./System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/bin/ruby extconf.rb --with-pg-config=/Applications/Postgres.app/Contents/Versions/9.3/bin/pg_config .Using config values from /Applications/Postgres.app/Contents/Versions/9.3/bin/pg_configchecking for libpq-fe.h... yeschecking for libpq/libpq-fs.h... yeschecking for pg_config_manual.h... yeschecking for PQconnectdb() in -lpq... nochecking for PQconnectdb() in -llibpq... nochecking for PQconnectdb() in -lms/libpq... noCan't find the PostgreSQL client library (libpq)*** extconf.rb failed ***Could not create Makefile due to some reason, probably lack of necessarylibraries and/or headers. Check the mkmf.log file for more details. You mayneed configuration options.Provided configuration options:--with-opt-dir--without-opt-dir--with-opt-include--without-opt-include=${opt-dir}/include--with-opt-lib--without-opt-lib=${opt-dir}/lib--with-make-prog--without-make-prog--srcdir=.--curdir--ruby=/System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/bin/ruby--with-pg--without-pg--with-pg-config--with-pg-dir--without-pg-dir--with-pg-include--without-pg-include=${pg-dir}/include--with-pg-lib--without-pg-lib=${pg-dir}/--with-pqlib--without-pqlib--with-libpqlib--without-libpqlib--with-ms/libpqlib--without-ms/libpqlibextconf failed, exit code 1Gem files will remain installed in /Library/Ruby/Gems/2.0.0/gems/pg-0.17.1 for inspection.Results logged to /Library/Ruby/Gems/2.0.0/extensions/universal-darwin-13/2.0.0/pg-0.17.1/gem_make.out",can't install postgres ruby gem
Ruby Enumerator Chaining," In this example, my understanding is that, since each_with_index enumerator is chained to map, map behaves like each_with_index by passing an index inside the block, and returns a new array.For this, I'm not sure how to I interpret it.In this example, I was expecting the the output to be [2], assuming that map is chained to find, and map would return a new array.Also, I see this: Can you let me know how to interpret and understand enumerator chains in Ruby? <code>  [1, 2, 3].each_with_index.map{|i, j| i * j}# => [0, 2, 6] [1, 2, 3].map.each_with_index{|i, j| i * j}# => [0, 2, 6] [1, 2, 3, 4].map.find {|i| i == 2}# => 2 [1, 2, 3, 4].find.each_with_object([]){|i, j| j.push(i)}# => [1][1, 2, 3, 4].each_with_object([]).find{|i, j| i == 3}# => [3, []]",Ruby enumerator chaining
Is there a ruby method to grab the ones/tenths/hundredths place for an integer? Ruby Kata," I'm doing a Ruby kata that asks me to find the sum of the digits of all the numbers from 1 to N (both ends included).So if I had these inputs, I would get these outputs: Now I know in my head what needs to be done. Below is the code that I have to solve this problem: Basically everything is fine until I hit over 10. I'm trying to find some sort of method that could do this. I searched Fixnum and Integer but I haven't found anything that could help me. I want is to find something like ""string""[0] but of course without having to turn the integer back in forth between a string and integer. I know that there is a mathematical relationship there but I'm having a hard time trying to decipher that. Any help would be appreciated. <code>  For N = 10 the sum is 1+2+3+4+5+6+7+8+9+(1+0) = 46For N = 11 the sum is 1+2+3+4+5+6+7+8+9+(1+0)+(1+1) = 48For N = 12 the sum is 1+2+3+4+5+6+7+8+9+(1+0)+(1+1) +(1+2)= 51 def solution(n) if n <= 9 return n if n == 1 solution(n-1) + n elsif n >= 10 45 + (10..n) #How can I grab the ones,tenths, and hundreds? endend",Is there a Ruby method to grab the ones/tenths/hundredths place for an integer?
How to save and retrive HTML tags in database in rails?, I need to safely save/retrieve HTML tags to a database in my rails app. Currently I save HTML without any validation like below: and in the view I use <%=raw @page.desription %>. It works as expected. But I need to know if it is safe or not? <code>  <h2>Sample title</h2> <p>sample description</p>,How to safely save/retrieve HTML tags to database in rails?
How to save and retrieve HTML tags in database in rails?, I need to safely save/retrieve HTML tags to a database in my rails app. Currently I save HTML without any validation like below: and in the view I use <%=raw @page.desription %>. It works as expected. But I need to know if it is safe or not? <code>  <h2>Sample title</h2> <p>sample description</p>,How to safely save/retrieve HTML tags to database in rails?
Zlib::BufError when using progressbar gem," I use the following Ruby snippet to download a 8.9MB file. I want to add the progressbar gem to visualize the download process: However, it now fails with the following error: Meanwhile I also tried the ruby-progressbar gem: It fails with the same error. Here is the associated issue for the problem. <code>  require 'open-uri'require 'net/http'require 'uri'def http_download_no_progress_bar(uri, filename) uri.open(read_timeout: 500) do |file| open filename, 'w' do |io| file.each_line do |line| io.write line end end endend require 'open-uri'require 'progressbar'require 'net/http'require 'uri'def http_download_with_progressbar(uri, filename) progressbar = nil uri.open( read_timeout: 500, content_length_proc: lambda { |total| if total && 0 < total.to_i progressbar = ProgressBar.new(""..."", total) progressbar.file_transfer_mode end }, progress_proc: lambda { |step| progressbar.set step if progressbar } ) do |file| open filename, 'w' do |io| file.each_line do |line| io.write line end end endend /home/user/.rvm/rubies/ruby-2.1.1/lib/ruby/2.1.0/net/http/response.rb:357:in `finish': buffer error (Zlib::BufError)oooooo | 8.0MB 8.6MB/s ETA: 0:00:00 from /home/user/.rvm/rubies/ruby-2.1.1/lib/ruby/2.1.0/net/http/response.rb:357:in `finish' from /home/user/.rvm/rubies/ruby-2.1.1/lib/ruby/2.1.0/net/http/response.rb:262:in `ensure in inflater' from /home/user/.rvm/rubies/ruby-2.1.1/lib/ruby/2.1.0/net/http/response.rb:262:in `inflater' from /home/user/.rvm/rubies/ruby-2.1.1/lib/ruby/2.1.0/net/http/response.rb:274:in `read_body_0' from /home/user/.rvm/rubies/ruby-2.1.1/lib/ruby/2.1.0/net/http/response.rb:201:in `read_body' from /home/user/.rvm/rubies/ruby-2.1.1/lib/ruby/2.1.0/open-uri.rb:328:in `block (2 levels) in open_http' from /home/user/.rvm/rubies/ruby-2.1.1/lib/ruby/2.1.0/net/http.rb:1415:in `block (2 levels) in transport_request' from /home/user/.rvm/rubies/ruby-2.1.1/lib/ruby/2.1.0/net/http/response.rb:162:in `reading_body' from /home/user/.rvm/rubies/ruby-2.1.1/lib/ruby/2.1.0/net/http.rb:1414:in `block in transport_request' from /home/user/.rvm/rubies/ruby-2.1.1/lib/ruby/2.1.0/net/http.rb:1405:in `catch' from /home/user/.rvm/rubies/ruby-2.1.1/lib/ruby/2.1.0/net/http.rb:1405:in `transport_request' from /home/user/.rvm/rubies/ruby-2.1.1/lib/ruby/2.1.0/net/http.rb:1378:in `request' from /home/user/.rvm/rubies/ruby-2.1.1/lib/ruby/2.1.0/open-uri.rb:319:in `block in open_http' from /home/user/.rvm/rubies/ruby-2.1.1/lib/ruby/2.1.0/net/http.rb:853:in `start' from /home/user/.rvm/rubies/ruby-2.1.1/lib/ruby/2.1.0/open-uri.rb:313:in `open_http' from /home/user/.rvm/rubies/ruby-2.1.1/lib/ruby/2.1.0/open-uri.rb:724:in `buffer_open' from /home/user/.rvm/rubies/ruby-2.1.1/lib/ruby/2.1.0/open-uri.rb:210:in `block in open_loop' from /home/user/.rvm/rubies/ruby-2.1.1/lib/ruby/2.1.0/open-uri.rb:208:in `catch' from /home/user/.rvm/rubies/ruby-2.1.1/lib/ruby/2.1.0/open-uri.rb:208:in `open_loop' from /home/user/.rvm/rubies/ruby-2.1.1/lib/ruby/2.1.0/open-uri.rb:149:in `open_uri' from /home/user/.rvm/rubies/ruby-2.1.1/lib/ruby/2.1.0/open-uri.rb:704:in `open' require 'open-uri'require 'ruby-progressbar'require 'net/http'require 'uri'def http_download_with_ruby_progressbar(uri, filename) progressbar = nil uri.open( read_timeout: 500, content_length_proc: lambda { |total| if total && 0 < total.to_i progressbar = ProgressBar.create(title: filename, total: total) end }, progress_proc: lambda { |step| progressbar.progress = step if progressbar } ) do |file| open filename, 'w' do |io| file.each_line do |line| io.write line end end endend",Zlib::BufError when using progressbar/ruby-progressbar gem
"In ruby, what do file descriptor 3 and 4 stand for"," Execute below code in irb (no preceding commands) will get 5. File descriptor number 0, 1, 2 stand for STDIN, STDOUT, STDERR. What do 3 and 4 stand for in ruby?Enviroment: Lubuntu 14.04 64bit, Ruby 1.9.3 under rvm. <code>  f = File.open(""./test.txt"")puts f.fileno",What do file descriptor 3 and 4 stand for in Ruby?
How create api whit rails and grape," I want to do an API for an Android app. When searching, I found {grape}. I'm following this tutorial, but I have a problem launching the Rails server: My directory: and the files: Why am I getting this error? I am using Ruby 1.9.3p484 and Rails-4.0.2. <code>  => Booting WEBrick=> Rails 4.0.2 application starting in development on http://0.0.0.0:80=> Run `rails server -h` for more startup options=> Ctrl-C to shutdown serverExitingC:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activesupport-4.0.2/lib/active_support/dependencies.rb:464:in `load_missing_constant': Unable to autoload constant Usuarios, expected C:/Sites/appCerca/app/api/v1/usuarios.rb to define it (LoadError) app..api....api.rb....v1......root.rb......usuarios.rb #application.rbmodule AppCerca class Application < Rails::Application config.paths.add ""app/api"", glob: ""**/*.rb"" config.autoload_paths += Dir[""#{Rails.root}/app/api/*""] endend#routes.rbAppCerca::Application.routes.draw do mount API::Root => '/' [...]#app/api/root.rbmodule API class Root < Grape::API prefix 'api' mount API::V1::Root endend# app/api/v1/root.rbmodule API module V1 class Root < Grape::API mount API::V1::Usuarios end endend# app/api/v1/usuarios.rbmodule API module V1 class Usuarios < Grape::API version 'v1' format :json resource :usuarios do desc ""Return list of authors"" get do Usuario.all end end end endend","Why am I getting ""Unable to autoload constant"" with Rails and grape?"
"Rails Brick, Rails Composer usable in production"," I'm new to Ruby on Rails and have been seeing people use auto boilerplate generators like Rails Brick or Rails Composer to create boilerplate user-management systems, etc. Coming from a background that doesn't trust auto-generated code, is it good/legitimate practice in Rails to use such systems. Also, I'm working on a project with a startup. Is it fine to use such generators and how widespread a habit is this.P.S. Mods please note that this is not a question asking comparisons/opinions/disputes. I'm curious about the general practice in Rails and how often is this used in production. <code> ",Are Rails Brick or Rails Composer widely used?
"Using FactoryGirl without Rails, ActiveRecord or any Database with RSpec"," I was wondering if anyone knows whether it's possible to use FactoryGirl without any of the aforementioned prerequisites.I would like to use it to generate on-the-fly test data when driving UI automation tests for both mobile and web, and even possibly API.I know I could create some custom helper classes/methods and use getters and setters, etc., but I thought it would be good to use this awesome little gem.I have searched quite extensively and also tried to set up a basic RSpec project (I also tried Cucumber), but to no avail. It still appears that I need classes to be instantiated with the relevant login in order to consume it. Then if I try to call it in a RSpec file... I have also read the docs and tried all the other variants, I just keep getting... which suggests I need a class called User with all the logic. <code>  FactoryGirl.define do factory :user do firstname { Faker::Name.first_name } lastname { Faker::Name.last_name } age { 1 + rand(100) } endend describe... it... user = build_stubbed(:user) endend Failure/Error: user = build_stubbed(:user) NameError: uninitialized constant User","Using FactoryGirl without Rails, ActiveRecord or any database with RSpec"
Token authentication [Ruby on Rails]," Simple code Just wondering how to put an authentication token in php cURL i do it like this Wondering how to do it for Ruby. <code>  require 'net/http'url = URI.parse('get json/other data here [link]')req = Net::HTTP::Get.new(url.to_s)res = Net::HTTP.start(url.host, url.port) {|http| http.request(req)}puts res.body curl_setopt($ch, CURLOPT_HTTPHEADER, array('Authorization: Bearer xxx')); //Bearer token for authentication",Token authentication
Puma phased-restart and postgres idle," I am restarting 8 puma workers via bundle exec pumactl -F config/puma.rb phased-restart what works fine. Now I am getting more and more postgres errors: I found a about 50 of idle postgres processes running: They disappear when I am running bundle exec pumactl -F config/puma.rb stop.After starting the app with bundle exec pumactl -F config/puma.rb start, I get exactly 16 idle processes. (Eight too many in my opinion.)How can I manage these processes better? Thanks for your help!UpdateMy puma.rb: <code>  PG::TRDeadlockDetected: ERROR: deadlock detected postgres: myapp myapp_production 127.0.0.1(59950) idlepostgres: myapp myapp_production 127.0.0.1(60141) idle... environment 'production'daemonize truepidfile 'tmp/pids/puma.pid'state_path 'tmp/pids/puma.state'threads 0, 1bind 'tcp://0.0.0.0:3010'workers 8quiet",PG::TRDeadlockDetected: ERROR: deadlock detected
DateTime.new with timezone," DateTime.new takes a timezone parameter as the 7th argument as an integer offset. However, since I don't easily know whether a given time falls in Daylight or Standard, I would rather do something like: Please advise <code>  DateTime.new(2001,2,3,4,5,6,'-7') DateTime.new(2001,2,3,4,5,6,'Eastern Time (US & Canada)')",DateTime.new with timezone (Rails)
Cannot uninstall rvm using impode command," I am trying to uninstall rvm on mac, when I type the command rvm implode nothing happens, it doesn't display the message Are you SURE you wish for rvm to implode?It just displays Psychologist intervened, cancelling implosion, crisis avoided :)When I searched I found that this message is displayed when you cancel the implode, the point is I am not getting a chance to cancel it, I just type rvm implode then enter and I get this message.Is there something wrong in what I am doing here? <code> ",Cannot uninstall rvm using implode command
Rails 4 giving 'uninitialized constant' error on controller with acronym name within module/namespace," I'm trying to create this controller in Rails 4: In my initializers/inflections.rb file, I've defined the acronym: My routes.rb file has: And my controller is defined as follows in app/controllers/admin/edms_controller.rb: When I try to access /admin/edms, I get the following error: What I've found so far:If I rename it to Admin::EdmsController and remove the inflection definitions (i.e. everything the same except not an acronym), it worksIf I move the whole thing out of the admin namespace into the root of my app (i.e. EDMsController, accessed via /edms), it worksIt's also worth noting that I have other controllers and resources in the admin namespace which work correctly.So it seems I can have an acronym controller, or a controller within a namespace, but not both.Any suggestions? <code>  Admin::EDMsController ActiveSupport::Inflector.inflections(:en) do |inflect| inflect.acronym 'EDMs' inflect.acronym 'EDM'end namespace :admin do # ... some other resources ... resources :edmsend class Admin::EDMsController < Admin::AdminControllerend uninitialized constant Admin::EDMsController",Rails 4 - Acronym Controller Within a Namespace Giving 'Uninitialized Constant' Error
RSPEC any_instance deprecation: how to fix it?," In my Rails project I'm using rspec-mocks using any_instance but I want to avoid this deprecation message:Using any_instance from rspec-mocks' old :should syntax without explicitly enabling the syntax is deprecated. Use the new :expect syntax or explicitly enable :should instead.Here is my specs: Here is my controller: I'd like to use the new :expect syntax but I can't find how to use it properly.I'm using RSpec 3.0.2. <code>  describe ("".create"") do it 'should return error when...' do User.any_instance.stub(:save).and_return(false) post :create, user: {name: ""foo"", surname: ""bar""}, format: :json expect(response.status).to eq(422) endend def create @user = User.create(user_params) if @user.save render json: @user, status: :created, location: @user else render json: @user.errors, status: :unprocessable_entity endend",RSpec any_instance deprecation: how to fix it?
How can I use the same name? After i delete raila App, I'm new to ROR.How can I use the same App name after I delete my rails App?Following are the actions I performed. Step #6 is my problem.1 - Environment 2 - Create rails App : 3 - Create model : 4 - Delete rails App : 5 - Re-Create rails App : 6 - Re-Create model : <code>  - OS : Ubuntu 12.04.4 - ruby : 2.1.1p76 - rails : 4.1.2 - DB : SQLite rails new myApp=> OK rails generate model mytable name:string=> OK. rm -rf myApp=> OK rails new myApp => OK rails generate model mytable name:string=> Not OK! waiting for infinite time,"""rails generate model"" hangs"
How can I use the same model name? After I delete rails App, I'm new to ROR.How can I use the same App name after I delete my rails App?Following are the actions I performed. Step #6 is my problem.1 - Environment 2 - Create rails App : 3 - Create model : 4 - Delete rails App : 5 - Re-Create rails App : 6 - Re-Create model : <code>  - OS : Ubuntu 12.04.4 - ruby : 2.1.1p76 - rails : 4.1.2 - DB : SQLite rails new myApp=> OK rails generate model mytable name:string=> OK. rm -rf myApp=> OK rails new myApp => OK rails generate model mytable name:string=> Not OK! waiting for infinite time,"""rails generate model"" hangs"
Adding Enumeration mixin at the class-level in Ruby," I'm using postgres schemas in my Rails app so there's no clear way to query across all companies (for our own analytics). I'd like to implement each method that iterates over all the companies and switches the postgres schema appropriately.I'd like to be able to call: but I'd also like to get some of the other Enumerable methods like collect in this example of getting all managers across all companies: Currently I have this which works well but how do I get the Enumerable mixin at the class-level not the instance level.i.e., when include Enumerable is in the class, Enumerable methods get called like but I want to call and have it use I feel like the answer is obvious but my meta-programming foo is weak this morning. <code>  Company.each do |company| # do something in the context of each companyend Company.collect do |company| Users.managersend class Company < ActiveRecord::Base # ... def self.each(&block) Company.all.each do |company| if Schemas.include? company.subdomain # this changes to that company's schema so all queries are scoped Apartment::Database.switch company.subdomain yield company if block_given? end end end company = Company.new# which might iterate over the contents (users?) in a companycompany.collect {|u| u} # iterate over all companies and collect the managersCompany.collect {|c| User.managers} Company.each",Adding Enumerable mixin at the class-level in Ruby
Ruby: Colon before vs after," When using Ruby, I keep getting mixed up with the :.Can someone please explain when I'm supposed to use it before the variable name, like :name, and when I'm supposed to use it after the variable like name:?An example would be sublime. <code> ",Ruby: colon before vs after
RSPEC 3.0.2 'find-formatter' error," I am trying to run rspec only for Ruby (not Rails), for a simple Ruby file. I'm following Tut+ TDD Testing with Ruby.I have a competition directory with a lib folder and spec folder. When I run rspec, I got this error. I could've sworn the rspec work before. I don't know what happened. My competition_spec.rb My rvm default Ruby version is 1.9.1 on Mac OSX 10.9.4. <code>  lib competition.rb team.rb spec competition_spec.rb competition :> rspec spec/Users/akh88/.rvm/gems/ruby-1.9.3-p547/gems/rspec-core-> 3.0.2/lib/rspec/core/formatters.rb:167:in `find_formatter': Formatter 'nested' unknown - maybe you meant 'documentation' or 'progress'?. (ArgumentError) require_relative ""../lib/competiiton.rb"" require_relative ""../lib/team.rb"" describe Competition do let(:competition) {Competition.new} let(:team) {Team.new} context ""having no questions"" do before { competition.questions = [] } it ""doesn't accept any teams"" do expect do team.enter_competition(competition) end.to raise_error Competition::Closed end endend",RSpec can't find nested formatter
"RSPEC 3.0.2 error, cannot run rspec on command line"," I am trying to run rspec only for Ruby (not Rails), for a simple Ruby file. I'm following Tut+ TDD Testing with Ruby.I have a competition directory with a lib folder and spec folder. When I run rspec, I got this error. I could've sworn the rspec work before. I don't know what happened. My competition_spec.rb My rvm default Ruby version is 1.9.1 on Mac OSX 10.9.4. <code>  lib competition.rb team.rb spec competition_spec.rb competition :> rspec spec/Users/akh88/.rvm/gems/ruby-1.9.3-p547/gems/rspec-core-> 3.0.2/lib/rspec/core/formatters.rb:167:in `find_formatter': Formatter 'nested' unknown - maybe you meant 'documentation' or 'progress'?. (ArgumentError) require_relative ""../lib/competiiton.rb"" require_relative ""../lib/team.rb"" describe Competition do let(:competition) {Competition.new} let(:team) {Team.new} context ""having no questions"" do before { competition.questions = [] } it ""doesn't accept any teams"" do expect do team.enter_competition(competition) end.to raise_error Competition::Closed end endend",RSpec can't find nested formatter
How to get rspec spec to not show db queries and just show dots?," rspec spec used to just output the dots.I was getting a deprecation warning when I pushed to Heroku and recently added the rails_12factor gem to get around it. Now however I get this verbose db output for each transaction when running specs locally.That is a great option when I need it otherwise it is a lot of unneeded and distracting output. So I would like an option that will use it for Heroku but not locally.Note this is not addressed by using the formatter, e.g. Also, if there is an error, with this level of verbosity, the error nearly always scrolls off the current page... <code>  ruby: 2.0rails: 3.2.17rspec: 2.14.8Database: mysql rspec spec -fd 09:50:39 durrantm Castle2012 /home/durrantm/Dropnot/_/rails_apps/linker 74093480_wire_up_verify_code$ rspec spec/models/link_spec.rb -fdConnecting to database specified by database.yml...Link (0.2ms) BEGIN (0.2ms) SAVEPOINT active_record_1 SQL (0.6ms) INSERT INTO `groups` (`created_at`, `group_description`, `group_name`, `updated_at`) VALUES ('2014-07-12 13:50:49', 'Various jQuery examples of common situations amnd solutions', 'jQuery Examples', '2014-07-12 13:50:49') (0.2ms) RELEASE SAVEPOINT active_record_1 (0.2ms) SAVEPOINT active_record_1 Link Load (0.6ms) SELECT `links`.* FROM `links` WHERE (links.position IS NOT NULL) AND (1 = 1) ORDER BY links.position DESC LIMIT 1 SQL (0.4ms) INSERT INTO `links` (`alt_text`, `content_date`, `created_at`, `group_id`, `position`, `updated_at`, `url_address`, `verified_date`, `version_number`) VALUES ('examples of common situations amnd solutions', NULL, '2014-07-12 13:50:49', 141, 1, '2014-07-12 13:50:49', 'http://test.com', NULL, NULL) (0.1ms) RELEASE SAVEPOINT active_record_1 (68.4ms) ROLLBACK should be valid (0.2ms) BEGIN (0.2ms) SAVEPOINT active_record_1 SQL (0.3ms) INSERT INTO `groups` (`created_at`, `group_description`, `group_name`, `updated_at`) VALUES ('2014-07-12 13:50:49', 'Various jQuery examples of common situations amnd solutions', 'jQuery Examples', '2014-07-12 13:50:49') (0.1ms) RELEASE SAVEPOINT active_record_1 (0.2ms) SAVEPOINT active_record_1 Link Load (0.7ms) SELECT `links`.* FROM `links` WHERE (links.position IS NOT NULL) AND (1 = 1) ORDER BY links.position DESC LIMIT 1 SQL (0.5ms) INSERT INTO `links` (`alt_text`, `content_date`, `created_at`, `group_id`, `position`, `updated_at`, `url_address`, `verified_date`, `version_number`) VALUES ('examples of common situations amnd solutions', NULL, '2014-07-12 13:50:49', 142, 1, '2014-07-12 13:50:49', 'http://test.com', NULL, NULL) (0.2ms) RELEASE SAVEPOINT active_record_1 (67.6ms) ROLLBACK should have attribute :group_id (0.3ms) BEGIN (0.2ms) SAVEPOINT active_record_1 SQL (0.4ms) INSERT INTO `groups` (`created_at`, `group_description`, `group_name`, `updated_at`) VALUES ('2014-07-12 13:50:49', 'Various jQuery examples of common situations amnd solutions', 'jQuery Examples', '2014-07-12 13:50:49') (0.1ms) RELEASE SAVEPOINT active_record_1 (0.2ms) SAVEPOINT active_record_1 Link Load (0.5ms) SELECT `links`.* FROM `links` WHERE (links.position IS NOT NULL) AND (1 = 1) ORDER BY links.position DESC LIMIT 1 SQL (0.4ms) INSERT INTO `links` (`alt_text`, `content_date`, `created_at`, `group_id`, `position`, `updated_at`, `url_address`, `verified_date`, `version_number`) VALUES ('examples of common situations amnd solutions', NULL, '2014-07-12 13:50:49', 143, 1, '2014-07-12 13:50:49', 'http://test.com', NULL, NULL) (0.1ms) RELEASE SAVEPOINT active_record_1 (68.7ms) ROLLBACK should have attribute :url_address...",How to get rspec to not show db queries and just dots with rails_12factor?
correct way to refactor this method in ruby," My method: I don't like that I'm calling images_all twice, just wondering if there's a good trick to call self or something similar to make this a little cleaner.  <code>  def scroll_images images_all[1..images_all.length] end","ruby array, get all elements from second to last"
"ruby array, get second element to last"," My method: I don't like that I'm calling images_all twice, just wondering if there's a good trick to call self or something similar to make this a little cleaner.  <code>  def scroll_images images_all[1..images_all.length] end","ruby array, get all elements from second to last"
How to Fullcalendar," I am using the gem 'fullcalendar-rails' in rails 4 to use the jquery fullcalendar, by the way Im new in rails, and I've spent many days trying to make this work but I can't find a guide to do a proper post from the calendar to the controller in rails and then save it to the database.I've tried this guide, but nothing seems to work properly, does anyone know how to do this?http://www.rkonrails.com/blog/2013/10/full-calendar-rails-jquery-full-calendar-in-rails/http://blog.crowdint.com/2014/02/18/fancy-calendars-for-your-web-application-with-fullcalendar.htmlActually this is my code:EVENT MODEL EVENT CONTROLLER CALENDAR.JS.COFFEE EVENT MIGRATION <code>  class Event < ActiveRecord::Base def self.between(start_time, end_time) where('starts_at > :lo and starts_at < :up', :lo => Event.format_date(start_time), :up => Event.format_date(end_time) ) end def self.format_date(date_time) Time.at(date_time.to_i).to_formatted_s(:db) end def as_json(options = {}) { :id => self.id, :title => self.title, :description => self.description || """", :start => starts_at.rfc822, :end => ends_at.rfc822, :allDay => self.all_day, :recurring => false, :url => Rails.application.routes.url_helpers.event_path(id) } end end class EventsController < ApplicationController def new @event = Event.new respond_to do |format| format.html # new.html.erb format.js end end def create @event = Event.new params['event'] if @event.save render nothing: true else render :json => { }, :status => 500 end end def index @events = Event.between(params['start'], params['end']) if (params['start'] && params['end']) respond_to do |format| format.html # index.html.erb format.json { render :json => @events } end endend $(document).ready -> $('#calendar').fullCalendar editable: false, columnFormat: { month: 'dddd', week: 'dddd d', day: 'ddd' } buttonText: { today: 'today', month: 'month', week: 'week', day: 'day' } minTime: ""08:00:00"" maxTime: ""23:00:00"" header: left: 'prev,next today', center: 'title', right: '' firstDay: 1 selectable: true selectHelper: true select: (start, end) -> title = prompt(""Event Title:"") eventData = undefined if title eventData = title: title start: start end: end $(""#calendar"").fullCalendar ""renderEvent"", eventData, true # stick? = true $(""#calendar"").fullCalendar ""unselect"" defaultView: 'agendaWeek', allDaySlot: false, height: 500, slotMinutes: 30, eventSources: [{ url: '/events', }], timeFormat: 'h:mm t{ - h:mm t} ', dragOpacity: ""0.5"" eventDrop: (event, dayDelta, minuteDelta, allDay, revertFunc) -> updateEvent(event); eventResize: (event, dayDelta, minuteDelta, revertFunc) -> updateEvent(event); updateEvent = (the_event) -> $.update ""/events/"" + the_event.id, event: title: the_event.title, starts_at: """" + the_event.start, ends_at: """" + the_event.end, description: the_event.description create_table ""events"", force: true do |t| t.string ""title"" t.string ""starts_at"" t.string ""ends_at"" t.string ""description"" t.string ""allDay"" t.datetime ""created_at"" t.datetime ""updated_at"" end",How to properly use Fullcalendar jQuery plugin in rails
How to make properly the Fullcalendar of jquery in rails," I am using the gem 'fullcalendar-rails' in rails 4 to use the jquery fullcalendar, by the way Im new in rails, and I've spent many days trying to make this work but I can't find a guide to do a proper post from the calendar to the controller in rails and then save it to the database.I've tried this guide, but nothing seems to work properly, does anyone know how to do this?http://www.rkonrails.com/blog/2013/10/full-calendar-rails-jquery-full-calendar-in-rails/http://blog.crowdint.com/2014/02/18/fancy-calendars-for-your-web-application-with-fullcalendar.htmlActually this is my code:EVENT MODEL EVENT CONTROLLER CALENDAR.JS.COFFEE EVENT MIGRATION <code>  class Event < ActiveRecord::Base def self.between(start_time, end_time) where('starts_at > :lo and starts_at < :up', :lo => Event.format_date(start_time), :up => Event.format_date(end_time) ) end def self.format_date(date_time) Time.at(date_time.to_i).to_formatted_s(:db) end def as_json(options = {}) { :id => self.id, :title => self.title, :description => self.description || """", :start => starts_at.rfc822, :end => ends_at.rfc822, :allDay => self.all_day, :recurring => false, :url => Rails.application.routes.url_helpers.event_path(id) } end end class EventsController < ApplicationController def new @event = Event.new respond_to do |format| format.html # new.html.erb format.js end end def create @event = Event.new params['event'] if @event.save render nothing: true else render :json => { }, :status => 500 end end def index @events = Event.between(params['start'], params['end']) if (params['start'] && params['end']) respond_to do |format| format.html # index.html.erb format.json { render :json => @events } end endend $(document).ready -> $('#calendar').fullCalendar editable: false, columnFormat: { month: 'dddd', week: 'dddd d', day: 'ddd' } buttonText: { today: 'today', month: 'month', week: 'week', day: 'day' } minTime: ""08:00:00"" maxTime: ""23:00:00"" header: left: 'prev,next today', center: 'title', right: '' firstDay: 1 selectable: true selectHelper: true select: (start, end) -> title = prompt(""Event Title:"") eventData = undefined if title eventData = title: title start: start end: end $(""#calendar"").fullCalendar ""renderEvent"", eventData, true # stick? = true $(""#calendar"").fullCalendar ""unselect"" defaultView: 'agendaWeek', allDaySlot: false, height: 500, slotMinutes: 30, eventSources: [{ url: '/events', }], timeFormat: 'h:mm t{ - h:mm t} ', dragOpacity: ""0.5"" eventDrop: (event, dayDelta, minuteDelta, allDay, revertFunc) -> updateEvent(event); eventResize: (event, dayDelta, minuteDelta, revertFunc) -> updateEvent(event); updateEvent = (the_event) -> $.update ""/events/"" + the_event.id, event: title: the_event.title, starts_at: """" + the_event.start, ends_at: """" + the_event.end, description: the_event.description create_table ""events"", force: true do |t| t.string ""title"" t.string ""starts_at"" t.string ""ends_at"" t.string ""description"" t.string ""allDay"" t.datetime ""created_at"" t.datetime ""updated_at"" end",How to properly use Fullcalendar jQuery plugin in rails
Only allow admin user to create new users in Rails with Devise (No external modules)," Currently, my Users database has a column called ""admin"" with a boolean value and the default set to false. I have one admin user seeded into the database. How do write my application so that users who are the admin can create new users, but users who are not cannot? (Also, users should be created only by the admin)It seems like there should be a simple way to do this in devise that does not involve using some external module. So far however, I have not been able to find a satisfactory answer. I would be more likely to mark the solution which is devise only. (One that is simply standard MVC/Rails solution a plus) However, if there really is a better way to do it that doesn't involve CanCan I may accept that too.NOTE:I have been searching around for a while and I've found several other stackoverflow questions that are very similar to this one, but either don't quite answer the question, or use other non-devise modules. (Or both) <code> ",Rails: Only allow admin user to create new users in Rails with Devise (No external modules)
How to install the GNU Scientific Library (GSL) library on Heroku?," I need to install the GSL library on Heroku running a Rails (4.0.2) app to use some gems that depend on it.Goal:Install the GSL library to work with GSL and Similarity gems in Heroku. Tried approaches:Installing Ruby / GSL in Heroku Application: Heroku crashes after deploy. GSL gem is unable to find the lib. Trace: http://pastebin.com/CPcMUdCaTomwolfe's Heroku's Ruby buildpack adapted for using couchbase: Same issue.Building Dependency Binaries for Heroku Applications: Vulcan is deprecated. More info on Heroku's Devcenter and on GithubI've tried following these steps (compiling binaries): GSL 1.15 downloaded from ftp://ftp.gnu.org/gnu/gsl/gsl-1.15.tar.gzUncompressed and cd gsl-1.15./configuremake cleanmakesudo make installIt works on my local environment but not in Heroku. Heroku doesn't allow sudo but it allows access with heroku run. The problem is that the file system is ephemeral and the dyno will only live as long as your console session.Update:I've also tried building my own Heroku Buildpack but I couldn't make it work. I tried using multipacks. I'm not a Heroku Buildpack expert so maybe it's the problem, I'm learning more about it to make a simple repository with an example and an extended explanation of this issue.  <code> ",Heroku/Rails: How to install the GNU Scientific Library (GSL) on Heroku?
Heroku/Rails: How to install the GNU Scientific Library (GSL) library on Heroku?," I need to install the GSL library on Heroku running a Rails (4.0.2) app to use some gems that depend on it.Goal:Install the GSL library to work with GSL and Similarity gems in Heroku. Tried approaches:Installing Ruby / GSL in Heroku Application: Heroku crashes after deploy. GSL gem is unable to find the lib. Trace: http://pastebin.com/CPcMUdCaTomwolfe's Heroku's Ruby buildpack adapted for using couchbase: Same issue.Building Dependency Binaries for Heroku Applications: Vulcan is deprecated. More info on Heroku's Devcenter and on GithubI've tried following these steps (compiling binaries): GSL 1.15 downloaded from ftp://ftp.gnu.org/gnu/gsl/gsl-1.15.tar.gzUncompressed and cd gsl-1.15./configuremake cleanmakesudo make installIt works on my local environment but not in Heroku. Heroku doesn't allow sudo but it allows access with heroku run. The problem is that the file system is ephemeral and the dyno will only live as long as your console session.Update:I've also tried building my own Heroku Buildpack but I couldn't make it work. I tried using multipacks. I'm not a Heroku Buildpack expert so maybe it's the problem, I'm learning more about it to make a simple repository with an example and an extended explanation of this issue.  <code> ",Heroku/Rails: How to install the GNU Scientific Library (GSL) on Heroku?
How can I make Ruby convert a BigDecimal to a nicely formatted 2-decimal-place string?," I want to convert a BigDecimal object to a currency value to two decimal places. I don't want any rounding. How can I do it?None of the following approaches worked: <code>  v = BigDecimal(""7.1762"")w = BigDecimal(""4.2"")v.to_s('2F') # => ""7.17 62""v.to_s('F') # => ""7.1762""v.to_s('%0.2F') # => ""0.71762E1""v.to_s('%0.2f') # => ""0.71762E1""v.truncate(2).to_s('F') # => ""7.17"" # This one looks like it workedw.truncate(2).to_s('F') # => ""4.2"" # But it doesn't pad with the trailing zero(es)",How can I convert a BigDecimal to a 2-decimal-place string?
Is it still advisable to test routes in Rails 4 with Minitest 5?," In Rails 3, when writing functional tests in MiniTest, I got in the habit of testing routes separately from testing my controller actions. I got the idea from the Rails Guide on Testing - Section 9: Testing Routes. However, after upgrading my application to Rails 4 I noticed that the controller action tests themselves have started balking about unknown routes if I don't supply the get|patch|post|delete method with a proper set of params.For example, given routes: And functional test: In Rails 3, the above would work. But in Rails 4 I get a URL generation error: ActionController::UrlGenerationError: No route matches {:action=>""index"", :controller=>""api/v2/comments""}From this I can infer that the get helper simply failed to match a route from the routes file when trying to locate the controller and action. Fair enough. I can fix this by changing the get call to include the parameters needed to satisfy the nested route, like this: ... then all is well again.So my question is, since it wasn't the case in in Rails 3, is it now OK to trust the controller action tests to fully test/validate my routes in Rails 4+? Or is there additional advantage in testing the routes as well still? Is there, perhaps, some other angle that the route tests cover that the controller action tests don't cover? (Note: I'm not asking for an opinion on what's good to test; I'm asking for functional differences between route integration tests and controller action tests in regard to route requirements.)Also, I couldn't find a specific reference to this change in behavior in the Rails 4 release notes (or in Minitest), so I'm wondering why this behavior change was made in the first place. I don't think it's a bad thing -- I think it's good -- but I feel weird not seeing it mentioned in a changelog somewhere. And I thought that half the point of the get|patch|post|delete methods were to free you from having to think about what params are needed for routing in the first place.For completeness, here is the route test I would use for this: UPDATEI've been looking through ActionDispatch code for an answer... the only thing I can see so far is that the url_for stuff has changed a lot since Rails 3 and that the ActionController::UrlGenerationError class itself has been added in Rails 4. So it could be that these new, more strict routing requirements are incidental change to the decoupling of ActionView and ActionController. <code>  # config/routes.rbnamespace ""api"" do namespace ""v2"", defaults: { format: :json } do resources :users do resources :posts do resources :comments end end endend # test/controllers/api/v2/comments_controller_test.rbdescribe Api::V2::CommentsController it ""does something"" do get :index endend # test/controllers/api/v2/comments_controller_test.rbdescribe Api::V2::CommentsController it ""does something"" do get :index, { user_id: ""1"", post_id: ""1"" } endend describe ""CommentsController Route Integration Test"" do let(:default_options) { { controller: ""api/v2/comments"", user_id: ""1"", posts_id: ""1"", format: :json } } it ""#index"" do assert_routing ""/api/v2/users/1/posts/1/comments"", default_options.merge(action: ""index"") endend",Is it still advisable to test routes in Rails 4 with Minitest?
How to use ruby to combine several csv file into one big csv file," I have been using SmarterCSV to convert bed format file to csv file and changing the column names.Now I have collected several CSV files, and want to combine them into one big CSV file. In test3.csv, there are three columns, chromosome, start_site and end_site that will be used, and the other three columns, binding_site_pattern,score and strand that will be removed. By adding three new columns to the test3.csv file, the data are all the same in the transcription_factor column: Cmyc, in the cell_type column: PWM, in the project_name column: JASPAR.Anyone have any ideas on this one?test1.csv test2.csv test3.csv Desired combined result: <code>  transcription_factor,cell_type,chromosome,start_site,end_site,project_nameCmyc,GM12878,11,809296,809827,ENCODE Cmyc,GM12878,11,6704236,6704683,ENCODE transcription_factor,cell_type,chromosome,start_site,end_site,project_name Cmyc,H1ESC,19,9710417,9710587,ENCODE Cmyc,H1ESC,11,541754,542137,ENCODE chromosome,start_site,end_site,binding_site_pattern,score,strand chr1,21942,21953,AAGCACGTGGT,1752,+ chr1,21943,21954,AACCACGTGCT,1335,- transcription_factor,cell_type,chromosome,start_site,end_site,project_nameCmyc,GM12878,11,809296,809827,ENCODE Cmyc,GM12878,11,6704236,6704683,ENCODE Cmyc,H1ESC,19,9710417,9710587,ENCODE Cmyc,H1ESC,11,541754,542137,ENCODE Cmyc,PWM,1,21942,21953,JASPAR Cmyc,PWM,1,21943,21954,JASPAR",How do I use Ruby to combine several CSV files into one big CSV file?
how to understand ruby partial class?," I read that the code snippet below implements what is called partial class: There are two classes B extended from two classes A. I don't understand how ruby could know which A the B is extend from. When creating an instance of B, how does ruby know which B it is? The execution result is: The initialized B is an instance of two B classes. Can someone explain this? <code>  class A def a puts 'a' endendclass B < A def ba1 puts 'ba1' endendclass A def b puts 'b' endendclass B < A def ba2 puts 'ba2' endendob = B.newob.aob.bob.ba1ob.ba2 abba1ba2",What is ruby partial class?
Ruby: Convert string to integer or nil," For web programming, numbers come in as strings. but to_i will convert ""5abc"" to 5 and ""abc"" to 0, both wrong answers. To catch these, I wrote: Is there a neater, more Ruby-natural way of accomplishing this conversion and detecting that the string wasn't intended as a number? <code>  def number_or_nil( s ) number = s.to_i number = nil if (number.to_s != s) return numberend",Strictly convert string to integer (or nil)
How to extend the Array class in Ruby with a uniq_elements menthod?," I would like to extend the Array class with a uniq_elements method which returns those elements with multiplicity of one. I also would like to use closures to my new method as with uniq. For example: Example with closure: Neither t-t.uniq nor t.to_set-t.uniq.to_set works. I don't care of speed, I call it only once in my program, so it can be a slow. <code>  t=[1,2,2,3,4,4,5,6,7,7,8,9,9,9]t.uniq_elements # => [1,3,5,6,8] t=[1.0, 1.1, 2.0, 3.0, 3.4, 4.0, 4.2, 5.1, 5.7, 6.1, 6.2]t.uniq_elements{|z| z.round} # => [2.0, 5.1]",How to select unique elements
How to extend the Array class in Ruby with a uniq_elements method," I would like to extend the Array class with a uniq_elements method which returns those elements with multiplicity of one. I also would like to use closures to my new method as with uniq. For example: Example with closure: Neither t-t.uniq nor t.to_set-t.uniq.to_set works. I don't care of speed, I call it only once in my program, so it can be a slow. <code>  t=[1,2,2,3,4,4,5,6,7,7,8,9,9,9]t.uniq_elements # => [1,3,5,6,8] t=[1.0, 1.1, 2.0, 3.0, 3.4, 4.0, 4.2, 5.1, 5.7, 6.1, 6.2]t.uniq_elements{|z| z.round} # => [2.0, 5.1]",How to select unique elements
bad value for range in RSpec and Rails," Here is my code: But when I run this spec, I'm getting the following error: and it seems like it checks the to method from rails active support, but I think to should be a method in rspec. Following is my backtrace I checked this solution and it doesn't work.I'm onRails 4.0.2Rspec 3.0.0 <code>  #app/models/user.rbclass User < ActiveRecord::Base def display_name name.split(' ').try(:first) endend#spec/models/user_spec.rbrequire 'rails_helper'RSpec.describe User, :type => :model do let(:user) { FactoryGirl.create :user } it ""should return the correct display name"" do expect ( user.display_name ).to eql(""Chuck"") endend#spec/factories/users.rbFactoryGirl.define do factory :user do provider ""MyString"" uid ""MyString"" name ""Chuck Norris"" oauth_token ""MyString"" oauth_expires_at ""2014-07-24 07:31:36"" endend Failure/Error: expect ( user.display_name ).to eql(""Chuck"") ArgumentError: bad value for range # /Users/sameera/.rvm/gems/ruby-2.0.0-p247/gems/activesupport-4.0.2/lib/active_support/core_ext/string/access.rb:62:in `to' # ./spec/models/user_spec.rb:7:in `block (2 levels) in <top (required)>' # /Users/sameera/.rvm/gems/ruby-2.0.0-p247/gems/rspec-core-3.0.3/lib/rspec/core/example.rb:148:in `instance_exec' # /Users/sameera/.rvm/gems/ruby-2.0.0-p247/gems/rspec-core-3.0.3/lib/rspec/core/example.rb:148:in `block in run' # /Users/sameera/.rvm/gems/ruby-2.0.0-p247/gems/rspec-core-3.0.3/lib/rspec/core/example.rb:210:in `call' # /Users/sameera/.rvm/gems/ruby-2.0.0-p247/gems/rspec-core-3.0.3/lib/rspec/core/example.rb:210:in `block (2 levels) in <class:Procsy>' # /Users/sameera/.rvm/gems/ruby-2.0.0-p247/gems/rspec-rails-3.0.2/lib/rspec/rails/adapters.rb:72:in `block (2 levels) in <module:MinitestLifecycleAdapter>' # /Users/sameera/.rvm/gems/ruby-2.0.0-p247/gems/rspec-core-3.0.3/lib/rspec/core/example.rb:294:in `instance_exec' # /Users/sameera/.rvm/gems/ruby-2.0.0-p247/gems/rspec-core-3.0.3/lib/rspec/core/example.rb:294:in `instance_exec' # /Users/sameera/.rvm/gems/ruby-2.0.0-p247/gems/rspec-core-3.0.3/lib/rspec/core/hooks.rb:430:in `block (2 levels) in run' # /Users/sameera/.rvm/gems/ruby-2.0.0-p247/gems/rspec-core-3.0.3/lib/rspec/core/example.rb:210:in `call' # /Users/sameera/.rvm/gems/ruby-2.0.0-p247/gems/rspec-core-3.0.3/lib/rspec/core/example.rb:210:in `block (2 levels) in <class:Procsy>' # /Users/sameera/.rvm/gems/ruby-2.0.0-p247/gems/rspec-core-3.0.3/lib/rspec/core/hooks.rb:432:in `run' # /Users/sameera/.rvm/gems/ruby-2.0.0-p247/gems/rspec-core-3.0.3/lib/rspec/core/hooks.rb:485:in `run' # /Users/sameera/.rvm/gems/ruby-2.0.0-p247/gems/rspec-core-3.0.3/lib/rspec/core/example.rb:303:in `with_around_example_hooks' # /Users/sameera/.rvm/gems/ruby-2.0.0-p247/gems/rspec-core-3.0.3/lib/rspec/core/example.rb:145:in `run' # /Users/sameera/.rvm/gems/ruby-2.0.0-p247/gems/rspec-core-3.0.3/lib/rspec/core/example_group.rb:494:in `block in run_examples' # /Users/sameera/.rvm/gems/ruby-2.0.0-p247/gems/rspec-core-3.0.3/lib/rspec/core/example_group.rb:490:in `map' # /Users/sameera/.rvm/gems/ruby-2.0.0-p247/gems/rspec-core-3.0.3/lib/rspec/core/example_group.rb:490:in `run_examples' # /Users/sameera/.rvm/gems/ruby-2.0.0-p247/gems/rspec-core-3.0.3/lib/rspec/core/example_group.rb:457:in `run' # /Users/sameera/.rvm/gems/ruby-2.0.0-p247/gems/rspec-core-3.0.3/lib/rspec/core/runner.rb:112:in `block (2 levels) in run_specs' # /Users/sameera/.rvm/gems/ruby-2.0.0-p247/gems/rspec-core-3.0.3/lib/rspec/core/runner.rb:112:in `map' # /Users/sameera/.rvm/gems/ruby-2.0.0-p247/gems/rspec-core-3.0.3/lib/rspec/core/runner.rb:112:in `block in run_specs' # /Users/sameera/.rvm/gems/ruby-2.0.0-p247/gems/rspec-core-3.0.3/lib/rspec/core/reporter.rb:54:in `report' # /Users/sameera/.rvm/gems/ruby-2.0.0-p247/gems/rspec-core-3.0.3/lib/rspec/core/runner.rb:108:in `run_specs' # /Users/sameera/.rvm/gems/ruby-2.0.0-p247/gems/rspec-core-3.0.3/lib/rspec/core/runner.rb:86:in `run' # /Users/sameera/.rvm/gems/ruby-2.0.0-p247/gems/rspec-core-3.0.3/lib/rspec/core/runner.rb:70:in `run' # /Users/sameera/.rvm/gems/ruby-2.0.0-p247/gems/rspec-core-3.0.3/lib/rspec/core/runner.rb:38:in `invoke' # /Users/sameera/.rvm/gems/ruby-2.0.0-p247/gems/rspec-core-3.0.3/exe/rspec:4:in `<top (required)>' # /Users/sameera/.rvm/gems/ruby-2.0.0-p247/bin/rspec:23:in `load' # /Users/sameera/.rvm/gems/ruby-2.0.0-p247/bin/rspec:23:in `<main>'",Getting 'Bad value for range' in RSpec
Rails / RSpec: 'Bad value for range'," Here is my code: But when I run this spec, I'm getting the following error: and it seems like it checks the to method from rails active support, but I think to should be a method in rspec. Following is my backtrace I checked this solution and it doesn't work.I'm onRails 4.0.2Rspec 3.0.0 <code>  #app/models/user.rbclass User < ActiveRecord::Base def display_name name.split(' ').try(:first) endend#spec/models/user_spec.rbrequire 'rails_helper'RSpec.describe User, :type => :model do let(:user) { FactoryGirl.create :user } it ""should return the correct display name"" do expect ( user.display_name ).to eql(""Chuck"") endend#spec/factories/users.rbFactoryGirl.define do factory :user do provider ""MyString"" uid ""MyString"" name ""Chuck Norris"" oauth_token ""MyString"" oauth_expires_at ""2014-07-24 07:31:36"" endend Failure/Error: expect ( user.display_name ).to eql(""Chuck"") ArgumentError: bad value for range # /Users/sameera/.rvm/gems/ruby-2.0.0-p247/gems/activesupport-4.0.2/lib/active_support/core_ext/string/access.rb:62:in `to' # ./spec/models/user_spec.rb:7:in `block (2 levels) in <top (required)>' # /Users/sameera/.rvm/gems/ruby-2.0.0-p247/gems/rspec-core-3.0.3/lib/rspec/core/example.rb:148:in `instance_exec' # /Users/sameera/.rvm/gems/ruby-2.0.0-p247/gems/rspec-core-3.0.3/lib/rspec/core/example.rb:148:in `block in run' # /Users/sameera/.rvm/gems/ruby-2.0.0-p247/gems/rspec-core-3.0.3/lib/rspec/core/example.rb:210:in `call' # /Users/sameera/.rvm/gems/ruby-2.0.0-p247/gems/rspec-core-3.0.3/lib/rspec/core/example.rb:210:in `block (2 levels) in <class:Procsy>' # /Users/sameera/.rvm/gems/ruby-2.0.0-p247/gems/rspec-rails-3.0.2/lib/rspec/rails/adapters.rb:72:in `block (2 levels) in <module:MinitestLifecycleAdapter>' # /Users/sameera/.rvm/gems/ruby-2.0.0-p247/gems/rspec-core-3.0.3/lib/rspec/core/example.rb:294:in `instance_exec' # /Users/sameera/.rvm/gems/ruby-2.0.0-p247/gems/rspec-core-3.0.3/lib/rspec/core/example.rb:294:in `instance_exec' # /Users/sameera/.rvm/gems/ruby-2.0.0-p247/gems/rspec-core-3.0.3/lib/rspec/core/hooks.rb:430:in `block (2 levels) in run' # /Users/sameera/.rvm/gems/ruby-2.0.0-p247/gems/rspec-core-3.0.3/lib/rspec/core/example.rb:210:in `call' # /Users/sameera/.rvm/gems/ruby-2.0.0-p247/gems/rspec-core-3.0.3/lib/rspec/core/example.rb:210:in `block (2 levels) in <class:Procsy>' # /Users/sameera/.rvm/gems/ruby-2.0.0-p247/gems/rspec-core-3.0.3/lib/rspec/core/hooks.rb:432:in `run' # /Users/sameera/.rvm/gems/ruby-2.0.0-p247/gems/rspec-core-3.0.3/lib/rspec/core/hooks.rb:485:in `run' # /Users/sameera/.rvm/gems/ruby-2.0.0-p247/gems/rspec-core-3.0.3/lib/rspec/core/example.rb:303:in `with_around_example_hooks' # /Users/sameera/.rvm/gems/ruby-2.0.0-p247/gems/rspec-core-3.0.3/lib/rspec/core/example.rb:145:in `run' # /Users/sameera/.rvm/gems/ruby-2.0.0-p247/gems/rspec-core-3.0.3/lib/rspec/core/example_group.rb:494:in `block in run_examples' # /Users/sameera/.rvm/gems/ruby-2.0.0-p247/gems/rspec-core-3.0.3/lib/rspec/core/example_group.rb:490:in `map' # /Users/sameera/.rvm/gems/ruby-2.0.0-p247/gems/rspec-core-3.0.3/lib/rspec/core/example_group.rb:490:in `run_examples' # /Users/sameera/.rvm/gems/ruby-2.0.0-p247/gems/rspec-core-3.0.3/lib/rspec/core/example_group.rb:457:in `run' # /Users/sameera/.rvm/gems/ruby-2.0.0-p247/gems/rspec-core-3.0.3/lib/rspec/core/runner.rb:112:in `block (2 levels) in run_specs' # /Users/sameera/.rvm/gems/ruby-2.0.0-p247/gems/rspec-core-3.0.3/lib/rspec/core/runner.rb:112:in `map' # /Users/sameera/.rvm/gems/ruby-2.0.0-p247/gems/rspec-core-3.0.3/lib/rspec/core/runner.rb:112:in `block in run_specs' # /Users/sameera/.rvm/gems/ruby-2.0.0-p247/gems/rspec-core-3.0.3/lib/rspec/core/reporter.rb:54:in `report' # /Users/sameera/.rvm/gems/ruby-2.0.0-p247/gems/rspec-core-3.0.3/lib/rspec/core/runner.rb:108:in `run_specs' # /Users/sameera/.rvm/gems/ruby-2.0.0-p247/gems/rspec-core-3.0.3/lib/rspec/core/runner.rb:86:in `run' # /Users/sameera/.rvm/gems/ruby-2.0.0-p247/gems/rspec-core-3.0.3/lib/rspec/core/runner.rb:70:in `run' # /Users/sameera/.rvm/gems/ruby-2.0.0-p247/gems/rspec-core-3.0.3/lib/rspec/core/runner.rb:38:in `invoke' # /Users/sameera/.rvm/gems/ruby-2.0.0-p247/gems/rspec-core-3.0.3/exe/rspec:4:in `<top (required)>' # /Users/sameera/.rvm/gems/ruby-2.0.0-p247/bin/rspec:23:in `load' # /Users/sameera/.rvm/gems/ruby-2.0.0-p247/bin/rspec:23:in `<main>'",Getting 'Bad value for range' in RSpec
ruby on rails console hanging when loading," For whatever reason, the Ruby on Rails console refuses to start; it just hangs. I haven't made any changes to my code, and other projects using the same version of Ruby and Ruby on Rails have no issue. When I finally Ctrl + C I get this stack trace, which points to Spring.I can't explain why this is happening from one moment to the next, where it was working fine. I have cleared out all the gems through RVM and reinstalled all through bundle command, but still no luck. Any ideas would be appreciated.Also the Ruby on Rails server has no issue so as far as I can tell. The issue is project related, however no code has changed, and it's only the Ruby on Rails console that has the issue.Ruby 2.1.2 Rails 4.1.4 <code>  user_a@ubuntu:~/work/app_a$ rails console^C/home/user_a/.rvm/gems/ruby-2.1.2/gems/spring-1.1.3/lib/spring/client/run.rb:54:in `gets': Interrupt from /home/user_a/.rvm/gems/ruby-2.1.2/gems/spring-1.1.3/lib/spring/client/run.rb:54:in `verify_server_version' from /home/user_a/.rvm/gems/ruby-2.1.2/gems/spring-1.1.3/lib/spring/client/run.rb:25:in `call' from /home/user_a/.rvm/gems/ruby-2.1.2/gems/spring-1.1.3/lib/spring/client/command.rb:7:in `call' from /home/user_a/.rvm/gems/ruby-2.1.2/gems/spring-1.1.3/lib/spring/client/rails.rb:23:in `call' from /home/user_a/.rvm/gems/ruby-2.1.2/gems/spring-1.1.3/lib/spring/client/command.rb:7:in `call' from /home/user_a/.rvm/gems/ruby-2.1.2/gems/spring-1.1.3/lib/spring/client.rb:26:in `run' from /home/user_a/.rvm/gems/ruby-2.1.2/gems/spring-1.1.3/bin/spring:48:in `<top (required)>' from /home/user_a/.rvm/gems/ruby-2.1.2/gems/spring-1.1.3/lib/spring/binstub.rb:11:in `load' from /home/user_a/.rvm/gems/ruby-2.1.2/gems/spring-1.1.3/lib/spring/binstub.rb:11:in `<top (required)>' from /home/user_a/work/app_a/bin/spring:16:in `require' from /home/user_a/work/app_a/bin/spring:16:in `<top (required)>' from bin/rails:3:in `load' from bin/rails:3:in `<main>'user_a@ubuntu:~/work/app_a$",Ruby on Rails console is hanging when loading
Accessing objects with AWS-SDK-Core Ruby Gem," I am trying to delete uploaded image files with the AWS-SDK-Core Ruby Gem.I have the following code: However, I am getting the following error: The bucket you are attempting to access must be addressed using the specified endpoint. Please send all future requests to this endpoint.I know the region is correct because if I change it to us-east-1, the following error shows up: The specified key does not exist.What am I doing wrong here? <code>  require 'aws-sdk-core'def pull_picture(picture) Aws.config = { :access_key_id => ENV[""AWS_ACCESS_KEY_ID""], :secret_access_key => ENV[""AWS_SECRET_ACCESS_KEY""], :region => 'us-west-2' } s3 = Aws::S3::Client.new test = s3.get_object( :bucket => ENV[""AWS_S3_BUCKET""], :key => picture.image_url.split('/')[-2], )end",AWS S3: The bucket you are attempting to access must be addressed using the specified endpoint
Amazon S3: AWS-SDK-Core Ruby Gem," I am trying to delete uploaded image files with the AWS-SDK-Core Ruby Gem.I have the following code: However, I am getting the following error: The bucket you are attempting to access must be addressed using the specified endpoint. Please send all future requests to this endpoint.I know the region is correct because if I change it to us-east-1, the following error shows up: The specified key does not exist.What am I doing wrong here? <code>  require 'aws-sdk-core'def pull_picture(picture) Aws.config = { :access_key_id => ENV[""AWS_ACCESS_KEY_ID""], :secret_access_key => ENV[""AWS_SECRET_ACCESS_KEY""], :region => 'us-west-2' } s3 = Aws::S3::Client.new test = s3.get_object( :bucket => ENV[""AWS_S3_BUCKET""], :key => picture.image_url.split('/')[-2], )end",AWS S3: The bucket you are attempting to access must be addressed using the specified endpoint
What means '$ bin' in $ bin/rails?," I'm trying to follow along the ""Getting Started with Engines"" Rails Guide's tutorial and found this: When I type this on my terminal, I get: When I try just $ rails it works OK.I've been using the command line for a couple of months, and Rails as well. I know the $ sign but I'm confused about the meaning of the ""bin"" after that. I'm used to type ""Rails"" right after $, but this tutorial says that use ""bin"" ...What does bin/ mean? <code>  $ bin/rails plugin new blorgh --mountable bash: bin/rails: No such file or directory",What means 'bin' in '$ bin/rails?'
rspec pass query string for get method in rails," I have an action called yearly_csv. In this action I perform two operations like demand and supply. I have two radio buttons in my view to select one of the operations. Now I want to test each operation individually in RSpec. For example, one spec for supply and another spec for demand.My question is how to pass the radio button value to the yearly_csv action (get)? <code>  def yearly_csv if demand == 'true' demand_csv else supply_csv endend",How to specifiy the query string in an RSpec test of a Rails controller action?
jira-ruby gem limiting number of returned isues?," I'm trying to fetch issuses from JIRA using gem called jira-ruby. The problem is, that the result contains 70 issues, but I can see only the first 50. When using directly the JIRA REST API, I can set maxResults parameter (outside the JQL) to a higher number. But I can't find that possibility in the ruby gem. Is there any possibility to set the maxResults flag directly using this ruby gem, or any other equally simple solution?The code is the following: <code>  require 'jira'class PagesController < ActionController::Base # Prevent CSRF attacks by raising an exception. # For APIs, you may want to use :null_session instead. protect_from_forgery with: :exception def home options = { :username => 'xxx', :password => 'xxx', :site => ""https://xxx.atlassian.net"", :context_path => '', :auth_type => :basic } client = JIRA::Client.new(options) @issues = 0 client.Issue.jql(""project = AA AND fixVersion = it11"").each do |issue| @issues += 1 # ""#{@issues} <br> #{issue.id} - #{issue}"" end endend",jira-ruby gem limiting number of returned issues?
Understanding tap in ruby," I am reviewing a piece of code from a Rails project and I came across the tap method. What does it do?Also, it would be great if someone could help me understand what the rest of the code does: Thanks! <code>  def self.properties_container_to_object properties_container {}.tap do |obj| obj['vid'] = properties_container['vid'] if properties_container['vid'] obj['canonical-vid'] = properties_container['canonical-vid'] if properties_container['canonical-vid'] properties_container['properties'].each_pair do |name, property_hash| obj[name] = property_hash['value'] end endend",Understanding tap in Ruby
Find all the possible permutations using Ruby and recursion.," I've been trying to solve a simple quiz question to find all the possible permutation of a string using Ruby and recursion.I have the following Ruby code: Whenever I try to test the code with puts permutation(""abc"") I get the following output: Theoretically speaking it's supposed to be a very simple and straightforward problem, but I'm sure I'm doing something wrong. Most probably it's something with the ranges of the loops. And I know that Ruby Array class has instance method permutation to do that but I'm trying to solve it for practising. Please note that the complexity is O(N!) for the current implementation. Is there anyway to enhance the performance further?  <code>  def permutation(string) return [string] if string.size < 2 chr = string.chars.first perms = permutation(string[1..-1]) result = [] for perm in perms for i in (0..perm.size) result << (perm[0..i] + chr + perm[i..-1]) end end return result end cacbccbabccbcaccbcacacbcbabcba",Find all the possible permutations using Ruby and recursion
How to elegantly rename one key in a hash in Ruby (if it exists)?," I have the following hash: How can I elegantly rename the key :foo to a new key :test? If the hash entry for :foo does not exist, the hash should not be altered.  <code>  a = { foo: 'bar', answer: '42'}",How to rename a key in a hash if it exists
Has the parsing rule for local variables changed?," I am getting NameError: undefined local variable or method with ruby 2.1.2As observed in this question, expressions like: raises an undefined local variable error (provided that bar is not defined prior) because bar is read by the parser before it is assigned. And I believe that there used to be no difference with that with this expression: The difference between the two is whether the main body is evaluated or not, but that should not matter if encountering an undefined local variable immediately raises an error before evaluating the condition.But when I run the second code on Ruby 2.1.2, it does not raise an error. Has it been like that from before? If so, then what was the parsing discussion all about? If not, has Ruby specification changed? Is there any reference to that? What did it do in 1.8.7, 1.9.3, etc. ? <code>  bar if bar = true bar if bar = false",NameError: undefined - have parsing rules for local variables changed in Ruby 2.1.2?
Has the parsing rule for local variables changed in Ruby 2.1.2?," I am getting NameError: undefined local variable or method with ruby 2.1.2As observed in this question, expressions like: raises an undefined local variable error (provided that bar is not defined prior) because bar is read by the parser before it is assigned. And I believe that there used to be no difference with that with this expression: The difference between the two is whether the main body is evaluated or not, but that should not matter if encountering an undefined local variable immediately raises an error before evaluating the condition.But when I run the second code on Ruby 2.1.2, it does not raise an error. Has it been like that from before? If so, then what was the parsing discussion all about? If not, has Ruby specification changed? Is there any reference to that? What did it do in 1.8.7, 1.9.3, etc. ? <code>  bar if bar = true bar if bar = false",NameError: undefined - have parsing rules for local variables changed in Ruby 2.1.2?
conditional redirect in rails app," I have an action in a controller that I call from two different views. In each case, I want the action to redirect back to the page on which the link was clicked. At the moment I am doing this...In this view I am passing a parameter like this... and in the controller... This works fine, but does not feel elegant, especially as it ends up being in a few actions. Is there a better way? <code>  %a.showtooltip#wprofile{:href => idea_vote_up_path(@idea, :source => 'idea'), :title => 'Awesome idea - vote up !', } if params[:source] == 'idea' redirect_to ideaelse redirect_to ideas_pathend",Rails: Conditional redirect in rails app controller
"ruby 1.9.3: why does open(""url"") sometimes return File sometimes StringIO?"," I have two CSV files stored on S3. When I open one of them, a File is returned. When I open the other one, a StringIO is returned. Why? Is there any way to open them with a consistent data type? I need to pass the same data type String into CSV.read(open(file_url)), which doesn't work if sometimes it's getting a File and sometimes a StringIO.They were created via different ruby scripts (they contain very different data).On my Mac, they both appear to be ordinary text CSV files, and they were uplaoded via the AWS console, and have identical permissions and identical meta data (content-type: application/octet-stream). <code>  fn1 #=> ""http://SOMEWHERE.s3.amazonaws.com/setup_data/d1/file1.csv"" open(fn1) #=> #<File:/var/folders/sm/k7kyd0ns4k9bhfy7yqpjl2mh0000gn/T/open-uri20140814-26070-11cyjn1> fn2 #=> ""http://SOMEWHERE.s3.amazonaws.com/setup_data/d2/d3/file2.csv"" open(fn2) #=> #<StringIO:0x007f9718670ff0> ","Why does open(""url"") sometimes return File sometimes StringIO?"
Rails group_by deprecated," I have an array that I want to group and it seems like the 'group_by' function is OK for my situation.http://apidock.com/rails/Enumerable/group_byI used it in Rails 3.2.13. But I see it's deprecated in 4.0.2.Which function should I use? <code>  grouped_array = my_array.group_by(&:my_function)# Assume run 'my_function' have result1 on element1, element3 and result2 on element2, element4, then: # grouped_array = { # result1 => [element1, element3], # result2 => [element2, element4], # ... # }",Is Rails group_by deprecated?
Compare string to regex in rspec?`," I was doing but url_address might have other text after abc so I am trying but I am getting I also tried but I get <code>  expect(@link.url_address == 'abc').to be_true expect(@link.url_address =~ 'abc').to be_true Failure/Error: expect(@link.url_address =~ /abc/).to be_true expected to respond to `true?` expect(@link.url_address).to =~ /abc/ Failure/Error: expect(@link.url_address).to =~ /abc/ ArgumentError: The expect syntax does not support operator matchers, so you must pass a matcher to `#to`.",Compare string to regex in rspec?
"""No explicit conversion of Symbol into String"" for new records in rails 4"," After my rails 4 upgrade, trying to create a new record for any of my ActiveRecord classes gives For example, here is my links links_params method but I get <code>  No explicit conversion of Symbol into String def link_params params.require(:link) .permit(:url_address, :group_id, :alt_text, :version_number, :position, :content_date, :verified_date) # This is line 157end# line 118 is: @link = Link.new(link_params) TypeError (no implicit conversion of Symbol into String): app/controllers/links_controller.rb:157:in `link_params' app/controllers/links_controller.rb:118:in `create'This error occurred while loading the following files:linkParameters:{""utf8""=>"""", ""authenticity_token""=>""0FqFTx2EjCIO+R+rm97lF15+id4b452n+dBuUNxAL9U="", ""link""=>{""url_address""=>""http://www.google.com"", ""alt_text""=>"""", ""version_number""=>"""", ""group_id""=>""49"", ""content_date""=>""08/18/2014""}, ""commit""=>""Save""}","""No explicit conversion of Symbol into String"" for new records in rails 4.0.1 (only)"
Ruby - Sorting array elements by date," I have the following array. Our array stores 10 string objects. In order to sort them my way, I need to re-arrange each element. This way, 1/1/2014 doesn't come before 12/13/1994 for example.I tried the following I would like to sort this array by date, with the newest dates first.Actual Output Expected Output The solution involves utilizing the Ruby Array Class sort_by method. I would like to sort with the date format, where newer dates come before earlier dates.My question is, how would I sort the array based on the date.My apologies if this is a stupid question, but I've searched this site, and couldn't find any results.Thank you in advance for any help. <code>  dates = [""6/23/2014"", ""8/5/2014"", ""8/19/2014"", ""6/26/2014"", ""8/19/2014"", ""8/19/2014"",""7/8/2014"", ""6/3/2014"", ""7/30/2014"", ""7/3/2014"", ""6/3/2014"", ""6/26/2014""] ""2014/8/5"", ""2014/8/19"", ""2014/8/19"", etc. dates.sort_by {|date|date.split(/[\/]/).rotate(-1).join('/')} 8/5/20148/19/20148/19/20148/19/20147/8/20147/30/20147/3/20146/3/20146/3/20146/26/2014 8/19/20148/19/20148/19/20148/5/20147/30/20147/3/20146/26/20146/3/20146/3/2014",Sorting array elements by date
Strange ruby regex behaviour," I am using ruby 2.1, but the same thing can be replicated on rubular site.If this is my string: And I do a regex match with this expression: I am expecting to get the longer token as a match. Instead I get the second alternation as a match.As far as I know it does work like that when not in chinese characters.If this is my string: And I use this regex: Returned matching result is foobar. If the order is in the other way, than the matching string is foo. That makes sense to me. <code>  (|) foobar (foobar|foo)",Why won't a longer token in an alternation be matched?
Cannot instal Aptana Studio 3.6 on Windows," I'd like to use Aptana Studio for Rails development under Windows. I currently have different dev tools & ide's up and running (like git/ruby/jdk) and I'd like to install Aptana Studio as well but I can't. After downloading and running installer, it starts properly and after I choose destination dir, it starts downloading prequisities. I have several problems with it:After a while, it tries to install node.js (well, I am not sure why, but let it be) and sometimes it installs it ok, but sometimes it just fails with no error, telling me only that aptana couldn't install prequisities.If by a chance node.js is installed, it tries to install msysgit (again, I don't know why, because I have git installed and added to PATH). When installing msysgit is done, all i get is info that ""installing msysgit failed"" and all I can do is click finish in installer which is telling me that prequisities couldn't be installed.I am using Win7 x64, ruby 1.9.3p-545, msysgit 1.8.4, jdk 1.7. Does anyone had simmilar problem and succesfully installed this ide?  <code> ",Cannot install Aptana Studio 3.6 on Windows
How to access a colon-hash key via varaible in ruby," I have an array of hashes to write a generic checker for, so I want to pass in the name of a key to be checked. The hash was defined with keys with symbols (colon prefixes). I can't figure out how to use the variable as a key properly. Even though the key exists in the hash, using the variable to access it results in nil. In IRB I do this: How do I access the hash key through a variable? Perhaps another way to ask is, how do I coerce the variable to a symbol? <code>  >> family = { 'husband' => ""Homer"", 'wife' => ""Marge"" }=> {""husband""=>""Homer"", ""wife""=>""Marge""}>> somevar = ""husband""=> ""husband"">> family[somevar]=> ""Homer"">> another_family = { :husband => ""Fred"", :wife => ""Wilma"" }=> {:husband=>""Fred"", :wife=>""Wilma""}>> another_family[somevar]=> nil>>",How to access a symbol hash key using a variable in Ruby
How to access a colon-hash key via variable in ruby," I have an array of hashes to write a generic checker for, so I want to pass in the name of a key to be checked. The hash was defined with keys with symbols (colon prefixes). I can't figure out how to use the variable as a key properly. Even though the key exists in the hash, using the variable to access it results in nil. In IRB I do this: How do I access the hash key through a variable? Perhaps another way to ask is, how do I coerce the variable to a symbol? <code>  >> family = { 'husband' => ""Homer"", 'wife' => ""Marge"" }=> {""husband""=>""Homer"", ""wife""=>""Marge""}>> somevar = ""husband""=> ""husband"">> family[somevar]=> ""Homer"">> another_family = { :husband => ""Fred"", :wife => ""Wilma"" }=> {:husband=>""Fred"", :wife=>""Wilma""}>> another_family[somevar]=> nil>>",How to access a symbol hash key using a variable in Ruby
Strong parameters for create and update with nested models Rails," Here are my 3 models. Here are some portions of my Team controller. My objective here is to add/update members to a certain team. Note that the source for adding members already exists as a group of users. Strong parameters for Team controller For the form, I only have:Name (text field)Department (combo box)Leader (combo box, with options generated depending on the selected department, submits as a selected user's user id)Members (combo box, multiple, with options generated depending on the selected department, submits as an array of selected users' user ids)I can successfully create a team, together with the passing of validations (both team and membership model), on my create. However, I have no idea on how to update the team, because if I use @team.users.clear and then simply do the same thing from create (I know, it's a bit stupid to do this), it will validate, but it will save it regardless if there's an error or not.FORM CODE Note for the form:This form works for both blank and populated forms.The :members field is select2 enabled.So my questions here are: How can I update members of team? Is it possible to update based from what my strong parameters currently have, or do they need to be revised?Should my create method be revised too?SOME OPTIONS LEADING TO SOLUTIONOption #1 (best solution so far)I only did a first-aid solution for this, so I think there's a better approach than what I did below. What I did here is to create users params with the users found from the member_ids as values. Option #2Independent from solution 1, I only had team_params as strong parameter. I created setter methods for both leader and members. But it seems that members overwrites the leader setter because I used the update method for both setters, and the update uses the same resource which is users. A workaround seems to be possible with this option. <code>  User has_many :memberships has_many :teams, through: :memberships, dependent: :destroy accepts_nested_attributes_for :membershipsTeam has_many :memberships has_many :users, through: :memberships, dependent: :destroy accepts_nested_attributes_for :membershipsMembership belongs_to :team belongs_to :user TeamsController def create @team = Team.new(team_params) @team.users << User.find(member_ids) #add leader and members to team if @team.save #redirect to created team else #show errors end end def update #TO DO: update team roster here if @team.update(team_params) #redirect to updated team else #show errors end end #parameters for team detailsdef team_params params.require(:team).permit(:name, :department)end#parameters for members (includes leader)def members_params params.require(:team).permit(:leader, members:[])end#get id values from members_params and store in an arraydef member_ids members_params.values.flattenend <%= form_for(@team, remote: true) do |f| %> <%= f.label :name, ""Name"" %> <%= f.text_field :name %> <%= f.label :department, ""Department"" %> <%= f.select :department, options_for_select([""Architectural"", ""Interior Design""], department), include_blank: true %> <%= f.label :leader, ""Leader"" %> <%= f.select :leader, select_leaders(department, @team.id), {include_blank: true, selected: pre_select(:leader)} %> <%= f.label :members, ""Members"" %> <%= f.select :members, select_members(department, @team.id), {include_blank: true}, {id: ""team_members"", multiple: :multiple, data: {member_ids: pre_select(:members)}}%><% end %> TeamsController def create team = Team.new(team_params.merge({users: User.find(member_ids)})) ... end def update ... if @team.update(team_params.merge({users: User.find(member_ids)})) .. end TeamsController ... private def team_params params.require(:team).permit(:name, :department, :leader, members:[]) end Team ... def leader=(leader_id) #self.update(users: User.find(leader_id)) end def members=(members_ids) #self.update(users: User.find(members_id)) end",Create and update with nested models using strong parameters Rails
Ruby program that counts the numer of times two letters appear together," I am trying to make a Ruby program that counts the numer of times two letters appear together. This is what is written in the file I'm reading: And this is what I'm trying to get: I can't get it to work properly. This is my code so far: This is the result I'm getting: Why am I not getting every combination of characters? What should I ad to my regex so it would count every combination of characters? <code>  holachau ho;ol;la;ch;ha;au;1;1;1;1;1;1; file = File.read(gets.chomp)todo = file.scan(/[a-z][a-z]/).each_with_object(Hash.new(0)) { |a, b| b[a] += 1 }keys = ''values = ''todo.each_key { |key| keys += key + ';' }todo.each_value { |value| values += value.to_s + ';'}puts keysputs values ho;la;ch;au;1;1;1;1;",Counting the number of times two letters appear together
Counting the numer of times two letters appear together," I am trying to make a Ruby program that counts the numer of times two letters appear together. This is what is written in the file I'm reading: And this is what I'm trying to get: I can't get it to work properly. This is my code so far: This is the result I'm getting: Why am I not getting every combination of characters? What should I ad to my regex so it would count every combination of characters? <code>  holachau ho;ol;la;ch;ha;au;1;1;1;1;1;1; file = File.read(gets.chomp)todo = file.scan(/[a-z][a-z]/).each_with_object(Hash.new(0)) { |a, b| b[a] += 1 }keys = ''values = ''todo.each_key { |key| keys += key + ';' }todo.each_value { |value| values += value.to_s + ';'}puts keysputs values ho;la;ch;au;1;1;1;1;",Counting the number of times two letters appear together
ruby slim - class for a div from variable," I am aware of this post here:Ruby Slim - How do you define an element's class with a rails helper or variable?and I have tried all three solutions. For me unfortunately not one of them is working.forum.rb forum_feed.js.coffee It all works as expected when I want to print the variables as text on the website. However I need the divs containing as well the variable for the title. Whatever I try I am unable to get the divs class with the variable of the title.I believe I need to create a helper something along these lines and a content_tag: <code>  .panel .panel-heading .span = @forum.name .panel-body .row .col-md-7 #{t('global.topic')} .col-md-3.value.title .col-md-1.value.topic .col-md-1.value.date window.ForumFeedUI = flight.component -> @defaultAttrs titleSelector: '.value.volume' topicSelector: '.value.topic' dateSelector: '.value.date' @refresh = (event, data) -> @update @select('volumSelector'), data.volume @update @select('topicSelector'), data.topic @update @select('dateSelector'), data.date content_tag(:div, content_tag(:p, ""Hello world!""), class: ""strong"")div = t("".#{forum_title title}"")def forum_title(title, &block) content_tag :div, class: ""col-md-3-#{title}"" do capture(&block) endend",Ruby slim - class for a div from variable
Accessing headers from sinatra," I am trying to access the headers in a filter in sinatra. My request includes the header ""HTTP_AUTH"", however I can't access it. My filter is It works correctly from my rack test. But when I try from other sources I can't access it. If I puts request.env I can see the token is in the request, but I can't access it. What am I doing wrong? <code>  before do halt 403 unless request['HTTP_AUTH'] == 'test'end browser.get '/mypath', ""CONTENT_TYPE"" => ""application/json"", ""HTTP_AUTH"" => 'test' ""HTTP_CONNECTION""=>""close"", ""HTTP_AUTH""=>""test"", ""HTTP_ACCEPT""=>""application/json"", ",Accessing headers from Sinatra
How to determine mime type by its extension? ( Ruby )," I've seen questions like this on stackoverflow but nothing was for ruby. So I have file extensions like these: css, html, js, jsonAnd I want to convert them into: text/css, text/html, text/javascript, application/jsonI want to achieve this in ruby.So after writing this: I should get: If there are any gems for this they are also welcome. <code>  ext_to_mime(""css"") text/css",How to determine mime type by the file extension? ( Ruby )
open-uri 404 not found but can access normally from web browser," I tried many URLs on this and they seem to be fine until I came across this particular one: This is the result: I can access this from a web browser, I just don't get it at all.What is going on, and how can I deal with this kind of error? Can I ignore it and let the rest do their work? <code>  require 'rubygems'require 'nokogiri'require 'open-uri'doc = Nokogiri::HTML(open(""http://www.moxyst.com/fashion/men-clothing/underwear.html""))puts doc /Users/macbookair/.rvm/rubies/ruby-2.0.0-p481/lib/ruby/2.0.0/open-uri.rb:353:in `open_http': 404 Not Found (OpenURI::HTTPError) from /Users/macbookair/.rvm/rubies/ruby-2.0.0-p481/lib/ruby/2.0.0/open-uri.rb:709:in `buffer_open' from /Users/macbookair/.rvm/rubies/ruby-2.0.0-p481/lib/ruby/2.0.0/open-uri.rb:210:in `block in open_loop' from /Users/macbookair/.rvm/rubies/ruby-2.0.0-p481/lib/ruby/2.0.0/open-uri.rb:208:in `catch' from /Users/macbookair/.rvm/rubies/ruby-2.0.0-p481/lib/ruby/2.0.0/open-uri.rb:208:in `open_loop' from /Users/macbookair/.rvm/rubies/ruby-2.0.0-p481/lib/ruby/2.0.0/open-uri.rb:149:in `open_uri' from /Users/macbookair/.rvm/rubies/ruby-2.0.0-p481/lib/ruby/2.0.0/open-uri.rb:689:in `open' from /Users/macbookair/.rvm/rubies/ruby-2.0.0-p481/lib/ruby/2.0.0/open-uri.rb:34:in `open' from test.rb:5:in `<main>' ","404 not found, but can access normally from web browser"
Capybara Poltergeist blocked on specific site?," I am using capybara poltergeist to automate a small script on tumblr.comMy script works fine with my chrome driver.. And my poltergeist driver loads all other websites just fine, but for some reason throws a Capybara::Poltergeist::StatusFailError when I try to load tumblr.Steps for reproduction: I tried to set all of my headers to look my google chrome's request, but that also does not seem to fix it. Does anyone have any suggestions? <code>  $ brew install phantomjs$ gem install capybara$ gem install poltergeist$ gem install selenium-webdriver$ irbrequire 'capybara/poltergeist'module Drivers class Poltergeist < Capybara::Poltergeist::Driver def needs_server? false end endendCapybara.register_driver :poltergeist_errorless do |app| Drivers::Poltergeist.new(app, js_errors: false, timeout: 10000, phantomjs_options: ['--load-images=no', '--ignore-ssl-errors=yes'])endsession = Capybara::Session.new(:poltergeist_errorless)session.visit('https://google.com') # This works finesession.visit('https://tumblr.com') # This does not work?",Ruby: Phantom.js blocked on specific site?
Use .reverse_merge! or .merge in default methods params," You can do both and to assign default values in method's params.The question is: which one is better? Which one you would rather use? Is there any difference in performance, code readability or what ever else? EDIT: I added bang (!) by accident... didn't mean to ask about difference between no bang method vs bang method <code>  def setup(options = {}) options.reverse_merge :size => 25, :velocity => 10end def setup(options = {}) { :size => 25, :velocity => 10 }.merge(options)end",Use .reverse_merge or .merge in default methods params
What is this notation in rspec: it { is_expected_to..}," I am reading the 'Better specs' page, and in one of the examples it says: And I don't recognize this. I usually would do: What is that syntax? <code>  context 'when logged in' do it { is_expected.to respond_with 200 }endcontext 'when logged out' do it { is_expected.to respond_with 401 }end context 'when logged out' do it 'responds with a 401' do expect(response).to eq(401) endend",What is this notation in rspec: it { is_expected.to ... }
Ruby Variable inside of Regex Code," I'm running the grep method to filter by pattern matching. This is an example code. However, ruby isn't allowing me to input the area_code withing the block inside the rails view. Instead, I'm forced to hardcode it like so: Keep in mind, city is a variable. For example, However, it updates. Do you know how can I pass a variable through the grep method?Also, I tried companies.grep /#{city}/, but it didn't work <code>  companies.grep /city/ companies.grep /miami/ city = miami",How to put Ruby Variable inside of Regex Code
Ruby Array.include? multiple values," [2, 6, 13, 99, 27].include?(2) works well for checking if the array includes one value. But what if I want to check if an array includes any one from a list of multiple values? Is there a shorter way than doing Array.include?(a) or Array.include?(b) or Array.include?(c) ...? <code> ",Array.include? multiple values
Ruby Class vs Struct in Ruby, I have seen codebases using Structs to wrap around attributes and behavior inside a class.What is the difference between a Ruby Class and a Struct? And when should one be used over the other.? <code> ,Ruby Class vs Struct
How to share worker among two different application on heroku?," I have two separate applications running on heroku and pointing to same database, first one responsible for user interfaceand second one for admin interface, I am using sidekiq with redis for background job processing, I have added one worker and I am able to share 'redis-server' by setting environment variable pointing to same Redis providing Addon, Now i wish to share worker too, because adding the extra worker will cost double.Please suggest, whether this is even possible or not?  <code> ",How to share worker among two different applications on heroku?
Ruby: Why Hash === {} returns true?," I have a hash, let's say: Why is it that Hash === ahash returns true, but ahash === Hash doesn't? Is this some default ruby behavior with === and class name? <code>  ahash = {test1: ""test1"", test2: ""test2""}",Ruby: Why does Hash === {} return true?
Ruby - Count the number of times a string appears in another string?," I'm trying to count the number of times a string appears in another string.I know you can count the number of times a letter appears in a string: But if I search for how many times 'aa' appears in this string, I also get two. I don't understand this. I put the value in quotation marks, so I'm searching for the number of times the exact string appears, not just the letters. <code>  string = ""aabbccddbb""string.count('a')=> 2 string.count('aa')=> 2",Ruby: How to count the number of times a string appears in another string?
"Rails "".pluck"" on joined tables with columns of the same name returns one value and then nil."," I expect this to return the id of each features and the id of the experiment. Instead this returns the id of the experiment and then nil This is strange in three regards:even though it is an inner join and only an Experiment is returned I am able to pluck columns from features (features.name)everything is fine until a column name is repeated.the last plucked column is reported first, as if the first column is overwritten. Switching the order of pluck switches the returned value.This seems like a bug but maybe I am doing something wrong. Any tips?SQL output: Note. This is a simplified question pertaining to a query looking like: <code>  Experiment has_many :features Feature belongs_to :experimentExperiment.where(""experiments.id=1"") .joins(:features) .pluck(""features.id"", ""experiments.id"") [ [1, 1], [2, 1], [3, 1], # ....] [ [1, nil], [1, nil], [1, nil], # ....] SELECT features.id, experiments.id FROM ""experiments"" INNER JOIN ""features"" ON ""features"".""experiment_id"" = ""experiments"".""id"" WHERE (experiments.id=1) Experiment.where(""experiments.id=1"") .joins(feature: { child2: { :child3 } }) .pluck(""feature.id, child3.id"")","Rails "".pluck"" on joined tables with columns of the same name returns one value and then nil"
could not bundle install because of 'eventmachine 1.0.3'," $ bundle install $ gem list $ gem build eventmachine -v 1.0.3 <code>  Errno::ENOENT: No such file or directory @ rb_sysopen - /Users/Sean/.rbenv/versions/2.1.0/lib/ruby/gems/2.1.0/gems/eventmachine-1.0.3/ext/gem_make.outAn error occurred while installing eventmachine (1.0.3), and Bundler cannotcontinue.Make sure that `gem install eventmachine -v '1.0.3'` succeeds before bundling. eventmachine (1.0.3 x86-mingw32) ERROR: While executing gem ... (Gem::CommandLineError)Too many gem names (eventmachine, 1.0.3); please specify only one",Could not bundle install because of 'eventmachine 1.0.3'
Convert HH:MM:SS to human readable," I am using Rails 4, Ruby 2.1 with PostgreSQL.I have a database field called duration which is an interval data type.When pulling out the data in this column it returns in the format of hh:mm:ss, e.g. 01:30:00.I am trying to figure out a way to display this as 1 hour, 30 minutes.Other examples:02:00:00 to 2 hours02:15:00 to 2 hours, 15 minutes02:01:00 to 2 hours, 1 minute <code> ","Display duration in a human readable format such as ""X hours, Y minutes"""
How to access the rspec tag filters in before(:suite)/before(:all) hook," I want to access the tag filters passed in the command lineCommand line RSpec config In the before(:suite) hook I want to access the tag filters specified in the command line in the config.According to the rspec-core code base the inclusion tag filters are stored in inclusion_filter of RSpec.configuration. In theory I should be able to access them as follows: But, for some reason, I get an empty hash even when I pass the tag from the command line. <code>  rspec --tag use_ff RSpec.configure do |config| config.before :suite, type: :feature do # how do I check if use_ff filter was specified in the command line? if filter[:use_ff] use_selenium else use_poltergeist end endend RSpec.configure do |config| config.before :suite, type: :feature do if config.filter[:use_ff] # filter is an alias for inclusion_filter use_selenium else use_poltergeist end endend",How to access tag filters in a before(:suite)/before(:all) hook in RSpec?
How to access the RSpec tag filters in before(:suite)/before(:all) hook," I want to access the tag filters passed in the command lineCommand line RSpec config In the before(:suite) hook I want to access the tag filters specified in the command line in the config.According to the rspec-core code base the inclusion tag filters are stored in inclusion_filter of RSpec.configuration. In theory I should be able to access them as follows: But, for some reason, I get an empty hash even when I pass the tag from the command line. <code>  rspec --tag use_ff RSpec.configure do |config| config.before :suite, type: :feature do # how do I check if use_ff filter was specified in the command line? if filter[:use_ff] use_selenium else use_poltergeist end endend RSpec.configure do |config| config.before :suite, type: :feature do if config.filter[:use_ff] # filter is an alias for inclusion_filter use_selenium else use_poltergeist end endend",How to access tag filters in a before(:suite)/before(:all) hook in RSpec?
Roman Numerals in Python," In a coding challenge I recently attempted, I found this as an alternative solution to converting numbers to Roman numerals. I don't really understand how this code works. I just figured out what divmod does but else, I am very confused. <code>  class Integer def to_roman roman_arr = { 1000 => ""M"", 900 => ""CM"", 500 => ""D"", 400 => ""CD"", 100 => ""C"", 90 => ""XC"", 50 => ""L"", 40 => ""XL"", 10 => ""X"", 9 => ""IX"", 5 => ""V"", 4 => ""IV"", 1 => ""I"" } num = self roman_arr.reduce("""") do |res, (arab, roman)| whole_part, num = num.divmod(arab) res << roman * whole_part end endend",Roman Numerals in Ruby
how to remove nil and blank string in an aray in Ruby," I am new to Ruby and stuck with this issue. Let's say I have an array like this: and I want to remove nil and blank string from it, i.e. final array should be: I tried compact but it gives this: I was wondering if there's a smart way of doing this in Ruby. <code>  arr = [1, 2, 's', nil, '', 'd'] arr = [1, 2, 's', 'd'] arr.compact!arr #=> [1, 2, 's', '', 'd'] doesn't remove empty string.",Remove nil and blank string in an array in Ruby
how to remove nil and blank string in an array in Ruby," I am new to Ruby and stuck with this issue. Let's say I have an array like this: and I want to remove nil and blank string from it, i.e. final array should be: I tried compact but it gives this: I was wondering if there's a smart way of doing this in Ruby. <code>  arr = [1, 2, 's', nil, '', 'd'] arr = [1, 2, 's', 'd'] arr.compact!arr #=> [1, 2, 's', '', 'd'] doesn't remove empty string.",Remove nil and blank string in an array in Ruby
Rspec 3 vs Rspec 2 mathers," Learning how to Rspec 3. I have a question on the matchers. The tutorial i am following is based on Rspec 2. Why is the code causing an error while the one i commented out passing with depreciation warning.Error <code>  describe Team do it ""has a name"" do #Team.new(""Random name"").should respond_to :name expect { Team.new(""Random name"") }.to be(:name) end it ""has a list of players"" do #Team.new(""Random name"").players.should be_kind_of Array expect { Team.new(""Random name"").players }.to be_kind_of(Array) endend Failures: 1) Team has a name Failure/Error: expect { Team.new(""Random name"") }.to be(:name) You must pass an argument rather than a block to use the provided matcher (equal :name), or the matcher must implement `supports_block_expectations?`. # ./spec/team_spec.rb:7:in `block (2 levels) in <top (required)>' 2) Team has a list of players Failure/Error: expect { Team.new(""Random name"").players }.to be_kind_of(Array) You must pass an argument rather than a block to use the provided matcher (be a kind of Array), or the matcher must implement `supports_block_expectations?`. # ./spec/team_spec.rb:13:in `block (2 levels) in <top (required)>'",Rspec 3 vs Rspec 2 matchers
fatal: exception reentered ... `rescue in rollback_active_record_state!'," I'm getting a couple of errors in my Rails 4 appointment scheduling application that I can't seem to correct or figure out the root cause. My seeds file keeps breaking with well known ""error, stack level too deep"". But when I run the method I believe it is breaking on, I get this different error: The involved files are as follows.Seeds.rb calendar_manager.rb Going through my commit history, I am not aware of any changes made to the generate_time_slots! method, and it worked previously. I'm using Rails 4, Ruby 2. <code>  Seeding time slots for workday no. 1 (0.5ms) SAVEPOINT active_record_1 (0.5ms) ROLLBACK TO SAVEPOINT active_record_1fatal: exception reenteredfrom /Users/rskelley/.rvm/gems/ruby-2.0.0-p481/gems/activerecord-4.1.5/lib/active_record/transactions.rb:286:in `rescue in rollback_active_record_state!' puts ""Seeding Workdays.""day_numbers = (1..5).to_a5.times do start_time = WorkDay.time_slot_format(9) end_time = WorkDay.time_slot_format([5,6][rand(2)]) rand_date = Date.today + day_numbers.slice!(0) WorkDay.create(start_time: start_time, end_time: end_time, date: rand_date )endputs ""Generating Time Slots for each WorkDay""workdays = WorkDay.allworkday_number = 1workdays.each do |workday| calendar_manager = CalendarManager.new(workday: workday, date: workday.date) puts ""Seeding time slots for workday no. #{workday_number}"" workday_number += 1 calendar_manager.generate_time_slots!end include ActiveModel::Validationsinclude ActiveModel::Conversionextend ActiveModel::Namingextend AppointmentToolsattr_accessor :workday, :date, :slot_length def generate_time_slots!(increment=15) # Space between start and end @slot_length ||= increment day = self.workday.date hour = 9 minute = 0 @time_slots = Array.new 33.times do beginning = TimeOfDay.parse(hour) + minute.minutes ending = beginning + @slot_length.minutes time_slot = TimeSlot.create work_day_id: self.workday.id, start_time: beginning.strftime(""%I:%M %p""), end_time: ending.strftime(""%I:%M %p""), date: day @time_slots << time_slot minute += @slot_length end end",What Does This Rails4 error mean? fatal: exception reentered ... `rescue in rollback_active_record_state!'
Ruby - gem install error ( sass compass )," When I want to install sass and compass, I get this message. Can someone help me?  <code>  Microsoft Windows [version 6.1.7601]Copyright (c) 2009 Microsoft Corporation. Tous droits rservs.C:\Users\Bk>gem install sassERROR: While executing gem (Encoding::UndefinedConversionError) U+2019 to CP850 in conversion from UTF-16LE to UTF-8 to CP850",Gem install error (sass compass)
Ruby On Rails - How to fix PG::DuplicatePstatement: ERROR?," I would like to know how to prevent this type of error. So far I tried disabling prepared statements via the database configuration at AWS Opsworks:Eg:Database Configuration Error Log Thanks in advance. <code>  },""deploy"": { ""app_name"": { ""database"": { ""adapter"": ""postgresql"", ""prepared_statements"": false, ""username"": ""username"", ""database"": ""db_name_production"", ""host"": ""cool_host.com"", ""password"": ""easy"" }, PG::DuplicatePstatement: ERROR: prepared statement ""a6"" already exists : INSERT INTO ""polls"" (""answer_type"", ""auto_enable"", ""can_have_correct_answer"", ""created_at"", ""de"", ""en"", ""es"", ""event_id"", ""game_card_length"", ""game_card_start"", ""id_language_code"", ""is_custom_question"", ""ja"", ""language_id"", ""points_award"", ""poll_upload_id"", ""pop_up_length"", ""pop_up_start"", ""pop_up_trigger_type"", ""pt"", ""question"", ""question_identifier"", ""question_tag"", ""question_translation"", ""question_type"", ""scorecard_presentation"", ""show_at_minute"", ""show_n_seconds"", ""template_type"", ""th"", ""trigger_restriction"", ""updated_at"", ""vi"", ""vizrt_show_name"", ""vizrt_template_name"", ""vote_options"", ""vote_options_translation"") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19, $20, $21, $22, $23, $24, $25, $26, $27, $28, $29, $30, $31, $32, $33, $34, $35, $36, $37) RETURNING ""id""URL: http://app.domain.com/admin/pollsBACKTRACE:/home/deploy/.bundler/app_pro/ruby/1.9.1/gems/activerecord-3.2.19/lib/active_record/connection_adapters/postgresql_adapter.rb:1208:in `prepare'/home/deploy/.bundler/app_pro/ruby/1.9.1/gems/activerecord-3.2.19/lib/active_record/connection_adapters/postgresql_adapter.rb:1208:in `prepare_statement'/home/deploy/.bundler/app_pro/ruby/1.9.1/gems/activerecord-3.2.19/lib/active_record/connection_adapters/postgresql_adapter.rb:1168:in `exec_cache'/home/deploy/.bundler/app_pro/ruby/1.9.1/gems/activerecord-3.2.19/lib/active_record/connection_adapters/postgresql_adapter.rb:661:in `block in exec_query'/home/deploy/.bundler/app_pro/ruby/1.9.1/gems/activerecord-3.2.19/lib/active_record/connection_adapters/abstract_adapter.rb:280:in `block in log'/home/deploy/.bundler/app_pro/ruby/1.9.1/gems/activesupport-3.2.19/lib/active_support/notifications/instrumenter.rb:20:in `instrument'/home/deploy/.bundler/app_pro/ruby/1.9.1/gems/activerecord-3.2.19/lib/active_record/connection_adapters/abstract_adapter.rb:275:in `log'/home/deploy/.bundler/app_pro/ruby/1.9.1/gems/newrelic_rpm-3.8.1.221/lib/new_relic/agent/instrumentation/active_record.rb:46:in `block in log_with_newrelic_instrumentation'/home/deploy/.bundler/app_pro/ruby/1.9.1/gems/newrelic_rpm-3.8.1.221/lib/new_relic/agent/method_tracer.rb:235:in `trace_execution_scoped'/home/deploy/.bundler/app_pro/ruby/1.9.1/gems/newrelic_rpm-3.8.1.221/lib/new_relic/agent/instrumentation/active_record.rb:43:in `log_with_newrelic_instrumentation'/home/deploy/.bundler/app_pro/ruby/1.9.1/gems/activerecord-3.2.19/lib/active_record/connection_adapters/postgresql_adapter.rb:659:in `exec_query'/home/deploy/.bundler/app_pro/ruby/1.9.1/gems/activerecord-3.2.19/lib/active_record/connection_adapters/abstract/database_statements.rb:63:in `exec_insert'/home/deploy/.bundler/app_pro/ruby/1.9.1/gems/activerecord-3.2.19/lib/active_record/connection_adapters/abstract/database_statements.rb:90:in `insert'/home/deploy/.bundler/app_pro/ruby/1.9.1/gems/activerecord-3.2.19/lib/active_record/connection_adapters/abstract/query_cache.rb:14:in `insert'/home/deploy/.bundler/app_pro/ruby/1.9.1/gems/activerecord-3.2.19/lib/active_record/relation.rb:66:in `insert'/home/deploy/.bundler/app_pro/ruby/1.9.1/gems/activerecord-3.2.19/lib/active_record/persistence.rb:367:in `create'/home/deploy/.bundler/app_pro/ruby/1.9.1/gems/activerecord-3.2.19/lib/active_record/timestamp.rb:58:in `create'/home/deploy/.bundler/app_pro/ruby/1.9.1/gems/activerecord-3.2.19/lib/active_record/callbacks.rb:268:in `block in create'/home/deploy/.bundler/app_pro/ruby/1.9.1/gems/activesupport-3.2.19/lib/active_support/callbacks.rb:403:in `_run__355353764622945659__create__4467585814663071278__callbacks'/home/deploy/.bundler/app_pro/ruby/1.9.1/gems/activesupport-3.2.19/lib/active_support/callbacks.rb:405:in `__run_callback'/home/deploy/.bundler/app_pro/ruby/1.9.1/gems/activesupport-3.2.19/lib/active_support/callbacks.rb:385:in `_run_create_callbacks'/home/deploy/.bundler/app_pro/ruby/1.9.1/gems/activesupport-3.2.19/lib/active_support/callbacks.rb:81:in `run_callbacks'/home/deploy/.bundler/app_pro/ruby/1.9.1/gems/activerecord-3.2.19/lib/active_record/callbacks.rb:268:in `create'/home/deploy/.bundler/app_pro/ruby/1.9.1/gems/activerecord-3.2.19/lib/active_record/persistence.rb:348:in `create_or_update'/home/deploy/.bundler/app_pro/ruby/1.9.1/gems/activerecord-3.2.19/lib/active_record/callbacks.rb:264:in `block in create_or_update'/home/deploy/.bundler/app_pro/ruby/1.9.1/gems/activesupport-3.2.19/lib/active_support/callbacks.rb:447:in `_run__355353764622945659__save__4467585814663071278__callbacks'/home/deploy/.bundler/app_pro/ruby/1.9.1/gems/activesupport-3.2.19/lib/active_support/callbacks.rb:405:in `__run_callback'/home/deploy/.bundler/app_pro/ruby/1.9.1/gems/activesupport-3.2.19/lib/active_support/callbacks.rb:385:in `_run_save_callbacks'/home/deploy/.bundler/app_pro/ruby/1.9.1/gems/activesupport-3.2.19/lib/active_support/callbacks.rb:81:in `run_callbacks'/home/deploy/.bundler/app_pro/ruby/1.9.1/gems/activerecord-3.2.19/lib/active_record/callbacks.rb:264:in `create_or_update'/home/deploy/.bundler/app_pro/ruby/1.9.1/gems/activerecord-3.2.19/lib/active_record/persistence.rb:84:in `save'/home/deploy/.bundler/app_pro/ruby/1.9.1/gems/activerecord-3.2.19/lib/active_record/validations.rb:50:in `save'/home/deploy/.bundler/app_pro/ruby/1.9.1/gems/activerecord-3.2.19/lib/active_record/attribute_methods/dirty.rb:22:in `save'/home/deploy/.bundler/app_pro/ruby/1.9.1/gems/activerecord-3.2.19/lib/active_record/transactions.rb:259:in `block (2 levels) in save'/home/deploy/.bundler/app_pro/ruby/1.9.1/gems/activerecord-3.2.19/lib/active_record/transactions.rb:313:in `block in with_transaction_returning_status'/home/deploy/.bundler/app_pro/ruby/1.9.1/gems/activerecord-3.2.19/lib/active_record/connection_adapters/abstract/database_statements.rb:192:in `transaction'/home/deploy/.bundler/app_pro/ruby/1.9.1/gems/activerecord-3.2.19/lib/active_record/transactions.rb:208:in `transaction'/home/deploy/.bundler/app_pro/ruby/1.9.1/gems/newrelic_rpm-3.8.1.221/lib/new_relic/agent/method_tracer.rb:497:in `block in transaction_with_trace_ActiveRecord_self_name_transaction'/home/deploy/.bundler/app_pro/ruby/1.9.1/gems/newrelic_rpm-3.8.1.221/lib/new_relic/agent/method_tracer.rb:235:in `trace_execution_scoped'/home/deploy/.bundler/app_pro/ruby/1.9.1/gems/newrelic_rpm-3.8.1.221/lib/new_relic/agent/method_tracer.rb:493:in `transaction_with_trace_ActiveRecord_self_name_transaction'/home/deploy/.bundler/app_pro/ruby/1.9.1/gems/activerecord-3.2.19/lib/active_record/transactions.rb:311:in `with_transaction_returning_status'/home/deploy/.bundler/app_pro/ruby/1.9.1/gems/activerecord-3.2.19/lib/active_record/transactions.rb:259:in `block in save'/home/deploy/.bundler/app_pro/ruby/1.9.1/gems/activerecord-3.2.19/lib/active_record/transactions.rb:270:in `rollback_active_record_state!'/home/deploy/.bundler/app_pro/ruby/1.9.1/gems/activerecord-3.2.19/lib/active_record/transactions.rb:258:in `save'/home/deploy/.bundler/app_pro/ruby/1.9.1/bundler/gems/active_admin-b41450a52c09/lib/active_admin/resource_controller/data_access.rb:163:in `block in save_resource'/home/deploy/.bundler/app_pro/ruby/1.9.1/bundler/gems/active_admin-b41450a52c09/lib/active_admin/callbacks.rb:78:in `run_save_callbacks'/home/deploy/.bundler/app_pro/ruby/1.9.1/bundler/gems/active_admin-b41450a52c09/lib/active_admin/resource_controller/data_access.rb:162:in `save_resource'/home/deploy/.bundler/app_pro/ruby/1.9.1/bundler/gems/active_admin-b41450a52c09/lib/active_admin/resource_controller/data_access.rb:152:in `block in create_resource'/home/deploy/.bundler/app_pro/ruby/1.9.1/bundler/gems/active_admin-b41450a52c09/lib/active_admin/callbacks.rb:78:in `run_create_callbacks'/home/deploy/.bundler/app_pro/ruby/1.9.1/bundler/gems/active_admin-b41450a52c09/lib/active_admin/resource_controller/data_access.rb:151:in `create_resource'/home/deploy/.bundler/app_pro/ruby/1.9.1/gems/inherited_resources-1.4.1/lib/inherited_resources/actions.rb:33:in `create'/home/deploy/.bundler/app_pro/ruby/1.9.1/bundler/gems/active_admin-b41450a52c09/lib/active_admin/resource_controller/actions.rb:48:in `create'/srv/www/app_pro/releases/20140930174854/app/admin/polls.rb:13:in `create'/home/deploy/.bundler/app_pro/ruby/1.9.1/gems/actionpack-3.2.19/lib/action_controller/metal/implicit_render.rb:4:in `send_action'/home/deploy/.bundler/app_pro/ruby/1.9.1/gems/actionpack-3.2.19/lib/abstract_controller/base.rb:167:in `process_action'/home/deploy/.bundler/app_pro/ruby/1.9.1/gems/actionpack-3.2.19/lib/action_controller/metal/rendering.rb:10:in `process_action'/home/deploy/.bundler/app_pro/ruby/1.9.1/gems/actionpack-3.2.19/lib/abstract_controller/callbacks.rb:18:in `block in process_action'/home/deploy/.bundler/app_pro/ruby/1.9.1/gems/activesupport-3.2.19/lib/active_support/callbacks.rb:480:in `_run__674118340747155841__process_action__4403365755486731848__callbacks'/home/deploy/.bundler/app_pro/ruby/1.9.1/gems/activesupport-3.2.19/lib/active_support/callbacks.rb:405:in `__run_callback'/home/deploy/.bundler/app_pro/ruby/1.9.1/gems/activesupport-3.2.19/lib/active_support/callbacks.rb:385:in `_run_process_action_callbacks'/home/deploy/.bundler/app_pro/ruby/1.9.1/gems/activesupport-3.2.19/lib/active_support/callbacks.rb:81:in `run_callbacks'/home/deploy/.bundler/app_pro/ruby/1.9.1/gems/actionpack-3.2.19/lib/abstract_controller/callbacks.rb:17:in `process_action'/home/deploy/.bundler/app_pro/ruby/1.9.1/gems/actionpack-3.2.19/lib/action_controller/metal/rescue.rb:29:in `process_action'/home/deploy/.bundler/app_pro/ruby/1.9.1/gems/actionpack-3.2.19/lib/action_controller/metal/instrumentation.rb:30:in `block in process_action'/home/deploy/.bundler/app_pro/ruby/1.9.1/gems/activesupport-3.2.19/lib/active_support/notifications.rb:123:in `block in instrument'/home/deploy/.bundler/app_pro/ruby/1.9.1/gems/activesupport-3.2.19/lib/active_support/notifications/instrumenter.rb:20:in `instrument'/home/deploy/.bundler/app_pro/ruby/1.9.1/gems/activesupport-3.2.19/lib/active_support/notifications.rb:123:in `instrument'/home/deploy/.bundler/app_pro/ruby/1.9.1/gems/actionpack-3.2.19/lib/action_controller/metal/instrumentation.rb:29:in `process_action'/home/deploy/.bundler/app_pro/ruby/1.9.1/gems/actionpack-3.2.19/lib/action_controller/metal/params_wrapper.rb:207:in `process_action'/home/deploy/.bundler/app_pro/ruby/1.9.1/gems/activerecord-3.2.19/lib/active_record/railties/controller_runtime.rb:18:in `process_action'/home/deploy/.bundler/app_pro/ruby/1.9.1/gems/newrelic_rpm-3.8.1.221/lib/new_relic/agent/instrumentation/rails3/action_controller.rb:38:in `block in process_action'/home/deploy/.bundler/app_pro/ruby/1.9.1/gems/newrelic_rpm-3.8.1.221/lib/new_relic/agent/instrumentation/controller_instrumentation.rb:357:in `perform_action_with_newrelic_trace'/home/deploy/.bundler/app_pro/ruby/1.9.1/gems/newrelic_rpm-3.8.1.221/lib/new_relic/agent/instrumentation/rails3/action_controller.rb:37:in `process_action'/home/deploy/.bundler/app_pro/ruby/1.9.1/gems/actionpack-3.2.19/lib/abstract_controller/base.rb:121:in `process'/home/deploy/.bundler/app_pro/ruby/1.9.1/gems/actionpack-3.2.19/lib/abstract_controller/rendering.rb:45:in `process'/home/deploy/.bundler/app_pro/ruby/1.9.1/gems/actionpack-3.2.19/lib/action_controller/metal.rb:203:in `dispatch'/home/deploy/.bundler/app_pro/ruby/1.9.1/gems/actionpack-3.2.19/lib/action_controller/metal/rack_delegation.rb:14:in `dispatch'/home/deploy/.bundler/app_pro/ruby/1.9.1/gems/actionpack-3.2.19/lib/action_controller/metal.rb:246:in `block in action'/home/deploy/.bundler/app_pro/ruby/1.9.1/gems/actionpack-3.2.19/lib/action_dispatch/routing/route_set.rb:73:in `call'/home/deploy/.bundler/app_pro/ruby/1.9.1/gems/actionpack-3.2.19/lib/action_dispatch/routing/route_set.rb:73:in `dispatch'/home/deploy/.bundler/app_pro/ruby/1.9.1/gems/actionpack-3.2.19/lib/action_dispatch/routing/route_set.rb:36:in `call'/home/deploy/.bundler/app_pro/ruby/1.9.1/gems/journey-1.0.4/lib/journey/router.rb:68:in `block in call'/home/deploy/.bundler/app_pro/ruby/1.9.1/gems/journey-1.0.4/lib/journey/router.rb:56:in `each'/home/deploy/.bundler/app_pro/ruby/1.9.1/gems/journey-1.0.4/lib/journey/router.rb:56:in `call'/home/deploy/.bundler/app_pro/ruby/1.9.1/gems/actionpack-3.2.19/lib/action_dispatch/routing/route_set.rb:608:in `call'/home/deploy/.bundler/app_pro/ruby/1.9.1/gems/omniauth-1.2.1/lib/omniauth/strategy.rb:186:in `call!'/home/deploy/.bundler/app_pro/ruby/1.9.1/gems/omniauth-1.2.1/lib/omniauth/strategy.rb:164:in `call'/home/deploy/.bundler/app_pro/ruby/1.9.1/gems/omniauth-1.2.1/lib/omniauth/builder.rb:59:in `call'/home/deploy/.bundler/app_pro/ruby/1.9.1/gems/newrelic_rpm-3.8.1.221/lib/new_relic/rack/error_collector.rb:55:in `call'/home/deploy/.bundler/app_pro/ruby/1.9.1/gems/newrelic_rpm-3.8.1.221/lib/new_relic/rack/agent_hooks.rb:32:in `call'/home/deploy/.bundler/app_pro/ruby/1.9.1/gems/newrelic_rpm-3.8.1.221/lib/new_relic/rack/browser_monitoring.rb:27:in `call'/home/deploy/.bundler/app_pro/ruby/1.9.1/gems/rack-1.4.5/lib/rack/deflater.rb:13:in `call'/home/deploy/.bundler/app_pro/ruby/1.9.1/gems/warden-1.2.3/lib/warden/manager.rb:35:in `block in call'/home/deploy/.bundler/app_pro/ruby/1.9.1/gems/warden-1.2.3/lib/warden/manager.rb:34:in `catch'/home/deploy/.bundler/app_pro/ruby/1.9.1/gems/warden-1.2.3/lib/warden/manager.rb:34:in `call'/home/deploy/.bundler/app_pro/ruby/1.9.1/gems/actionpack-3.2.19/lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'/home/deploy/.bundler/app_pro/ruby/1.9.1/gems/rack-1.4.5/lib/rack/etag.rb:23:in `call'/home/deploy/.bundler/app_pro/ruby/1.9.1/gems/rack-1.4.5/lib/rack/conditionalget.rb:35:in `call'/home/deploy/.bundler/app_pro/ruby/1.9.1/gems/actionpack-3.2.19/lib/action_dispatch/middleware/head.rb:14:in `call'/home/deploy/.bundler/app_pro/ruby/1.9.1/gems/actionpack-3.2.19/lib/action_dispatch/middleware/params_parser.rb:21:in `call'/home/deploy/.bundler/app_pro/ruby/1.9.1/gems/actionpack-3.2.19/lib/action_dispatch/middleware/flash.rb:242:in `call'/home/deploy/.bundler/app_pro/ruby/1.9.1/gems/rack-1.4.5/lib/rack/session/abstract/id.rb:210:in `context'/home/deploy/.bundler/app_pro/ruby/1.9.1/gems/rack-1.4.5/lib/rack/session/abstract/id.rb:205:in `call'/home/deploy/.bundler/app_pro/ruby/1.9.1/gems/actionpack-3.2.19/lib/action_dispatch/middleware/cookies.rb:341:in `call'/home/deploy/.bundler/app_pro/ruby/1.9.1/gems/activerecord-3.2.19/lib/active_record/query_cache.rb:64:in `call'/home/deploy/.bundler/app_pro/ruby/1.9.1/gems/activerecord-3.2.19/lib/active_record/connection_adapters/abstract/connection_pool.rb:479:in `call'/home/deploy/.bundler/app_pro/ruby/1.9.1/gems/actionpack-3.2.19/lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'/home/deploy/.bundler/app_pro/ruby/1.9.1/gems/activesupport-3.2.19/lib/active_support/callbacks.rb:405:in `_run__1037584046338014875__call__4467585814663071278__callbacks'/home/deploy/.bundler/app_pro/ruby/1.9.1/gems/activesupport-3.2.19/lib/active_support/callbacks.rb:405:in `__run_callback'/home/deploy/.bundler/app_pro/ruby/1.9.1/gems/activesupport-3.2.19/lib/active_support/callbacks.rb:385:in `_run_call_callbacks'/home/deploy/.bundler/app_pro/ruby/1.9.1/gems/activesupport-3.2.19/lib/active_support/callbacks.rb:81:in `run_callbacks'/home/deploy/.bundler/app_pro/ruby/1.9.1/gems/actionpack-3.2.19/lib/action_dispatch/middleware/callbacks.rb:27:in `call'/home/deploy/.bundler/app_pro/ruby/1.9.1/gems/actionpack-3.2.19/lib/action_dispatch/middleware/remote_ip.rb:31:in `call'/home/deploy/.bundler/app_pro/ruby/1.9.1/gems/actionpack-3.2.19/lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'/home/deploy/.bundler/app_pro/ruby/1.9.1/gems/actionpack-3.2.19/lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'/home/deploy/.bundler/app_pro/ruby/1.9.1/gems/railties-3.2.19/lib/rails/rack/logger.rb:32:in `call_app'/home/deploy/.bundler/app_pro/ruby/1.9.1/gems/railties-3.2.19/lib/rails/rack/logger.rb:16:in `block in call'/home/deploy/.bundler/app_pro/ruby/1.9.1/gems/activesupport-3.2.19/lib/active_support/tagged_logging.rb:22:in `tagged'/home/deploy/.bundler/app_pro/ruby/1.9.1/gems/railties-3.2.19/lib/rails/rack/logger.rb:16:in `call'/home/deploy/.bundler/app_pro/ruby/1.9.1/gems/actionpack-3.2.19/lib/action_dispatch/middleware/request_id.rb:22:in `call'/home/deploy/.bundler/app_pro/ruby/1.9.1/gems/rack-1.4.5/lib/rack/methodoverride.rb:21:in `call'/home/deploy/.bundler/app_pro/ruby/1.9.1/gems/rack-1.4.5/lib/rack/runtime.rb:17:in `call'/home/deploy/.bundler/app_pro/ruby/1.9.1/gems/activesupport-3.2.19/lib/active_support/cache/strategy/local_cache.rb:72:in `call'/home/deploy/.bundler/app_pro/ruby/1.9.1/gems/rack-1.4.5/lib/rack/lock.rb:15:in `call'/home/deploy/.bundler/app_pro/ruby/1.9.1/gems/actionpack-3.2.19/lib/action_dispatch/middleware/static.rb:63:in `call'/home/deploy/.bundler/app_pro/ruby/1.9.1/gems/rack-cache-1.2/lib/rack/cache/context.rb:136:in `forward'/home/deploy/.bundler/app_pro/ruby/1.9.1/gems/rack-cache-1.2/lib/rack/cache/context.rb:143:in `pass'/home/deploy/.bundler/app_pro/ruby/1.9.1/gems/rack-cache-1.2/lib/rack/cache/context.rb:155:in `invalidate'/home/deploy/.bundler/app_pro/ruby/1.9.1/gems/rack-cache-1.2/lib/rack/cache/context.rb:71:in `call!'/home/deploy/.bundler/app_pro/ruby/1.9.1/gems/rack-cache-1.2/lib/rack/cache/context.rb:51:in `call'/home/deploy/.bundler/app_pro/ruby/1.9.1/gems/rack-timeout-0.0.4/lib/rack/timeout.rb:16:in `block in call'/usr/local/lib/ruby/1.9.1/timeout.rb:69:in `timeout'/home/deploy/.bundler/app_pro/ruby/1.9.1/gems/rack-timeout-0.0.4/lib/rack/timeout.rb:16:in `call'/home/deploy/.bundler/app_pro/ruby/1.9.1/gems/railties-3.2.19/lib/rails/engine.rb:484:in `call'/home/deploy/.bundler/app_pro/ruby/1.9.1/gems/railties-3.2.19/lib/rails/application.rb:231:in `call'/home/deploy/.bundler/app_pro/ruby/1.9.1/gems/railties-3.2.19/lib/rails/railtie/configurable.rb:30:in `method_missing'/home/deploy/.bundler/app_pro/ruby/1.9.1/gems/unicorn-4.8.3/lib/unicorn/http_server.rb:576:in `process_client'/home/deploy/.bundler/app_pro/ruby/1.9.1/gems/unicorn-4.8.3/lib/unicorn/http_server.rb:670:in `worker_loop'/home/deploy/.bundler/app_pro/ruby/1.9.1/gems/unicorn-4.8.3/lib/unicorn/http_server.rb:525:in `spawn_missing_workers'/home/deploy/.bundler/app_pro/ruby/1.9.1/gems/unicorn-4.8.3/lib/unicorn/http_server.rb:140:in `start'/home/deploy/.bundler/app_pro/ruby/1.9.1/gems/unicorn-4.8.3/bin/unicorn_rails:209:in `'/home/deploy/.bundler/app_pro/ruby/1.9.1/bin/unicorn_rails:23:in `load'/home/deploy/.bundler/app_pro/ruby/1.9.1/bin/unicorn_rails:23:in `'",How to fix PG::DuplicatePstatement: ERROR?
How to truncate large integers to mimic JavaScript in Ruby?, I've found that working with integers in Ruby causes them to act different than JS when their binary representation is larger than 32 bits. JS: Ruby: My question is how can I convert my Ruby code to give the same return values JS? <code>  a = 144419633058839139324b = 3903086624 a >> 0; => 1482555392b >> 0; => -391880672 a >> 0 => 144419633058839139324[a].pack('V').unpack('V').first => 1482560508[b].pack('V').unpack('V').first => 3903086624,How to truncate large integers during bitwise operations to mimic JavaScript in Ruby?
PostgreSQL ilike with multiple matches," I am trying to retrieve multiple records from my DB with the following query: this works fine. Now I want to retrieve multiple records at the same time and tried this (which seems to be syntactically incorrect): What am I doing wrong?So just to clarify: I want to retrieve all records that match one of the names, so its an OR statement I am looking for. <code>  User.where('name ilike ?','%thomas%') User.where('name ilike any',['%thomas%','%james%','%martin%'])",PostgreSQL ilike with multiple matches in Rails ActiveRecord
Error while installing the gem 'redcarpet'," I'm getting the below error while installing 'redcarpet' gem. It got installed without issue on my friends machine though. (I want to install this to run yard)Ruby version: 1.9.3cmd output: UPDATE:With the devkit installation instructions provided at https://github.com/oneclick/rubyinstaller/wiki/Development-Kit When I test the installation with json gem it fails there too :(I went through the link for troubleshoot in github Native gem extension Error and followed the instructions to solve, Yet the problem persists.. I added the two paths to Env var C:\\ruby_devkit\\bin;C:\\ruby_devkit\\mingw\\bin; This removes the line Temporarily enhancing PATH to include DevKit... from appearing on cmd <code>  D:\Learning\Common_POM_FW\SampleProjects>yard[error]: Missing 'redcarpet' gem for Markdown formatting. Install it with `gem install redcarpet`D:\Learning\Common_POM_FW\SampleProjects>gem install redcarpetTemporarily enhancing PATH to include DevKit...Building native extensions. This could take a while...ERROR: Error installing redcarpet: ERROR: Failed to build gem native extension. C:/Ruby193/bin/ruby.exe -r ./siteconf20141009-6544-978w4t.rb extconf.rbcreating Makefilemake cleanMakefile:165: *** target pattern contains no `%'. Stop.makeMakefile:165: *** target pattern contains no `%'. Stop.make failed, exit code 2Gem files will remain installed in C:/Ruby193/lib/ruby/gems/1.9.1/gems/redcarpet-3.1.2 for inspection.Results logged to C:/Ruby193/lib/ruby/gems/1.9.1/extensions/x86-mingw32/1.9.1/redcarpet-3.1.2/gem_make.out",ERROR: Failed to build gem native extension on Windows
How to run Ruby mini unit test in sequence?, MiniTest runs my test cases in parallel. Is there a way to force running test cases in sequence? How can I force test_1 running before test_2? <code>  def test_1enddef test_2end,How to run MiniTest::Unit tests in ordered sequence?
What does RACK_ENV do in Rails app?, I have a Rails application already in production. The guy before set these environment variables: What does RACK_ENV=none do? I can't find documentation on it anywhere. Do I need to set it in the Rails application or can I just delete that export? <code>  ...export RACK_ENV=none export RAILS_ENV=production...,What does RACK_ENV do in a Rails application?
How to convert mcrypt 128 CFB to ruby," I need to exchange with a PHP API which crypts the requests and answers. On my side I am in rails 4.0.0 (ruby 2.0) and I cannot make it work. I have read a lot of answers on this subject and have tried to understand how mcrypt works, e.g. http://www.chilkatsoft.com/p/php_aes.asp, but without success. I still cannot decrypt the encrypted from PHP or encrypt something that the PHP can decryptCould you help me please and see what I am doing wrong?PHP code: Ruby code: <code>  $secretKey = ""1234567891234567"";$encrypt = urlencode( base64_encode( mcrypt_encrypt( MCRYPT_RIJNDAEL_128, md5($secretKey), $cleartext, MCRYPT_MODE_CFB, $secretKey ) ) );$input = urldecode($input);$decrypt = mcrypt_decrypt( MCRYPT_RIJNDAEL_128, md5($secretKey), base64_decode($input), MCRYPT_MODE_CFB, $secretKey ); def self.encode(params = {}) cipher = OpenSSL::Cipher::AES.new(256, :CFB) cipher.encrypt cipher.key = Digest::MD5.hexdigest(""1234567891234567"") cipher.iv = ""1234567891234567"" encrypted = cipher.update(params.to_query) + cipher.final CGI.escape(Base64.strict_encode64(encrypted))enddef self.decode(answer) decrypted = Base64.decode64(CGI.unescape(answer)) decipher = OpenSSL::Cipher::AES.new(256, :CFB) decipher.decrypt decipher.key = Digest::MD5.hexdigest(""1234567891234567"") decipher.iv = ""1234567891234567"" decoded = decipher.update(decrypted) + decipher.finalend",How can I mcrypt 128 CFB to Ruby?
converting mcrypt 128 CFB to ruby," I need to exchange with a PHP API which crypts the requests and answers. On my side I am in rails 4.0.0 (ruby 2.0) and I cannot make it work. I have read a lot of answers on this subject and have tried to understand how mcrypt works, e.g. http://www.chilkatsoft.com/p/php_aes.asp, but without success. I still cannot decrypt the encrypted from PHP or encrypt something that the PHP can decryptCould you help me please and see what I am doing wrong?PHP code: Ruby code: <code>  $secretKey = ""1234567891234567"";$encrypt = urlencode( base64_encode( mcrypt_encrypt( MCRYPT_RIJNDAEL_128, md5($secretKey), $cleartext, MCRYPT_MODE_CFB, $secretKey ) ) );$input = urldecode($input);$decrypt = mcrypt_decrypt( MCRYPT_RIJNDAEL_128, md5($secretKey), base64_decode($input), MCRYPT_MODE_CFB, $secretKey ); def self.encode(params = {}) cipher = OpenSSL::Cipher::AES.new(256, :CFB) cipher.encrypt cipher.key = Digest::MD5.hexdigest(""1234567891234567"") cipher.iv = ""1234567891234567"" encrypted = cipher.update(params.to_query) + cipher.final CGI.escape(Base64.strict_encode64(encrypted))enddef self.decode(answer) decrypted = Base64.decode64(CGI.unescape(answer)) decipher = OpenSSL::Cipher::AES.new(256, :CFB) decipher.decrypt decipher.key = Digest::MD5.hexdigest(""1234567891234567"") decipher.iv = ""1234567891234567"" decoded = decipher.update(decrypted) + decipher.finalend",How can I mcrypt 128 CFB to Ruby?
Changing a single element in Array with Ruby," I have an array with unique elements. Is there a way to replace a certain value in it with another value without using its index value?Examples: <code>  array = [1,2,3,4]if array.include? 4# ""replace 4 with 'Z'""endarray #=> [1,2,3,'Z']hash = {""One"" => [1,2,3,4]}if hash[""One""].include? 4# ""replace 4 with 'Z'""endhash #=> {""One"" => [1,2,3,'Z']}",Replace certain elements in an array
Replace a single element in an array," I have an array with unique elements. Is there a way to replace a certain value in it with another value without using its index value?Examples: <code>  array = [1,2,3,4]if array.include? 4# ""replace 4 with 'Z'""endarray #=> [1,2,3,'Z']hash = {""One"" => [1,2,3,4]}if hash[""One""].include? 4# ""replace 4 with 'Z'""endhash #=> {""One"" => [1,2,3,'Z']}",Replace certain elements in an array
Plist xpath query with dict elements," I am trying to load song names from an iTunes library export of a plist via Nokigiri:doc = Nokogiri::XML(open(file.path)) The beginning of the plist looks like: What I am looking to load from each track is the track name string that comes after the name key. The XPath that I thought should work is That XPath returns: It seems that, although my XPath is specifying the key for each string, it is in fact taking the 'following-siblings' of all of each dict regardless. What can I do to make the query more specific so that this portion of the plist would return: and  <code>  @songs = Array.new doc.xpath(<XPATH_HERE>).each do |n| @songs.push(n) #append data to arrayend <plist version=""1.0""><dict> <key>Major Version</key><integer>1</integer> <key>Minor Version</key><integer>1</integer> <key>Date</key><date>2014-10-15T22:52:19Z</date> <key>Application Version</key><string>11.4</string> <key>Features</key><integer>5</integer> <key>Show Content Ratings</key><true/> <key>Music Folder</key><string>file://localhost/Users/mike/Music/iTunes/iTunes%20Media/</string> <key>Library Persistent ID</key><string>280B84572DDCF406</string> <key>Tracks</key> <dict> <key>96</key> <dict> <key>Track ID</key><integer>96</integer> <key>Name</key><string>Get Lucky (Daft Punk cover)</string> <key>Artist</key><string>Daughter</string> <key>Kind</key><string>MPEG audio file</string> <key>Size</key><integer>4716638</integer> <key>Total Time</key><integer>294112</integer> <key>Date Modified</key><date>2013-11-12T20:54:14Z</date> <key>Date Added</key><date>2013-12-18T17:56:09Z</date> <key>Bit Rate</key><integer>128</integer> <key>Sample Rate</key><integer>44100</integer> <key>Persistent ID</key><string>C3B1B6F26134C9C1</string> <key>Track Type</key><string>File</string> <key>Location</key><string>file://localhost/Users/mike/Music/iTunes/iTunes%20Media/Music/Daughter/Unknown%20Album/Get%20Lucky%20(Daft%20Punk%20cover).mp3</string> <key>File Folder Count</key><integer>5</integer> <key>Library Folder Count</key><integer>1</integer> </dict> <key>98</key> <dict> <key>Track ID</key><integer>98</integer> <key>Name</key><string>Swimming in Solace (DJ Fergie Ferg Remash)</string> <key>Kind</key><string>MPEG audio file</string> /plist/dict[key[. = 'Tracks']/following-sibling::*[1]]/dict[key/following-sibling::*[1]]/dict[key[. = 'Name']/following-sibling::*[1]]/string <string>Get Lucky (Daft Punk cover)</string><string>Daughter</string><string>MPEG audio file</string><string>C3B1B6F26134C9C1</string><string>File</string><string>file://localhost/Users/mike/Music/iTunes/iTunes%20Media/Music/Daughter/Unknown%20Album/Get%20Lucky%20(Daft%20Punk%20cover).mp3</string><string>Swimming in Solace (DJ Fergie Ferg Remash)</string><string>MPEG audio file</string> Get Lucky (Daft Punk cover) Swimming in Solace (DJ Fergie Ferg Remash)",Plist XPath query with dict elements
Why does white-space affect rails?," I get a syntax error with this code But with this code I don't: How come that space after render_to_string breaks my rails app? <code>  render json: { ""what"" => ""created"", ""whatCreated"" => ""thing"", ""htmlOutput"" => render_to_string (partial: ""some_partial"")} render json: { ""what"" => ""created"", ""whatCreated"" => ""thing"", ""htmlOutput"" => render_to_string(partial: ""some_partial"")}",Why does white-space affect ruby function calls?
Why do some PORO's go in models?," I am working on a project where the current developers have put their ""Plain Old Ruby Objects"" in the models directory of our Rails app.I have seen most examples online where the PORO files go inside lib instead, but some say models.Is there even a logical / specific reason why people put them in the models directory over the lib directory? <code> ","Why do some ""Plain Old Ruby Objects"" go in app/models directory instead of lib direcory?"
Flash message with html_safe from the controller in Rails 4," In my controller I have the following code: I would like to be able to include a link in a flash message, so (as you can see) I call html_safe to unescape the string. However, it seems that as of Rails 4.1 this is now handled differently. (See here and here)A solution to this has been provided in this question. However, it only does so by moving the html_safe call to the view, having the effect of unescaping all flash messages. I would prefer to be a bit more paranoid than that, is there any way to include the link in the flash message from the controller? <code>  format.html { redirect_to new_customer_url, notice: %Q[ A customer already exists with with this shopping id. Edit this customer #{view_context.link_to(""here"", edit_customer_url(@duplicate))}. ].html_safe",Flash message with html_safe from the controller in Rails 4 (safe version)
Find if a file is video and check its running time in Ruby," I am using ruby-2.1 and I want to check if a file is of type video.I want a solution for common for all operating systems. So I tried the File Object. It has a fnmatch method which only tests for extensions using regex such as *.mp4 or *.avi and so on. But this seems very inefficient. But this code seems very bad for multitudes of video types.So any solutions, would be appreciated including any gem support. Thanks. <code>  # Get all files of directoryall_files = Dir.entries(Dir.pwd).select { |x| !File.directory? x}mp4_f = '*.mp4'avi_f = '*.avi'mkv_f = '*.mkv'flv_f = '*.flv'# Loop through each fileall_files.each do |file| puts File.fnmatch(mp4_f, file) || File.fnmatch(avi_f, file) || File.fnmatch(mkv_f, file) || File.fnmatch(flv_f, file)end",Find if a file is video in Ruby
"Rails 4.2.0.beta2 ""Rails New"" not working properly?"," I installed Rails 4.2.0.beta2 per the instructions in RailsTutorial.org 3rd Edition (the one that just came out). I'm not using the cloudIDE and am instead using Ubuntu Trusty 32 via Vagrant on a Windows 7 host with RVM. Did rails _4.2.0.beta2_ new hello_app and then pasted in his gemfile sample.After that, I ran: Server starts fine, however when I try to connect to localhost:3000 I get ""Server Not Found""Weirder still, I have a couple other Rails starter projects I've been tinkering with that use Rails 4.0.3 and 4.1.6 and I'm able to connect to the server there just fine.What am I missing here? Why can't my browser connect when I've created a new Rails project with the latest version, but it works fine with older versions?Also, I tried wget http://0.0.0.0:3000 and while it connected and received a 200 response, the length was unspecified, whereas in another brand new Rails app under an old version, I would get the actual file size of whatever index.html was. <code>  $ bundle install$ rails s",Rails 4.2.0.beta2 - Can't connect to LocalHost?
creating XML nodes using Nokogiri," I am having problems creating nodes and adding them to an XML file: I want to be able to add to the file like so: I am having trouble getting the concept of adding nodes with Nokogiri.This is my current code: What concepts am I missing? I need to be able to add instance variables to <data1> and <data2> but I found the Nokogiri tutorial to not be of much help in this area and have not made it past just adding the <secnode> node as a child of <mainnode>.Any help is appreciated. <code>  <mainnode> <secnode> <data1></data2> <data2></data2> </secnode></mainnode> <mainnode> <secnode> <data1></data2> <data2></data2> </secnode> <secnode> <data1></data2> <data2></data2> </secnode></mainnode> def openXML f = File.open(""file.xml"") doc = Nokogiri::XML(f)enddef parseXML mainnode.name = 'mainnode' f = openXML temp = Nokogiri::XML::Node.new ""secnode"", f mainnode.add_next_sibling(temp)end",Creating XML nodes using Nokogiri
Difference between be_true and be true in Ruby RSpec with simple example," Can any one please explain me about the difference between be_true and be true in Ruby with simple example. I have also seen be_true and be_false are changed to be_truthy and be_falseyI have an example where 'be true' worked, but when I tried to use 'be_true' or 'be_truthy' spec failed.I am using RSpec version 3.1.7 <code> ","What is the difference between ""be_true"" and ""be true"" in RSpec"
Difference between be_true and be true in RSpec with simple example," Can any one please explain me about the difference between be_true and be true in Ruby with simple example. I have also seen be_true and be_false are changed to be_truthy and be_falseyI have an example where 'be true' worked, but when I tried to use 'be_true' or 'be_truthy' spec failed.I am using RSpec version 3.1.7 <code> ","What is the difference between ""be_true"" and ""be true"" in RSpec"
"What is teh difference between ""be_true"" and ""be true"" in RSpec"," Can any one please explain me about the difference between be_true and be true in Ruby with simple example. I have also seen be_true and be_false are changed to be_truthy and be_falseyI have an example where 'be true' worked, but when I tried to use 'be_true' or 'be_truthy' spec failed.I am using RSpec version 3.1.7 <code> ","What is the difference between ""be_true"" and ""be true"" in RSpec"
Rendering a JSON object of a join-model and its associated models," In a Rails ( 4.1.5 / ruby 2.0.0p481 / win64 ) application I have a many-to-many relationship between Student and Course and a join model StudentCourse which represents the association, and has an additional attribute called started (set by default on ""false"").I also have added an index in the join-table made of student_id and course_id, and set a unique check on that, like this I wanted that to be a composite primary key, but since in rails there are no composite primary keys (without using a gem) I also added a primary key called id: Now I see that associations are created by either doing: or This is fine and it's the expected behaviour, I suppose.That said, I am struggling to wrap my mind around association resolutions in ActiveRecord queries. Let me explain this better:For reference, Student.all, Course.all and StudentCourses.all would return tables like these:Student.all Course.all StudentCourse.all So far I can happily render a json object of all courses, and names of all students for each course like this: I can also easily render all courses that a student is attending or about to attend with which also includes other students for those courses.But suppose I wanted to render one student's courses which the student has not yet started, together with all the other students who are on that course (which have or not started the course) [Please read the UPDATE section below, I'm looking for the opposite thing actually!]I think the easieast approach is to query the join-table for something like: But how do I go on from this resulting table (association object) to get a nicely packaged json object with courses names (and all other attributes) and also including students in it, like I did with: Course.all.to_json(:include => {:students => {:only => :name}}) ?I think I'm missing some basic knowledge of some important key concepts here, but at this point I cannot even indentify them and would greatly appreciate some help... thank you.Update:I just realized that the following part is what I was originally trying to do. It's the opposite thing. Among all these details I got lost along the path. I hope that it's ok if I just add it here.So, given a student (let's call him Aiden), I need to return a JSON object containing only the courses that he is in and that he has started, only when such courses have other students in them who have not started them, and it has to include the names of those students for each course too.So...I now have: which for a student takes all the courses that have a ""true"" value in the join-table ""started"" column. (again in the join table each student-course record is ""compositely"" unique, so there can just be one unique record for a given student_id and course_id).With the next query, for one of ""aiden_started_courses"" I can pull off all the relative student-courses associations which have a false value on ""started"" So here lies the problem: I have managed to get this just for a single course in aiden_started_courses array, but how would I be able to build a query that returns this data for all of Aiden's started courses? Is it possible to do that in one line? I know I could probably use Ruby enumerator loops but I somewhat feel that I would be kind of breaking some pattern both on a Rails coding convention level and on performance level? (hitting N+1 problem again?) ...What I could so far:I came up with this where I find all students who have not started the courses which a given user has started: or this: which finds all the courses that a given student has started if those courses include students who have not started them yetBut what I really need is to get a JSON object like this: where I can see the courses that a given student is on and has started, but only those in which there are other students that have not yet started it, together with the names of those students...I'm thinking that probably there is no way how I could get that through a regular AR query, so maybe should a build a JSON manually? But how could I do that?Thanks in adv. and I apologise for the verbosity.. but hopefully it will help.. <code>  t.index [:student_id, :course_id], :unique => true, :name => 'by_student_and_course' t.column :id, :primary_key Student.first.courses.create(:name => ""english"") Course.first.students << Student.first +----+-----------+| id | name |+----+-----------+| 1 | Aidan || 2 | Alison || 3 | Elizabeth |+----+-----------+ +----+----------+------------------+| id | name | description |+----+----------+------------------+| 1 | english | desc. here || 2 | music | desc. here || 3 | dance | desc. here || 4 | science | desc. here || 5 | french | desc. here || 6 | arts | desc. here |+----+----------+------------------+ +-------------+------------+------------+----+| course_id | student_id | started | id |+-------------+------------+------------+----+| 1 | 1 | false | 1 || 2 | 1 | false | 2 || 3 | 1 | false | 3 || 1 | 2 | true | 4 || 2 | 2 | true | 5 || 4 | 3 | false | 6 || 5 | 2 | false | 7 || 5 | 1 | true | 8 || 6 | 2 | false | 9 |+-------------+------------+------------+----+ render json: Course.all.to_json(:include => {:students => {:only => :name}}) render json: @student.courses.to_json(:include => {:students => {:only => :name}}) StudentCourse.all.where(student_id: @student.id, started: false)+-------------+------------+------------+----+| course_id | student_id | started | id |+-------------+------------+------------+----+| 5 | 2 | false | 7 || 6 | 2 | false | 9 |+-------------+------------+------------+----+ aiden_started_courses = Student(1).courses.where(:student_courses => {:started => true } ) aiden_started_courses[0].student_courses.where(:started => false).includes(:student).to_json(:include => :student)+-------------+------------+------------+----+| course_id | student_id | started | id |+-------------+------------+------------+----+| 1 | 2 | false | 4 |+-------------+------------+------------+----+| 1 | 9 | false | 5 |+-------------+------------+------------+----+ Student.includes(:student_courses).where(:student_courses => { :started => false, :course_id => aiden.courses.where (:student_courses => {started: true}).ids } ) Course.includes(:students).where(:student_courses => {:started => false, :course_id => aiden.courses.where(:student_courses => {:started =>true}).ids }) [ { ""id"": 1, ""name"": ""english"", ""students"": [ {""name"": ""ALison""}, {""name"": ""Robert""}] }, { ""id"": 2, ""name"": ""music"", ""description"": null, ""students"": [ {""name"": ""Robert""}, {""name"": ""Kate""}] }]",Rendering a JSON object of a join-model and its associated models
Rendering a JSON object of a join-model and its associated models," In a Rails ( 4.1.5 / ruby 2.0.0p481 / win64 ) application I have a many-to-many relationship between Student and Course and a join model StudentCourse which represents the association, and has an additional attribute called started (set by default on ""false"").I also have added an index in the join-table made of student_id and course_id, and set a unique check on that, like this I wanted that to be a composite primary key, but since in rails there are no composite primary keys (without using a gem) I also added a primary key called id: Now I see that associations are created by either doing: or This is fine and it's the expected behaviour, I suppose.That said, I am struggling to wrap my mind around association resolutions in ActiveRecord queries. Let me explain this better:For reference, Student.all, Course.all and StudentCourses.all would return tables like these:Student.all Course.all StudentCourse.all So far I can happily render a json object of all courses, and names of all students for each course like this: I can also easily render all courses that a student is attending or about to attend with which also includes other students for those courses.But suppose I wanted to render one student's courses which the student has not yet started, together with all the other students who are on that course (which have or not started the course) [Please read the UPDATE section below, I'm looking for the opposite thing actually!]I think the easieast approach is to query the join-table for something like: But how do I go on from this resulting table (association object) to get a nicely packaged json object with courses names (and all other attributes) and also including students in it, like I did with: Course.all.to_json(:include => {:students => {:only => :name}}) ?I think I'm missing some basic knowledge of some important key concepts here, but at this point I cannot even indentify them and would greatly appreciate some help... thank you.Update:I just realized that the following part is what I was originally trying to do. It's the opposite thing. Among all these details I got lost along the path. I hope that it's ok if I just add it here.So, given a student (let's call him Aiden), I need to return a JSON object containing only the courses that he is in and that he has started, only when such courses have other students in them who have not started them, and it has to include the names of those students for each course too.So...I now have: which for a student takes all the courses that have a ""true"" value in the join-table ""started"" column. (again in the join table each student-course record is ""compositely"" unique, so there can just be one unique record for a given student_id and course_id).With the next query, for one of ""aiden_started_courses"" I can pull off all the relative student-courses associations which have a false value on ""started"" So here lies the problem: I have managed to get this just for a single course in aiden_started_courses array, but how would I be able to build a query that returns this data for all of Aiden's started courses? Is it possible to do that in one line? I know I could probably use Ruby enumerator loops but I somewhat feel that I would be kind of breaking some pattern both on a Rails coding convention level and on performance level? (hitting N+1 problem again?) ...What I could so far:I came up with this where I find all students who have not started the courses which a given user has started: or this: which finds all the courses that a given student has started if those courses include students who have not started them yetBut what I really need is to get a JSON object like this: where I can see the courses that a given student is on and has started, but only those in which there are other students that have not yet started it, together with the names of those students...I'm thinking that probably there is no way how I could get that through a regular AR query, so maybe should a build a JSON manually? But how could I do that?Thanks in adv. and I apologise for the verbosity.. but hopefully it will help.. <code>  t.index [:student_id, :course_id], :unique => true, :name => 'by_student_and_course' t.column :id, :primary_key Student.first.courses.create(:name => ""english"") Course.first.students << Student.first +----+-----------+| id | name |+----+-----------+| 1 | Aidan || 2 | Alison || 3 | Elizabeth |+----+-----------+ +----+----------+------------------+| id | name | description |+----+----------+------------------+| 1 | english | desc. here || 2 | music | desc. here || 3 | dance | desc. here || 4 | science | desc. here || 5 | french | desc. here || 6 | arts | desc. here |+----+----------+------------------+ +-------------+------------+------------+----+| course_id | student_id | started | id |+-------------+------------+------------+----+| 1 | 1 | false | 1 || 2 | 1 | false | 2 || 3 | 1 | false | 3 || 1 | 2 | true | 4 || 2 | 2 | true | 5 || 4 | 3 | false | 6 || 5 | 2 | false | 7 || 5 | 1 | true | 8 || 6 | 2 | false | 9 |+-------------+------------+------------+----+ render json: Course.all.to_json(:include => {:students => {:only => :name}}) render json: @student.courses.to_json(:include => {:students => {:only => :name}}) StudentCourse.all.where(student_id: @student.id, started: false)+-------------+------------+------------+----+| course_id | student_id | started | id |+-------------+------------+------------+----+| 5 | 2 | false | 7 || 6 | 2 | false | 9 |+-------------+------------+------------+----+ aiden_started_courses = Student(1).courses.where(:student_courses => {:started => true } ) aiden_started_courses[0].student_courses.where(:started => false).includes(:student).to_json(:include => :student)+-------------+------------+------------+----+| course_id | student_id | started | id |+-------------+------------+------------+----+| 1 | 2 | false | 4 |+-------------+------------+------------+----+| 1 | 9 | false | 5 |+-------------+------------+------------+----+ Student.includes(:student_courses).where(:student_courses => { :started => false, :course_id => aiden.courses.where (:student_courses => {started: true}).ids } ) Course.includes(:students).where(:student_courses => {:started => false, :course_id => aiden.courses.where(:student_courses => {:started =>true}).ids }) [ { ""id"": 1, ""name"": ""english"", ""students"": [ {""name"": ""ALison""}, {""name"": ""Robert""}] }, { ""id"": 2, ""name"": ""music"", ""description"": null, ""students"": [ {""name"": ""Robert""}, {""name"": ""Kate""}] }]",Rendering a JSON object of a join-model and its associated models
endering a JSON object of a join-model and its associated models," In a Rails ( 4.1.5 / ruby 2.0.0p481 / win64 ) application I have a many-to-many relationship between Student and Course and a join model StudentCourse which represents the association, and has an additional attribute called started (set by default on ""false"").I also have added an index in the join-table made of student_id and course_id, and set a unique check on that, like this I wanted that to be a composite primary key, but since in rails there are no composite primary keys (without using a gem) I also added a primary key called id: Now I see that associations are created by either doing: or This is fine and it's the expected behaviour, I suppose.That said, I am struggling to wrap my mind around association resolutions in ActiveRecord queries. Let me explain this better:For reference, Student.all, Course.all and StudentCourses.all would return tables like these:Student.all Course.all StudentCourse.all So far I can happily render a json object of all courses, and names of all students for each course like this: I can also easily render all courses that a student is attending or about to attend with which also includes other students for those courses.But suppose I wanted to render one student's courses which the student has not yet started, together with all the other students who are on that course (which have or not started the course) [Please read the UPDATE section below, I'm looking for the opposite thing actually!]I think the easieast approach is to query the join-table for something like: But how do I go on from this resulting table (association object) to get a nicely packaged json object with courses names (and all other attributes) and also including students in it, like I did with: Course.all.to_json(:include => {:students => {:only => :name}}) ?I think I'm missing some basic knowledge of some important key concepts here, but at this point I cannot even indentify them and would greatly appreciate some help... thank you.Update:I just realized that the following part is what I was originally trying to do. It's the opposite thing. Among all these details I got lost along the path. I hope that it's ok if I just add it here.So, given a student (let's call him Aiden), I need to return a JSON object containing only the courses that he is in and that he has started, only when such courses have other students in them who have not started them, and it has to include the names of those students for each course too.So...I now have: which for a student takes all the courses that have a ""true"" value in the join-table ""started"" column. (again in the join table each student-course record is ""compositely"" unique, so there can just be one unique record for a given student_id and course_id).With the next query, for one of ""aiden_started_courses"" I can pull off all the relative student-courses associations which have a false value on ""started"" So here lies the problem: I have managed to get this just for a single course in aiden_started_courses array, but how would I be able to build a query that returns this data for all of Aiden's started courses? Is it possible to do that in one line? I know I could probably use Ruby enumerator loops but I somewhat feel that I would be kind of breaking some pattern both on a Rails coding convention level and on performance level? (hitting N+1 problem again?) ...What I could so far:I came up with this where I find all students who have not started the courses which a given user has started: or this: which finds all the courses that a given student has started if those courses include students who have not started them yetBut what I really need is to get a JSON object like this: where I can see the courses that a given student is on and has started, but only those in which there are other students that have not yet started it, together with the names of those students...I'm thinking that probably there is no way how I could get that through a regular AR query, so maybe should a build a JSON manually? But how could I do that?Thanks in adv. and I apologise for the verbosity.. but hopefully it will help.. <code>  t.index [:student_id, :course_id], :unique => true, :name => 'by_student_and_course' t.column :id, :primary_key Student.first.courses.create(:name => ""english"") Course.first.students << Student.first +----+-----------+| id | name |+----+-----------+| 1 | Aidan || 2 | Alison || 3 | Elizabeth |+----+-----------+ +----+----------+------------------+| id | name | description |+----+----------+------------------+| 1 | english | desc. here || 2 | music | desc. here || 3 | dance | desc. here || 4 | science | desc. here || 5 | french | desc. here || 6 | arts | desc. here |+----+----------+------------------+ +-------------+------------+------------+----+| course_id | student_id | started | id |+-------------+------------+------------+----+| 1 | 1 | false | 1 || 2 | 1 | false | 2 || 3 | 1 | false | 3 || 1 | 2 | true | 4 || 2 | 2 | true | 5 || 4 | 3 | false | 6 || 5 | 2 | false | 7 || 5 | 1 | true | 8 || 6 | 2 | false | 9 |+-------------+------------+------------+----+ render json: Course.all.to_json(:include => {:students => {:only => :name}}) render json: @student.courses.to_json(:include => {:students => {:only => :name}}) StudentCourse.all.where(student_id: @student.id, started: false)+-------------+------------+------------+----+| course_id | student_id | started | id |+-------------+------------+------------+----+| 5 | 2 | false | 7 || 6 | 2 | false | 9 |+-------------+------------+------------+----+ aiden_started_courses = Student(1).courses.where(:student_courses => {:started => true } ) aiden_started_courses[0].student_courses.where(:started => false).includes(:student).to_json(:include => :student)+-------------+------------+------------+----+| course_id | student_id | started | id |+-------------+------------+------------+----+| 1 | 2 | false | 4 |+-------------+------------+------------+----+| 1 | 9 | false | 5 |+-------------+------------+------------+----+ Student.includes(:student_courses).where(:student_courses => { :started => false, :course_id => aiden.courses.where (:student_courses => {started: true}).ids } ) Course.includes(:students).where(:student_courses => {:started => false, :course_id => aiden.courses.where(:student_courses => {:started =>true}).ids }) [ { ""id"": 1, ""name"": ""english"", ""students"": [ {""name"": ""ALison""}, {""name"": ""Robert""}] }, { ""id"": 2, ""name"": ""music"", ""description"": null, ""students"": [ {""name"": ""Robert""}, {""name"": ""Kate""}] }]",Rendering a JSON object of a join-model and its associated models
What does it mean S: in Ruby," I was reading the following tutorial.It talked about including files in a Ruby file like require : require(string) => true or false Ruby tries to load the library named string, returning true if successful. If the filename does not resolve to an absolute path, it will be searched for in the directories listed in $:. If the file has the extension "".rb"", it is loaded as a source file; if the extension is "".so"", "".o"", or "".dll"", or whatever the default shared library extension is on the current platform, Ruby loads the shared library as a Ruby extension. Otherwise, Ruby tries adding "".rb"", "".so"", and so on to the name. The name of the loaded feature is added to the array in $:.I just want to know what is $: in Ruby and what does $: means.  <code> ",What does it mean $: in Ruby
What does it mean $: in Ruby," I was reading the following tutorial.It talked about including files in a Ruby file like require : require(string) => true or false Ruby tries to load the library named string, returning true if successful. If the filename does not resolve to an absolute path, it will be searched for in the directories listed in $:. If the file has the extension "".rb"", it is loaded as a source file; if the extension is "".so"", "".o"", or "".dll"", or whatever the default shared library extension is on the current platform, Ruby loads the shared library as a Ruby extension. Otherwise, Ruby tries adding "".rb"", "".so"", and so on to the name. The name of the loaded feature is added to the array in $:.I just want to know what is $: in Ruby and what does $: means.  <code> ",What does it mean $: in Ruby
Multiple invocations of a mock with minitest," I am using the version of minitest with Ruby 1.9.3How do I test for multiple invocations of a mock with it? I need something like Is there a way to achieve this? <code>  mockObject.expect.times(2) :method, [return_1 first time, return_2 second time] mockObject.verify",Multiple invocations of same method on a mock with minitest
ruby gem equivalent of pip install -e," In Python I can install a package from source in ""editable"" mode using pip install -e. Then I can carry on editing the code, and any changes will be automatically picked by other Python scripts that import libraryIs there a comparable workflow for developing Ruby gems? What is the ""Ruby way"" of using libs as they are being developed rather than, for example, compiling and installing a gem every time I make a change to the source? <code> ","Ruby gem equivalent of ""pip install -e""?"
How to skip the first line of a CSV and make the second line headers ruby," Is there a way to skip the first line of a CSV file and make the second line act as the header?I have a CSV file that has the date on the first row and the headers on the second row, so I need to be able to skip the first row when iterating over it. I tried using slice but that converts the CSV to an array and I really want to read it as CSV so I can take advantage of headers.  <code> ",How to skip the first line of a CSV file and make the second line the header
"enum returning nil, even if it has a value"," I have an enum, which has a stored value, but the getter returns nil.I have the following code: If I do the following in the console: I get but If I do I get <code>  class Property < ActiveRecord::Base enum building_type: [ :none_building_type, :pre_war_low_rise, :pre_war_mid_rise, :pre_war_high_rise, :post_war_low_rise, :post_war_mid_rise, :post_war_high_rise, :pre_war_loft, :post_war_loft, :pre_war_hotel, :post_war_hotel ] Property.last Property Load (0.8ms) SELECT ""properties"".* FROM ""properties"" ORDER BY ""properties"".""id"" DESC LIMIT 1 => #<Property id: 3, created_at: ""2014-11-17 15:39:34"", updated_at: ""2014-11-17 16:28:48"", name: ""PropertyName"", property_type: 1, description: ""adsdsaads"", building_type: ""4""> Property.last.building_type Property Load (0.5ms) SELECT ""properties"".* FROM ""properties"" ORDER BY ""properties"".""id"" DESC LIMIT 1 => nil ","ActiveRecord enum returning nil, even if it has a value"
NoMethodError - undefined method describe for main Object, I am trying to learn Rspec. My ruby project in eclipse is as follows - The code- The error- Did not get any useful answers online. How do I fix this problem ? <code>  require 'rspec'require './RubyOffRailsTuts/classes/furlong'describe Furlong doend /RubyOffRailsTuts/specs/furlong_spec.rb:6:in `<main>': undefined method `describe' for main:Object (NoMethodError),"RSpec NoMethodError: ""undefined method `describe' for main Object"""
Ruby/Rails 4 Local variables Through Render," This question has been asked many times but I can not get it to work.I want to pass multiple vars to my partial like this... And here is a line from partial material_fields.html.erb which I want the f.select to be pre-populated with the Yes option or ""true"" value. (some instances I want it to be false) f is available and works while feed is not .....I dont know why this doesn't work.Ive tried <%= feed %> outside the select statement and it still does not work.I get undefined local variable or method `feed' in both cases.Anyone know what is wrong with my syntax? <code>  <%= f.fields_for :materials do |builder| %> <%= render partial: 'material_fields', locals: {f: builder, feed: true} %><% end %> <%=f.select :is_feed, options_for_select([['Yes', true], ['No', false]], feed )%>",Rails 4 Passing multiple variables through render partial
"RVM - ""gpg: command not found"""," I have a new mac pro (OS X 10.9.5) that I get to set up from scratch. I want to install RVM and the first thing it says to do is: Install mpapis public key (might need gpg2 and or sudo) When I tried I got: I've tried to find a good guide on how to overcome this that also looks trustworthy but I've had no luck.Can someone explain what gpg is, why I dont already have it, and how do I get it the right way. <code>  gpg --keyserver hkp://keys.gnupg.net --recv-keys D39DC0E3 gpg --keyserver hkp://keys.gnupg.net --recv-keys D39DC0E3zsh: command not found: gpg","How to resolve ""gpg: command not found"" error during RVM installation?"
how to get the desired formatted hash from string in efficient way with ruby?," I want to hash in a particular format when a string appears in the below format:Given string: # Into a hash like this (required hash pattern): I tried many ways, but this is the closest: <code>  str = 'AA = BA = B = CA = B = DA = E = FG = HG = IG = J' { ""A"" => { ""B"" => { ""C"" => nil, ""D"" => nil }, ""E"" => { ""F"" => nil }, }, ""G"" => { ""H"" => nil, ""I"" => nil, ""J"" => nil }} output = Hash.newline_hash = Hash.newstr.each_line do |line| arr = line.split(""="") e = arr.first.strip line_hash[e] = {} arr.each_with_index do |ele, i| break unless arr[i+1] line_hash[ele.strip] = arr[i+1] unless output.keys.include?(ele.strip) end output[e] = line_hash unless output.keys.include?(e)end",How to get the desired formatted hash from a string in an efficient way with Ruby?
ruby - override Hash native brackets ([] access)," I want to override the Hash class native brackets in ruby. Note I don't want to override them in a class that inherits from Hash (no subclassing), I want to actually override Hash itself, such that any hash anywhere will always inherit my behavior.Specifically (bonus points for..) - I want this in order to natively emulate a hash with indifferent access. In JavaScript I would modify the prototype, Ruby is known for its metaprogramming, so I hope this is possible.So what I am aiming for is: I've tried: 1) and Both crash irb. <code>  >> # what do I do here to overload Hash's []?...>> x = {a:123} # x is a native Hash>> x[:a] # == 123, as usual>> x['a'] # == 123, hooray! class Hash define_method(:[]) { |other| puts ""Hi, ""; puts other }end class Hash def [] puts 'bar' endend",How can I override Hash native brackets ([] access)
Undefied method 'delegate' for capybara::dsl::module," I have a capybara monkey patch to deal with jquery-ui, which works pretty well running on Ubuntu... although when moving to windows I get the following error (all dependency gems were installed successfully):Undefined method 'delegate' for capybara::dsl::moduleThe line of code that this occurs is: any ideas of what this could be? a bit lost of why this error is shown just by switching OS... <code>  module Capybara::DSL delegate :datepick, :datetimepick, :timepick, to: :pageend",Undefined method 'delegate' for capybara::dsl::module
rbenv rehash not working, I am trying to rehash rbenv after installing a new gem it gives me these error on my ubuntu server however .rbenv-shims doesn't exists  <code>  rbenv: cannot rehash: /home/deployer/.rbenv/shims/.rbenv-shim exists,Rails: rbenv rehash not working (rbenv-shim exists)
Getting started (not) with net-ssh and net-ssh-gateway: can't download gemfiles," I'm trying to establish an ssh tunnel to a remote server as described here: SSH from Heroku into remote server with Mysql DbBut I'm hung up just simply trying to download the gems. I added: but when I do bundle install (or even just gem install net-ssh on the command line), I get: As per the README for net-ssh (https://github.com/net-ssh/net-ssh), I checked my OpenSSL bindings for Ruby -- they look okay: I'm not sure if this is related, but when I tried to download the .pem file for a high security download of the gemfile: ... it didn't download a .pem file, and visiting the URL directly result in 'not found'.Other info: So for right now, I'm stuck. Does anyone recognize this problem?  <code>  # file: Gemfile...gem 'net-ssh-gateway', '~> 1.2.0' ERROR: Could not find a valid gem 'net-ssh' (>= 0), here is why: Unable to download data from https://rubygems.org/ - SSL_connect returned=1 errno=0 state=SSLv3 read server certificate B: certificate verify failed (https://api.rubygems.org/latest_specs.4.8.gz) $ ruby -ropenssl -e 'puts OpenSSL::OPENSSL_VERSION'OpenSSL 1.0.1j 15 Oct 2014 $ curl -O https://raw.github.com/net-ssh/net-ssh/master/gem-public_cert.pem $ rake aboutAbout your application's environmentRuby version 2.1.4-p265 (x86_64-darwin14.0)RubyGems version 2.2.2Rack version 1.5Rails version 4.1.7",Could not find valid gem: certificate verify failed
Getting all nodes from an HTML document in ruby with nokogiri," I'm trying to get all the nodes from a HTML document using Nokogiri.I have this HTML: String version: I created an object: And I was trying to traverse it: But what I don't like is the order of elements. I need to have an array with same order as they appear: I don't need closing tags.Does anybody have a better solution to accomplish this? <code>  <html><body> <h1>Header1</h1> <h2>Header22</h2> <ul> <li>Li1</li> <ul> <li>Li1</li> <li>Li2</li> </ul> </ul></body></html> string_page = ""<html><body><h1>Header1</h1><h2>Header22</h2><ul><li>Li1</li><ul><li>Li1</li><li>Li2</li></ul></ul></body></html>"" page = Nokogiri.HTML(string_page) result = []page.traverse { |node| result << node.name unless node.name == ""text"" }=> [""html"", ""h1"", ""h2"", ""li"", ""li"", ""li"", ""ul"", ""ul"", ""body"", ""html"", ""document""] [""html"", ""body"", ""h1"", ""h2"", ""ul"", ""li"", ""ul"", ""li"", ""li"" ]",How to get all nodes from a HTML document in Ruby with Nokogiri
Getting all nodes from a HTML document in ruby with nokogiri," I'm trying to get all the nodes from a HTML document using Nokogiri.I have this HTML: String version: I created an object: And I was trying to traverse it: But what I don't like is the order of elements. I need to have an array with same order as they appear: I don't need closing tags.Does anybody have a better solution to accomplish this? <code>  <html><body> <h1>Header1</h1> <h2>Header22</h2> <ul> <li>Li1</li> <ul> <li>Li1</li> <li>Li2</li> </ul> </ul></body></html> string_page = ""<html><body><h1>Header1</h1><h2>Header22</h2><ul><li>Li1</li><ul><li>Li1</li><li>Li2</li></ul></ul></body></html>"" page = Nokogiri.HTML(string_page) result = []page.traverse { |node| result << node.name unless node.name == ""text"" }=> [""html"", ""h1"", ""h2"", ""li"", ""li"", ""li"", ""ul"", ""ul"", ""body"", ""html"", ""document""] [""html"", ""body"", ""h1"", ""h2"", ""ul"", ""li"", ""ul"", ""li"", ""li"" ]",How to get all nodes from a HTML document in Ruby with Nokogiri
Getting all nodes from a HTML document in Ruby with Nokogiri," I'm trying to get all the nodes from a HTML document using Nokogiri.I have this HTML: String version: I created an object: And I was trying to traverse it: But what I don't like is the order of elements. I need to have an array with same order as they appear: I don't need closing tags.Does anybody have a better solution to accomplish this? <code>  <html><body> <h1>Header1</h1> <h2>Header22</h2> <ul> <li>Li1</li> <ul> <li>Li1</li> <li>Li2</li> </ul> </ul></body></html> string_page = ""<html><body><h1>Header1</h1><h2>Header22</h2><ul><li>Li1</li><ul><li>Li1</li><li>Li2</li></ul></ul></body></html>"" page = Nokogiri.HTML(string_page) result = []page.traverse { |node| result << node.name unless node.name == ""text"" }=> [""html"", ""h1"", ""h2"", ""li"", ""li"", ""li"", ""ul"", ""ul"", ""body"", ""html"", ""document""] [""html"", ""body"", ""h1"", ""h2"", ""ul"", ""li"", ""ul"", ""li"", ""li"" ]",How to get all nodes from a HTML document in Ruby with Nokogiri
Ruby - print out 2D array," Prints out one single line of ten [0, 0, 0, 0, 0, 0, 0, 0, 0, 0].If I were to change print to puts, I then get 100 0 down the page.How do I print out each array on a separate line without the ""[]"" and "",""?Something like:  <code>  array = Array.new(10) { Array.new(10 , 0)}array.each { |x| print x } 0 0 0 0 0 0 0 0 0 00 0 0 0 0 0 0 0 0 00 0 0 0 0 0 0 0 0 00 0 0 0 0 0 0 0 0 00 0 0 0 0 0 0 0 0 00 0 0 0 0 0 0 0 0 00 0 0 0 0 0 0 0 0 00 0 0 0 0 0 0 0 0 00 0 0 0 0 0 0 0 0 0",Print out 2D array
what is the difference between method and a proc or lambda?," I know that methods in Ruby are not objects but procs and lambdas are. Is there any difference between them other than that? Because both we can pass around. What makes the proc objects different from a method?Method: Proc Object: <code>  1.8.7-p334 :017 > def a_method(a,b)1.8.7-p334 :018?> puts ""a method with args: #{a}, #{b}""1.8.7-p334 :019?> end1.8.7-p334 :021 > meth_ref = Object.method(""a_method"") => #<Method: Class(Object)#a_method> 1.8.7-p334 :022 > meth_ref.call(2,3) a = lambda {|a, b| puts ""#{a}, #{b}""} a.call(2,3)",What is the difference between a method and a proc object?
what is the difference between method and a proc object?," I know that methods in Ruby are not objects but procs and lambdas are. Is there any difference between them other than that? Because both we can pass around. What makes the proc objects different from a method?Method: Proc Object: <code>  1.8.7-p334 :017 > def a_method(a,b)1.8.7-p334 :018?> puts ""a method with args: #{a}, #{b}""1.8.7-p334 :019?> end1.8.7-p334 :021 > meth_ref = Object.method(""a_method"") => #<Method: Class(Object)#a_method> 1.8.7-p334 :022 > meth_ref.call(2,3) a = lambda {|a, b| puts ""#{a}, #{b}""} a.call(2,3)",What is the difference between a method and a proc object?
Error with Gem Installtion in windows System," I am using a Windows PC running 8.1 and working with Ruby Installer 2.1.5.While installing a gem I am getting a error: I hope there is a good solution. <code>  C:\> gem install bundleERROR: Could not find a valid gem 'bundle' (>= 0), here is why: Unable to download data from https://rubygems.org/ - SSL_connect returned=1 errno=0 state=SSLv3 read server certificate B: certificate verify failed (https://api.rubygems.org/latest_specs.4.8.gz)","""certificate verify failed"" error when installing Ruby gems on Windows"
Error with Gem installtion in Windows system," I am using a Windows PC running 8.1 and working with Ruby Installer 2.1.5.While installing a gem I am getting a error: I hope there is a good solution. <code>  C:\> gem install bundleERROR: Could not find a valid gem 'bundle' (>= 0), here is why: Unable to download data from https://rubygems.org/ - SSL_connect returned=1 errno=0 state=SSLv3 read server certificate B: certificate verify failed (https://api.rubygems.org/latest_specs.4.8.gz)","""certificate verify failed"" error when installing Ruby gems on Windows"
How to use pry-byebug in an example script for a gem I am writing?," I'm working on making my first gem, which is not a Rails app, is a tic-tac-toe library with some AI in it, so I can play a computer opponent that will never lose and force a win if possible.Right now I am trying to debug the attack strategy in the AI, but I can't seem to figure out how to get pry-byebug working in my test script, specfically, have the debugging commands like step, next, etc. work upon hitting a binding.pry.The gem, named smart-tac-toe, has the following directory structure: As you can see above, there is an 'example' directory in my gem which contains ""example.rb"", where I use the classes I've made.However, when I use binding.pry and try to use step and next, the Pry session just exits and the script keeps running.In my smart_tac_toe.gemspec file, I clearly have pry-byebug: and at the top of my example.rb file, I have tried requiring the proper gems: I am using Ruby 2.1.1p76 , the repo for this gem is located at https://github.com/discotroll65/smart_tac_toeAlso, though putting binding.pry into my example script does throw me into a debugging session, initially it is in a reading mode, and I have to press q to exit that before I can start doing repl stuff. Any thoughts as to why this may be? <code>  $ ls smart-tac-toeexample Gemfile Gemfile.lock Guardfile lib LICENSE.txt Rakefile README.md smart_tac_toe.gemspec spec tmp spec.add_development_dependency ""pry-byebug"", '~>2.0.0' require 'pry'require 'pry-byebug'require ""../lib/smart_tac_toe.rb""",How to use pry-byebug in an example script for a gem?
How to time a gets.chomp method in ruby, I am trying to write a program that will ask the user to answer a question using gets.chomp in three seconds or the answer will automatically return false.I figured out everything except for the timeout part and I was wondering if anyone could please help.  <code> ,How to timeout gets.chomp
bundle install failed duo to Bundler::GemspecError: Could not read gem at," I'm getting these errors while installing a bundle: <code>  bundle installFetching gem metadata from https://rubygems.org/.........Resolving dependencies...Bundler::GemspecError: Could not read gem at /Users/liuxin/.rvm/gems/ruby-1.9.3-p547/cache/i18n-0.6.11.gem. It may be corrupted.An error occurred while installing i18n (0.6.11), and Bundler cannot continue.Make sure that `gem install i18n -v '0.6.11'` succeeds before bundling. gem install i18n -v '0.6.11'ERROR: Error installing i18n: invalid gem: package metadata is missing in /Users/liuxin/.rvm/gems/ruby-1.9.3-p547/cache/i18n-0.6.11.gem rvm listrvm rubies=* ruby-1.9.3-p547 [ x86_64 ] ruby-2.1.2 [ x86_64 ]",bundle install failed due to Bundler::GemspecError: Could not read gem at
Can someone explain `not` vs `!` in ruby?," Are not and ! synonyms, or are they evaluated differently? <code> ","Difference between ""not"" and ""!"" in ruby"
Difference between `not` and `!` in ruby," Are not and ! synonyms, or are they evaluated differently? <code> ","Difference between ""not"" and ""!"" in ruby"
"Why am I getting uninitialized Constant for a rake task, Rails 4.1.8"," I have a problem when I do: The first task will work fine. I can even add binding.pry and run Xaaron::Role and get information about Roles back. But the second task fails with: I run each task in my main app because these tasks are inside an engine, using: I can run bin/rails c in the main application that uses the engine and run Xaaron::Role and get information about Roles table.Why is the second one failing but the first one is not? Is there scoping with arguments? <code>  namespace :xaaron do task :get_roles do roles = Xaaron::Role.all puts roles end task :get_role, [:name] do |t, args| role = Xaaron::Role.find(args[:name].parameterize) puts role endend NameError: uninitialized constant Xaaron::Role bin/rake xaaron:get_roles` and `bin/rake xaaron:get_role","How to fix ""uninitialized constant"" in a Rake task"
"Rails: Why am I getting uninitialized Constant for a rake task, Rails 4.1.8"," I have a problem when I do: The first task will work fine. I can even add binding.pry and run Xaaron::Role and get information about Roles back. But the second task fails with: I run each task in my main app because these tasks are inside an engine, using: I can run bin/rails c in the main application that uses the engine and run Xaaron::Role and get information about Roles table.Why is the second one failing but the first one is not? Is there scoping with arguments? <code>  namespace :xaaron do task :get_roles do roles = Xaaron::Role.all puts roles end task :get_role, [:name] do |t, args| role = Xaaron::Role.find(args[:name].parameterize) puts role endend NameError: uninitialized constant Xaaron::Role bin/rake xaaron:get_roles` and `bin/rake xaaron:get_role","How to fix ""uninitialized constant"" in a Rake task"
Using gets.chomp and arguments," Hi I am making a simple ruby script practiced where I make a form using gets.chomp and arguments, the problem is that when gets.chomp use the script returns me an error when I apply the argument test.The code: The error: Can anyone help? <code>  #!usr/bin/rubydef formulario(quien) while (1) print ""[+] Word : "" word = gets.chomp print quien + "" -> "" + word endendquien = ARGV[0]formulario(quien) [+] Word : C:/Users/test/test.rb:8:in `gets': No such file or directory @ rb_sysopen - test (Errno::ENOENT) from C:/Users/test/test.rb:8:in `gets' from C:/Users/test/test.rb:8:in `formulario' from C:/Users/test/test.rb:17:in `<main>'","Using gets() gives ""No such file or directory"" error when I pass arguments to my script"
How to get Rails 4 ActionController::Live streaming working with Thin and Ruby 2?," QuestionCan you use thin with ActionController::Live to implement Server Side Events (SSE) and long polling? If so, how?ContextAlthough the title is a repeat of How to get Rails 4 ActionController::Live streaming working with Thin and Ruby 2? And how do Thin and Puma scale with live streaming?, the OP muddied the waters by asking two questions, and this question never got answered.A number of other posts suggest you CAN use thin for Server Side Events (sse) if you start it via exec thin start --threaded: Does Heroku support ActionController::Live? and Is puma the ONLY multi-threaded rails 4 http server?, Aaron's seminal http://tenderlovemaking.com/2012/07/30/is-it-live.html and Ryan's perennially dependable http://railscasts.com/episodes/401-actioncontroller-live?view=asciicast. But even though I'm copying the Railscast example, I haven't been able to get it to work with thin.What I've tried _ _ _ Running itIn shell window A: Then in shell window B: Back in shell window A I see the request and the responses being spit out at one second intervals (there's a one second delay between the 0... and 1... and 2...). That's good: But in shell window B, the printout is delayed and appears all at once. The same thing happens when I view the page in Chrome. Have I failed to configure some settings properly?P.S.: P.P.S.Right now you might be thinking ""Why aren't you using puma like everyone else?"" Good question. Right now, I'm unable to build the puma gem on my machine for reasons I haven't figured out. And I've been using thin in most of my heroku deployed apps, so I'm comfortable with it. If I can't get thin to work, I'll put more effort into building puma. <code>  # ----------------------------------------------------------------# file: config/routes.rbRails.application.routes.draw do resources :widgets do collection do get 'events' # SSE test end endend # ----------------------------------------------------------------# file: config/environments/development.rbRails.application.configure do ... snip ... # see http://tenderlovemaking.com/2012/07/30/is-it-live.html config.preload_frameworks = true config.allow_concurrency = trueend # ----------------------------------------------------------------# file: app/controllers/widgets_controller.rbclass WidgetsController < ApplicationController include ActionController::Live # GET /widgets/events # see http://railscasts.com/episodes/401-actioncontroller-live?view=asciicast def events # SSE expects the `text/event-stream` content type response.headers['Content-Type'] = 'text/event-stream' 3.times do |n| response.stream.write ""#{n}...\n\n"" sleep 2 end ensure response.stream.close endend # ----------------------------------------------------------------# Gemfilesource 'https://rubygems.org'gem 'rails', '4.1.8'gem 'pg'... snip ...gem 'thin' $ bundle installChalcedony[~/Projects/heroku-sample/widget-worker]$ thin start --threaded --traceUsing rack adapterThin web server (v1.6.3 codename Protein Powder)Tracing ONMaximum connections set to 1024Listening on 0.0.0.0:3000, CTRL+C to stop $ curl --no-buffer localhost:3000/widgets/events GET /widgets/events HTTP/1.1User-Agent: curl/7.37.1Host: localhost:3000Accept: */*HTTP/1.1 200 OKX-Frame-Options: SAMEORIGINX-XSS-Protection: 1; mode=blockX-Content-Type-Options: nosniffCache-Control: no-cacheContent-Type: text/html; charset=utf-8X-Request-Id: 95e64eb6-ee21-4e97-a33a-dbf579b3027cX-Runtime: 0.066925Connection: closeServer: thin0... <delay...>1... <delay...>2... <delay...> $ rake aboutAbout your application's environmentRuby version 2.1.4-p265 (x86_64-darwin14.0)RubyGems version 2.2.2Rack version 1.5Rails version 4.1.8JavaScript Runtime JavaScriptCoreActive Record version 4.1.8Action Pack version 4.1.8Action View version 4.1.8Action Mailer version 4.1.8Active Support version 4.1.8Middleware Rack::Sendfile, ActionDispatch::Static, #<ActiveSupport::Cache::Strategy::LocalCache::Middleware:0x007fb0cb4ae1a0>, Rack::Runtime, Rack::MethodOverride, ActionDispatch::RequestId, Rails::Rack::Logger, ActionDispatch::ShowExceptions, ActionDispatch::DebugExceptions, ActionDispatch::RemoteIp, ActionDispatch::Reloader, ActionDispatch::Callbacks, ActiveRecord::Migration::CheckPending, ActiveRecord::ConnectionAdapters::ConnectionManagement, ActiveRecord::QueryCache, ActionDispatch::Cookies, ActionDispatch::Session::CookieStore, ActionDispatch::Flash, ActionDispatch::ParamsParser, Rack::Head, Rack::ConditionalGet, Rack::ETagEnvironment developmentDatabase adapter postgresqlDatabase schema version 20141213003938",How to get ActionController::Live streaming working with Thin?
Disable Geocode in Test enviroment," In my Ruby on Rails application I'm using Geocoder. It works fine, but my tests are ten times slower! I found some solution but in my opinion they are not very clear? Is there any way to disable Geocoder on test environment? <code> ",Disable Geocode in Test environment
Merge! Local Host Error, When I run rails s: When I run rake db:reset or db:migrate or db:setup: <code>  /Users/galli01anthony/.rvm/gems/ruby-2.1.3/gems/devise-3.2.4/lib/devise/rails/routes.rb:455:in`ensure in with_devise_exclusive_scope': undefined method `merge!' for#<ActionDispatch::Routing::Mapper::Scope:0x007f8743e19020> (NoMethodError) rake aborted!NoMethodError: undefined method `merge!' for #<ActionDispatch::Routing::Mapper::Scope:0x007fca8d3f2780>,Devise raises error with Rails 4.2 upgrade
Merge! Local host error, When I run rails s: When I run rake db:reset or db:migrate or db:setup: <code>  /Users/galli01anthony/.rvm/gems/ruby-2.1.3/gems/devise-3.2.4/lib/devise/rails/routes.rb:455:in`ensure in with_devise_exclusive_scope': undefined method `merge!' for#<ActionDispatch::Routing::Mapper::Scope:0x007f8743e19020> (NoMethodError) rake aborted!NoMethodError: undefined method `merge!' for #<ActionDispatch::Routing::Mapper::Scope:0x007fca8d3f2780>,Devise raises error with Rails 4.2 upgrade
Ensuring operation runs before rails app dies, I have an operation that I need to execute in my rails application that before my Rails app dies. Is there a hook I can utilize in Rails for this? Something similar to at_exit I guess. <code> ,"How can I ensure an operation runs before Rails exits, without using `at_exit`?"
What happened to first! on ActiveRecord::Associations::CollectionProxy in Rails 4.2?," I'm starting to upgrade from Rails 4.1.4 to Rails 4.2.0. It looks like first! is no longer supported on some active record associations.What happened to first! (on ActiveRecord::Associations::CollectionProxy) to cause it to fail now? How can fix the behavior so it works as in 4.1.4?Rails 4.1: Rails 4.2: UpdatedDigging into ActiveRecord, I find it failing here: loaded? returns true, but @records is nil. Throwing a debugger in and calling find_nth_with_limit(offset, 1).first returns the record that I expect.first! is defined in finder_methods.rb in active record the issue seems to be that the association thinks its loaded, but @records is nil <code>  (byebug) user.organization.registration_codes#<ActiveRecord::Associations::CollectionProxy [#<RegistrationCode id: 259, code: ""AWESOMESAUCE"" ... >]>(byebug) user.organization.registration_codes.first!#<RegistrationCode id: 259, code: ""AWESOMESAUCE"" ... > (byebug) user.organization.registration_codes#<ActiveRecord::Associations::CollectionProxy [#<RegistrationCode id: 259, code: ""AWESOMESAUCE"" ... >]>(byebug) user.organization.registration_codes.first!NoMethodError Exception: undefined method `[]' for nil:NilClassnil def find_nth(index, offset) if loaded? @records[index] else offset += index @offsets[offset] ||= find_nth_with_limit(offset, 1).first endend","""first!"" on AR CollectionProxy raises ""undefined method [] for nil"" after updating from Rails 4.1.4 to 4.2.0"
"PG::CharacterNotInRepertoire: ERROR: invalid byte sequence for encoding ""UTF8"""," I am upgrading Rails 4.1 app to use Ruby 2.2. During upgrade it turned out that the app used old version of pg gem (0.12) and gem was not installing using Ruby 2.2. So I tried to use newer version of pg gem (0.17.1). Now I sometimes get following error when a new user is created in the system: PG::CharacterNotInRepertoire: ERROR: invalid byte sequence for encoding ""UTF8""Are there any known issues with Ruby 2.2 and Postgres? Looks like application is configured to use unicode: config.encoding = ""utf-8"" is set in application.rb and encoding: unicode is in database.ymlSQL statement: <code>  INSERT INTO ""users"" ( ""confirmation_sent_at"", ""confirmation_token"", ""created_at"", ""email"", ""encrypted_password"", ""first_name"", ""last_name"", ""updated_at"") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING ""id""","Ruby 2.2: PG::CharacterNotInRepertoire: ERROR: invalid byte sequence for encoding ""UTF8"""
Using capture_io with Logger in ruby," I have a ruby class like this: And a test script line this: When I run this test, both out and err are empty strings. I see the message printed on stderr (on the terminal). Is there a way to make Logger and capture_io to play nicely together?I'm in a straight Ruby environment, not Ruby on Rails. <code>  require 'logger'class T def do_something log = Logger.new(STDERR) log.info(""Here is an info message"") endend #!/usr/bin/env rubygem ""minitest""require 'minitest/autorun'require_relative 't'class TestMailProcessorClasses < Minitest::Test def test_it me = T.new out, err = capture_io do me.do_something end puts ""Out is '#{out}'"" puts ""err is '#{err}'"" endend",Capture Ruby Logger output for testing
Can't launch chrome with WATIR," Earlier I had put the Chrome binary, ""chromedriver.exe"", in the ""C:/Windows"" directory and Watir was picking it from there. Now I have to move my project to another machine so I can't hardcode the executable path. I also want the binary to be kept with our code on Git rather than making each test engineer manually update the binary as newer versions are released.Now I have placed Chrome binary at a absolute path, but it is not being found. Here is what I tried (hooks.rb): The output is: I am on Windows 7, Using Ruby version 1.9.3p551 and I am referring to tutorial http://watirwebdriver.com/chrome/.How do I tell Watir (and Selenium-WebDriver) the location of the chromedriver.exe? <code>  Before do puts ""inside hooks in before"" profile = Selenium::WebDriver::Chrome::Profile.new profile['download.prompt_for_download'] = false profile['download.default_directory'] = File.join(File.absolute_path('../..', File.dirname(__FILE__)),""browsers/chromedriver.exe"") @browser = Watir::Browser.new :chrome, :profile => profile end inside hooks in beforeSelenium::WebDriver::Error::WebDriverError: Unable to find the chromedriver executable. Please download the server from http://chromedriver.storage.googleapis.com/index.html and place it somewhere on your PATH. More info at http://code.google.com/p/selenium/wiki/ChromeDriver.C:/Ruby193/lib/ruby/gems/1.9.1/gems/selenium-webdriver-2.44.0/lib/selenium/webdriver/chrome/service.rb:21:in `executable_path'C:/Ruby193/lib/ruby/gems/1.9.1/gems/selenium-webdriver-2.44.0/lib/selenium/webdriver/chrome/service.rb:34:in `default_service'C:/Ruby193/lib/ruby/gems/1.9.1/gems/selenium-webdriver-2.44.0/lib/selenium/webdriver/chrome/bridge.rb:14:in `initialize'C:/Ruby193/lib/ruby/gems/1.9.1/gems/selenium-webdriver-2.44.0/lib/selenium/webdriver/common/driver.rb:37:in `new'C:/Ruby193/lib/ruby/gems/1.9.1/gems/selenium-webdriver-2.44.0/lib/selenium/webdriver/common/driver.rb:37:in `for'C:/Ruby193/lib/ruby/gems/1.9.1/gems/selenium-webdriver-2.44.0/lib/selenium/webdriver.rb:67:in `for'C:/Ruby193/lib/ruby/gems/1.9.1/gems/watir-webdriver-0.6.11/lib/watir-webdriver/browser.rb:46:in `initialize'C:/Users/Admin/watircukepractice/test_puppies/features/support/hooks.rb:11:in `new'C:/Users/Admin/watircukepractice/test_puppies/features/support/hooks.rb:11:in `Before'",How to specify the location of the chromedriver binary
How can this be a method?," I read this: Lets start with a simple Ruby program. Well write a method that returns a cheery, personalized greeting. My understanding is that a method is a function or subroutine that is defined in a class, which can be associated to a class (class method) or to an object (instance method).Then, how can that be a method if it was not defined within a class? <code>  def say_goodnight(name) result = ""Goodnight, "" + name return resultend",Why are global methods allowed to be defined outside of a class in Ruby?
Programmatic way to obtain keywords in ruby," I have an Array in Ruby, with all keywords.For instance: My question is simple:Is there an in-built way to programmatically access all keywords?Some of my projects need to run a query against user input,and it's a bit annoying to have to define the same array inall these projects. <code>  RUBY_KEYWORDS = %w( alias and BEGIN begin break case class def defined do else elsif END end ensure false for if in module next nil not or redo rescue retry return self super then true undef unless until when while yield)",Programmatic way to obtain Ruby keywords
Is Mongoid::Document an ObjectID::Identification for ActiveJobs?," According to the ActiveJobs guide, section 8, it says: This works with any class that mixes in GlobalID::Identification, which by default has been mixed into Active Model classes.Mongoid::Document mixes ActiveModel::Model, but I can't find GlobalID::Identification in its included_modules.Where is GlobalID::Identification defined?Can I effectively use any Mongoid::Document for my ActiveJobs? <code> ",Is Mongoid::Document a GlobalID::Identification for ActiveJobs?
Is Mongoid::Document an GlobalID::Identification for ActiveJobs?," According to the ActiveJobs guide, section 8, it says: This works with any class that mixes in GlobalID::Identification, which by default has been mixed into Active Model classes.Mongoid::Document mixes ActiveModel::Model, but I can't find GlobalID::Identification in its included_modules.Where is GlobalID::Identification defined?Can I effectively use any Mongoid::Document for my ActiveJobs? <code> ",Is Mongoid::Document a GlobalID::Identification for ActiveJobs?
Rails: using `eager_load = true` in development & test, I need to know why eager_load is preferred to be false in non-production environments? One of the arguments that I have heard of says that eager_load eager loads most of Rails and application in memory. Hence using eager_load for individual test makes it run slower. However this raises some questions like how does a test run without loading Rails and application related code? What is the Rails and application related code that is being eager loaded? config.eager_load_namespaces gives the following classes: Are all of these classes and their subclasses being eager loaded?What are the clear disadvantages of using eager_load = false in development or testing environment? <code>  ActiveSupportActionDispatchActiveModelActionViewActionControllerActiveRecordActionMailerJquery::Rails::EngineMyApp::Application,What's the impact of eager_load=true?
How to do complex querying with logical operations by using searchkick," Iam using searchkick library as an elasticsearch client for Product searching.https://github.com/ankane/searchkickIt is possible to create 'OR' condition and 'AND' condition;AND operationProduct.search where: {price: {lte: 200}, in_stock: true} OR operationProduct.search where: {or: [[{in_stock: true}, {backordered: true}]]}But Iam stuck with creating multiple 'AND' 'OR' conditions with searchkick.I need something likeA OR B OR ( C AND D )or I need like this, A AND B AND ( C OR D )Please guide me, how to achieve thisThanks <code> ",How to do complex querying with logical operations by using searchkick
How to access privtae class methods in Ruby?," Given a Class in Ruby: To access private methods I can call .send(:my_method) on the Class Object, but how does that work for class methods? <code>  class MyClass def self.my_class_method puts ""class method"" end private def my_method puts ""regular method"" end private_class_method :my_class_methodend",How to access private class methods in Ruby?
rails - `link_to` same page but with anchor -> no reload," I want to use to cancel the edit and go back to the edit page.I use jQuery UI Tabs for a tabbed edit page. Each tab has it's own form and submit/cancel buttons.When I click a Cancel link I want to go back to the active tab. So I set The problem is: the page doesn't reload because of the anchor.Adding data-no-turbolink does not help: <code>  link_to 'Cancel', edit_project_path(@project, url_options) url_options = {:anchor => active_tab_id} link_to 'Cancel', edit_project_path(@project, url_options), :data => {:no_turbolink => true}",rails - link_to same page but with anchor -> no reload
"Encoding Problems when running an app in docker (Pythen, Java, Ruby, ...) with Ubuntu Containers (ascii, utf-8)"," On my own PC the application runs nice, but when it gets deployed into docker, it fails because of invalid characters.I am using the ubuntu:latest container and python3, java and ruby. <code> ","Encoding Problems when running an app in docker (Python, Java, Ruby, ...) with Ubuntu Containers (ascii, utf-8)"
cretae method is Rspec," I need to understand this line of code in Rspec. What is this create function. It is not built in rails or ruby function. Do we have its documentation? <code>  create(:practice, creator: create(:physician, password: ""password123"", password_confirmation: ""password123"" ), phone: ""+1 (555) 555-5554"", office: ""+1 (555) 555-5555"", clinic_key: ""abc123"")",create method in Rspec
create method is Rspec," I need to understand this line of code in Rspec. What is this create function. It is not built in rails or ruby function. Do we have its documentation? <code>  create(:practice, creator: create(:physician, password: ""password123"", password_confirmation: ""password123"" ), phone: ""+1 (555) 555-5554"", office: ""+1 (555) 555-5555"", clinic_key: ""abc123"")",create method in Rspec
Error when the start execute rails generate scaffold User name:string email:string," Before writing this question I looked at these answers, but was unable to find a solution.:Error when execute rails generate scaffold User name:string email:stringrake aborted! undefined method `migration_error=' for ActiveRecord::Base:ClassError launching Rails server: undefined method 'configure'When I try to start a new application (for Hartl's tutorial, Chapter 2), at the stage scaffold start, I got an error like: But thanks to the above examples, I edited the development.rb file: (Yes, my application is called demo_app so I transformed its name).After that, I tried to run scaffold again but got a new error: In response to similar cases indicates a migration method - that it should be removed from the file development.rb. Similarly, I tried to find in this file raise_in_transactional_callbacks method, but it's not there!In addition, I would say that the full code that produces in cmd is very large: Where the ...(ellipsis) - specially cut similar code.That's all. I would be grateful for any help! <code>  **undefined method `configure' for #<SampleApp2::Application:0x00000101a74610> (NoMethodError)** DemoApp::Application.configure do **method_missing': undefined method raise_in_transactional_callbacks=' for ActiveRecord::Base:Class (NoMethodError)** C:\Sites\demo_app>rails generate scaffold User name:string email:stringinvoke active_recordC:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activerecord-4.0.2/lib/active_record/dynamic_matchers.rb:22:in `method_missing': undefined method `raise_in_transactional_callbacks=' for ActiveRecord::Base:Class (NoMethodError)from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activerecord-4.0.2/lib/active_record/railtie.rb:166:in `block (3 levels) in <class:Railtie>'from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activerecord-4.0.2/lib/active_record/railtie.rb:165:in `each'from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activerecord-4.0.2/lib/active_record/railtie.rb:165:in `block (2 levels) in <class:Railtie>'from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/railties-4.0.2/lib/rails/commands.rb:48:in `<top (required)>'from bin/rails:4:in `require'from bin/rails:4:in `<main>'",Undefined method raise_in_transactional_callbacks=' for ActiveRecord::Base:Class (NoMethodError)
Error when start generate scaffold," Before writing this question I looked at these answers, but was unable to find a solution.:Error when execute rails generate scaffold User name:string email:stringrake aborted! undefined method `migration_error=' for ActiveRecord::Base:ClassError launching Rails server: undefined method 'configure'When I try to start a new application (for Hartl's tutorial, Chapter 2), at the stage scaffold start, I got an error like: But thanks to the above examples, I edited the development.rb file: (Yes, my application is called demo_app so I transformed its name).After that, I tried to run scaffold again but got a new error: In response to similar cases indicates a migration method - that it should be removed from the file development.rb. Similarly, I tried to find in this file raise_in_transactional_callbacks method, but it's not there!In addition, I would say that the full code that produces in cmd is very large: Where the ...(ellipsis) - specially cut similar code.That's all. I would be grateful for any help! <code>  **undefined method `configure' for #<SampleApp2::Application:0x00000101a74610> (NoMethodError)** DemoApp::Application.configure do **method_missing': undefined method raise_in_transactional_callbacks=' for ActiveRecord::Base:Class (NoMethodError)** C:\Sites\demo_app>rails generate scaffold User name:string email:stringinvoke active_recordC:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activerecord-4.0.2/lib/active_record/dynamic_matchers.rb:22:in `method_missing': undefined method `raise_in_transactional_callbacks=' for ActiveRecord::Base:Class (NoMethodError)from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activerecord-4.0.2/lib/active_record/railtie.rb:166:in `block (3 levels) in <class:Railtie>'from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activerecord-4.0.2/lib/active_record/railtie.rb:165:in `each'from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activerecord-4.0.2/lib/active_record/railtie.rb:165:in `block (2 levels) in <class:Railtie>'from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/railties-4.0.2/lib/rails/commands.rb:48:in `<top (required)>'from bin/rails:4:in `require'from bin/rails:4:in `<main>'",Undefined method raise_in_transactional_callbacks=' for ActiveRecord::Base:Class (NoMethodError)
Undefined method raise_in_transactional_callbacks=' for ActiveRecord::Base:Class (NoMethodError) when generating scaffold," Before writing this question I looked at these answers, but was unable to find a solution.:Error when execute rails generate scaffold User name:string email:stringrake aborted! undefined method `migration_error=' for ActiveRecord::Base:ClassError launching Rails server: undefined method 'configure'When I try to start a new application (for Hartl's tutorial, Chapter 2), at the stage scaffold start, I got an error like: But thanks to the above examples, I edited the development.rb file: (Yes, my application is called demo_app so I transformed its name).After that, I tried to run scaffold again but got a new error: In response to similar cases indicates a migration method - that it should be removed from the file development.rb. Similarly, I tried to find in this file raise_in_transactional_callbacks method, but it's not there!In addition, I would say that the full code that produces in cmd is very large: Where the ...(ellipsis) - specially cut similar code.That's all. I would be grateful for any help! <code>  **undefined method `configure' for #<SampleApp2::Application:0x00000101a74610> (NoMethodError)** DemoApp::Application.configure do **method_missing': undefined method raise_in_transactional_callbacks=' for ActiveRecord::Base:Class (NoMethodError)** C:\Sites\demo_app>rails generate scaffold User name:string email:stringinvoke active_recordC:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activerecord-4.0.2/lib/active_record/dynamic_matchers.rb:22:in `method_missing': undefined method `raise_in_transactional_callbacks=' for ActiveRecord::Base:Class (NoMethodError)from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activerecord-4.0.2/lib/active_record/railtie.rb:166:in `block (3 levels) in <class:Railtie>'from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activerecord-4.0.2/lib/active_record/railtie.rb:165:in `each'from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activerecord-4.0.2/lib/active_record/railtie.rb:165:in `block (2 levels) in <class:Railtie>'from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/railties-4.0.2/lib/rails/commands.rb:48:in `<top (required)>'from bin/rails:4:in `require'from bin/rails:4:in `<main>'",Undefined method raise_in_transactional_callbacks=' for ActiveRecord::Base:Class (NoMethodError)
How do I make a Ruby script (.rb) into a bash command?," I have a Ruby file, and I run it as ruby file.rb ""parameters"". I prefer to run it as regtask parameters without having to include ruby and the filename every time. I want it to be on the same level as ls. How would I accomplish this? <code> ",How do I make a Ruby script into a bash command?
"Posgresql gem for rails wont install, even when both home brew and app are installed"," I have tried following this answer to get the gem to work, but it wont. I have my projects set up such that individuals projects have there own gems instead of all themes gems living in global space, and then I use binstubs to allow me to do things like bin/rails.So all gems are installed to .bundle/gems/ for each project. the one that always gives me the toughest problems is posgresql. Lets go through the steps.So I run:bundleIt explodes stating: So then, because I have the home brew version installed at 9.4.0 and the posgresql.app installed I then did: Followed by, because I use 18.1 And I got: From there I tried bundle Well we are back to square one because even though the gem installed - I get the EXACT same error.Is this because I am installing the pg gem globally and not locally? How can I fix this? This one project, every time I have to do a rm -rf .bundle/gems Causes this exact issue over and over again.I should point out I get the same error even if I use the home brew psql pg_config Do all the steps above, just with home brew version, same results. <code>  Gem::Installer::ExtensionBuildError: ERROR: Failed to build gem native extension. /System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/bin/ruby extconf.rb --with-pg-config=/Applications/Postgres.app/Contents/Versions/9.3/bin/pg_configUsing config values from /Applications/Postgres.app/Contents/Versions/9.3/bin/pg_configchecking for libpq-fe.h... yeschecking for libpq/libpq-fs.h... yeschecking for pg_config_manual.h... yeschecking for PQconnectdb() in -lpq... nochecking for PQconnectdb() in -llibpq... nochecking for PQconnectdb() in -lms/libpq... noCan't find the PostgreSQL client library (libpq)*** extconf.rb failed ***Could not create Makefile due to some reason, probably lack of necessarylibraries and/or headers. Check the mkmf.log file for more details. You mayneed configuration options.Provided configuration options: --with-opt-dir --without-opt-dir --with-opt-include --without-opt-include=${opt-dir}/include --with-opt-lib --without-opt-lib=${opt-dir}/lib --with-make-prog --without-make-prog --srcdir=. --curdir --ruby=/System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/bin/ruby --with-pg --without-pg --enable-windows-cross --disable-windows-cross --with-pg-config --with-pg-dir --without-pg-dir --with-pg-include --without-pg-include=${pg-dir}/include --with-pg-lib --without-pg-lib=${pg-dir}/ --with-pqlib --without-pqlib --with-libpqlib --without-libpqlib --with-ms/libpqlib --without-ms/libpqlibGem files will remain installed in /Users/Adam/Documents/Rails-Projects/AisisPlatform/.bundle/gems/gems/pg-0.18.1 for inspection.Results logged to /Users/Adam/Documents/Rails-Projects/AisisPlatform/.bundle/gems/gems/pg-0.18.1/ext/gem_make.outAn error occurred while installing pg (0.18.1), and Bundler cannot continue.Make sure that `gem install pg -v '0.18.1'` succeeds before bundling. bundle config build.pg --with-pg-config=/Applications/Postgres.app/Contents/Versions/9.3/bin/pg_config gem install pg -v '0.18.1' Building native extensions. This could take a while...Successfully installed pg-0.18.1invalid options: -f fivefish(invalid options are ignored)Parsing documentation for pg-0.18.1Done installing documentation for pg after 2 seconds1 gem installed","PostgreSQL gem for rails won't install, even when both home brew and app are installed"
Slowdown in Ruby 2.2.0 vs 2.1.5," I have a complex object, my_object, which I marshal withMarshal.dump(my_object)I have benchmarked the performance of calling that line 100 times in both 2.1.5p273 and 2.2.0, and below are the results: (I ran the benchmark 3 times for each version, to be thorough.)As you can see, it's taking in excess of 3 times as long in 2.2.0 vs 2.1.5. I zeroed in on Marshal.dump because, using the ruby-prof gem, it showed me that that was the line that was performing poorly; but I can't find a way to get the methods that Marshal.dump itself calls in the profiler.Edit: see my answer with a minimal repro, found after much experimentation <code>  2.1.5 user system total realMarshal Dump 7.310000 0.120000 7.430000 ( 8.988470)Marshal Dump 7.520000 0.050000 7.570000 ( 8.210356)Marshal Dump 7.610000 0.050000 7.660000 ( 8.432685)2.2.0 user system total realMarshal Dump 26.480000 0.150000 26.630000 ( 29.591742)Marshal Dump 24.100000 0.300000 24.400000 ( 28.520397)Marshal Dump 26.210000 0.210000 26.420000 ( 29.993412)",Mashalling in Ruby 2.2.0 slower than 2.1.5
Mashalling floats in Ruby 2.2.0 vastly slower than 2.1.5," I have a complex object, my_object, which I marshal withMarshal.dump(my_object)I have benchmarked the performance of calling that line 100 times in both 2.1.5p273 and 2.2.0, and below are the results: (I ran the benchmark 3 times for each version, to be thorough.)As you can see, it's taking in excess of 3 times as long in 2.2.0 vs 2.1.5. I zeroed in on Marshal.dump because, using the ruby-prof gem, it showed me that that was the line that was performing poorly; but I can't find a way to get the methods that Marshal.dump itself calls in the profiler.Edit: see my answer with a minimal repro, found after much experimentation <code>  2.1.5 user system total realMarshal Dump 7.310000 0.120000 7.430000 ( 8.988470)Marshal Dump 7.520000 0.050000 7.570000 ( 8.210356)Marshal Dump 7.610000 0.050000 7.660000 ( 8.432685)2.2.0 user system total realMarshal Dump 26.480000 0.150000 26.630000 ( 29.591742)Marshal Dump 24.100000 0.300000 24.400000 ( 28.520397)Marshal Dump 26.210000 0.210000 26.420000 ( 29.993412)",Mashalling in Ruby 2.2.0 slower than 2.1.5
RangeError for simple interger assignment in Rails 4.2.0 that should be caught by validation," * UPDATE: this is now fixed in 4.2.stable and 4.2.1 *in Rails 4.2.0 (and current 4.2.stable), the ensure_in_range method happens before AR validation, yielding a RangeErrorif I do something as simple as on a column with a postgres type integer it yields RangeError: 10000000000 is out of range for ActiveRecord::ConnectionAdapters::PostgreSQL::OID::Integer with limit 4 from .../2.0.0-p598/lib/ruby/gems/2.0.0/bundler/gems/rails-62e9e61f2d1b/activerecord/lib/active_record/type/integer.rb:41:in `ensure_in_range'which is true! but tell that to the users. there's an ActiveRecord model validation like i can't imagine this is expected behavior, anyone have any explanation why this type cast happens before validation? <code>  @obj.threshold = 10_000_000_000 threshold | integer | validates :threshold, presence: true, numericality: { greater_than_or_equal_to: 0, less_than: 1_000_000}",RangeError for simple integer assignment in Rails 4.2.0 that should be caught by validation
"Ruby - Reading files in a zip archive, without unzipping the archive"," I have a directory with 100+ zip files and I need to read the files inside the zip files to do some data processing, without unzipping the archive.Is there a Ruby library to read the contents of files in zip archives, without unzipping the file?Using rubyzip gives an error: Gives this error: <code>  require 'zip'Zip::File.open('my_zip.zip') do |zip_file| # Handle entries one by one zip_file.each do |entry| # Extract to file/directory/symlink puts ""Extracting #{entry.name}"" entry.extract('here') # Read into memory content = entry.get_input_stream.read endend test.rb:12:in `block (2 levels) in <main>': undefined method `read' for Zip::NullInputStream:Module (NoMethodError) from .gem/ruby/gems/rubyzip-1.1.6/lib/zip/entry_set.rb:42:in `call' from .gem/ruby/gems/rubyzip-1.1.6/lib/zip/entry_set.rb:42:in `block in each' from .gem/ruby/gems/rubyzip-1.1.6/lib/zip/entry_set.rb:41:in `each' from .gem/ruby/gems/rubyzip-1.1.6/lib/zip/entry_set.rb:41:in `each' from .gem/ruby/gems/rubyzip-1.1.6/lib/zip/central_directory.rb:182:in `each' from test.rb:6:in `block in <main>' from .gem/ruby/gems/rubyzip-1.1.6/lib/zip/file.rb:99:in `open' from test.rb:4:in `<main>'","Reading files in a zip archive, without unzipping the archive"
no-padding for Ruby hours," When using strftime @tzformat = ""%F,%l:00 %p"": I want exactly one space between the comma and the hour. But %l gives no space for 10, 11 and 12 whereas if I put %l I get two spaces for 0-9 (one from the padding and another from the space I add).Month has no-padding option. I dont see the same for hour.What am I missing? <code> ",No padding for hours in strftime
check if svn checkout needs authentication," Is there any possible way to check if a SVN update needs authentication or not? Scenario : I have written a ruby GUI app which updates SVN repositories (from a static path) in a scheduled manner. This executes as a windows service. Also have tortoisesvn installed. In ruby when I execute svn update local_path_to_repository --username user --password password in my script then it works fine as I am passing the username & password with the update command. But, tortoisesvn saves the password (by caching password, using standard Windows cryptography services to encrypt the password on disk) when I checkout the repository for the first time so I don't necessarily need to pass the username and password every time. Thus I just have svn update local_path_to_repository in my script.Issue: This works fine until I change my LDAP password. Once my LDAP password is changed all the repository fails to get updated as it is requesting for the new password but there is no user interface for passing the new password. I need to build the username and password UI only when svn updates needs those credentials but not always. How do I achieve this? Update : Reading from the SVN book. I Understood that: The client checks whether the user specified any credentials as command-line options (--username and/or --password). If not, or if these options fail to authenticate successfully, thenThe client looks up the server's hostname, port, and realm in the runtime auth/ area, to see if the user already has the appropriate credentials cached. If not, or if the cached credentials fail to authenticate, thenFinally, the client resorts to prompting the user (unless instructed not to do so via the --non-interactive option or its client-specific equivalents).But I did not find a way to check if authentication is required. Can anyone please help me!  <code> ",How to check if a svn command needs authentication
check if svn update needs authentication," Is there any possible way to check if a SVN update needs authentication or not? Scenario : I have written a ruby GUI app which updates SVN repositories (from a static path) in a scheduled manner. This executes as a windows service. Also have tortoisesvn installed. In ruby when I execute svn update local_path_to_repository --username user --password password in my script then it works fine as I am passing the username & password with the update command. But, tortoisesvn saves the password (by caching password, using standard Windows cryptography services to encrypt the password on disk) when I checkout the repository for the first time so I don't necessarily need to pass the username and password every time. Thus I just have svn update local_path_to_repository in my script.Issue: This works fine until I change my LDAP password. Once my LDAP password is changed all the repository fails to get updated as it is requesting for the new password but there is no user interface for passing the new password. I need to build the username and password UI only when svn updates needs those credentials but not always. How do I achieve this? Update : Reading from the SVN book. I Understood that: The client checks whether the user specified any credentials as command-line options (--username and/or --password). If not, or if these options fail to authenticate successfully, thenThe client looks up the server's hostname, port, and realm in the runtime auth/ area, to see if the user already has the appropriate credentials cached. If not, or if the cached credentials fail to authenticate, thenFinally, the client resorts to prompting the user (unless instructed not to do so via the --non-interactive option or its client-specific equivalents).But I did not find a way to check if authentication is required. Can anyone please help me!  <code> ",How to check if a svn command needs authentication
check if a svn command needs authentication," Is there any possible way to check if a SVN update needs authentication or not? Scenario : I have written a ruby GUI app which updates SVN repositories (from a static path) in a scheduled manner. This executes as a windows service. Also have tortoisesvn installed. In ruby when I execute svn update local_path_to_repository --username user --password password in my script then it works fine as I am passing the username & password with the update command. But, tortoisesvn saves the password (by caching password, using standard Windows cryptography services to encrypt the password on disk) when I checkout the repository for the first time so I don't necessarily need to pass the username and password every time. Thus I just have svn update local_path_to_repository in my script.Issue: This works fine until I change my LDAP password. Once my LDAP password is changed all the repository fails to get updated as it is requesting for the new password but there is no user interface for passing the new password. I need to build the username and password UI only when svn updates needs those credentials but not always. How do I achieve this? Update : Reading from the SVN book. I Understood that: The client checks whether the user specified any credentials as command-line options (--username and/or --password). If not, or if these options fail to authenticate successfully, thenThe client looks up the server's hostname, port, and realm in the runtime auth/ area, to see if the user already has the appropriate credentials cached. If not, or if the cached credentials fail to authenticate, thenFinally, the client resorts to prompting the user (unless instructed not to do so via the --non-interactive option or its client-specific equivalents).But I did not find a way to check if authentication is required. Can anyone please help me!  <code> ",How to check if a svn command needs authentication
Initializing an Hash with empty array unexpected behaviour," I want to initialize a Hash with an empty Array and for every new key push a certain value to that array.Here's what I tried to do: The expected output for a was {1 => [""asd""]} but that didn't happen. What am I missing here?Ruby version:  <code>  a = Hash.new([])# => {} a[1] << ""asd""# => [""asd""]a# => {} ruby 2.0.0p598 (2014-11-13 revision 48408) [x86_64-linux]",Initializing a Hash with empty array unexpected behaviour
cannot start rails 4 console on production server," Having a weird issue and need help.I am trying to start a rails console on a production server and it is acting like the rails c command does not exist.FWIW, I have been a rails developer for 4 years and do this all the time on a plethora of other servers without issue. On this server, I can drop, create, migrate, seed the database with no problems (using RAILS_ENV=production), and the app works fine live without any issues. Setup:Ubuntu 14.04 (racksapce 2nd gen performance 1 server)Nginx with Passenger (I typically use Unicorn, but have never had a problem on any of the apps I have deployed with Passenger)Ruby 2.1.5 (using rvm)Rails 4.1.7PostgresCapistrano 3 (using the rvm, migrations, asset-precompilation, etc. extensions)What I've tried:cd into app directory: Which loads .rvmrc and shows that I am in the correct gemset, ran bundle just for kicks. Every time, I get a notice that implies 'rails c' is not a valid command: Again, I have logged into hundreds of production consoles on both nginx/apache deployed with old and new versions of both Unicorn and mostly older versions of Passenger.This is the first time I have ever gotten this message, and the console is the ONLY thing that seems to be broken - everything else works fine! the app is live and works great.I know that the first thing to be suggested is that I am not running rails c production from the app directory - I have cd'd into the correct directory at least 10 times and manually loaded the correct gemset, this is not the issue.Can't figure out why it works fine in development, but not in production. I know there used to be a scripts directory a while back (maybe rails 2?)- Is there still a directory that contains the script commands for rails that may have been corrupted?Has anyone ever experienced this before or have any suggestions?I feel like I am missing something. <code>  cd /home/deployer/app_name/current rails c production # (which usually works no problem)bundle exec rails c production # (sometimes have to do this on older apps that do not have the newer capistrano 3 and rvm setup)rails c production RAILS_ENV=production # (getting desperate here)RAILS_ENV=production rails c production # (haha, surely this won't work, but out of options)RAILS_ENV=production bundle exec rails console Usage: rails new APP_PATH [options]Options: -r, [--ruby=PATH] # Path to the Ruby binary of your choice..... yada yada, shows the rest of the rails options (oddly enough does not show 'c' or 'console' as options?)",Cannot start rails 4 console on production server
How to fully reload an ActiveRecord?," In an RSpec test, I create a record that has several memoizied values.foo.reload works as expected for the object's attributes, but memoized ones are still present.So far, it works by completely recreating the object: foo = Foo.find(123) but in my case, the logic for finding the record is actually more complex.What's a good, DRY way to fully reload the record and erase all memoized values? <code> ",How to fully reload an ActiveRecord to reset it's memoized values?
"Is there a ""Ruby Way"" to remove boilerplate code in initializers?"," I write lots of initialize code that sets attrs to parameters, similar to this: Is there a more Ruby way of doing this? I feel like I'm writing that same boilerplate setup code over and over. <code>  class SiteClient attr_reader :login, :password, :domain def initialize(login, password, domain='somedefaultsite.com') @login = login @password = password @domain = domain end end",Is there a Ruby way to remove boilerplate code in initializers?
ruby strftime not displaying timezone offset with '%Z'," I have the following Time object: I'm completely stumped as this: works just fine.What is going on in the above block to prevent a timezone from displaying in human readable format? <code>  [8] pry(#<#<Class:0x007f928f12f560>>)> display_num=> 2015-02-19 09:00:00 -0600[9] pry(#<#<Class:0x007f928f12f560>>)> display_num.is_a?(Time)=> true[10] pry(#<#<Class:0x007f928f12f560>>)> display_num.is_a?(DateTime)=> false[11] pry(#<#<Class:0x007f928f12f560>>)> display_num.strftime(""%l:%M%P %Z"")=> "" 9:00am ""[12] pry(#<#<Class:0x007f928f12f560>>)> display_num.strftime(""%l:%M%P %z"")=> "" 9:00am -0600"" [16] pry(#<#<Class:0x007f928f12f560>>)> Time.new=> 2015-02-02 14:09:13 -0800[17] pry(#<#<Class:0x007f928f12f560>>)> t = Time.new=> 2015-02-02 14:09:25 -0800[18] pry(#<#<Class:0x007f928f12f560>>)> t.strftime(""%l:%M%P %Z"")=> "" 2:09pm PST""",Ruby's strftime not displaying timezone offset with '%Z'
"Ruby ""bundle exec"" error on Openshift"," I'am fairly new in Ruby and terms of deploying app through remote tools. I've tried to deploy my App on free openshift account. And I connot run application.When I run application i get this error: So I try to run bundle exec but i got another error: I think it might be because I used Ruby 2.1.5 on local and Open shift runs Ruby 2.0 by default.I had foud this topic How can I force a bundle install on OpenShift Online when my RAILS_ENV is set to development?but i don't know if I am doing it right. I don't even know where to put this pre_build file. I tried to put it under /var/lib/openshift/xxxxxxxxxxxxxxxxxxxxxxxxxx/app-root/runtime/repo/.openshift/action_hooks/ . But I'm not sure if runtime is right repo.EDIT 1:This it my Gemfile: SOLUTION:As @Rajarshi Das said I had to change into I don know exactly why. Maybe some syntax issues as I was using Ruby 2.1.5 on local, and had to use 2.0.0 on production. And after that I had to run gem install rails even though I used rails quick start. Finally I had to manually add to Gemfile gem 'nokogiri'. Finally I could run bundle install and application started to work. <code>  You have already activated rack 1.5.2, but your Gemfile requires rack 1.6.0.Using bundle exec may solve this. (Gem::LoadError) Gemfile syntax error:/var/lib/openshift/xxxxxxxxxxxxxxxxxxxxxxxxxx/app-root/runtime/repo/Gemfile:24: syntax error, unexpected ':', expecting $endgem 'sdoc', '~> 0.4.0', group: :doc source 'https://rubygems.org'# Bundle edge Rails instead: gem 'rails', github: 'rails/rails'gem 'rails', '4.2.0'# Use sqlite3 as the database for Active Recordgem 'sqlite3'# Use SCSS for stylesheetsgem 'sass-rails', '~> 5.0'# Use Uglifier as compressor for JavaScript assetsgem 'uglifier', '>= 1.3.0'# Use CoffeeScript for .coffee assets and viewsgem 'coffee-rails', '~> 4.1.0'# See https://github.com/sstephenson/execjs#readme for more supported runtimes# gem 'therubyracer', platforms: :ruby# Use jquery as the JavaScript librarygem 'jquery-rails'# Turbolinks makes following links in your web application faster. Read more: https://github.com/rails/turbolinksgem 'turbolinks'# Build JSON APIs with ease. Read more: https://github.com/rails/jbuildergem 'jbuilder', '~> 2.0'# bundle exec rake doc:rails generates the API under doc/api.group: :doc do gem 'sdoc', '~> 0.4.0'end# Use ActiveModel has_secure_password# gem 'bcrypt', '~> 3.1.7'# Use Unicorn as the app server# gem 'unicorn'# Use Capistrano for deployment# gem 'capistrano-rails', group: :developmentgroup :development, :test do # Call 'byebug' anywhere in the code to stop execution and get a debugger console gem 'byebug' # Access an IRB console on exception pages or by using <%= console %> in views gem 'web-console', '~> 2.0'end# Windows does not include zoneinfo files, so bundle the tzinfo-data gemgem 'tzinfo-data', platforms: [:mingw, :mswin, :jruby] gem 'sdoc', '~> 0.4.0', group: :doc group: :doc do gem 'sdoc', '~> 0.4.0'end","Ruby ""bundle install"" error on Openshift"
is UTF-8 the default encoding in ruby 2?," Matz wrote in his book that in order to use UTF-8, you must add a coding comment on the first line of your script. He gives us an example: When he invokes bytesize, it returns 6 since the multiplication symbol is outside the ascii set, and must be represented by unicode with the two bytes.I tried the exercise and without specifying the coding comment, it recognized the multiplication symbol as two bytes: So it appears utf-8 is the default encoding. Is this a recent addition to Ruby 2? His examples were from Ruby 1.9. <code>  # -*- coding: utf-8 -*- # Specify Unicode UTF-8 characters# This is a string literal containing a multibyte multiplication characters = ""2x2=4""# The string contains 6 bytes which encode 5 characterss.length # => 5: Characters: '2' 'x' '2' '=' '4's.bytesize # => 6: Bytes (hex): 32 c3 97 32 3d 34 ''.encoding => #<Encoding:UTF-8> ''.bytes.to_a.map {|dec| dec.to_s(16) } => [""c3"", ""97""] ",Is UTF-8 the default encoding in Ruby v.2?
Purpose of & in Ruby (for Procs)," I've noticed that a lot of examples dealing with Ruby Procs have the following & symbol in it. My question is what is the functional purpose behind the & symbol? It seems that if I wrote the same exact code without &, it works as expected: <code>  # Ruby Exampleshout = Proc.new { puts 'Yolo!' }def shout_n_times(n, &callback) n.times do callback.call endendshout_n_times(3, &shout)# prints 'Yolo!' 3 times # Same code as previous without &shout = Proc.new { puts 'Yolo!' }def shout_n_times(n, callback) n.times do callback.call endendshout_n_times(3, shout)# prints 'Yolo!' 3 times",Purpose of & (ampersand) in Ruby for procs and calling methods
Purpose of & (ampersand) in Ruby (for Procs)," I've noticed that a lot of examples dealing with Ruby Procs have the following & symbol in it. My question is what is the functional purpose behind the & symbol? It seems that if I wrote the same exact code without &, it works as expected: <code>  # Ruby Exampleshout = Proc.new { puts 'Yolo!' }def shout_n_times(n, &callback) n.times do callback.call endendshout_n_times(3, &shout)# prints 'Yolo!' 3 times # Same code as previous without &shout = Proc.new { puts 'Yolo!' }def shout_n_times(n, callback) n.times do callback.call endendshout_n_times(3, shout)# prints 'Yolo!' 3 times",Purpose of & (ampersand) in Ruby for procs and calling methods
Ruby how to work with leading zeros in integers," What is the proper way to deal with leading zeros in Ruby? Why is it converting 0112 into 74?How can convert 0112 to a string ""0112"" ?I want to define a method that takes integer as a argument and returns it with its digits in descending order.But this does not seem to work for me when I have leading zeros: <code>  0112.to_s => ""74""0112.to_i => 74 def descending_order(n) n.to_s.reverse.to_iend",How to work with leading zeros in integers
Calling a module and functions in another ruby file," I am attempting to call a module into the main script. I linked the files using require. The following is what my code looks like: When I call the functions in the linked module, I receive the following error: Any help would be much appreciated. <code>  module Ex36_method def m_defense puts ""Do you want to play zone or man to man for this possession?"" print ""> "" choice = $stdin.gets.chomp if choice.include? ""zone"" zone elsif choice.include? ""man to man"" m_rebound else dead(""You failed to play defense"") end end def zone puts ""The opposition scores a 3!"" end def m_rebound puts ""The ball rims out and you got a rebound!"" endend require_relative 'Ex36_method' def start puts ""You are in the final minute of game 7 of the NBA finals."" puts ""You are down by 3 points."" puts ""What do you do: take a 3 pointer that might tie or take a guaranteed 2?"" print ""> "" choice = $stdin.gets.chomp if choice.include? ""3 pointer"" puts ""You missed! The ball rims out but you got the rebound at 40 seconds."" pass elsif choice.include? ""2 pointer"" puts ""You scored! 50 seconds on the clock. Now it's time for defense"" m_rebound else dead(""Turnover"") endenddef dead(why) puts why, ""The opposing team scores a 3 and you lose. Better luck next year!""endstart ""ex36.rb:16:in `start': undefined local variable or method `m_rebound' for main:Object (NameError) from ex36.rb:27:in `<main>'""",Calling a module from another file
Sorting in Lexiographical order," So I want to sort my array of coordinates in lexicographical order. But I'm not sure how to do that. Each element in the array is a Coordinate object, with Fixnum fields #x and #y.I'm new to Ruby and don't necessarily understand the sort enumeration. Would it be something like this? <code>  coordinate_array.sort! { |a,b| a.x <==> b.x && a.y <==> b.y }",Sorting in lexicographical order
How do I debug ruby c extensions?, Every Ruby object is of type VALUE in C. How do I print it in a readable way?Any other tips concerning debugging of Ruby C extensions are welcome. <code> ,How do I print values from C extensions?
How do I print values from ruby c extensions?, Every Ruby object is of type VALUE in C. How do I print it in a readable way?Any other tips concerning debugging of Ruby C extensions are welcome. <code> ,How do I print values from C extensions?
"Nokogiri, replace XML node contents"," I'm using Ruby to read an XML document and update a single node, if it exists, with a new value.http://www.nokogiri.org/tutorials/modifying_an_html_xml_document.htmlis not obvious to me how to change the node data, let alone how to save it back to the file. This is some example XML: I want to change ""file3.doc"" to ""file3_new.html"".I would call: <code>  def ammend_parent_xml(folder, target_file, new_file) # open parent XML file that contains file reference get_xml_files = Dir.glob(""#{@target_folder}/#{folder}/*.xml"").sort.select {|f| !File.directory? f} get_xml_files.each { |xml| f = File.open(xml) # Use Nokgiri to read the file into an XML object doc = Nokogiri::XML(f) filename = doc.xpath('//Route//To//Node//FileName') filename.each_with_index { |fl, i| if target_file == fl.text # we found the file, now rename it to new_file # ??????? end } }end <?xml version=""1.0"" encoding=""utf-8""> <my_id>123</my_id> <Route> <To> <Node> <Filename>file1.txt</Filename> <Filename>file2.mp3</Filename> <Filename>file3.doc</Filename> <Filename>file4.php</Filename> <Filename>file5.jpg</Filename> </Node> </To> </Route></xml> def ammend_parent_xml(""folder_location"", ""file3.doc"", ""file3_new.html"")",How to replace XML node contents using Nokogiri
Rails before_action with controller arguments for ActionMailer," Suppose I have a mailer that sends different emails, but is expected to be called with the same parameters. I want to process those parameters for all mailer actions. So, calling a before_action that would read the parameters sent to the mailer method Then in my controller/service I do somewhere How can I access the same_param arguments list inside the before_action block ?EDIT : I want to refactor from And this refactoring Feels non-optimal (prepare_mail(same_params) duplicated in every action)Hence what was suggested above <code>  /mailers/my_mailer.rbclass MyMailer < ApplicationMailer before_filter do |c| # c.prepare_mail # Will fail, because I need to pass `same_param` arguments # # I want to send the original arguments # c.prepare_mail(same_param) # How do I get `same_param` here ? end def action1(same_param) # email view is going to use @to, @from, @context method_only_specific_to_action1 end def action2(same_param) # email view is going to use @to, @from, @context method_only_specific_to_action2 end private def prepare_mail(same_params) @to = same_params.recipient @from = same_params.initiator @context = same_params.context end end MyMailer.actionx(*mailer_params).deliver_now /mailers/my_mailer.rbclass MyMailer < ApplicationMailer def action1(same_param) @to = same_params.recipient @from = same_params.initiator @context = same_params.context method_only_specific_to_action1 end def action2(same_param) @to = same_params.recipient @from = same_params.initiator @context = same_params.context method_only_specific_to_action2 end def actionx ... end end /mailers/my_mailer.rbclass MyMailer < ApplicationMailer def action1(same_param) prepare_mail(same_params) method_only_specific_to_action1 end def action2(same_param) prepare_mail(same_params) method_only_specific_to_action2 end def actionx ... end private def prepare_mail(same_params) @to = same_params.recipient @from = same_params.initiator @context = same_params.context end end",Rails before_action for ActionMailer that would use mailer arguments
Rails before_action for ActionMailer that would forward arguments," Suppose I have a mailer that sends different emails, but is expected to be called with the same parameters. I want to process those parameters for all mailer actions. So, calling a before_action that would read the parameters sent to the mailer method Then in my controller/service I do somewhere How can I access the same_param arguments list inside the before_action block ?EDIT : I want to refactor from And this refactoring Feels non-optimal (prepare_mail(same_params) duplicated in every action)Hence what was suggested above <code>  /mailers/my_mailer.rbclass MyMailer < ApplicationMailer before_filter do |c| # c.prepare_mail # Will fail, because I need to pass `same_param` arguments # # I want to send the original arguments # c.prepare_mail(same_param) # How do I get `same_param` here ? end def action1(same_param) # email view is going to use @to, @from, @context method_only_specific_to_action1 end def action2(same_param) # email view is going to use @to, @from, @context method_only_specific_to_action2 end private def prepare_mail(same_params) @to = same_params.recipient @from = same_params.initiator @context = same_params.context end end MyMailer.actionx(*mailer_params).deliver_now /mailers/my_mailer.rbclass MyMailer < ApplicationMailer def action1(same_param) @to = same_params.recipient @from = same_params.initiator @context = same_params.context method_only_specific_to_action1 end def action2(same_param) @to = same_params.recipient @from = same_params.initiator @context = same_params.context method_only_specific_to_action2 end def actionx ... end end /mailers/my_mailer.rbclass MyMailer < ApplicationMailer def action1(same_param) prepare_mail(same_params) method_only_specific_to_action1 end def action2(same_param) prepare_mail(same_params) method_only_specific_to_action2 end def actionx ... end private def prepare_mail(same_params) @to = same_params.recipient @from = same_params.initiator @context = same_params.context end end",Rails before_action for ActionMailer that would use mailer arguments
Ruby refinements subtilities," There is a pretty good documentation of the current implementation of refinements in ruby here:http://ruby-doc.org//core-2.2.0/doc/syntax/refinements_rdoc.html,but there are some strange corner cases.First, include module is orthogonal to using module (one include the instance method of module while the other activates the refinement). But there is a trick to include a refinement module itself, seeBetter way to turn a ruby class into a module than using refinements?. Strangely this refinement module can't be used with using! So using only work on the enclosing module of the refinement modules.Secondly I wanted to use the above yield trick to be able to pass a Proc to refine (even through it only accepts a block), without resorting to converting the Proc back to source as inhttps://www.new-bamboo.co.uk/blog/2014/02/05/refinements-under-the-knife/.But using yield as in the include example does not work: We see that Receiver1 still use Bar#foo and not the refined method.Howewer we can use module_eval instead: I don't quite understand why module_eval works here and not the yield method. Inside the refinement block, the 'default_definee' is the refinement module, so module_eval which puts the 'default_definee' to self='the refinement module' should not affect it. And indeed in the 'include' example at the beginning, I get the same result when I use module_eval or a direct yield.Can anyone explain this behavior? <code>  def to_module(klass) Module.new do #note that we return the refinement module itself here return refine(klass) { yield if block_given? } endendclass Base def foo ""foo"" endendclass Receiver include to_module(Base) { def foo ""refined "" + super end }endReceiver.new.foo #=> ""refined foo"" m=to_module(Base) {}m.class #=> Moduleusing m #=>TypeError: wrong argument type Class (expected Module) def ref_module1(klass) Module.new do refine(klass) { yield } endendclass Receiver1 using ref_module1(Base) { def foo ""refined "" + super end } def bar Base.new.foo endendReceiver1.new.bar #=> NoMethodError: super: no superclass method `foo' def ref_module2(klass,&b) Module.new do refine(klass) { module_eval(&b) } endendclass Receiver2 using ref_module2(Base) { def foo ""refined "" + super end } def bar Base.new.foo endendReceiver2.new.bar #=> ""refined foo""",Ruby refinements subtleties
Invalid active developer path on MAC OS X after installing Octopress," I get this error:xcrun: error: invalid active developer path (/Applications/Xcode.app), missing xcrun at: /Applications/Xcode.app/usr/bin/xcrunThis solution works, but the error occurs again after closing my terminal and reopening it; I then have to run the same commands every time I open a new terminal window.How can I apply these changes such that they will save after closing the terminal window out? <code> ",Invalid active developer path on MAC OS X after installing Ruby
Wondering ! if it's a rails magic or my code is not working?," product.rb model file: I want stock to be integer only. When I submit stock with float value say 34.48 then in Insert sql cmd in server log, I see 34 only, and it doesn't hit the validation condition above, how is this possible that the validation condition is being true even i send float number.(new to rails, hoping this question makes sense). <code>  class Product < ActiveRecord::Base validates_numericality_of :price validates_numericality_of :stock, if: Proc.new { |p| (p.stock.is_a? Integer and p.stock >= 0) ? true : false } def price=(input) input.delete!(""$"") super endend ",Validating an attribute to be an integer only
.to_s isn't converting an integer to a string," I am calling to_s within a method: It looks to me like within the function, no array is created since the output is nil. Why is an array of strings not created when to_s.split(//) is called inside a method?Also, why is the output for puts number seemingly just each digit on its own line? Do I need to explicitly create the array within the function and then explicitly push the split number into it? <code>  $ def my_function(num)$ number = num.to_s.split(//)$ puts number$ end$ my_function(233)233# => nil",`to_s` isn't converting an integer to a string
use subdomain concept with device gem," I would like to have Devise create subdomains on my site.Right now, I have two models:Company: A Company can register directly on the site, and after signing in, can invite their employees. When the company registers, I want a unique subdomain to be created (e.g. example.com => techcraz.example.com.)Employee: An Employee can register only if they received an invitation link.What I would like:The main domain as a registration page.A single sign in page for both Companies and Employees.When signing in they must provide a domain name then they should be redirected to the sign in page for that subdomain (e.g. techcraz.example.com/signin.)When entering a URL that does not exist, they should be redirected to the registration page.I am new to Rails. Please help!Thanks in advance! <code> ",Have Devise create a subdomain on registration
"Rails 4 - Mailer deliver_later not doing what I expects, blocks the UI"," I have a rails app in which I have a function that send out quite a few emails. I would like to do it asynchronously and I thought that the method deliver_later would do that. Currently I have some delay from when the user clicks submit until the form is submitted - which is leads to a bad user experience (It is a quite simple form). My implementation looks like this: Currently it takes ~ 4 seconds for the action to be finished. I have also tried: Then it takes even longer - I would estimate ~1 minute. So, am I using deliver_later wrongly, or is the method not doing what I expect. In that case, is there another method I can use to improve my performance?  <code>  def create respond_to do |format| if @competition.save [...] send_notification_to_team_members endenddef send_notification_to_team_members @team.members.each do |member| unless member.user.eql?(current_user) Mailer.deliver_new_competition_notification(member.user, @competition).deliver_later end endend Mailer.deliver_new_competition_notification(member.user, @competition).deliver_later(wait: 1.minute)","Rails 4 - Mailer deliver_later not doing what I expect, blocks the UI"
undefined local variable or method `current_user' using devise & rails 3.2," I am trying to write a method in my ""team"" model but current_user is showing this error undefined local variable or method `current_user' for # The method current_user is working fine for other models and controllers . I am calling this method like this . I am using rails 3.2 , ruby 1.9.3 and devise 3.1 . It seems to be simple task but I don't understand where the fault lies . I will be really thankful if someone helps me out here . <code>  def set_default_url if current_user.id == self.user_id ""/assets/default_black_:style_logo.jpg"" else ""/assets/default_:style_logo.jpg"" endend has_attached_file :logo, :styles => { :medium => ""200x200#"", :thumb => ""100x100#"", :small => ""50x50#"" }, :default_url => :set_default_url",How to access current_user object in model?
Rails 4: Multiple Columns to Existing Table, I know how to add one column to an existing table. Now I have to add many columns to an existing table. Is there a shorter way for: Do I have to do the above for ALL the additional columns I have to add? <code>  add_col1_col2_col3_col4_.._coln_to_tables col1:integer col2:integer etc...,Rails 4: Add Multiple Columns to Existing Table
Remove key/value pair from array of hashes in ruby," Suppose I have an array of hashes What can be the fastest way to remove the key 'name' and 'age' and their corresponding value from all hashes in the array?Basically how can I remove multiple key/value pairs? <code>  a = [ {'id'=>'1','imageUrl'=>'abc','name'=>'x','age'=>'20'}, {'id'=>'2','imageUrl'=>'efg','name'=>'y','age'=>'30'}, {'id'=>'3','imageUrl'=>'hij','name'=>'z','age'=>'40'}]",Remove key/value pair from array of hashes
"duplicated key at line 80 ignored: ""name"" rvm"," This doesn't seem to have affected anything, it's just irritating in my terminal - I regularly receive the following warning (sometimes I receive multiple, calling out different lines, and sometimes the path after /gem/ varies, but other than that, this is the output:/Users/alecwilson/.rvm/gems/ruby-2.2.1/gems/fog-1.23.0/lib/fog/rackspace/mock_data.rb:42: warning: duplicated key at line 80 ignored: ""name""It's most common when bundling and running rake test. Any idea on how to fix it? I'm generally pretty wary of editing files in my .rvm directory, as I've royally screwed it up before, and still sometimes get a warning about my PATH being incorrectly set up (but only occasionally). If anyone can walk me through what is causing this, I'd be very grateful. <code> ","Duplicated key at line 80 ignored: ""name"" rvm"
"duplicated key at line 80 ignored: ""name"" rvm - fog gem"," This doesn't seem to have affected anything, it's just irritating in my terminal - I regularly receive the following warning (sometimes I receive multiple, calling out different lines, and sometimes the path after /gem/ varies, but other than that, this is the output:/Users/alecwilson/.rvm/gems/ruby-2.2.1/gems/fog-1.23.0/lib/fog/rackspace/mock_data.rb:42: warning: duplicated key at line 80 ignored: ""name""It's most common when bundling and running rake test. Any idea on how to fix it? I'm generally pretty wary of editing files in my .rvm directory, as I've royally screwed it up before, and still sometimes get a warning about my PATH being incorrectly set up (but only occasionally). If anyone can walk me through what is causing this, I'd be very grateful. <code> ","Duplicated key at line 80 ignored: ""name"" rvm"
Phusion Passenger 4 & nginx Cabot see environment variables, According to the documentation at https://www.phusionpassenger.com/documentation/Users%20guide%20Nginx.html#env_vars_passenger_apps 15.3.5 Phusion Passenger should be reading environmental variables from .bashrc. I am trying to run a rails 4.2 application from a user account named rails using nginx and Phusion passenger and get a 502 bad gateway error when I try to load it in the browser. The process operates under the correct user. When I open a ruby console in the rails app directory I see the environment variables from my bashrc including secret_key_base. However when I tail my nginx log the error I get is that it is not able to find secret_key_base. I have tried adding this elsewhere including /etc/bash.bashrc and /etc/nginx.conf. <code> ,Phusion Passenger 4 & nginx cannot see environment variables in Ubuntu Linux
Difference between URI and URI.parse in Ruby," What is the difference between URI and URI.parse? Here is what I get: I see in the docs that a new instance of URI creates a new URI::Generic instance from generic components without check, and that it has a default parser in the args.The general recommendation seems to be URI.parse, and I am wondering why. I am wondering if there are any gotchas for using URI and not using URI.parse. Appreciate any insight.Related: How to Parse a URL, Parse URL to Get Main Domain, Extract Host from URL string. <code>  require 'uri'x = ""http://google.com""y = URI(x) # => #<URI::HTTP http://google.com>z = URI.parse(x) # => #<URI::HTTP http://google.com>y == z # => true",Difference between `URI` and `URI.parse`
undefined method `to_key' for #<Book::ActiveRecord_Relation:0x007fb709a6a8c0>, I am facing problems with undefined method `to_key'this is my books_controller.rb and my index page as follow.index.html.erb now when I am going to access index page that time I got an error as follow. <code>  class BooksController < ApplicationController def index @books = Book.where(user_id: current_user.id) end end <div> <%= form_for @books do |f| %>...... <% end %></div> undefined method `to_key' for #<Book::ActiveRecord_Relation:0x007fb709a6a8c0>,How to solve undefined method `to_key' for #<Book::ActiveRecord_Relation:0x007fb709a6a8c0>?
is it possible to add .upcase to a .gsub?," I am doing a gsub to swap ""bad"" for ""good"". Is there a way to use capitalize so it will swap both lower and upper case? Or will I have to write the def twice?  <code>  def add_more_ruby(string) string.gsub('bad','good').capitalizeend",Is it possible to do a case-insensitive `gsub`?
Refresh page after deleting (rails)," I have this: After clicking, Rails deletes the current record post.I want refresh current page after deleting. <code>  <%= link_to 'Delete', post , method: :delete, data: { confirm: 'Are you sure?' } %>",Refresh page after deleting
"Email ""disappearing"" when submitted on Devise registration"," I have a simple Ruby on Rails app, with Devise for authentication. I would like to have users log in using a username instead of email, and attempted to implement this as described here:Devise authenticating with username instead of emailThe twist is that I still want each User to have an email address, and require one during sign-up. So, I left the 'email' field on the sign-up form. The problem is, when I fill out the sign-up form using a valid email address (or any other value for email), Devise gives an error: ""Email can't be blank"".Why is the email being treated as blank, and how can I fix it? User model View for the sign-up devise.rb modified to include: This is output in the rails server console when the form is submitted: I can see Unpermitted parameter: email, but am not sure how to fix it. <code>  class ApplicationController < ActionController::Base # Prevent CSRF attacks by raising an exception. # For APIs, you may want to use :null_session instead. protect_from_forgery with: :exception before_action :configure_permitted_parameters, if: :devise_controller? protected def configure_permitted_parameters devise_parameter_sanitizer.for(:sign_up) { |u| u.permit(:username, :email, :password, :password_confirmation, :remember_me) } devise_parameter_sanitizer.for(:sign_in) { |u| u.permit(:username, :password, :remember_me) } devise_parameter_sanitizer.for(:account_update) { |u| u.permit(:username, :email, :password, :password_confirmation, :current_password) } endend class User < ActiveRecord::Base # Include default devise modules. Others available are: # :confirmable, :lockable, :timeoutable and :omniauthable devise :database_authenticatable, :registerable, :recoverable, :rememberable, :trackable, :validatableend <h2>Sign up</h2><%= form_for(resource, as: resource_name, url: registration_path(resource_name)) do |f| %> <%= devise_error_messages! %> <div class=""field""> <%= f.label :email %><br /> <%= f.email_field :email, autofocus: true %> </div> <div class=""field""> <%= f.label :username %><br /> <%= f.text_field :username %> </div> <div class=""field""> <%= f.label :password %> <% if @validatable %> <em>(<%= @minimum_password_length %> characters minimum)</em> <% end %><br /> <%= f.password_field :password, autocomplete: ""off"" %> </div> <div class=""field""> <%= f.label :password_confirmation %><br /> <%= f.password_field :password_confirmation, autocomplete: ""off"" %> </div> <div class=""actions""> <%= f.submit ""Sign up"" %> </div><% end %><%= render ""devise/shared/links"" %> config.authentication_keys = [ :username ] Started POST ""/users"" for ::1 at 2015-03-17 14:29:13 -0700Processing by Devise::RegistrationsController#create as HTML Parameters: {""utf8""=>"""", ""authenticity_token""=>""bc5+ffyBSr6h79aumdMpwHhp5OY69Tk5oKyY+eIBHLCDDwPmxiMbjbE6OTIaeUPGLmS0J+QlwlGFGHki8SKsgA=="", ""user""=>{""email""=>""jessa@example.com"", ""username""=>""Jessa"", ""password""=>""[FILTERED]"", ""password_confirmation""=>""[FILTERED]""}, ""commit""=>""Sign up""}Unpermitted parameter: email (0.0ms) BEGIN (0.0ms) ROLLBACK Rendered devise/shared/_links.html.erb (2.0ms) Rendered devise/registrations/new.html.erb within layouts/application (11.0ms)","""Unpermitted parameter: email"" when submitted on Devise sign-up"
C# @ (At Sign) Equivalent in Ruby/Rails for Escaping Literals," In C#, I can write backslashes and other special characters without escaping by using @ before a string, but I have to escape double-quotes.C# In Ruby, I could use the single-quote string literal, but I'd like to use this in conjuction with string interpolation like ""text #{value}"". Is there an equivalent in Ruby to @ in C#? <code>  string foo = ""The integer division operator in VisualBASIC is written \""a \\ b\"""";string bar = @""The integer division operator in VisualBASIC is written \""a \ b\""""",String literal without need to escape backslash
Escaping double-quotes in Ruby strings," In C#, I can write backslashes and other special characters without escaping by using @ before a string, but I have to escape double-quotes.C# In Ruby, I could use the single-quote string literal, but I'd like to use this in conjuction with string interpolation like ""text #{value}"". Is there an equivalent in Ruby to @ in C#? <code>  string foo = ""The integer division operator in VisualBASIC is written \""a \\ b\"""";string bar = @""The integer division operator in VisualBASIC is written \""a \ b\""""",String literal without need to escape backslash
"New To Ruby, uninitialized constant error"," I have these two classes in RubyMine:book.rb: test.rb: When I run test.rb, I get this error: <code>  class Book def initialize(name,author) end end require 'book'class teste harry_potter = Book.new(""Harry Potter"", ""JK"")end C:/Users/DESKTOP/RubymineProjects/learning/test.rb:3:in `<class:Test>': uninitialized constant Test::Book (NameError)from C:/Users/DESKTOP/RubymineProjects/learning/test.rb:1:in `<top (required)>'from -e:1:in `load'from -e:1:in `<main>'",Uninitialized constant error in Ruby class
"Concerns, Decorators, Presenters, Service Objects, Helpers, Help me Decide"," There are few things in Rails: Can anybody give me real problem example in what type of situation what should I follow, So I can have better understanding of these features.Examples will be better to understand the conceptThanks in advance and thanks for looking <code>  ## Concerns## Decorators## Presenters ## Service Objects## Helpers","Concerns, Decorators, Presenters, Service Objects, Helpers - Help me Understand Them"
Ruby string interpolation equivilant to python's .format()," In python I can do In ruby when I try The interpreter complains that the variable name is undefined, so it's expecting How can I have a string placeholder in ruby for later use? <code>  _str = ""My name is {}""..._str = _str.format(""Name"") _str = ""My name is #{name}"" _str = ""My name is #{name}"" => {name =: ""Name""}",Ruby string interpolation equivalent to python's .format()
How to save my changes in xml file with Nokogiri," I have the following simple XML file. I want to add content to the user mapping using Nokogiri.This is my code: The output of the puts are: But when the code ends, nothing has been change in the actual XML file.Can anyone explain to me how to save my changes in the XML file? <code>  <?xml version=""1.0""?><user-mapping></user-mapping> f = File.open(""exam.xml"")doc = Nokogiri::XML(f)puts doc.to_smap = doc.at_css ""user-mapping""map.content = ""Gholam""puts map.to_sdoc.to_xmlf.close <?xml version=""1.0""?><user-mapping></user-mapping><user-mapping>Gholam</user-mapping>",How to save my changes in XML file with Nokogiri
Log Viewer for Ruby On Rails 4.2," I have worked previously on Laravel 4 and there is an awesome log viewer tool for it laravel log viewer view demoI'm looking something very similar for Ruby on rails 4.2, if you guys know any good visual logging GEM for Rails 4.2 please let me know..From code I need to log at different log levels, and this tool should visually organize my logs, thanks..  <code> ",Visual Log Viewer for Ruby On Rails 4.2
Explaining ruby constant lookup scenario," Scenario #1:In the example below, puts Post::User.foo line prints foo. In other words Post::User returns a global User constant. Scenario #2:This second example raises an error because no constant is found. The result of scenario #2 is more intuitive. Why is the constant found in scenario #1? If User constant is returned in scenario #1, why isn't that happening in scenario #2? In scenario #2, Post is a module, so in that case, constant should be searched in Object.ancestors, which should also return User constant, but this is not happening. <code>  class User def self.foo ""foo"" endendclass Post puts Post::User.fooend# => warning: toplevel constant User referenced by Post::User# => foo module User def self.foo ""foo"" endendmodule Post puts Post::User.fooend# => uninitialized constant Post::User (NameError)",Constant lookup
Get name of the day, How can I get the name of the day in Ruby?For eg. something like that: the only thing I could find was .wday but that only returns for the number of the day in the week <code>  a = Date.todaya.day_name# => Tuesday a.wday# => 2,Get week day name in Ruby
Mallchimp API not replacing mc:edit content sections (using ruby library)," I'm having a problem replacing mc:edit content areas in Mailchimp with the content that I provide.The email is sent out to the subscribers, but none of the content provided is added to the email. Can anyone see where I might be going wrong?This is the script that I am using: And this is the section inside the email that I am trying to modify: Relevant docs:API https://apidocs.mailchimp.com/api/2.0/campaigns/create.phpLibraryhttp://www.rubydoc.info/gems/mailchimp-api/2.0.4/Mailchimp/Campaigns#create-instance_method <code>  campaign = mailchimp.campaigns.create( ""regular"", { ""list_id"" => list_id, ""subject"" => ""Email Test"", ""from_email"" => ""edward@somewhere.com"", ""from_name"" => ""Edward"", ""to_name"" => ""The to name"", ""template_id"" => 35089 }, { ""sections"" => { ""commit_stuff"" => ""Modified project to use XYZ ruby gem. #ABC-123"", ""content"" => ""This is the content"", ""more-content"" => ""This is more content"" } })result = mailchimp.campaigns.send(campaign[""id""]) <div mc:edit=""commit_stuff"" class=""mcnTextContent"">Use your own custom HTML</div><div mc:edit=""content""></div><div mc:edit=""more-content""></div>",Mailchimp API not replacing mc:edit content sections (using ruby library)
Convert String to Object name Ruby," I have an array [""agreement"", ""user"", ""client""]. Is there any way to convert its items into objects @agreement, @user, @client? <code> ",Convert string to instance variables
"In Ruby, is there an Array method that combines 'uniq' and 'compact'?"," I am trying to find unique elements in an array and remove the nil values from it. My solution looks like this: Is there any single method that does both the operations? If not, which is efficient, @array.uniq.compact or @array.compact.uniq? <code>  @array = [1, 2, 1, 1, 2, 3, 4, nil, 5, nil, 5] @array.uniq.compact # => [1, 2, 3, 4, 5] ",Array method that combines 'uniq' and 'compact'
Date object turns into String," I have a problem that when I pass some Date objects as arguments to different methods, they turn into String.In my Rails app, there is a service that calls a Sidekiq worker to execute a method in a model.When the service object is initialized, it has Date instance methods. I have confirmed their types using debugger.It passes the instance methods to a Sidekiq worker using perform_async. The perform method is Sidekiq is a one line method that invokes a method in a model, passing arguments it received from the service to the model.In the model side, the argument passed in from the Sidekiq worker is no longer a Date type. They are String (e.g. ""2015-01-20""). I have confirmed this using degugger.Any thoughts on why this is happening? <code> ",Date object turns into String when using Sidekiq
How to use dependent: :destroy in rails?," I have 2 models as describes below. and now the problem is whenever I tried to destroy a group then I received a error as below. What I'm missing? <code>  class EmpGroup < ActiveRecord::Base belongs_to :user has_many :emp_group_members, dependent: :destroyend class EmpGroupMember < ActiveRecord::Base belongs_to :emp_group belongs_to :userend PG::ForeignKeyViolation: ERROR: update or delete on table ""emp_groups"" violates foreign key constraint ""fk_rails_bd68440021"" on table ""emp_group_members""DETAIL: Key (id)=(1) is still referenced from table ""emp_group_members"".",Rails: How to use dependent: :destroy in rails?
how to order arrays ruby on rails 4," I have a nested array of numbers, arranged like this: I only need a single array with all of the keys inside, without repeating, so I used this: That produces this: Since I used .uniq, it eliminates the duplicate values. However, I'd like to order the values based on how often they appear in the sub-arrays, rather than whichever order they happen to be in -- so something like this: <code>  ids = [[5,8,10],[8,7,25],[15,30,32],[10,8,7]] ids = ids.flatten.uniq ids = [5,8,10,7,25,15,30,32] ids = [8,10,7,5,25,15,30,32]",Sorting arrays based on frequency in Ruby on Rails
Why does bundler use more than one gem source?," This is happening in Puppet's bundle.The Gemfile specifies But one of the gems I installed in $GEM_HOME appears in $: after all. This is not a problem in and of itself, but apparently Ruby will load Puppet 3.7.5 instead of the 3.7.3 I checked out of the git repo. Why is Puppet not loaded from the git tree and how can I debug this further?UpdatePuppets .gemspec might be involved. It's clever about specifying the version. I now worry that Rubygems does in fact load the installed 3.7.5 gem so that Puppet.version would truthfully report a wrong value, throwing off bundler. Could that be what's happening?Update 2As suggested in the comments, I tried settings the path and version statically in the Gemfile. As for the result, well - at least bundler is consistent in its views ;-) <code>  gem ""puppet"", :path => File.dirname(__FILE__), :require => false $ bundle exec ruby -e 'puts $:'.../home/puppy/puppet-git-clone/lib.../usr/lib/ruby/vendor_ruby.../home/puppy/gems/gems/puppet-3.7.5/lib... $ bundle exec irbirb(main):001:0> require 'puppet'=> trueirb(main):002:0> Facter.value(:puppetversion)=> ""3.7.5"" gem ""puppet"", ""3.4.2"", :path => ""/home/puppy/puppet-git-clone"", :require => false Could not find gem 'puppet (= 3.4.2) ruby' in source at /home/ffrank/git/puppet.Source contains 'puppet' at: 3.7.3Run `bundle install` to install missing gems.",Why does bundler use more than one gem location?
how to get a linux command output to chef attribute," I want to get a command output into a chef attribute. Can some one help me how to set that in execute resource or bash resource. How to use attributes in the above code.. <code>  ruby_block ""something"" do block do #tricky way to load this Chef::Mixin::ShellOut utilities Chef::Resource::RubyBlock.send(:include, Chef::Mixin::ShellOut) command = 'cat #{fileName}' command_out = shell_out(command) node.set['my_attribute'] = command_out.stdout end action :createend",How to get a linux command output to chef attribute
Ruby: How to search within a two-dimensional array," I'm trying to learn how to search within a two-dimensional array; for example: I want to know how to search within the array for the arrays that are of the form [1, y] and then show what the other y numbers are: [1, 2, 3].If anyone can help me understand how to search only with numbers (as a lot of the examples I found include strings or hashes) and even where to look for the right resources even, that would be helpful. <code>  array = [[1,1], [1,2], [1,3], [2,1], [2,4], [2,5]]",How to search within a two-dimensional array
How does Ruby handle assignment?," In Ruby, we assign values to objects with the = operator. Combine this with implicit typing and we frequently get situations like this: The above line both creates a new symbol object, and binds the object to the variable name myVar. Semantically, how is this done?I have had it hammered into my head that the = operator is not magic syntax built into the interpreter, but is actually just syntactic sugar for the object.=(value) method. With this in mind, my best guess is that when the interpreter sees we are trying to assign a value to an undefined variable name, it first creates a new object of some special type, like undefined or null or something, and then passes the := message to that object with the payload being the value we are trying to assign. However, calling .class on an un-instantiated object just throws an exception because Ruby thinks we're trying to call a method (whose name is the name of the variable that you're trying to bring into existence) on self So, as far as I can tell, I have no way of figuring this out experimentally. Side note:In the case of symbol assignment, I believe that the value assigned ( A.K.A. the value returned by the instantiated object's object_id method, A.K.A. the value of the unsigned long VALUE variable on the C level) is a number that represents an offset in a table somewhere (I believe this is how Ruby achieves 'immediate value' for symbol objects).In other cases, the value may be a direct encoding of the object itself, or a value that is meant to be cast to a pointer in reference to a struct.Regardless, the way that Ruby represents the object and whether we end up assigning a reference or the object itself is not what I am asking about here.Additional question:What class is the = method inherited from? I can't find it in the spec for Object or BasicObject. <code>  myVar= :asymbol > obj.class > NameError: undefined variable or method 'obj' for main:Object",How does Ruby handle assignment semantically?
"Ruby: Array join with commas, only when element exists"," Is there a starightforward way to achieve array.join("", "") where the comma is only included between elements that exist? I.e., if some elements don't exist in the array, I don't end up getting orphan commas? <code> ","Array join with commas, only when element is not nil"
"Array join with commas, only when element exists"," Is there a starightforward way to achieve array.join("", "") where the comma is only included between elements that exist? I.e., if some elements don't exist in the array, I don't end up getting orphan commas? <code> ","Array join with commas, only when element is not nil"
How to gem install nokogiri -- --use-system-libraries via Gemfile, There is a known error installing the latest version of Nokogiri. The workaround is to manually install using But how can this be done via the Gemfile? <code>  gem install nokogiri -- --use-system-libraries,"How to ""gem install nokogiri -- --use-system-libraries"" via Gemfile"
Single quote string string interpolation Ruby," I am trying to set an email address within ActionMailer with Rails. Before it was hard coded, but we want to make them ENV variables now so we don't need to amend code each time an email changes. Here is how it's currently defined: I've tried setting the email as an environment variable using ENV['EMAIL'] but I'm having no luck even with #{ENV['EMAIL'}. Can anyone point me in the right direction?  <code>  from = '""Name of Person"" <email@email.com>'",Single quote string string interpolation
"Is ""require rubygems"" returning false in IRB ok?"," Requiring ""rubygems"" gives false, but requiring ""appium_lib"" gives true. I.e., Is this ok? This is not like trying to require something that really doesn't exist, i.e.: <code>  require 'rubygems' # => falserequire 'appium_lib' # => true require 'does_not_existxxxxxxx' # => LoadError: cannot load such file -- does_not_existxxxxxxx","Is `require ""rubygems""` returning `false` ok?"
invalid byte sequence in UTF-8 (ArgumentError)," I'm trying to run a Ruby script, and always getting an error on this line: Where I'm trying to replace ""dr"" by ""med"".The error is: Why is that, how can I fix this issue?I'm working on a MAC OS X Yosemite machine, with Ruby 2.2.1p85. <code>  file_content.gsub(/dr/i,'med') program.rb:4:in `gsub': invalid byte sequence in UTF-8 (ArgumentError)",Invalid byte sequence in UTF-8 (ArgumentError)
Homebrew installation(mac)- Failed to connect to raw.githubusercontent.com port 443: Connection refused," When I try to install Homebrew, I am getting following connection refused error. Please help me to solve this problem. <code>  $ruby -e ""$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)""curl: (7) Failed to connect to raw.githubusercontent.com port 443: Connection refused",Homebrew installation on Mac OS X Failed to connect to raw.githubusercontent.com port 443
How to save heroku logs to file txt," I am having a problem with logs in Heroku. When I want to look at the logs, sometimes I have missed a few lines. How can I save Heroku server logs to file.txt, or any other file? <code> ",How to save Heroku logs to text file
"Ruby, algorithm to shuffle an Array randomly based on different weights"," I have a collection of elements that I want to shuffle randomly, but every element has a different priority or weight. So the element with bigger weight has to have more probabilities to be on the top of the result.I have this Array: And I want to shuffle it so the element with id ""ID_3"" has ~6 times more probabilities to be first than the element ""ID_1"" and ~3 times more probabilities than the element ""ID_2"".UpdateClarification: once you have chosen the first position the other elements will fight for the rest positions using the same logic. <code>  elements = [ { :id => ""ID_1"", :weight => 1 }, { :id => ""ID_2"", :weight => 2 }, { :id => ""ID_3"", :weight => 6 }]",Algorithm to shuffle an Array randomly based on different weights
Rails boot time extremely slow," I'm having a problem with Ruby on Rails running extremely slowly. I'm using Ruby 2.1.3p242 and Rails 4.2.1 on a Windows 8 machine.Whenever I run anything that requires rails to boot (including tests) it takes a long time to get up and running. I put some calls to Benchmark in config/environment.rb on a clean install of rails: Clearly Rails.application.initialize is taking an absurdly long time considering its a clean install.Thanks in advance for your helpEdit-1: I'm running on a dual core i3 4010u@1.7GHZ with 4gb of RAM. I don't think my machine is too bad as it runs most things very well.Edit-2: I ran ruby-prof on Rails.application.initialize and found the culprit. A process was taking up 85% of the run time: This is apparently occuring in Ruby21/lib/ruby/2.1.0/securerandom.rb#62I looked up line 62 in that file and this is what I found: So anyone have any idea what this means? <code>  require File.expand_path('../application', __FILE__)User cpu System Cpu Total Cpu elapsed time0.000000 0.000000 0.000000 (0.000000)Rails.application.initialize!15.282000 2.891000 18.173000 ( 18.201173) <Module::SecureRandom>#random_bytes<Module::OpenSSL::Random>#random_bytes return OpenSSL::Random.random_bytes(n)",OpenSSL causing very slow Rails boot time on Windows
Rails boot time is extremely slow," I'm having a problem with Ruby on Rails running extremely slowly. I'm using Ruby 2.1.3p242 and Rails 4.2.1 on a Windows 8 machine.Whenever I run anything that requires rails to boot (including tests) it takes a long time to get up and running. I put some calls to Benchmark in config/environment.rb on a clean install of rails: Clearly Rails.application.initialize is taking an absurdly long time considering its a clean install.Thanks in advance for your helpEdit-1: I'm running on a dual core i3 4010u@1.7GHZ with 4gb of RAM. I don't think my machine is too bad as it runs most things very well.Edit-2: I ran ruby-prof on Rails.application.initialize and found the culprit. A process was taking up 85% of the run time: This is apparently occuring in Ruby21/lib/ruby/2.1.0/securerandom.rb#62I looked up line 62 in that file and this is what I found: So anyone have any idea what this means? <code>  require File.expand_path('../application', __FILE__)User cpu System Cpu Total Cpu elapsed time0.000000 0.000000 0.000000 (0.000000)Rails.application.initialize!15.282000 2.891000 18.173000 ( 18.201173) <Module::SecureRandom>#random_bytes<Module::OpenSSL::Random>#random_bytes return OpenSSL::Random.random_bytes(n)",OpenSSL causing very slow Rails boot time on Windows
Rails boot time is extremely slow on Windows," I'm having a problem with Ruby on Rails running extremely slowly. I'm using Ruby 2.1.3p242 and Rails 4.2.1 on a Windows 8 machine.Whenever I run anything that requires rails to boot (including tests) it takes a long time to get up and running. I put some calls to Benchmark in config/environment.rb on a clean install of rails: Clearly Rails.application.initialize is taking an absurdly long time considering its a clean install.Thanks in advance for your helpEdit-1: I'm running on a dual core i3 4010u@1.7GHZ with 4gb of RAM. I don't think my machine is too bad as it runs most things very well.Edit-2: I ran ruby-prof on Rails.application.initialize and found the culprit. A process was taking up 85% of the run time: This is apparently occuring in Ruby21/lib/ruby/2.1.0/securerandom.rb#62I looked up line 62 in that file and this is what I found: So anyone have any idea what this means? <code>  require File.expand_path('../application', __FILE__)User cpu System Cpu Total Cpu elapsed time0.000000 0.000000 0.000000 (0.000000)Rails.application.initialize!15.282000 2.891000 18.173000 ( 18.201173) <Module::SecureRandom>#random_bytes<Module::OpenSSL::Random>#random_bytes return OpenSSL::Random.random_bytes(n)",OpenSSL causing very slow Rails boot time on Windows
"In Rails, what's the relation between find_each and where?"," In Rails, both find_each and where are used for retrieving data from Database supported by ActiveRecord.You can pass your query condition to where, like: And you can pass batch size to find_each, like: But what's the difference between the following 2 code? Does code 1 batch retrieve 50 tuples each time, and code 2 retrieve all tuples in one time? More details explaination is welcomed.My opinion is:both where and find_each can be used for batch retrieving, but user can define batch size when using find_each.find_each does not support passing query condition.Please correct me if my understanding is wrong. <code>  c = Category.where(:name => 'Ruby', :position => 1) Hedgehog.find_each(batch_size: 50).map{ |p| p.to_json } # code 1Person.where(""age > 21"").find_each(batch_size: 50) do |person| # processingend# code 2Person.where(""age > 21"").each do |person| # processingend","In Rails, what's the difference between find_each and where?"
Loop inside a loop: how to go through the list efficiently," There is a list of words and list of banned words. I want to go through the word list and redact all the banned words. This is what I ended up doing (notice the catched boolean): Is there any proper/efficient way? <code>  puts ""Give input text:""text = gets.chompputs ""Give redacted word:""redacted = gets.chompwords = text.split("" "")redacted = redacted.split("" "")catched = falsewords.each do |word| redacted.each do |redacted_word| if word == redacted_word catched = true print ""REDACTED "" break end end if catched == true catched = false else print word + "" "" endend",Remove array elements that are present in another array
Make Shell Script Install Latest Stable Version of Ruby using rbenv," I want to install the latest stable version of Ruby available with rbenv. This feature won't be happening in rbenv itself.When I run the command rbenv install -l in my shell, I get a long list of available versions. The list has all types of entries. The following is a partial list to demonstrate the format and diversity: My goal is to automate the command rbenv install VERSION in a shell script where VERSION is the highest x.x.x release. In other words, I need to automatically substitute the highest entry on the list that starts with a number and does not end with -something into VERSION. From this list, I need 2.2.2.What can I put in my shell script to automatically pick the highest x.x.x version in the command rbenv install x.x.x?Edit: Since Ruby is not yet installed, the solution has to be in Bash and not Ruby.Edit 2: I want the MRI (mainstream) version of Ruby. <code>  $ rbenv install -lAvailable versions: 2.0.0-p643 2.0.0-p645 2.1.0-dev 2.1.0-preview1 2.1.0-preview2 2.1.0-rc1 2.1.4 2.1.5 2.1.6 2.2.0-dev 2.2.0-preview1 2.2.0-preview2 2.2.0-rc1 2.2.0 2.2.1 2.2.2 2.3.0-dev jruby-1.7.19 jruby-1.7.20 jruby-9.0.0.0-dev jruby-9.0.0.0+graal-dev jruby-9.0.0.0.pre1 jruby-9.0.0.0.pre2 maglev-1.0.0 maglev-1.1.0-dev maglev-2.0.0-dev mruby-dev mruby-1.0.0 mruby-1.1.0 rbx-2.5.2 rbx-2.5.3 ree-1.8.7-2011.12 ree-1.8.7-2012.01 ree-1.8.7-2012.02 topaz-dev",Install Latest Stable Version of Ruby Using rbenv
"rbenv: ""bundle exec spring"" not working...?"," Why doesn't bundle exec spring work?I am already calling bundle exec and that returns an error. I am okay calling bundle exec all the time. (This is the solution to the possible duplicate question).I will not update my Gemfile via bundle update spring or uninstall a version of spring to make this work. I should not be forced to change my gem installation. bundle binstubs spring isn't working either. To replicate:Have Ruby installed with rebenv.Uninstall all Spring gems.Install a lower version of Spring (such as 1.3.4).Make a new Rails app.Install a higher version of Spring (1.3.5 seems to have disappeared, but I replicated with 1.3.6).Follow the steps in my command line above. <code>  steve-air:finalcloud main$ spring -vSpring version 1.3.5steve-air:finalcloud main$ bundle exec spring -vSpring version 1.3.4steve-air:finalcloud main$ bundle exec spring/Users/main/.rbenv/versions/2.2.2/lib/ruby/gems/2.2.0/gems/bundler-1.9.7/lib/bundler/runtime.rb:34:in `block in setup': You have already activated spring 1.3.5, but your Gemfile requires spring 1.3.4. Prepending `bundle exec` to your command may solve this. (Gem::LoadError) from /Users/main/.rbenv/versions/2.2.2/lib/ruby/gems/2.2.0/gems/bundler-1.9.7/lib/bundler/runtime.rb:19:in `setup' from /Users/main/.rbenv/versions/2.2.2/lib/ruby/gems/2.2.0/gems/bundler-1.9.7/lib/bundler.rb:122:in `setup' from /Users/main/.rbenv/versions/2.2.2/lib/ruby/gems/2.2.0/gems/bundler-1.9.7/lib/bundler/setup.rb:8:in `<top (required)>' from /Users/main/.rbenv/versions/2.2.2/lib/ruby/2.2.0/rubygems/core_ext/kernel_require.rb:54:in `require' from /Users/main/.rbenv/versions/2.2.2/lib/ruby/2.2.0/rubygems/core_ext/kernel_require.rb:54:in `require' from /Users/main/.rbenv/versions/2.2.2/lib/ruby/gems/2.2.0/gems/spring-1.3.5/lib/spring/commands.rb:33:in `<module:Spring>' from /Users/main/.rbenv/versions/2.2.2/lib/ruby/gems/2.2.0/gems/spring-1.3.5/lib/spring/commands.rb:4:in `<top (required)>' from /Users/main/.rbenv/versions/2.2.2/lib/ruby/2.2.0/rubygems/core_ext/kernel_require.rb:54:in `require' from /Users/main/.rbenv/versions/2.2.2/lib/ruby/2.2.0/rubygems/core_ext/kernel_require.rb:54:in `require' from /Users/main/.rbenv/versions/2.2.2/lib/ruby/gems/2.2.0/gems/spring-1.3.5/lib/spring/server.rb:9:in `<top (required)>' from /Users/main/.rbenv/versions/2.2.2/lib/ruby/2.2.0/rubygems/core_ext/kernel_require.rb:128:in `require' from /Users/main/.rbenv/versions/2.2.2/lib/ruby/2.2.0/rubygems/core_ext/kernel_require.rb:128:in `rescue in require' from /Users/main/.rbenv/versions/2.2.2/lib/ruby/2.2.0/rubygems/core_ext/kernel_require.rb:39:in `require'","""bundle exec spring"" not working with rbenv?"
don't let submit a form with empty fields with ruby on rails," I am starting use Ruby on Rails and I am having a little problem. I have a form with 3 fields, this is the code: In the email field when you write something that is not an email and try to submit, the browser (chrome or firefox ) display an error saying that the field must content an @. The same happen with the age field, if a letter is entered the browser show an error saying that the field only accept numbers. I wanna know how to make that the browser show a message when any field is empty when you try to submit. I know how to do it in cakephp so I guess it can be done here in ruby too. I already validate the fields in the model, setting the presence in true but that only works for show a message after you submit and the page reload again. <code>  <%= form_for(resource, as: resource_name, url: registration_path(resource_name)) do |f| %> <%= devise_error_messages! %> <div class=""field""> <%= f.text_field :name, autofocus: true, placeholder: ""Name"" %> </div> <div class=""field""> <%= f.email_field :email, autofocus: true, placeholder: ""Email"" %> </div> <div class=""field""> <%= f.number_field :age, autofocus: true, placeholder: ""Age"" %> </div> <div class=""actions""> <%= f.submit ""Sign up"" %> </div><% end %>",Don't allow user to submit a form with empty fields in ruby on rails
"Rails:Devise confirmation emails, bad username / password? (535 Auth failed)"," I just finished my ruby foundations coursework at Bloc and I'm starting to bury my head into rails development. Things were going smooth until I hit this snag with devise and confirmation emails. I tried googling and looking around at some other questions but couldn't really find any that gave me anything that I could pull from and apply to my situation.I'm receiving the following error when signing up for an account.Net::SMTPAuthenticationError in Devise::RegistrationsController#create535 Authentication failed: Bad username / passwordError extracted from source around line #976 From other posts I know you'll probably want to see that I have a config/initializers/setup_mail.rb file that looks like this: And here's an application.yml file EXAMPLE: also I have the following in my config/environments/development.rb before anybody suggests it: If there's any other files that you'd like to see let me know and I'll add them to this post. <code>  def check_auth_response(res) unless res.success? raise SMTPAuthenticationError, res.message endend if Rails.env.development? ActionMailer::Base.delivery_method = :smtp ActionMailer::Base.smtp_settings = { address: 'smtp.sendgrid.net', port: '587', authentication: :plain, user_name: ENV['SENDGRID_USERNAME'], password: ENV['SENDGRID_PASSWORD'], domain: 'heroku.com', enable_starttls_auto: true }end SENDGRID_PASSWORD: SENDGRID_USERNAME:SECRET_KEY_BASE: config.action_mailer.default_url_options = { host: 'localhost:3000'}config.action_mailer.delivery_method = :smtpconfig.action_mailer.perform_deliveries = true# Override Action Mailer's 'silent errors' in developmentconfig.action_mailer.raise_delivery_errors = true",Ruby on Rails: bad username / password? (535 Auth failed)
Ruby - Longest recurring cycle of digits from 1 divided by a number that is below 1000," I'm trying to find the number less than 1000 that produces the longest string of repeated numbers when it divides 1. I have a list of decimal numbers and have to find the ones which have the longest repeated sequence.Here's what I have so far I can produce a three dimensional array by using regex. Regex /(.+)\1+/ produces an array of repeated substrings. I want to find the longest substring, so I used enumerable's max_by function. I have to compact my array to remove nil elements Then I can find out which had the longest length. I get 0090009009, but I can't figure out which number had that decimal value, because I removed nil elements from my array.Any ideas? <code>  numbers = [*2..999]decimal_representations = numbers.map { |number| 1.to_f/number }decimal_representations.map!(&:to_s) decimal_representations.map! { |decimal| decimal.scan(/(.+)\1+/).max_by(&:length) }.flatten decimal_representations.compact! decimal_representations.max_by(&:length)",Longest recurring cycle of digits
How can I declare a global variable in ruby on rails?," How can I declare a global variable in Ruby on Rails?My sample code:in my controller#application.rb: in my layout#application.html.hamlI have sidebar with this link: in my views#view_user.html.haml: I want to declare a global variable that can modify my controller and use it anywhere, like controller, views, and etc. The above is only a sample scenario. If I click the John or Doe link, it will send a user_id to the controller and when I click the ""View clicked user"" link, it will display the last clicked link. It is either John=1 or Doe=2.Of course if I click the ""View clicked user"" link first, it will display nil. <code>  def user_clicked() @current_userid = params[:user_id]end = link_to ""John"", user_clicked_path(:user_id => 1)= link_to ""Doe"", user_clicked_path(:user_id => 2)= link_to ""View clicked user"", view_user_path %h2 @current_userid",How can I declare a global variable in Ruby on Rails?
Why is a delegated method public when declaired in a private section?," I can make attr_reader (and the related attr_writer and attr_accessor) method(s) private by putting the declaration in a private section: However, Rails' delegate and the Ruby standard library's def_delegate do not work this way. These delegated methods are always public. Making the delegation private is easily done by changing it to: but I expected a NoMethodError error for Bar.new.b above. Why isn't the delegation private?The method definition of def_delegator (alias for def_instance_delegator) is just rescue (blocks removed): That means module_eval does not respect that it was called in a private section. Why? <code>  class Fooprivate attr_reader :bendFoo.new.b # => NoMethodError: private method `b' called for #<Foo:> class Foo attr_reader :b def initialize @b = 'b' endendrequire 'forwardable'class Bar attr_reader :foo def initialize @foo = Foo.new end extend Forwardableprivate def_delegator :foo, :bendBar.new.b # => ""b"" private def_delegator :foo, :b def def_instance_delegator(accessor, method, ali = method) line_no = __LINE__; str = %Q{ def #{ali}(*args, &block) #{accessor}.__send__(:#{method}, *args, &block) end } module_eval(str, __FILE__, line_no)end",Why is a delegated method public when declared in a private section?
Websocket connection (Celluloid client)," I'm trying to connect to remote websocket using Celluloid and Websocket client based on celluloid (gem 'celluloid-websocket-client'). The main advantage of this client for me is that I can use callbacks in the form of class methods instead of blocks. The expected output is However, I don't get any output at all. What could be the problem?I am using  <code>  require 'celluloid/websocket/client'class WSConnection include Celluloid def initialize(url) @ws_client = Celluloid::WebSocket::Client.new url, Celluloid::Actor.current end # When WebSocket is opened, register callbacks def on_open puts ""Websocket connection opened"" end # When raw WebSocket message is received def on_message(msg) puts ""Received message: #{msg}"" end # When WebSocket is closed def on_close(code, reason) puts ""WebSocket connection closed: #{code.inspect}, #{reason.inspect}"" endendm = WSConnection.new('wss://foo.bar')while true; sleep; end ""Websocket connection opened"" gem 'celluloid-websocket-client', '0.0.2'rails 4.2.1ruby 2.1.3",Ruby: Connect to remote WebSocket
Creating array of 0 - n numbers in Ruby when given n," Given n, I want to create an array from 0 to n: It should also work if n is negative: I have written this code, but I think I made it more complicated than necessary (it doesn't work for negative numbers, yet): Is there an easier way or short-cut to do the same thing, and any suggestions on how to handle a negative number? <code>  10.make_array #=> [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10] -10.make_array #=> [0, -1, -2, -3, -4, -5, -6, -7, -8, -9, -10] class Fixnum define_method(:make_array) do my_array = [] self.times() do |count| self.>(0) my_array.push(count) end my_array.push(self) my_array endend",Creating array of numbers from 0 to n for positive and negative n
Creating array of numbers 0 to n," Given n, I want to create an array from 0 to n: It should also work if n is negative: I have written this code, but I think I made it more complicated than necessary (it doesn't work for negative numbers, yet): Is there an easier way or short-cut to do the same thing, and any suggestions on how to handle a negative number? <code>  10.make_array #=> [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10] -10.make_array #=> [0, -1, -2, -3, -4, -5, -6, -7, -8, -9, -10] class Fixnum define_method(:make_array) do my_array = [] self.times() do |count| self.>(0) my_array.push(count) end my_array.push(self) my_array endend",Creating array of numbers from 0 to n for positive and negative n
Creating array of numbers from 0 to n," Given n, I want to create an array from 0 to n: It should also work if n is negative: I have written this code, but I think I made it more complicated than necessary (it doesn't work for negative numbers, yet): Is there an easier way or short-cut to do the same thing, and any suggestions on how to handle a negative number? <code>  10.make_array #=> [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10] -10.make_array #=> [0, -1, -2, -3, -4, -5, -6, -7, -8, -9, -10] class Fixnum define_method(:make_array) do my_array = [] self.times() do |count| self.>(0) my_array.push(count) end my_array.push(self) my_array endend",Creating array of numbers from 0 to n for positive and negative n
Creating directory over SFTP on Ruby," How can I create a directory on Ruby via SFTP only when the directory doesn't exist?I have the following code right now: I have no problem creating the directory the first time but it tries to recreate the same directory even if it already exists and it throws me an error.Anyone who knows how to do this?In using fileutils, there is this code like: Is there any way I could do the same over SFTP? <code>  Net::SFTP.start( ip, id, :password => pass, :port=> port ) do |sftp| sftp.mkdir! remotePath sftp.upload!(localPath + localfile, remotePath + remotefile)end FileUtils.mkdir_p(remotePath) unless File.exists?(remotePath)",Creating directory over SFTP on Ruby fails if directory exists already
Ruby on rails 4 - CSV import - no implicit conversion into string," I'm trying to import CSV data to my mysql DB but I'm running into an error when I try to upload the file : This is what a line in the CSV file looks like : here is the code for the import, in product.rb in product_controller.rb in the index : and in routes.rb I have: <code>  no implicit conversion of ActionDispatch::Http::UploadedFile into String 751,""01/17/2015"",""11:17:32"",""60"",""TDFSRDSK"",""2"",""10"",""-1"",""0"",""3"","""",""26"",""3"","""","""",""1"",""0"" def self.import(file) CSV.foreach(file) do |row| id, jour, heure, valeur, app, a, b, c, d, e, f, g, h, i, j, k, l = row userid = current_user.id product = Product.create(date: jour, valeur: valeur,user_id: userid) endend def import Product.import(params[:file]) redirect_to_root_url, notice ""Products imported""end <%= form_tag import_products_path, multipart: true do %> <%= file_field_tag :file %> <%= submit_tag ""Import"" %><% end %> resources :products do collection {post :import}end",Ruby on Rails 4 - CSV import - no implicit conversion into string
How to get first character that is causing reg expression not to match (in ruby)," We have one quite complex regular expression which checks for string structure.I wonder if there is an easy way to find out which character in the string that is causing reg expression not to match.For example, Basically, the idea is how to get ""position"" of state machine when it gave up.Here is an example of regular expression:  <code>  string.match(reg_exp).get_position_which_fails %q^[^\p{Cc}\p{Z}]([^\p{Cc}\p{Zl}\p{Zp}]{0,253}[^\p{Cc}\p{Z}])?$",How to get first character that is causing reg expression not to match
"""Php Composer"" and ""Ruby Gems (and Bundler)"""," (As first, this question is not ""which is better"" question. I just want to know how they are similar and differ in functionality perspective.)I'm php developer and currently learning ruby.In these days, many php developers are encouraged to use Composer for dependency management. Before asking questions, I would like to validate my knowledge first. According to my understanding,Composer is a dependency management tool for php libraries (or packages).Composer installed php library per project basis (so-called locally). I mean php library installed for project1 cannot be reused for project2 without install again for project2. I've noticed that Ruby also has very good dependency management tool ""RubyGems"". According to my knowledge, ""RubyGems"" is a package manager for ""Gems"".""Gem"" is a Ruby program or library packaged in a standard format for sharing. (Rails is also a gem.)Gem can be installed by command like that gem install sinatra.But, there is also so-called ""Bundler"" which is also a gem for bundling gems for an application.When command bundle install runs (under specific ruby project directory), all the gems listed in the Gemfile are installed for this ruby project.So, my questions are here.Composer is similar to whether RubyGems or Bundler ?When run gem install sinatra, is it installed on system-wide level ?When run bundle install, the Gems are installed whether locally (on this project only) or system-wide level ?If I need two versions of one gem (for e.g. sinatra) for different projects, how should I handle ?(Sorry for my long question. If my understandings are something wrong, sorry again and please point out the right one.) <code> ","""PHP Composer"" compared with ""Ruby Gems and Bundler"""
Using Reddis to store array of hashes," I have just started to look at Redis and would like to be able to store an Array of hashes, where I can pop a random key/value out and then put it back in when I need to.So in Ruby I would have something like this So if I wanted to get a random key/value object from the Array I would do something like this And then to put it back into the array The idea for using Redis is that I have two processes (Ruby based app) that need to share a pool of users at the same time. Once a process has finished with a user I want it to put it back into the pool.Could anyone point me in the right direction please Thanks <code>  users = [{ username: ""user1"", password: ""password""}, { username: ""user2"", password: 'password'}] @user = users.shuffle!.pop users.push(@user)",Using Redis to store array of hashes
Get methods passed into method using Ruby's TracePoint," I'm able to get access to a Ruby method's arguments using the TracePoint API: However when I try this with a c method call, I get an error. This looks like it happens because of a discrepancy between the binding returned when using a C method call and regular Ruby method call. In the Ruby case tp.self is equal to tp.binding.eval(""self"") is main however in the C case tp.self is ""foo"" and tp.binding.eval(""self"") is main. Is there a way to get the arguments passed into a method using TracePoint for both Ruby and C defined methods? <code>  def foo(foo_arg)endtrace = TracePoint.trace(:call, :c_call) do |tp| tp.disable case tp.method_id when :foo, :sub method = eval(""method(:#{tp.method_id})"", tp.binding) method.parameters.each do |p| puts ""#{p.last}: #{tp.binding.local_variable_get(p.last)}"" end end tp.enableendtrace.enablefoo(10)# => foo_arg: 10 ""foo"".sub(/(f)/) { $1.upcase }script.rb:20:in `method': undefined method `sub' for class `Object' (NameError) from script.rb:20:in `<main>' from script.rb:8:in `eval' from script.rb:8:in `block in <main>' from script.rb:20:in `<main>'",Get Method Arguments using Ruby's TracePoint
Rails - best practice for Fat Model Refactor," I'm trying to make my fat User model less clunky. I'm using value objects to represent custom values and operations on them, and am stuck with ActiveSupport::Concerns and modules. I read this as an inspiration.I put helper methods like this: into modules, and included them as sort of extensions. However, it is hard to read and maintain, and I need some of them both in views and controllers (for example for wizard authentication). Where should I put them? Create service objects for when they're used? <code>  def is_a_wizard? power_level >= WIZARD_POWERenddef just_became_a_wizard? power_level == WIZARD_POWERend",Best practice for fat model refactor
Mutiple feature inside single feature file, My current Cucumber file looks like this: So now I would like to add few more scenarios may be for API testing in the same file. So i was thinking to create a new Feature for that instead of using the Feature: Test Online application Page. This way i dont need to create a separate feature file for API testing. Is it possible to have multiple features within a single feature file and is that a good practice? I just need to test one API and I will run API tests along with online tests. I will still separate them using @online and @api tags. <code>  Feature: Test Online application PageScenario: Visit application home page and test linksScenario: Visit application Login and Validate login Feature: Test Online application Page Scenario: Visit application home page and test links Scenario: Visit application Login and Validate loginFeature: Test application API's Scenario: validate Login API,Multiple feature inside single feature file
Calling C++ class functions from Ruby," In my specific circumstance, I have a complex class (a class of classes of classes) that I want to expose to a scripting language (aka Ruby). Rather that directly pass that complex class, someone gave me the idea of just opening up a few functions to a scripting language like Ruby, which seemed simpler. I've seen Rice but the only examples I've seen use simple functions that just multiply something, rather than interfacing with a class.For simplicity, I have a simple class with functions I want to expose: ALSO: I'd prefer not to just have a link to the download page of SWIG, or an article explaining how to do this with rice that was written in 2010, I would like a guide that will likely work (I haven't had much luck just yet)ASWELL:I'm using Linux (Ubuntu) but this is a cross-compatible program, so I must be able to compile on Windows and OS XEDIT:I do understand that shared libraries exist (dll and so files), but I don't know if I can have a library that depends on a .hpp file containing the class(es). <code>  class Foo{ private: //Integer Vector: std::vector<int> fooVector; public: //Functions to expose to Ruby: void pushBack(const int& newInt) {fooVector.push_back(newInt);} int& getInt(const int& element) {return fooVector.at(element);}};",Calling C++ class functions from Ruby/Python
how to print unicode character U-1F4A9 'pile of poo' in ruby," I am trying to print a unicode character in Ruby, specifically the pile of poo. It has a unicode value of U-1F4A9. But when I try to print ""\u1F4A9"" to the output or a file, I see nothing. Do I need to print to a specific type of file to see the pile of poo? If so, what type of file? Is there any way to print this to the common output? (I'm using Rubymine) <code> ",How to print unicode character U-1F4A9 'pile of poo' emoji 
How to print unicode character U-1F4A9 'pile of poo' emoji," I am trying to print a unicode character in Ruby, specifically the pile of poo. It has a unicode value of U-1F4A9. But when I try to print ""\u1F4A9"" to the output or a file, I see nothing. Do I need to print to a specific type of file to see the pile of poo? If so, what type of file? Is there any way to print this to the common output? (I'm using Rubymine) <code> ",How to print unicode character U-1F4A9 'pile of poo' emoji 
In Rails why a method with too many lines a bad thing?," In my rails app, I have a method like this: Rubocop flagged this method as Method had too many lines. Why is it bad to write a method with too many lines? What if we have to do a lot of work in it? How can I re-factor this and write good code? <code>  def cart if user_signed_in? @user = current_user if @user.cart.present? @cart = @user.cart else @cart = false end else cart_id = session[:cart_id] if cart_id.present? @cart = Cart.find(cart_id.to_i) else @cart = false end endend",Why is a method with too many lines a bad thing?
Issue with carrierwave pdf upload," I have the following as my FileUploader: I got this from the carrierwave github page. It mostly works, but what If I don't want different versions? I basically just want to do certain processes if it's a pdf, or certain processes if it's an image. I may allow other types of files in the future as well, so it'd be cool if I could have an easy way to do that as well.For an example, I may want to use an imgoptim if it's an image, and then a pdf optimizing library if it's a pdf, etc.I tried: but get the error: NameError: (undefined local variable or methodfile' for FileUploader:Class` <code>  class FileUploader < CarrierWave::Uploader::Base include CarrierWave::MiniMagick version :thumb, if: :image? do # For images, do stuff here end version :preview, if: :pdf? do # For pdf, do stuff here end protected def image?(new_file) new_file.content_type.start_with? 'image' end def pdf?(new_file) new_file.content_type.start_with? 'application' endend if file.content_type = ""application/pdf"" # Do pdf thingselsif file.content_type.start_with? 'image' # Do image thingsend",Carrierwave file upload with different file types
Why would someone use class << self and extend in the same object?," I am trying to understand code from github repo. It's the main module of the gem to setup the client. Why is class << self and module ClassMethods used, and then extended instead of being included in the class << self part?There is a class method def included(base). This seems to add the class methods into a specific object. Why is it like this? It could relate to the functionality of the class, but I do not understand it. <code>  module Github # more code class << self def included(base) base.extend ClassMethods # what would this be for? end def new(options = {}, &block) Client.new(options, &block) end def method_missing(method_name, *args, &block) if new.respond_to?(method_name) new.send(method_name, *args, &block) elsif configuration.respond_to?(method_name) Github.configuration.send(method_name, *args, &block) else super end end def respond_to?(method_name, include_private = false) new.respond_to?(method_name, include_private) || configuration.respond_to?(method_name) || super(method_name, include_private) end end module ClassMethods def require_all(prefix, *libs) libs.each do |lib| require ""#{File.join(prefix, lib)}"" end end # more methods ... end extend ClassMethods require_all LIBDIR, 'authorization', 'validations', 'normalizer', 'parameter_filter', 'api', 'client', 'pagination', 'request', 'response', 'response_wrapper', 'error', 'mime_type', 'page_links', 'paged_request', 'page_iterator', 'params_hash'end",Why the module `ClassMethods` defined and extended in the same namespace?
Why `class << self` used and extended in the same object?," I am trying to understand code from github repo. It's the main module of the gem to setup the client. Why is class << self and module ClassMethods used, and then extended instead of being included in the class << self part?There is a class method def included(base). This seems to add the class methods into a specific object. Why is it like this? It could relate to the functionality of the class, but I do not understand it. <code>  module Github # more code class << self def included(base) base.extend ClassMethods # what would this be for? end def new(options = {}, &block) Client.new(options, &block) end def method_missing(method_name, *args, &block) if new.respond_to?(method_name) new.send(method_name, *args, &block) elsif configuration.respond_to?(method_name) Github.configuration.send(method_name, *args, &block) else super end end def respond_to?(method_name, include_private = false) new.respond_to?(method_name, include_private) || configuration.respond_to?(method_name) || super(method_name, include_private) end end module ClassMethods def require_all(prefix, *libs) libs.each do |lib| require ""#{File.join(prefix, lib)}"" end end # more methods ... end extend ClassMethods require_all LIBDIR, 'authorization', 'validations', 'normalizer', 'parameter_filter', 'api', 'client', 'pagination', 'request', 'response', 'response_wrapper', 'error', 'mime_type', 'page_links', 'paged_request', 'page_iterator', 'params_hash'end",Why the module `ClassMethods` defined and extended in the same namespace?
Search zero in array and make corresponding row and col 0," This is my code, which works, but it's too big. I want to refactor it. Input: 2D Array Required output:  <code>  req_row = -1req_col = -1a.each_with_index do |row, index| row.each_with_index do |col, i| if col == 0 req_row = index req_col = i break end endendif req_col > -1 and req_row > -1 a.each_with_index do |row,index| row.each_with_index do |col, i| print (req_row == index or i == req_col) ? 0 : col print "" "" end puts ""\r"" endend 1 2 3 4 5 6 7 89 10 0 1112 13 14 15 1 2 0 4 5 6 0 80 0 0 012 13 0 15 ",Search for zero in 2D array and make a corresponding row and col 0
Search zero in 2D array and make corresponding row and col 0," This is my code, which works, but it's too big. I want to refactor it. Input: 2D Array Required output:  <code>  req_row = -1req_col = -1a.each_with_index do |row, index| row.each_with_index do |col, i| if col == 0 req_row = index req_col = i break end endendif req_col > -1 and req_row > -1 a.each_with_index do |row,index| row.each_with_index do |col, i| print (req_row == index or i == req_col) ? 0 : col print "" "" end puts ""\r"" endend 1 2 3 4 5 6 7 89 10 0 1112 13 14 15 1 2 0 4 5 6 0 80 0 0 012 13 0 15 ",Search for zero in 2D array and make a corresponding row and col 0
Matching exact elements in an array in Ruby," Given two arrays of equal size, how can I find the number of matching elements disregarding the position?For example:[0,0,5] and [0,5,5] would return a match of 2 since there is one 0 and one 5 in common;[1,0,0,3] and [0,0,1,4] would return a match of 3 since there are two matches of 0 and one match of 1;[1,2,2,3] and [1,2,3,4] would return a match of 3.I tried a number of ideas, but they all tend to get rather gnarly and convoluted. I'm guessing there is some nice Ruby idiom, or perhaps a regex that would be an elegant answer to this solution. <code> ",Counting matching elements in an array
Get variable name from string," I have a local variable name as a string, and need to get its value. How can I get the value 22 form the string? <code>  variable = 22""variable"".to_variable?",Get value from string representing local variable
Does rails have an opposite of 'parameterize' for strings?, I used parameterize method. I want to de-parameterize it. Is there a method to do the opposite of parameterize? <code> ,Does rails have an opposite of `parameterize` for strings?
Making Serverspec mutlit-host tests continue even on a test failure," I've built some serverspec code to run a group of tests on multiple hosts. The trouble is that the testing stops at the current host when any test fails. I want it to continue to all hosts even if a test fails.The Rakefile: Complete code:https://gist.github.com/neilhwatson/1d41c696102c01bbb87a <code>  namespace :spec do task :all => hosts.map {|h| 'spec:' + h.split('.')[0] } hosts.each do |host| begin desc ""Run serverspec to #{host}"" RSpec::Core::RakeTask.new(host) do |t| ENV['TARGET_HOST'] = host t.pattern = ""spec/cfengine3/*_spec.rb"" end rescue end endend",Continue multi-host tests even on failure
Sequence in trait of factory girl does not use main counter," I have the following factory: If I run I get Foo 1, Foo 2, Fooy 1. But I want Foo1, Foo2, Fooy 3. How can I achieve this? <code>  FactoryGirl.define do factory :foo do sequence(:name) { |n| ""Foo #{n}"" } trait :y do sequence(:name) { |n| ""Fooy #{n}"" } end endend create :foocreate :foocreate :foo, :y",Sequence within trait of FactoryGirl factory does not use main sequence counter
just installed rails on Yosemite and rails server fails," I have installed on OS X 10.10.3:homebrew, command line tools, then installed ruby using rbenv: when I create a new app (with default sqlite database) and try to run it, it says: but in the browser I see: log file: Somebody has a similar error? how did you resolve this? <code>  ruby 2.2.2p95 (2015-04-13 revision 50295) [x86_64-darwin14]Rails 4.2.2 => Booting WEBrick=> Rails 4.2.2 application starting in development on http://localhost:3000=> Run `rails server -h` for more startup options=> Ctrl-C to shutdown server[2015-06-18 23:11:30] INFO WEBrick 1.3.1[2015-06-18 23:11:30] INFO ruby 2.2.2 (2015-04-13) [x86_64-darwin14][2015-06-18 23:11:30] INFO WEBrick::HTTPServer#start: pid=41860 port=3000 500 Internal Server ErrorIf you are the administrator of this website, then please read this web application's log file and/or the web server's log file to find out what went wrong. Started GET ""/"" for ::1 at 2015-06-18 23:11:48 +0300**ArgumentError (wrong number of arguments (2 for 1)):** actionpack (4.2.2) lib/action_dispatch/http/request.rb:338:in `parse_query' rack (1.6.3) lib/rack/request.rb:191:in `GET' actionpack (4.2.2) lib/action_dispatch/http/request.rb:300:in `GET' actionpack (4.2.2) lib/action_dispatch/http/parameters.rb:14:in `parameters' actionpack (4.2.2) lib/action_dispatch/http/filter_parameters.rb:37:in `filtered_parameters' actionpack (4.2.2) lib/action_controller/metal/instrumentation.rb:22:in `process_action' actionpack (4.2.2) lib/action_controller/metal/params_wrapper.rb:250:in `process_action' activerecord (4.2.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action' actionpack (4.2.2) lib/abstract_controller/base.rb:137:in `process' actionview (4.2.2) lib/action_view/rendering.rb:30:in `process' actionpack (4.2.2) lib/action_controller/metal.rb:196:in `dispatch' actionpack (4.2.2) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch' actionpack (4.2.2) lib/action_controller/metal.rb:237:in `block in action' actionpack (4.2.2) lib/action_dispatch/routing/route_set.rb:74:in `call' actionpack (4.2.2) lib/action_dispatch/routing/route_set.rb:74:in `dispatch' actionpack (4.2.2) lib/action_dispatch/routing/route_set.rb:43:in `serve' actionpack (4.2.2) lib/action_dispatch/journey/router.rb:43:in `block in serve' actionpack (4.2.2) lib/action_dispatch/journey/router.rb:30:in `each' actionpack (4.2.2) lib/action_dispatch/journey/router.rb:30:in `serve' actionpack (4.2.2) lib/action_dispatch/routing/route_set.rb:819:in `call' rack (1.6.3) lib/rack/etag.rb:24:in `call' rack (1.6.3) lib/rack/conditionalget.rb:25:in `call' rack (1.6.3) lib/rack/head.rb:13:in `call' actionpack (4.2.2) lib/action_dispatch/middleware/params_parser.rb:27:in `call' actionpack (4.2.2) lib/action_dispatch/middleware/flash.rb:260:in `call' rack (1.6.3) lib/rack/session/abstract/id.rb:225:in `context' rack (1.6.3) lib/rack/session/abstract/id.rb:220:in `call' actionpack (4.2.2) lib/action_dispatch/middleware/cookies.rb:560:in `call' activerecord (4.2.2) lib/active_record/query_cache.rb:36:in `call' activerecord (4.2.2) lib/active_record/connection_adapters/abstract/connection_pool.rb:649:in `call' activerecord (4.2.2) lib/active_record/migration.rb:378:in `call' actionpack (4.2.2) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call' activesupport (4.2.2) lib/active_support/callbacks.rb:88:in `call' activesupport (4.2.2) lib/active_support/callbacks.rb:88:in `_run_callbacks' activesupport (4.2.2) lib/active_support/callbacks.rb:776:in `_run_call_callbacks' activesupport (4.2.2) lib/active_support/callbacks.rb:81:in `run_callbacks' actionpack (4.2.2) lib/action_dispatch/middleware/callbacks.rb:27:in `call' actionpack (4.2.2) lib/action_dispatch/middleware/reloader.rb:73:in `call' actionpack (4.2.2) lib/action_dispatch/middleware/remote_ip.rb:78:in `call' actionpack (4.2.2) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call' web-console (2.1.3) lib/web_console/middleware.rb:37:in `call' actionpack (4.2.2) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call' railties (4.2.2) lib/rails/rack/logger.rb:38:in `call_app' railties (4.2.2) lib/rails/rack/logger.rb:20:in `block in call' activesupport (4.2.2) lib/active_support/tagged_logging.rb:68:in `block in tagged' activesupport (4.2.2) lib/active_support/tagged_logging.rb:26:in `tagged' activesupport (4.2.2) lib/active_support/tagged_logging.rb:68:in `tagged' railties (4.2.2) lib/rails/rack/logger.rb:20:in `call' actionpack (4.2.2) lib/action_dispatch/middleware/request_id.rb:21:in `call' rack (1.6.3) lib/rack/methodoverride.rb:22:in `call' rack (1.6.3) lib/rack/runtime.rb:18:in `call' activesupport (4.2.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call' rack (1.6.3) lib/rack/lock.rb:17:in `call' actionpack (4.2.2) lib/action_dispatch/middleware/static.rb:113:in `call' rack (1.6.3) lib/rack/sendfile.rb:113:in `call' railties (4.2.2) lib/rails/engine.rb:518:in `call' railties (4.2.2) lib/rails/application.rb:164:in `call' rack (1.6.3) lib/rack/lock.rb:17:in `call' rack (1.6.3) lib/rack/content_length.rb:15:in `call' rack (1.6.3) lib/rack/handler/webrick.rb:88:in `service' /Users/smi/.rbenv/versions/2.2.2/lib/ruby/2.2.0/webrick/httpserver.rb:138:in `service' /Users/smi/.rbenv/versions/2.2.2/lib/ruby/2.2.0/webrick/httpserver.rb:94:in `run' /Users/smi/.rbenv/versions/2.2.2/lib/ruby/2.2.0/webrick/server.rb:294:in `block in start_thread' Rendered /Users/smi/.rbenv/versions/2.2.2/lib/ruby/gems/2.2.0/gems/actionpack-4.2.2/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout (22.3ms)",Rails 'parse_query' error on server in brand new app
ruby/rails array all elements between to elements," I have an array like this: [7, 8, 9, 10, 11, 12, 1, 2, 3, 4, 5, 6]What's the simplest way to return each item in the array from position 6 until 0 where the resulting array looks like: [1,2,3,4,5,6,7]This positions in the array can be dynamic, for example passing in 4 and 9 should return [11,12,1,2,3,4]I'm wondering if there's a method that accomplishes this in Rails api.Thanks in advanceEDITLet's assume that no negative numbers, so doing array[2..-2] wont work.Array#splice almost works for this, but if the second position is less than the first, it returns nil. <code> ",ruby/rails array all elements between two indices
Ruby - map with accumulator on an array?," I'm looking to create a method for Enumerable that does map and inject at the same time. For example, calling it map_with_accumulator, or for strings I fail to get a solution working. I think I can do it with reduce. I was working down the path of something like: with the initial value being an empty array, but I couldn't get it correct.edit: See Jrg's answer below for a proper solution. Another (somewhat gross) way to do it I realized after reading his answer is by using instance_eval, which changes the context of the given block to that of the object executing it. So self is set to reference the array rather than the calling context (which means it is no longer a closure!) and inject and shift are called by the array. Convoluted, unnecessarily terse, and confusing to read, but it taught me something new. <code>  [1,2,3,4].map_with_accumulator(:+)# => [1, 3, 6, 10] ['a','b','c','d'].map_with_accumulator {|acc,el| acc + '_' + el}# => ['a','a_b','a_b_c','a_b_c_d'] arr.reduce([]) {|acc,e| ..... } ['a','b','c','d'].instance_eval do inject([shift]) {|acc,el| acc << acc.last+el}end#=> ['a','ab','abc','abcd']",Map with accumulator on an array
How could I padding spaces to a fix length," I need all strings' length with 5Original [477, 4770,]Expected [""477 "", ""4770 ""]How could I do it with Ruby ? <code> ",How could I add padding spaces to a fix length
Write to MySQL database without typecasting," I have a column in my MySQL database which is of type TINYINT(1). I need to store actual integers in this column. The problem is, because of the column type, Rails 4.1 assumes this column contains only boolean values, so it typecasts all values besides 0 or 1 to be 0 when it writes to the database.I don't want to simply disable boolean emulation since we have a number of columns in our database where we use TINYINT(1) to actually represent a boolean value. And I am currently not able to change the column types in MySQL.How can I force Rails 4.1 to bypass the typecasting step and write directly to the database instead?(This excerpt from the Rails 4.1 source may be of some use: https://github.com/rails/rails/blob/4-1-stable/activerecord/lib/active_record/attribute_methods/write.rb) <code> ",Rails 4.1 - Write to MySQL database without typecasting
"What is ""super"" in Ruby on Rails?"," When browsing the internet about ruby on rails, I see the word super. Can someone tell what it is and what it can do? <code> ",What is `super` in Ruby?
"What does ""(...) interpreted as grounded expression"" mean?"," I'm using a Ruby linter in Atom and for some lines it gives the following warning: An example of a line that get's this warning is this: How should that line be improved to make the warning go away? <code>  (...) interpreted as grouped expression elsif not (params[:vacancy].nil? or params[:vacancy]['company_id'].nil? or params[:vacancy]['company_id'] == ""0"" )","What does ""(...) interpreted as grouped expression"" mean?"
"Ruby on Rails resource routes, use slug instead of id"," So I'm looking for a solution that would help me achieve the following with Rails resource: as opposed to I'm looking for Rails resource routes and not the other kinds of routes.Just wanted to know if it was possible. If so, how?  <code>  /admin/articles/:slug/edit /admin/articles/:id/edit",Ruby on Rails: Use slug instead of id on resource routes
display object in ruby on rails," This might be repeated question. But I can't display the object.I'm new to ruby, tried to debug like var_dump and print_r then die in phpHere is my code. I tried the following method Can anyone help me resolve it, pls? <code>  @brand_id = Brand.maximum(""brand_id"") 1 puts YAML::dump(@brand_id)2 logger.debug { @brand_id.inspect }","var_dump and die like php, In ruby on rails (debug in ruby on rails)"
"In ruby on rails, how to var_dump and die like php"," This might be repeated question. But I can't display the object.I'm new to ruby, tried to debug like var_dump and print_r then die in phpHere is my code. I tried the following method Can anyone help me resolve it, pls? <code>  @brand_id = Brand.maximum(""brand_id"") 1 puts YAML::dump(@brand_id)2 logger.debug { @brand_id.inspect }","var_dump and die like php, In ruby on rails (debug in ruby on rails)"
"var_dump and die like php, In ruby on rails"," This might be repeated question. But I can't display the object.I'm new to ruby, tried to debug like var_dump and print_r then die in phpHere is my code. I tried the following method Can anyone help me resolve it, pls? <code>  @brand_id = Brand.maximum(""brand_id"") 1 puts YAML::dump(@brand_id)2 logger.debug { @brand_id.inspect }","var_dump and die like php, In ruby on rails (debug in ruby on rails)"
How to move the rescue block to a method in ruby ?," I have the following method in one of my models to save a user record: We can see that the rescue block is heavy and such block is common in other actions as well. So I gave a thought to refactor this and move the rescue block to a separate function. I want to implement something like this: Any thoughts on an implementation as in above will be a great help. <code>  def save_user(params) begin save_user_details(params) rescue ActiveRecord::RecordInvalid => ex { success: false, errors: ex.messages } rescue Exception => ex Rails.logger.info(ex.message) Rails.logger.info(ex.backtrace.join(\n) { success: false, errors: Some error occurred.} endend def save_user(params) begin save_user_details(params) # my method to save the details handle_the_exception # not sure how to implement this end def handle_the_exception # How to handle here ? end",How to move a rescue block to a method
Ruby - undefined method for main:Object (NoMethodError) though method is defined, I have defined a script with the following code snippet: When I run this I get undefined method `check_params' for main:Object (NoMethodError) <code>  check_params paramdef check_params(param) # some codeend,Undefined method for main:Object (NoMethodError) though method is defined
How do you uninstall rbenv on OSX?," How do you uninstall rbenv on macOS? My version of rbenv is messed up, and brew uninstall rbenv isn't working because brew relies onruby. <code> ",How do you uninstall rbenv on macOS?
Ruby variable assignment confusion," Can someone explain this behavior: In the assignment a = b = c = 1, 2, 3, the variables a, b, and c should be assigned [1, 2, 3]. Any idea? <code>  a = b = c = 1, 2, 3 a # => [1, 2, 3]b # => 1c # => 1",Ruby variable assignment
Ruby private method is accessible in sub class?," I have code as follows: b.some_method calls a private method that is defined in class A. How can a private method be accessed in the class where it is inherited? Is this behavior the same in all object oriented programming languages? How does Ruby do encapsulation? <code>  class A private def p_method puts ""I'm a private method from A"" endendclass B < A def some_method p_method endendb = B.newb.p_method # => Error: Private method can not be calledb.some_method # => I'm a private method from A",Is Ruby private method accessible in sub class?
How to check if a constant is defined by it's symbol in Ruby?, How to check if FOO is defined using const? does not work. <code>  const = :FOOFOO = :okdefined? FOO => 'constant' defined? eval( const.to_s ),How to check if a constant is defined by its symbol in Ruby?
Difference between .next and .succ, What is the difference between Fixnum methods .next and .succ in Ruby?It seems it works identically: If there is any difference why there is two method which do the same? <code>  1.next => 2 1.succ => 2,Difference between .next and .succ in Ruby
Ruby for loop - best practices," I came across three ways of writing a loop. for loop 1 for loop 2 for loop 3 Are there situations in which one way is a good practice or better solution than the other two? The first one is the most similar to the ones in other languages, and for me, the third one looks unorderly. <code>  the_count = [1, 2, 3, 4, 5] for number in the_count puts ""This is count #{number}""end the_count.each do |count| puts ""The counter is at: #{count}""end the_count.each {|i| puts ""I got #{i}""}",Best practices in Ruby for loop
Ruby regex doesn't work as expected," I need to get an array of floats (both positive and negative) from the multiline string. E.g.: -45.124, 1124.325 etcHere's what I do: Although it works fine on regex101 (capturing group 0 matches everything I need), it doesn't work in Ruby code. Any ideas why it's happening and how I can improve that? <code>  text.scan(/(\+|\-)?\d+(\.\d+)?/)",Capturing groups don't work as expected with Ruby scan method
Capturing groups don't work as expected," I need to get an array of floats (both positive and negative) from the multiline string. E.g.: -45.124, 1124.325 etcHere's what I do: Although it works fine on regex101 (capturing group 0 matches everything I need), it doesn't work in Ruby code. Any ideas why it's happening and how I can improve that? <code>  text.scan(/(\+|\-)?\d+(\.\d+)?/)",Capturing groups don't work as expected with Ruby scan method
OSX - how to install gems without sudo," I've read numerous posts but none so far has done the trick. How can I, on OSX (El Capitan Beta) install a gem for my own user? Posts suggest specifying -user-install for example but I cannot call gem without sudo at all as it throws permission errors.I followed ""Install gem as user on OSX 10.10 Yosemite"" but still cannot call gem.I installed Homebrew, installed rbenv per the above guide, installed a version of Ruby with rbenv, checked it was loaded correctly, but the final step in the guide is to call gem install which I still cannot do.Calling gem after installing rbenv results in: rbenv env dump: ""brew and gem both throws 'Permission denied' error whenever I run it"" seems related though it was not solved except by using some other method which I may have to do. <code>  /Users/Me/.rbenv/versions/2.1.5/lib/ruby/2.1.0/rubygems/stub_specification.rb:71:in `initialize': Permission denied @ rb_sysopen - /Users/Ne/.rbenv/versions/2.1.5/lib/ruby/gems/2.1.0/speci RBENV_VERSION=2.1.5RBENV_ROOT=/Users/Me/.rbenvRBENV_HOOK_PATH=:/Users/Me/.rbenv/rbenv.d: /usr/local/etc/rbenv.d: /etc/rbenv.d: /usr/lib/rbenv/hooksPATH=/Users/Me/.rbenv/versions/2.1.5/bin: /usr/local/Cellar/rbenv/0.4.0/libexec: /Users/Me/.rbenv/plugins/rbenv-env/bin: /Users/Me/.rbenv/shims: /usr/local/heroku/bin: /usr/local/sbin: /usr/local/bin: /usr/local/share/npm/bin: /Applications/Atom.app/Contents/Resources/app/apm/bin: /Users/Me/.bin: /Applications/Atom.app/Contents/Resources/app/apm/node_modules/atom-package-manager/bin: /usr/local/bin:/usr/bin: /bin: /usr/sbin:/sbin: /opt/X11/bin: /usr/local/MacGPG2/binRBENV_DIR=/Users/Me/.rbenv/plugins",How to install gems without sudo on Mac OS X
Start ruby on rails command on starting the rails server," I have the following command. I insert it on starting the rails server How do I make this variable start automatically, without having to wright it myself every time?So I would then just do this and it would run automatically with that variable. <code>  VARIABLE=development rails s rails s",How to start Rails server with environment variables set?
How to update local gem source code," I'm testing a gem in a Rails project. The current Gemfile: When I edit a gem locally I can build the gem, remove the gem from Gemfile, run bundle install, add the gem back to the Gemfile and run bundle install again. Is there an easier way to do this locally? <code>  gem 'mygemname', path: '/path/to/my/gem'",Update local gem source code
What do the colors of output in rails console and rails server log mean?," I'm running rails server and rails console in Ubuntu 14.04 inside the generic terminal (app is just called ""Terminal"").Whenever I run commands that involve the database, the console outputs which SQL query it sent but sometimes the text a turquoise color and sometimes it's a purple color. For example in this console output: (The colors that show up on here are not the same as my console)The part that says ProjectLevel Load (0.5ms) will sometimes be turqoise but will sometimes be purple but every other part of the text is. Does this color actually mean anything? Is it telling me something about the success of the query or the data returned? Usually things like this in Rails are pretty intuitive (like when a test suite returns green text vs red text to tell you if the tests were successful) but I can't seem to find anything about where those colors are coming from <code>  2.2.2 :025 > pl = ProjectLevel.find_by(name: 'Premium')ProjectLevel Load (0.5ms) SELECT ""project_levels"".* FROM ""project_levels"" WHERE ""project_levels"".""deleted_at"" IS NULL AND ""project_levels"".""name"" = $1 LIMIT 1 [[""name"", ""Premium""]]=> #<ProjectLevel id: 1, name: ""Premium"", deleted_at: nil, created_at: ""2015-07-15 15:45:40"", updated_at: ""2015-07-15 15:45:40""> ",What do the colors of output in rails console and Rails server log mean?
"running pod set up gives me ""bad interpreter: No such file or directory""", Recently I tried to do pod setup and I get this error: I followed Ray Wenderlich's guide to install CocoaPods and I get this issue so I have no idea what is going on. <code>  -bash: /usr/local/bin/pod: /usr/local/opt/ruby/bin/ruby: bad interpreter: No such file or directory,"Running pod setup gives me ""bad interpreter: No such file or directory"" error"
Ruby case compared to Java switch-case," I am writing a hangman game in ruby and I wanted to use a case statement to determine which body part to place corresponding to a number of incorrect guesses. I made this game using a board class I use for other games like chess and connect-4 because I have a method which serializes the board class allowing me to save and load the game without any extra code. For the game to be saved, I needed some way of determining the number of incorrect guesses for the hangman without adding extra variables to the board class. To solve this I used an instance variable on the board class called history, which can be used to push moves from the game to the boards history. When the board gets serialized, the history is saved as well, which can be read by the game and used to determine incorrect guesses. In the hangman game, I have a method called read history (which I use for all the games since it solves the serialization issue described above). The read_history method is responsible for reading the past guesses, display them, and determine the number of incorrect guesses. This number is then passed to a hang method which determines which body parts of the hangman to add. If I were writing this in java, and a value of 5 were passed to the above method, it would read the statement until it hit ""when 5"" or in java terms ""case 5:"". It would notice that there is not a break in the statement and will move down the list executing the code in ""case 4:"" and repeating until a break is found. If 0 were passed however it would execute the code, see the break, and would not execute and other statements.I am wondering if Ruby is capable of using case statements the way java does in the way that they fall through to the next statement. For my particular problem I am aware that I can use a 0.upto(incorrect) loop and run the cases that way, but I would like to know the similarities and differences in the case statement used in ruby as opposed to the switch-case used in java <code>  def hang(incorrect) case incorrect when 0 @hangman = ["" "", "" "", "" ""] break when 7 @hangman[2][2] = '\\' when 6 @hangman[2][0] = '/' when 5 @hangman[2][1] = '*' when 4 @hangman[1][2] = '\\' when 3 @hangman[1][0] = '/' when 2 @hangman[1][1] = '|' when 1 @hangman[0][1] = 'o' endend",Does ruby's case statement fall through?
Cloning an Array with its content," I want to make a copy of an array, to modify the copy in-place, without affecting the original one. This code fails The copy should be different than the object. Why does it act like if it were just a reference? <code>  a = [ '462664', '669722', '297288', '796928', '584497', '357431']b = a.cloneb.object_id == a.object_id # => falsea[1][2] = 'X'a[1] #66X722b[1] #66X722",Cloning an array with its content
RoR: Forget Password & Sign In - in same page," I'm trying to put Forgot password field with the sign in page, but if user is not registered (and not in apps database), then it redirects to the original devise Forgot password page with errors (http://localhost:3000/users/password). How do I make the errors appear in the same page as the sign in page (http://localhost:3000/users/sign_in)?In app/views/devise/sessions/new.html.erb file So there's a javascript link where an input field will show up if a user forgets their sign in credentials. <code>  <%= simple_form_for(resource, as: resource_name, url: session_path(resource_name)) do |f| %> <%= f.email_field :email, required: false, autofocus: true, placeholder: ""Username"" %> <%= f.password_field :password, required: false, placeholder: ""Password"" %> <%= f.button :submit, ""Sign In"", class: ""btn btn-success btn-sm"" %> <div class=""remember-forgot""> <div class=""row""> <div class=""col-md-6""> <%= f.input :remember_me, as: :boolean if devise_mapping.rememberable? %> </div> <div class=""col-md-6 forgot-pass-content""> <a href=""javascription:void(0)"" class=""forgot-pass"">Forgot Password</a> </div> </div> </div><% end %><!-- where reset is --><div class=""pass-reset""> <%= simple_form_for(resource, as: resource_name, url: password_path(resource_name), namespace: 'forgot', html: { method: :post }) do |f| %> <%= f.error_notification %> <label>Enter the email you signed up with</label> <%= f.email_field :email, required: true, autofocus: true, placeholder: ""Email"" %> <%= f.submit ""Submit"", class: ""pass-reset-submit btn btn-success btn-sm"" %> <% end %> </div>",RoR: Forgot Password & Sign In - in same page
"Ruby on Rails: Dropzone js and paperclip, getting [object Object], but why?"," I'm getting [object Object] on my thumbnails (the background image is the area where you can click on to upload photos... I'm not sure how to load up the normal box similar to the example in http://www.dropzonejs.com/)View CoffeeScript routes.rb controller model EDITPosting controller per comment requets <code>  <%= simple_form_for @project do |f| %> <div class=""dropzone dz-clickable dz-square"" id=""mydrop""> <div class=""dz-default dz-message"" data-dz-message=""""></div> <div id=""bi_previews""></div> <div class=""fallback""> <%= f.file_field :beautiful_image %></div> </div> </div><% end %> $(document).on 'ready page:load', -> Dropzone.autoDiscover = false $('div#mydrop').dropzone url: '/projects' previewsContainer: ""#bi_previews"" headers: ""X-CSRF-Token"" : $('meta[name=""csrf-token""]').attr('content') paramName: ""project[beautiful_image]"" init: -> @on 'success', (file, json) -> @on 'addedfile', (file) -> @on 'drop', (file) -> alert 'file' return return Rails.application.routes.draw do devise_for :users resources :projects def project_params params.require(:project).permit( :user_id, :beautiful_image, :title_name, :remove_project_images_files, project_images_files: [], project_images_attributes: [:id, :project_id, :photo, :_destroy]).merge(user_id: current_user.id)end has_attached_file :beautiful_image, :styles => { :large => ""800x800>"", :medium => ""500x500>"", :thumb => ""150x150#"" }, :default_url => ""/images/:style/missing.png""validates_attachment_content_type :beautiful_image, content_type: /\Aimage\/.*\Z/ def new @project = Project.new @gear = Gear.new @project.gears.build @project.project_images.buildenddef edit @project = Project.find(params[:id])enddef create @project = Project.new(project_params) respond_to do |format| if @project.save format.html { redirect_to @project, notice: 'Project was successfully created.' } format.json { render :show, status: :created, location: @project } else format.html { render :new } format.json { render json: @project.errors, status: :unprocessable_entity } end endend","Ruby on Rails: Dropzone js, getting [object Object], but why?"
how does browser execute ajax response in rails?," When we:Create a button_to with remote: truePut javascript code in a .js.erb file corresponding to the requestThen the code in the js.erb file gets executed on the response.I was curious as to how that code gets executed in the browser.Is it through some sort of eval call in rails library, or is it related with the Content-Type header being set to text/javascript in the response? <code> ",How does a browser execute AJAX response in rails?
Is .map any faster than .each?, Is map faster at iterating over the array than each? Is there speed difference between the two?Map Each  <code>  result = arr.map {|a| a + 2} result = []arr.each do |a| result.push(a + 2)end,Is `map` faster than `each`?
can anyone explain this? what's going on this code," I don't understand the Sheep = Class.new part in the following piece of code. What exactly is it doing? <code>  module Fence Sheep = Class.new do def speak ""Bah."" end endenddef call_sheep Fence::Sheep.new.speakend","What is ""Class.new""?"
Rails Capitalize First Letter of all Words and Keep Already Capitalized," Using rails 4, and having trouble finding documentation on this. I would like to capitalize the first letter of each word in a string but keep already capitalized letters. I would like the following outputs: I thought .titleize would do it, but that will turn BMW into Bmw. Thank you for any help. <code>  how far is McDonald's from here? => How Far Is McDonald's From Here?MDMA is also known as molly => MDMA Is Also Known As Mollyi drive a BMW => I Drive A BMW",Capitalize First Letter of all Words and Keep Already Capitalized
Rails send multiple files to browser using send_data," I am trying to send multiple files to the browser. I cant call send_data for every record like in the code below because i get a double render error. According to this post i need to create the files and zip them so i can send them in one request. I am creating an array of hashes with the @json_encrypted and the file_name for each record. My question is how can i create a file for every record and then bundle them into a zip file to then pass that zip file to send_file. Or better yet have multiple file download dialogs pop up on the screen. One for each file. <code>  @records.each do |r| ActiveRecord::Base.include_root_in_json = true @json = r.to_json a = ActiveSupport::MessageEncryptor.new(Rails.application.config.secret_token) @json_encrypted = a.encrypt_and_sign(@json) send_data @json_encrypted, :filename => ""#{r.name}.json"" }end file_data = []@records.each do |r| ActiveRecord::Base.include_root_in_json = true @json = r.to_json a = ActiveSupport::MessageEncryptor.new(Rails.application.config.secret_token) @json_encrypted = a.encrypt_and_sign(@json) file_data << { json_encrypted: @json_encrypted, filename: ""#{r.name}.json"" }end",Rails send multiple files to browser using send_data or send_file
Ruby check if datetime is a iso8601," I need to check if a DateTime is in a valid ISO8601 format.Like: #iso8601?I checked if ruby has a specific method but I haven't found any.Currently I'm using date.iso8601 == date to check this.Is there a good way to do this?EDITExplaining my environment, and changing the scope of the question.So, my project will use the js api FullCalendar, that's why i need a iso8601 string format. And I wondered what it's better or the correct way, save the date in the database in the correct format, or let the ActiveRecord do their job and manipulate it on just when I require the time information. <code> ",Ruby check if datetime is a iso8601 and saving
How to use the asset pipeline in an xml file and json file?," I'm implementing a favicon using an online generator (http://realfavicongenerator.net but other generators such as www.favicon-generator.org work the same). The generator supplies almost 30 files (images for android, apple, different sizes, etc.), which is why I placed all these files in the asset pipeline (assets/images/favicons/) instead of in the public folder (which would otherwise get so cluttered). Included in the files are an xml file browserconfig.xml and a json file manifest.json (not sure what they are for exactly). In the header I load both files using: Is it okay to use image_path this way? (even though they are not images, I have placed all favicon files together in one folder inside assets/images/favicons)Further, both the xml and json file contain references to favicon images (see below) that are now in the asset pipeline. So in its current form, these references fail. How can I refer to the images in the xml and json files?browserconfig.xml: manifest.json: <code>  <%= content_tag :meta, nil, content: image_path(""favicons/browserconfig.xml""), name: 'msapplication-config' %><%= content_tag :link, nil, href: image_path(""favicons/manifest.json""), rel: :manifest %> <?xml version=""1.0"" encoding=""utf-8""?><browserconfig> <msapplication> <tile> <square70x70logo src=""/mstile-70x70.png""/> <square150x150logo src=""/mstile-150x150.png""/> <square310x310logo src=""/mstile-310x310.png""/> <wide310x150logo src=""/mstile-310x150.png""/> <TileColor>#fff8dc</TileColor> </tile> </msapplication></browserconfig> { ""name"": ""AppName"", ""icons"": [ { ""src"": ""\/android-chrome-36x36.png"", ""sizes"": ""36x36"", ""type"": ""image\/png"", ""density"": ""0.75"" }, { ""src"": ""\/android-chrome-48x48.png"", ""sizes"": ""48x48"", ""type"": ""image\/png"", ""density"": ""1.0"" }, # etc. ]}",How to use favicon with the asset pipeline?
Undefined method `to_h` on array," As per Ruby Array documentation, there is a method to_h which can be used to convert arrays to hash as long as each element of the array is another array of two elements. Example below from the same documentation However, when I run the above code, I get this error: My Ruby version is I wanted to use this technique to answer another question on Stackoverflow, but I am stuck now as a documented feature of Ruby is not working for me. <code>  p [[:foo, :bar], [1, 2]].to_h irb(main):001:0> p [[:foo, :bar], [1, 2]].to_hNoMethodError: undefined method `to_h' for [[:foo, :bar], [1, 2]]:Array from (irb):1 from E:/RubyInstall/bin/irb:12:in `<main>'irb(main):002:0> C:\>ruby -vruby 2.0.0p247 (2013-06-27) [x64-mingw32]",Undefined method 'to_h' on Ruby array
How to have same routes with and without namespace - rails 4," I am making a custom admin panel in a namespace ""admin"".I have resources ""courses"" within that namespace.But I would also like a route to ""courses"" that is not in that namespace:eg: BOTH localhost:3000/admin/courses AND localhost:3000/coursesIt's OK if this requires different controllers. My concern is that its not really DRY if i have both resources for the same route. and just Is there a way to have one resource be shared between namespace and without namespace, or is the example above the way to go? <code>  namespace admin do resources :coursesend resources :courses",How to have one resource in routes for namespace and root path altogether - Rails 4
Installing ROR on mac keep failign with several errors," I am trying to install Rails on my Mac OS v10.10.4 system, and it fails when I run brew install rbenv ruby-build. The error is: At the end of the process it says: Here is the complete log of all what I tried during this attempt: I have looked at the folllowing links so far:http://rubyonrails.org/download/Installing gem or updating RubyGems fails with permissions errorhttps://github.com/sstephenson/rbenv/https://gorails.com/setup/osx/10.10-yosemiteMissing the OpenSSL lib? <code>  Error: Permission denied - /usr/local/etc/opensslWarning: Bottle installation failed: building from source. installing man3/d2i_SSL_SESSION.3ssli2d_SSL_SESSION.3ssl => d2i_SSL_SESSION.3sslinstalling man3/ssl.3sslCannot create directory /usr/local/etc/openssl: Permission denied Mac-213978b7b1793718b9:ROR developer$ brew install rbenv ruby-buildWarning: rbenv-0.4.0 already installed==> Installing ruby-build dependency: openssl==> Downloading https://homebrew.bintray.com/bottles/openssl-1.0.2d_1.yosemite.bottle.tar.gz######################################################################## 100.0%==> Pouring openssl-1.0.2d_1.yosemite.bottle.tar.gzError: Permission denied - /usr/local/etc/opensslWarning: Bottle installation failed: building from source.==> Downloading https://www.openssl.org/source/openssl-1.0.2d.tar.gz######################################################################## 100.0%==> perl ./Configure --prefix=/usr/local/Cellar/openssl/1.0.2d_1 --openssldir=/usr/local/etc/openssl no-ssl2 zlib-dynamic shared enable-cms darw==> make depend==> make==> make test==> make install MANDIR=/usr/local/Cellar/openssl/1.0.2d_1/share/man MANSUFFIX=sslinstalling man3/d2i_SSL_SESSION.3ssli2d_SSL_SESSION.3ssl => d2i_SSL_SESSION.3sslinstalling man3/ssl.3sslCannot create directory /usr/local/etc/openssl: Permission deniedmake: *** [install_sw] Error 13READ THIS: https://git.io/brew-troubleshootingThese open issues may also help:Installing Elixir fails due to OpenSSL errors. https://github.com/Homebrew/homebrew/issues/33218Mac-213978b7b1793718b9:ROR developer$ rbenv install --patch 2.1.1rbenv: no such command `install`Mac-406c8f4772a8:ROR developer$ rbenv instal --patch 2.1.1rbenv: no such command `instal`Mac-406c8f4772a8:ROR developer$ brew install --HEAD ruby-build==> Installing ruby-build dependency: openssl==> Downloading https://homebrew.bintray.com/bottles/openssl-1.0.2d_1.yosemite.bottle.tar.gzAlready downloaded: /Library/Caches/Homebrew/openssl-1.0.2d_1.yosemite.bottle.tar.gz==> Pouring openssl-1.0.2d_1.yosemite.bottle.tar.gzError: Permission denied - /usr/local/etc/opensslWarning: Bottle installation failed: building from source.==> Downloading https://www.openssl.org/source/openssl-1.0.2d.tar.gzAlready downloaded: /Library/Caches/Homebrew/openssl-1.0.2d.tar.gz==> perl ./Configure --prefix=/usr/local/Cellar/openssl/1.0.2d_1 --openssldir=/usr/local/etc/openssl no-ssl2 zlib-dynamic shared enable-cms darw==> make depend==> makebrew install rbenv ruby-build==> make test==> make install MANDIR=/usr/local/Cellar/openssl/1.0.2d_1/share/man MANSUFFIX=sslinstalling man3/d2i_SSL_SESSION.3ssli2d_SSL_SESSION.3ssl => d2i_SSL_SESSION.3sslinstalling man3/ssl.3sslCannot create directory /usr/local/etc/openssl: Permission deniedmake: *** [install_sw] Error 13READ THIS: https://git.io/brew-troubleshootingThese open issues may also help:Installing Elixir fails due to OpenSSL errors. https://github.com/Homebrew/homebrew/issues/33218Mac-213978b7b1793718b9:ROR developer$ brew install rbenv ruby-buildWarning: rbenv-0.4.0 already installed==> Installing ruby-build dependency: openssl==> Downloading https://homebrew.bintray.com/bottles/openssl-1.0.2d_1.yosemite.bottle.tar.gzAlready downloaded: /Library/Caches/Homebrew/openssl-1.0.2d_1.yosemite.bottle.tar.gz==> Pouring openssl-1.0.2d_1.yosemite.bottle.tar.gzError: Permission denied - /usr/local/etc/opensslWarning: Bottle installation failed: building from source.==> Downloading https://www.openssl.org/source/openssl-1.0.2d.tar.gzAlready downloaded: /Library/Caches/Homebrew/openssl-1.0.2d.tar.gz==> perl ./Configure --prefix=/usr/local/Cellar/openssl/1.0.2d_1 --openssldir=/usr/local/etc/openssl no-ssl2 zlib-dynamic shared enable-cms darw^Z[1]+ Stopped brew install rbenv ruby-buildMac-213978b7b1793718b9:ROR developer$ curl https://gist.githubusercontent.com/andschwa/11334511/raw/563d5c2efb869cafb0c65404d12243822bba2817/ruby-2.1.1-readline.patch | rbenv install --patch 2.1.1% Total % Received % Xferd Average Speed Time Time Time CurrentDload Upload Total Spent Left Speed0 0 0 0 0 0 0 0 --:--:-- --:--:-- --:--:-- 0rbenv: no such command `install'100 1713 100 1713 0 0 1499 0 0:00:01 0:00:01 --:--:-- 1498(23) Failed writing bodyMac-213978b7b1793718b9:ROR developer$",Installing Rails on Mac OS fails with several errors
Installing ROR on mac keep failing with several errors," I am trying to install Rails on my Mac OS v10.10.4 system, and it fails when I run brew install rbenv ruby-build. The error is: At the end of the process it says: Here is the complete log of all what I tried during this attempt: I have looked at the folllowing links so far:http://rubyonrails.org/download/Installing gem or updating RubyGems fails with permissions errorhttps://github.com/sstephenson/rbenv/https://gorails.com/setup/osx/10.10-yosemiteMissing the OpenSSL lib? <code>  Error: Permission denied - /usr/local/etc/opensslWarning: Bottle installation failed: building from source. installing man3/d2i_SSL_SESSION.3ssli2d_SSL_SESSION.3ssl => d2i_SSL_SESSION.3sslinstalling man3/ssl.3sslCannot create directory /usr/local/etc/openssl: Permission denied Mac-213978b7b1793718b9:ROR developer$ brew install rbenv ruby-buildWarning: rbenv-0.4.0 already installed==> Installing ruby-build dependency: openssl==> Downloading https://homebrew.bintray.com/bottles/openssl-1.0.2d_1.yosemite.bottle.tar.gz######################################################################## 100.0%==> Pouring openssl-1.0.2d_1.yosemite.bottle.tar.gzError: Permission denied - /usr/local/etc/opensslWarning: Bottle installation failed: building from source.==> Downloading https://www.openssl.org/source/openssl-1.0.2d.tar.gz######################################################################## 100.0%==> perl ./Configure --prefix=/usr/local/Cellar/openssl/1.0.2d_1 --openssldir=/usr/local/etc/openssl no-ssl2 zlib-dynamic shared enable-cms darw==> make depend==> make==> make test==> make install MANDIR=/usr/local/Cellar/openssl/1.0.2d_1/share/man MANSUFFIX=sslinstalling man3/d2i_SSL_SESSION.3ssli2d_SSL_SESSION.3ssl => d2i_SSL_SESSION.3sslinstalling man3/ssl.3sslCannot create directory /usr/local/etc/openssl: Permission deniedmake: *** [install_sw] Error 13READ THIS: https://git.io/brew-troubleshootingThese open issues may also help:Installing Elixir fails due to OpenSSL errors. https://github.com/Homebrew/homebrew/issues/33218Mac-213978b7b1793718b9:ROR developer$ rbenv install --patch 2.1.1rbenv: no such command `install`Mac-406c8f4772a8:ROR developer$ rbenv instal --patch 2.1.1rbenv: no such command `instal`Mac-406c8f4772a8:ROR developer$ brew install --HEAD ruby-build==> Installing ruby-build dependency: openssl==> Downloading https://homebrew.bintray.com/bottles/openssl-1.0.2d_1.yosemite.bottle.tar.gzAlready downloaded: /Library/Caches/Homebrew/openssl-1.0.2d_1.yosemite.bottle.tar.gz==> Pouring openssl-1.0.2d_1.yosemite.bottle.tar.gzError: Permission denied - /usr/local/etc/opensslWarning: Bottle installation failed: building from source.==> Downloading https://www.openssl.org/source/openssl-1.0.2d.tar.gzAlready downloaded: /Library/Caches/Homebrew/openssl-1.0.2d.tar.gz==> perl ./Configure --prefix=/usr/local/Cellar/openssl/1.0.2d_1 --openssldir=/usr/local/etc/openssl no-ssl2 zlib-dynamic shared enable-cms darw==> make depend==> makebrew install rbenv ruby-build==> make test==> make install MANDIR=/usr/local/Cellar/openssl/1.0.2d_1/share/man MANSUFFIX=sslinstalling man3/d2i_SSL_SESSION.3ssli2d_SSL_SESSION.3ssl => d2i_SSL_SESSION.3sslinstalling man3/ssl.3sslCannot create directory /usr/local/etc/openssl: Permission deniedmake: *** [install_sw] Error 13READ THIS: https://git.io/brew-troubleshootingThese open issues may also help:Installing Elixir fails due to OpenSSL errors. https://github.com/Homebrew/homebrew/issues/33218Mac-213978b7b1793718b9:ROR developer$ brew install rbenv ruby-buildWarning: rbenv-0.4.0 already installed==> Installing ruby-build dependency: openssl==> Downloading https://homebrew.bintray.com/bottles/openssl-1.0.2d_1.yosemite.bottle.tar.gzAlready downloaded: /Library/Caches/Homebrew/openssl-1.0.2d_1.yosemite.bottle.tar.gz==> Pouring openssl-1.0.2d_1.yosemite.bottle.tar.gzError: Permission denied - /usr/local/etc/opensslWarning: Bottle installation failed: building from source.==> Downloading https://www.openssl.org/source/openssl-1.0.2d.tar.gzAlready downloaded: /Library/Caches/Homebrew/openssl-1.0.2d.tar.gz==> perl ./Configure --prefix=/usr/local/Cellar/openssl/1.0.2d_1 --openssldir=/usr/local/etc/openssl no-ssl2 zlib-dynamic shared enable-cms darw^Z[1]+ Stopped brew install rbenv ruby-buildMac-213978b7b1793718b9:ROR developer$ curl https://gist.githubusercontent.com/andschwa/11334511/raw/563d5c2efb869cafb0c65404d12243822bba2817/ruby-2.1.1-readline.patch | rbenv install --patch 2.1.1% Total % Received % Xferd Average Speed Time Time Time CurrentDload Upload Total Spent Left Speed0 0 0 0 0 0 0 0 --:--:-- --:--:-- --:--:-- 0rbenv: no such command `install'100 1713 100 1713 0 0 1499 0 0:00:01 0:00:01 --:--:-- 1498(23) Failed writing bodyMac-213978b7b1793718b9:ROR developer$",Installing Rails on Mac OS fails with several errors
how can I convert a string to JSON in Ruby," I have read data online, but it is in a string format. How can I make it so that it returns a JSON object.Example data read: Example conversion: But when I do: <code>  text = '{""one"":1,""two"":2}' data = JSON.parse(text).to_json puts data.class#=> String",Convert String to JSON in Ruby
Rails: violates foreign key constraintRails," I have three models: Book, genre, BookGenre, and here are relationships: And then I use seed file to put data into these tables.But when I want to do rake db:seed again, it showed this error In my seed.rb  <code>  class BookGenre < ActiveRecord::Base belongs_to :book belongs_to :genreendclass Book < ActiveRecord::Base has_many :book_genres has_many :genres, through: :book_genresendclass Genre < ActiveRecord::Base has_many :book_genres has_many :books, through: :book_genresend ActiveRecord::InvalidForeignKey: PG::ForeignKeyViolation: ERROR: update or delete on table ""books"" violates foreign key constraint ""fk_rails_4a117802d7"" on table ""book_genres""DETAIL: Key (id)=(10) is still referenced from table ""book_genres"". Book.destroy_allGenre.destroy_all...create data ",Rails: violates foreign key constraint
Rails- How to delete pending migration," I'm currently following the ruby on rails tutorial: http://guides.rubyonrails.org/getting_started.html.I am trying to save data into the database. However, when I run: rails server I get the following error: I've looked at the other articles and when I run: I get a rake aborted!After running: I see that: and it just tells me to run rake db:migrate to start again.It seems that it already exists. Is there a way to cancel the pending migration? <code>  Migrations are pending. To resolve this issue, run: bin/rake db:migrate RAILS_ENV=development bin/rake db:migrate rake db:abort_if_pending_migrations.... You have 1 pending migration:20150805200129 CreateDatabasesSQLite3::SQLException: table ""databases"" already exists:",Rails: How to delete a pending migration
Rails/Bootstrap - Flash notice :success is now red and not green?!," I've been trying to search for an answer on here but I can't find anything that works. I have implemented a :success and :danger flash notice to my rails app. It WAS working completely fine, i.e :success was green and :danger was red, with a close button and all, BUT since adding some mailer files my :success is now showing up red?? application.html.erb excerpt: contact_mailer.rb contacts_controller.rb and, contact_email.html.erb I repeat that this was all working completely fine before the mailer stuff went in...but now i'm just baffled. Please help! <code> ",Rails/Bootstrap - Flash notice :success is now red and not green?
"Can I use ""else if"" over ""elsif""?"," Is it safe to use else if over elsif?Is it better to use elsif because it follows Ruby's typingconvention?Or is this a preference?This is a piece of code taken from a book. I added extra end keywords and swapped elsif keywords with else ifs. This made me realize how ugly else if is. <code>  def describe(inhabitant) if inhabitant == ""sophie"" puts 'gender: female' puts 'height: 145' else if inhabitant == ""paul"" puts 'gender: male' puts 'height: 145' else if inhabitant == ""dawn"" puts 'gender: female' puts 'height: 170' else if inhabitant == ""brian"" puts 'gender: male' puts 'height: 180' else if puts 'species: Trachemys scripta elegans' puts 'height: 6' end end end end endend",Can I use `else if` over `elsif`?
How to print <%= %> in .html.erb page?," I want to print following as a string in my .html.erb view. So, I tried following in my file: It gave me following error: If I remove <%= '<%= selected_color %>' %> and place some string like abc, then it is printed on page without any issue.As it is static page, I don't want to create a controller for it. So, can you help in showing that string on page?p.s. I'm using ruby v1.9.3 and rails v3.1.0 <code>  <%= selected_color %> <h3><%= '<%= selected_color %>' %></h3> syntax error, unexpected $undefined, expecting ')'",Render <%= %> as a String in an .html.erb View?
ruby on rails for postgres sql group by and count," Refering to this:Is there any difference between GROUP BY and DISTINCT What is the correct Rails convention here for ActiveModel to perform a GROUP BY with COUNT? <code>  Given a table that looks like this:name------barrydavebilldavedavebarryjohnThis query:SELECT name, count(*) AS count FROM table GROUP BY name;Will produce output like this:name count-------------barry 2dave 3bill 1john 1",GROUP BY and COUNT using ActiveRecord
Complex functional testing with time flow simulation (RubyOnRails and RSpec)," I have been developing in RoR for more than a year now, but I'm just starting to use tests, using RSpec.For standard model/controller tests, I usually don't have any problem, but the issue is that I want to test some complicated functional processes, and dont really know how to structure my testing folders/files/database.Here is a basic structure for my application: The main issue is that I want to simulate the lifecycle of my object, meaning: Instantiating customers and wallets which will be used for all the tests (without reinitializing)Simulating the time flow, creating and updating multiple orders/invoice objects and some invoice_summaries.For the creation and update of the orders/invoices/invoice_summaries, I would like to have methods like Ive already found the gem Timecop for simulating the time flow. Hence, I would like to have an easy to understand final test that looks like Does anyone already have such tests? Are there good practices for the structuring of object factories, writing tests and so on?For example, I've been told that a good idea would be to put the Customer/Wallet creation in a db/seed.rb file, but I don't really know what to do with it afterwards. <code>  class Customer has_one :wallet has_many :orders has_many :invoices, through: :orders has_many :invoice_summariesendclass Wallet belongs_to :customerendclass Order has_one :invoice belongs_to :customerendclass Invoice belongs_to :order belongs_to :invoice_summaryendclass InvoiceSummary belongs_to :customer has_many :invoicesend def create_order_1 # code specific to create my first order, return the created orderenddef create_order_2 # code specific to create my second order, return the created orderend...def create_order_n # code specific to create my n-th order, return the created orderenddef bill_order(order_to_bill) # generic code to do the billing of the order passed as parameterenddef cancel_order(order_to_cancel) # generic code to cancel the order passed as parameterend # Code for the initialization of customers and wallets objectdescribe ""Wallet should be equal to 0 after first day"" do Timecop.freeze(Time.new(2015,7,1)) first_request = create_request_1 first_request.customer.wallet.value.should? == 0enddescribe ""Wallet should be equal to -30 after second day"" do Timecop.freeze(Time.new(2015,7,2)) bill_order(first_request) second_order = create_order_2 first_request.customer.wallet.value.should? == -30enddescribe ""Wallet should be equal to -20 after third day"" do Timecop.freeze(Time.new(2015,7,3)) bill_order(second_request) cancel_order(first_request) first_request.customer.wallet.value.should? == -20enddescribe ""Three first day invoice_summary should have 3 invoices"" do Timecop.freeze(Time.new(2015,7,4)) invoice_summary = InvoiceSummary.create( begin_date: Date.new(2015,7,1), end_date: Date.new(2015, 7,3) ) # real InvoiceSummary method invoice_summary.invoices.count.should? == 3end","How to structure my RSpec test folders, files and database?"
How to structure my Rspec testing folders / files / database," I have been developing in RoR for more than a year now, but I'm just starting to use tests, using RSpec.For standard model/controller tests, I usually don't have any problem, but the issue is that I want to test some complicated functional processes, and dont really know how to structure my testing folders/files/database.Here is a basic structure for my application: The main issue is that I want to simulate the lifecycle of my object, meaning: Instantiating customers and wallets which will be used for all the tests (without reinitializing)Simulating the time flow, creating and updating multiple orders/invoice objects and some invoice_summaries.For the creation and update of the orders/invoices/invoice_summaries, I would like to have methods like Ive already found the gem Timecop for simulating the time flow. Hence, I would like to have an easy to understand final test that looks like Does anyone already have such tests? Are there good practices for the structuring of object factories, writing tests and so on?For example, I've been told that a good idea would be to put the Customer/Wallet creation in a db/seed.rb file, but I don't really know what to do with it afterwards. <code>  class Customer has_one :wallet has_many :orders has_many :invoices, through: :orders has_many :invoice_summariesendclass Wallet belongs_to :customerendclass Order has_one :invoice belongs_to :customerendclass Invoice belongs_to :order belongs_to :invoice_summaryendclass InvoiceSummary belongs_to :customer has_many :invoicesend def create_order_1 # code specific to create my first order, return the created orderenddef create_order_2 # code specific to create my second order, return the created orderend...def create_order_n # code specific to create my n-th order, return the created orderenddef bill_order(order_to_bill) # generic code to do the billing of the order passed as parameterenddef cancel_order(order_to_cancel) # generic code to cancel the order passed as parameterend # Code for the initialization of customers and wallets objectdescribe ""Wallet should be equal to 0 after first day"" do Timecop.freeze(Time.new(2015,7,1)) first_request = create_request_1 first_request.customer.wallet.value.should? == 0enddescribe ""Wallet should be equal to -30 after second day"" do Timecop.freeze(Time.new(2015,7,2)) bill_order(first_request) second_order = create_order_2 first_request.customer.wallet.value.should? == -30enddescribe ""Wallet should be equal to -20 after third day"" do Timecop.freeze(Time.new(2015,7,3)) bill_order(second_request) cancel_order(first_request) first_request.customer.wallet.value.should? == -20enddescribe ""Three first day invoice_summary should have 3 invoices"" do Timecop.freeze(Time.new(2015,7,4)) invoice_summary = InvoiceSummary.create( begin_date: Date.new(2015,7,1), end_date: Date.new(2015, 7,3) ) # real InvoiceSummary method invoice_summary.invoices.count.should? == 3end","How to structure my RSpec test folders, files and database?"
How to structure my RSpec testing folders / files / database," I have been developing in RoR for more than a year now, but I'm just starting to use tests, using RSpec.For standard model/controller tests, I usually don't have any problem, but the issue is that I want to test some complicated functional processes, and dont really know how to structure my testing folders/files/database.Here is a basic structure for my application: The main issue is that I want to simulate the lifecycle of my object, meaning: Instantiating customers and wallets which will be used for all the tests (without reinitializing)Simulating the time flow, creating and updating multiple orders/invoice objects and some invoice_summaries.For the creation and update of the orders/invoices/invoice_summaries, I would like to have methods like Ive already found the gem Timecop for simulating the time flow. Hence, I would like to have an easy to understand final test that looks like Does anyone already have such tests? Are there good practices for the structuring of object factories, writing tests and so on?For example, I've been told that a good idea would be to put the Customer/Wallet creation in a db/seed.rb file, but I don't really know what to do with it afterwards. <code>  class Customer has_one :wallet has_many :orders has_many :invoices, through: :orders has_many :invoice_summariesendclass Wallet belongs_to :customerendclass Order has_one :invoice belongs_to :customerendclass Invoice belongs_to :order belongs_to :invoice_summaryendclass InvoiceSummary belongs_to :customer has_many :invoicesend def create_order_1 # code specific to create my first order, return the created orderenddef create_order_2 # code specific to create my second order, return the created orderend...def create_order_n # code specific to create my n-th order, return the created orderenddef bill_order(order_to_bill) # generic code to do the billing of the order passed as parameterenddef cancel_order(order_to_cancel) # generic code to cancel the order passed as parameterend # Code for the initialization of customers and wallets objectdescribe ""Wallet should be equal to 0 after first day"" do Timecop.freeze(Time.new(2015,7,1)) first_request = create_request_1 first_request.customer.wallet.value.should? == 0enddescribe ""Wallet should be equal to -30 after second day"" do Timecop.freeze(Time.new(2015,7,2)) bill_order(first_request) second_order = create_order_2 first_request.customer.wallet.value.should? == -30enddescribe ""Wallet should be equal to -20 after third day"" do Timecop.freeze(Time.new(2015,7,3)) bill_order(second_request) cancel_order(first_request) first_request.customer.wallet.value.should? == -20enddescribe ""Three first day invoice_summary should have 3 invoices"" do Timecop.freeze(Time.new(2015,7,4)) invoice_summary = InvoiceSummary.create( begin_date: Date.new(2015,7,1), end_date: Date.new(2015, 7,3) ) # real InvoiceSummary method invoice_summary.invoices.count.should? == 3end","How to structure my RSpec test folders, files and database?"
How to correctly use guard clause in ruby," What is the correct way to use the guard clause in this sample? I don't know where to put flash message when trying to rewrite using these https://github.com/bbatsov/ruby-style-guide#no-nested-conditionals conventions <code>  def require_admin unless current_user && current_user.role == 'admin' flash[:error] = ""You are not an admin"" redirect_to root_path end end",How to correctly use guard clause in Ruby
Can I write postgresql functions on Ruby on Rails?," We are starting a project based on Ruby on Rails. We used to work with Perl and PostgreSQL functions, and with Rails and Active Record I've not seen how we are supposed to create functions in PostgreSQL and keep the record with Active Record and models. I know we can create it manually in PostgreSQL, but the ""magic"" with Active Record is that the database can be recreated with all the models.Is there any way to create the PostgreSQL function using Rails and keep it in the models?  <code> ",Can I write PostgreSQL functions on Ruby on Rails?
hide save and add another button from edit form in rails_admin," I applied a rails_admin gem in my Rails app. I want to remove some unnecessary buttons in a specific model edit form, and add my own custom button instead. Please see the screenshot for what I'd like to remove. <code> ","How do I hide ""Save and Add Another"" button from edit form in rails_admin?"
How To? Write a nice Importer Module," A user can import his data from other websites. All he needs to do is type in his username on the foreign website and we'll grab all pictures and save it into his own gallery. Some of the pictures needs to be transformed with rMagick (rotating,watermarking), that depends on the importer (depends on which website the user chooses to import data from)We are discussing the sexiest and most flexible way to do so. We are using carrierwave, but we will change to paperclip in case it fits us more.Importer StructureThe current structure does looks like (its roughly pseudocode) We struggle with the decision, whats the best return of the importer.Solution1:The Importer is returning an array of strings with URLs [""http://..."", ""http://..."", ""http://...""].That array we can easily loop and tell carrierwave/paperclip to remote_download the images. After that, we'll run a processor to transform the pictures, if we need to. this actually returns an array [""url_to_image"", ""url_to_image"", ""url_to_image""]Then in the Picture.after_create, we call something to remove the Watermark on that Image.Solution2:grab_pictures is downloading each picture to an tempfile and transform it. it will return an array of tempfiles [tempfile, tempfile, tempfile]code for that is: This actually returns an array of [Tempfile, Tempfile, Tempfile]SummaryThe result will be the same for the user - but internally we are discovering 2 different ways of data handling.We want to keep logic where it belongs and work as generic as possible.Can you guys help us with choosing the right way? Longterm we want to have around 15 differnt Importers.  <code>  module Importer class Website1 def grab_pictures end end class Website2 def grab_pictures end endendclass ImporterJob def perform(user, type, foreign_username) pictures = Importer::type.grab_pictures(foreign_username) pictures.each do |picture| user.pictures.create picture end endend def get_picture_urls username pictures = [] page = get_html(username) page.scan(/\/p\/\d{4}-\d{2}\/#{username}\/[\w\d]{32}-thumb.jpg/).each do |path| pictures << path end pictures.uniq.collect{|x| ""http://www.somewebsite.com/#{x.gsub(/medium|thumb/, ""big"")}""}end def read_pictures username pictures = [] page = get_html(username) page.scan(/\/p\/\d{4}-\d{2}\/#{username}\/[a-z0-9]{32}-thumb.jpg/).each do |path| pictures << path end pictures.uniq.map { |pic_url| remove_logo(pic_url) }enddef remove_logo pic_url big = Magick::Image.from_blob(@agent.get(pic_url.gsub(/medium.jpg|thumb.jpg/, 'big.jpg')).body).first # ... do some transformation and watermarking file = Tempfile.new(['tempfile', '.jpg']) result.write(file.path) file end",Best way to write a flexible importer module
What does assign works in rails rspec," I am working on code that I haven't written and trying to understand how RSpec works. I know that let creates a memoized variable.What does assign do in this example? <code>  let(:course) { create :new_course }before { assign :course, course }",What does assign do in rspec-rails?
Ruby rake loaderror - bundle exec rake not working," I'm trying to run the command rake db:migrate but I keep getting this error: Trying bundle exec rake db:migrate also gives me the same error.Is there a way I can solve this issue? (I'm on Mac OS X 10.10.5)EDIT: The first letter of my [name] in the error is upper case even though in my system, it's lower case.EDIT [PARTIALLY SOLVED]: So I was using Ruby version 2.2.1 and I was supposed to use 2.1.2. Although this did not fix the rake command error, I was trying to run rails server which successfully ran after changing my Ruby version. <code>  /Users/[name]/.rvm/gems/ruby-2.2.1/bin/rake:23:in `load': cannot load such file -- /Users/[name]/.rvm/rubies/ruby-2.2.1/lib/ruby/gems/2.2.0/specifications/default/bin/rake (LoadError)from /Users/[name]/.rvm/gems/ruby-2.2.1/bin/rake:23:in `<main>'from /Users/[name]/.rvm/gems/ruby-2.2.1/bin/ruby_executable_hooks:15:in `eval'from /Users/[name]/.rvm/gems/ruby-2.2.1/bin/ruby_executable_hooks:15:in `<main>'",Ruby rake loaderror - bundle exec rake not working
Ruby rake loaderror - bundle exec rake not working [PARTIALLY SOLVED]," I'm trying to run the command rake db:migrate but I keep getting this error: Trying bundle exec rake db:migrate also gives me the same error.Is there a way I can solve this issue? (I'm on Mac OS X 10.10.5)EDIT: The first letter of my [name] in the error is upper case even though in my system, it's lower case.EDIT [PARTIALLY SOLVED]: So I was using Ruby version 2.2.1 and I was supposed to use 2.1.2. Although this did not fix the rake command error, I was trying to run rails server which successfully ran after changing my Ruby version. <code>  /Users/[name]/.rvm/gems/ruby-2.2.1/bin/rake:23:in `load': cannot load such file -- /Users/[name]/.rvm/rubies/ruby-2.2.1/lib/ruby/gems/2.2.0/specifications/default/bin/rake (LoadError)from /Users/[name]/.rvm/gems/ruby-2.2.1/bin/rake:23:in `<main>'from /Users/[name]/.rvm/gems/ruby-2.2.1/bin/ruby_executable_hooks:15:in `eval'from /Users/[name]/.rvm/gems/ruby-2.2.1/bin/ruby_executable_hooks:15:in `<main>'",Ruby rake loaderror - bundle exec rake not working
Refining module methods in Ruby, You can refine your class with but how to refine module method? This: raises: TypeError: wrong argument type Module (expected Class) <code>  module RefinedString refine String do def to_boolean(text) !!(text =~ /^(true|t|yes|y|1)$/i) end endend module RefinedMath refine Math do def PI 22/7 end endend,How to refine module method in Ruby?
Weird behaviors on acts-as-taggable-on gem," I have a model called Recipe which uses the acts-as-taggable-on gem to add taggings to the recipes. The weird behavior is when I edit and update the recipe via the controller, the recipe taggings are added instead of updating to proper taggings. There was a similar Github issue being reported but there's no reply from anyone. My acts-as-taggable-on gem version is 3.2.6.For example, my recipe has three taggings: fruit, fruit and vegetables. The fruit tag is not relevant, so I removed these two fruit tag in my f.tag_list input field to only include vegetables. users/recipes_controller.rb The recipe_params included tag_list as the permitted parameter. But ended up the old taggings are not removed, and the new one has been added to the list: fruit, fruit, vegetables, vegetables.Another weird thing is that when I try to see the tag_list of the recipe, it is an empty array. Tried edit the tag_list in rails console, it added another tagging but when I do r.reload the tag_list it is still an empty array. Now the relationship between the recipe and the tags are like so: The tag_list database query is weird too, why the query includes this taggings.tagger_id IS NULL ?I'm still new to this gem, any idea on how to update the taggings properly using the gem methods? I hope I could avoid updating the taggings using my own code to avoid further problems. It is noted that my Recipe model is versioned by paper_trail gem, I hope it's not related to this problem. <code>  Processing by Users::RecipesController#update as JSParameters: {""utf8""=>"""", ""recipe""=>{""image_ids""=>""46746"", ""cover_image_id""=>""46746"",""name""=>""Cauliflower"", ""description""=>""this is the description"", ""preparation_time_hr""=>""0"",""preparation_time_min""=>""50"", ""servings""=>""4"", ""category_ids""=>"""", ""cuisine_ids""=>"""", ""tag_list""=>""vegetables"", ""ingredients""=>....} def update if @recipe.update_attributes(recipe_params) if params[:publish_recipe] && params[:publish_recipe] == ""true"" update_status!(:publish!) end redirect_to user_recipes_url else respond_to do |format| format.html{ render ""edit"" } format.js { render partial: ""shared/flash_message"", locals: { flash_type: ""error"", flash_message: ""#{@recipe.errors.full_messages.to_sentence}"" } } end endend def recipe_params params.required(:recipe).permit(:name, :category_ids, :cuisine_ids, :tag_list, :preparation_time_hr, :cover_image_id, :preparation_time_min, :servings, :description, :image_ids, :commentable, ingredients_attributes: [:id, :name, :_destroy], instructions_attributes: [:id, :text, :_destroy, image_attributes: [:id, :picture, :_destroy]]) rescue {}end r = Recipe.find(20980)[56] pry(main)> r.tag_list ActsAsTaggableOn::Tag Load (14.9ms) SELECT `tags`.* FROM `tags` INNER JOIN `taggings` ON `tags`.`id` = `taggings`.`tag_id` WHERE `taggings`.`taggable_id` = 20980 AND `taggings`.`taggable_type` = 'Recipe' AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)=> [][57] pry(main)> r.tags=> [#<ActsAsTaggableOn::Tag id: 2, name: ""fruit"", taggings_count: 1138, tagger_id: nil, tagger_type: nil, created_at: ""2015-07-25 15:47:20"", updated_at: ""2015-07-25 15:47:53"">, #<ActsAsTaggableOn::Tag id: 2, name: ""fruit"", taggings_count: 1138, tagger_id: nil, tagger_type: nil, created_at: ""2015-07-25 15:47:20"", updated_at: ""2015-07-25 15:47:53"">, #<ActsAsTaggableOn::Tag id: 531, name: ""vegetables"", taggings_count: 21, tagger_id: nil, tagger_type: nil, created_at: ""2015-07-25 15:56:15"", updated_at: ""2015-07-25 15:56:16"">, #<ActsAsTaggableOn::Tag id: 531, name: ""vegetables"", taggings_count: 21, tagger_id: nil, tagger_type: nil, created_at: ""2015-07-25 15:56:15"", updated_at: ""2015-07-25 15:56:16"">, #<ActsAsTaggableOn::Tag id: 531, name: ""vegetables"", taggings_count: 21, tagger_id: nil, tagger_type: nil, created_at: ""2015-07-25 15:56:15"", updated_at: ""2015-07-25 15:56:16"">][58] pry(main)> r.taggings ActsAsTaggableOn::Tagging Load (35.8ms) SELECT `taggings`.* FROM `taggings` WHERE `taggings`.`taggable_id` = 20980 AND `taggings`.`taggable_type` = 'Recipe'=> [#<ActsAsTaggableOn::Tagging id: 20408, tag_id: 2, taggable_id: 20980, taggable_type: ""Recipe"", tagger_id: 200422, tagger_type: ""User"", context: ""tags"", created_at: ""2015-08-21 03:56:13"">, #<ActsAsTaggableOn::Tagging id: 20409, tag_id: 2, taggable_id: 20980, taggable_type: ""Recipe"", tagger_id: 200422, tagger_type: ""User"", context: ""tags"", created_at: ""2015-08-21 03:56:14"">, #<ActsAsTaggableOn::Tagging id: 20410, tag_id: 531, taggable_id: 20980, taggable_type: ""Recipe"", tagger_id: 200422, tagger_type: ""User"", context: ""tags"", created_at: ""2015-08-21 04:01:36"">, #<ActsAsTaggableOn::Tagging id: 20411, tag_id: 531, taggable_id: 20980, taggable_type: ""Recipe"", tagger_id: 200422, tagger_type: ""User"", context: ""tags"", created_at: ""2015-08-21 04:47:38"">, #<ActsAsTaggableOn::Tagging id: 20412, tag_id: 531, taggable_id: 20980, taggable_type: ""Recipe"", tagger_id: 200422, tagger_type: ""User"", context: ""tags"", created_at: ""2015-08-21 04:53:38"">]",Weird behaviors on acts-as-taggable-on gem of not clearing taggings
regex interpolation in Rails.root.join," How do I represent a number user.id as a string with:00 padded to the left if user.id is in range 0 to 9# => ""00#{user.id}""0 padded if user.id is in range 10 to 99# => ""0#{user.id}""nothing padded otherwise# => ""#{user.id}""For example, having user.id = 1, it would produce ""001"", having user.id = 11, it would produce ""011"", and having user.id = 111, it would produce ""111"". <code> ",Padding a number with zeros
Running Ruby programs in Atom on a PC," I installed Atom and the script package, wrote a Ruby test program, saved it as hello.rb, pressed ctrl + shift + b to execute, and got the error message 'ruby' is not recognized as an internal or external command, operable program or batch file. I thought the script package included Ruby and multiple other grammars. Is there something else I need to do before I can run programs? <code> ",Running Ruby programs in Atom
How to process huge JSON file as stream in Ruby so it'd not consume all memory?," I'm having trouble processing a huge JSON file in Ruby. What I'm looking for is a way to process it entry-by-entry without keeping too much data in memory.I thought that yajl-ruby gem would do the work but it consumes all my memory. I've also looked at Yajl::FFI and JSON:Stream gems but there it is clearly stated: For larger documents we can use an IO object to stream it into the parser. We still need room for the parsed object, but the document itself is never fully read into memory.Here's what I've done with Yajl: The memory usage keeps getting higher until the process is killed.I don't see why Yajl keeps processed entries in the memory. Can I somehow free them, or did I just misunderstood the capabilities of Yajl parser?If it cannot be done using Yajl: is there a way to do this in Ruby via any library? <code>  file_stream = File.open(file, ""r"")json = Yajl::Parser.parse(file_stream)json.each do |entry| entry.do_somethingendfile_stream.close","How can I process huge JSON files as streams in Ruby, without consuming all memory?"
Have MyClass.respond_to? wait until entire class loaded," I'm building a plugin that will allow a developer to add various features to a class with a simple declaration in the class definition (following the normal acts_as pattern).For example, code consuming the plugin might look like My question arises because I want to error check that the value provided for the :specific_method_to_use parameter exists as a method, but the way code is typically organized and loaded, the method doesn't exist yet.The code in my plugin tentatively looks like this: This would work: But this is how most people write code, and it would not: How can I fail at YourClass load time? I want it to error then, not at run time with a NoMethodError. Can I defer execution of the line that raises the ArgumentError until the entire class is loaded, or do something else clever to achieve that? <code>  class YourClass consumes_my_plugin option1: :value1, specific_method_to_use: :your_methodend module MyPlugin extend ActiveSupport::Concern module ClassMethods def consumes_my_plugin(options = {}) raise ArgumentError.new(""#{options[:specific_method_to_use]} is not defined"") if options[:specific_method_to_use].present? && !self.respond_to?(options[:specific_method_to_use]) end endend class YourClass def your_method; true; end consumes_my_plugin option1: :value1, specific_method_to_use: :your_methodend class YourClass consumes_my_plugin option1: :value1, specific_method_to_use: :your_method def your_method; true; endend",How can I set a hook to run code at the end of a Ruby class definition?
Use refinements inside rspec," Let's say I've got refinement and I use it inside my class Speech: I've written tests for refinement in RSpec and now I'm testing Speech class but I get RSpec::Mocks::MockExpectationError: ""yig"" does not implement: remove_latin_letterI don't think mocking it is a good solution (but I may be wrong! Is mocking the solution here?)so I tried let(:text) { described_class::String.new(""yig"") }but the result is the same.I don't want to explicitly call using RefinedString inside my RSpec (it should figure it out on its own, right?)How to make RSpec aware of my refined methods? <code>  module RefinedString refine String do def remove_latin_letters #code code code code end endend class Speech using RefinedString def initialize(text) @content = text.remove_latin_letters endend describe Speech let(:text) { ""yig"" } it 'should call my refinement' do expect(text).to receive(:remove_latin_letters) Speech.new(text) endend",Testing class which uses refinements with RSpec
Use refinements inside RSpec," Let's say I've got refinement and I use it inside my class Speech: I've written tests for refinement in RSpec and now I'm testing Speech class but I get RSpec::Mocks::MockExpectationError: ""yig"" does not implement: remove_latin_letterI don't think mocking it is a good solution (but I may be wrong! Is mocking the solution here?)so I tried let(:text) { described_class::String.new(""yig"") }but the result is the same.I don't want to explicitly call using RefinedString inside my RSpec (it should figure it out on its own, right?)How to make RSpec aware of my refined methods? <code>  module RefinedString refine String do def remove_latin_letters #code code code code end endend class Speech using RefinedString def initialize(text) @content = text.remove_latin_letters endend describe Speech let(:text) { ""yig"" } it 'should call my refinement' do expect(text).to receive(:remove_latin_letters) Speech.new(text) endend",Testing class which uses refinements with RSpec
Ruby vs ActiveRecord methods. Is AR really faster?," I am trying to get all the ids from my Article model. I can do it two ways: OR What gives? Why is the AR slower than the Ruby version?Even when I benchmark the Ruby method, it seems faster: <code>  Article.select(:id).collect{|a| a.id} Article Load (2.6ms) SELECT ""articles"".""id"" FROM ""articles"" 2.2.1 :006 > Article.pluck(:id) (4.3ms) SELECT ""articles"".""id"" FROM ""articles"" Benchmark.measure{Article.select(:id).collect{|a| a.id}} Article Load (1.9ms) SELECT ""articles"".""id"" FROM ""articles"" => #<Benchmark::Tms:0x007feb12060658 @label="""", @real=0.026455502957105637, @cstime=0.0, @cutime=0.0, @stime=0.0, @utime=0.020000000000000018, @total=0.020000000000000018>","ActiveRecords select(:id).collect vs. pluck(:id) methods: Why is pure AR ""pluck"" slower?"
Howto Raise an Exception in a rspec test," I'm stuck on a test scenario.I have a controller method: The first part I test with: Now I want to test the ActiveRecord::StaleObjectError exception. I want to stub it, but I didn't find any solution how to do this.So my question is, how to raise the ActiveRecord::StaleObjectError in an RSpec test? <code>  def update @object = Object.find params[:id] # some other stuff @object.save rescue ActiveRecord::StaleObjectError # woo other stuffend context '#update' let(:object) { double } it 'nothing fails' do # some other stuff expect(Object).to receive(:find).with('5').and_return(object) expect(object).to receive(:save).and_return(true) xhr :put, :update, id:5 expect(response).to be_success expect(assigns(:object)).to eq(object) endend",How to raise an exception in an RSpec test
How can I get month name from month number with ruby & rails," I can get the next month's month number and year with: How can I get ""October"" from 10? <code>  (Time.now + 1.month).month# => 10(Time.now + 1.month).year# => 2015",How can I get month name from month number
"display, or get the http header attirbutes in rails 4", I have an application developed in Rails and I am trying to see the attributes in the HTTP header. Is there any way to read these attributes? Where are they stored?Someone mentioned request.headers. Is this correct? I am not able to see any attributes inside this array. <code> ,Display or get the HTTP header attributes in Rails 4
Display or get the HTTP header attributes in rails 4, I have an application developed in Rails and I am trying to see the attributes in the HTTP header. Is there any way to read these attributes? Where are they stored?Someone mentioned request.headers. Is this correct? I am not able to see any attributes inside this array. <code> ,Display or get the HTTP header attributes in Rails 4
Ruby Filter Exclude from Array," Trying to filter some entries from an array. It's not guaranteed they are in the master array, so I'm testing through an iteration. This isn't working. Is there a better way of providing this kind of filter? <code>  total = ['alpha', 'bravo', 'charlie', 'delta', 'echo']hide = ['charlie', 'echo']pick = []for i in total if !hide.include?(i) puts i pick.push(i) endendputs pick",Filter to exclude elements from array
check if date is within the past 7 days Ruby / Sinatra," I have a date in the following format: ""%d-%m-%Y"" (for example, today's date would be 07-09-2015), and I want to see if it is within the past seven days. Can anyone recommend a way? <code> ",Check if date is within the past seven days
Comparing Arrays of Objects Ruby," I have two arrays. They have different attributes. I would like to sort array1 based on array2's order, by name. The result would be: <code>  array1 = [{name: ""apple"", quantity: 2}, {name: ""grape"", quantity: 10}, {name: ""pear"", quantity: 3}]array2 = [{name: ""grape"", freshness: 9}, {name: ""apple"", freshness: 7}, {name: ""pear"", freshness: 10}] array1 = [{name: ""grape"", quantity: 10}, {name: ""apple"", quantity: 2}, {name: ""pear"", quantity: 3}]",Comparing & sorting array of hashes in Ruby
Comparing arrays in Ruby," I have two arrays. They have different attributes. I would like to sort array1 based on array2's order, by name. The result would be: <code>  array1 = [{name: ""apple"", quantity: 2}, {name: ""grape"", quantity: 10}, {name: ""pear"", quantity: 3}]array2 = [{name: ""grape"", freshness: 9}, {name: ""apple"", freshness: 7}, {name: ""pear"", freshness: 10}] array1 = [{name: ""grape"", quantity: 10}, {name: ""apple"", quantity: 2}, {name: ""pear"", quantity: 3}]",Comparing & sorting array of hashes in Ruby
How to seed path to an image?," Organization and Image have a 1-to-1 relationship. Image has a column called filename, which stores the path to a file. I have such a file included in the asset pipeling: app/assets/other/image.jpg. How can I include the path to this file when seeding?I have tried in my seeds file: Both generate the error: I checked with the debugger and can confirm that it's not @organization that is nil.How can I make this work and add the path to the file to the Image model?Update: I tried the following: And I also tried: Upon seeding both attempts produce the error: <code>  @organization = ...@organization.image.create!(filename: File.open('app/assets/other/image.jpg'))# I also tried:# @organization.image.create!(filename: 'app/assets/other/image.jpg') NoMethodError: undefined method `create!' for nil:NilClass @image = Image.create!(organization_id: @organization.id, filename: 'app/assets/other/image.jpg') image = @organization.build_image(filename: 'app/assets/other/image.jpg')image.save CarrierWave::FormNotMultipart: You tried to assign a String or a Pathname to an uploader, for security reasons, this is not allowed.",How to seed the path to an image?
Shopify API: Retreive multiple records via id in a single call," I noticed that in the Shopify API documentation, they mention the possibility to retrieve multiple orders in a single call using ""A comma-separated list of order ids"" as a parameter called ""ids"".Link to section of docs I'm referring to: https://docs.shopify.com/api/order#indexI've been using the shopify_api gem for many years, which is based around Rails ActiveResource. I currently use it with Rails 3.2.13, and it works great.I know how to retrieve a single record: Or many records at once: However, I cannot seem to get it to work using multiple ids. Any ideas what I am doing wrong here? Which issues this GET request: https://xxxxxx.myshopify.com:443/admin/orders.json?ids=123456789,987654321,675849301But gives nothing back, orders = []UPDATE:I've also tried the following suggestions: Which issues this GET request: https://xxxxxx.myshopify.com:443/admin/orders/123456789,987654321,675849301.jsonHowever this only returns the first order 123456789And: Which issues this GET request:https://xxxxxx.myshopify.com:443/admin/orders.json?ids[]=123456789&ids[]=987654321&ids[]=675849301And results in a Bad Request <code>  # params[:id] = ""123456789""order = ShopifyAPI::Order.find(params[:id]) orders = ShopifyAPI::Order.find(:all, :params => {:limit => 250, :page => 2}) # params[:ids] = ""123456789,987654321,675849301"" orders = ShopifyAPI::Order.find(:all, :params => {:ids => params[:ids]}) # params[:ids] = ""123456789,987654321,675849301"" orders = ShopifyAPI::Order.find(params[:ids]) # params[:ids] = ""123456789,987654321,675849301""ids_as_array = params[:ordersSel].split("","")orders = ShopifyAPI::Order.find(:all, :params => {ids: ids_as_array})",Shopify API: Retrieve multiple records via id in a single call
Conditionally Creating Functions in Ruby," I have some code that is run in one of a few different locations: as a command line tool with debug output, as part of a larger program that doesn't take any output, and in a rails environment.There are occasions where I need to make slight changes to the code based on its location, and I realized the following style seems to work: This results in: I've never come across functions that are defined conditionally in Ruby. Is this safe to do?This isn't how I'm structuring most of my code, but there are a few functions that require complete rewrites per-system. <code>  print ""Testing nested functions defined\n""CLI = trueif CLIdef test_print print ""Command Line Version\n""endelse def test_print print ""Release Version\n""endendtest_print() Testing nested functions definedCommand Line Version",Conditionally defining functions in Ruby
Simple Strong parameters rails 4," In the below case, i am trying to use strong parameters. I want to require email_address, password and permit remember_me fields.But using like below it only allows the LAST line in the method Ex:- In below case it only take params.permit(:remember_me) Another Ex:- In this below case, if i rearrange it like below it will take only params.require(:email_address) where am i going wrong ? UPDATEParams hash be like <code>  private def registration_params params.require(:email_address) params.require(:password) params.permit(:remember_me) end def registration_params params.require(:password) params.permit(:remember_me) params.require(:email_address) end { ""utf8"" => """", ""email_address"" => ""test1@gmail.com"", ""password"" => ""password123"", ""remember_me"" => ""true"", ""commit"" => ""Log in"", ""controller"" => ""registration"", ""action"" => ""sign_in""}",Multiple require & permit strong parameters rails 4
Multitple require & permit strong parameters rails 4," In the below case, i am trying to use strong parameters. I want to require email_address, password and permit remember_me fields.But using like below it only allows the LAST line in the method Ex:- In below case it only take params.permit(:remember_me) Another Ex:- In this below case, if i rearrange it like below it will take only params.require(:email_address) where am i going wrong ? UPDATEParams hash be like <code>  private def registration_params params.require(:email_address) params.require(:password) params.permit(:remember_me) end def registration_params params.require(:password) params.permit(:remember_me) params.require(:email_address) end { ""utf8"" => """", ""email_address"" => ""test1@gmail.com"", ""password"" => ""password123"", ""remember_me"" => ""true"", ""commit"" => ""Log in"", ""controller"" => ""registration"", ""action"" => ""sign_in""}",Multiple require & permit strong parameters rails 4
How assets precompile in development environment in ruby on rails?, Why can't we precompile assets in a development environment? I know that sprockets basically compile all assets.When we go in production environment then we run the command: But in the development env we can't do anything for it to compile itself.What are difference in behavior of assets compilation in both environment? <code>  rake assets:precompile,How assets precompile in development environment on ruby on rails?
Rspec.config before(:each) for specific :types," I am trying to get a before(:each) block to run for all specs except type: :feature. The only way I can get it working is to cut-and-paste and have separate config blocks for each type. (:type => :model, :type => :service, etc.)spec/rails_helper.rb Is there a more DRY approach?  <code>  # To speed up tests, stub all Paperclip saving and reading to/from S3config.before(:each, :type => :model) do allow_any_instance_of(Paperclip::Attachment).to receive(:save).and_return(true)end",Rspec.config before(:each) except for specific :types
"What is the difference between execute, test and capture commands in capistrano?"," On SSHkit-Github it's says: All backends support the execute(*args), test(*args) & capture(*args)From SSHkit-Rubydoc, I understand that execute is actually an alias to test?What is the difference between test, execute, capture in Capistrano/SSHKit and when should I use either? <code> ","What is the difference between execute, test and capture commands in Capistrano?"
Ruby: How to use internal/external encoding when importing a yaml file?," How can I load a YAML file regardlessly of its encoding?My YAML file can be encoded in UTF-8 or ANSI (that's what Notepad++ calls it - I guess it's Windows-1252): utf8.yml is encoded in UTF-8, ansi.yml is encoded in ANSI. I load the files as follows: It seems like Ruby doesn't recognize the encoding correctly: because the bytes aren't the same: If I miss Encoding.default_internal = ""utf-8"", the bytes are also different: What happens actually when I don't set the default_internal to utf-8?Which encodings do the strings in both examples have?How can I load a file even if I don't know its encoding? <code>  :key1: :key2: """" # encoding: utf-8Encoding.default_internal = ""utf-8""utf8_load = YAML::load(File.open('utf8.yml'))utf8_load_file = YAML::load_file('utf8.yml')ansi_load = YAML::load(File.open('ansi.yml'))ansi_load_file = YAML::load_file('ansi.yml') utf8_load [:key1][:key2].encoding #=> ""UTF-8""utf8_load_file [:key1][:key2].encoding #=> ""UTF-8""ansi_load [:key1][:key2].encoding #=> ""UTF-8""ansi_load_file [:key1][:key2].encoding #=> ""UTF-8"" utf8_load [:key1][:key2].bytes #=> [195, 164]utf8_load_file [:key1][:key2].bytes #=> [195, 164]ansi_load [:key1][:key2].bytes #=> [239, 191, 189]ansi_load_file [:key1][:key2].bytes #=> [239, 191, 189] utf8_load [:key1][:key2].bytes #=> [195, 131, 194, 164]utf8_load_file [:key1][:key2].bytes #=> [195, 164]ansi_load [:key1][:key2].bytes #=> [195, 164]ansi_load_file [:key1][:key2].bytes #=> [239, 191, 189]",How to use internal/external encoding when importing a YAML file?
Ruby - When to use self in module's methods," My module definition looks like this: To use this method I simply require the file containing this definition so that I can do: and also However, if I need to know the list of methods using RG::Stats.instance_methods I get an empty array. This is because I have used self. If I omit self then RG::Stats.instance_methods gives the list of methods, but I cannot access them anymore.The question is: how to use self in module's method definition? <code>  module RG::Stats def self.sum(a, args = {}) a.inject(0){ |accum, i| accum + i } endend RG::Stats.sum(array) RG::Stats.method(:sum)",When to use self in module's methods
What is the exact rule for the usage of parenthesis in Ruby methods invocation?," In invocation of a method, I could not omit the parenthesis in the following case: What rules should I apply to avoid this? <code>  t=[]t.push {}# => [] # I expected [{}]t.push({})# => [{}] ",What is the rule for the usage of parenthesis in method invocation?
Rails 4 Strong Parameters with Nested Hash," I have the following params and cannot get the strong parameters to work.Here's my basic code, runnable in the Rails console for simplicity: Everything I've read says the following should work, but it only gives me the id and an empty hash of answers_attributes: If I instead manually list c1 and c2 (like below) it works, but this is really stupid because I don't know how many answers the user will supply, and this is a lot of duplication: I've tried replacing c1 and c2 with 0 and 1, but I still have to manually supply the 0 and 1 in my permit statement.How can I permit an unknown length array of nested attributes? <code>  json = { id: 1, answers_attributes: { c1: { id: """", content: ""Hi"" }, c2: { id: """", content: ""Ho"" } }}params = ActionController::Parameters.new(json) params.permit(:id, answers_attributes: [:id, :content])=> { ""id""=>1, ""answers_attributes""=>{} } params.permit(:id, answers_attributes: { c1: [:id, :content], c2: [:id, :content] })=> {""id""=>1, ""answers_attributes""=>{""c1""=>{""id""=>"""", ""content""=>""Hi""}, ""c2""=>{""id""=>"""", ""content""=>""Ho""}}}",Strong parameters with nested hash
Rails ActionView::MissingTemplate controller error with rspec," I have a controller that redirects at certain points under certain conditions. When I pass parameters to my spec helper methods in my controller spec (using the latest RSpec) to trigger these conditions I get a error. Under closer examination when I am supposed to redirect I do a line like the following: And then an exception is thrown in my test suite. I put a break point in the index function of the controller that should be called (that the route I'm redirecting to is pointing to) and it is never called in my test suite. This code seems to work when I just run it in my development environment and on production but for this test it just won't budge. Any ideas?My test looks something like this: EDIT:Update!It seems that changing my redirect to works in RSpec.I do not know why the precedence of the && operator is breaking the spec. Does anyone have an explanation of what is going on here? <code>  ActionView::MissingTemplate redirect_to root_path && return describe TestController do it 'redirects properly with failure' do get :create, provider: 'test', error: 'access_denied' expect(response.body).to match 'test' endend redirect_to root_path and return",RSpec redirect_to and return vs. redirect_to && return
rspec redirect_to and return vs redirect_to && return," I have a controller that redirects at certain points under certain conditions. When I pass parameters to my spec helper methods in my controller spec (using the latest RSpec) to trigger these conditions I get a error. Under closer examination when I am supposed to redirect I do a line like the following: And then an exception is thrown in my test suite. I put a break point in the index function of the controller that should be called (that the route I'm redirecting to is pointing to) and it is never called in my test suite. This code seems to work when I just run it in my development environment and on production but for this test it just won't budge. Any ideas?My test looks something like this: EDIT:Update!It seems that changing my redirect to works in RSpec.I do not know why the precedence of the && operator is breaking the spec. Does anyone have an explanation of what is going on here? <code>  ActionView::MissingTemplate redirect_to root_path && return describe TestController do it 'redirects properly with failure' do get :create, provider: 'test', error: 'access_denied' expect(response.body).to match 'test' endend redirect_to root_path and return",RSpec redirect_to and return vs. redirect_to && return
How to remove line break when reading file in Ruby," I'm trying to get rid of the brackets [] and the new line \n from being printed.My code looks like: I would like the output to look like JoshBobbyGreen.However, it looks like: I've tried using .gsub, chomp and split but maybe I'm using them wrong. <code>  name1 = File.readlines('first.txt').sample(1)name2 = File.readlines('middle.txt').sample(1)name3 = File.readlines('last.txt').sample(1)name = print (name1.strip print name2.strip print name3.strip)puts name [\""Josh\\n\""][\""Bobby\\n\""][\""Green\\n\""]",How to remove line break when reading files in Ruby
Ruby style guide: how to store variables without class or global variables," Rubocop confirms to The Ruby Style Guide. It discourages use of anything besides instance variables. I find it confusing to not use at the least class variables. This snippet from the Style Guide frowns on usage of global variables and instead recommends module instance variables: It makes sense to be wary of using global variables, but using neither global nor class variables blows my mind.Among module instance variables and class instance variables, which is more efficient usage of memory?For example:Option A (Class Instance Variable): Option B (Module Instance Variable): <code>  # bad$foo_bar = 1# goodmodule Foo class << self attr_accessor :bar endendFoo.bar = 1 # things that exist only with lifemodule Life # an instance of life with unique actions/attributes class Person attr_accessor :memories def initialize @memories = [] end def memorize(something) @memories << something end endendbob = Life::Person.newbob.memorize 'birthday'bob.memorize 'wedding'bob.memorize 'anniversary'bob.memories# => [""birthday"", ""wedding"", ""anniversary""] # things that exist only with lifemodule Life # something all living things possess module Memory class << self attr_accessor :memories end end # an instance of life with unique actions/attributes class Person include Memory def initialize Memory.memories = [] end def memorize(something) Memory.memories << something end def memories Memory.memories end endendbob = Life::Person.newbob.memorize 'birthday'bob.memorize 'wedding'bob.memorize 'anniversary'bob.memories# => [""birthday"", ""wedding"", ""anniversary""]",How to avoid class and global variables
Ruby - How to check whether a File exists?," I have an Array of Strings and I want to select only these Strings which are paths to files:My path is ""~/dlds/some_file.ics"" where ~/dlds is a symlink to ~/archive/downloads on my system. The file has following permissions: My code (I tried several variants): I don't know what else to try.I'm running Ruby 2.2.0 or 2.2.2. <code>  -rw-r--r-- ARGV.select do |string| File.file? string # returns false Pathname.new(string).file? # returns false Pathname.new(string).expand_path.file? # returns falseend",How to check whether a File exists
rspec EQ vs EQL in expect tests," What is the difference between using eq and eql in rspec tests? Is there a difference between: and: <code>  it ""adds the correct information to entries"" do # book = AddressBook.new # => Replaced by line 4 book.add_entry('Ada Lovelace', '010.012.1815', 'augusta.king@lovelace.com') new_entry = book.entries[0] expect(new_entry.name).to eq('Ada Lovelace') expect(new_entry.phone_number).to eq('010.012.1815') expect(new_entry.email).to eq('augusta.king@lovelace.com')end it ""adds the correct information to entries"" do # book = AddressBook.new # => Replaced by line 4 book.add_entry('Ada Lovelace', '010.012.1815', 'augusta.king@lovelace.com') new_entry = book.entries[0] expect(new_entry.name).to eql('Ada Lovelace') expect(new_entry.phone_number).to eql('010.012.1815') expect(new_entry.email).to eql('augusta.king@lovelace.com')end",Rspec `eq` vs `eql` in `expect` tests
Using a heredoc as a hash value in current Ruby(~2.2.3/head)," I have a method Embed.toggler that takes a hash argument. With the following code, I'm trying to use a heredoc in the hash. However, I'm getting the following error trace: How I can avoid getting this error? <code>  Embed.toggler({ title: <<-RUBY #{entry['time']} #{entry['group']['who'] #{entry['name']} RUBY content: content }) syntax error, unexpected ':', expecting tSTRING_DEND content: content ^can't find string ""RUBY"" anywhere before EOFsyntax error, unexpected end-of-input, expecting tSTRING_CONTENT or tSTRING_DBEG or tSTRING_DVAR or tSTRING_END title: <<-RUBY ^",Using a heredoc as a hash value
Rails ActiveRecord << Operator," So I have code in my application that appends to a has_many relation with the ""<<"" operator like so: And it seems to work. I never really questioned it or wondered when it calls ""save"" (I guess I never had a strong understanding of when to call ""save"" to begin with).However, it seems that the after_save hook on comments doesn't get activated in my add_comment function, which prompts me to ask:How does the << operator work in activerecord and where can I read more about it?Thanks <code>  class BlogPost < ActiveRecord::Base has_many :comments def add_comment(content) @new_comment = Comment.create(content) self.comments << @new_comment endend",Rails ActiveRecord Shovel (<<) Operator
Rails Shovel (<<) Operator," So I have code in my application that appends to a has_many relation with the ""<<"" operator like so: And it seems to work. I never really questioned it or wondered when it calls ""save"" (I guess I never had a strong understanding of when to call ""save"" to begin with).However, it seems that the after_save hook on comments doesn't get activated in my add_comment function, which prompts me to ask:How does the << operator work in activerecord and where can I read more about it?Thanks <code>  class BlogPost < ActiveRecord::Base has_many :comments def add_comment(content) @new_comment = Comment.create(content) self.comments << @new_comment endend",Rails ActiveRecord Shovel (<<) Operator
Check for consecutive numbers in Ruby," I have an array m of integers. I'm looking for a method to check if the elements of m are consecutive. Is there a way to test for consecutive numbers?I came up with this code intended to work when the array length is four: which incorrectly returns true for [1,1,1,4] or [0,0,0,3]. <code>  m.count == 4 && (m.max-m.min) == 3",Check for consecutive numbers
commandline showing a warning regarding not using bundler while running guard init," In my Rails app am getting this warning when running guard init rspec: I don't understand why it's showing. Is it okay to ignore this warning?Here is my Gemfile: <code>  Warning: you have a Gemfile, but you're not using bundler orRUBYGEMS_GEMDEPS14:54:15 - INFO - Writing new Guardfile to/home/ubuntu/railsprojects/sillyfish/Guardfile 14:54:16 - INFO - rspecguard added to Guardfile, feel free to edit it source 'https://rubygems.org'gem 'rails', '4.2.4'gem 'pg'gem 'sass-rails', '~> 5.0'gem 'uglifier', '>= 1.3.0'gem 'coffee-rails', '~> 4.1.0'gem 'jquery-rails'gem 'turbolinks'gem 'jbuilder', '~> 2.0'gem 'sdoc', '~> 0.4.0', group: :docgroup :development, :test do gem 'rspec-rails', '3.3.3' gem 'guard-rspec', require: false gem 'spring-commands-rspec' gem 'byebug'endgroup :development do gem 'web-console', '~> 2.0' gem 'spring'endgroup :test do gem 'capybara', '2.5.0'end#custom gemsgem 'puma'gem 'bootstrap-sass', '~> 3.3.5'gem 'devise', '~> 3.5.2'",Warning regarding not using bundler when running guard init
"For new ActiveRecord models, why do some has_many :through queries add a (1=0) predicate and distinct clause to the sql query?"," Whenever I instantiate a new ActiveRecord model (one that has not been persisted to the database) and attempt to access some various associations on the built model, the Rails query builder will sometimes:Add a (1=0) predicate to the where clause of the query. Add a 'distinct` clause to the select statement.I think this only occurs when the has_many :through association is joining two or more tables.I want to know why it adds the (1=0) predicate as well as the distinct clause. For the (1=0) predicate, it shouldn't matter if the new model has been saved to the database or not (right?). I have no idea why the distinct clause is being added.I have a simple example below. Here's the sql query for s.attachments: Located somewhere deep in one of the subtrees of the abstract syntax tree that arel builds: Do you know why arel is building the distinct clause and the (1=0) predicate? I can use some workarounds to get what I want - however, I would love to be able to investigate and find out why and how this tree is built.Thanks for any/all advice. <code>  class Assignment < ActiveRecord::Base has_many :assignment_attachments has_many :attachments, through: :assignment_attachmentsendclass AssignmentAttachment < ActiveRecord::Base belongs_to :assignment belongs_to :attachmentendclass Attachment < ActiveRecord::Base has_many :assignment_attachments has_many :assignments, through: :assignment_attachmentsendclass Submission < ActiveRecord::Base belongs_to :assignment has_many :assignment_attachments, through: :assignment has_many :attachments, through: :assignmentends = Submission.new(assignment: Assignment.first)s.assignment #=> #<Assignment ...>s.assignment_attachments #=> [#AssignmentAttachment id: '1'>, #AssignmentAttachment assignment_id: '1', attachment_id: '1' ...>]s.attachments #=> [] SELECT DISTINCT attachments.*FROM attachmentsINNER JOIN assignment_attachments ON attachments.id = assignment_attachments.attachment_idINNER JOIN assignments ON assignment_attachments.assignment_id = assignments.idWHERE assignments.id = 'a0dbfdc7-0d67-4aad-ad06-6a7a5a91d2d0' AND (1=0) # the 'distinct' select clause#<Arel::Nodes::SelectCore:0x007ffe43d45be0 @groups=[], @having=nil, @projections= [#<struct Arel::Attributes::Attribute relation= #<Arel::Table:0x007ffe45a7be58 @aliases=[], @columns=nil, @engine= Attachment(name: string, description: text, created_at: datetime, updated_at: datetime, required: boolean, id: uuid, slug: string, file_types: string), @name=""attachments"", @primary_key=nil, @table_alias=nil>, name=""*"">], @set_quantifier=#<Arel::Nodes::Distinct:0x007ffe43d44dd0>, ...# the (1=0) predicate@wheres= [#<Arel::Nodes::And:0x007ffe43d45028 @children= [#<Arel::Nodes::Equality:0x007ffe45958788 @left= #<struct Arel::Attributes::Attribute relation= #<Arel::Table:0x007ffe45958e68 @aliases=[], @columns=nil, @engine=ActiveRecord::Base, @name=""assignments"", @primary_key=nil, @table_alias=nil>, name=""id"">, @right=#<Arel::Nodes::BindParam:0x007ffe45958878>>, #<Arel::Nodes::Grouping:0x007ffe43d45050 @expr=""1=0"">]>]","For new ActiveRecord models, why do some has_many :through associations add a (1=0) predicate and distinct clause to the sql query?"
NoMethodError: undefined method `mock' for for #<RSpec::ExampleGroups::CompetitionsController::Create:0x00000006d8c0b0>," Variants of this question have been asked multiple times but most of them deal with mocha and I am not using it. I am a newbie to rails so this may seem trivial but I am not able to do use mock in my spec file (which for a controller named competitions). I am stuck at the mock method only so I have not written much else.My spec_helper file has the following contents I am using ruby version 2.2.1 and rails 4.2.1 <code>  require 'rails_helper' require 'spec_helper' describe CompetitionsController do before :each do @fake_c = mock(Competition, :competition_id => 1, :competition_name => 'one', :competition_des => 'any') end describe 'create' do it 'should create new competition' do #CompetitionsController.stub(:create).and_return(mock('Competition')) #post :create, {:id=>""1""} end end end ENV[""RAILS_ENV""] ||= 'test'require 'simplecov'SimpleCov.startrequire File.expand_path(""../../config/environment"", __FILE__)require 'rspec/rails'require 'rspec/autorun'RSpec.configure do |config| # rspec-expectations config goes here. You can use an alternate # assertion/expectation library such as wrong or the stdlib/minitest # assertions if you prefer. config.expect_with :rspec do |expectations| # This option will default to `true` in RSpec 4. It makes the `description` # and `failure_message` of custom matchers include text for helper methods # defined using `chain`, e.g.: # be_bigger_than(2).and_smaller_than(4).description # # => ""be bigger than 2 and smaller than 4"" # ...rather than: # # => ""be bigger than 2"" expectations.include_chain_clauses_in_custom_matcher_descriptions = true end # rspec-mocks config goes here. You can use an alternate test double # library (such as bogus or mocha) by changing the `mock_with` option here. config.mock_with :rspec do |mocks| # Prevents you from mocking or stubbing a method that does not exist on # a real object. This is generally recommended, and will default to # `true` in RSpec 4. mocks.verify_partial_doubles = true endend",NoMethodError: undefined method `mock' for #<RSpec::ExampleGroups::CompetitionsController::Create>
How do you redirect to a different page when the response is in JSON?," I'm using dropzone.js for image uploads. In my coffeescript js file I have the setup for dropzone: Besides from the options, the clicking of the submit button on my form, if there is an image present, will process the image and if there's no image will submit the form anyways. Next is my controller (relevant code): Than my form: So now this setup has everything working. Before I got a Missing Template error because I needed to create a show.json.erb template and after I did that it gives me this in the log: So now I'm wondering when using JSON or just in this scenario all together, how do I redirect to the item show page if it keeps forcing me to use JSON? UPDATEWhen changing my response when item is saved: It does this: So I believe some how I have to do a GET requests as HTML in order for it to do right? UPDATE 2I did the following below and had to create a create.json.erb file as well. It still doesn't redirect me giving me the same results as before. UPDATE 3So doing format.json { redirect_to item_path(@item) and return} does not redirect to the show page but processes in JSON. And doing format.json { redirect_to item_path(@item, format: :html) and return} leaves me with Started GET ""/items/19.html which is wrong since you can't get a page with .html at the end. UPDATE 3Still no luck with any variation of: I'm thinking I have to redirect with window.location which is apart of JavaScript, somewhere in my code but need to do more research. I don't care if I can get this working in js or html format as long as it works. UPDATE 4Okay, so I was able to get the same behavior in a brand new test app at my GitHub here: https://github.com/justintech/dropzonetest. This one throws the Invalid JSON response from server. So I'm guessing that my real app does the same thing but it just glitches and passes as a complete response. weird. Feel free to check it out. <code>  Dropzone.autoDiscover = falsedropzone = new Dropzone('#item-form', maxFiles: 1 maxFilesize: 1 paramName: 'item[image]' headers: ""X-CSRF-Token"" : $('meta[name=""csrf-token""]').attr('content') addRemoveLinks: true clickable: '#image-preview' previewsContainer: '#image-preview' thumbnailWidth: 200 thumbnailHeight: 200 parallelUploads: 100; autoProcessQueue: false uploadMultiple: false)$('#item-submit').click (e) -> e.preventDefault() e.stopPropagation() if dropzone.getQueuedFiles().length > 0 dropzone.processQueue() else $('#item-form').submit() returnreturn def create @item = current_user.items.build(item_params) respond_to do |format| if @item.save format.html { redirect_to @item, notice: 'Item was successfully created.' } format.json { render :show, status: :created, location: @item } else format.html { render :new } format.json { render json: @item.errors, status: :unprocessable_entity } end end end = form_for @item, html: {id: 'item-form', class: 'form', multipart: true} do |f| = f.text_field :name, class: 'form-control' %main#image-preview Add a Photo .fallback = f.file_field :image, multiple: false= f.submit 'Done', id: 'item-submit' Started POST ""/items"" for 127.0.0.1 at 2015-10-16 21:36:18 -0700Processing by ItemsController#create as JSON................... (10.7ms) COMMIT Item Store (142.4ms) {""id"":12} Rendered items/show.json.erb (0.4ms)Completed 201 Created in 2759ms (Views: 6.1ms | Searchkick: 142.4ms | ActiveRecord: 11.9ms) if @item.save format.html { redirect_to @item } format.json { redirect_to @item }else Started GET ""/items/13"" for 127.0.0.1 at 2015-10-16 22:54:29 -0700Processing by ItemsController#show as JSON Parameters: {""id""=>""13""} User Load (0.4ms) SELECT ""users"".* FROM ""users"" WHERE ""users"".""id"" = $1 ORDER BY ""users"".""id"" ASC LIMIT 1 [[""id"", 2]] Item Load (0.4ms) SELECT ""items"".* FROM ""items"" WHERE ""items"".""id"" = $1 LIMIT 1 [[""id"", 13]] User Load (0.3ms) SELECT ""users"".* FROM ""users"" WHERE ""users"".""id"" = $1 LIMIT 1 [[""id"", 2]] Rendered items/show.json.erb (0.7ms)Completed 200 OK in 137ms (Views: 7.5ms | ActiveRecord: 25.2ms) if @item.save format.html { redirect_to @item } format.json { redirect_to item_path(@item, format: :html) } and returnelseStarted POST ""/items"" for 127.0.0.1 at 2015-10-16 23:36:13 -0700Processing by ItemsController#create as JSON............ (12.9ms) COMMIT Item Store (426.1ms) {""id"":18} Rendered items/create.json.erb (19.6ms)Completed 200 OK in 3892ms..... format.json {render :show, status: :created, location: item_url(@item, format: :html )}",How do you redirect to a page when the response keeps returning in JSON?
How do you redirect to a different page when the response is always in JSON?," I'm using dropzone.js for image uploads. In my coffeescript js file I have the setup for dropzone: Besides from the options, the clicking of the submit button on my form, if there is an image present, will process the image and if there's no image will submit the form anyways. Next is my controller (relevant code): Than my form: So now this setup has everything working. Before I got a Missing Template error because I needed to create a show.json.erb template and after I did that it gives me this in the log: So now I'm wondering when using JSON or just in this scenario all together, how do I redirect to the item show page if it keeps forcing me to use JSON? UPDATEWhen changing my response when item is saved: It does this: So I believe some how I have to do a GET requests as HTML in order for it to do right? UPDATE 2I did the following below and had to create a create.json.erb file as well. It still doesn't redirect me giving me the same results as before. UPDATE 3So doing format.json { redirect_to item_path(@item) and return} does not redirect to the show page but processes in JSON. And doing format.json { redirect_to item_path(@item, format: :html) and return} leaves me with Started GET ""/items/19.html which is wrong since you can't get a page with .html at the end. UPDATE 3Still no luck with any variation of: I'm thinking I have to redirect with window.location which is apart of JavaScript, somewhere in my code but need to do more research. I don't care if I can get this working in js or html format as long as it works. UPDATE 4Okay, so I was able to get the same behavior in a brand new test app at my GitHub here: https://github.com/justintech/dropzonetest. This one throws the Invalid JSON response from server. So I'm guessing that my real app does the same thing but it just glitches and passes as a complete response. weird. Feel free to check it out. <code>  Dropzone.autoDiscover = falsedropzone = new Dropzone('#item-form', maxFiles: 1 maxFilesize: 1 paramName: 'item[image]' headers: ""X-CSRF-Token"" : $('meta[name=""csrf-token""]').attr('content') addRemoveLinks: true clickable: '#image-preview' previewsContainer: '#image-preview' thumbnailWidth: 200 thumbnailHeight: 200 parallelUploads: 100; autoProcessQueue: false uploadMultiple: false)$('#item-submit').click (e) -> e.preventDefault() e.stopPropagation() if dropzone.getQueuedFiles().length > 0 dropzone.processQueue() else $('#item-form').submit() returnreturn def create @item = current_user.items.build(item_params) respond_to do |format| if @item.save format.html { redirect_to @item, notice: 'Item was successfully created.' } format.json { render :show, status: :created, location: @item } else format.html { render :new } format.json { render json: @item.errors, status: :unprocessable_entity } end end end = form_for @item, html: {id: 'item-form', class: 'form', multipart: true} do |f| = f.text_field :name, class: 'form-control' %main#image-preview Add a Photo .fallback = f.file_field :image, multiple: false= f.submit 'Done', id: 'item-submit' Started POST ""/items"" for 127.0.0.1 at 2015-10-16 21:36:18 -0700Processing by ItemsController#create as JSON................... (10.7ms) COMMIT Item Store (142.4ms) {""id"":12} Rendered items/show.json.erb (0.4ms)Completed 201 Created in 2759ms (Views: 6.1ms | Searchkick: 142.4ms | ActiveRecord: 11.9ms) if @item.save format.html { redirect_to @item } format.json { redirect_to @item }else Started GET ""/items/13"" for 127.0.0.1 at 2015-10-16 22:54:29 -0700Processing by ItemsController#show as JSON Parameters: {""id""=>""13""} User Load (0.4ms) SELECT ""users"".* FROM ""users"" WHERE ""users"".""id"" = $1 ORDER BY ""users"".""id"" ASC LIMIT 1 [[""id"", 2]] Item Load (0.4ms) SELECT ""items"".* FROM ""items"" WHERE ""items"".""id"" = $1 LIMIT 1 [[""id"", 13]] User Load (0.3ms) SELECT ""users"".* FROM ""users"" WHERE ""users"".""id"" = $1 LIMIT 1 [[""id"", 2]] Rendered items/show.json.erb (0.7ms)Completed 200 OK in 137ms (Views: 7.5ms | ActiveRecord: 25.2ms) if @item.save format.html { redirect_to @item } format.json { redirect_to item_path(@item, format: :html) } and returnelseStarted POST ""/items"" for 127.0.0.1 at 2015-10-16 23:36:13 -0700Processing by ItemsController#create as JSON............ (12.9ms) COMMIT Item Store (426.1ms) {""id"":18} Rendered items/create.json.erb (19.6ms)Completed 200 OK in 3892ms..... format.json {render :show, status: :created, location: item_url(@item, format: :html )}",How do you redirect to a page when the response keeps returning in JSON?
Version sort (with beta) in ruby," How do I sort a list of versions in Ruby? I've seen stuff about natural sort, but this is a step beyond that.Input is a bunch of strings like this: I can almost do it with the naturally gem: Problem: 10.0.0b3 is sorted after 10.0.0b12; 10.0.0b3 should be first.Anyone have a way that works? Other languages are helpful too! <code>  input = ['10.0.0b12', '10.0.0b3', '10.0.0a2', '9.0.10', '9.0.3'] require 'naturally'Naturally.sort(input)=> [""9.0.3"", ""9.0.10"", ""10.0.0a2"", ""10.0.0b12"", ""10.0.0b3""] ","Version sort (with alphas, betas, etc.) in ruby"
Program to change vowel to its index number in string in ruby," This is a program to change a vowel into its index: Can anyone tell me why it's failing to pass 'Codewars is the best site in the world'?When I try to pass a testcase like: it outputs something like:  <code>  def vowel_2_index(string) return '' if string.nil? arr = string.enum_for(:scan,/[aeiou]/i).map {Regexp.last_match.begin(0) } s_arr = arr.map{|x| x+1 } arr.each_with_index{|x,y| string[x] = s_arr[y].to_s} string end Test.assert_equals(vowel_2_index('Codewars is the best site in the world'),'C2d4w6rs 10s th15 b18st s23t25 27n th32 w35rld') ""C2d4w6rs 10s t15e18bes232527ite32i35 the world""",Program to change vowel to its index number in string in Ruby
what does class_methods do in concerns?," I am reading some codes which use the concerns in Rails 4.I read some articles to say, if we would like to include class methodsusing module ClassMethods, but the code I read using something like: <code>  class_methods do def **** endend",What does class_methods do in concerns?
Does doulbe less than minus mean anything in ruby?," I am trying to get myself familiar with ruby syntax and coding styles(i am a newbie). I came across a code that uses <<-, what does this mean in Ruby? Code is This is just a section of the whole code. Any help would be appreciated. <code>  def expectation_message(expectation) <<-FE #{expectation.message} #{expectation.stack} FE end","Does double less than minus ""<<-"" sign mean anything in ruby?"
Does double less than minus mean anything in ruby?," I am trying to get myself familiar with ruby syntax and coding styles(i am a newbie). I came across a code that uses <<-, what does this mean in Ruby? Code is This is just a section of the whole code. Any help would be appreciated. <code>  def expectation_message(expectation) <<-FE #{expectation.message} #{expectation.stack} FE end","Does double less than minus ""<<-"" sign mean anything in ruby?"
Searchkick error: Faraday::ConnectionFailed in PostsController#search," I am trying to add Searchkick gem in my app with Ruby on Rails but when i type a word in my search box i get this error in my app. I have installed elasticsearch and the latest version of java as required but still the error is the same. This is the error i am getting : Faraday::ConnectionFailed in PostsController#search Connection refused - connect(2) for ""localhost"" port 9200Here's my code:The Terminal shows that elastic search is installed:Terminal posts_controller.rb model/post.rb views/post/index.html.erb views/search.html.erb config/routes.rb This is the screen i am getting with the error shown : <code>  Warning: elasticsearch-1.7.3 already installed class PostsController < ApplicationController before_action :set_post, only: [:show, :edit, :update, :destroy]def search if params[:search].present? @posts = Post.search(params[:search]) else @posts = Post.all endend # GET /posts # GET /posts.json def index @posts = Post.all end # GET /posts/1 # GET /posts/1.json def show end # GET /posts/new def new @post = Post.new end # GET /posts/1/edit def edit end # POST /posts # POST /posts.json def create @post = Post.new(post_params) respond_to do |format| if @post.save format.html { redirect_to @post, notice: 'Post was successfully created.' } format.json { render :show, status: :created, location: @post } else format.html { render :new } format.json { render json: @post.errors, status: :unprocessable_entity } end end end # PATCH/PUT /posts/1 # PATCH/PUT /posts/1.json def update respond_to do |format| if @post.update(post_params) format.html { redirect_to @post, notice: 'Post was successfully updated.' } format.json { render :show, status: :ok, location: @post } else format.html { render :edit } format.json { render json: @post.errors, status: :unprocessable_entity } end end end # DELETE /posts/1 # DELETE /posts/1.json def destroy @post.destroy respond_to do |format| format.html { redirect_to posts_url, notice: 'Post was successfully destroyed.' } format.json { head :no_content } end end private # Use callbacks to share common setup or constraints between actions. def set_post @post = Post.find(params[:id]) end # Never trust parameters from the scary internet, only allow the white list through. def post_params params.require(:post).permit(:name) endend class Post < ActiveRecord::Base searchkickend <p id=""notice""><%= notice %></p><%= form_tag search_posts_path, method: :get, class: ""navbar-form navbar-right"", role: ""search"" do %> <p> <%= text_field_tag :search, params[:search], class: ""form-control"" %> <%= submit_tag ""Search"", name: nil, class: ""btn btn-default"" %> </p> <% end %><h1>Listing Posts</h1><table> <thead> <tr> <th>Name</th> <th colspan=""3""></th> </tr> </thead> <tbody> <% @posts.each do |post| %> <tr> <td><%= post.name %></td> <td><%= link_to 'Show', post %></td> <td><%= link_to 'Edit', edit_post_path(post) %></td> <td><%= link_to 'Destroy', post, method: :delete, data: { confirm: 'Are you sure?' } %></td> </tr> <% end %> </tbody></table><br><%= link_to 'New Post', new_post_path %> <table> <thead> <tr> <th>Search Result</th> <th colspan=""3""></th> </tr> </thead> <tbody> <% @posts.each do |post| %> <tr> <td><%= post.name %></td> <td><%= link_to 'Show', post %></td> <td><%= link_to 'Edit', edit_post_path(post) %></td> <td><%= link_to 'Destroy', post, method: :delete, data: { confirm: 'Are you sure?' } %></td> </tr> <% end %> </tbody></table> Rails.application.routes.draw do resources :posts do collection do get 'search' endendend","Faraday::ConnectionFailed, Connection refused - connect(2) for localhost port 9200 Error Ruby on Rails"
"Ruby: Split string into an array by comma, unless comma is inside quotes"," Given a string of an array in Ruby with some items in quotes that contain commas: How can I get an array of: <code>  my_string.inspect# => ""\""hey, you\"", 21"" [""hey, you"", "" 21""] ","Split string into an array by comma, unless comma is inside quotes"
How to use/add custom colors in the Spreadsheet gem?," I need to use custom color and pattern_fg_color (HEX: 0x00adb1, RGB: 0,173,177). I was following advice from here, but it didn't work out for me (I am using it in another library based on the Spreadsheet gem): Test example: And I get the following error: unknown color 'enterprise'Any suggestions would be appreciated greatly. <code>  Spreadsheet::Excel::Internals::SEDOC_ROLOC.update(enterprise: 0x00adb1)Spreadsheet::Column.singleton_class::COLORS << :enterprise Spreadsheet::Format.new(pattern_fg_color: :enterprise)",Use custom colors with Spreadsheet gem
How to use/add custom colours in the Spreadsheet gem?," I need to use custom color and pattern_fg_color (HEX: 0x00adb1, RGB: 0,173,177). I was following advice from here, but it didn't work out for me (I am using it in another library based on the Spreadsheet gem): Test example: And I get the following error: unknown color 'enterprise'Any suggestions would be appreciated greatly. <code>  Spreadsheet::Excel::Internals::SEDOC_ROLOC.update(enterprise: 0x00adb1)Spreadsheet::Column.singleton_class::COLORS << :enterprise Spreadsheet::Format.new(pattern_fg_color: :enterprise)",Use custom colors with Spreadsheet gem
How to use custom colors in the Spreadsheet gem?," I need to use custom color and pattern_fg_color (HEX: 0x00adb1, RGB: 0,173,177). I was following advice from here, but it didn't work out for me (I am using it in another library based on the Spreadsheet gem): Test example: And I get the following error: unknown color 'enterprise'Any suggestions would be appreciated greatly. <code>  Spreadsheet::Excel::Internals::SEDOC_ROLOC.update(enterprise: 0x00adb1)Spreadsheet::Column.singleton_class::COLORS << :enterprise Spreadsheet::Format.new(pattern_fg_color: :enterprise)",Use custom colors with Spreadsheet gem
Use custom colors with the Spreadsheet gem," I need to use custom color and pattern_fg_color (HEX: 0x00adb1, RGB: 0,173,177). I was following advice from here, but it didn't work out for me (I am using it in another library based on the Spreadsheet gem): Test example: And I get the following error: unknown color 'enterprise'Any suggestions would be appreciated greatly. <code>  Spreadsheet::Excel::Internals::SEDOC_ROLOC.update(enterprise: 0x00adb1)Spreadsheet::Column.singleton_class::COLORS << :enterprise Spreadsheet::Format.new(pattern_fg_color: :enterprise)",Use custom colors with Spreadsheet gem
custom sort array of hash based on multiple key value pair in ruby," I have an array of hashes which I need to sort based on two different key value pairs.Here is the array I am trying to sort: I want to sort array_group so I have items with status: true first, followed by status: false, followed by the items with operator: _NOT_PRESENT and finally sort it based on name, resulting in something like: Is there a way that I can get this done without creating sub-arrays and sorting them and concatenating them back? <code>  array_group = [ {operator: OR, name: ""some string"", status: false}, {operator: AND, name: ""other string"", status: false}, {operator: _NOT_PRESENT, name: ""another string"", status: true}, {operator: AND, name: ""just string"", status: true}] array_group = [ {operator: AND, name: ""just string"", status: true}, {operator: AND, name: ""other string"", status: false}, {operator: OR, name: ""some string"", status: false}, {operator: _NOT_PRESENT, name: ""another string"", status: true},]",Custom sort array of hashes based on multiple key/value pairs
RSpec - Using described_class when including a module under test," I am writing some rspec's to test some modules correctly implement their behaviour.The module looks like this: I can't do this in RSpec: At the point #described_class is called, it can no longer be resolved because self is an instance of Class, which doesn't have a #describe_class method. So I am forced to repeat myself: Or use it in the spec in a different way to how it's used by my clients: This has the same end effect, but something in me thinks that if I'm asking my clients to include Under::Test, then the tests should look as close to how it's used by them as possible.I can use the closure property to fix this, but I wonder if it's no better. Does this have code smell? Note, I also asked in r/ruby on reddit, someone there suggested: which might be how I go. <code>  module Under::Test def some_behaviour endend describe Under::Test do subject {Class.new{include described_class}.new} subject {Class.new{include Under::Test}.new} subject {Object.new.extend described_class} describe Under::Test do subject {mudule = described_class;Class.new{include mudule}.new} it 'has some behaviour' do expect(subject.some_behaviour).to be endend subject {Class.new.include(described_class).new}",Using described_class when including a module under test
How to use controller 1's helper method to controller 2 -Rails4," I have two controllers, i.e1) carts_controller2) orders_controller Note: method3 is using method1 and method2.CartsController has showcart.html.erb view which is using method3 and works fine.Now in order's view, I need to display cart (showcart.html.erb) but as the helper method3 is defined in carts_controller so it cannot access it.How to fix it ? <code>  class CartsController < ApplicationController helper_method :method3 def method1 end def method2 end def method3 # using method1 and method2 endend",Rails: Methods shared by multiple controllers
Rails4: How to use controller 1's helper method in controller 2," I have two controllers, i.e1) carts_controller2) orders_controller Note: method3 is using method1 and method2.CartsController has showcart.html.erb view which is using method3 and works fine.Now in order's view, I need to display cart (showcart.html.erb) but as the helper method3 is defined in carts_controller so it cannot access it.How to fix it ? <code>  class CartsController < ApplicationController helper_method :method3 def method1 end def method2 end def method3 # using method1 and method2 endend",Rails: Methods shared by multiple controllers
Rails4: Methods shared by multiple controllers," I have two controllers, i.e1) carts_controller2) orders_controller Note: method3 is using method1 and method2.CartsController has showcart.html.erb view which is using method3 and works fine.Now in order's view, I need to display cart (showcart.html.erb) but as the helper method3 is defined in carts_controller so it cannot access it.How to fix it ? <code>  class CartsController < ApplicationController helper_method :method3 def method1 end def method2 end def method3 # using method1 and method2 endend",Rails: Methods shared by multiple controllers
CollectionProxy vs AssosiationRelation, I am wondering about the difference between ActiveRecord::Associations::CollectionProxy and ActiveRecord::AssociationRelation. So if I do:v = Vehicle.newv.wheels # => #<ActiveRecord::Associations::CollectionProxy []>v.wheels.all # => #<ActiveRecord::AssociationRelation []>I have no idea what is the difference between them and why this is implemented this way? <code>  class Vehicle < ActiveRecord::Base has_many :wheelsendclass Wheel < ActiveRecord::Base belongs_to :vehicleend,CollectionProxy vs AssociationRelation
How To Render Correct JSON format," I'm sure I have a basic rescue_from question here but, I am trying to get a desired output when an exception is raised when my Validation fails but I can't seem to figure it out.Currently my ApplicationController is as follows: and the JSON output I get is: The desired ouput I would like to get (or something similar) is as follows: I am not sure how to get this. I get the desired output when I comment out the rescue_from method in the ApplicationController and set the my RecordController create method like this: Although this is what I want, I would have to go to every controller and add this but this would not be a DRY method... I would rather centralize this in the ApplicationControllerAny help is appreciated. Thanks!I have checked Correct JSON format & How can I Pretty format my JSON output in Ruby on Rails? <code>  class ApplicationController < ActionController::API include ActionController::Serialization rescue_from ActiveRecord::RecordInvalid do |e| render json: {error: e.message}, status: 404 end end { ""error"": ""Validation failed: Organization can't be blank, Description can't be blank, Artwork can't be blank, Language code can't be blank, Copyright can't be blank, Right to left is not included in the list, Digital audio is not included in the list, Portion is not included in the list, Electronic text is not included in the list, Old is not included in the list, New is not included in the list""} { ""organization_id"": [ ""can't be blank"" ], ""description"": [ ""can't be blank"" ], ""artwork"": [ ""can't be blank"" ], ""language_code"": [ ""can't be blank"" ], ""copyright"": [ ""can't be blank"" ], ""right_to_left"": [ ""is not included in the list"" ], ""digital_audio"": [ ""is not included in the list"" ], ""portion"": [ ""is not included in the list"" ], ""electronic_text"": [ ""is not included in the list"" ], ""old"": [ ""is not included in the list"" ], ""new"": [ ""is not included in the list"" ]} def create r = Record.create(record_params) r.save if r.save render json: r else render json: r.errors end end",How To Render Correct JSON format with raised error
Can I built this query using ActiveRecord," I am learning ActiveRecord. Can I build this query? I would like to use the AR api as much as possible but I have not yet gotten the above to work using just AR.Thanks! <code>  @sales_by_product = ActiveRecord::Base.connection.execute(""SELECT it.name, it.id, it.seller_id, pur.volume, pur.sales FROM items it INNER JOIN (SELECT item_id, COUNT(*) AS volume, SUM(price) AS sales, workflow_state AS state FROM purchases WHERE workflow_state = 'payment_successful' GROUP BY item_id, workflow_state) pur ON pur.item_id = it.id WHERE it.seller_id = '"" + current_user.id.to_s + ""'"")",Count and Sum in Join sub query - can I build this sql query using ActiveRecord?
Can I build this query using ActiveRecord," I am learning ActiveRecord. Can I build this query? I would like to use the AR api as much as possible but I have not yet gotten the above to work using just AR.Thanks! <code>  @sales_by_product = ActiveRecord::Base.connection.execute(""SELECT it.name, it.id, it.seller_id, pur.volume, pur.sales FROM items it INNER JOIN (SELECT item_id, COUNT(*) AS volume, SUM(price) AS sales, workflow_state AS state FROM purchases WHERE workflow_state = 'payment_successful' GROUP BY item_id, workflow_state) pur ON pur.item_id = it.id WHERE it.seller_id = '"" + current_user.id.to_s + ""'"")",Count and Sum in Join sub query - can I build this sql query using ActiveRecord?
Check if two files have same content, I would like to use Ruby to check if each of several thousand pairs of files contain identical information. Could someone point me in the right direction? <code> ,How to bulk check whether files have the same content
How to check whether two files have the same content, I would like to use Ruby to check if each of several thousand pairs of files contain identical information. Could someone point me in the right direction? <code> ,How to bulk check whether files have the same content
Library not loaded: /usr/local/lib/libmysqlclient.18.dylib," Error: In Gemfile: gem 'mysql2'$ ls -al /usr/local/lib/libmysql* $ ls -al /usr/local/Cellar/mysql/5.7.9/lib/ As you see I'm having libmysqlclient.20.dylib, it's 20 not 18, otherwise I'd follow the solution here.I've recently upgraded to El Capitan but not sure it that's the cause.UPDATE:Thanks to @Rashmirathi for the hint to re-install the gem.Just wanted to note, I needed also to specify in Gemfile as: Otherwise I had error: Specified 'mysql2' for database adapter, but the gem is not loaded. Add gem 'mysql2' to your Gemfile (and ensure its version is at the minimum required by ActiveRecord).But finally I got error: Mysql2::Error Your password has expired. To log in you must change it using a client that supports expired passwords.Which is solved by setting up a password again: <code>  /Users/askar/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/mysql2-0.3.20/lib/mysql2.rb:31:in `require': dlopen(/Users/askar/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/extensions/x86_64-darwin-14/2.2.0-static/mysql2-0.3.20/mysql2/mysql2.bundle, 9): Library not loaded: /usr/local/lib/libmysqlclient.18.dylib (LoadError) Referenced from: /Users/askar/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/extensions/x86_64-darwin-14/2.2.0-static/mysql2-0.3.20/mysql2/mysql2.bundle Reason: image not found - /Users/askar/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/extensions/x86_64-darwin-14/2.2.0-static/mysql2-0.3.20/mysql2/mysql2.bundle lrwxr-xr-x 1 askar admin 49 Nov 13 10:48 /usr/local/lib/libmysqlclient.20.dylib -> ../Cellar/mysql/5.7.9/lib/libmysqlclient.20.dyliblrwxr-xr-x 1 askar admin 42 Nov 13 10:48 /usr/local/lib/libmysqlclient.a -> ../Cellar/mysql/5.7.9/lib/libmysqlclient.alrwxr-xr-x 1 askar admin 46 Nov 13 10:48 /usr/local/lib/libmysqlclient.dylib -> ../Cellar/mysql/5.7.9/lib/libmysqlclient.dyliblrwxr-xr-x 1 askar admin 37 Nov 13 10:48 /usr/local/lib/libmysqld.a -> ../Cellar/mysql/5.7.9/lib/libmysqld.alrwxr-xr-x 1 askar admin 44 Nov 13 10:48 /usr/local/lib/libmysqlservices.a -> ../Cellar/mysql/5.7.9/lib/libmysqlservices.a total 84392drwxr-xr-x 9 askar admin 306 Nov 12 22:16 .drwxr-xr-x 14 askar admin 476 Nov 13 10:48 ..-r--r--r-- 1 askar admin 3780168 Nov 13 10:48 libmysqlclient.20.dylib-r--r--r-- 1 askar admin 4280752 Nov 12 22:16 libmysqlclient.alrwxr-xr-x 1 askar admin 23 Nov 12 22:16 libmysqlclient.dylib -> libmysqlclient.20.dylib-r--r--r-- 1 askar admin 35126528 Nov 12 22:16 libmysqld.a-r--r--r-- 1 askar admin 9048 Nov 12 22:16 libmysqlservices.adrwxr-xr-x 3 askar admin 102 Nov 13 10:48 pkgconfigdrwxr-xr-x 43 askar admin 1462 Nov 12 22:17 plugindrwxr-xr-x 43 askar admin 1462 Nov 12 22:17 plugin gem 'mysql2', '~> 0.3.18' SET PASSWORD=PASSWORD('your_password');",El Capitan upgrade: Library not loaded: /usr/local/lib/libmysqlclient.18.dylib
El-Captain upgrade: Library not loaded: /usr/local/lib/libmysqlclient.18.dylib," Error: In Gemfile: gem 'mysql2'$ ls -al /usr/local/lib/libmysql* $ ls -al /usr/local/Cellar/mysql/5.7.9/lib/ As you see I'm having libmysqlclient.20.dylib, it's 20 not 18, otherwise I'd follow the solution here.I've recently upgraded to El Capitan but not sure it that's the cause.UPDATE:Thanks to @Rashmirathi for the hint to re-install the gem.Just wanted to note, I needed also to specify in Gemfile as: Otherwise I had error: Specified 'mysql2' for database adapter, but the gem is not loaded. Add gem 'mysql2' to your Gemfile (and ensure its version is at the minimum required by ActiveRecord).But finally I got error: Mysql2::Error Your password has expired. To log in you must change it using a client that supports expired passwords.Which is solved by setting up a password again: <code>  /Users/askar/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/mysql2-0.3.20/lib/mysql2.rb:31:in `require': dlopen(/Users/askar/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/extensions/x86_64-darwin-14/2.2.0-static/mysql2-0.3.20/mysql2/mysql2.bundle, 9): Library not loaded: /usr/local/lib/libmysqlclient.18.dylib (LoadError) Referenced from: /Users/askar/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/extensions/x86_64-darwin-14/2.2.0-static/mysql2-0.3.20/mysql2/mysql2.bundle Reason: image not found - /Users/askar/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/extensions/x86_64-darwin-14/2.2.0-static/mysql2-0.3.20/mysql2/mysql2.bundle lrwxr-xr-x 1 askar admin 49 Nov 13 10:48 /usr/local/lib/libmysqlclient.20.dylib -> ../Cellar/mysql/5.7.9/lib/libmysqlclient.20.dyliblrwxr-xr-x 1 askar admin 42 Nov 13 10:48 /usr/local/lib/libmysqlclient.a -> ../Cellar/mysql/5.7.9/lib/libmysqlclient.alrwxr-xr-x 1 askar admin 46 Nov 13 10:48 /usr/local/lib/libmysqlclient.dylib -> ../Cellar/mysql/5.7.9/lib/libmysqlclient.dyliblrwxr-xr-x 1 askar admin 37 Nov 13 10:48 /usr/local/lib/libmysqld.a -> ../Cellar/mysql/5.7.9/lib/libmysqld.alrwxr-xr-x 1 askar admin 44 Nov 13 10:48 /usr/local/lib/libmysqlservices.a -> ../Cellar/mysql/5.7.9/lib/libmysqlservices.a total 84392drwxr-xr-x 9 askar admin 306 Nov 12 22:16 .drwxr-xr-x 14 askar admin 476 Nov 13 10:48 ..-r--r--r-- 1 askar admin 3780168 Nov 13 10:48 libmysqlclient.20.dylib-r--r--r-- 1 askar admin 4280752 Nov 12 22:16 libmysqlclient.alrwxr-xr-x 1 askar admin 23 Nov 12 22:16 libmysqlclient.dylib -> libmysqlclient.20.dylib-r--r--r-- 1 askar admin 35126528 Nov 12 22:16 libmysqld.a-r--r--r-- 1 askar admin 9048 Nov 12 22:16 libmysqlservices.adrwxr-xr-x 3 askar admin 102 Nov 13 10:48 pkgconfigdrwxr-xr-x 43 askar admin 1462 Nov 12 22:17 plugindrwxr-xr-x 43 askar admin 1462 Nov 12 22:17 plugin gem 'mysql2', '~> 0.3.18' SET PASSWORD=PASSWORD('your_password');",El Capitan upgrade: Library not loaded: /usr/local/lib/libmysqlclient.18.dylib
regular expression to find text within brackets with exceptions," I have a regex /^\[(text:\s*.+?\s*)\]/mi that currently works in capturing text in brackets that begin with text:. Here is an example where it works: Now, I would like to add an exception so that it allows certain brackets like in the case below: Basically, I need it to allow the ![](/some/path) brackets in the match. Any help would be greatly appreciated. Thanks.Update:Here are some cases where the text inside the brackets should be matched: Here are some cases where it should not match: <code>  [text: here is my text that iscaptured within the brackets.] [text: here is my text that iscaptured within the bracketsand also include ![](/some/path)] [text: here is my text that iscaptured within the bracketsand also include ![](/some/path)][text: here is my text that iscaptured within the bracketsand also include ![](/some/path) and some more text][text: ![](/some/path)]![text: cat] [text: here is my text that iscaptured within the bracketsand also include ![invalid syntax](/some/path)][text: here is my text that iscaptured within the bracketsand also include ![] (/some/path)][text: here is my text that iscaptured within the bracketsand also include ! [](/some/path)][text: here is my text that iscaptured within the bracketsand also include ! [] (/some/path)]",How to find text within brackets with some exceptions by regular expressions?
How to find a text within brackets with some exceptions by regular expressions?," I have a regex /^\[(text:\s*.+?\s*)\]/mi that currently works in capturing text in brackets that begin with text:. Here is an example where it works: Now, I would like to add an exception so that it allows certain brackets like in the case below: Basically, I need it to allow the ![](/some/path) brackets in the match. Any help would be greatly appreciated. Thanks.Update:Here are some cases where the text inside the brackets should be matched: Here are some cases where it should not match: <code>  [text: here is my text that iscaptured within the brackets.] [text: here is my text that iscaptured within the bracketsand also include ![](/some/path)] [text: here is my text that iscaptured within the bracketsand also include ![](/some/path)][text: here is my text that iscaptured within the bracketsand also include ![](/some/path) and some more text][text: ![](/some/path)]![text: cat] [text: here is my text that iscaptured within the bracketsand also include ![invalid syntax](/some/path)][text: here is my text that iscaptured within the bracketsand also include ![] (/some/path)][text: here is my text that iscaptured within the bracketsand also include ! [](/some/path)][text: here is my text that iscaptured within the bracketsand also include ! [] (/some/path)]",How to find text within brackets with some exceptions by regular expressions?
DateTime.strptime returns 'invalid date' for weekday/time string," Why won't Ruby's strptime convert this to a DateTime object: While these work? <code>  DateTime.strptime('Monday 10:20:20', '%A %H:%M:%S')# => ArgumentError: invalid date DateTime.strptime('Wednesday', '%A')# => #<DateTime: 2015-11-18T00:00:00+00:00 ((2457345j,0s,0n),+0s,2299161j)>DateTime.strptime('10:20:20', '%H:%M:%S')# => #<DateTime: 2015-11-18T10:20:20+00:00 ((2457345j,37220s,0n),+0s,2299161j)>",`DateTime.strptime` returns invalid date for weekday/time string
"Typeahead works in rails app, but javascript error on nearly every request"," The type ahead functionality works where it is supposed to. The issue though is that the type ahead functionality is making the JSON request on every request for the data when it should really only happen for one specific request.I have the following controller: I have the following in my javascript file: And just for completion, here is the one place where I want this functionality to happen: In this form: Here is my relevant route in config/routes.rb My specific question is: How can I ensure that the GET ""/agencies/get_unique_agency_names"" is only called when it is supposed to? Right now it is appending this JSON request for every request. I only want the JSON request to happen for one specific request.Twitter's Type Ahead Examples <code>  #controllers/agencies_controller.rbclass AgenciesController < ApplicationController def get_unique_agency_names @unique_agency_names = Agency.uniq.pluck(:name) respond_to do |format| format.json { render json: @unique_agency_names } end end ...end #app/assets/javascripts.agencies/index.js$(document).ready(function(){ /* For typeahead functionality on name input of search form for agencies */ var agency_names = new Bloodhound({ datumTokenizer: Bloodhound.tokenizers.whitespace, queryTokenizer: Bloodhound.tokenizers.whitespace, prefetch: '../agencies/get_unique_agency_names.json' }); $('#prefetch .typeahead.name_input').typeahead(null, { name: 'agency_names', source: agency_names });}); # just showing the relevant part of the form<div class=""form-group"" id=""prefetch""> <%= f.label :name_cont, ""Agency Name"" %> <%= f.text_field :name_cont, class: ""form-control typeahead name_input"", placeholder: ""Enter Agency Name"" %></div> resources :agencies do collection do get 'get_unique_agency_names' endend",Typeahead in rails app: Append JSON request to only one specific request instead of appending JSON request to every request via prefetch
"Typeahead works in rails app, but throwing javascript errors in the browser's js console"," The type ahead functionality works where it is supposed to. The issue though is that the type ahead functionality is making the JSON request on every request for the data when it should really only happen for one specific request.I have the following controller: I have the following in my javascript file: And just for completion, here is the one place where I want this functionality to happen: In this form: Here is my relevant route in config/routes.rb My specific question is: How can I ensure that the GET ""/agencies/get_unique_agency_names"" is only called when it is supposed to? Right now it is appending this JSON request for every request. I only want the JSON request to happen for one specific request.Twitter's Type Ahead Examples <code>  #controllers/agencies_controller.rbclass AgenciesController < ApplicationController def get_unique_agency_names @unique_agency_names = Agency.uniq.pluck(:name) respond_to do |format| format.json { render json: @unique_agency_names } end end ...end #app/assets/javascripts.agencies/index.js$(document).ready(function(){ /* For typeahead functionality on name input of search form for agencies */ var agency_names = new Bloodhound({ datumTokenizer: Bloodhound.tokenizers.whitespace, queryTokenizer: Bloodhound.tokenizers.whitespace, prefetch: '../agencies/get_unique_agency_names.json' }); $('#prefetch .typeahead.name_input').typeahead(null, { name: 'agency_names', source: agency_names });}); # just showing the relevant part of the form<div class=""form-group"" id=""prefetch""> <%= f.label :name_cont, ""Agency Name"" %> <%= f.text_field :name_cont, class: ""form-control typeahead name_input"", placeholder: ""Enter Agency Name"" %></div> resources :agencies do collection do get 'get_unique_agency_names' endend",Typeahead in rails app: Append JSON request to only one specific request instead of appending JSON request to every request via prefetch
Typeahead in rails app: Load Data just once instead of appending JSON request to each request via prefetch," The type ahead functionality works where it is supposed to. The issue though is that the type ahead functionality is making the JSON request on every request for the data when it should really only happen for one specific request.I have the following controller: I have the following in my javascript file: And just for completion, here is the one place where I want this functionality to happen: In this form: Here is my relevant route in config/routes.rb My specific question is: How can I ensure that the GET ""/agencies/get_unique_agency_names"" is only called when it is supposed to? Right now it is appending this JSON request for every request. I only want the JSON request to happen for one specific request.Twitter's Type Ahead Examples <code>  #controllers/agencies_controller.rbclass AgenciesController < ApplicationController def get_unique_agency_names @unique_agency_names = Agency.uniq.pluck(:name) respond_to do |format| format.json { render json: @unique_agency_names } end end ...end #app/assets/javascripts.agencies/index.js$(document).ready(function(){ /* For typeahead functionality on name input of search form for agencies */ var agency_names = new Bloodhound({ datumTokenizer: Bloodhound.tokenizers.whitespace, queryTokenizer: Bloodhound.tokenizers.whitespace, prefetch: '../agencies/get_unique_agency_names.json' }); $('#prefetch .typeahead.name_input').typeahead(null, { name: 'agency_names', source: agency_names });}); # just showing the relevant part of the form<div class=""form-group"" id=""prefetch""> <%= f.label :name_cont, ""Agency Name"" %> <%= f.text_field :name_cont, class: ""form-control typeahead name_input"", placeholder: ""Enter Agency Name"" %></div> resources :agencies do collection do get 'get_unique_agency_names' endend",Typeahead in rails app: Append JSON request to only one specific request instead of appending JSON request to every request via prefetch
Redirect User to Signup instead of Login - Devise," Using before_action :authenticate_user! to check if user logged in. But it sends users to login instead of signup.Tried different ways of directing user to signup instead of login, but they do not send the user back to the original page after successful signup. How can I send a user to signup and direct a user back to the original page afterwards? Attempts: Routes File <code>  before_filter :auth_userdef auth_user redirect_to new_user_registration_url unless user_signed_in?end Rails.application.routes.draw do devise_for :installs resources :orders resources :products devise_for :users get 'dashboard' => 'pages#dashboard' get 'contact' => 'pages#contact' get 'cart' => 'carts#index' root 'pages#home'",Redirect User to Signup
"Difference between after_create,after_save and after_commit in rail callbacks"," The difference between after_create, after_save and after_commit in Rails is that: after_save is invoked when an object is created and updatedafter_commit is called on create, update and destroy. after_create is only called when creating an objectIs this the only difference among those, or are there any other major differences? <code> ","Difference between after_create, after_save and after_commit in rails callbacks"
"Difference between after_create,after_save and after_commit in rails callbacks"," The difference between after_create, after_save and after_commit in Rails is that: after_save is invoked when an object is created and updatedafter_commit is called on create, update and destroy. after_create is only called when creating an objectIs this the only difference among those, or are there any other major differences? <code> ","Difference between after_create, after_save and after_commit in rails callbacks"
Rails 4/devise - Do I need an index for users and deals in this case?," I have a ruby on Rails 4 app, using devise and with a User model and a Deal model.I am creating a user_deals table for has_many/has_many relationship between User and Deal.Here is the migration When a user load a Deal (for example Deal id= 4), I use a method called show In the view of this Deal id=4 page, I need to display the nb of views of the Devise's current_user inside the Deal page the user is currently on. Lets' say I have 10M+ user_deals lines, I wanted to know if I should use an index or maybe Indeed in other situations I would have said Yes, but here I don't know how Rails works behind the scenes. It feels as if Rails is aware of what to do without me needing to speed up the process,...as if when Rails loads this view that there is no SQL query (such as 'find the nb of views WHERe user_id= x and deal_id= Y')....because I'm using just for the current_user who is logged-in (via devise's current_user) and for deal_id Rails knows it as we are on the very page of this deal (show page) so I just pass it as a parameter.So do I need an index to speed it up or not? <code>  class CreateUserDeals < ActiveRecord::Migration def change create_table :user_deals do |t| t.belongs_to :user t.belongs_to :deal t.integer :nb_views t.timestamps end endend controllers/deal.rb#for the view of the Deal pagedef showend deal/show.htmlhere is the nb of views of user: <% current_user.#{deal_id}.nb_views%> add_index :user_deals, :user_idadd_index :user_deals, :deal_id add_index(:deals, [:user_id, deal_id])",How should I use Rails to index and query a join table?
How should I index and query a join table?," I have a ruby on Rails 4 app, using devise and with a User model and a Deal model.I am creating a user_deals table for has_many/has_many relationship between User and Deal.Here is the migration When a user load a Deal (for example Deal id= 4), I use a method called show In the view of this Deal id=4 page, I need to display the nb of views of the Devise's current_user inside the Deal page the user is currently on. Lets' say I have 10M+ user_deals lines, I wanted to know if I should use an index or maybe Indeed in other situations I would have said Yes, but here I don't know how Rails works behind the scenes. It feels as if Rails is aware of what to do without me needing to speed up the process,...as if when Rails loads this view that there is no SQL query (such as 'find the nb of views WHERe user_id= x and deal_id= Y')....because I'm using just for the current_user who is logged-in (via devise's current_user) and for deal_id Rails knows it as we are on the very page of this deal (show page) so I just pass it as a parameter.So do I need an index to speed it up or not? <code>  class CreateUserDeals < ActiveRecord::Migration def change create_table :user_deals do |t| t.belongs_to :user t.belongs_to :deal t.integer :nb_views t.timestamps end endend controllers/deal.rb#for the view of the Deal pagedef showend deal/show.htmlhere is the nb of views of user: <% current_user.#{deal_id}.nb_views%> add_index :user_deals, :user_idadd_index :user_deals, :deal_id add_index(:deals, [:user_id, deal_id])",How should I use Rails to index and query a join table?
"Rails Query with ILIKE, Mysql DB"," My syntax is off. I want to create a scope by_name that finds all agencies whose name attribute contains the passed in string (case insensitive). Here is what I have: In the rails console I type in agencies = Agency.by_name(""foo""). Here is the query generated: Here is the error message: Mysql2::Error: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'ILIKE '%foo%') <code>  class Agency < ActiveRecord::Base scope :by_name, ->(agency_name) { where('name ILIKE ?', ""%#{agency_name}%"") }end SELECT `agencies`.* FROM `agencies` WHERE (name ILIKE '%foo%')",Rails MySQL ILIKE query
Ruby: initialize an object with a block," Is it possible to initialize an object with a block as follows? <code>  class Foo attr_reader :bar,:baz def initialize(bar,baz) @bar, @baz = bar, baz endendFoo.new do |bar, baz| # some logic to be implemented # @bar, @baz to be assignedend",Initialize an object with a block
Ruby:loop{} versus loop{sleep 1}," I am using a loop to wait on a keyboard interrupt and then allow for some clean up operation before exit in a multi threaded environment. This piece of code runs in the main thread. There are multiple threads performing several file and DB ops. exit_bool is an atomic var set by other threads to indicate they are in the middle of some operation. I check for the value and wait until it turns false and then exit.I'm wondering what the cost of loop{} is as opposed to loop{sleep x}. <code>  begin loop {}rescue Interrupt p ""Ctr-C Pressed..Cleaning Up & Shutting Down"" loop do break if exit_bool.false? end exit 130end",`loop{}` versus `loop{sleep 1}`
Insert a number into an ordered array (in Ruby)," I have an array of numbers sorted either in ascending or descending order, and I want to find the index at which to insert a number while preserving the order of the array. If the array is [1, 5, 7, 11, 51] and the number to insert is 9, I would be expecting 3 so I could do [1, 5, 7, 11, 51].insert(3, 9). If the array is [49, 32, 22, 11, 10, 8, 3, 2] and the number to be inserted is 9, I would be expecting 5 so I could do [49, 32, 22, 11, 10, 8, 3, 2].insert(5, 9)What would be the best/cleanest way to find the index at which to insert 9 in either of these two arrays while preserving the sorting of the array?I wrote this code that works, but it's not very pretty: <code>  array = [55, 33, 10, 7, 1]num_to_insert = 9index_to_insert = array[0..-2].each_with_index.map do |n, index| range = [n, array[index.next]].sort index.next if num_to_insert.between?(range[0], range[1])end.compact.firstindex_to_insert # => 3",Insert a number into an ordered array
Write large CSV file in ruby," Will CSV.open store data in memory and write to file one time when the block exits, or it will automatically write in many batches? <code>  require 'csv'CSV.open('result.csv', 'wb') do |csv| while row = next_row csv << row endend",Does Ruby's CSV.open buffer to memory and write all at once?
Travis reports odd message of corrupt gemfile," Im using bundler to install stuff and since I have added Gemfile.lock, travis started to complain with: Of course, everything works locally. It also works using DeployBot. I even installed docker ubuntu and tried, still ok. My Gemfile.lock is not corrupt. Same versions of ruby and bundler is used.What is going on?UpdateThis is something related to bundler version. Im using 1.11.0, but got reports that it worked with eg. 1.8.3. ?? <code>  Your Gemfile.lock is corrupt. The following gem is missing from the DEPENDENCIESsection: 'echoe'",Travis reports odd message of corrupted Gemfile.lock
How to override Selenium::WebDriver.for method to enable `tslv1` option," I want to override the method Selenium::WebDriver.for. This is what I tried: But I got error when Selenium::Webdriver.for(:phantomjs) is called. How can I call the original method from the overriding method? <code>  module SeleniumWebDriverExtension def self.for(browser, *args) if browser != :phantomjs super(browser, *args) else options = { ""phantomjs.cli.args"" => [""--ssl-protocol=tlsv1""] } capabilities = Selenium::WebDriver::Remote::Capabilities.phantomjs(options) super(browser, desired_capabilities: capabilities) end endendSelenium::WebDriver.prepend(SeleniumWebDriverExtension) NoMethodError: super: no superclass method `for' for Selenium::WebDriver::Driver:Class",How to override class methods
Cannot load grunt/sauce_browsers.yaml on grunt dist with Bootstrap 4 Alpha 2," I'm trying to compile a custom version of bootstrap v4 alpha2 but I keep getting 2 errors. Please help. I'm a noob at ruby.I managed to install In fact, there is no .bundle directory under bootstrapRunning the following fails, from /node_modules/bootstrap The following also fails: <code>  $ gem install bundler $ bundle install $ grunt distLoading ""Gruntfile.js"" tasks...ERROR>> Error: Unable to read ""grunt/sauce_browsers.yml"" file (Error code: ENOENT).Warning: Task ""dist"" not found. Use --force to continue.",Cannot load grunt/sauce_browsers.yml on grunt dist with Bootstrap 4 Alpha 2
Difference between instance_eval and singleton method(metaclass)?, Singleton method is a method that is defined only on one instance. Doesn't instance_eval do the same thing? Defining a method for a particular instance? What is the difference? <code>  foo = Foo.newdef foo.case #singleton methodend,Difference between instance_eval and singleton method
Difference between `instance_eval` and singleton method, Singleton method is a method that is defined only on one instance. Doesn't instance_eval do the same thing? Defining a method for a particular instance? What is the difference? <code>  foo = Foo.newdef foo.case #singleton methodend,Difference between instance_eval and singleton method
How do I use `Array#dig` and `Hash#dig` introduced in Ruby 2.3?," Ruby 2.3 introduces a new method on Array and Hash called dig. The examples I've seen in blog posts about the new release are contrived and convoluted: I'm not using triple-nested flat arrays. What's a realistic example of how this would be useful?UPDATEIt turns out these methods solve one of the most commonly-asked Ruby questions. The questions below have something like 20 duplicates, all of which are solved by using dig:How to avoid NoMethodError for missing elements in nested hashes, without repeated nil checks?Ruby Style: How to check whether a nested hash element exists <code>  # Hash#diguser = { user: { address: { street1: '123 Main street' } }}user.dig(:user, :address, :street1) # => '123 Main street'# Array#digresults = [[[1, 2, 3]]]results.dig(0, 0, 0) # => 1",How do I use Array#dig and Hash#dig introduced in Ruby 2.3?
Is it possible to stop Ruby from evaluating a `require`d file without exiting the entire process?," file1 requires file2, and I want to be able to cancel evaluating file2 under certain conditions without exiting the whole process. When running file1, the output I want to see is: The goal is for Still in file 2 to never print, while Back in file 1 does print. Is there anything I can do in file2 to make this possible?I can't use exit/exit!/abort here because Back in file 1 will never print. I could use raise/fail, but to do that I would have to change file1 and rescue the failed require. I'm hoping to find a way that doesn't involve altering file1.UPDATE:A ""top-level return"" feature has been added. <code>  # file1.rb puts ""In file 1"" require 'file2' puts ""Back in file 1""# file2.rb puts ""In file 2"" # return if some_conditional puts ""Still in file 2"" In file 1In file 2Back in file 1",How to cancel evaluating a required Ruby file? (a.k.a. top-level return)
Returning from a file without exiting the whole process," file1 requires file2, and I want to be able to cancel evaluating file2 under certain conditions without exiting the whole process. When running file1, the output I want to see is: The goal is for Still in file 2 to never print, while Back in file 1 does print. Is there anything I can do in file2 to make this possible?I can't use exit/exit!/abort here because Back in file 1 will never print. I could use raise/fail, but to do that I would have to change file1 and rescue the failed require. I'm hoping to find a way that doesn't involve altering file1.UPDATE:A ""top-level return"" feature has been added. <code>  # file1.rb puts ""In file 1"" require 'file2' puts ""Back in file 1""# file2.rb puts ""In file 2"" # return if some_conditional puts ""Still in file 2"" In file 1In file 2Back in file 1",How to cancel evaluating a required Ruby file? (a.k.a. top-level return)
Is it possible to conditionally stop Ruby from evaluating a required file without exiting the entire process?," file1 requires file2, and I want to be able to cancel evaluating file2 under certain conditions without exiting the whole process. When running file1, the output I want to see is: The goal is for Still in file 2 to never print, while Back in file 1 does print. Is there anything I can do in file2 to make this possible?I can't use exit/exit!/abort here because Back in file 1 will never print. I could use raise/fail, but to do that I would have to change file1 and rescue the failed require. I'm hoping to find a way that doesn't involve altering file1.UPDATE:A ""top-level return"" feature has been added. <code>  # file1.rb puts ""In file 1"" require 'file2' puts ""Back in file 1""# file2.rb puts ""In file 2"" # return if some_conditional puts ""Still in file 2"" In file 1In file 2Back in file 1",How to cancel evaluating a required Ruby file? (a.k.a. top-level return)
How to cancel evaluating a required Ruby file?," file1 requires file2, and I want to be able to cancel evaluating file2 under certain conditions without exiting the whole process. When running file1, the output I want to see is: The goal is for Still in file 2 to never print, while Back in file 1 does print. Is there anything I can do in file2 to make this possible?I can't use exit/exit!/abort here because Back in file 1 will never print. I could use raise/fail, but to do that I would have to change file1 and rescue the failed require. I'm hoping to find a way that doesn't involve altering file1.UPDATE:A ""top-level return"" feature has been added. <code>  # file1.rb puts ""In file 1"" require 'file2' puts ""Back in file 1""# file2.rb puts ""In file 2"" # return if some_conditional puts ""Still in file 2"" In file 1In file 2Back in file 1",How to cancel evaluating a required Ruby file? (a.k.a. top-level return)
Is it ok to call ActiveRecord Methods in the view Rails," Using Rails 4I am wondering (and having a hard time finding an answer) if it is OK to call an ActiveRecord method directly from the view, such as: or I realize the normal practice would be to store these in an instance variable inside of the controller, but since I am using a partial, I cannot do that.Is doing this ok? Can it hurt? Is there a better way to go about this (such as a helper method)? Thank you! <code>  <%= Article.where(approved: true).count %> <%= Article.where(""short_answer is NOT NULL and short_answer != ''"").count %>",Rails: Is it ok to call ActiveRecord Methods in the view Rails
how to access private methods in ruby?," My understanding is that private means being private to an instance. Private methods can't be called with an explicit receiver, even self. To call a private method, I have to go through a process like below: This will call the private baz method. Is there a way to directly call a private method with an explicit receiver? <code>  class Sample def foo baz end private def baz end end Sample.new.foo",How to access private methods
"Understanding the difference between load, require, and require_relative"," I do not understand the difference between the three methods of importing library or module. As I currently understand it, would import the contents of the external file into the current file whereas: would perform the same functionality but would not import a file that had already been imported. is similar to require, but it will load a file that is only in the current directory whereas require will use the search path $: in an effort to find the file. I have no doubt my understanding of the three mechanisms is flawed. Could anyone offer some clarification? <code>  load 'file.rb' require 'file.rb' require_relative 'file.rb'","Understanding the difference between `load`, `require`, and `require_relative`"
how can i multiply two arrays in Ruby?," I have two arrays, for example I need to multiply them and create a third array c that will be like this Which method is the best by speed? I need to do this for huge arrays, and time is important. <code>  a = [3, 2, 1]b = [1, 2, 3] c = [3 * 1, 2 * 2, 1 * 3]",How can I multiply two arrays in Ruby?
How can i fix this error in ruby on rails?," I'm a newbie on Ruby on Rails application, I have already created CRUD but still stacked in Login & Logout functionality. This is my Sessions_controller: This is my view: new.html.erb This is my model: When I click Login button then showing this error:NoMethodError in SessionsController#createundefined method `authenticate' for #User:0x0000000d5c65e0>How can I fix this error? I'm using ruby 1.9.7 Rails 4.2.5 & mysql2That would help me a lot, Please. <code>  def newenddef create user = User.find_by(email: params[:session][:email].downcase) if user && user.authenticate(params[:session][:passkey]) # Log the user in and redirect to the user's show page. else # Create an error message. flash[:danger] = 'Invalid email/password combination' # Not quite right! render 'new' endenddef destroyend <%= form_for(:session, url: login_path) do |f| %> <%= f.label :email %> <%= f.email_field :email, class: 'form-control' %> <%= f.label :passkey%> <%= f.password_field :passkey, class: 'form-control' %> <%= f.submit ""Log in"", class: ""btn btn-primary"" %><% end %> class User< ActiveRecord::Base validates :first_name, :presence => true, :length => { :in => 3..20 } validates :last_name, :presence => true, :length => { :in => 3..20 } validates :email, :presence => true, :uniqueness => true, format: { with: /\A[^@\s]+@([^@.\s]+\.)+[^@.\s]+\z/ } validates :passkey, :confirmation => true, :length => {:in => 6..20}end",undefined method authenticate' in ruby on rails?
Best way to upgrade to Ruby 2.3 through rvm while keep all your gems?," What's the best way to upgrade to Ruby 2.3 through rvm while keeping all your gems installed on previous version (e.g. json, nokogiri, etc)? <code> ",Best way to upgrade to Ruby 2.3 through rvm while keeping all your gems?
Why did I get `main.using is permitted only at toplevel` when I used a Refinement in IRB?," I tried to use a Refinement in IRB (v0.9.6, Ruby 2.3.0): This is basically the exact setup from the documentation (which results in the same error).What went wrong? How do I fix this? <code>  module Foo refine Object do def foo() ""foo"" end endendusing Foo # => RuntimeError: main.using is permitted only at toplevel","Why did I get ""main.using is permitted only at toplevel"" when I used a Refinement in IRB?"
What is use of ||= begin....end block in ruby?," What is difference in these two code snippets: and I'm confused with the ""begin ... end"" block. Does it make any difference in the output? If not, then what is use of the begin ... end block here? <code>  def config @config ||= begin if config_exists? @config = return some value else {} end end end def config @config ||= method end def method if config_exists? return some value else {} end end",What is use of ||= begin....end block in Ruby?
How to Replace Space with %20 in rials," What I do It doesn't replace it with ""%20"".How to fix it? <code>  str= "" John Smith Beer ""str.tr("" "", ""%20"")""%%John%%%Smith%Beer%""",How to replace space with %20 in rails
Rails: Comparing .references requirement on includes vs. eager_load," I know that when you utilize includes and you specify a where clause on the joined table, you should use .referencesexample: In rails 4 or later, you will get an error like the following: Mysql2::Error: Unknown column 'Orders.cost' in 'where clause': SELECT customers.* FROM customers WHERE (Orders.cost < 100)Or you will get a deprecation warning: DEPRECATION WARNING: It looks like you are eager loading table(s) (one of: users, addresses) that are referenced in a string SQL snippet. For example: Post.includes(:comments).where(""comments.title = 'foo'"") Currently, Active Record recognizes the table in the string, and knows to JOIN the comments table to the query, rather than loading comments in a separate query. However, doing this without writing a full-blown SQL parser is inherently flawed. Since we don't want to write an SQL parser, we are removing this functionality. From now on, you must explicitly tell Active Record when you are referencing a table from a string: Post.includes(:comments).where(""comments.title = 'foo'"").references(:comments) If you don't rely on implicit join references you can disable the feature entirely by setting config.active_record.disable_implicit_join_references = true. ( SELECT ""users"".""id"" AS t0_r0, ""users"".""name"" AS t0_r1, ""users"".""email"" AS t0_r2, ""users"".""created_at"" AS t0_r3, ""users"".""updated_at"" AS t0_r4, ""addresses"".""id"" AS t1_r0, ""addresses"".""user_id"" AS t1_r1, ""addresses"".""country"" AS t1_r2, ""addresses"".""street"" AS t1_r3, ""addresses"".""postal_code"" AS t1_r4, ""addresses"".""city"" AS t1_r5, ""addresses"".""created_at"" AS t1_r6, ""addresses"".""updated_at"" AS t1_r7 FROM ""users"" LEFT OUTER JOIN ""addresses"" ON ""addresses"".""user_id"" = ""users"".""id"" WHERE (addresses.country = 'Poland')so we do this: And it executes just fine: I know that .includes is just a wrapper for two methods: eager_load and preload. I know that since my query above is doing a filter on a joined table (orders in this example), includes is smart and knows to pick the eager_load implementation over preload because preload cannot handle doing this query since preload does not join tables. Here is where I am confused. Ok: So on that query above: under the hood includes will utilize the eager_load implementation. But notice how when I explicitly use eager_load for this same query (which is what includes is essentially doing): I do not need to use .references! It runs the query and loads the data just fine. No error and no deprecation warning: And it executes the exact same process with no problem: That seems odd. Why does .references need to be specified for the includes version of the query, whereas .references does not need to be specified for the eager_load version of the query? What am I missing here? <code>  # will error out or throw deprecation warning in logsusers = User.includes(:orders).where(""Orders.cost < ?"", 20) # added .references(:orders)users = User.includes(:orders).where(""Orders.cost < ?"", 20).references(:orders) SELECT ""users"".""id"" AS t0_r0, ""users"".""name"" AS t0_r1, ""users"".""created_at"" AS t0_r2, ""users"".""updated_at"" AS t0_r3, ""orders"".""id"" AS t1_r0, ""orders"".""cost"" AS t1_r1, ""orders"".""user_id"" AS t1_r2, ""orders"".""created_at"" AS t1_r3, ""orders"".""updated_at"" AS t1_r4 FROM ""users"" LEFT OUTER JOIN ""orders"" ON ""orders"".""user_id"" = ""users"".""id"" WHERE ( orders.cost < 20 ) # did not specify .references(:orders), and yet no error and no deprecation warning users = User.eager_load(:orders).where(""Orders.cost < ?"", 20) SELECT ""users"".""id"" AS t0_r0, ""users"".""name"" AS t0_r1, ""users"".""created_at"" AS t0_r2, ""users"".""updated_at"" AS t0_r3, ""orders"".""id"" AS t1_r0, ""orders"".""cost"" AS t1_r1, ""orders"".""user_id"" AS t1_r2, ""orders"".""created_at"" AS t1_r3, ""orders"".""updated_at"" AS t1_r4 FROM ""users"" LEFT OUTER JOIN ""orders"" ON ""orders"".""user_id"" = ""users"".""id"" WHERE ( orders.cost < 20 ) ",Comparing .references requirement on includes vs. eager_load
"Ruby, Access parent/sibling module methods", Is there any way to access baz_method inside class Qux without mentioning module namespace from first? When there are many nested modules the code doesn't look clean. <code>  module Foo module Bar module Baz class Qux def self.qux_method Foo::Bar::Baz.baz_method end end def self.baz_method end end endend,How to access parent/sibling module methods
Assignment Branch Condition size for index is too high, Rubocop is always report the error: app/controllers/account_controller.rb:5:3: C: Assignment Branch Condition size for index is too high. [30.95/24] How to fix it? Anyone has good idea? <code>  if params[:role] @users = @search.result.where(:role => params[:role])elsif params[:q] && params[:q][:s].include?('count') @users = @search.result.order(params[:q][:s])else @users = @search.resultend,"How does ""Assignment Branch Condition size for index is too high"" work?"
How to get all factories defined for a particular model," I have a factory defined in <Rails-root>/spec/factories/models.rb: I want to get all the factories defined for Class Model.I can get factory definitions for all classes with FactoryGirl.factories, and yes, I can achieve the above using map/reduce. But I want to know if there is any helper method to get all definitions for a model class. <code>  FactoryGirl.define do factory :model do id 1 association :organization, factory: :aureso name ""Default Model"" factory :serie_1 do id 2 name 'serie_1' end factory :serie_2 do id 3 name 'serie_2' end factory :serie_3 do id 4 name 'serie_3' end endend",How to get all factory_girl factories defined for a particular model class?
How to get all factories defined for a particular model class?," I have a factory defined in <Rails-root>/spec/factories/models.rb: I want to get all the factories defined for Class Model.I can get factory definitions for all classes with FactoryGirl.factories, and yes, I can achieve the above using map/reduce. But I want to know if there is any helper method to get all definitions for a model class. <code>  FactoryGirl.define do factory :model do id 1 association :organization, factory: :aureso name ""Default Model"" factory :serie_1 do id 2 name 'serie_1' end factory :serie_2 do id 3 name 'serie_2' end factory :serie_3 do id 4 name 'serie_3' end endend",How to get all factory_girl factories defined for a particular model class?
Display an image uploaded with paperclip gem within user#show," By Default: the paperclip gem stores all attachments within the public directory.I did not want to store the attachments within the public directory for security reasons, so I saved them within an uploads directory at the root of the app: I did not specify the url option because I do not want a url for each image attachment. If a url is specified: then ANYONE with that url can access the image. This is not secure. In the user#show page: I want to actually display the image. If I were using all of the paperclip defaults then I could just do this because the image would be within the public directory and the image would have a url: It appears that if I save the image attachments outside the public directory and do not specify a url (again: doing this to secure the image), then the image will not render in the view.I am aware of how to authorize throughout an application via the pundit gem. However, authorizing for an image is useless when that image is publicly accessible. So I attempt to make the image not publicly accessible by removing the url and saving the image outside the public directory, but then the image no longer renders in the view.Update: My question really boils down to this: My images are saved within my rails application. With paperclip: is there any way to securely display an image in the view? In other words: Make it so that the image does not have its own separate url (because ANYONE with that url can access that image, making that image not secure). Here are some examples of what I mean by securely displaying the image:Example #1: Only display the image if the user is logged in. (The image does not have its own separate url, so there is no other way to access the image)Example #2: Only display the image if the user is associated to this image. (The image does not have its own separate url, so there is no other way to access the image)Additional Update: I am aware that I can securely send a file with send_filewhich allows the user to download the image, but that is not what I want to do here. I do not want the user to download the image. Instead: I want the user to be able to actually see the image on the webpage. I want to securely show/render the image on the page. Using send_file (as I understand it) allows the user to download the file. It does not render the image on the page. <code>  class Post < ActiveRecord::Base belongs_to :user has_attached_file :some_image, path: "":rails_root/uploads/:attachment/:id/:style/:filename"" do_not_validate_attachment_file_type :some_imageend <p> <strong>Some image:</strong> <%= image_tag @post.some_image %></p>",Securely Display an Image Uploaded with paperclip gem
Display an image uploaded with paperclip gem within user#show with custom `path` option and no `url` option specified," By Default: the paperclip gem stores all attachments within the public directory.I did not want to store the attachments within the public directory for security reasons, so I saved them within an uploads directory at the root of the app: I did not specify the url option because I do not want a url for each image attachment. If a url is specified: then ANYONE with that url can access the image. This is not secure. In the user#show page: I want to actually display the image. If I were using all of the paperclip defaults then I could just do this because the image would be within the public directory and the image would have a url: It appears that if I save the image attachments outside the public directory and do not specify a url (again: doing this to secure the image), then the image will not render in the view.I am aware of how to authorize throughout an application via the pundit gem. However, authorizing for an image is useless when that image is publicly accessible. So I attempt to make the image not publicly accessible by removing the url and saving the image outside the public directory, but then the image no longer renders in the view.Update: My question really boils down to this: My images are saved within my rails application. With paperclip: is there any way to securely display an image in the view? In other words: Make it so that the image does not have its own separate url (because ANYONE with that url can access that image, making that image not secure). Here are some examples of what I mean by securely displaying the image:Example #1: Only display the image if the user is logged in. (The image does not have its own separate url, so there is no other way to access the image)Example #2: Only display the image if the user is associated to this image. (The image does not have its own separate url, so there is no other way to access the image)Additional Update: I am aware that I can securely send a file with send_filewhich allows the user to download the image, but that is not what I want to do here. I do not want the user to download the image. Instead: I want the user to be able to actually see the image on the webpage. I want to securely show/render the image on the page. Using send_file (as I understand it) allows the user to download the file. It does not render the image on the page. <code>  class Post < ActiveRecord::Base belongs_to :user has_attached_file :some_image, path: "":rails_root/uploads/:attachment/:id/:style/:filename"" do_not_validate_attachment_file_type :some_imageend <p> <strong>Some image:</strong> <%= image_tag @post.some_image %></p>",Securely Display an Image Uploaded with paperclip gem
BEGINNER: Convert JSON string to hash," I have a Ruby on Rails JSON question.I have what I think is a strange error. I have the following JSON string which I get like this from an external API Now, I want to convert this string to a hash using: The problem is that it errors with: The problem now with just replacing ' with "" is dangerous if any strings includes ' or "". Anyone have a solution? <code>  test = ""[{'domain': 'abc.com'}, {'domain': 'def.com'}, {'domain': 'ghi.com'}]"" hash = JSON.parse test JSON::ParserError: 419: unexpected token at '{'domain': 'abc.com'}, {'domain': 'def.com'}, {'domain': 'ghi.com'}]'",Convert JSON string to hash
how can I inspect what is the default value for optional parameter in ruby's method?," Given a class, Is it possible to obtain the default value for arg2, via some methods like Class#instance_method, or something? <code>  class MyClass def index(arg1, arg2=""hello"") endend",How can I inspect what is the default value for optional parameter in ruby's method?
Ruby - nokogiri - parse html table," I'm trying to parse a table but I don't know how to save the data from it. I want to save the data in each row row to look like: The sample table is: My scraper's code is: When I try to display the data in the HTML page it looks like all the column names are stored in one array's element and all the data the same way. <code>  ['Raw name 1', 2,094, 0,017, 0,098, 0,113, 0,452] html = <<EOT <table class=""open""> <tr> <th>Table name</th> <th>Column name 1</th> <th>Column name 2</th> <th>Column name 3</th> <th>Column name 4</th> <th>Column name 5</th> </tr> <tr> <th>Raw name 1</th> <td>2,094</td> <td>0,017</td> <td>0,098</td> <td>0,113</td> <td>0,452</td> </tr> . . . <tr> <th>Raw name 5</th> <td>2,094</td> <td>0,017</td> <td>0,098</td> <td>0,113</td> <td>0,452</td> </tr> </table>EOT doc = Nokogiri::HTML(open(html), nil, 'UTF-8') tables = doc.css('div.open') @tablesArray = [] tables.each do |table| title = table.css('tr[1] > th').text cell_data = table.css('tr > td').text raw_name = table.css('tr > th').text @tablesArray << Table.new(cell_data, raw_name) end render template: 'scrape_krasecology' end end",How to parse a HTML table with Nokogiri?
How to parse html table in Rubi with nokogiri?," I'm trying to parse a table but I don't know how to save the data from it. I want to save the data in each row row to look like: The sample table is: My scraper's code is: When I try to display the data in the HTML page it looks like all the column names are stored in one array's element and all the data the same way. <code>  ['Raw name 1', 2,094, 0,017, 0,098, 0,113, 0,452] html = <<EOT <table class=""open""> <tr> <th>Table name</th> <th>Column name 1</th> <th>Column name 2</th> <th>Column name 3</th> <th>Column name 4</th> <th>Column name 5</th> </tr> <tr> <th>Raw name 1</th> <td>2,094</td> <td>0,017</td> <td>0,098</td> <td>0,113</td> <td>0,452</td> </tr> . . . <tr> <th>Raw name 5</th> <td>2,094</td> <td>0,017</td> <td>0,098</td> <td>0,113</td> <td>0,452</td> </tr> </table>EOT doc = Nokogiri::HTML(open(html), nil, 'UTF-8') tables = doc.css('div.open') @tablesArray = [] tables.each do |table| title = table.css('tr[1] > th').text cell_data = table.css('tr > td').text raw_name = table.css('tr > th').text @tablesArray << Table.new(cell_data, raw_name) end render template: 'scrape_krasecology' end end",How to parse a HTML table with Nokogiri?
How to parse html table in Ruby with nokogiri?," I'm trying to parse a table but I don't know how to save the data from it. I want to save the data in each row row to look like: The sample table is: My scraper's code is: When I try to display the data in the HTML page it looks like all the column names are stored in one array's element and all the data the same way. <code>  ['Raw name 1', 2,094, 0,017, 0,098, 0,113, 0,452] html = <<EOT <table class=""open""> <tr> <th>Table name</th> <th>Column name 1</th> <th>Column name 2</th> <th>Column name 3</th> <th>Column name 4</th> <th>Column name 5</th> </tr> <tr> <th>Raw name 1</th> <td>2,094</td> <td>0,017</td> <td>0,098</td> <td>0,113</td> <td>0,452</td> </tr> . . . <tr> <th>Raw name 5</th> <td>2,094</td> <td>0,017</td> <td>0,098</td> <td>0,113</td> <td>0,452</td> </tr> </table>EOT doc = Nokogiri::HTML(open(html), nil, 'UTF-8') tables = doc.css('div.open') @tablesArray = [] tables.each do |table| title = table.css('tr[1] > th').text cell_data = table.css('tr > td').text raw_name = table.css('tr > th').text @tablesArray << Table.new(cell_data, raw_name) end render template: 'scrape_krasecology' end end",How to parse a HTML table with Nokogiri?
Ruby on Rails: Rubocop - Assignment Branch Condition Too High," I have a simple class that, on initialization, takes between one and eight parameters. It sets the accessors to these to use later. Rubocop is trying to arrest me for the ABC being too high, but I'm not sure if there's actually anything wrong with what I've done. Is this a case where I just disable the inspection on my initialize? My only thought on reducing size would be to do something like iterating through all my attr_accessors on initialize, seeing if there is a corresponding symbol passed through in the has, and if so assigning it. But this seems kind of weak. <code>  class Foo attr_accessor :one, :two, :three, :four attr_accessor :five, :six, :seven, :eight def initialize(p={}) @one = p[:one] if p[:one].present? # ... @eight = p[:eight] if p[:eight].present? endend class Foo attr_accessor :one, :two, :three, :four attr_accessor :five, :six, :seven, :eight def initialize(p={}) instance_variables.each do |variable| send(""@#{variable}"") = p[""#{send(variable)}"".to_sym] if p[""#{send(variable)}"".to_sym].present? end endend",Assignment Branch Condition too high
Why do I need to add a to_s in top of a to_i in ruby when reading from a file," I read a number ""98"" from a file, and tried to convert it to binary using input.to_i(2), but I get 0 that way. Output is: <code>  input=File.read(""input.dat"")puts ""Input is: #{input}""puts ""Normal way is #{input.to_i(2)}""puts ""It works this way #{input.to_i.to_s(2)}""puts ""Calling the number directly works #{98.to_s(2)}"" Input is: 98Normal way is 0It works this way 1100010Calling the number directly works 1100010",Why do I need `to_s` on top of `to_i` when reading from a file?
Accessing hash element using Safe Navigation Operator in Ruby >= 2.3.0, I currently have a piece of code that looks like: Is there a way to use the safe navigation operator (introduced in 2.3.0) to avoid this if conditional? <code>  if match = request.path.match(/\A\/(?<slug>(?!admin|assets)\w+)/) match[:slug]end,Using [] with the Safe Navigation Operator in Ruby
Using [] via the Safe Navigation Operator in Ruby >= 2.3.0, I currently have a piece of code that looks like: Is there a way to use the safe navigation operator (introduced in 2.3.0) to avoid this if conditional? <code>  if match = request.path.match(/\A\/(?<slug>(?!admin|assets)\w+)/) match[:slug]end,Using [] with the Safe Navigation Operator in Ruby
Transmit Heroku environement variables to Docker instance," I build a RoR app on Heroku that must be run inside a Docker container. To do so I use the official Dockerfile. As it is very common with Heroku, I need a few add-ons to make this app fully operational. In production the variable DATABASE_URL is available within my app. But if I try some other add-ons that use environment variables (Mailtrap in my case), variables aren't copied into the instance during runtime.So my question is simple: how can I make docker instances aware of the environment variables when executed on Heroku?As you may ask, I already know that we can specified an environment directive right in docker-compose.yml. I would like to avoid that in order to be able to share this file through the project repository. <code> ",Transmit Heroku environment variables to Docker instance
One-liner to generate PowerBall picks in Swift?," With the U.S.'s large $1.5 Billion lottery this week, I wrote a function in Ruby to make Powerball picks. In Powerball, you choose 5 numbers from the range 1..69 (with no duplicates) and 1 number from the range 1..26.This is what I came up with: It works by creating an array of integers from 1 to 69, shuffling that array, choosing the first 5 numbers, sorting those, and finally adding on a number from 1 to 26.To do this in Swift takes a bit more work since Swift doesn't have the built-in shuffle method on Array.This was my attempt: Since there is no shuffle method, it works by creating an [Int] with values in the range 1...69. It then uses map to create [(Int, Double)], an array of tuple pairs that contain the numbers and a random Double in the range 0.0 ..< 1.0. It then sorts this array using the Double values and uses a second map to return to [Int] and then uses the slice [0...4] to extract the first 5 numbers and sort() to sort them.In the second line, it appends a number in the range 1...26. I tried adding this to the first line, but Swift gave the error: Expression was too complex to be solved in reasonable time; consider breaking up the expression into distinct sub-expressions.Can anyone suggest how to turn this into a 1-line function? Perhaps there is a better way to choose the 5 numbers from 1...69. <code>  def pball Array(1..69).shuffle[0..4].sort + [rand(1..26)]end func pball() -> [Int] { let arr = Array(1...69).map{($0, drand48())}.sort{$0.1 < $1.1}.map{$0.0}[0...4].sort() return arr + [Int(arc4random_uniform(26) + 1)]}",One-liner to generate Powerball picks in Swift?
"Is there an alternative (inversish) method for ""array#include?"""," I've always wondered if there is an inverse method for include?.So that given: I can check if the string is in the array rather than if the array contains the string. Something like: I can't think of a situation where this is necessary, but often I think from that direction rather than the other way around. <code>  str = ""a""ary = [""a"", ""b"", ""c""] str.in?(ary)",Is there an inversish method for `Array#include?`?
Error running multiple Watir IE instances: failed call to IWebBrowser2::Navigate2," I've set up a Watir-Webdriver script which I want to report to a remote service: At the same time, node.js/express watir is pinging to has the following endpoint: Question: Why is Net::HTTP timing out when hitting /update_status? Interestingly, if server returns 404 (endpoint doesn't exist), Watir script continues normally. Net::ReadTimeout is obviously the culrpit, but why?  <code>  puts ""Starting..."" b = Watir::Browser.new :ie puts ""Started browser"" puts ""Setting status as non-idle"" request = Net::HTTP::Post.new() url = URI(HOME + '/update_status') request.body = JSON.generate({ scrapeId: SCRAPE_ID, status: 'working' }) # This step freezes processing Net::HTTP.start(url.host, url.port) {|http| http.request(request)} puts ""This step never happens"" app.post('/update_status', function(req, res) { redis.hset(req.body.scrapeId, 'status', req.body.status); if (req.body.status === 'finished') { redis.expire(req.body.scrapeId, SIX_HOURS); } res.send('response from post /update_status');});",Why do Net:HTTP / HTTParty calls interrupt Watir-Webdriver script / Net::ReadTimeout error
Passing an environment variable to a shell script," I'm running Fastlane (a continuous build tool for iOS) in order to execute a custom shell script for decrypting a file.This is the command. I cannot figured out a way to pass the environment variable to that script. Obviously, if I hardcode the pwd into the script, it works correctly. Any suggestions? <code>  sh ""./decrypt.sh ENV['ENCRYPTION_P12']"" sh ""./decrypt.sh mypwd""",Passing an environment variable to a shell script from Fastlane
Currying a function with its second argument," Say I have a generic Proc, Lambda or method which takes an optional second argument: Now I want to curry this function, giving it an exp of 3. There's an ambiguity here, arising from the keyword arguments and the new hash syntax, where Ruby interprets exp: 3 as a hash being passed as the first argument, base. This results in the function immediately being invoked, rendering a NoMethodError when #** is sent to the hash.Setting a default value for the first argument will similarly result in the function being immediately invoked when currying, and if I mark the first argument as required, without providing a default: the interpreter will complain that I'm missing argument base when I attempt to curry the Proc.How can I curry a function with the second argument? <code>  pow = -> (base, exp: 2) { base**exp } cube = pow.curry.call(exp: 3) pow = -> (base:, exp: 2) { base**exp }",Currying a proc with keyword arguments in Ruby
Currying a proc with keyword arguments," Say I have a generic Proc, Lambda or method which takes an optional second argument: Now I want to curry this function, giving it an exp of 3. There's an ambiguity here, arising from the keyword arguments and the new hash syntax, where Ruby interprets exp: 3 as a hash being passed as the first argument, base. This results in the function immediately being invoked, rendering a NoMethodError when #** is sent to the hash.Setting a default value for the first argument will similarly result in the function being immediately invoked when currying, and if I mark the first argument as required, without providing a default: the interpreter will complain that I'm missing argument base when I attempt to curry the Proc.How can I curry a function with the second argument? <code>  pow = -> (base, exp: 2) { base**exp } cube = pow.curry.call(exp: 3) pow = -> (base:, exp: 2) { base**exp }",Currying a proc with keyword arguments in Ruby
How can I make this specific program run faster? My current code times out after n > 9999. Details below," Problem QuestionDivisors of 42 are : 1, 2, 3, 6, 7, 14, 21, 42. These divisors squared are: 1, 4, 9, 36, 49, 196, 441, 1764. The sum of the squared divisors is 2500 which is 50 * 50, a square!Given two integers m, n (1 <= m <= n) we want to find all integers between m and n whose sum of squared divisors is itself a square. 42 is such a number.The result will be an array of arrays, each subarray having two elements, first the number whose squared divisors is a square and then the sum of the squared divisors.Code belowHow can I make this specific program run faster? My current code times out after n > 9999. <code>  #returns the divisors of each number in an array of arraysr = (m..n).to_a.map { |z| (1..z).select { |x| z % x == 0} }#this finds all integers between m and n whose sum of squared divisors is itself a squaresquarenumbers = r.map { |x| x.map { |c| c**2 }.inject(:+) }.select { |x| Math.sqrt(x) % 1 == 0 }#returns an array of booleans. booleans = r.map { |x| x.map { |c| c**2 }.inject(:+) }.map { |x| Math.sqrt(x) % 1 == 0 }#returns the index of each of the true values in booleans as an arrayindexer = booleans.map.with_index{|x, i| i if x == true }.compact#returns the numbers whose squared divisors is a square in an arrayunsqr = indexer.map { |x| (m..n).to_a[x] }#merges the two arrays together, element for element and creates an array of arraysunsqr.zip(squarenumbers) # for m = 1 and n = 1000 the result would be# [[1, 1], [42, 2500], [246, 84100], [287, 84100], [728, 722500]]",Find all integers between m and n whose sum of squared divisors is itself a square
Why is `return a or b` a syntax error in ruby?, This is just fine: This is also fine: This returns void value expression: Why? It doesn't even get executed; it fails the syntax check. What does void value expression mean? <code>  def foo a or bend def foo return a || bend def foo return a or bend,Why is `return a or b` a void value expression error in Ruby?
Why is `return a or b` a syntax error in Ruby?, This is just fine: This is also fine: This returns void value expression: Why? It doesn't even get executed; it fails the syntax check. What does void value expression mean? <code>  def foo a or bend def foo return a || bend def foo return a or bend,Why is `return a or b` a void value expression error in Ruby?
"""Local variables"" for a class in ruby"," I have noticed the following code is syntactically correct: Now, I know that instance variables are accessed by @, and class variables by @@, but I couldn't figure out where bar is stored in this case or how to access it.How can I find bar's scope? <code>  class Foo bar = 3end",Local variables for a class in ruby
How to get every possible match of a regexp in Ruby or Javascript?," I'm looking for a way, either in Ruby or Javascript, that will give me all matches, possibly overlapping, within a string against a regexp.Let's say I have str = ""abcadc"", and I want to find occurrences of a followed by any number of characters, followed by c. The result I'm looking for is [""abc"", ""adc"", ""abcadc""]. Any ideas on how I can accomplish this?str.scan(/a.*c/) will give me [""abcadc""], str.scan(/(?=(a.*c))/).flatten will give me [""abcadc"", ""adc""]. <code> ",How to get possibly overlapping matches in a string
undefined method `cache' for nil:NilClass after upgrading to rails 4.2.5.1 (ruby 2.2.2)," While upgrading from rails 4.2.5 to the recently released 4.2.5.1, I have encountered this error. This error exists only for specs with a before_filter that render an invalid status, such as render file: ""public/422"", status: :unauthorized. I get this error for both ruby-2.2.2 and ruby-2.3.0The error exists in the action_view resolver method, implying the @cache value is nil. However, in the initialize method it should be instantiated: @cache = Cache.newI am still working on a reproducible sample, but am so far lost as to how @cache could be nil.These are the config variables set in my test.rb environment Stack Trace: <code>  config.cache_classes = trueconfig.eager_load = falseconfig.serve_static_files = trueconfig.static_cache_control = 'public, max-age=3600'config.consider_all_requests_local = trueconfig.action_controller.perform_caching = falseconfig.action_dispatch.show_exceptions = falseconfig.action_controller.allow_forgery_protection = false config.action_mailer.default_url_options = { :host => '127.0.0.1', :port => 3000}config.action_mailer.delivery_method = :testconfig.active_support.test_order = :randomconfig.active_support.deprecation = :stderr 1) UserController validates user Failure/Error: put :update, { id: user.id } NoMethodError: undefined method `cache' for nil:NilClass # ~/.rvm/gems/ruby-2.2.2/gems/actionview-4.2.5.1/lib/action_view/template/resolver.rb:151:in `cached' # ~/.rvm/gems/ruby-2.2.2/gems/actionview-4.2.5.1/lib/action_view/template/resolver.rb:121:in `find_all_anywhere' # ~/.rvm/gems/ruby-2.2.2/gems/actionview-4.2.5.1/lib/action_view/path_set.rb:68:in `block (2 levels) in _find_all' # ~/.rvm/gems/ruby-2.2.2/gems/actionview-4.2.5.1/lib/action_view/path_set.rb:66:in `each' # ~/.rvm/gems/ruby-2.2.2/gems/actionview-4.2.5.1/lib/action_view/path_set.rb:66:in `block in _find_all' # ~/.rvm/gems/ruby-2.2.2/gems/actionview-4.2.5.1/lib/action_view/path_set.rb:65:in `each' # ~/.rvm/gems/ruby-2.2.2/gems/actionview-4.2.5.1/lib/action_view/path_set.rb:65:in `_find_all' # ~/.rvm/gems/ruby-2.2.2/gems/actionview-4.2.5.1/lib/action_view/path_set.rb:50:in `find_file' # ~/.rvm/gems/ruby-2.2.2/gems/actionview-4.2.5.1/lib/action_view/lookup_context.rb:126:in `find_file' # ~/.rvm/gems/ruby-2.2.2/gems/actionview-4.2.5.1/lib/action_view/renderer/abstract_renderer.rb:18:in `find_file' # ~/.rvm/gems/ruby-2.2.2/gems/actionview-4.2.5.1/lib/action_view/renderer/template_renderer.rb:32:in `block in determine_template' # ~/.rvm/gems/ruby-2.2.2/gems/actionview-4.2.5.1/lib/action_view/lookup_context.rb:147:in `with_fallbacks' # ~/.rvm/gems/ruby-2.2.2/gems/actionview-4.2.5.1/lib/action_view/renderer/abstract_renderer.rb:18:in `with_fallbacks' # ~/.rvm/gems/ruby-2.2.2/gems/actionview-4.2.5.1/lib/action_view/renderer/template_renderer.rb:32:in `determine_template' # ~/.rvm/gems/ruby-2.2.2/gems/actionview-4.2.5.1/lib/action_view/renderer/template_renderer.rb:8:in `render' # ~/.rvm/gems/ruby-2.2.2/gems/actionview-4.2.5.1/lib/action_view/renderer/renderer.rb:42:in `render_template' # ~/.rvm/gems/ruby-2.2.2/gems/actionview-4.2.5.1/lib/action_view/renderer/renderer.rb:23:in `render' # ~/.rvm/gems/ruby-2.2.2/gems/actionview-4.2.5.1/lib/action_view/rendering.rb:100:in `_render_template' # ~/.rvm/gems/ruby-2.2.2/gems/actionpack-4.2.5.1/lib/action_controller/metal/streaming.rb:217:in `_render_template' # ~/.rvm/gems/ruby-2.2.2/gems/actionview-4.2.5.1/lib/action_view/rendering.rb:83:in `render_to_body' # ~/.rvm/gems/ruby-2.2.2/gems/actionpack-4.2.5.1/lib/action_controller/metal/rendering.rb:32:in `render_to_body' # ~/.rvm/gems/ruby-2.2.2/gems/actionpack-4.2.5.1/lib/action_controller/metal/renderers.rb:37:in `render_to_body' # ~/.rvm/gems/ruby-2.2.2/gems/actionpack-4.2.5.1/lib/abstract_controller/rendering.rb:25:in `render' # ~/.rvm/gems/ruby-2.2.2/gems/actionpack-4.2.5.1/lib/action_controller/metal/rendering.rb:16:in `render' # ~/.rvm/gems/ruby-2.2.2/gems/actionpack-4.2.5.1/lib/action_controller/metal/instrumentation.rb:44:in `block (2 levels) in render' # ~/.rvm/gems/ruby-2.2.2/gems/activesupport-4.2.5.1/lib/active_support/core_ext/benchmark.rb:12:in `block in ms' # ~/.rvm/rubies/ruby-2.2.2/lib/ruby/2.2.0/benchmark.rb:303:in `realtime' # ~/.rvm/gems/ruby-2.2.2/gems/activesupport-4.2.5.1/lib/active_support/core_ext/benchmark.rb:12:in `ms' # ~/.rvm/gems/ruby-2.2.2/gems/actionpack-4.2.5.1/lib/action_controller/metal/instrumentation.rb:44:in `block in render' # ~/.rvm/gems/ruby-2.2.2/gems/actionpack-4.2.5.1/lib/action_controller/metal/instrumentation.rb:87:in `cleanup_view_runtime' # ~/.rvm/gems/ruby-2.2.2/gems/activerecord-4.2.5.1/lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime' # ~/.rvm/gems/ruby-2.2.2/gems/actionpack-4.2.5.1/lib/action_controller/metal/instrumentation.rb:43:in `render'",undefined method `cache' for nil:NilClass after upgrading to rails 4.2.5.1
Unable to start Rails console in Rails 5 app," Any attempt to run rails console in the root directory of my Rails application produces the following error: undefined method `each' for nil:NilClass (NoMethodError)The full stack trace: I've traced the error to this block in the railtie.rb file in the Rails lib: which in turn comes from this block: I uninstalled the spring gem and installed the rubocop gem. Otherwise, my Gemfile contains the default gems.My Ruby version is 2.2.3 which is above the 2.2.2 version recommended for Rails 5.Ruby version: 2.2.3p173Rails version: 5.0.0.beta1.1RVM version: 1.26.11 <code>  /Users/gnerkus/.rvm/gems/ruby-2.2.3@rails-experiments/gems/railties-5.0.0.beta1.1/lib/rails/railtie.rb:245:in `each_registered_block': undefined method `each' for nil:NilClass (NoMethodError) from /Users/gnerkus/.rvm/gems/ruby-2.2.3@rails-experiments/gems/railties-5.0.0.beta1.1/lib/rails/railtie.rb:224:in `run_console_blocks' from /Users/gnerkus/.rvm/gems/ruby-2.2.3@rails-experiments/gems/railties-5.0.0.beta1.1/lib/rails/application.rb:461:in `block in run_console_blocks' from /Users/gnerkus/.rvm/gems/ruby-2.2.3@rails-experiments/gems/railties-5.0.0.beta1.1/lib/rails/engine/railties.rb:13:in `each' from /Users/gnerkus/.rvm/gems/ruby-2.2.3@rails-experiments/gems/railties-5.0.0.beta1.1/lib/rails/engine/railties.rb:13:in `each' from /Users/gnerkus/.rvm/gems/ruby-2.2.3@rails-experiments/gems/railties-5.0.0.beta1.1/lib/rails/application.rb:461:in `run_console_blocks' from /Users/gnerkus/.rvm/gems/ruby-2.2.3@rails-experiments/gems/railties-5.0.0.beta1.1/lib/rails/engine.rb:442:in `load_console' from /Users/gnerkus/.rvm/gems/ruby-2.2.3@rails-experiments/gems/railties-5.0.0.beta1.1/lib/rails/commands/console.rb:34:in `initialize' from /Users/gnerkus/.rvm/gems/ruby-2.2.3@rails-experiments/gems/railties-5.0.0.beta1.1/lib/rails/commands/console_helper.rb:9:in `new' from /Users/gnerkus/.rvm/gems/ruby-2.2.3@rails-experiments/gems/railties-5.0.0.beta1.1/lib/rails/commands/console_helper.rb:9:in `start' from /Users/gnerkus/.rvm/gems/ruby-2.2.3@rails-experiments/gems/railties-5.0.0.beta1.1/lib/rails/commands/commands_tasks.rb:78:in `console' from /Users/gnerkus/.rvm/gems/ruby-2.2.3@rails-experiments/gems/railties-5.0.0.beta1.1/lib/rails/commands/commands_tasks.rb:49:in `run_command!' from /Users/gnerkus/.rvm/gems/ruby-2.2.3@rails-experiments/gems/railties-5.0.0.beta1.1/lib/rails/command.rb:20:in `run' from /Users/gnerkus/.rvm/gems/ruby-2.2.3@rails-experiments/gems/railties-5.0.0.beta1.1/lib/rails/commands.rb:19:in `<top (required)>' from bin/rails:4:in `require' from bin/rails:4:in `<main>' def each_registered_block(type, &block) klass = self.class while klass.respond_to?(type) # The ':console' type doesn't seem to exist klass.public_send(type).each(&block) klass = klass.superclass endend def run_console_blocks(app) #:nodoc: each_registered_block(:console) { |block| block.call(app) }end",Rails console error: undefined method `each' for nil:NilClass (NoMethodError)
Unable to start Rails console in Rails 5 application," Any attempt to run rails console in the root directory of my Rails application produces the following error: undefined method `each' for nil:NilClass (NoMethodError)The full stack trace: I've traced the error to this block in the railtie.rb file in the Rails lib: which in turn comes from this block: I uninstalled the spring gem and installed the rubocop gem. Otherwise, my Gemfile contains the default gems.My Ruby version is 2.2.3 which is above the 2.2.2 version recommended for Rails 5.Ruby version: 2.2.3p173Rails version: 5.0.0.beta1.1RVM version: 1.26.11 <code>  /Users/gnerkus/.rvm/gems/ruby-2.2.3@rails-experiments/gems/railties-5.0.0.beta1.1/lib/rails/railtie.rb:245:in `each_registered_block': undefined method `each' for nil:NilClass (NoMethodError) from /Users/gnerkus/.rvm/gems/ruby-2.2.3@rails-experiments/gems/railties-5.0.0.beta1.1/lib/rails/railtie.rb:224:in `run_console_blocks' from /Users/gnerkus/.rvm/gems/ruby-2.2.3@rails-experiments/gems/railties-5.0.0.beta1.1/lib/rails/application.rb:461:in `block in run_console_blocks' from /Users/gnerkus/.rvm/gems/ruby-2.2.3@rails-experiments/gems/railties-5.0.0.beta1.1/lib/rails/engine/railties.rb:13:in `each' from /Users/gnerkus/.rvm/gems/ruby-2.2.3@rails-experiments/gems/railties-5.0.0.beta1.1/lib/rails/engine/railties.rb:13:in `each' from /Users/gnerkus/.rvm/gems/ruby-2.2.3@rails-experiments/gems/railties-5.0.0.beta1.1/lib/rails/application.rb:461:in `run_console_blocks' from /Users/gnerkus/.rvm/gems/ruby-2.2.3@rails-experiments/gems/railties-5.0.0.beta1.1/lib/rails/engine.rb:442:in `load_console' from /Users/gnerkus/.rvm/gems/ruby-2.2.3@rails-experiments/gems/railties-5.0.0.beta1.1/lib/rails/commands/console.rb:34:in `initialize' from /Users/gnerkus/.rvm/gems/ruby-2.2.3@rails-experiments/gems/railties-5.0.0.beta1.1/lib/rails/commands/console_helper.rb:9:in `new' from /Users/gnerkus/.rvm/gems/ruby-2.2.3@rails-experiments/gems/railties-5.0.0.beta1.1/lib/rails/commands/console_helper.rb:9:in `start' from /Users/gnerkus/.rvm/gems/ruby-2.2.3@rails-experiments/gems/railties-5.0.0.beta1.1/lib/rails/commands/commands_tasks.rb:78:in `console' from /Users/gnerkus/.rvm/gems/ruby-2.2.3@rails-experiments/gems/railties-5.0.0.beta1.1/lib/rails/commands/commands_tasks.rb:49:in `run_command!' from /Users/gnerkus/.rvm/gems/ruby-2.2.3@rails-experiments/gems/railties-5.0.0.beta1.1/lib/rails/command.rb:20:in `run' from /Users/gnerkus/.rvm/gems/ruby-2.2.3@rails-experiments/gems/railties-5.0.0.beta1.1/lib/rails/commands.rb:19:in `<top (required)>' from bin/rails:4:in `require' from bin/rails:4:in `<main>' def each_registered_block(type, &block) klass = self.class while klass.respond_to?(type) # The ':console' type doesn't seem to exist klass.public_send(type).each(&block) klass = klass.superclass endend def run_console_blocks(app) #:nodoc: each_registered_block(:console) { |block| block.call(app) }end",Rails console error: undefined method `each' for nil:NilClass (NoMethodError)
Unable to start Rails console after upgrade to Rails 5.0.0.beta1.1," Any attempt to run rails console in the root directory of my Rails application produces the following error: undefined method `each' for nil:NilClass (NoMethodError)The full stack trace: I've traced the error to this block in the railtie.rb file in the Rails lib: which in turn comes from this block: I uninstalled the spring gem and installed the rubocop gem. Otherwise, my Gemfile contains the default gems.My Ruby version is 2.2.3 which is above the 2.2.2 version recommended for Rails 5.Ruby version: 2.2.3p173Rails version: 5.0.0.beta1.1RVM version: 1.26.11 <code>  /Users/gnerkus/.rvm/gems/ruby-2.2.3@rails-experiments/gems/railties-5.0.0.beta1.1/lib/rails/railtie.rb:245:in `each_registered_block': undefined method `each' for nil:NilClass (NoMethodError) from /Users/gnerkus/.rvm/gems/ruby-2.2.3@rails-experiments/gems/railties-5.0.0.beta1.1/lib/rails/railtie.rb:224:in `run_console_blocks' from /Users/gnerkus/.rvm/gems/ruby-2.2.3@rails-experiments/gems/railties-5.0.0.beta1.1/lib/rails/application.rb:461:in `block in run_console_blocks' from /Users/gnerkus/.rvm/gems/ruby-2.2.3@rails-experiments/gems/railties-5.0.0.beta1.1/lib/rails/engine/railties.rb:13:in `each' from /Users/gnerkus/.rvm/gems/ruby-2.2.3@rails-experiments/gems/railties-5.0.0.beta1.1/lib/rails/engine/railties.rb:13:in `each' from /Users/gnerkus/.rvm/gems/ruby-2.2.3@rails-experiments/gems/railties-5.0.0.beta1.1/lib/rails/application.rb:461:in `run_console_blocks' from /Users/gnerkus/.rvm/gems/ruby-2.2.3@rails-experiments/gems/railties-5.0.0.beta1.1/lib/rails/engine.rb:442:in `load_console' from /Users/gnerkus/.rvm/gems/ruby-2.2.3@rails-experiments/gems/railties-5.0.0.beta1.1/lib/rails/commands/console.rb:34:in `initialize' from /Users/gnerkus/.rvm/gems/ruby-2.2.3@rails-experiments/gems/railties-5.0.0.beta1.1/lib/rails/commands/console_helper.rb:9:in `new' from /Users/gnerkus/.rvm/gems/ruby-2.2.3@rails-experiments/gems/railties-5.0.0.beta1.1/lib/rails/commands/console_helper.rb:9:in `start' from /Users/gnerkus/.rvm/gems/ruby-2.2.3@rails-experiments/gems/railties-5.0.0.beta1.1/lib/rails/commands/commands_tasks.rb:78:in `console' from /Users/gnerkus/.rvm/gems/ruby-2.2.3@rails-experiments/gems/railties-5.0.0.beta1.1/lib/rails/commands/commands_tasks.rb:49:in `run_command!' from /Users/gnerkus/.rvm/gems/ruby-2.2.3@rails-experiments/gems/railties-5.0.0.beta1.1/lib/rails/command.rb:20:in `run' from /Users/gnerkus/.rvm/gems/ruby-2.2.3@rails-experiments/gems/railties-5.0.0.beta1.1/lib/rails/commands.rb:19:in `<top (required)>' from bin/rails:4:in `require' from bin/rails:4:in `<main>' def each_registered_block(type, &block) klass = self.class while klass.respond_to?(type) # The ':console' type doesn't seem to exist klass.public_send(type).each(&block) klass = klass.superclass endend def run_console_blocks(app) #:nodoc: each_registered_block(:console) { |block| block.call(app) }end",Rails console error: undefined method `each' for nil:NilClass (NoMethodError)
Unable to start Rails console when using Rails 5," Any attempt to run rails console in the root directory of my Rails application produces the following error: undefined method `each' for nil:NilClass (NoMethodError)The full stack trace: I've traced the error to this block in the railtie.rb file in the Rails lib: which in turn comes from this block: I uninstalled the spring gem and installed the rubocop gem. Otherwise, my Gemfile contains the default gems.My Ruby version is 2.2.3 which is above the 2.2.2 version recommended for Rails 5.Ruby version: 2.2.3p173Rails version: 5.0.0.beta1.1RVM version: 1.26.11 <code>  /Users/gnerkus/.rvm/gems/ruby-2.2.3@rails-experiments/gems/railties-5.0.0.beta1.1/lib/rails/railtie.rb:245:in `each_registered_block': undefined method `each' for nil:NilClass (NoMethodError) from /Users/gnerkus/.rvm/gems/ruby-2.2.3@rails-experiments/gems/railties-5.0.0.beta1.1/lib/rails/railtie.rb:224:in `run_console_blocks' from /Users/gnerkus/.rvm/gems/ruby-2.2.3@rails-experiments/gems/railties-5.0.0.beta1.1/lib/rails/application.rb:461:in `block in run_console_blocks' from /Users/gnerkus/.rvm/gems/ruby-2.2.3@rails-experiments/gems/railties-5.0.0.beta1.1/lib/rails/engine/railties.rb:13:in `each' from /Users/gnerkus/.rvm/gems/ruby-2.2.3@rails-experiments/gems/railties-5.0.0.beta1.1/lib/rails/engine/railties.rb:13:in `each' from /Users/gnerkus/.rvm/gems/ruby-2.2.3@rails-experiments/gems/railties-5.0.0.beta1.1/lib/rails/application.rb:461:in `run_console_blocks' from /Users/gnerkus/.rvm/gems/ruby-2.2.3@rails-experiments/gems/railties-5.0.0.beta1.1/lib/rails/engine.rb:442:in `load_console' from /Users/gnerkus/.rvm/gems/ruby-2.2.3@rails-experiments/gems/railties-5.0.0.beta1.1/lib/rails/commands/console.rb:34:in `initialize' from /Users/gnerkus/.rvm/gems/ruby-2.2.3@rails-experiments/gems/railties-5.0.0.beta1.1/lib/rails/commands/console_helper.rb:9:in `new' from /Users/gnerkus/.rvm/gems/ruby-2.2.3@rails-experiments/gems/railties-5.0.0.beta1.1/lib/rails/commands/console_helper.rb:9:in `start' from /Users/gnerkus/.rvm/gems/ruby-2.2.3@rails-experiments/gems/railties-5.0.0.beta1.1/lib/rails/commands/commands_tasks.rb:78:in `console' from /Users/gnerkus/.rvm/gems/ruby-2.2.3@rails-experiments/gems/railties-5.0.0.beta1.1/lib/rails/commands/commands_tasks.rb:49:in `run_command!' from /Users/gnerkus/.rvm/gems/ruby-2.2.3@rails-experiments/gems/railties-5.0.0.beta1.1/lib/rails/command.rb:20:in `run' from /Users/gnerkus/.rvm/gems/ruby-2.2.3@rails-experiments/gems/railties-5.0.0.beta1.1/lib/rails/commands.rb:19:in `<top (required)>' from bin/rails:4:in `require' from bin/rails:4:in `<main>' def each_registered_block(type, &block) klass = self.class while klass.respond_to?(type) # The ':console' type doesn't seem to exist klass.public_send(type).each(&block) klass = klass.superclass endend def run_console_blocks(app) #:nodoc: each_registered_block(:console) { |block| block.call(app) }end",Rails console error: undefined method `each' for nil:NilClass (NoMethodError)
"Why did Rails change my ""V"" to an ""F""?"," I just ran this.. When I open the route localhost:3000/shared_drives/new the header reads New Shared DrifeWhen I try to create a new object on this page, I get this error What is going on?!?! Why did Rails change the name of my model? <code>  rails g scaffold shared_drive drive_name:string drive_path:string security_group_read:string security_group_modify:string ActionController::ParameterMissing in SharedDrivesController#create param is missing or the value is empty: shared_drife","Why did Rails change ""drive"" to ""drife""?"
Pundit::AuthorizationNotPerformedError, I try install pundit. But when I set up the gem I have this message.error messageI don't really understand. I am user.admin maybe is there a conflict? Thank you for your answer. <code> ,Rails: Pundit::AuthorizationNotPerformedError
How to override File::SEPARATOR?," Documents for File.join states that: join(string, ...) string Returns a new string formed by joining the strings using File::SEPARATOR. File.join(""usr"", ""mail"", ""gumby"") #=> ""usr/mail/gumby""However, the result below shows a different behavior. Could anybody explain what is happening? Is there a way to override this behavior by setting File::SEPARATOR to another value? I don't have a specific use case for this, nor am I looking for workarounds.. just curious. Thank you in advance. <code>  File::SEPARATOR #=> ""/""File::SEPARATOR = ""doge""File::SEPARATOR #=> ""doge""File.join(""so"", ""wow"") #=> ""so/wow""",How to override `File::SEPARATOR`
Positive lookbehind vs match reset (\K) in Ruby regex," I just learned about the apparently undocumented \K behavior in Ruby regex (thanks to this answer by anubhava). This feature (possibly named Keep?) also exists in PHP, Perl, and Python regex flavors. It is described elsewhere as ""drops what was matched so far from the match to be returned."" Is this behavior identical to the positive lookbehind marker as used below? If not, what differences do the two exhibit? <code>  ""abc"".match(/ab\Kc/) # matches ""c"" ""abc"".match(/(?<=ab)c/) # matches ""c""",Positive lookbehind vs match reset (\K) regex feature
"Warning! PATH is not properly set up, $PATH is not at first place"," I'm using Ruby 2.3.0. Every time I open a new bash tab, my ruby version downgrades to 2.2.3. So to ensure I'm using the latest, I do rvm use 2.3.0. That fixes the problem on a per-tab basis, and gives this message: So I do echo $PATH and get something pretty self explanatory: My .bashrc has this: And .bash_profile has this: This is what I get from rvm info So this confuses me even further. rvm list rubies says I have only 2.3.0, but my version here is set to 2.2.3.I can see pretty clearly what I need to do, which is (I think) set /Users/mkeable/.rvm/gems/ruby-2.3.0/bin at the start of $PATH. But how? <code>  PATH is not properly set up, '/Users/mkeable/.rvm/gems/ruby-2.3.0/bin' is not at first place, usually this is caused by shell initialization files - check them for 'PATH=...' entries, it might also help to re-add RVM to your dotfiles: 'rvm get stable --auto-dotfiles', to fix temporarily in this shell session run: 'rvm use ruby-2.3.0'. /usr/local/bin:/Users/mkeable/.rvm/gems/ruby-2.3.0/bin:/Users/mkeable/.rvm/gems/ruby-2.3.0@global/bin:/Users/mkeable/.rvm/rubies/ruby-2.3.0/bin:/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin:/usr/local/git/bin:/Users/mkeable/.rvm/bin export PATH=""/usr/local/heroku/bin:$PATH"" export PATH=""$PATH:$HOME/.rvm/bin"" # Add RVM to PATH for scripting source ~/.profileexport PATH=/usr/local/bin:$PATH[[ -s ""$HOME/.rvm/scripts/rvm"" ]] && source ""$HOME/.rvm/scripts/rvm"" # Load RVM into a shell session *as a function* Warning! PATH is not properly set up, '/Users/mkeable/.rvm/gems/ruby-2.3.0/bin' is not at first place, usually this is caused by shell initialization files - check them for 'PATH=...' entries, it might also help to re-add RVM to your dotfiles: 'rvm get stable --auto-dotfiles', to fix temporarily in this shell session run: 'rvm use ruby-2.3.0'.ruby-2.3.0: system: uname: ""Darwin BC.local 13.4.0 Darwin Kernel Version 13.4.0: Wed Mar 18 16:20:14 PDT 2015; root:xnu-2422.115.14~1/RELEASE_X86_64 x86_64"" system: ""osx/10.9/x86_64"" bash: ""/bin/bash => GNU bash, version 3.2.53(1)-release (x86_64-apple-darwin13)"" zsh: ""/bin/zsh => zsh 5.0.2 (x86_64-apple-darwin13.0)"" rvm: version: ""rvm 1.26.11 (latest) by Wayne E. Seguin <wayneeseguin@gmail.com>, Michal Papis <mpapis@gmail.com> [https://rvm.io/]"" updated: ""3 minutes 39 seconds ago"" path: ""/Users/mkeable/.rvm"" ruby: interpreter: ""ruby"" version: ""2.2.3p173"" date: ""2015-08-18"" platform: ""x86_64-darwin13"" patchlevel: ""2015-08-18 revision 51636"" full_version: ""ruby 2.2.3p173 (2015-08-18 revision 51636) [x86_64-darwin13]"" homes: gem: ""/Users/mkeable/.rvm/gems/ruby-2.3.0"" ruby: ""/Users/mkeable/.rvm/rubies/ruby-2.3.0"" binaries: ruby: ""/usr/local/bin/ruby"" irb: ""/usr/local/bin/irb"" gem: ""/usr/local/bin/gem"" rake: ""/usr/local/bin/rake"" environment: PATH: ""/usr/local/bin:/Users/mkeable/.rvm/gems/ruby-2.3.0/bin:/Users/mkeable/.rvm/gems/ruby-2.3.0@global/bin:/Users/mkeable/.rvm/rubies/ruby-2.3.0/bin:/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin:/usr/local/git/bin:/Users/mkeable/.rvm/bin"" GEM_HOME: ""/Users/mkeable/.rvm/gems/ruby-2.3.0"" GEM_PATH: ""/Users/mkeable/.rvm/gems/ruby-2.3.0:/Users/mkeable/.rvm/gems/ruby-2.3.0@global"" MY_RUBY_HOME: ""/Users/mkeable/.rvm/rubies/ruby-2.3.0"" IRBRC: ""/Users/mkeable/.rvm/rubies/ruby-2.3.0/.irbrc"" RUBYOPT: """" gemset: """"",How do I set $PATH?
Ruby testing with RSpec - expect the creation of a new object," I need to write an expectation that a new object will be created in a payment system. Code included from order.rb and order_spec.rb (Order class is here): I want to understand how I can write the appropriate spec to test that the new Payment object is created. I found this article from Semaphore CI useful, but am not sure about a solution. I am pretty sure I should be creating a test double of some sort, and then maybe a method stub to allow(order).to receive(:confirm_order).and_return(#new_object??). <code>  #order.rb def confirm_order(method_of_payment) if credit_card_but_products_out_stock?(method_of_payment) raise ""Cannot make credit card payment now, as some products are out of stock"" end order_total Payment.new(method_of_payment, self.total)end#order_spec.rbit 'it creates a new payment object if method_of_payment is valid and order.total is > 0' do order.add_product(product, 3) order.confirm_order(:credit_card) #Expect that a new payment object is created.end",Expect the creation of a new object
"What's the difference between ""Hash.new(0)"" and ""{}"""," I was getting an unexpected (to me) behavior in my code so I tried to isolate the problem in the REPL. However these constructors both appear to have the same result (an empty hash): When I pass {} into a reduce function I get a NoMethodError, though. What is the difference between these two constructors? <code>  irb> a = {}# => {}irb> b = Hash.new(0)# => {} irb> arr = ""count the occurance of each of the words"".scan(/\w+/)# => [""count"", ""the"", ""occurance"", ""of"", ""each"", ""of"", ""the"", ""words""]irb> x = arr.reduce(Hash.new(0)) { |hsh, word| hsh[word] += 1; hsh }# => {""count""=>1, ""the""=>2, ""occurance""=>1, ""of""=>2, ""each""=>1, ""words""=>1}irb> x = arr.reduce({}) { |hsh, word| hsh[word] += 1; hsh }# NoMethodError: undefined method `+' for nil:NilClass",What's the difference between `Hash.new(0)` and `{}`?
"Unintentional Session Hijacking in Rails 4.24 (Devise / Warden), Phusion Passenger 5.0.24"," Background DetailsWe recently encountered a problem wherein User A could unintentionally hijack the session of User B who was trying to access a Controller-generated download at (nearly) the same time as User A.We are still not 100% certain of all of the conditions necessary for this to happen, but we can reliably reproduce the problem in our production and staging environments. The important details of those environments are as follows.Environment DetailsApplication Server: Phusion Passenger 5.0.21 or 5.0.24 (meaning we tried both versions and both reproduced the issue)Framework: Rails 4.2.4Language: Ruby 2.2.3Operating System: CentOS 6Interestingly, we can NOT reproduce this problem using Phusion Passenger 4.0.53.Steps to Reproduce HijackingIt may seem too simple for it to possibly be true, but this is all that is necessary.User A logs into the systemUser B logs into the system User A and B both rapidly click the same download button at (nearly) the same timeThat's all it takes for someone's session to be unintentionally hijacked. (It seems like roulette as to whether A or B's session is hijacked, although it probably isn't as random as it seems.)We know that the user's session has been hijacked because we can see the current session's user first and last name displayed on the page. Each time, one user ""becomes"" the other user.If the user access roles are different, it also means that you can now potentially have a different level of access. For instance, someone might suddenly become an admin if that's the session they unintentionally hijacked .... Code RequiredIt initially seemed like Phusion Passenger was the only thing that was causing this problem because when we switched back to version 4, this issue no longer appeared. After some code changes though, we determined that a method in our controller code seemed to contribute to this problem happening.Here's a sample Controller method that would generate this problem on Phusion Passenger 5.0.21 or 5.0.24: It seems that our modification of Cache-Control may have very well played into this issue. Perhaps we shouldn't have modified this, but we're hoping that someone might have insights into how a cache-control parameter could have the power to suddenly plunge us into a different session.In order to test this, you must have a route that maps to Controller#sample_method and you must have a button available to click to download this file.I realize that we are specifying that we want a CSV and aren't returning a CSV, but I replaced our actual CSV with a proc in this case because our CSV is generated in a separate class.The above code in the environment listed above will reproduce the issue.Other DependenciesWe are using the Devise gem for user authentication. If you were to setup a test application to try to reproduce this problem, you'd need Devise and two accounts setup.Incidentally, you'll also need two people on two separate computers to test this out. You'll both need to be logged into the system at the same time and try to click the button a bunch of times at the same time as well.I realize this problem seems far-fetched, but it truly did manifest itself in our environment. It takes specific versions of Phusion Passenger, a specific set of headers, and a render block in order for it to happen, but happen it does. (The specific code is listed in the Code Required section.)The FixThe good news is that there is a way around this issue with code. We were able to use the #send_data method inside our format.csv block. Instead of the other block of code, we are simply doing something along these lines: This is cleaner code and better code. But we are still worried that there is some kind of larger issue - either in Passenger or perhaps even in our code itself.Ideas?Maybe an expert in the community can explain how the unintentional session hijacking like this is possible.It seems that perhaps the session cookies are not being sent back and forth properly. (We are not using the database for our sessions.)Although we have a fix for this particular instance of the problem, we weren't sure if there may be other underlying problems (perhaps in Passenger?) that allow this problem to manifest in the first place. It seems like a very strange issue.On the other hand, perhaps it's just that what we were doing with our headers was a bad idea.Your insights are appreciated! <code>  def sample_method respond_to do |format| format.csv { headers.merge!({'Cache-Control'=>'must-revalidate, post-check=0, pre-check=0'}) render :text => proc { |response, output| 100.times do |i| output.write(""This is line #{i}\n"") end } } endend format.csv { send_data data_here, filename: filename, type: 'text/csv', disposition: 'attachment' }","Unintentional Session Hijacking in Rails 4.2.4 (Devise / Warden), Phusion Passenger 5.0.24"
Time.now.today? #=> false (ruby)," It is 8:04PM in the Eastern Standard Time Zone (US) on February 5, 2016.When I run this command it returns false.Why, and how can I correct it? Thanks.Details:Rails 4.0.0Ruby 2.2.1p85Mac OS X El Capitan <code>  Time.now.today?#=> false",Why does Time.now.today? return false in my Rails 4 application?
Time.now.today? #=> false (ruby on rails method)," It is 8:04PM in the Eastern Standard Time Zone (US) on February 5, 2016.When I run this command it returns false.Why, and how can I correct it? Thanks.Details:Rails 4.0.0Ruby 2.2.1p85Mac OS X El Capitan <code>  Time.now.today?#=> false",Why does Time.now.today? return false in my Rails 4 application?
Can I merge two sets in Ruby?," I understand the Set class has the merge method just as the Hash class does. However, the Set#merge documentation says: Merges the elements of the given enumerable object to the set and returns self.It seems that merging can only take place between a Set and another non-Set object. Is that the case, or can I merge two sets as below? <code>  set1.merge(set2)",Can I merge two Set objects in Ruby?
Arithmetic calculation on Liquid template in Jekyll," I started using Jekyll 1 week ago with no knowledge in Ruby and I would like to implement the following functionality.From the Jekyll documentation I can use the following template to calculate the words in an article: I would like to use this information to calculate an estimated reading time in minutes for the article, based on the assumption of 200 words per minute on average. Which gives the following simple formula: Without being sure, but based on what I have read about Ruby, I should use {% %} to execute my calculation, but I am not sure if I can use the {{ page.content | number_of_words }} within that, to perform the division.Here is what I have currently:.html document: I am sure that number_of_words as used above does not exist and I am not sure if print will do the trick there. Any ideas? <code>  {{ page.content | number_of_words }} number_of_words / 200 ..<p class=""meta""> {% print {{number_of_words}} / 200 %}</p>..",Arithmetic calculation on Liquid template in Jekyll to calculate estimated reading time
Ruby :send vs :call metdod," I'm reading an article about Ruby 1.9. There are a lot of uses of the call method with Object.But with a recent version of Ruby, I get this: I think that in some version of Ruby (probably 1.9), method was renamed. But I'm not sure. Please make it clear. <code>  BasicObject.methods.include? :send # => trueBasicObject.methods.include? :call # => falseObject.methods.include? :call # => falsedef foo puts 'text'endObject.send :foo # => textObject.call :foo # => NoMethodError: undefined method `call' for Object:Class",Ruby `send` vs `call` method
How to save results of cucumber tests to a file, I have some Cucumber tests that can be run from console with Is there a command line option to store test results to a text file? <code>  rake cucumber,How to save Cucumber test results to a file
Ruby Rspec: Expect Element Type of an Array of Objects," I want to check that an array contains only objects of a specific class, let's say Float.A working example at the moment: Is there a way to validate if the array_to_test contains only Float instances?Sample non-working pseudocode: Do not consider Ruby and Rspec version as a restriction. <code>  it ""tests array_to_test class of elements"" do expect(array_to_test.count).to eq(2) expect(array_to_test[0]).to be_a(Float) expect(array_to_test[1]).to be_a(Float)end it ""tests array_to_test class of elements"" do expect(array_to_test).to be_a(Array[Float])end",Expect all array elements to be of the same class
spree install --auto-accept method_missing': undefined method `this'," I follow this tutorial:https://guides.spreecommerce.com/developer/getting_started_tutorial.html#installing-image-magickWhen I write I got this: My gemfile UPDATE:I created a github issue here https://github.com/spree/spree/issues/7104and they linked me to herehttps://github.com/rubygems/rubygems/issues/1420But I still don't know how to solve my problem <code>  jonstark@jonstark-pc:~/rails_projects/optima1$ spree install --auto-accept /home/jonstark/.rvm/rubies/ruby-2.3.0/lib/ruby/2.3.0/rubygems/specification.rb:2158:in`method_missing': undefined method `this' for#<Gem::Specification:0x4db6d12 activesupport-4.2.0> (NoMethodError) from/home/jonstark/.rvm/rubies/ruby-2.3.0/lib/ruby/2.3.0/rubygems/specification.rb:1057:in`find_active_stub_by_path' from/home/jonstark/.rvm/rubies/ruby-2.3.0/lib/ruby/2.3.0/rubygems/core_ext/kernel_require.rb:64:in`require' from/home/jonstark/.rvm/gems/ruby-2.3.0/gems/activesupport-4.2.0/lib/active_support/core_ext/string.rb:1:in`<top (required)>' from/home/jonstark/.rvm/rubies/ruby-2.3.0/lib/ruby/2.3.0/rubygems/core_ext/kernel_require.rb:127:in`require' from/home/jonstark/.rvm/rubies/ruby-2.3.0/lib/ruby/2.3.0/rubygems/core_ext/kernel_require.rb:127:in`rescue in require' from/home/jonstark/.rvm/rubies/ruby-2.3.0/lib/ruby/2.3.0/rubygems/core_ext/kernel_require.rb:40:in`require' from/home/jonstark/.rvm/gems/ruby-2.3.0/gems/spree_cmd-3.0.6.1/lib/spree_cmd/installer.rb:2:in`<top (required)>' from/home/jonstark/.rvm/rubies/ruby-2.3.0/lib/ruby/2.3.0/rubygems/core_ext/kernel_require.rb:55:in`require' from/home/jonstark/.rvm/rubies/ruby-2.3.0/lib/ruby/2.3.0/rubygems/core_ext/kernel_require.rb:55:in`require' from/home/jonstark/.rvm/gems/ruby-2.3.0/gems/spree_cmd-3.0.6.1/lib/spree_cmd.rb:13:in`<top (required)>' from/home/jonstark/.rvm/rubies/ruby-2.3.0/lib/ruby/2.3.0/rubygems/core_ext/kernel_require.rb:55:in`require' from/home/jonstark/.rvm/rubies/ruby-2.3.0/lib/ruby/2.3.0/rubygems/core_ext/kernel_require.rb:55:in`require' from/home/jonstark/.rvm/gems/ruby-2.3.0/gems/spree_cmd-3.0.6.1/bin/spree:2:in`<top (required)>' from/home/jonstark/.rvm/gems/ruby-2.3.0/bin/spree:23:in `load' from/home/jonstark/.rvm/gems/ruby-2.3.0/bin/spree:23:in `<main>' from/home/jonstark/.rvm/gems/ruby-2.3.0/bin/ruby_executable_hooks:15:in`eval' from/home/jonstark/.rvm/gems/ruby-2.3.0/bin/ruby_executable_hooks:15:in`<main>' source 'https://rubygems.org'ruby '2.3.0'#ruby-gemset=railstutorial_rails_4_0gem 'rails', '4.2'gem 'bootstrap-sass'gem 'sprockets'gem 'bcrypt-ruby'gem 'faker'gem 'will_paginate'gem 'bootstrap-will_paginate'gem 'ffaker'gem 'carrierwave', '~> 0.9'gem ""font-awesome-rails""gem 'sprockets-rails'gem 'rest-client'gem 'blogo'gem 'fog'gem 'carrierwave-aws'gem ""figaro""group :development, :test do gem 'sqlite3' gem 'rspec-rails'endgroup :test do gem 'selenium-webdriver' gem 'capybara' gem 'factory_girl_rails'endgem 'sass-rails'gem 'uglifier'gem 'coffee-rails'gem 'jquery-rails'gem 'turbolinks'gem 'jbuilder'group :doc do gem 'sdoc', '0.3.20', require: falseendgroup :production do gem 'pg' gem 'rails_12factor' gem 'heroku-deflater' # gem 'unicorn'end",rails error method_missing': undefined method `this' for Gem::Specification
rails error method_missing': undefined method `this' for," I follow this tutorial:https://guides.spreecommerce.com/developer/getting_started_tutorial.html#installing-image-magickWhen I write I got this: My gemfile UPDATE:I created a github issue here https://github.com/spree/spree/issues/7104and they linked me to herehttps://github.com/rubygems/rubygems/issues/1420But I still don't know how to solve my problem <code>  jonstark@jonstark-pc:~/rails_projects/optima1$ spree install --auto-accept /home/jonstark/.rvm/rubies/ruby-2.3.0/lib/ruby/2.3.0/rubygems/specification.rb:2158:in`method_missing': undefined method `this' for#<Gem::Specification:0x4db6d12 activesupport-4.2.0> (NoMethodError) from/home/jonstark/.rvm/rubies/ruby-2.3.0/lib/ruby/2.3.0/rubygems/specification.rb:1057:in`find_active_stub_by_path' from/home/jonstark/.rvm/rubies/ruby-2.3.0/lib/ruby/2.3.0/rubygems/core_ext/kernel_require.rb:64:in`require' from/home/jonstark/.rvm/gems/ruby-2.3.0/gems/activesupport-4.2.0/lib/active_support/core_ext/string.rb:1:in`<top (required)>' from/home/jonstark/.rvm/rubies/ruby-2.3.0/lib/ruby/2.3.0/rubygems/core_ext/kernel_require.rb:127:in`require' from/home/jonstark/.rvm/rubies/ruby-2.3.0/lib/ruby/2.3.0/rubygems/core_ext/kernel_require.rb:127:in`rescue in require' from/home/jonstark/.rvm/rubies/ruby-2.3.0/lib/ruby/2.3.0/rubygems/core_ext/kernel_require.rb:40:in`require' from/home/jonstark/.rvm/gems/ruby-2.3.0/gems/spree_cmd-3.0.6.1/lib/spree_cmd/installer.rb:2:in`<top (required)>' from/home/jonstark/.rvm/rubies/ruby-2.3.0/lib/ruby/2.3.0/rubygems/core_ext/kernel_require.rb:55:in`require' from/home/jonstark/.rvm/rubies/ruby-2.3.0/lib/ruby/2.3.0/rubygems/core_ext/kernel_require.rb:55:in`require' from/home/jonstark/.rvm/gems/ruby-2.3.0/gems/spree_cmd-3.0.6.1/lib/spree_cmd.rb:13:in`<top (required)>' from/home/jonstark/.rvm/rubies/ruby-2.3.0/lib/ruby/2.3.0/rubygems/core_ext/kernel_require.rb:55:in`require' from/home/jonstark/.rvm/rubies/ruby-2.3.0/lib/ruby/2.3.0/rubygems/core_ext/kernel_require.rb:55:in`require' from/home/jonstark/.rvm/gems/ruby-2.3.0/gems/spree_cmd-3.0.6.1/bin/spree:2:in`<top (required)>' from/home/jonstark/.rvm/gems/ruby-2.3.0/bin/spree:23:in `load' from/home/jonstark/.rvm/gems/ruby-2.3.0/bin/spree:23:in `<main>' from/home/jonstark/.rvm/gems/ruby-2.3.0/bin/ruby_executable_hooks:15:in`eval' from/home/jonstark/.rvm/gems/ruby-2.3.0/bin/ruby_executable_hooks:15:in`<main>' source 'https://rubygems.org'ruby '2.3.0'#ruby-gemset=railstutorial_rails_4_0gem 'rails', '4.2'gem 'bootstrap-sass'gem 'sprockets'gem 'bcrypt-ruby'gem 'faker'gem 'will_paginate'gem 'bootstrap-will_paginate'gem 'ffaker'gem 'carrierwave', '~> 0.9'gem ""font-awesome-rails""gem 'sprockets-rails'gem 'rest-client'gem 'blogo'gem 'fog'gem 'carrierwave-aws'gem ""figaro""group :development, :test do gem 'sqlite3' gem 'rspec-rails'endgroup :test do gem 'selenium-webdriver' gem 'capybara' gem 'factory_girl_rails'endgem 'sass-rails'gem 'uglifier'gem 'coffee-rails'gem 'jquery-rails'gem 'turbolinks'gem 'jbuilder'group :doc do gem 'sdoc', '0.3.20', require: falseendgroup :production do gem 'pg' gem 'rails_12factor' gem 'heroku-deflater' # gem 'unicorn'end",rails error method_missing': undefined method `this' for Gem::Specification
Formatting a string with gsub," Users input numbers in the following forms: I want all of these to be turned into a stripped version without the special characters like 18004324567. The data come in the form of a String, so string checking isn't required.My method is as below: Is there a better way to do this? Can the white space check with the regular expression in canonical_form method be performed without having an extra method for white spaces? How can this be refactored or done in a neater way? <code>  1-800-432-4567800-432-4567800.432.4566(800)432.4567+1(800)-432-4567800 432 4567 def canonical_form number a = remove_whitespaces number #to clear all whitespaces in between a.gsub(/[()-+.]/,'') enddef remove_whitespaces number number.gsub(/\s+/,'') #removes all whitespacesend",How to remove all non-digits from a string in ruby?
Formatting a string in ruby," Users input numbers in the following forms: I want all of these to be turned into a stripped version without the special characters like 18004324567. The data come in the form of a String, so string checking isn't required.My method is as below: Is there a better way to do this? Can the white space check with the regular expression in canonical_form method be performed without having an extra method for white spaces? How can this be refactored or done in a neater way? <code>  1-800-432-4567800-432-4567800.432.4566(800)432.4567+1(800)-432-4567800 432 4567 def canonical_form number a = remove_whitespaces number #to clear all whitespaces in between a.gsub(/[()-+.]/,'') enddef remove_whitespaces number number.gsub(/\s+/,'') #removes all whitespacesend",How to remove all non-digits from a string in ruby?
How to set :replace string for :invalid and :undef characters using CSV.read," Since ruby 1.9, CSV uses a parser that can perform encoding, if you use methods like:::foreach, ::open, ::read, and ::readlines.For example: CSV.read('path/to/file', encoding: ""windows-1252:UTF-8"") tries to read a file in windows-1252 and returns an array with utf-8 encoded strings.If the encode conversion between charsets has undefined characters it gives an Encoding::UndefinedConversionError.The String.encode method has some nice args to deal with this undefined characters:str = str.encode('UTF-8', invalid: :replace, undef: :replace, replace: """" )Is there a way to use this kind of replace rules for undefined conversions between charsets with CSV parser?Thank you. <code> ","How to use :replace, :invalid and :undef args for encoding using CSV.read?"
factory_girl_rails: Generator to create a Factory File for Existing Model?," I am using the rspec_rails and factory_girl_rails gems within my Rails project. All of the models are already created. Is there a generator that I can run that will create the factory file for an existing model?Ex: I already have a Blog model. RSpec allows me to generator a model spec file at spec/models/blog_spec.rb by simply running the following: Is there a generator that I can run in the command line that will generate the factory file for this existing model, located at: spec/factories/blogs.rb?I did not see any mentions of generators within the factory_girl_rails docs. <code>  rails generate rspec:model blog",Factory Girl / Rails: Generator to create a factory for existing model?
Workaround for XML to Hash Conversion Issue?," SummaryI'm using Ruby (ruby 2.1.2p95 (2014-05-08) [x86_64-linux-gnu] on my machine, ruby 1.9.3p484 (2013-11-22 revision 43786) [x86_64-linux] in production environment) and Nori to convert an XML document (initially processed with Nokogiri for some validation) into a Ruby Hash, but I later discovered that Nori is dropping the attributes of the deepest XML elements.Issue Details and ReproducingTo do this, I'm using code similar to the following: The code generally works as intended, except for one case. Whenever Nori parses the XML text, it drops element attributes from the leaf elements (i.e. elements that have no child elements).For example, the following document: ...is converted to the expected Hash (some output omitted for brevity): The problem shows up when element attributes are used on elements with no children. For example, the following document is not converted as expected: The same Nori.new.parse(xml.to_s), as displayed by awesome_print, shows the attributes of the deepest <field> elements are absent: The Hash only has their values as a list, which is not what I wanted. I expected the <field> elements to retain their attributes just like their parent elements (e.g. see @id=""1"" for <object>), not for their attributes to get chopped off.Even if the document is modified to look as follows, it still doesn't work as expected: It produces the following Hash: Which lacks the type=""whatever"" attributes for each field entry.Searching eventually lead me to Issue #59 with the last post (from Aug 2015) stating he can't ""find the bug in Nori's code.""ConclusionSo, my question is: Are any of you aware of a way to work around the Nori issue (e.g. perhaps a setting) that would allow me to use my original schema (i.e. the one with attributes in elements with no children)? If so, can you share a code snippet that will handle this correctly?I had to re-design my XML schema and change code at about three times to make it work, so if there's a way to get Nori to behave, and I'm simply not aware of it, I'd like to know what it is.I'd like to avoid installing more libraries as much as possible just to get this working properly with the schema structure I originally wanted to use, but I'm open to the possibility if it's proven to work. (I'd have to re-factor the code once again...) Frameworks are definitely overkill for this, so please: do not suggest Ruby on Rails or similar full-stack solutions.Please note that my current solution, based on a (reluctantly) redesigned schema, is working, but it's more complicated to generate and process than the original one, and I'd like to go back to the simpler/shallower schema. <code>  xml = Nokogiri::XML(File.open('file.xml')) { |config| config.strict.noblanks }hash = Nori.new.parse xml.to_s <?xml version=""1.0""?><root> <objects> <object> <fields> <id>1</id> <name>The name</name> <description>A description</description> </fields> </object> </objects></root> irb(main):066:0> xml = Nokogiri::XML(txt) { |config| config.strict.noblanks }irb(main):071:0> ap Nori.new.parse(xml.to_s), :indent => -2{ ""root"" => { ""objects"" => { ""object"" => { ""fields"" => { ""id"" => ""1"", ""name"" => ""The name"" ""description"" => ""A description"" } } } }} <?xml version=""1.0""?><root> <objects> <object id=""1""> <fields> <field name=""Name"">The name</field> <field name=""Description"">A description</field> </fields> </object> </objects></root> irb(main):131:0> ap Nori.new.parse(xml.to_s), :indent => -2{ ""root"" => { ""objects"" => { ""object"" => { ""fields"" => { ""field"" => [ [0] ""The name"", [1] ""A description"" ] }, ""@id"" => ""1"" } } }} <?xml version=""1.0""?><root> <objects> <object id=""1""> <fields> <Name type=""string"">The name</Name> <Description type=""string"">A description</Description> </fields> </object> </objects></root> { ""root"" => { ""objects"" => { ""object"" => { ""fields"" => { ""Name"" => ""The name"", ""Description"" => ""A description"" }, ""@id"" => ""1"" } } }}",XML to Hash conversion: Nori drops the attributes of the deepest XML elements
Two methods with same name. one with parameters. and one without," Is there a way to make a method that can accept a parameter, but can also be called without one, in which case the parameter is regarded nil like the following? <code>  some_func(variable)some_func",A method with an optional parameter
What is difference between ruby size and length methods," When I ran size and length on a string, they returned the same value. What is the difference between these two methods? <code>  ""akash"".size # => 5""akash"".length # => 5",What is the difference between `size` and `length` methods
How to verify that IO.copy_stream was succesful," A great answer here explains how, in Ruby, to download a file without loading it into memory:https://stackoverflow.com/a/29743394/4852737 How would I verify that the IO.copy_stream call to download the file was actually successful meaning that the downloaded file is the exact same file I intended to download, not a half downloaded corrupt file? The documentation says that IO.copy_stream returns the number of bytes that it copied, but how can I know the number of bytes expected when I have not downloaded the file yet?  <code>  require 'open-uri'download = open('http://example.com/image.png')IO.copy_stream(download, '~/image.png')",How to verify that IO.copy_stream was successful
Ruby way to check if a string is not empty?, What's the best way to check if a variable is not blank in an else if condition in Ruby (not Rails)? or or <code>  elsif not variable.to_s.empty? # do somethingend elsif !variable.to_s.empty? # do somethingend elsif variable.to_s.length > 0 # do somethingend,Ruby way to check if a string is not blank?
What is the best way to check if a string is not empty in Ruby (not Rails)?, What's the best way to check if a variable is not blank in an else if condition in Ruby (not Rails)? or or <code>  elsif not variable.to_s.empty? # do somethingend elsif !variable.to_s.empty? # do somethingend elsif variable.to_s.length > 0 # do somethingend,Ruby way to check if a string is not blank?
Ruby way to check if a string is not blank or empty, What's the best way to check if a variable is not blank in an else if condition in Ruby (not Rails)? or or <code>  elsif not variable.to_s.empty? # do somethingend elsif !variable.to_s.empty? # do somethingend elsif variable.to_s.length > 0 # do somethingend,Ruby way to check if a string is not blank?
Rails check to see if today is e.g. Friday," So DateTime.current returns Fri, 11 Mar 2016 19:34:10 +0000.How can I determine the day of the week. For example, if DateTime.current is Friday(just the day of the week, regardless of the date)?DateTime.current == DateTime.parse(""Friday"") Won't work because DateTime.parse(""Friday"") returns Fri, 11 Mar 2016 00:00:00 +0000 which is not the same.How can I check whether only the date or only the time equals to a specific value?Thanks in advance!Basically I want to see if DateTime.current is not a weekend nor a public holiday and is between office working hours <code> ",Rails - Determine the day of the week
Rails - Determine the day of the way," So DateTime.current returns Fri, 11 Mar 2016 19:34:10 +0000.How can I determine the day of the week. For example, if DateTime.current is Friday(just the day of the week, regardless of the date)?DateTime.current == DateTime.parse(""Friday"") Won't work because DateTime.parse(""Friday"") returns Fri, 11 Mar 2016 00:00:00 +0000 which is not the same.How can I check whether only the date or only the time equals to a specific value?Thanks in advance!Basically I want to see if DateTime.current is not a weekend nor a public holiday and is between office working hours <code> ",Rails - Determine the day of the week
Undefind method: assert_not_nil in Minitest," I'm trying to execute the following code, but it is giving me an undefined method error: I'm trying to execute this code from Codeschool's Rails course, but it seems that there is no method assert_not_nil. I've also checked the documentation for MiniTest framework, and neither it is defined there, but I'm not sure. <code>  require 'minitest/autorun'require 'string_extension'class StringExtensionTest < Minitest::Test def test_humanize_returns_nothing assert_not_nil ""Yo"".humanize, ""humanize is returning nil."" endend",Undefined method: assert_not_nil in Minitest
Replace a specific line in a file wtih Ruby," I have a text file (a.txt) that looks like the following. I need to find a way to replace the 3rd line with ""close"". I did some search and most method involve searching for the line than replace it. Can't really do it here since I don't want to turn all the ""open"" to ""close"". Essentially (for this case) I'm looking for a write version of IO.readlines(""./a.txt"") [2]. <code>  opencloseopenopencloseopen",Replace a specific line in a file using Ruby
"Undefined instance method ""respond_to"" in Rails 5"," In rails 5 created with --api I have an error However, in the documentation for rails 4.2 it says http://edgeguides.rubyonrails.org/4_2_release_notes.html respond_with and the corresponding class-level respond_to have been moved to the responders gem. Add gem 'responders', '~> 2.0' to your Gemfile to use it: Instance-level respond_to is unaffected:And I'm calling the instance method. What's the matter? <code>  NoMethodError (undefined method `respond_to' for #<Api::MyController:0x005645c81f0798>Did you mean? respond_to?): class ApplicationController < ActionController::APIend# ...class Api::MyController < ApplicationController def method1 # ... respond_to do |format| format.xml { render(xml: ""fdsfds"") } format.json { render(json: ""fdsfdsfd"" ) } end","Undefined instance method ""respond_to"" in Rails 5 API Controller"
FactoryGirl Transient attributes? What are are they and why?," I read this from Thoughtbot but it's still confusing to me.This is their example: So,Is .upcased a real attribute on the model? What is the transient block really doing? Setting variables that can then be used in the factory?What is evaluator? Does it always need to be passed last? What if your create function uses traits, transients, and has multiple values? <code>  factory :user do transient do rockstar true upcased false end name { ""John Doe#{"" - Rockstar"" if rockstar}"" } email { ""#{name.downcase}@example.com"" } after(:create) do |user, evaluator| user.name.upcase! if evaluator.upcased endendcreate(:user, upcased: true).name#=> ""JOHN DOE - ROCKSTAR""",What are factory_girl transient attributes? Why would I use one?
Rails: random failures in specs because of wrong default locale," From time to time, some specs of my Rails app seem to fail randomly because suddenly English is not the default language anymore, but German: As one can see, the part ""Access for all"" suddenly is ""Zugang fr alle"". I googled for a solution and it seems that I18n.locale is a global object, so when it's changed in a spec, it persists.The problem doesn't always occur, but I can reproduce it when specifying a seed like this: rspec --seed 51012. So it really seems to be some issue with a spec being executed before (or after) some other spec.I have a feature spec which tests whether the locale can be changed, like this: I suspect this could be the problematic spec, and when it's run early, it has impact on other specs.I hoped that I could solve it by setting the language in the spec back to the default like this: Didn't work, also this one didn't: I'm a bit clueless now. How could I debug the situation, so I definitely find the source of the problem and fix it (or at least work around it)?UpdateUsing Dave's answer (rspec --bisect) I found the problem. Depending on the order that these specs were run, the locale was set to :de or :en for following specs.I fixed it with BoraMa's suggested code snippet: I'm still a bit astonished that RSpec/Rails don't do this on their own automatically... <code>  expected: ""Project test customer - Project test name (Audit, Access for all, 2015-06-15).pdf"" got: ""Project test customer - Project test name (Audit, Zugang fr alle, 2015-06-15).pdf"" it 'offers contents in german' do visit root_path(locale: :de) expect(page).to have_content 'Willkommen'end it 'offers contents in german' do visit root_path(locale: :de) expect(page).to have_content 'Willkommen' I18n.locale = :enend it 'offers contents in german' do visit root_path(locale: :de) expect(page).to have_content 'Willkommen' visit root_path(locale: :en)end # application_controller_spec.rbdescribe ApplicationController do controller(ApplicationController) do def index render text: 'Hello World' end end describe 'locale parameter' do it 'is set to english when not available in the request' do get :index expect(I18n.locale).to eq :en end it 'can be set through the request' do get :index, locale: :de expect(I18n.locale).to eq :de end endend RSpec.configure do |config| config.after(:each) { I18n.locale = :en }end",Specs of my Rails app fail randomly because of wrong default locale
Rails: Combining two ActiveRecord hashes into a single hash to create a timeline," I want create a visual timeline of all company events. The HTML for the timeline is built using a loop.For simplicity let's assume two models Hire & Deal. Both models have a date attribute and some model specific attributes. How do I merge the ActiveRecord results of both models, and then order the combined hash by date, into a single hash that I can loop through? <code> ",Combining two different ActiveRecord collections into one
Rails: Combining two different ActiveRecord collections into one," I want create a visual timeline of all company events. The HTML for the timeline is built using a loop.For simplicity let's assume two models Hire & Deal. Both models have a date attribute and some model specific attributes. How do I merge the ActiveRecord results of both models, and then order the combined hash by date, into a single hash that I can loop through? <code> ",Combining two different ActiveRecord collections into one
Ruby is broken on Ubuntu," I'm on Linux Mint 17.2.I recently removed ruby with apt-get purge ruby.I then installed rbenv and then did rbenv install 2.3.0 so now, ~/.rbenv/versions/2.3.0/bin/ruby exists.But now, I can't do gem install rubocop. I get this: But I can do ~/.rbenv/versions/2.3.0/bin/gem install rubocop.However, once I'm done, I can't use it: I also can't find out where this ruby came from: It's possible it was installed via RVM a long time ago.Any idea how I can fix my Ruby? <code>  $ gem install rubocoprbenv: gem: command not foundThe `gem' command exists in these Ruby versions: 2.3.0 $ rubocop --auto-correct-bash: /usr/local/bin/rubocop: /usr/bin/ruby1.9.1: bad interpreter: No such file or directory $ dpkg -S /usr/bin/ruby1.9.1dpkg-query: no path found matching pattern /usr/bin/ruby1.9.1",rbenv: gem commands are not found on Linux Mint
Recieve files from slack with slack bot," I need a slack bot that's able to receive and save files send from slack chatrooms.The problem is: slack doesn't send file contents, but an array of links pointing to the file. Most of them, including download link are private and cannot be accessed via bot. It does send one public link, but that link points at the file preview, which does not have the file itself (here's an example).So the question is: how can I access uploaded files via bot? <code> ",Access Slack files from a slack bot
Receive files from slack with slack bot," I need a slack bot that's able to receive and save files send from slack chatrooms.The problem is: slack doesn't send file contents, but an array of links pointing to the file. Most of them, including download link are private and cannot be accessed via bot. It does send one public link, but that link points at the file preview, which does not have the file itself (here's an example).So the question is: how can I access uploaded files via bot? <code> ",Access Slack files from a slack bot
Parse an html fragment whitelisting some custom tags," I'm trying to parse an HTML fragment that contains a custom HTML tag using Nokogiri.Example: I tried to load it in many ways, but none is optimal.If I use Nokogiri::HTML: When I use to_html, it adds a doctype and an html tag that wraps the content. It's undesired.If I use Nokogiri::XML: I got Error at line 2: Extra content at the end of the document, since in XML there must be a root tag that wraps all the document content. If I try to save this content again, The output is <div>hello</div> (every tag after the first is removed)I tried also doc = Nokogiri::HTML.fragment: But it complains about the custom-tag.How can I make Nokogiri parse correctly with this HTML fragment? <code>  string = ""<div>hello</div>\n<custom-tag></custom-tag>"" doc = Nokogiri::HTML(string) doc = Nokogiri::XML(string) doc = Nokogiri::HTML.fragment(string)",Parse an HTML fragment whitelisting some custom tags
Errno::ENOENT (No such file or directory @ rb_sysopen," I want to write something to a file. When this code is executed, I'm getting this error. I know this folder doesn't exist, but File.open with w mode creates a new file if it doesn't exist.Why is this not working? <code>  # where userid is any intger [sic]path = Rails.root + ""public/system/users/#{user.id}/style/img.jpg"" File.open(path, 'wb') do |file| file.puts f.readend ",Ruby: No such file or directory @ rb_sysopen - testfile (Errno::ENOENT)
Rails 4 - Rails doesn't see environment variable," I am trying to move a Rails application into production but I am having a problem with Rails not seeing my environment variable.I have the password for my database setup in my .bashrc file like In irb returns secretkey.Using and just returns secretkey but when starting the application I get I am using a slightly modified version of the init script on ""How To Deploy a Rails App with Unicorn and Nginx on Ubuntu 14.04"" to start unicorn.It is being hosted on Ubuntu Server 14.04. <code>  export APP_NAME_DATABASE_PASSWORD=secretkey ENV[""APP_NAME_DATABASE_PASSWORD""] RAILS_ENV=production rails c rails c Access is denied (using password: NO)",Rails doesn't see environment variable
"Efficient way to check nil on multiple variables in Ruby / Rails, or is checking a lot of variables for nil on one line something I should avoid?"," A lot of variables require some processing, so I'm checking if any of them are nil. Is there a more efficient way of writing the following? Or should I avoid checking a lot of variables for nil on one line? <code>  unless a.nil? || b.nil? || c.nil? || d.nil? || e.nil? || f.nil? || g.nil? render 'view'end",Check nil on multiple variables
Circular creation of Factory models throwing error," I have an app where a user can sign in with multiple services, e.g. Google Plus, Facebook, Twitter, etc.To facilitate this, I have a base User model which has_many Identity records. Each Identity record has a provider field (e.g. ""Google"", ""Facebook"", etc...) to indicate what provider is used to sign in.There's an ActiveRecord validation that only lets a user have one of each type of provider. So a user can't have 2 ""Google"" identities.I set up my factories as follows: The User model has a callback that creates an Identity record. It works great when running However, if I create the identity instead the identity factory will first try to create a parent user, which will in turn create another identity. When it finally gets back to creating the identity I made the call to, another identity already exists with the same provider for that user and it fails.Essentially, I need a way for the after(:create) callback to NOT trigger when the user is being created by the :identity factory. Is there a way to tell what made the call to create a particular factory? <code>  FactoryGirl.define do factory :user do sequence(:name) { |n| ""Julio Jones-#{n}""} sequence(:email) { |n| ""julio.jones-#{n}@atl.com"" } after(:create) do |user| create(:identity, user: user) end end factory :identity do user provider ""Google"" email { user.email } password ""password"" endend user = FactoryGirl.create(:user) identity = FactoryGirl.create(:identity)",How to avoid circular creation of associated models in factory_girl?
Unable to determine IP address from host name," I would like to test subdomains on localhost. I have following instructions: Before starting the server to run the application, the host should be configured so that the application can support subdomains for multiple users. To do that, go to your hosts file by typing sudo nano /etc/hosts in your terminal, then add subdomains at the end of the file as below: I followed the above instructions. The following error was encountered while trying to retrieve the URL: http://daycare.no:3000/ How can I solve this, please? <code>  127.0.0.1 admin.daycare.no127.0.0.1 daycare.no127.0.0.1 worker.daycare.no127.0.0.1 manager.daycare.no127.0.0.1 parent.daycare.no Unable to determine IP address from hostname daycare.noThe DNS server returned: Name Error: The domain name does not exist.This means that the cache was not able to resolve the hostname presented in the URL. Check if the address is correct.",rails subdomain on localhost
rails subdomain in localhost," I would like to test subdomains on localhost. I have following instructions: Before starting the server to run the application, the host should be configured so that the application can support subdomains for multiple users. To do that, go to your hosts file by typing sudo nano /etc/hosts in your terminal, then add subdomains at the end of the file as below: I followed the above instructions. The following error was encountered while trying to retrieve the URL: http://daycare.no:3000/ How can I solve this, please? <code>  127.0.0.1 admin.daycare.no127.0.0.1 daycare.no127.0.0.1 worker.daycare.no127.0.0.1 manager.daycare.no127.0.0.1 parent.daycare.no Unable to determine IP address from hostname daycare.noThe DNS server returned: Name Error: The domain name does not exist.This means that the cache was not able to resolve the hostname presented in the URL. Check if the address is correct.",rails subdomain on localhost
Geocoding API not responding fast enough error message," I am using the Geocoder gem but lately it does not seem to work.I get this error: My application_controller.rb is: This is development.rb: I am loading an IP addresses from development.rb to check if geocoder works locally, but it does not. I am getting the above error.Also, when printing prr I get nil.I also added a geocoder.rb initializer to raise the timeout to 15 seconds but even after 15 seconds of the browser loading the page I'm still getting the same message. Is it broken? Should I use another gem? If so, do you have any suggestions? <code>  Geocoding API not responding fast enough (use Geocoder.configure(:timeout => ...) to set limit). before_filter :lookup_ip_location private def lookup_ip_location if Rails.env.development? prr = Geocoder.search(request.remote_ip).first p ""this is #{prr.inspect}"" else request.location end end # test geocoder gem locally class ActionDispatch::Request def remote_ip ""71.212.123.5"" # ipd home (Denver,CO or Renton,WA) # ""208.87.35.103"" # websiteuk.com -- Nassau, Bahamas # ""50.78.167.161"" # HOL Seattle, WA end end",Geocoding API not responding fast enough
Why is infinity slightly larger than 10^9942066?," In ruby, some large numbers are larger than infinity. Through binary search, I discovered: Why is this? What is special about 109942066? It doesn't seem to be an arbitrary number like 9999999, it is not close to any power of two (it's approximately equivelent to 233026828.36662442).Why isn't ruby's infinity infinite? How is 109942066 involved?I now realize, any number greater than 109942066 will overflow to infinity: But that still leaves the question: Why 109942066? <code>  (1.0/0) > 10**9942066.000000001 # => false(1.0/0) > 10**9942066 # => trueRUBY_VERSION # => ""2.3.0"" 10**9942066.000000001 #=> Infinity10**9942067 #=> Infinity",Why is 10^9942066 the biggest power I can calculate without overflows?
Waht does &. Mean in Ruby?, I came across this line of ruby code. What does &. mean in this? <code>  @object&.method,What does &. (ampersand dot) mean in Ruby?
What does &. mean in Ruby?, I came across this line of ruby code. What does &. mean in this? <code>  @object&.method,What does &. (ampersand dot) mean in Ruby?
What does `&.` (ampersand dot) mean in Ruby?, I came across this line of ruby code. What does &. mean in this? <code>  @object&.method,What does &. (ampersand dot) mean in Ruby?
Nokogiri Requires Ruby version < 2.3," I am trying to get Rails to work on Windows 10. I am using Ruby 2.3.0, and Rails 4.2.6, and am temporarily using Nokogiri 1.6.3.When I try running rails new demo, it returns an error: When I run gem install nokogiri -v '1.6.7.2 I get: How do I update Nokogiri and get Rails to work? <code>  An error occurred while installing nokogiri (1.6.7.2), and Bundler cannotcontinue.Make sure that `gem install nokogiri -v '1.6.7.2'` succeeds before bundling. ERROR: Error installing nokogiri: nokogiri requires Ruby version < 2.3, >= 1.9.2.",Nokogiri requires Ruby version < 2.3
List all models in Rails console," I want to list all the models which have a respective collection in my mongodb database? I'm using mongoid gem for for MongoDB.I would try something like thisActiveRecord::Base.send :subclasseswhich works fine, but I'm not using ActiveRecord. <code> ",List all Mongoid models in Rails console
Ruby back end validate old attribute before new attribute?," In Ruby, how would I run a validation that says that a model attribute can only be X if it used to be Y? The example would be an attribute status that takes either in-progress or complete. I'd want to say when user marks the object status, it can always be marked in-progress, but it can only be marked complete if it was first marked in-progress. <code>  validate :status_changedef status_change unless self.status == ""complete"" && #here i want to say self.status used to be ""in progress"" errors[:base] << ""Can only mark object complete after it was first marked in progress"" endend",Old and new values for an attribute in ActiveRecord validation
Converting a dollar amount (string) to cents (integer) in Ruby," How do I convert a string with a dollar amount such as ""5.32"" or ""100"" to an integer amount in cents such as 532 or 10000?I have a solution below: but it seems wonky. I want to be sure because this will be an input to the PayPal API.I've also tried the money gem, but it wasn't able to take strings as inputs. <code>  dollar_amount_string = ""5.32""dollar_amount_bigdecimal = BigDecimal.new(dollar_amount_string)cents_amount_bigdecimal = dollar_amount_bigdecimal * BigDecimal.new(100)cents_amount_int = cents_amount_bigdecimal.to_i",Ruby: Convert dollar (String) to cents (Integer)
Converting a dollar amount (string) to cents (integer)," How do I convert a string with a dollar amount such as ""5.32"" or ""100"" to an integer amount in cents such as 532 or 10000?I have a solution below: but it seems wonky. I want to be sure because this will be an input to the PayPal API.I've also tried the money gem, but it wasn't able to take strings as inputs. <code>  dollar_amount_string = ""5.32""dollar_amount_bigdecimal = BigDecimal.new(dollar_amount_string)cents_amount_bigdecimal = dollar_amount_bigdecimal * BigDecimal.new(100)cents_amount_int = cents_amount_bigdecimal.to_i",Ruby: Convert dollar (String) to cents (Integer)
How can I check if string ends with substring in Liquid?, I know there is a contains keyword so I can use: But how can I check if a string ends with a particular substring?I've tried this but it won't work: <code>  {% if some_string contains sub_string %} <!-- do_something -->{% ... %} {% if some_string.endswith? sub_string %} <!-- do_something -->{% ... %},How can I check if a string ends with a particular substring in Liquid?
regex matching whole line," I'm trying to match whole line of text starting from ! with regex.I made something like this: /(!\w+\s+\S+)/ig which is pretty close, but only for 2 words. I would like to match words upto new line. Also I see problem with spoiler in the middle of sentence. Live example: http://www.rubular.com/r/MXmholsDwE <code> ",Regex matching whole line starting with an exclamation mark
Using C++ Stl set with Swig," I am using Swig to use C++ in ruby and Currently I have done a simple example of file david.h And another file for swig like this My extconf.rb looks like this This helps me perform an extremely simple example in ruby like this Now I have been trying very hard for a while now but I simply can't figure out how to use set from c++ stl as given in example here. It would be really nice if someone could help me out with how I could create a stl set of integers or maybe vector and show how to insert and erase methods work on that set/vector. Simple code samples would be very useful not just for me but for many people who could face this in future.This just a personal request feel free to skip this if you are busy.To be honest I have been using stack overflow for quite a while now but slowly I am starting to get disappointed with the community. I have been posting a few questions and I have not received satisfactory answers, No up-votes, no Down-votes, nothing, I just don't receive any answers. What surprises me is that extremely trivial questions that can be answered in a simple google search are often very popular, and important questions from new users are either heavily down voted or totally ignored. I understand that the community does not OWE me anything. But I would be very thankful if someone could explain the possible reasons for that. Thanks <code>  #include <stdio.h>class David{public: David(int x) { this->x = x; } void announce() { printf(""David %d\n"", x); } int x;}; %module ""david""%{#include <libdavid.h>%}class David{public: David(int x); void announce(); int x;}; require 'mkmf'system('swig -c++ -ruby libdavid.i') or abortcreate_makefile('david') 2.2.1 :001 > a=David::David.new(42) => #<David::David:0x000000022c3ec0 @__swigtype__=""_p_David""> 2.2.1 :002 > a.x => 42 ",Convert std::set to ruby with Swig
How to write DOS line endings to a file from a Unix," My Unix Ruby program needs to write a file that will be read bySqlServer running on Windows. I need for the lines I write to thisfile to end in \r\n, the DOS/Windows line ending, rather than \n,the Unix line ending. I want this to happen without me having tomanually add the \r to the end of each line.The starting pointIf my program writes to the file like this: Then the file has Unix line endings: That is expected, since my program is running on Unix. But Ineed for this file (and this file only) to have DOS line endings.Adding the \r to each line manuallyIf I add the \r to each line manually: Then the file has DOS line endings: This works, but has to be repeated for each line I want to write.Using String#encodeAs shown by this SO answer, I can modify the string usingString#encode before writing it: This results in DOS line endings: This has the advantage that if I am writing multiple lines at once,one call to #encode will change all the line endings for that onewrite. However, it's verbose, and I still have to specify the lineending for every write.How can I cause each puts to an open file in Unix to endthe line in the Windows \r\n line ending rather than the Unix '\n'line ending?I am running Ruby 2.3.1. <code>  File.open(""/tmp/foo"", ""w"") do |file| file.puts ""stuff""end $ od -c foo0000000 s t u f f \n File.open(""/tmp/foo"", ""w"") do |file| file.puts ""stuff\r""end $ od -c /tmp/foo0000000 s t u f f \r \n File.open(""/tmp/foo"", ""w"") do |file| file.puts ""alpha\nbeta\n"".encode(crlf_newline: true)end $ od -c /tmp/foo0000000 a l p h a \r \n b e t a \r \n",How to write DOS line endings to a file from Unix
How to count a multiple values in a array," I can count a value using Array#count. How can I count multiple values in an array?What I wrote were: I think these are a bit redundant. <code>  numbers = [1, 2, 5, 5, 1, 3, 1, 2, 4, 3]numbers.count(1) #=> 3 numbers.count(1) + numbers.count(2) #=> 5[1,2].map{|i| numbers.count(i)}.sum #=> 5",How to count multiple values in an array
How to count a multiple values in an array," I can count a value using Array#count. How can I count multiple values in an array?What I wrote were: I think these are a bit redundant. <code>  numbers = [1, 2, 5, 5, 1, 3, 1, 2, 4, 3]numbers.count(1) #=> 3 numbers.count(1) + numbers.count(2) #=> 5[1,2].map{|i| numbers.count(i)}.sum #=> 5",How to count multiple values in an array
RuboCop: Line is too long <-- How to Ignore," I just added RuboCop to a rails project and installed the Sublime package to see RuboCop suggestions in the editor. I'm trying to figure out how to change the maximum line length from 80 characters, or just ignore the rule completely. Currently in use:RuboCop (gem)Sublime RuboCop SublimeLinter-rubocop <code> ",RuboCop: Line is too long  How to Ignore?
Unable to create a charge in Stripe," I'm building a subscription-based app, and I want to charge customers through Stripe subscriptions. I'm trying to create a customer and a charge after submitting the form. However, only tokens are being created, not charges and customers. So the forms goes through successfully, but in the Stripe dashboard, test charges and a customers don't exist. Here is my controller: <code>  class SubscribersController < ApplicationController before_filter :authenticate_user! def new end def update token = params[:stripeToken] customer = Stripe::Customer.create( card: token, plan: 1212, email: current_user.email ) Stripe::Charge.create( :amount => 8999, :currency => ""usd"", :source => token, :description => ""Example charge"" ) current_user.subscribed = true current_user.stripeid = customer.id current_user.save redirect_to profiles_user_path endend",How to create a charge and a customer in Stripe (Rails)
How to create a charge and a customer in Stripe ( Rails)," I'm building a subscription-based app, and I want to charge customers through Stripe subscriptions. I'm trying to create a customer and a charge after submitting the form. However, only tokens are being created, not charges and customers. So the forms goes through successfully, but in the Stripe dashboard, test charges and a customers don't exist. Here is my controller: <code>  class SubscribersController < ApplicationController before_filter :authenticate_user! def new end def update token = params[:stripeToken] customer = Stripe::Customer.create( card: token, plan: 1212, email: current_user.email ) Stripe::Charge.create( :amount => 8999, :currency => ""usd"", :source => token, :description => ""Example charge"" ) current_user.subscribed = true current_user.stripeid = customer.id current_user.save redirect_to profiles_user_path endend",How to create a charge and a customer in Stripe (Rails)
How to have javascript files included only on certain pages," I have a WYSIWYG editor that I have built into the site and customised. There are a lot of Javascript files that only need to be loaded on the pages with the WYSIWYG editor; currently they are loaded on every page (and even break other Javascript on certain pages). Currently the Javascript files are in assets/javascript/wysiwyg/ and aren't included as the require files in application.js but are still included on every page because of the assets pipeline (I think).I want to know if I can exclude these files from the other pages. Is it possible to move them from the assets pipeline to the public/ directory and import them (in the coffee script files, maybe?) into the appropriate views? <code> ",Rails - how to include Javascript files only on certain pages
How to have Javascript files included only on certain pages," I have a WYSIWYG editor that I have built into the site and customised. There are a lot of Javascript files that only need to be loaded on the pages with the WYSIWYG editor; currently they are loaded on every page (and even break other Javascript on certain pages). Currently the Javascript files are in assets/javascript/wysiwyg/ and aren't included as the require files in application.js but are still included on every page because of the assets pipeline (I think).I want to know if I can exclude these files from the other pages. Is it possible to move them from the assets pipeline to the public/ directory and import them (in the coffee script files, maybe?) into the appropriate views? <code> ",Rails - how to include Javascript files only on certain pages
could not find cocoapods," When I am trying to pod install, getting following issue: You can also find attached detailed image for above error.Could anyone sort out this issue???I've followed your instructions & uninstalled all gem. but when I tried to install cocoapods it is giving following error.Please advice. . .Thanks <code>  Faizs-MBP:newj faizfareed$ pod install/Library/Ruby/Site/2.0.0/rubygems/dependency.rb:315:in `to_specs': Could not find 'cocoapods' (>= 0) among 50 total gem(s) (Gem::LoadError)Checked in 'GEM_PATH=/Users/faizfareed/.gem/ruby/2.0.0:/Library/Ruby/Gems/2.0.0:/System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/gems/2.0.0', execute `gem env` for more information from /Library/Ruby/Site/2.0.0/rubygems/dependency.rb:324:in `to_spec' from /Library/Ruby/Site/2.0.0/rubygems/core_ext/kernel_gem.rb:64:in `gem' from /usr/local/bin/pod:22:in `<main>'Faizs-MBP:newj faizfareed$ ",Could not find 'cocoapods' (>= 0) among N total gem(s) (Gem::LoadError)
My updated OpenSSL version lacks SSLv3 support and this breaks Ruby. Can I fix it?, A recent OpenSSL update on ArchLinux broke Ruby because the latter depends on SSLv3 being supported by the former. Ruby code that uses OpenSSL will reveal the problem when they terminate with an error like the below: I use multiple versions of Ruby with RVM and the problem aplies to all of them. The OpenSSL version I have the problem with is 1.0.2h but I believe it was introduced with 1.0.2g. Version 1.0.2f works fine.How can this be compatibility issue be overcome (without downgradng OpenSSL) ? <code>  openssl.so: undefined symbol: SSLv3_method - .../openssl.so (LoadError),Undefined symbol: SSLv3_method - .../openssl.so with Ruby and ArchLinux
Handling null-associations resulting from ActiveRecord includes," I'm using the AR includes method to execute a LEFT OUTER JOIN between objects User and Building, where a User may or may not have a Building association: Since I'm using references, any associated Building objects will be eager loaded. My expectation was that I would then be able to iterate through the list of users, and check whether a user had a building associated with them without triggering additional queries, but I see that in fact whenever I try to access the building property of a user that doesn't have one, AR makes another SQL call to try and retrieve that building (though on subsequent tries it will just return nil).These queries are obviously redundant as the association would have been loaded during the initial join, and seems to defeat the whole purpose of eager loading with includes/references, as now I'm looking at N times the number of queries equal to the number of empty associations. User class: Is there a way to check the presence of the users' building association without triggering extra queries?ON RAILS 4.2.0 / POSTGRESUPDATE:Thank you @BoraMa for putting together this test. Looks like we're getting different behavior across recent Rails versions:OUTPUT (RAILS 4.2.0): OUTPUT (RAILS 4.2.6) OUTPUT (RAILS 5.0.0) Take aways:This issue was limited to ""dangling foreign keys (ie the residence_idcolumn is not nil but there is no corresponding building object)""(THANKS @FrederickCheung) The issue has been resolved as of Rails 4.2.6 <code>  users = User.includes(:building).references(:buildings) users.each do | user | # This will trigger a new query when building is not present: # SELECT ""buildings"".* FROM ""buildings"" WHERE ""buildings"".""address"" = $1 LIMIT 1 [[""address"", ""123 my street""]] if user.building puts 'User has building' else puts 'User has no building' endend class User < ActiveRecord::Base belongs_to :building, foreign_key: 'residence_id'end User 1 has buildingUser 2 has buildingUser 3 has no buildingD, [2016-05-26T11:48:38.147316 #11910] DEBUG -- : Building Load (0.2ms) SELECT ""buildings"".* FROM ""buildings"" WHERE ""buildings"".""id"" = $1 LIMIT 1 [[""id"", 123]]User 4 has no building User 1 has buildingUser 2 has buildingUser 3 has no buildingUser 4 has no building User 1 has buildingUser 2 has buildingUser 3 has no buildingUser 4 has no building",Unexpected behavior with ActiveRecord includes
Handle missing associations with ActiveRecord includes," I'm using the AR includes method to execute a LEFT OUTER JOIN between objects User and Building, where a User may or may not have a Building association: Since I'm using references, any associated Building objects will be eager loaded. My expectation was that I would then be able to iterate through the list of users, and check whether a user had a building associated with them without triggering additional queries, but I see that in fact whenever I try to access the building property of a user that doesn't have one, AR makes another SQL call to try and retrieve that building (though on subsequent tries it will just return nil).These queries are obviously redundant as the association would have been loaded during the initial join, and seems to defeat the whole purpose of eager loading with includes/references, as now I'm looking at N times the number of queries equal to the number of empty associations. User class: Is there a way to check the presence of the users' building association without triggering extra queries?ON RAILS 4.2.0 / POSTGRESUPDATE:Thank you @BoraMa for putting together this test. Looks like we're getting different behavior across recent Rails versions:OUTPUT (RAILS 4.2.0): OUTPUT (RAILS 4.2.6) OUTPUT (RAILS 5.0.0) Take aways:This issue was limited to ""dangling foreign keys (ie the residence_idcolumn is not nil but there is no corresponding building object)""(THANKS @FrederickCheung) The issue has been resolved as of Rails 4.2.6 <code>  users = User.includes(:building).references(:buildings) users.each do | user | # This will trigger a new query when building is not present: # SELECT ""buildings"".* FROM ""buildings"" WHERE ""buildings"".""address"" = $1 LIMIT 1 [[""address"", ""123 my street""]] if user.building puts 'User has building' else puts 'User has no building' endend class User < ActiveRecord::Base belongs_to :building, foreign_key: 'residence_id'end User 1 has buildingUser 2 has buildingUser 3 has no buildingD, [2016-05-26T11:48:38.147316 #11910] DEBUG -- : Building Load (0.2ms) SELECT ""buildings"".* FROM ""buildings"" WHERE ""buildings"".""id"" = $1 LIMIT 1 [[""id"", 123]]User 4 has no building User 1 has buildingUser 2 has buildingUser 3 has no buildingUser 4 has no building User 1 has buildingUser 2 has buildingUser 3 has no buildingUser 4 has no building",Unexpected behavior with ActiveRecord includes
Find out all the filtered examples in RSpec," I am trying to write a Git pre-commit hook that would not let the user commit if there is an example that is tagged with :focus.Using RSpec's API (okay even if it is private), is there any way to find out the number of examples with the :focus filter?I found the example_count-instance_method. It could be useful but I'm not sure how it can be called from an external script. <code> ",How to count RSpec examples filtered with :focus in a git hook?
Deprecation warning: ActiveRecord::Base.raise_in_transactional_callbacks= And How to Remove it," I get this message when I run my feature specs: DEPRECATION WARNING: ActiveRecord::Base.raise_in_transactional_callbacks= is deprecated, has no effect and will be removed without replacement.I am using Rails 5.0.0.rc1 and am not sure what is throwing this deprecation warning. I had this in my application.rb file. I removed it and the deprecation warning went away: I'd like tips on what this deprecation warning actually means and to know what triggers this deprecation warning. <code>  config.active_record.raise_in_transactional_callbacks = true",What causes deprecation warning: ActiveRecord::Base.raise_in_transactional_callbacks=?
Meaning of Deprecation warning: ActiveRecord::Base.raise_in_transactional_callbacks=," I get this message when I run my feature specs: DEPRECATION WARNING: ActiveRecord::Base.raise_in_transactional_callbacks= is deprecated, has no effect and will be removed without replacement.I am using Rails 5.0.0.rc1 and am not sure what is throwing this deprecation warning. I had this in my application.rb file. I removed it and the deprecation warning went away: I'd like tips on what this deprecation warning actually means and to know what triggers this deprecation warning. <code>  config.active_record.raise_in_transactional_callbacks = true",What causes deprecation warning: ActiveRecord::Base.raise_in_transactional_callbacks=?
"Rails, just upgraded my projects to rails 5, a particular image_tag not working (Carrierwave)"," I have just upgraded to Rails 5 and I have a weird issue while trying to show an image.I have the exact code I had for Rails 4: But after upgrading I get: Before upgrading to Rails 5, I didn't have any similar issue.What could be at fault here? Can it be something else and not a Rails upgrade issue? <code>  <%= image_tag article.image_url(:thumb) %> nil is not a valid asset source","Rails 5, ""nil is not a valid asset source"""
"Rails, ""nil is not a valid asset source"" for a particular image_tag (Carrierwave)"," I have just upgraded to Rails 5 and I have a weird issue while trying to show an image.I have the exact code I had for Rails 4: But after upgrading I get: Before upgrading to Rails 5, I didn't have any similar issue.What could be at fault here? Can it be something else and not a Rails upgrade issue? <code>  <%= image_tag article.image_url(:thumb) %> nil is not a valid asset source","Rails 5, ""nil is not a valid asset source"""
"Rails 5, ""nil is not a valid asset source"" using Carrierwave"," I have just upgraded to Rails 5 and I have a weird issue while trying to show an image.I have the exact code I had for Rails 4: But after upgrading I get: Before upgrading to Rails 5, I didn't have any similar issue.What could be at fault here? Can it be something else and not a Rails upgrade issue? <code>  <%= image_tag article.image_url(:thumb) %> nil is not a valid asset source","Rails 5, ""nil is not a valid asset source"""
Delete first key-value pair in ordered Hash," I have a Hash with timestamp as keys. I order the collection and get the first pair like this: But how do I remove it?The delete method requires you to know the exakt spelling of the key. Of course I could return the key and then use it in the delete method, but I was thinking if there was any more straight forward way? <code>  hash = { ""2016-05-31T22:30:58+02:00"" => { ""path"" => ""/"", ""method"" => ""GET"" }, ""2016-05-31T22:31:23+02:00"" => { ""path"" => ""/tour"", ""method"" => ""GET"" }, ""2016-05-31T22:31:05+02:00"" => { ""path"" => ""/contact_us"", ""method"" => ""GET"" }} hash.sort_by {|k, _| k}.first.first",Order Hash and delete first key-value pair
Using cached credentials to access proxy," I want to automate a time keeping web client, using nokogiri and mechanize. I need to connect via a proxy server, however the catch is, I don't know the username and password of said proxy server. I would like to grab the cached credentials for this proxy that are stored on the computer..For example, in c# you can use: This will grab the credentials that are already logged and use them to access the proxy, does Ruby have anything of the sort? I know that you can use proxies in ruby, and it's fairly simple, however I am unable to get any of the information for the proxy (username password). This proxy is not allowing me to connect to the web. Is there a way I can get the cached credentials (username, password) and access the proxy? Or, if not possible is there a way around it? <code>  string proxyUri = proxy.GetProxy(requests.RequestUri).ToString();requests.UseDefaultCredentials = true;requests.Proxy = new WebProxy(proxyUri, false);requests.Proxy.Credentials = System.Net.CredentialCache.DefaultCredentials;",How to access a proxy without username and password?
How to access a proxy without the username and password," I want to automate a time keeping web client, using nokogiri and mechanize. I need to connect via a proxy server, however the catch is, I don't know the username and password of said proxy server. I would like to grab the cached credentials for this proxy that are stored on the computer..For example, in c# you can use: This will grab the credentials that are already logged and use them to access the proxy, does Ruby have anything of the sort? I know that you can use proxies in ruby, and it's fairly simple, however I am unable to get any of the information for the proxy (username password). This proxy is not allowing me to connect to the web. Is there a way I can get the cached credentials (username, password) and access the proxy? Or, if not possible is there a way around it? <code>  string proxyUri = proxy.GetProxy(requests.RequestUri).ToString();requests.UseDefaultCredentials = true;requests.Proxy = new WebProxy(proxyUri, false);requests.Proxy.Credentials = System.Net.CredentialCache.DefaultCredentials;",How to access a proxy without username and password?
Acessing proxy with cached credentials like in c#?," I want to automate a time keeping web client, using nokogiri and mechanize. I need to connect via a proxy server, however the catch is, I don't know the username and password of said proxy server. I would like to grab the cached credentials for this proxy that are stored on the computer..For example, in c# you can use: This will grab the credentials that are already logged and use them to access the proxy, does Ruby have anything of the sort? I know that you can use proxies in ruby, and it's fairly simple, however I am unable to get any of the information for the proxy (username password). This proxy is not allowing me to connect to the web. Is there a way I can get the cached credentials (username, password) and access the proxy? Or, if not possible is there a way around it? <code>  string proxyUri = proxy.GetProxy(requests.RequestUri).ToString();requests.UseDefaultCredentials = true;requests.Proxy = new WebProxy(proxyUri, false);requests.Proxy.Credentials = System.Net.CredentialCache.DefaultCredentials;",How to access a proxy without username and password?
Inspecting source code for a method in ruby," My main goal is to be able to understand the library/gem that I am using, fully. I tried reading the source code from start to finish on Github but it was really hard. I thought a more enjoyable and more gentle stepping stone would just be to read the source code of each library/gem method as I use it. For example I want to know how the redirect_to method in Ruby on Rails works:How can I look up the source code for the redirect_to method?I am aware that in pry I can do something like show-method method, but how can I do this for methods in the Rails framework?Do you have any suggestions on how I can better understand gems and their APIs? Just reading the source code seems really hard, especially for frameworks.Thank You! <code> ",Navigating Ruby source code
Inspecting source code for a method in Ruby," My main goal is to be able to understand the library/gem that I am using, fully. I tried reading the source code from start to finish on Github but it was really hard. I thought a more enjoyable and more gentle stepping stone would just be to read the source code of each library/gem method as I use it. For example I want to know how the redirect_to method in Ruby on Rails works:How can I look up the source code for the redirect_to method?I am aware that in pry I can do something like show-method method, but how can I do this for methods in the Rails framework?Do you have any suggestions on how I can better understand gems and their APIs? Just reading the source code seems really hard, especially for frameworks.Thank You! <code> ",Navigating Ruby source code
"What does the comment ""frozen_string_literal: true"" do?"," This is the rspec binstub in my project directory. What is this intended to do? <code>  #!/usr/bin/env rubybegin load File.expand_path(""../spring"", __FILE__)rescue LoadErrorend# frozen_string_literal: true## This file was generated by Bundler.## The application 'rspec' is installed as part of a gem, and# this file is here to facilitate running it.#require ""pathname""ENV[""BUNDLE_GEMFILE""] ||= File.expand_path(""../../Gemfile"", Pathname.new(__FILE__).realpath)require ""rubygems""require ""bundler/setup""load Gem.bin_path(""rspec-core"", ""rspec"") # frozen_string_literal: true","Ruby: What does the comment ""frozen_string_literal: true"" do?"
Locking a user manually for devise rails," As a de-facto standard, we all using Devise for login in our Rails application and will use the Lockable module to lock users after a particular number of failed attempts.From Devises source code and the configuration option config.maximum_attempts = 20, I came to understand how Devise performs locking when the user tries to give wrong login credentials. Configuration is statically defined at Rails application boot time in initializers.My expectation is to set the maximum_attempts dynamically is this possible? If so, please guide me.I have a superadmin and user below each admin. Based on the super admin I would like to set a different failed_attempt value for each user during runtime. <code> ",Locking a user using a per-user `maximum_attempts` value with Devise for Rails
How can I set timezone in simple form?," I have a model with a datetime field, and is stored in UTC, how can I display that date in simple form gem in a specific timezone?Already tried with the option input_html: {value: @model.date.in_time_zone('Eastern Time (US & Canada)')}Note: I can't change the timezone of rails app <code> ",How can I set timezone in simple form datetime field?
Why do CSV::HeaderConverters stop processing after the `:symbol` converter?," Why does processing of header converters stop with the first non-String that's returned from a header converter?DetailsAfter the built-in :symbol header converter is triggered, no other converters will be processed. It seems that processing of header converters stops with the first converter that returns anything that's not a String (i.e. same behavior if you write a custom header converter that returns a Fixnum, or anything else).This code works as expected, throwing the exception in :throw_an_exception However, if you switch the order of the header converters so that the :symbol converter comes first, the :throw_an_exception lambda is never called. <code>  require 'csv'CSV::HeaderConverters[:throw_an_exception] = lambda do |header| raise 'Exception triggered.'endcsv_str = ""Numbers\n"" + ""1\n"" + ""4\n"" + ""7""puts CSV.parse( csv_str, { headers: true, header_converters: [ :throw_an_exception, :symbol ] }) ...header_converters: [ :symbol, :throw_an_exception]...",Why do CSV::HeaderConverters stop processing when a non-String is returned?
Why do CSV::HeaderConverters stop processing a non-String is returned?," Why does processing of header converters stop with the first non-String that's returned from a header converter?DetailsAfter the built-in :symbol header converter is triggered, no other converters will be processed. It seems that processing of header converters stops with the first converter that returns anything that's not a String (i.e. same behavior if you write a custom header converter that returns a Fixnum, or anything else).This code works as expected, throwing the exception in :throw_an_exception However, if you switch the order of the header converters so that the :symbol converter comes first, the :throw_an_exception lambda is never called. <code>  require 'csv'CSV::HeaderConverters[:throw_an_exception] = lambda do |header| raise 'Exception triggered.'endcsv_str = ""Numbers\n"" + ""1\n"" + ""4\n"" + ""7""puts CSV.parse( csv_str, { headers: true, header_converters: [ :throw_an_exception, :symbol ] }) ...header_converters: [ :symbol, :throw_an_exception]...",Why do CSV::HeaderConverters stop processing when a non-String is returned?
Ruby arrays intersection with duplicates," I have array(1 and 2). How can I get array3 from them? array1 & array2 returns [2,3,4,8], but I need to hold onto the duplicates. <code>  array1 = [2,2,2,2,3,3,4,5,6,7,8,9]array2 = [2,2,2,3,4,4,4,4,8,8,0,0,0]array3 = [2,2,2,3,4,8]",Ruby - array intersection (with duplicates)
Dynamically loading I18n translations from gem," I've created a gem (TranslationsGem) which I use in multiple projects (an engine and a Rails app). This gem sets up several hashes which are loaded into the I18n backend.A method #store_dynamic_translations sets up several hashes which are loaded into the I18n backend. It basically works like this: My tests confirm the method and translation loading works correctly. I can't however get it to work in the host engine and Rails app.In my test environment I have to execute the method in my test_helper to ensure the translations are loaded correctly. Outside the test environment I cannot seem to get it working correctly. I can verify that the method is executed, but the translations aren't loaded.I have tried numerous things for hours, like executing the method in the Engine initializer and using ActiveSupport hooks. In the host Rails app I tried executing the #store_dynamic_translations in an initializer but to no avail.Oddly enough, if I execute the #store_dynamic_translations in my Rails app controller or view, it works. Is there any way to set this up at app boot time?EDIT: I've setup an example repository which contains the current setup.A Gem which dynamically stores translations into the I18n backend.A Rails Engine which loads the gem and should have its translations availableIn the test in question uncommenting the MyI18n::Translations.store_dynamic_translations directive makes the test pass. But it should be possible to do from within an engine initializer I think? <code>  I18n.backend.store_translations(:en, { test: { property: 'value' } })",Dynamically loading I18n translations from gem into Rails Engine
skip after_commit on destroy," I'd like to skip the after_commit callback when destroying an object, without specifying explicitly a list of methods using the on syntax. I.e. something like: <code>  after_commit :foo, except: [:destroy]",Skip after_commit on destroy in rails
Building Regexp with #union method case insensitive," I have a list of strings, and need to build the regular expression from them, using Regexp#union. I need the resulting pattern to be case insensitive.The #union method itself does not accept options/modifiers, hence I currently see two options: and/or: Both variants look a bit weird.Is there an ability to construct a case-insensitive regular expression by using Regexp.union? <code>  strings = %w|one two three|Regexp.new(Regexp.union(strings).to_s, true) Regexp.union(*strings.map { |s| /#{s}/i })",How to build a case-insensitive regular expression with Regexp.union
Modules and Classes in Ruby," I'm reading my ruby book. Looking at the code below, I could've just created another method inside my class. Why would I want to do this? Why would I want to use a module? It's not like embedding this into other classes is any easier than just using normal inheritance. <code>  module Destroy def destroy(anyObject) @anyObject = anyObject puts ""I will destroy the object: #{anyObject}"" endendclass User include Destroy attr_accessor :name, :email def initialize(name,email) @name = name @email = email endendmy_info = User.new(""Bob"",""Bob@example.com"")puts ""So your name is: #{my_info.name} and you have email #{my_info.email}""user = User.new(""john"",""john@example.com"")user.destroy(""blah"")",What criteria justifies using a Module over a Class in Ruby?
What criteria to justifies using a Module over a Class in Ruby?," I'm reading my ruby book. Looking at the code below, I could've just created another method inside my class. Why would I want to do this? Why would I want to use a module? It's not like embedding this into other classes is any easier than just using normal inheritance. <code>  module Destroy def destroy(anyObject) @anyObject = anyObject puts ""I will destroy the object: #{anyObject}"" endendclass User include Destroy attr_accessor :name, :email def initialize(name,email) @name = name @email = email endendmy_info = User.new(""Bob"",""Bob@example.com"")puts ""So your name is: #{my_info.name} and you have email #{my_info.email}""user = User.new(""john"",""john@example.com"")user.destroy(""blah"")",What criteria justifies using a Module over a Class in Ruby?
Why would I ever use a Module vs adding a method in a Class?," I'm reading my ruby book. Looking at the code below, I could've just created another method inside my class. Why would I want to do this? Why would I want to use a module? It's not like embedding this into other classes is any easier than just using normal inheritance. <code>  module Destroy def destroy(anyObject) @anyObject = anyObject puts ""I will destroy the object: #{anyObject}"" endendclass User include Destroy attr_accessor :name, :email def initialize(name,email) @name = name @email = email endendmy_info = User.new(""Bob"",""Bob@example.com"")puts ""So your name is: #{my_info.name} and you have email #{my_info.email}""user = User.new(""john"",""john@example.com"")user.destroy(""blah"")",What criteria justifies using a Module over a Class in Ruby?
Using the same value for two attributes in FactoryGirl," I'm setting up an Artist model that has nameand birth_name attributes. In some cases, an artist's stage name is synonomous with their real name, vice-versa. What I'd like to do in my factory is use the birth_name (created using Faker) as the name attribute. I tried simply referencing as so: but get this error: What's the best way to get this to work? <code>  FactoryGirl.define do factory :artist do name { birth_name } birth_name { Faker::Name.name } endend ArgumentError: Factory not registered: birth_name",Using the same value for two attributes in FactoryBot
Is there a difference between TRUE and true in Ruby?," There are two instances of TrueClass, FalseClass and NilClass with different names: one in lowercase and one in uppercase. One instance appears to evaluate to the other: Is there a difference between these two constants, and if so, what are the differences? If they are the same, which of these constants should I use in my code? Should I write some_value = true or some_value = TRUE? <code>  true # => trueTRUE # => truetrue == TRUE # => true",Is there a difference between `TRUE` and `true`?
Update Ruby Version in OSX Yosemite," I need to update my ruby version from 2.0.0 to the latest version, I can not use some gems because my version is not updated.I had used Homebrew to install Ruby some time ago, How can i update my Ruby version? <code> ",How to update Ruby Version 2.0.0 to the latest version in Mac OSX Yosemite?
How can I implement this ternary coding rule with Rubocop?," I have a coding standard that suggests that the initial argument to a ternary should always be inside parenthesis, regardless of the expression.E.g. foo = (thing.baz?) ? [] : thing.barThe following should be considered an infraction:E.g. foo = thing.baz? ? [] : thing.barIs it possible to achieve this with Rubocop's built-in Cops, or does this require a custom Cop. If so, how would I implement it? <code> ",How can I enforce ternary parentheses with RuboCop?
Ruby / RestClient.get returning certificate verify failed," I am trying hit an internal testing API server using RestClient and Ruby v. 2.2.1. This is essentially the code: This is the failure message I get: If I'm reading this right, it looks like Ruby couldn't accept the SSL security certificate. This call works in the Chrome app Postman, but in order for it to work, I have to hit the URL in Chrome itself and accept that the connection is not secure (but proceed anyway), and THEN it will work in postman. Is there a way to ignore the certificate failures and proceed anyway in Ruby? <code>  url = ""https://10.10.0.10/thing/i/want/to/get""header = { :content_type => ""application/json"", :""x-auth-token"" => ""testingtoken"" }response = RestClient.get url, header SSL_connect returned=1 errno=0 state=SSLv3 read server certificate B: certificate verify failed (RestClient::SSLCertificateNotVerified)",RestClient.get returning certificate verify failed
PG::InsufficientPrivilege: ERROR: permission denied for relation schema_migrations rake db:create," I'm trying to create the database in Rails. In Postgres I see the development and test database, however, I'm getting a permissions error. I've tried to follow this link, didn't work for me.Error: PG::InsufficientPrivilege: ERROR: permission denied for relation schema_migrations : SELECT ""schema_migrations"".* FROM ""schema_migrations""Rails: permission denied for relation schema_migrations I log into postgres and did these commands. When I do \list I see the database is there. <code>  default: &default adapter: postgresql encoding: unicode pool: 5 host: localhost username: root password:development: <<: *default database: svp-chicago_development psql postgresCREATE USER rootCREATE DATABASE svp-chicago_developmentGRANT ALL PRIVILEGES ON DATABASE svp-chicago_development to rootALTER DATABASE svp-chicago_development OWNER TO root",Rails: PG::InsufficientPrivilege: ERROR: permission denied for relation schema_migrations
Why does the Ruby modul Kernel exists?," In the book OO Design in Ruby, Sandi Metz says that the main use of modules is to implement duck types with them and include them in every class needed. Why is the Ruby Kernel a module included in Object? As far as I know it isn't used anywhere else. What's the point of using a module? <code> ",Why does the Ruby module Kernel exist?
Why does the Ruby module Kernel exists?," In the book OO Design in Ruby, Sandi Metz says that the main use of modules is to implement duck types with them and include them in every class needed. Why is the Ruby Kernel a module included in Object? As far as I know it isn't used anywhere else. What's the point of using a module? <code> ",Why does the Ruby module Kernel exist?
Check if number is NaN in Ruby on Rails," I'm trying to check if a variable I have is equals to NaN in my Ruby on Rails application.I saw this answer, but it's not really useful because in my code I want to return 0 if the variable is NaN and the value otherwise: The problem is that if the number is not a NaN I get this error: I can't check if the number is a Float instance because it is in both cases (probably, I'm calculating an average).What can I do? It is strange only to me that a function to check if a variable is equals to NaN is avaible only to NaN objects? <code>  return (average.nan ? 0 : average.round(1)) NoMethodError: undefined method `nan?' for 10:Fixnum",Check if number is NaN
Subject vs let in Rspec," http://betterspecs.org/#subject has some info about subject and let. However, I am still unclear on the difference between them. Furthermore, the SO post What is the argument against using before, let and subject in RSpec tests? said it is better to not use either subject or let. Where shall I go? I am so confused. <code> ",What's the difference between RSpec's subject and let? When should they be used or not?
What is the purpose of `transient do` in FactoryGirl factories?, What is the purpose of transient do in FactoryBot factories?I've seen a lot of factories that begin with something like below. I've found some information on this blog:Using FactoryGirl to easily create complex data sets in RailsBut I still don't fully understand how and why to do this. My experience with FactoryBot is minimal.Could anyone with some experience using FactoryBot share some insight? <code>  factory :car do owner nil other_attribute nilend...,What is the purpose of a `transient do` block in FactoryBot factories?
What is the purpose of `transient do` block in FactoryGirl factories?, What is the purpose of transient do in FactoryBot factories?I've seen a lot of factories that begin with something like below. I've found some information on this blog:Using FactoryGirl to easily create complex data sets in RailsBut I still don't fully understand how and why to do this. My experience with FactoryBot is minimal.Could anyone with some experience using FactoryBot share some insight? <code>  factory :car do owner nil other_attribute nilend...,What is the purpose of a `transient do` block in FactoryBot factories?
What is the purpose of a `transient do` block in FactoryGirl factories?, What is the purpose of transient do in FactoryBot factories?I've seen a lot of factories that begin with something like below. I've found some information on this blog:Using FactoryGirl to easily create complex data sets in RailsBut I still don't fully understand how and why to do this. My experience with FactoryBot is minimal.Could anyone with some experience using FactoryBot share some insight? <code>  factory :car do owner nil other_attribute nilend...,What is the purpose of a `transient do` block in FactoryBot factories?
mysql query with Ruby," I run a SQL query with a ruby script that should take around 2 hours.How I can make sure the script will exit/end only when the process of the query finish, because right now I ran the script, it pass the query to the DB, and the script immediately close while the query still running on the DB.most of the query is commands like inserts, drop tables, create tables. I want to run this query only after the first one finish Any idea how to wait for the query to finish, because I want to add another query in the same script that check the first query after it finish. <code>  #!/usr/bin/env rubyrequire 'mysql2'client = Mysql2::Client.new(:host => ENV_YML['host'], :username => ENV_YML['username'], :password => ENV_YML['password'], :database => ENV_YML['dbtemp'], :flags => Mysql2::Client::MULTI_STATEMENTS)client.query(""... "") client.query(""SELECT ;"").each do |row|....end",Ruby script end before sql query finish
mysql query with Ruby - not waiting for the query result," I run a SQL query with a ruby script that should take around 2 hours.How I can make sure the script will exit/end only when the process of the query finish, because right now I ran the script, it pass the query to the DB, and the script immediately close while the query still running on the DB.most of the query is commands like inserts, drop tables, create tables. I want to run this query only after the first one finish Any idea how to wait for the query to finish, because I want to add another query in the same script that check the first query after it finish. <code>  #!/usr/bin/env rubyrequire 'mysql2'client = Mysql2::Client.new(:host => ENV_YML['host'], :username => ENV_YML['username'], :password => ENV_YML['password'], :database => ENV_YML['dbtemp'], :flags => Mysql2::Client::MULTI_STATEMENTS)client.query(""... "") client.query(""SELECT ;"").each do |row|....end",Ruby script end before sql query finish
Ruby script not waiting for the sql query result - mysql2," I run a SQL query with a ruby script that should take around 2 hours.How I can make sure the script will exit/end only when the process of the query finish, because right now I ran the script, it pass the query to the DB, and the script immediately close while the query still running on the DB.most of the query is commands like inserts, drop tables, create tables. I want to run this query only after the first one finish Any idea how to wait for the query to finish, because I want to add another query in the same script that check the first query after it finish. <code>  #!/usr/bin/env rubyrequire 'mysql2'client = Mysql2::Client.new(:host => ENV_YML['host'], :username => ENV_YML['username'], :password => ENV_YML['password'], :database => ENV_YML['dbtemp'], :flags => Mysql2::Client::MULTI_STATEMENTS)client.query(""... "") client.query(""SELECT ;"").each do |row|....end",Ruby script end before sql query finish
How do I print a the line number of each line in a String?," If I have a string within c1, I can print it in a line by doing: I want to give the number of each line with each line like this: But that doesn't work on a string.I tried using $.. When I do that in the above iterator like so: it prints the line number for the last line on each line.I also tried using lineno, but that seems to work only when I load a file, and not when I use a string.How do I print or access the line number for each line on a string? <code>  c1.each_line do |line| puts lineend c1.each_with_index do |line, index| puts ""#{index} #{line}""end puts #{$.} #{line}",How do I print the line number of each line in a string?
How do I print the line number of each line in a String?," If I have a string within c1, I can print it in a line by doing: I want to give the number of each line with each line like this: But that doesn't work on a string.I tried using $.. When I do that in the above iterator like so: it prints the line number for the last line on each line.I also tried using lineno, but that seems to work only when I load a file, and not when I use a string.How do I print or access the line number for each line on a string? <code>  c1.each_line do |line| puts lineend c1.each_with_index do |line, index| puts ""#{index} #{line}""end puts #{$.} #{line}",How do I print the line number of each line in a string?
Understanding Google::Auth::Stores::FileTokenStore," I'm trying to implement a 3 legged authentication in my app to the Google API, to be able to access registered users' Google Calendars.In the quickstart Ruby guide, this command comes up that as far as I understand should point to the user's tokens: It expects the tokens stored in a file (or Redis), but (of course) I store each user's tokens in my database (Postgres). Have I understand the purpose of the command wrongly or otherwise - how do I use it with a database store?Official documentation <code>  token_store = Google::Auth::Stores::FileTokenStore.new(file: CREDENTIALS_PATH)",Use Google::Auth::Stores::FileTokenStore with database
How to add a new column in an existing table in Rails 5? [Ruby On Rails 5]," I want to add a new column in one of my table in Rails 5. I recently renamed a column by using the following way: then in 20160802104312_change_jobs_table.rb: then It worked fine, but now if I want to also add a new column skills2, do I need to do it like this? <code>  rails g migration ChangeJobsTable class ChangeJobsTable < ActiveRecord::Migration[5.0] def change rename_column :jobs, :skills, :skills1 endend rails db:migrate class ChangeJobsTable < ActiveRecord::Migration[5.0] def change add_column :jobs, :skills2 endend",How to add a new column in an existing table in Rails 5?
Thread Issue in Zeromq + ruby," Stumble upon reading ZeroMQ FAQ about a Thread safety. My multi-threaded program keeps crashing in weird places inside the ZeroMQ library. What am I doing wrong? ZeroMQ sockets are not thread-safe. This is covered in some detail in the Guide. The short version is that sockets should not be shared between threads. We recommend creating a dedicated socket for each thread. For those situations where a dedicated socket per thread is infeasible, a socket may be shared if and only if each thread executes a full memory barrier before accessing the socket. Most languages support a Mutex or Spinlock which will execute the full memory barrier on your behalf. My multi-threaded program keeps crashing in weird places inside the ZeroMQ library.What am I doing wrong? Following is my following code: Now, there are couple things I'm unclear off:1) Assuming that async spawns a new Thread ( every time ) and the write_socket is shared between the all threads and ZeroMQ says that their socket is not thread-safe. I certainly see the write_socket running into threads safety issue.( Btw, hasn't faced this issue in all end to end testing thus far. )Question 1 : Is my understanding correct on this?To solve this, ZeroMQ asks us to achieve this using Mutex, Semaphore.Which results in Question 22) Context Switching.Given a threaded application can context switch anytime.Looking at the ffi-rzmq code Celluloid::ZMQ .send() internally calls send_strings(), which internally called send_multiple()Question 2: Context Switching can happen ( anywhere ) inside ( even on critical section ) (here)[https://github.com/chuckremes/ffi-rzmq/blob/master/lib/ffi-rzmq/socket.rb#L510]This can also lead to a data ordering issue.Is my following observation correct?Note:  <code>  Celluloid::ZMQ.initmodule Scp module DataStore class DataSocket include Celluloid::ZMQ def pull_socket(socket) @read_socket = Socket::Pull.new.tap do |read_socket| ## IPC socket read_socket.connect(socket) end end def push_socket(socket) @write_socket = Socket::Push.new.tap do |write_socket| ## IPC socket write_socket.connect(socket) end end def run pull_socket and push_socket and loopify! end def loopify! loop { async.evaluate_response(read_socket.read_multipart) } end def evaluate_response(data) return_response(message_id,routing,Parser.parser(data)) end def return_response(message_id,routing,object) data = object.to_response write_socket.send([message_id,routing,data]) end end endend DataSocket.new.run Operating system ( MacOS, Linux and CentOS ) Ruby - MRI 2.2.2/2.3.0",How to handle a Thread Issue in ZeroMQ + Ruby?
Thread Issue in ZeroMQ + Ruby," Stumble upon reading ZeroMQ FAQ about a Thread safety. My multi-threaded program keeps crashing in weird places inside the ZeroMQ library. What am I doing wrong? ZeroMQ sockets are not thread-safe. This is covered in some detail in the Guide. The short version is that sockets should not be shared between threads. We recommend creating a dedicated socket for each thread. For those situations where a dedicated socket per thread is infeasible, a socket may be shared if and only if each thread executes a full memory barrier before accessing the socket. Most languages support a Mutex or Spinlock which will execute the full memory barrier on your behalf. My multi-threaded program keeps crashing in weird places inside the ZeroMQ library.What am I doing wrong? Following is my following code: Now, there are couple things I'm unclear off:1) Assuming that async spawns a new Thread ( every time ) and the write_socket is shared between the all threads and ZeroMQ says that their socket is not thread-safe. I certainly see the write_socket running into threads safety issue.( Btw, hasn't faced this issue in all end to end testing thus far. )Question 1 : Is my understanding correct on this?To solve this, ZeroMQ asks us to achieve this using Mutex, Semaphore.Which results in Question 22) Context Switching.Given a threaded application can context switch anytime.Looking at the ffi-rzmq code Celluloid::ZMQ .send() internally calls send_strings(), which internally called send_multiple()Question 2: Context Switching can happen ( anywhere ) inside ( even on critical section ) (here)[https://github.com/chuckremes/ffi-rzmq/blob/master/lib/ffi-rzmq/socket.rb#L510]This can also lead to a data ordering issue.Is my following observation correct?Note:  <code>  Celluloid::ZMQ.initmodule Scp module DataStore class DataSocket include Celluloid::ZMQ def pull_socket(socket) @read_socket = Socket::Pull.new.tap do |read_socket| ## IPC socket read_socket.connect(socket) end end def push_socket(socket) @write_socket = Socket::Push.new.tap do |write_socket| ## IPC socket write_socket.connect(socket) end end def run pull_socket and push_socket and loopify! end def loopify! loop { async.evaluate_response(read_socket.read_multipart) } end def evaluate_response(data) return_response(message_id,routing,Parser.parser(data)) end def return_response(message_id,routing,object) data = object.to_response write_socket.send([message_id,routing,data]) end end endend DataSocket.new.run Operating system ( MacOS, Linux and CentOS ) Ruby - MRI 2.2.2/2.3.0",How to handle a Thread Issue in ZeroMQ + Ruby?
Slow implicit query on pg_attribute table in Rails," In our production environment, we noticed frequent spikes (~every 1 hour) in our Rails application. Digging deeper, it's due to the following query which cumulatively runs in >1.5 s (called 100x) in a single HTTP request. We don't have code calling that table explicitly but seems it's called by Rails to figure out the attributes for each model. ""Unexpected SQL queries to Postgres database on Rails/Heroku"" is related.But shouldn't it be called non-repetitively by Rails?How do we speed this up?  <code>  SELECT a.attname, format_type(a.atttypid, a.atttypmod), pg_get_expr(d.adbin, d.adrelid), a.attnotnull, a.atttypid, a.atttypmod FROM pg_attribute aLEFT JOIN pg_attrdef d ON a.attrelid = d.adrelid AND a.attnum = d.adnumWHERE a.attrelid = ?::regclass AND a.attnum > ? AND NOT a.attisdropped ORDER BY a.attnum",How to fix a slow implicit query on pg_attribute table in Rails
why is the method column_types is undefined in Rails 5.0?," Im doing an assignment for a class and it uses column_types method in a rspec test. endError: when i run rpsec in the command line.Rails 5.0Ubuntu 14.10 Failure/Error: expect(User.column_types[""username""].type).to eq :string <code>  it ""User database structure in place"" do expect(User.column_names).to include ""password_digest"", ""username"" expect(User.column_types[""username""].type).to eq :string expect(User.column_types[""password_digest""].type).to eq :string expect(User.column_types[""created_at""].type).to eq :datetime expect(User.column_types[""updated_at""].type).to eq :datetime NoMethodError: undefined method `column_types' for #<Class:0x000000053a0188> Did you mean? columns column_names # ./spec/assignment_spec.rb:67:in `block (5 levels) in <top (required)>' # ./spec/assignment_spec.rb:14:in `block (2 levels) in <top (required)>'",why the method column_types is undefined in Rails 5.0?
Puma: how to make virtualhosts(or similar) to host more than one website on the same port?," Nginx importance in production was normally based on its ability to serve slow clients; In the setup of RESTful API it seems to be an unnecessary layer to the production stack, especially as Puma (unlike the widely used unicorn can handle nginx work). Puma can allow multiple slow clients to connect without requiring a worker to be blocked on the request transaction. Because of this, Puma handles slow clients gracefully. Heroku recommends Puma for use in scenarios where you expect slow clients. refHow to enable Puma to serve multiple ruby applications on the same port without using nginx as a reverse proxy? <code> ",Puma without nginx - multiple ruby applications on the same IP:PORT
Puma without nginx - how to make virtualhosts(or similar) to host more than one website on the same port?," Nginx importance in production was normally based on its ability to serve slow clients; In the setup of RESTful API it seems to be an unnecessary layer to the production stack, especially as Puma (unlike the widely used unicorn can handle nginx work). Puma can allow multiple slow clients to connect without requiring a worker to be blocked on the request transaction. Because of this, Puma handles slow clients gracefully. Heroku recommends Puma for use in scenarios where you expect slow clients. refHow to enable Puma to serve multiple ruby applications on the same port without using nginx as a reverse proxy? <code> ",Puma without nginx - multiple ruby applications on the same IP:PORT
Invalidate sprockets cache during RSpec automated test," In my Rails application, I have a .js.erb file that has a variable which gets dynamically set based on some Ruby code. The app works fine, but I'm having a problem in some automated tests. The problem occurs in an RSpec feature test that works with this JavaScript. My spec file has a number of tests that change the ruby MyApp.config.timeout_time time on the fly to test out different scenarios. In my spec file, the first example passes, and the rest fail. I finally realized this is happening because myTimer never gets updated on the JavaScript side. When the first test runs, the JavaScript gets compiled using the current value as it's set in Ruby. When I change the Ruby timer for the second test, RSpec is still using the previous value in the JavaScript.Is there a way to tell Sprockets/Rails to invalidate a file or a part of the cache so the JavaScript will get rebuilt? I don't want to turn off caching in general, I just need a way to invalidate application.js on a per-test basis when needed.I may be able to ""touch"" one of the JavaScript files on the file system to make sprockets think the file has been changed, but I don't really want to do that. <code>  var myTimer = <%= MyApp.config.timeout_time * 1000 %>;",Invalidate Sprockets cache during RSpec automated test
ruby - delete all files with names matching a patern," I have multiple files (in a folder containing thousands of files), ex: How do I delete all page_code* files?Note: I do not wish to use FileUtils or shell <code>  ...page_bonus.txtpage_code1.txtpage_code2.txtpage_text1.txtpage_text2.txtpage_text3.txt...",ruby - delete all files with names matching a pattern
How to get all values of an object in Active Record in Rails?," One can use column_names to get all the columns of a table, but what if one would like to know all the values of a particular instance in ActiveRecord.For example, When first method is called, it returns key-value pairs. What I want is to have only values, is there a single method in ActiveRecord that can do this for us? <code>  User.column_names=> [""id"", ""email"", ""encrypted_password"", ""reset_password_token"", ""reset_password_sent_at"", ""remember_created_at"", ""sign_in_count"", ""current_sign_in_at"", ""last_sign_in_at"", ""current_sign_in_ip"", ""last_sign_in_ip"", ""tel"", ""interests"", ""admin_status"", ""created_at"", ""updated_at"", ""city_id"", ""profile_image_file_name"", ""profile_image_content_type"", ""profile_image_file_size"", ""profile_image_updated_at""]User.first=> #<User id: 1, email: ""aatir@jpl.com"", tel: ""+923223333333"", interests: ""Hi, I'm interested in coding."", admin_status: ""download"", created_at: ""2016-08-16 22:38:05"", updated_at: ""2016-08-16 22:38:05"", city_id: 2, profile_image_file_name: ""Screen_Shot_2016-07-02_at_4.41.32_PM.png"", profile_image_content_type: ""image/png"", profile_image_file_size: 324372, profile_image_updated_at: ""2016-08-16 22:38:04"">",How to get all values of an object in ActiveRecord in Rails?
Unpermitted parameter in Rails 5," First of all I want simply get an object inside the current object that I'm sending to my backend.I have this simple JSON (generated from a form): My classes: ProjectsController: But I still can't access project_criteria parameter as you can see below: Note:By the way, I already tried to use criterium instead of criteria(which - in my opinion - is the correct since it should be pluralized) in has_many and accepts_nested_attributes_for, but it also doesn't work.Does someone have a solution for this? <code>  { ""name"": ""Project 1"", ""project_criteria"": [ { ""name"": ""Criterium 1"", ""type"": ""Type 1"", ""benefit"": ""1"" }, { ""name"": ""Criterium 2"", ""type"": ""Type 2"", ""benefit"": ""3"" } ]} class Project < ApplicationRecord has_many :project_criteria accepts_nested_attributes_for :project_criteriaendclass ProjectCriterium < ApplicationRecord belongs_to :projectend def project_params params.require(:project).permit(:name, project_criteria: [] )end Started POST ""/projects"" for 127.0.0.1 at 2016-08-19 16:24:03 -0300Processing by ProjectsController#create as HTML Parameters: {""project""=>{""name""=>""Project 1"", ""project_criteria""=>{""0""=>{""benefit""=>""1"", ""name""=>""Criterium 1"", ""type""=>""Type 1""}, ""1""=>{""benefit""=>""3"", ""name""=>""Criterium 2"", ""type""=>""Type 2""}}}}Unpermitted parameter: project_criteria # <-----------",Rails: Unpermitted parameter in Rails 5
What is a Plain Old Ruby Object (PORO)?," When I look at an object (in the terminal or rails console), how can I determine if it is PORO or not?I understand it means an object is just Ruby (does not rely on Rails). But I don't understand in a practical sense.For example, when I print puts @a_form.inspect to the console, is it PORO? I've done lots of googling but haven't found a simpler answer with examples comparing to non-PORO objects.Can anyone give a practical comparison?Apologies in advance if this is a super newbie question. <code>  #<AForm:0x007fdbf9b33468 @a=#<A id: 1,...",How can I determine if an object is a PORO or not?
Understanding .each and .map (Ruby)," I am having trouble understanding the differences between map and each, and where and when to use them.I read ""What does map do?"" and ""Ruby Iterators"" but wanted some clarification.If I have: map takes each element in the array z and adds one to each element, however it does not mutate the original array unless I add !.On the other hand: returns [1,2,3]. This is confusing to me since: returns: What is exactly going on in my second example that isn't allowing each array element to be increased by 1, while in the last example a string is being attached to everything in the array?All credits go to Speransky Danil, whom I took these examples off of. <code>  z = [1,2,3].map {|x| x + 1} y = [1,2,3].each {|x| x + 1} names = ['danil', 'edmund']names.each { |name| puts name + ' is a programmer' } Danil is a programmerEdmund is a programmer",How to understand Ruby's .each and .map
ruby rails 4 rspec resque test resque-retry," I am trying to write a spec that tests the retry functionality of resque-retry and I can not seem to get the tests to hit the binding.pry's correctly. Is there a way to test this functionality using rspec 3 so I can verify they are functioning as intended?This is a request spec and I am trying to simulate a live request via fixtures, but no matter what I try I can't seem to get the job to retry. I am using resque_rspec, and trying this testing strategy.Partial Spec Queue Job Queue Job Modules <code>  gem 'resque', require: 'resque/server'gem 'resque-web', require: 'resque_web'gem 'resque-scheduler'gem 'resque-retry'gem 'resque-lock-timeout' it 'retries it' do stub_request(:any, /.*api.bigcartel.*/).to_return(body: '{}', status: 200) @order_shipped_json['order']['originator_id'] = @provider_order post ""/hook/shops/#{@shop.id}"", @order_shipped_json.to_json, format: :json ResqueSpec.perform_all(queue_name) ???end class QueueHook extend Resque::Plugins::LockTimeout extend Resque::Plugins::Retry extend QueueLock extend QueueLogger @queue = AppSettings.queues[:hook_queue_name].to_sym @lock_timeout = 600 @retry_exceptions = [QueueError::LockFailed] @retry_limit = 600 @retry_delay = 1 class << self def perform(web_hook_payload_id, _whiplash_customer_id) ActiveRecord::Base.clear_active_connections! @web_hook_payload = WebHookPayload.find(web_hook_payload_id) klass_constructor @hook.process_event end def identifier(_web_hook_payload_id, whiplash_customer_id) ""lock:integration_hook:#{whiplash_customer_id}"" end def after_perform_delete_webhook(_web_hook_payload_id, _whiplash_customer_id) @web_hook_payload.destroy end private ... endend module QueueLogger def before_perform_log_job(*args) Rails.logger.info ""[Resque][#{self}] running with #{args.inspect}..."" end def on_failure_log_job(*args) message = ""[Resque][#{self}] failed with #{args.inspect}..."" run_counters Rails.logger.info message_builder(message) end private def run_counters @num_attempts += retry_attempt @all_attempts += retry_limit end def message_builder(message) return message unless @num_attempts return message += "" Retrying (attempt ##{@num_attempts + 1})"" if @num_attempts < @all_attempts message += ' Giving up.' message endendmodule QueueLock def loner_enqueue_failed(*args) Rails.logger.info ""[Resque][#{self}] is already enqueued: #{args.inspect}..."" end def lock_failed(*) raise QueueError::LockFailed endend",How to test retries and failures in resque-retry and Rails 4?
ruby rails 4 rspec resque how to test retries and failures," I am trying to write a spec that tests the retry functionality of resque-retry and I can not seem to get the tests to hit the binding.pry's correctly. Is there a way to test this functionality using rspec 3 so I can verify they are functioning as intended?This is a request spec and I am trying to simulate a live request via fixtures, but no matter what I try I can't seem to get the job to retry. I am using resque_rspec, and trying this testing strategy.Partial Spec Queue Job Queue Job Modules <code>  gem 'resque', require: 'resque/server'gem 'resque-web', require: 'resque_web'gem 'resque-scheduler'gem 'resque-retry'gem 'resque-lock-timeout' it 'retries it' do stub_request(:any, /.*api.bigcartel.*/).to_return(body: '{}', status: 200) @order_shipped_json['order']['originator_id'] = @provider_order post ""/hook/shops/#{@shop.id}"", @order_shipped_json.to_json, format: :json ResqueSpec.perform_all(queue_name) ???end class QueueHook extend Resque::Plugins::LockTimeout extend Resque::Plugins::Retry extend QueueLock extend QueueLogger @queue = AppSettings.queues[:hook_queue_name].to_sym @lock_timeout = 600 @retry_exceptions = [QueueError::LockFailed] @retry_limit = 600 @retry_delay = 1 class << self def perform(web_hook_payload_id, _whiplash_customer_id) ActiveRecord::Base.clear_active_connections! @web_hook_payload = WebHookPayload.find(web_hook_payload_id) klass_constructor @hook.process_event end def identifier(_web_hook_payload_id, whiplash_customer_id) ""lock:integration_hook:#{whiplash_customer_id}"" end def after_perform_delete_webhook(_web_hook_payload_id, _whiplash_customer_id) @web_hook_payload.destroy end private ... endend module QueueLogger def before_perform_log_job(*args) Rails.logger.info ""[Resque][#{self}] running with #{args.inspect}..."" end def on_failure_log_job(*args) message = ""[Resque][#{self}] failed with #{args.inspect}..."" run_counters Rails.logger.info message_builder(message) end private def run_counters @num_attempts += retry_attempt @all_attempts += retry_limit end def message_builder(message) return message unless @num_attempts return message += "" Retrying (attempt ##{@num_attempts + 1})"" if @num_attempts < @all_attempts message += ' Giving up.' message endendmodule QueueLock def loner_enqueue_failed(*args) Rails.logger.info ""[Resque][#{self}] is already enqueued: #{args.inspect}..."" end def lock_failed(*) raise QueueError::LockFailed endend",How to test retries and failures in resque-retry and Rails 4?
Check if a string contains other string in ruby," Let's say I have a string, like string= ""aasmflathesorcerersnstonedksaottersapldrrysaahf"". If you haven't noticed, you can find the phrase ""harry potter and the sorcerers stone"" in there (minus the space).I need to check whether string contains all the elements of the string. Include does not work on shuffled string. How can I check if a string contains all the elements of another string? <code>  string.include? (""sorcerer"") #=> truestring.include? (""harrypotterandtheasorcerersstone"") #=> false, even though it contains all the letters to spell harrypotterandthesorcerersstone",Check whether a string contains all the characters of another string in Ruby
Rails 5 Heorku deploy error: ExecJS::ProgramError: SyntaxError: Unexpected token: name (autoRegisterNamespace)," When trying to deploy a rails 5 app to heroku, I get the following error, when it reaches Running: rake assets:precompile: My Gemfile looks like this: I tried both with and without: Nothing helps. Running rake assets:precompile locally on my mac works... <code>  remote: ExecJS::ProgramError: SyntaxError: Unexpected token: name (autoRegisterNamespace) (line: 14767, col: 7, pos: 457487)remote: Errorremote: at new JS_Parse_Error (<eval>:3623:11948)remote: at js_error (<eval>:3623:12167)remote: at croak (<eval>:3623:21858)remote: at token_error (<eval>:3623:21995)remote: at unexpected (<eval>:3623:22083)remote: at semicolon (<eval>:3623:22601)remote: at simple_statement (<eval>:3623:25779)remote: at <eval>:3623:23567remote: at <eval>:3623:22774remote: at block_ (<eval>:3623:27903)remote: at <eval>:3623:23677remote: at <eval>:3623:22774remote: new JS_Parse_Error ((execjs):3623:11948)remote: js_error ((execjs):3623:12167)remote: croak ((execjs):3623:21858)remote: token_error ((execjs):3623:21995)remote: unexpected ((execjs):3623:22083)remote: semicolon ((execjs):3623:22601)remote: simple_statement ((execjs):3623:25779)remote: (execjs):3623:23567remote: (execjs):3623:22774remote: block_ ((execjs):3623:27903)remote: (execjs):3623:23677remote: (execjs):3623:22774remote: /tmp/build_371be96e0ec063bb6c90d7770da64944/vendor/bundle/ruby/2.2.0/gems/execjs-2.7.0/lib/execjs/ruby_racer_runtime.rb:47:in `rescue in block in call'remote: /tmp/build_371be96e0ec063bb6c90d7770da64944/vendor/bundle/ruby/2.2.0/gems/execjs-2.7.0/lib/execjs/ruby_racer_runtime.rb:44:in `block in call'remote: /tmp/build_371be96e0ec063bb6c90d7770da64944/vendor/bundle/ruby/2.2.0/gems/execjs-2.7.0/lib/execjs/ruby_racer_runtime.rb:75:in `block in lock'remote: /tmp/build_371be96e0ec063bb6c90d7770da64944/vendor/bundle/ruby/2.2.0/gems/execjs-2.7.0/lib/execjs/ruby_racer_runtime.rb:73:in `call'remote: /tmp/build_371be96e0ec063bb6c90d7770da64944/vendor/bundle/ruby/2.2.0/gems/execjs-2.7.0/lib/execjs/ruby_racer_runtime.rb:73:in `Locker'remote: /tmp/build_371be96e0ec063bb6c90d7770da64944/vendor/bundle/ruby/2.2.0/gems/execjs-2.7.0/lib/execjs/ruby_racer_runtime.rb:73:in `lock'remote: /tmp/build_371be96e0ec063bb6c90d7770da64944/vendor/bundle/ruby/2.2.0/gems/execjs-2.7.0/lib/execjs/ruby_racer_runtime.rb:43:in `call'remote: /tmp/build_371be96e0ec063bb6c90d7770da64944/vendor/bundle/ruby/2.2.0/gems/uglifier-3.0.1/lib/uglifier.rb:179:in `run_uglifyjs'remote: /tmp/build_371be96e0ec063bb6c90d7770da64944/vendor/bundle/ruby/2.2.0/gems/uglifier-3.0.1/lib/uglifier.rb:141:in `compile'remote: /tmp/build_371be96e0ec063bb6c90d7770da64944/vendor/bundle/ruby/2.2.0/gems/sprockets-3.7.0/lib/sprockets/uglifier_compressor.rb:52:in `call'remote: /tmp/build_371be96e0ec063bb6c90d7770da64944/vendor/bundle/ruby/2.2.0/gems/sprockets-3.7.0/lib/sprockets/uglifier_compressor.rb:28:in `call'remote: /tmp/build_371be96e0ec063bb6c90d7770da64944/vendor/bundle/ruby/2.2.0/gems/sprockets-3.7.0/lib/sprockets/processor_utils.rb:75:in `call_processor'remote: /tmp/build_371be96e0ec063bb6c90d7770da64944/vendor/bundle/ruby/2.2.0/gems/sprockets-3.7.0/lib/sprockets/processor_utils.rb:57:in `block in call_processors'remote: /tmp/build_371be96e0ec063bb6c90d7770da64944/vendor/bundle/ruby/2.2.0/gems/sprockets-3.7.0/lib/sprockets/processor_utils.rb:56:in `reverse_each'remote: /tmp/build_371be96e0ec063bb6c90d7770da64944/vendor/bundle/ruby/2.2.0/gems/sprockets-3.7.0/lib/sprockets/processor_utils.rb:56:in `call_processors'remote: /tmp/build_371be96e0ec063bb6c90d7770da64944/vendor/bundle/ruby/2.2.0/gems/sprockets-3.7.0/lib/sprockets/loader.rb:134:in `load_from_unloaded'remote: /tmp/build_371be96e0ec063bb6c90d7770da64944/vendor/bundle/ruby/2.2.0/gems/sprockets-3.7.0/lib/sprockets/loader.rb:60:in `block in load'remote: /tmp/build_371be96e0ec063bb6c90d7770da64944/vendor/bundle/ruby/2.2.0/gems/sprockets-3.7.0/lib/sprockets/loader.rb:317:in `fetch_asset_from_dependency_cache'remote: /tmp/build_371be96e0ec063bb6c90d7770da64944/vendor/bundle/ruby/2.2.0/gems/sprockets-3.7.0/lib/sprockets/loader.rb:44:in `load'remote: /tmp/build_371be96e0ec063bb6c90d7770da64944/vendor/bundle/ruby/2.2.0/gems/sprockets-3.7.0/lib/sprockets/cached_environment.rb:20:in `block in initialize'remote: /tmp/build_371be96e0ec063bb6c90d7770da64944/vendor/bundle/ruby/2.2.0/gems/sprockets-3.7.0/lib/sprockets/cached_environment.rb:47:in `yield'remote: /tmp/build_371be96e0ec063bb6c90d7770da64944/vendor/bundle/ruby/2.2.0/gems/sprockets-3.7.0/lib/sprockets/cached_environment.rb:47:in `load'remote: /tmp/build_371be96e0ec063bb6c90d7770da64944/vendor/bundle/ruby/2.2.0/gems/sprockets-3.7.0/lib/sprockets/base.rb:66:in `find_asset'remote: /tmp/build_371be96e0ec063bb6c90d7770da64944/vendor/bundle/ruby/2.2.0/gems/sprockets-3.7.0/lib/sprockets/base.rb:73:in `find_all_linked_assets'remote: /tmp/build_371be96e0ec063bb6c90d7770da64944/vendor/bundle/ruby/2.2.0/gems/sprockets-3.7.0/lib/sprockets/manifest.rb:142:in `block in find'remote: /tmp/build_371be96e0ec063bb6c90d7770da64944/vendor/bundle/ruby/2.2.0/gems/sprockets-3.7.0/lib/sprockets/legacy.rb:114:in `block (2 levels) in logical_paths'remote: /tmp/build_371be96e0ec063bb6c90d7770da64944/vendor/bundle/ruby/2.2.0/gems/sprockets-3.7.0/lib/sprockets/path_utils.rb:228:in `block in stat_tree'remote: /tmp/build_371be96e0ec063bb6c90d7770da64944/vendor/bundle/ruby/2.2.0/gems/sprockets-3.7.0/lib/sprockets/path_utils.rb:212:in `block in stat_directory'remote: /tmp/build_371be96e0ec063bb6c90d7770da64944/vendor/bundle/ruby/2.2.0/gems/sprockets-3.7.0/lib/sprockets/path_utils.rb:209:in `each'remote: /tmp/build_371be96e0ec063bb6c90d7770da64944/vendor/bundle/ruby/2.2.0/gems/sprockets-3.7.0/lib/sprockets/path_utils.rb:209:in `stat_directory'remote: /tmp/build_371be96e0ec063bb6c90d7770da64944/vendor/bundle/ruby/2.2.0/gems/sprockets-3.7.0/lib/sprockets/path_utils.rb:227:in `stat_tree'remote: /tmp/build_371be96e0ec063bb6c90d7770da64944/vendor/bundle/ruby/2.2.0/gems/sprockets-3.7.0/lib/sprockets/legacy.rb:105:in `each'remote: /tmp/build_371be96e0ec063bb6c90d7770da64944/vendor/bundle/ruby/2.2.0/gems/sprockets-3.7.0/lib/sprockets/legacy.rb:105:in `block in logical_paths'remote: /tmp/build_371be96e0ec063bb6c90d7770da64944/vendor/bundle/ruby/2.2.0/gems/sprockets-3.7.0/lib/sprockets/legacy.rb:104:in `each'remote: /tmp/build_371be96e0ec063bb6c90d7770da64944/vendor/bundle/ruby/2.2.0/gems/sprockets-3.7.0/lib/sprockets/legacy.rb:104:in `logical_paths'remote: /tmp/build_371be96e0ec063bb6c90d7770da64944/vendor/bundle/ruby/2.2.0/gems/sprockets-3.7.0/lib/sprockets/manifest.rb:140:in `find'remote: /tmp/build_371be96e0ec063bb6c90d7770da64944/vendor/bundle/ruby/2.2.0/gems/sprockets-3.7.0/lib/sprockets/manifest.rb:185:in `compile'remote: /tmp/build_371be96e0ec063bb6c90d7770da64944/vendor/bundle/ruby/2.2.0/gems/sprockets-rails-3.1.1/lib/sprockets/rails/task.rb:68:in `block (3 levels) in define'remote: /tmp/build_371be96e0ec063bb6c90d7770da64944/vendor/bundle/ruby/2.2.0/gems/sprockets-3.7.0/lib/rake/sprocketstask.rb:147:in `with_logger'remote: /tmp/build_371be96e0ec063bb6c90d7770da64944/vendor/bundle/ruby/2.2.0/gems/sprockets-rails-3.1.1/lib/sprockets/rails/task.rb:67:in `block (2 levels) in define'remote: /tmp/build_371be96e0ec063bb6c90d7770da64944/vendor/bundle/ruby/2.2.0/gems/rake-11.2.2/exe/rake:27:in `<top (required)>'remote: V8::Error: SyntaxError: Unexpected token: name (autoRegisterNamespace)remote: at js_error (<eval>:3623:12167)remote: at croak (<eval>:3623:21858)remote: at token_error (<eval>:3623:21995)remote: at unexpected (<eval>:3623:22083)remote: at semicolon (<eval>:3623:22601)remote: at simple_statement (<eval>:3623:25779)remote: at <eval>:3623:23567remote: at <eval>:3623:22774remote: at block_ (<eval>:3623:27903)remote: at <eval>:3623:23677remote: at <eval>:3623:22774remote: at if_ (<eval>:3623:27671)remote: at <eval>:3623:24326remote: at <eval>:3623:22774remote: at block_ (<eval>:3623:27903)remote: at ctor.body (<eval>:3623:27506)remote: at function_ (<eval>:3623:27602)remote: at expr_atom (<eval>:3623:30888)remote: at maybe_unary (<eval>:3624:1562)remote: at expr_ops (<eval>:3624:2333)remote: at maybe_conditional (<eval>:3624:2425)remote: at maybe_assign (<eval>:3624:2868)remote: at expression (<eval>:3624:3194)remote: at expr_atom (<eval>:3623:30640)remote: at maybe_unary (<eval>:3624:1562)remote: at expr_ops (<eval>:3624:2333)remote: at maybe_conditional (<eval>:3624:2425)remote: at maybe_assign (<eval>:3624:2868)remote: at expression (<eval>:3624:3194)remote: at simple_statement (<eval>:3623:25762)remote: at <eval>:3623:23722remote: at <eval>:3623:22774remote: at block_ (<eval>:3623:27903)remote: at ctor.body (<eval>:3623:27506)remote: at function_ (<eval>:3623:27602)remote: at expr_atom (<eval>:3623:30888)remote: at maybe_unary (<eval>:3624:1562)remote: at expr_ops (<eval>:3624:2333)remote: at maybe_conditional (<eval>:3624:2425)remote: at maybe_assign (<eval>:3624:2868)remote: at expression (<eval>:3624:3194)remote: at expr_list (<eval>:3623:31368)remote: at subscripts (<eval>:3624:1271)remote: at expr_atom (<eval>:3623:30952)remote: at maybe_unary (<eval>:3624:1562)remote: at expr_ops (<eval>:3624:2333)remote: at maybe_conditional (<eval>:3624:2425)remote: at maybe_assign (<eval>:3624:2868)remote: at expression (<eval>:3624:3194)remote: at expr_atom (<eval>:3623:30640)remote: at maybe_unary (<eval>:3624:1562)remote: at expr_ops (<eval>:3624:2333)remote: at maybe_conditional (<eval>:3624:2425)remote: at maybe_assign (<eval>:3624:2868)remote: at expression (<eval>:3624:3194)remote: at simple_statement (<eval>:3623:25762)remote: at <eval>:3623:23722remote: at <eval>:3623:22774remote: at <eval>:3624:3569remote: at parse (<eval>:3624:3809)remote: at parse (<eval>:3958:22)remote: at uglifier (<eval>:4001:13)remote: /tmp/build_371be96e0ec063bb6c90d7770da64944/vendor/bundle/ruby/2.2.0/gems/execjs-2.7.0/lib/execjs/ruby_racer_runtime.rb:45:in `block in call'remote: /tmp/build_371be96e0ec063bb6c90d7770da64944/vendor/bundle/ruby/2.2.0/gems/execjs-2.7.0/lib/execjs/ruby_racer_runtime.rb:75:in `block in lock'remote: /tmp/build_371be96e0ec063bb6c90d7770da64944/vendor/bundle/ruby/2.2.0/gems/execjs-2.7.0/lib/execjs/ruby_racer_runtime.rb:73:in `call'remote: /tmp/build_371be96e0ec063bb6c90d7770da64944/vendor/bundle/ruby/2.2.0/gems/execjs-2.7.0/lib/execjs/ruby_racer_runtime.rb:73:in `Locker'remote: /tmp/build_371be96e0ec063bb6c90d7770da64944/vendor/bundle/ruby/2.2.0/gems/execjs-2.7.0/lib/execjs/ruby_racer_runtime.rb:73:in `lock'remote: /tmp/build_371be96e0ec063bb6c90d7770da64944/vendor/bundle/ruby/2.2.0/gems/execjs-2.7.0/lib/execjs/ruby_racer_runtime.rb:43:in `call'remote: /tmp/build_371be96e0ec063bb6c90d7770da64944/vendor/bundle/ruby/2.2.0/gems/uglifier-3.0.1/lib/uglifier.rb:179:in `run_uglifyjs'remote: /tmp/build_371be96e0ec063bb6c90d7770da64944/vendor/bundle/ruby/2.2.0/gems/uglifier-3.0.1/lib/uglifier.rb:141:in `compile'remote: /tmp/build_371be96e0ec063bb6c90d7770da64944/vendor/bundle/ruby/2.2.0/gems/sprockets-3.7.0/lib/sprockets/uglifier_compressor.rb:52:in `call'remote: /tmp/build_371be96e0ec063bb6c90d7770da64944/vendor/bundle/ruby/2.2.0/gems/sprockets-3.7.0/lib/sprockets/uglifier_compressor.rb:28:in `call'remote: /tmp/build_371be96e0ec063bb6c90d7770da64944/vendor/bundle/ruby/2.2.0/gems/sprockets-3.7.0/lib/sprockets/processor_utils.rb:75:in `call_processor'remote: /tmp/build_371be96e0ec063bb6c90d7770da64944/vendor/bundle/ruby/2.2.0/gems/sprockets-3.7.0/lib/sprockets/processor_utils.rb:57:in `block in call_processors'remote: /tmp/build_371be96e0ec063bb6c90d7770da64944/vendor/bundle/ruby/2.2.0/gems/sprockets-3.7.0/lib/sprockets/processor_utils.rb:56:in `reverse_each'remote: /tmp/build_371be96e0ec063bb6c90d7770da64944/vendor/bundle/ruby/2.2.0/gems/sprockets-3.7.0/lib/sprockets/processor_utils.rb:56:in `call_processors'remote: /tmp/build_371be96e0ec063bb6c90d7770da64944/vendor/bundle/ruby/2.2.0/gems/sprockets-3.7.0/lib/sprockets/loader.rb:134:in `load_from_unloaded'remote: /tmp/build_371be96e0ec063bb6c90d7770da64944/vendor/bundle/ruby/2.2.0/gems/sprockets-3.7.0/lib/sprockets/loader.rb:60:in `block in load'remote: /tmp/build_371be96e0ec063bb6c90d7770da64944/vendor/bundle/ruby/2.2.0/gems/sprockets-3.7.0/lib/sprockets/loader.rb:317:in `fetch_asset_from_dependency_cache'remote: /tmp/build_371be96e0ec063bb6c90d7770da64944/vendor/bundle/ruby/2.2.0/gems/sprockets-3.7.0/lib/sprockets/loader.rb:44:in `load'remote: /tmp/build_371be96e0ec063bb6c90d7770da64944/vendor/bundle/ruby/2.2.0/gems/sprockets-3.7.0/lib/sprockets/cached_environment.rb:20:in `block in initialize'remote: /tmp/build_371be96e0ec063bb6c90d7770da64944/vendor/bundle/ruby/2.2.0/gems/sprockets-3.7.0/lib/sprockets/cached_environment.rb:47:in `yield'remote: /tmp/build_371be96e0ec063bb6c90d7770da64944/vendor/bundle/ruby/2.2.0/gems/sprockets-3.7.0/lib/sprockets/cached_environment.rb:47:in `load'remote: /tmp/build_371be96e0ec063bb6c90d7770da64944/vendor/bundle/ruby/2.2.0/gems/sprockets-3.7.0/lib/sprockets/base.rb:66:in `find_asset'remote: /tmp/build_371be96e0ec063bb6c90d7770da64944/vendor/bundle/ruby/2.2.0/gems/sprockets-3.7.0/lib/sprockets/base.rb:73:in `find_all_linked_assets'remote: /tmp/build_371be96e0ec063bb6c90d7770da64944/vendor/bundle/ruby/2.2.0/gems/sprockets-3.7.0/lib/sprockets/manifest.rb:142:in `block in find'remote: /tmp/build_371be96e0ec063bb6c90d7770da64944/vendor/bundle/ruby/2.2.0/gems/sprockets-3.7.0/lib/sprockets/legacy.rb:114:in `block (2 levels) in logical_paths'remote: /tmp/build_371be96e0ec063bb6c90d7770da64944/vendor/bundle/ruby/2.2.0/gems/sprockets-3.7.0/lib/sprockets/path_utils.rb:228:in `block in stat_tree'remote: /tmp/build_371be96e0ec063bb6c90d7770da64944/vendor/bundle/ruby/2.2.0/gems/sprockets-3.7.0/lib/sprockets/path_utils.rb:212:in `block in stat_directory'remote: /tmp/build_371be96e0ec063bb6c90d7770da64944/vendor/bundle/ruby/2.2.0/gems/sprockets-3.7.0/lib/sprockets/path_utils.rb:209:in `each'remote: /tmp/build_371be96e0ec063bb6c90d7770da64944/vendor/bundle/ruby/2.2.0/gems/sprockets-3.7.0/lib/sprockets/path_utils.rb:209:in `stat_directory'remote: /tmp/build_371be96e0ec063bb6c90d7770da64944/vendor/bundle/ruby/2.2.0/gems/sprockets-3.7.0/lib/sprockets/path_utils.rb:227:in `stat_tree'remote: /tmp/build_371be96e0ec063bb6c90d7770da64944/vendor/bundle/ruby/2.2.0/gems/sprockets-3.7.0/lib/sprockets/legacy.rb:105:in `each'remote: /tmp/build_371be96e0ec063bb6c90d7770da64944/vendor/bundle/ruby/2.2.0/gems/sprockets-3.7.0/lib/sprockets/legacy.rb:105:in `block in logical_paths'remote: /tmp/build_371be96e0ec063bb6c90d7770da64944/vendor/bundle/ruby/2.2.0/gems/sprockets-3.7.0/lib/sprockets/legacy.rb:104:in `each'remote: /tmp/build_371be96e0ec063bb6c90d7770da64944/vendor/bundle/ruby/2.2.0/gems/sprockets-3.7.0/lib/sprockets/legacy.rb:104:in `logical_paths'remote: /tmp/build_371be96e0ec063bb6c90d7770da64944/vendor/bundle/ruby/2.2.0/gems/sprockets-3.7.0/lib/sprockets/manifest.rb:140:in `find'remote: /tmp/build_371be96e0ec063bb6c90d7770da64944/vendor/bundle/ruby/2.2.0/gems/sprockets-3.7.0/lib/sprockets/manifest.rb:185:in `compile'remote: /tmp/build_371be96e0ec063bb6c90d7770da64944/vendor/bundle/ruby/2.2.0/gems/sprockets-rails-3.1.1/lib/sprockets/rails/task.rb:68:in `block (3 levels) in define'remote: /tmp/build_371be96e0ec063bb6c90d7770da64944/vendor/bundle/ruby/2.2.0/gems/sprockets-3.7.0/lib/rake/sprocketstask.rb:147:in `with_logger'remote: /tmp/build_371be96e0ec063bb6c90d7770da64944/vendor/bundle/ruby/2.2.0/gems/sprockets-rails-3.1.1/lib/sprockets/rails/task.rb:67:in `block (2 levels) in define'remote: /tmp/build_371be96e0ec063bb6c90d7770da64944/vendor/bundle/ruby/2.2.0/gems/rake-11.2.2/exe/rake:27:in `<top (required)>'remote: Tasks: TOP => assets:precompileremote: (See full trace by running task with --trace) source 'https://rubygems.org'gem 'rails', '~> 5.0.0'gem 'pg'gem 'puma', '~> 3.0'gem 'httparty', '~> 0.14.0'gem 'sass-rails', '~> 5.0'gem 'uglifier', '>= 1.3.0'gem 'coffee-rails', '~> 4.2'gem 'jquery-rails', '~> 4.1', '>= 4.1.1'gem 'haml-rails', '~> 0.9.0'gem 'bootstrap-sass', '~> 3.3', '>= 3.3.7'gem 'owlcarousel-rails', '~> 1.1', '>= 1.1.3.3'gem 'font-awesome-rails', '~> 4.6', '>= 4.6.3.1'gem 'turbolinks', '~> 5'gem 'jbuilder', '~> 2.5'# Use Redis adapter to run Action Cable in production# gem 'redis', '~> 3.0'gem 'therubyracer'gem 'execjs'group :development, :test do gem 'byebug', platform: :mriendgroup :development do gem 'web-console' gem 'listen', '~> 3.0.5' gem 'spring' gem 'spring-watcher-listen', '~> 2.0.0'endgem 'tzinfo-data', platforms: [:mingw, :mswin, :x64_mingw, :jruby] gem 'therubyracer'gem 'execjs'",Rails 5 Heroku deploy error: ExecJS::ProgramError: SyntaxError: Unexpected token: name (autoRegisterNamespace)
gem install pg for ruby on tails," Postgresql will not install on OSX here is my data below n error occurred while installing pg (0.18.4), and Bundler cannot continue. Make sure that gem install pg -v '0.18.4' succeeds before bundling. chriss-MacBook-Pro:shine chriswilson$ bundle exec install usage: install [-bCcpSsv] [-B suffix] [-f flags] [-g group] [-m mode] [-o owner] file1 file2 install [-bCcpSsv] [-B suffix] [-f flags] [-g group] [-m mode] [-o owner] file1 ... fileN directory install -d [-v] [-g group] [-m mode] [-o owner] directory ... chriss-MacBook-Pro:shine chriswilson$ gem install pg -v '0.18.4' Building native extensions. This could take a while... ERROR: Error installing pg: ERROR: Failed to build gem native extension. <code>  current directory: /Users/chriswilson/.rvm/gems/ruby-2.3.0/gems/pg-0.18.4/ext/Users/chriswilson/.rvm/rubies/ruby-2.3.0/bin/ruby -r ./siteconf20160902-1617-e1qwb1.rb extconf.rbchecking for pg_config... noNo pg_config... trying anyway. If building fails, please try again with --with-pg-config=/path/to/pg_configchecking for libpq-fe.h... noCan't find the 'libpq-fe.h header*** extconf.rb failed ***Could not create Makefile due to some reason, probably lack of necessarylibraries and/or headers. Check the mkmf.log file for more details. You mayneed configuration options.Provided configuration options: --with-opt-dir --with-opt-include --without-opt-include=${opt-dir}/include --with-opt-lib --without-opt-lib=${opt-dir}/lib --with-make-prog --without-make-prog --srcdir=. --curdir --ruby=/Users/chriswilson/.rvm/rubies/ruby-2.3.0/bin/$(RUBY_BASE_NAME) --with-pg --without-pg --enable-windows-cross --disable-windows-cross --with-pg-config --without-pg-config --with-pg_config --without-pg_config --with-pg-dir --without-pg-dir --with-pg-include --without-pg-include=${pg-dir}/include --with-pg-lib --without-pg-lib=${pg-dir}/libTo see why this extension failed to compile, please check the mkmf.log which can be found here: /Users/chriswilson/.rvm/gems/ruby-2.3.0/extensions/x86_64-darwin-15/2.3.0/pg-0.18.4/mkmf.logextconf failed, exit code 1Gem files will remain installed in /Users/chriswilson/.rvm/gems/ruby-2.3.0/gems/pg-0.18.4 for inspection.Results logged to /Users/chriswilson/.rvm/gems/ruby-2.3.0/extensions/x86_64-darwin-15/2.3.0/pg-0.18.4/gem_make.outchriss-MacBook-Pro:shine chriswilson$ gem install pg -v '0.18.4'Building native extensions. This could take a while...ERROR: Error installing pg: ERROR: Failed to build gem native extension. current directory: /Users/chriswilson/.rvm/gems/ruby-2.3.0/gems/pg-0.18.4/ext/Users/chriswilson/.rvm/rubies/ruby-2.3.0/bin/ruby -r ./siteconf20160902-1643-jfhxyo.rb extconf.rbchecking for pg_config... noNo pg_config... trying anyway. If building fails, please try again with --with-pg-config=/path/to/pg_configchecking for libpq-fe.h... noCan't find the 'libpq-fe.h header*** extconf.rb failed ***Could not create Makefile due to some reason, probably lack of necessarylibraries and/or headers. Check the mkmf.log file for more details. You mayneed configuration options.Provided configuration options: --with-opt-dir --with-opt-include --without-opt-include=${opt-dir}/include --with-opt-lib --without-opt-lib=${opt-dir}/lib --with-make-prog --without-make-prog --srcdir=. --curdir --ruby=/Users/chriswilson/.rvm/rubies/ruby-2.3.0/bin/$(RUBY_BASE_NAME) --with-pg --without-pg --enable-windows-cross --disable-windows-cross --with-pg-config --without-pg-config --with-pg_config --without-pg_config --with-pg-dir --without-pg-dir --with-pg-include --without-pg-include=${pg-dir}/include --with-pg-lib --without-pg-lib=${pg-dir}/libTo see why this extension failed to compile, please check the mkmf.log which can be found here: /Users/chriswilson/.rvm/gems/ruby-2.3.0/extensions/x86_64-darwin-15/2.3.0/pg-0.18.4/mkmf.logextconf failed, exit code 1Gem files will remain installed in /Users/chriswilson/.rvm/gems/ruby-2.3.0/gems/pg-0.18.4 for inspection.Results logged to /Users/chriswilson/.rvm/gems/ruby-2.3.0/extensions/x86_64-darwin-15/2.3.0/pg-0.18.4/gem_make.outfind_executable: checking for pg_config... -------------------- no--------------------find_header: checking for libpq-fe.h... -------------------- no""gcc -o conftest -I/Users/chriswilson/.rvm/rubies/ruby-2.3.0/include/ruby-2.3.0/x86_64-darwin15 -I/Users/chriswilson/.rvm/rubies/ruby-2.3.0/include/ruby-2.3.0/ruby/backward -I/Users/chriswilson/.rvm/rubies/ruby-2.3.0/include/ruby-2.3.0 -I. -I/usr/local/opt/libyaml/include -I/usr/local/opt/readline/include -I/usr/local/opt/libksba/include -I/usr/local/opt/openssl/include -D_XOPEN_SOURCE -D_DARWIN_C_SOURCE -D_DARWIN_UNLIMITED_SELECT -D_REENTRANT -O3 -fno-fast-math -ggdb3 -Wall -Wextra -Wno-unused-parameter -Wno-parentheses -Wno-long-long -Wno-missing-field-initializers -Wunused-variable -Wpointer-arith -Wwrite-strings -Wdeclaration-after-statement -Wshorten-64-to-32 -Wimplicit-function-declaration -Wdivision-by-zero -Wdeprecated-declarations -Wextra-tokens -fno-common -pipe conftest.c -L. -L/Users/chriswilson/.rvm/rubies/ruby-2.3.0/lib -L/usr/local/opt/libyaml/lib -L/usr/local/opt/readline/lib -L/usr/local/opt/libksba/lib -L/usr/local/opt/openssl/lib -L. -fstack-protector -L/usr/local/lib -L/usr/local/opt/libyaml/lib -L/usr/local/opt/readline/lib -L/usr/local/opt/libksba/lib -L/usr/local/opt/openssl/lib -lruby.2.3.0 -lpthread -ldl -lobjc ""checked program was:/* begin */1: #include ""ruby.h""2: 3: int main(int argc, char **argv)4: {5: return 0;6: }/* end */""gcc -E -I/Users/chriswilson/.rvm/rubies/ruby-2.3.0/include/ruby-2.3.0/x86_64-darwin15 -I/Users/chriswilson/.rvm/rubies/ruby-2.3.0/include/ruby-2.3.0/ruby/backward -I/Users/chriswilson/.rvm/rubies/ruby-2.3.0/include/ruby-2.3.0 -I. -I/usr/local/opt/libyaml/include -I/usr/local/opt/readline/include -I/usr/local/opt/libksba/include -I/usr/local/opt/openssl/include -D_XOPEN_SOURCE -D_DARWIN_C_SOURCE -D_DARWIN_UNLIMITED_SELECT -D_REENTRANT -O3 -fno-fast-math -ggdb3 -Wall -Wextra -Wno-unused-parameter -Wno-parentheses -Wno-long-long -Wno-missing-field-initializers -Wunused-variable -Wpointer-arith -Wwrite-strings -Wdeclaration-after-statement -Wshorten-64-to-32 -Wimplicit-function-declaration -Wdivision-by-zero -Wdeprecated-declarations -Wextra-tokens -fno-common -pipe conftest.c -o conftest.i""conftest.c:3:10: fatal error: 'libpq-fe.h' file not found#include <libpq-fe.h> ^1 error generated.checked program was:/* begin */1: #include ""ruby.h""2: 3: #include <libpq-fe.h>/* end */--------------------",gem install pg for ruby on rails
how to create customize view for rails admin?," Currently, I'm working on a project using rails_admin gem for admin dashboard displaying. But view is auto generate according to Model field. I want to display my on view in admin dashboard. What is the process of display custom view into rails admin?  <code> ",How to create customize view for rails admin?
How to create customize view for rails admin?," Currently, I'm working on a project using rails_admin gem for admin dashboard displaying. But view is auto generate according to Model field. I want to display my on view in admin dashboard. What is the process of display custom view into rails admin?  <code> ",How to create customize view for rails admin?
how to create customize view for rails admin?," Currently, I'm working on a project using rails_admin gem for admin dashboard displaying. But view is auto generate according to Model field. I want to display my on view in admin dashboard. What is the process of display custom view into rails admin?  <code> ",How to create customize view for rails admin?
Why does rails to_a mess with the order of a has_many association?," TL;DR: This question has its own sample app at https://github.com/skensell/SO-question-example which you can use to debug yourself. I put a bounty already once on this question, but I'm not convinced of (or I don't understand) the top answerer's reasoning. I am going to put another bounty on this because it's causing me a lot of frustration.ORIGINAL QUESTIONI have a model User which has an association like so: I have an endpoint which performs a search for users and sets an @users variable to be used by the view. Here comes the spooky part which I found in the debugger: What is going on here? The only difference is to_a. I even tried leaving out the to_a, but I think it's implicitly being called by jbuilder anyways since I set it to a json array.Maybe the way I'm searching User has something to do with it? I'm using several includes and joins.UPDATEHere I can show you a simple example of this weird behavior from the rails console. It seems that the includes..references is the offender, but I don't get why or how. I can verify that these queries refer to the same user, and that the one labeled Correct order is really correct w.r.t sort_order and created_at (which is how the association specifies the ordering).UPDATE 2Attached is the requested SQL log. I changed irrelevant fields to ""OMITTED"" and I replaced 34 irrelevant user fields with a '...'. And here I'll attach a log which shows the user in question's avatars (id, sort_order, and created_at) so you can see that the order should be deterministic. Also, I'm using Rails 4.1.4 and Ruby 2.1.10.UPDATE 3I have created a sample app here: https://github.com/skensell/SO-question-example . What's even stranger in this sample app is that the to_a doesn't even matter. I get the wrong ordering even with just the includes... references. <code>  has_many :avatars, -> { order([:sort_order => :asc,:created_at => :asc])} @users.first.avatars[0..2].map(&:id)# => [2546, 2547, 2548]# This is the correct order.@users.to_a.first.avatars[0..2].map(&:id)# => [2548, 2546, 2547]# Wrong order. User.order(id: :desc) .includes(:avatars, :industries) .where(industries: {id: [5]}) .references(:industries) .limit(5).to_a.second.avatars.map(&:id)# => [2751, 2748, 2749]# Wrong order.User.order(id: :desc) .includes(:avatars, :industries) .where(industries: {id: [5]}) .references(:industries) .limit(5).second.avatars.map(&:id)# => [2748, 2749, 2751]# Correct order. >> User.order(id: :desc).includes(:avatars, :industries).where(industries: {id: [5]}).references(:industries).limit(5).to_a.second.avatars.map(&:id)SQL (18.5ms) SELECT DISTINCT ""users"".""id"", ""users"".""id"" AS alias_0 FROM ""users"" LEFT OUTER JOIN ""avatars"" ON ""avatars"".""user_id"" = ""users"".""id"" LEFT OUTER JOIN ""user_professions"" ON ""user_professions"".""user_id"" = ""users"".""id"" LEFT OUTER JOIN ""industries"" ON ""industries"".""id"" = ""user_professions"".""industry_id"" WHERE ""industries"".""id"" IN (5) ORDER BY ""users"".""id"" DESC LIMIT 5SQL (8.3ms) SELECT ""users"".""id"" AS t0_r0, ""users"".""OMITTED"" AS t0_r1, ""users"".""OMITTED"" AS t0_r2, ... AS t0_r36, ""avatars"".""id"" AS t1_r0, ""avatars"".""user_id"" AS t1_r1, ""avatars"".""avatar"" AS t1_r2, ""avatars"".""created_at"" AS t1_r3, ""avatars"".""updated_at"" AS t1_r4, ""avatars"".""OMITTED"" AS t1_r5, ""avatars"".""OMITTED"" AS t1_r6, ""avatars"".""sort_order"" AS t1_r7, ""industries"".""id"" AS t2_r0, ""industries"".""name"" AS t2_r1, ""industries"".""created_at"" AS t2_r2, ""industries"".""updated_at"" AS t2_r3 FROM ""users"" LEFT OUTER JOIN ""avatars"" ON ""avatars"".""user_id"" = ""users"".""id"" LEFT OUTER JOIN ""user_professions"" ON ""user_professions"".""user_id"" = ""users"".""id"" LEFT OUTER JOIN ""industries"" ON ""industries"".""id"" = ""user_professions"".""industry_id"" WHERE ""industries"".""id"" IN (5) AND ""users"".""id"" IN (1526, 945, 927, 888, 884) ORDER BY ""users"".""id"" DESC=> [2751, 2748, 2749]>> User.order(id: :desc).includes(:avatars, :industries).where(industries: {id: [5]}).references(:industries).limit(5).second.avatars.map(&:id)SQL (0.9ms) SELECT DISTINCT ""users"".""id"", ""users"".""id"" AS alias_0 FROM ""users"" LEFT OUTER JOIN ""avatars"" ON ""avatars"".""user_id"" = ""users"".""id"" LEFT OUTER JOIN ""user_professions"" ON ""user_professions"".""user_id"" = ""users"".""id"" LEFT OUTER JOIN ""industries"" ON ""industries"".""id"" = ""user_professions"".""industry_id"" WHERE ""industries"".""id"" IN (5) ORDER BY ""users"".""id"" DESC LIMIT 1 OFFSET 1SQL (0.8ms) SELECT ""users"".""id"" AS t0_r0, ""users"".""OMITTED"" AS t0_r1, ""users"".""OMITTED"" AS t0_r2, ... AS t0_r36, ""avatars"".""id"" AS t1_r0, ""avatars"".""user_id"" AS t1_r1, ""avatars"".""avatar"" AS t1_r2, ""avatars"".""created_at"" AS t1_r3, ""avatars"".""updated_at"" AS t1_r4, ""avatars"".""OMITTED"" AS t1_r5, ""avatars"".""OMITTED"" AS t1_r6, ""avatars"".""sort_order"" AS t1_r7, ""industries"".""id"" AS t2_r0, ""industries"".""name"" AS t2_r1, ""industries"".""created_at"" AS t2_r2, ""industries"".""updated_at"" AS t2_r3 FROM ""users"" LEFT OUTER JOIN ""avatars"" ON ""avatars"".""user_id"" = ""users"".""id"" LEFT OUTER JOIN ""user_professions"" ON ""user_professions"".""user_id"" = ""users"".""id"" LEFT OUTER JOIN ""industries"" ON ""industries"".""id"" = ""user_professions"".""industry_id"" WHERE ""industries"".""id"" IN (5) AND ""users"".""id"" IN (945) ORDER BY ""users"".""id"" DESC=> [2748, 2749, 2751]>> >> User.find(945).avatars.pluck(:id,:sort_order,:created_at)User Load (5.3ms) SELECT ""users"".* FROM ""users"" WHERE ""users"".""id"" = $1 LIMIT 1 [[""id"", 945]](0.2ms) SELECT ""avatars"".""id"", ""avatars"".""sort_order"", ""avatars"".""created_at"" FROM ""avatars"" WHERE ""avatars"".""user_id"" = $1 ORDER BY ""avatars"".""sort_order"" ASC, ""avatars"".""created_at"" ASC [[""user_id"", 945]]=> [[2748, 0, Fri, 13 Nov 2015 00:32:53 UTC +00:00], [2749, 0, Fri, 13 Nov 2015 00:47:02 UTC +00:00], [2751, 0, Fri, 13 Nov 2015 00:48:05 UTC +00:00]]",Rails ignores association scope when pre-caching with includes
Why does rails to_a or includes/references mess with the order of a has_many association?," TL;DR: This question has its own sample app at https://github.com/skensell/SO-question-example which you can use to debug yourself. I put a bounty already once on this question, but I'm not convinced of (or I don't understand) the top answerer's reasoning. I am going to put another bounty on this because it's causing me a lot of frustration.ORIGINAL QUESTIONI have a model User which has an association like so: I have an endpoint which performs a search for users and sets an @users variable to be used by the view. Here comes the spooky part which I found in the debugger: What is going on here? The only difference is to_a. I even tried leaving out the to_a, but I think it's implicitly being called by jbuilder anyways since I set it to a json array.Maybe the way I'm searching User has something to do with it? I'm using several includes and joins.UPDATEHere I can show you a simple example of this weird behavior from the rails console. It seems that the includes..references is the offender, but I don't get why or how. I can verify that these queries refer to the same user, and that the one labeled Correct order is really correct w.r.t sort_order and created_at (which is how the association specifies the ordering).UPDATE 2Attached is the requested SQL log. I changed irrelevant fields to ""OMITTED"" and I replaced 34 irrelevant user fields with a '...'. And here I'll attach a log which shows the user in question's avatars (id, sort_order, and created_at) so you can see that the order should be deterministic. Also, I'm using Rails 4.1.4 and Ruby 2.1.10.UPDATE 3I have created a sample app here: https://github.com/skensell/SO-question-example . What's even stranger in this sample app is that the to_a doesn't even matter. I get the wrong ordering even with just the includes... references. <code>  has_many :avatars, -> { order([:sort_order => :asc,:created_at => :asc])} @users.first.avatars[0..2].map(&:id)# => [2546, 2547, 2548]# This is the correct order.@users.to_a.first.avatars[0..2].map(&:id)# => [2548, 2546, 2547]# Wrong order. User.order(id: :desc) .includes(:avatars, :industries) .where(industries: {id: [5]}) .references(:industries) .limit(5).to_a.second.avatars.map(&:id)# => [2751, 2748, 2749]# Wrong order.User.order(id: :desc) .includes(:avatars, :industries) .where(industries: {id: [5]}) .references(:industries) .limit(5).second.avatars.map(&:id)# => [2748, 2749, 2751]# Correct order. >> User.order(id: :desc).includes(:avatars, :industries).where(industries: {id: [5]}).references(:industries).limit(5).to_a.second.avatars.map(&:id)SQL (18.5ms) SELECT DISTINCT ""users"".""id"", ""users"".""id"" AS alias_0 FROM ""users"" LEFT OUTER JOIN ""avatars"" ON ""avatars"".""user_id"" = ""users"".""id"" LEFT OUTER JOIN ""user_professions"" ON ""user_professions"".""user_id"" = ""users"".""id"" LEFT OUTER JOIN ""industries"" ON ""industries"".""id"" = ""user_professions"".""industry_id"" WHERE ""industries"".""id"" IN (5) ORDER BY ""users"".""id"" DESC LIMIT 5SQL (8.3ms) SELECT ""users"".""id"" AS t0_r0, ""users"".""OMITTED"" AS t0_r1, ""users"".""OMITTED"" AS t0_r2, ... AS t0_r36, ""avatars"".""id"" AS t1_r0, ""avatars"".""user_id"" AS t1_r1, ""avatars"".""avatar"" AS t1_r2, ""avatars"".""created_at"" AS t1_r3, ""avatars"".""updated_at"" AS t1_r4, ""avatars"".""OMITTED"" AS t1_r5, ""avatars"".""OMITTED"" AS t1_r6, ""avatars"".""sort_order"" AS t1_r7, ""industries"".""id"" AS t2_r0, ""industries"".""name"" AS t2_r1, ""industries"".""created_at"" AS t2_r2, ""industries"".""updated_at"" AS t2_r3 FROM ""users"" LEFT OUTER JOIN ""avatars"" ON ""avatars"".""user_id"" = ""users"".""id"" LEFT OUTER JOIN ""user_professions"" ON ""user_professions"".""user_id"" = ""users"".""id"" LEFT OUTER JOIN ""industries"" ON ""industries"".""id"" = ""user_professions"".""industry_id"" WHERE ""industries"".""id"" IN (5) AND ""users"".""id"" IN (1526, 945, 927, 888, 884) ORDER BY ""users"".""id"" DESC=> [2751, 2748, 2749]>> User.order(id: :desc).includes(:avatars, :industries).where(industries: {id: [5]}).references(:industries).limit(5).second.avatars.map(&:id)SQL (0.9ms) SELECT DISTINCT ""users"".""id"", ""users"".""id"" AS alias_0 FROM ""users"" LEFT OUTER JOIN ""avatars"" ON ""avatars"".""user_id"" = ""users"".""id"" LEFT OUTER JOIN ""user_professions"" ON ""user_professions"".""user_id"" = ""users"".""id"" LEFT OUTER JOIN ""industries"" ON ""industries"".""id"" = ""user_professions"".""industry_id"" WHERE ""industries"".""id"" IN (5) ORDER BY ""users"".""id"" DESC LIMIT 1 OFFSET 1SQL (0.8ms) SELECT ""users"".""id"" AS t0_r0, ""users"".""OMITTED"" AS t0_r1, ""users"".""OMITTED"" AS t0_r2, ... AS t0_r36, ""avatars"".""id"" AS t1_r0, ""avatars"".""user_id"" AS t1_r1, ""avatars"".""avatar"" AS t1_r2, ""avatars"".""created_at"" AS t1_r3, ""avatars"".""updated_at"" AS t1_r4, ""avatars"".""OMITTED"" AS t1_r5, ""avatars"".""OMITTED"" AS t1_r6, ""avatars"".""sort_order"" AS t1_r7, ""industries"".""id"" AS t2_r0, ""industries"".""name"" AS t2_r1, ""industries"".""created_at"" AS t2_r2, ""industries"".""updated_at"" AS t2_r3 FROM ""users"" LEFT OUTER JOIN ""avatars"" ON ""avatars"".""user_id"" = ""users"".""id"" LEFT OUTER JOIN ""user_professions"" ON ""user_professions"".""user_id"" = ""users"".""id"" LEFT OUTER JOIN ""industries"" ON ""industries"".""id"" = ""user_professions"".""industry_id"" WHERE ""industries"".""id"" IN (5) AND ""users"".""id"" IN (945) ORDER BY ""users"".""id"" DESC=> [2748, 2749, 2751]>> >> User.find(945).avatars.pluck(:id,:sort_order,:created_at)User Load (5.3ms) SELECT ""users"".* FROM ""users"" WHERE ""users"".""id"" = $1 LIMIT 1 [[""id"", 945]](0.2ms) SELECT ""avatars"".""id"", ""avatars"".""sort_order"", ""avatars"".""created_at"" FROM ""avatars"" WHERE ""avatars"".""user_id"" = $1 ORDER BY ""avatars"".""sort_order"" ASC, ""avatars"".""created_at"" ASC [[""user_id"", 945]]=> [[2748, 0, Fri, 13 Nov 2015 00:32:53 UTC +00:00], [2749, 0, Fri, 13 Nov 2015 00:47:02 UTC +00:00], [2751, 0, Fri, 13 Nov 2015 00:48:05 UTC +00:00]]",Rails ignores association scope when pre-caching with includes
Ruby puts and the times method on numbers," This code: Outputs this: I would expect Ruby to output the return value of the times method, but it doesn't seem to do that. It prints out the number that times is being called on. What is happening? <code>  puts 1.times { puts 2.times { puts 3.times { puts 4 } } } 4 4 4 3 4 4 4 3 2 1",Puts and times method on numbers
"How to make ""Like Clause"" Case-Insensitive in Rails 5 [Rails 5.0]"," I'm using a LIKE clause in Ruby On Rails. When I try to search for records by typing ""more"" it doesn't return anything, but when I do with ""More"", then it returns the records which contains More keyword, so it seems like it behaves in a case-sensitive way.Is it possible to make this case-insensitive?Here is the query I am using currently: <code>  Job.where('title LIKE ? OR duration LIKE ?', ""%#{params[:search]}%"", ""%#{params[:search]}%"")",How to make LIKE clause case-insensitive?
"How to make ""Like Clause"" Case-Insensitive"," I'm using a LIKE clause in Ruby On Rails. When I try to search for records by typing ""more"" it doesn't return anything, but when I do with ""More"", then it returns the records which contains More keyword, so it seems like it behaves in a case-sensitive way.Is it possible to make this case-insensitive?Here is the query I am using currently: <code>  Job.where('title LIKE ? OR duration LIKE ?', ""%#{params[:search]}%"", ""%#{params[:search]}%"")",How to make LIKE clause case-insensitive?
Add rescue in each class method," The a_method ocassionally throws an AException.I want to rescue from that exception, like: I want to rescue the same way in each methods inside class B (method_1, method_2, ..., method_n). I'm stuck on figuring out a nice and clean solution, that would not require to duplicate the rescue code block. Can you help me with that? <code>  class A def a_method #.. endendclass B < A def method_1 # ... a_method end def method_2 # ... a_method end # ... def method_n # ... a_method endend class B < A def method_1 # ... a_method rescue AException => e p e.message end # ...end",Add rescue in each method inside a class
Add rescue in each methods inside a class," The a_method ocassionally throws an AException.I want to rescue from that exception, like: I want to rescue the same way in each methods inside class B (method_1, method_2, ..., method_n). I'm stuck on figuring out a nice and clean solution, that would not require to duplicate the rescue code block. Can you help me with that? <code>  class A def a_method #.. endendclass B < A def method_1 # ... a_method end def method_2 # ... a_method end # ... def method_n # ... a_method endend class B < A def method_1 # ... a_method rescue AException => e p e.message end # ...end",Add rescue in each method inside a class
Pod Install in XCode Bots Trigger," I started the pre integration trigger with the following And it gave me Simple right? Can't find the pod binary so, I'll just point it over to the path. Easy. Which gives me the following This makes me think ruby isn't set up right to run for the triggers. Now understand a simple ""pod install"" in the terminal of the build server fixes all this and runs fine and dandy. The project definitely builds properly on the build server.So since I think the environment is messed up, I'll try to run it from the wrapper directory, that should set up good and nice. That's what it's made for right? This worked historically whenever I needed ruby to run in a run script phase of the build. So here we go on the trigger. I test this one in the terminal of the build server and it's cool with it, so I put it into the trigger and I get this :/ Alright I crack up the pod source and see what it says on line 7 I'm not a ruby person but it didn't mean anything to me. Oh yeah and I tried downloading cocoapods directly into usr/local/bin, rather than letting it install into some other directory, by first uninstalling all cocoapods and then by doing the following I put --pre because I needed 1.1.0.rc.2 to fix a bug with building swift 3. Any who, it all doesn't work. It seems like everyone else can simply put into their Xcode bot triggers and have them work.  <code>  cd ""${XCS_PRIMARY_REPO_DIR}""pwdpod install --verbose pod: command not found cd ""${XCS_PRIMARY_REPO_DIR}""pwd/usr/local/bin/pod install --verbose env: ruby_executable_hooks: No such file or directory ~/.rvm/wrappers/ruby-2.2.3@global/pod install /Users/XcodeServer/.rvm/wrappers/ruby-2.2.3@global/pod: line 7: exec: pod: not found exec pod ""$@"" sudo gem install -n /usr/local/bin cocoapods --pre cd /path/to/proj/pod install",Pod Install in Xcode Bots Trigger
About ruby && return vs and return," While going through the Rails guide at http://guides.rubyonrails.org/layouts_and_rendering.html#avoiding-double-render-errors ,I wrote a test program to test Ruby's && return, and I got this strange behavior: This is the result output: What accounts for the difference? <code>  def test1 puts 'hello' && return puts 'world'enddef test2 puts 'hello' and return puts 'world'end irb(main):028:0> test1=> nilirb(main):029:0> test2helloworld=> nil","Ruby: ""&& return"" vs ""and return"""
How to extract links and link text from HTML using Nokogiri," (Update: This answer is written from the point of view of Nokogiri, but it's also useful if you're looking for the XPATH or CSS syntax for specific queries.)I love Nokogiri -- it's a wonderful tool for extracting elements from XML and HTML documents. Although the online examples are good, they mostly show how to manipulate XML documents. How can you extract extract links and link text from HTML using Nokogiri? <code> ",How to extract HTML links and text using Nokogiri (and XPATH and CSS)
Rails ActiveRecord callback condition issue," ruby 2.1.8rails 3.2.18I am trying to run a callback when a record is saved only if a particular attribute has been changed. For example However, when I change my_attr and save, do_the_thing is not getting called. And yet, if I do the exact same thing, but with: It outputs ""true"" into the logs. Rather confused here. Any help appreciated. Thanks. <code>  before_save :do_the_thing, if: :my_attr_changed? before_save :do_the_thingdef do_the_thing puts my_attr_changed?end",Rails ActiveRecord conditional callback issue
Initialize class object variable in RUBY," I have created a class for example Same as other lang. like php, C# etc I have created a class and pass a value and since it has initialize method it will should now contains the object values but when I try to print out it says undefined method min <code>  class Result @@min = 0 @@max = 0 def initialize(min, max) @@max.min = min @@max.max = max endendresult = Result.new(1, 10)result.max puts result.minputs result.max",Initialize class object variable in Ruby
OS-Sierra/Ruby on Rails/malloc malloc_zone_unregister failure on server start," When starting up the rails server for a project I'm working on, I receive the following error: The thing that changed over the weekend was that I upgraded to OS Sierra. Research thus far: I came across this github issueIt seemed promising and I attempted to modify my jemalloc gem's zone.c file to try out the code changes in the fix PR. This didn't do anything to change the errorTaking a step back, jemalloc is not in my Gemfile so I'm lost as to what might be causing this problem and how I can fix it other than to try and remove Sierra from my computer.Update:I re-introduced gems in my Gemfile in groups which resulted in different versions of the gems being used - This appears to have mysteriously resolved the problem. I'm curious if anyone has any insight to why this may have happened - git diff below: <code>  malloc: *** malloc_zone_unregister() failed for <memory address> adamantium (0.2.0) ice_nine (~> 0.11.0) memoizable (~> 0.4.0) - addressable (2.3.7) + addressable (2.4.0) annotate (2.6.8) activerecord (>= 3.2, <= 4.3) rake (~> 10.4) @@ -122,7 +122,7 @@ GEM capistrano-deploy-strategy-archive (0.1.2) capistrano (>= 2.1.0) chronic (0.10.2) - chunky_png (1.3.4) + chunky_png (1.3.7) climate_control (0.0.3) activesupport (>= 3.0) cocaine (0.5.7) @@ -145,10 +145,10 @@ GEM sass (>= 3.3.0, < 3.5) compass-import-once (1.0.5) sass (>= 3.2, < 3.5) - compass-rails (2.0.4) + compass-rails (3.0.2) compass (~> 1.0.0) - sass-rails (<= 5.0.1) - sprockets (< 2.13) + sass-rails (< 5.1) + sprockets (< 4.0) concord (0.1.5) adamantium (~> 0.2.0) equalizer (~> 0.0.9) @@ -180,7 +180,7 @@ GEM descendants_tracker (0.0.4) thread_safe (~> 0.3, >= 0.3.1) diff-lcs (1.2.5) - domain_name (0.5.23) + domain_name (0.5.24) unf (>= 0.0.5, < 1.0.0) dotenv (2.0.1) dotenv-rails (2.0.1) @@ -197,17 +197,17 @@ GEM eventmachine (1.0.7) eventmachine (1.0.7-java) excon (0.51.0) - execjs (2.4.0) + execjs (2.7.0) ezcrypto (0.7.2) faker (1.4.3) i18n (~> 0.5) - faraday (0.9.1) + faraday (0.9.2) multipart-post (>= 1.2, < 3) fast_stack (0.1.0) rake rake-compiler - ffi (1.2.1) - ffi (1.2.1-java) + ffi (1.9.14) + ffi (1.9.14-java) fission (0.5.0) CFPropertyList (~> 2.2) fixture_builder (0.3.6) @@ -389,7 +389,7 @@ GEM nokogiri (~> 1.6.0) ruby_parser (~> 3.5) htmltokenizer (1.0) - http (0.6.3) + http (0.6.4) http_parser.rb (~> 0.6.0) http-cookie (1.0.2) domain_name (~> 0.5) @@ -404,10 +404,10 @@ GEM RubyInline (~> 3.9) inflecto (0.0.2) ipaddress (0.8.3) - jbuilder (2.2.11) + jbuilder (2.3.2) activesupport (>= 3.0.0, < 5) multi_json (~> 1.2) - jquery-rails (4.0.3) + jquery-rails (4.0.5) rails-dom-testing (~> 1.0) railties (>= 4.2.0) thor (>= 0.14, < 2.0) @@ -454,7 +454,7 @@ GEM multi_json (1.12.1) multi_xml (0.5.5) multipart-post (2.0.0) - naught (1.0.0) + naught (1.1.0) net-http-digest_auth (1.4) net-http-persistent (2.9.4) net-scp (1.2.1) @@ -565,14 +565,15 @@ GEM rake rakismet (1.5.3) raspell (1.3) - rb-fsevent (0.9.4) - rb-inotify (0.9.5) + rb-fsevent (0.9.7) + rb-inotify (0.9.7) ffi (>= 0.5.0) rbvmomi (1.8.2) builder nokogiri (>= 1.4.1) trollop - rdoc (4.2.0) + rdoc (4.2.2) + json (~> 1.4) redis (3.2.1) redis-actionpack (4.0.1) actionpack (~> 4) @@ -604,7 +605,8 @@ GEM right_aws (3.1.0) right_http_connection (>= 1.2.5) right_http_connection (1.5.0) - rollbar (2.0.1) + rollbar (2.13.1) + multi_json rspec (3.2.0) rspec-core (~> 3.2.0) rspec-expectations (~> 3.2.0) @@ -646,33 +648,33 @@ GEM parser (>= 2.2.0, < 3.0) reek (= 1.6.5) virtus (~> 1.0) - rubyzip (1.1.7) + rubyzip (1.2.0) rvm-capistrano (1.5.6) capistrano (~> 2.15.4) safe_yaml (1.0.4) sass (3.4.22) - sass-rails (5.0.1) + sass-rails (5.0.4) railties (>= 4.0.0, < 5.0) sass (~> 3.1) sprockets (>= 2.8, < 4.0) sprockets-rails (>= 2.0, < 4.0) - tilt (~> 1.1) + tilt (>= 1.1, < 3) sdoc (0.4.1) json (~> 1.7, >= 1.7.7) rdoc (~> 4.0) sexp_processor (4.7.0) - simple_form (3.1.0) - actionpack (~> 4.0) - activemodel (~> 4.0) + simple_form (3.3.1) + actionpack (> 4, < 5.1) + activemodel (> 4, < 5.1) simple_oauth (0.3.1) sinatra (1.4.5) rack (~> 1.4) rack-protection (~> 1.4) tilt (~> 1.3, >= 1.3.4) - skylight (0.8.1) + skylight (0.10.6) activesupport (>= 3.0.0) slop (3.6.0) - spoon (0.0.4) + spoon (0.0.6) ffi sprockets (2.12.4) hike (~> 1.2) @@ -683,20 +685,20 @@ GEM actionpack (>= 3.0) activesupport (>= 3.0) sprockets (>= 2.8, < 4.0) - stackprof (0.2.7) + stackprof (0.2.9) stripe (1.36.0) json (~> 1.8.1) rest-client (~> 1.4) - stripe_event (1.5.0) + stripe_event (1.5.1) activesupport (>= 3.1) stripe (~> 1.6) test-unit (3.0.9) power_assert thor (0.19.1) thread_safe (0.3.5) thread_safe (0.3.5-java) - tidy_ffi (0.1.5) - ffi (~> 1.2.0) + tidy_ffi (0.1.6) + ffi (~> 1.2) tilt (1.4.1) trollop (2.1.2) truncate_html (0.9.3) @@ -713,13 +715,12 @@ GEM simple_oauth (~> 0.3.0) tzinfo (1.2.2) thread_safe (~> 0.1) - uglifier (2.7.1) - execjs (>= 0.3.0) - json (>= 1.8.0) + uglifier (3.0.2) + execjs (>= 0.3.0, < 3) unf (0.1.4) unf_ext unf (0.1.4-java) - unf_ext (0.0.6) + unf_ext (0.0.7.1) uniform_notifier (1.9.0) unparser (0.2.2) abstract_type (~> 0.0.7) @@ -734,19 +735,19 @@ GEM coercible (~> 1.0) descendants_tracker (~> 0.0, >= 0.0.3) equalizer (~> 0.0, >= 0.0.9) - visual_captcha (0.0.1) + visual_captcha (0.0.2) json web-console (2.1.2) activemodel (>= 4.0) binding_of_caller (>= 0.7.2) railties (>= 4.0) sprockets-rails (>= 2.0, < 4.0) webrobots (0.1.1) - whenever (0.9.4) + whenever (0.9.7) chronic (>= 0.6.3) - wicked (1.1.1) - rails (>= 3.0.7) - will_paginate (3.0.7) + wicked (1.3.1) + railties (>= 3.0.7) + will_paginate (3.1.3) woo (0.2.0) bourbon decent_exposure @@ -887,4 +888,4 @@ DEPENDENCIES zaru BUNDLED WITH - 1.12.5 + 1.13.1",malloc_zone_unregister failure on Rails server start
Changing a string of integer to integer and checking if the string contains only numbers in ruby," I have a string which is passed as a parameter to a function. Here, I want to check if the string contains only numbers. So I had a check like below: But the problem arises when a string starts with 0. In that case, a false is returned. How can I solve this issue? <code>  def check_string(string) result = false if string.to_i.to_s.eql? string result = true end resultend check_string('123') #=> truecheck_string('0123') #=> false",Check if a string contains only digits in ruby
Ruby don't see class and object varibles," and i get error on the line @goodbay = TestClass.varible What is wrong? <code>  class TestController < ApplicationController def test @goodbay = TestClass.varible endendclass TestClass @@varible = ""var""end undefined method 'varible' for TestClass:Class ",How do I access class variable?
Ruby return value on class," Can someone more versed in ruby than I please answer why the following returns nothing? shouldn't the result of puts test be the same as if i had called puts on @total directly in the class? <code>  class ThreeAndFive def initialize(low_number, high_number) @total = 0 (low_number..high_number).each do |number| if (number % 3 == 0 && number % 5 == 0) @total += number end end #puts @total here returns value of 33165 return @total endendtest = ThreeAndFive.new(1,1000)#This returns nothing but ""#<ThreeAndFive:0x25d71f8>""puts test",Return value of initialize method
Cannot call has_many methods in Rails 5," I am attempting to track mutual likes where a user likes a user that likes them. To check if the like is mutual, I call an method after the like is created. If that liker has been a likee than it is considered mutual.The problem however, is that I run into some odd errors that I believe are related to how the foreign keys have been set up. I have set up a has many association in Rails but any time I attempt to access it, I get a PG::InFailedSqlTransaction: ERROR: current transaction is aborted, commands ignored until end of transaction block : RELEASE SAVEPOINT active_record_1 error.User: Like: I've tried changing the hook to be around save, etc. but that doesn't work either. Also, I cannot even call Like.first else I get the same error. I've tried printing out liker.likes.where(likee: liker) and i get PG::UndefinedColumn: ERROR: column likes.user_id does not exist which I think is the problem. I can however, access the liker like this: self.likee inside of the hook but I cannot call self.likee.likes without it returning #<Like::ActiveRecord_Associations_CollectionProxy:0x3fd91ca5ca78>Schema: Tests: Is this caused because I'm attempting to lookup a record that is being saved?  <code>  class User < ApplicationRecord has_many :likesend class Like < ApplicationRecord belongs_to :likee, class_name: 'User', foreign_key: 'likee_id' belongs_to :liker, class_name: 'User', foreign_key: 'liker_id' belongs_to :connection, optional: true after_save :mutual_like? private def mutual_like? if liker.likes.where(likee: liker) # fails end endend create_table ""likes"", force: :cascade do |t| t.integer ""liker_id"", null: false t.integer ""likee_id"", null: false t.integer ""connection_id"" t.datetime ""created_at"", null: false t.datetime ""updated_at"", null: false t.index [""likee_id""], name: ""index_likes_on_likee_id"", using: :btree t.index [""liker_id""], name: ""index_likes_on_liker_id"", using: :btree endcreate_table ""users"", force: :cascade do |t| t.string ""email"" t.string ""username"" t.string ""password_digest"" t.boolean ""admin"", default: false t.index [""email""], name: ""index_users_on_email"", using: :btree t.index [""username""], name: ""index_users_on_username"", using: :btree end RSpec.describe Like, type: :model do let(:liker) { Fabricate(:user) } let(:likee) { Fabricate(:user) } let(:like) { Fabricate(:like, liker: liker, likee: likee) } let(:pending_like) { Fabricate.build(:like, liker: liker, likee: likee)} context 'relations' do it { should belong_to :likee } it { should belong_to :liker } describe 'liking another user' do it '#liker references first user' do expect(like.likee).to eq likee end it '#likee references second user' do expect(like.liker).to eq liker end end end ...RSpec.describe User, type: :model do context 'relations' do it { should have_many :likes } end ...",Setting up Foreign Keys in Rails with Postgres
Ruby on Rails : Rake or Rails db:mirate," I am new to RoR and am starting on the guide at http://guides.rubyonrails.org/getting_started.html .When I run the command bin/rails db:migrate, I get the error command db:migrate not recognizedBut I am able to run the command bin/rake db:migrate without any issues. My question is : is there any difference between the two or can I just rest easy and use rake? Thanks! <code> ",Rake or Rails db:migrate
Rake or Rails db:mirate," I am new to RoR and am starting on the guide at http://guides.rubyonrails.org/getting_started.html .When I run the command bin/rails db:migrate, I get the error command db:migrate not recognizedBut I am able to run the command bin/rake db:migrate without any issues. My question is : is there any difference between the two or can I just rest easy and use rake? Thanks! <code> ",Rake or Rails db:migrate
Installing nokogiri on Mac OS Sierra 10.12, I'm having troubles installing Nokogiri (1.6.8.1) on Mac OS Sierra 10.12.I tried using brew install libxml2 libxslt and then referencing the install directories using command line options but it didn't help. <code> ,How to install Nokogiri on Mac OS Sierra 10.12
Rails 5 ActionController::RoutingError: uninitialized constant Api::V1::ApiController," I have Rails 5 API project for controlling user tasks and I have the following error but not always for the same controller and route. I describe you a little bit my project to explain in more detail the error.App structureRoutes API Controller Team Controller Tasks Controller Login Controller Sessions Controller When I execute login route and after tasks route, I get the error in last route and all the routes in team module. If I change the project and save it (only one blank space) and then I execute tasks route and after login route, I get the error in last route and all the routes in login module.It doesn't have any sense...Rails server in this errors <code>  ActionController::RoutingError: uninitialized constant Api::V1::ApiController scope module: 'api' do namespace :v1 do # => Login routes scope module: 'login' do match 'login', to: 'sessions#login', as: 'login', via: :post end # => Team routes scope module: 'team' do # => no admin routes resources :tasks, except: [:index] do collection do match ':view', to: 'tasks#index', as: 'tasks', via: [:get, :post] end end end endend module Api class ApiController < ApplicationController def respond_with_errors(object) render json: {errors: ErrorSerializer.serialize(object)}, status: :unprocessable_entity end endend module Api::V1 class Team::TeamController < ApiController module Api::V1 class Team::TasksController < Team::TeamController module Api::V1 class Login::LoginController < ApiController module Api::V1 class Login::SessionsController < Login::LoginController",ActionController::RoutingError: uninitialized constant Api::V1::ApiController
create JSON object in Ruby," I am creating a JSON file with Ruby.I need to create the object ""companies"" within the JSON file.Expected result: What I am getting: My code: <code>  {""companies"":[ {\""label\"":\""Wayfair \"",\""values\"":[54]}, {\""label\"":\""Move24 \"",\""values\"":[29]}, {\""label\"":\""Auto1 \"",\""values\"":[23]},...]} [ ""{\""label\"":\""Wayfair \"",\""values\"":[54,54]}"", ""{\""label\"":\""Move24 \"",\""values\"":[29,29]}"", ""{\""label\"":\""GetYourGuide \"",\""values\"":[28,28]}"", ""{\""label\"":\""Auto1.com \"",\""values\"":[20,20]}"", ...] data_hash = data_hash.map {|k,v| {label: k, values: v}}companies_json = []data_hash.each do |hash| companies_json << hash.to_jsonendFile.open('companies.json', 'w') do |f| f << companies_jsonend",How to create a JSON object in Ruby
How to handle before filter for specific actions in Grape?," I'm mounting Grape in my Rails project to build a RESTful API. Now some end-points have actions need authentication and others which don't need authentication. As for example I have users end-point which looks something like: Now as you can see, all the actions except password/forget needs the user to be logged-in/authenticated. It doesn't make sense too to create a new end-point let's say passwords and just remove password/forget there as logically speaking, this end-point should be related to users resource. The problem is with Grape before filter has no options like except, only in which I can say apply the filter for certain actions.How do you usually handle such a case in a clean way?  <code>  module Backend module V1 class Users < Grape::API include Backend::V1::Defaults before { authenticate! } resource :users do desc ""Return a user"" params do requires :id, type: Integer, desc: 'User id' end get ':id' do UsersService::Fetch.new(current_user,params).call end desc ""Update a user"" params do requires :id, type: Integer, desc: 'User id' requires :display_name, type: String, desc: 'Display name' requires :email, type: String, desc: 'Email' end post ':id' do UsersService::Save.new(current_user,params).call end desc ""Reset user password"" params do requires :old_password, type: String, desc: 'old password' requires :password, type: String, desc: 'new password' end post 'password/reset' do PasswordService::Reset.new(current_user,params).call end desc ""Forget password"" params do requires :email, type: String end post 'password/forget' do PasswordService::Forget.new(current_user,params).call end end end endend",How to handle before filter for specific action in Grape?
Enums in rails: uppercase or lowercase?," With most mentions of JAVA enums on the internet, it is everywhere mentioned that enums should be all uppercase (ex: ACTIVE). Like here: Coding Conventions - Naming EnumsBut when it comes to Rails, in all there examples and docs they use lowercase enum value (ex: 'active'), like here: http://edgeapi.rubyonrails.org/classes/ActiveRecord/Enum.htmlwhich makes sense since rails also provides instance methods by the name of these enums (eg: obj.active?). Is this the only reason why enums in Rails are used as lowercase, or is there more to it?Also we differ from the convention when we use enums as lowercase, should this be the case? or shall we use uppercase enums in Rails as well?So for example I have a status enum in my model, which can either be active, draft or inactive as per convention, should it be: or: Which one and why? <code>  enum status: {active: 1, draft: 2, inactive: 3} enum status: {ACTIVE: 1, DRAFT: 2, INACTIVE: 3}",Enums in Rails: uppercase or lowercase?
"Rails 5. DEPRECATION WARNING: alias_method_chain is deprecated. Please, use Module#prepend instead"," I upgraded the project to Rails 5. When I run rspec I get a warning The failing line in application.rb is: How do I find out what is causing this deprecation warning and how to get rid of the error?  <code>  DEPRECATION WARNING: alias_method_chain is deprecated. Please, use Module#prepend instead. From module, you can access the original method using super. (called from <top (required)> at /home/alex/projects/myproject/config/application.rb:13) Bundler.require(*Rails.groups)",DEPRECATION WARNING: alias_method_chain is deprecated
Deprecation Warning while using alias_method_chain," I upgraded the project to Rails 5. When I run rspec I get a warning The failing line in application.rb is: How do I find out what is causing this deprecation warning and how to get rid of the error?  <code>  DEPRECATION WARNING: alias_method_chain is deprecated. Please, use Module#prepend instead. From module, you can access the original method using super. (called from <top (required)> at /home/alex/projects/myproject/config/application.rb:13) Bundler.require(*Rails.groups)",DEPRECATION WARNING: alias_method_chain is deprecated
Search Multi models on ruby rails," I am still a beginner in ruby on rails and I'm trying to create a simple search option for a website that I'm developing. I have number of models such as Sundries, Curry and Starter. My search works fine if I have one model but how do I search all models title or name?I have added following method to each of the models and tried to display results in home page. but no luck! Can someone please help me figure this out with an example please?Thank you. <code>  def self.search(search)where(""LOWER(title) LIKE ?"", ""%#{search.downcase}%"") #where(""content LIKE ?"", ""%#{search}%"")end",Search Multiple models in ruby on rails
How to put params as include blank in select tag," I have a select tag with 2 options : When one of this options are selected, the form is automatically submit. I would like to keep the params in first position. I mean visible without clicking on the select, at the place of ""which products"". <code>  select_tag :type, options_for_select(""<option value = 'produit1'>Produit1</option><option value = 'Produit2'>Produit2</option>"", params[:product]), id: ""different_option_value_html"", onchange: ""this.form.submit();"", include_blank: ""Which products ?""",Select tag : How to use params to set the selected value?
Select tag : how to put params as selected value?," I have a select tag with 2 options : When one of this options are selected, the form is automatically submit. I would like to keep the params in first position. I mean visible without clicking on the select, at the place of ""which products"". <code>  select_tag :type, options_for_select(""<option value = 'produit1'>Produit1</option><option value = 'Produit2'>Produit2</option>"", params[:product]), id: ""different_option_value_html"", onchange: ""this.form.submit();"", include_blank: ""Which products ?""",Select tag : How to use params to set the selected value?
Rubocop guard clause dilemma," I have this piece of code where I have a raise statement with a guard clause: On this, rubocop gives the offence: I modified my code to this to normal if else case as this: But now it gives this offence: What to do in such case? Both are raising errors. Any other alternative? <code>  def validate_index index # Change to SizeError raise ArgumentError, ""Size of index (#{index.size}) does not matches""\ ""size of vector (#{size})"" if size != index.sizeend Style/MultilineIfModifier: Favor a normal if-statement over a modifier clause in a multiline statement. def validate_index index # Change to SizeError if size != index.size raise ArgumentError, ""Size of index (#{index.size}) does not matches""\ ""size of vector (#{size})"" endend Style/GuardClause: Use a guard clause instead of wrapping the code inside a conditional expression.",Rubocop guard clause dilemma - unnecessary if else VS line too long guard clause
"Get list of month/year combinations present, along with count"," I have a table of Albums that has a date column named release_date.I want to get a list of all the month + year combinations present along with the number of albums released in that month/year.So, the output might be something like:November 2016 - 11October 2016 - 4July 2016 - 19December 2015 - 2Ruby 2.3.1 w/ Rails 5 on Postgres 9.6, FWIW. <code> ",Rails/ActiveRecord Group by month+year with counts
Group by month+year with counts," I have a table of Albums that has a date column named release_date.I want to get a list of all the month + year combinations present along with the number of albums released in that month/year.So, the output might be something like:November 2016 - 11October 2016 - 4July 2016 - 19December 2015 - 2Ruby 2.3.1 w/ Rails 5 on Postgres 9.6, FWIW. <code> ",Rails/ActiveRecord Group by month+year with counts
Increase connect(2) timeout in RestClient / Net::HTTP," I'm using rest-client to POST to a very slow web service. I'm setting timeout to 600 seconds, and I've confirmed that it's being passed down to Net::HTTP's @read_timeout and @open_timeout.However, after about two minutes, I get a low-level timeout error, Errno::ETIMEDOUT: Connection timed out - connect(2):The relevant part of the backtrace is It looks like the line of code throwing the error is It seems as though the underlying connect(2) system call has a timeout of about two minutes, and the timeout parameters passed to Net::HTTP can only shorten that, not lengthen it. Is there a way to modify the socket parameters to set a longer timeout?Edited to add: This only appears to be a problem on our AWS Linux servers -- on my MacOS development machine, the ten-minute timeout works. I assume the default connect() timeout is longer on MacOS/BSD, but I don't really know. <code>  Operation timed out - connect(2) for [myhost] port [myport]/Users/dmoles/.rvm/rubies/ruby-2.2.5/lib/ruby/2.2.0/net/http.rb:879:in `initialize'/Users/dmoles/.rvm/rubies/ruby-2.2.5/lib/ruby/2.2.0/net/http.rb:879:in `open'/Users/dmoles/.rvm/rubies/ruby-2.2.5/lib/ruby/2.2.0/net/http.rb:879:in `block in connect'/Users/dmoles/.rvm/rubies/ruby-2.2.5/lib/ruby/2.2.0/timeout.rb:88:in `block in timeout'/Users/dmoles/.rvm/rubies/ruby-2.2.5/lib/ruby/2.2.0/timeout.rb:98:in `call'/Users/dmoles/.rvm/rubies/ruby-2.2.5/lib/ruby/2.2.0/timeout.rb:98:in `timeout'/Users/dmoles/.rvm/rubies/ruby-2.2.5/lib/ruby/2.2.0/net/http.rb:878:in `connect'/Users/dmoles/.rvm/rubies/ruby-2.2.5/lib/ruby/2.2.0/net/http.rb:863:in `do_start'/Users/dmoles/.rvm/rubies/ruby-2.2.5/lib/ruby/2.2.0/net/http.rb:852:in `start'/Users/dmoles/.rvm/gems/ruby-2.2.5/gems/rest-client-2.0.0/lib/restclient/request.rb:766:in `transmit'/Users/dmoles/.rvm/gems/ruby-2.2.5/gems/rest-client-2.0.0/lib/restclient/request.rb:215:in `execute'/Users/dmoles/.rvm/gems/ruby-2.2.5/gems/rest-client-2.0.0/lib/restclient/request.rb:52:in `execute' TCPSocket.open(conn_address, conn_port, @local_host, @local_port)",Increase connect(2) timeout in RestClient / Net::HTTP on AWS Linux
Rails Toggling Boolean Attribute in Controller Action," I have an action that simply toggles the #active attribute to the opposite boolean state: If @blog.active == true then update it to inactiveIf @blog.active == false then update it to activeI got the following custom action in a controller to work, but there has to be some Rails way to more elegantly do this: Is there a Rails way of updating a boolean attribute to the opposite boolean state? <code>  class BlogsController < ApplicationController ... def toggle_active if @blog.active? @blog.update(active: false) else @blog.update(active: true) end endend",How to toggle a Boolean attribute in a controller action
"Using PaperTrail, can I opt out of `object_changes` for a particular model or attitribute?"," This is somewhat related to #837 in that I have a large data column on my models, however I think I may be better served by the opposite of what's proposed in that issue - that is, to maintain the object column but not the object_changes column.We had been running with no versions.object_changes column. Now that I've added this column, I realized I am writing a lot of data I don't care about for the data column in object_changes - since a tiny change to data causes it to be written out to versions effectively 3x (once in object and twice in object_changes for the before and after).I don't think skip or ignore is what I want, because I would indeed like the changes to data to produce a new version.Should I go down the custom version model route? Or what do you recommend? <code> ","Using PaperTrail, can I opt out of `object_changes` for a particular model or attribute?"
"Using PaperTrail, can I opt out of `object_changes` for a particular model or atttribute?"," This is somewhat related to #837 in that I have a large data column on my models, however I think I may be better served by the opposite of what's proposed in that issue - that is, to maintain the object column but not the object_changes column.We had been running with no versions.object_changes column. Now that I've added this column, I realized I am writing a lot of data I don't care about for the data column in object_changes - since a tiny change to data causes it to be written out to versions effectively 3x (once in object and twice in object_changes for the before and after).I don't think skip or ignore is what I want, because I would indeed like the changes to data to produce a new version.Should I go down the custom version model route? Or what do you recommend? <code> ","Using PaperTrail, can I opt out of `object_changes` for a particular model or attribute?"
How can I apply lambda to some object," Let say I have a variable and lambda defined somewhere How can I apply lambda to the phone to get 12345678901?P.S. I know I can go with the following approach: But I want to be laconic. <code>  phone = ""1(234)567-89-01""lambda = -> { gsub(/[^0-9]/, '') } lambda = -> (arg) { arg.gsub(/[^0-9]/, '') }lambda.call(phone)#=> ""12345678901""",Apply lambda to an object
Apply lambda to some object," Let say I have a variable and lambda defined somewhere How can I apply lambda to the phone to get 12345678901?P.S. I know I can go with the following approach: But I want to be laconic. <code>  phone = ""1(234)567-89-01""lambda = -> { gsub(/[^0-9]/, '') } lambda = -> (arg) { arg.gsub(/[^0-9]/, '') }lambda.call(phone)#=> ""12345678901""",Apply lambda to an object
Ruby Active Record accessor dot(.) vs bracket([])," With Active Record, we can access a value likemethod access or hash access I just wonder when to use which, or is there any best practice out there?Personally I'd prefer method access because I feel that is more like ruby way. However when I see code by others, I face the hash access. <code>  user = User.find(1)user.name #=> 'John' user[:name] #=> 'John'",ActiveRecord accessor dot(.) vs bracket([])
RSpec doesn't seem to be determining correct arity when stubbing," So in my code I have this method I'm trying to test: Now I am trying to make two test cases - one for when the file exists, and one for when it doesn't.Focusing on the failure case. I want to stub out the exists? to raise the Aws::S3::Errors::Forbidden error so that the file_exists? method will return false.Here's what my test code looks like: Running this test I see this: Really not clear what's going on here, since the file_exists? method definitely doesn't have an arity of 2 nor does the exists? method I'm stubbing.To diagnose this, I put a breakpoint in the begin block. I try and run the <object>.exists? line and get the same error. <code>  # checks if a file already exists on S3 def file_exists?(storage_key) begin s3_resource.bucket(@bucket).object(storage_key).exists? rescue Aws::S3::Errors::Forbidden => e false end end it ""returns false if the file doesn't already exist"" do allow_any_instance_of(Aws::S3::Object).to receive(:exists?).and_raise( Aws::S3::Errors::Forbidden ) expect(instance.file_exists?('foo')).to be false end wrong number of arguments (given 0, expected 2) # ./lib/s3_client_builder.rb:48:in `file_exists?'",Rspec - wrong number of arguments when raising error
wrong number of arguments when raising Aws::S3::Errors::Forbidden," So in my code I have this method I'm trying to test: Now I am trying to make two test cases - one for when the file exists, and one for when it doesn't.Focusing on the failure case. I want to stub out the exists? to raise the Aws::S3::Errors::Forbidden error so that the file_exists? method will return false.Here's what my test code looks like: Running this test I see this: Really not clear what's going on here, since the file_exists? method definitely doesn't have an arity of 2 nor does the exists? method I'm stubbing.To diagnose this, I put a breakpoint in the begin block. I try and run the <object>.exists? line and get the same error. <code>  # checks if a file already exists on S3 def file_exists?(storage_key) begin s3_resource.bucket(@bucket).object(storage_key).exists? rescue Aws::S3::Errors::Forbidden => e false end end it ""returns false if the file doesn't already exist"" do allow_any_instance_of(Aws::S3::Object).to receive(:exists?).and_raise( Aws::S3::Errors::Forbidden ) expect(instance.file_exists?('foo')).to be false end wrong number of arguments (given 0, expected 2) # ./lib/s3_client_builder.rb:48:in `file_exists?'",Rspec - wrong number of arguments when raising error
wrong number of arguments when raising error," So in my code I have this method I'm trying to test: Now I am trying to make two test cases - one for when the file exists, and one for when it doesn't.Focusing on the failure case. I want to stub out the exists? to raise the Aws::S3::Errors::Forbidden error so that the file_exists? method will return false.Here's what my test code looks like: Running this test I see this: Really not clear what's going on here, since the file_exists? method definitely doesn't have an arity of 2 nor does the exists? method I'm stubbing.To diagnose this, I put a breakpoint in the begin block. I try and run the <object>.exists? line and get the same error. <code>  # checks if a file already exists on S3 def file_exists?(storage_key) begin s3_resource.bucket(@bucket).object(storage_key).exists? rescue Aws::S3::Errors::Forbidden => e false end end it ""returns false if the file doesn't already exist"" do allow_any_instance_of(Aws::S3::Object).to receive(:exists?).and_raise( Aws::S3::Errors::Forbidden ) expect(instance.file_exists?('foo')).to be false end wrong number of arguments (given 0, expected 2) # ./lib/s3_client_builder.rb:48:in `file_exists?'",Rspec - wrong number of arguments when raising error
Why use a class variable in Ruby is considered a 'code smell'?," According to Reek, creating a class variable is considered a 'code smell'. What is the explanation behind this? <code> ",Why is using a class variable in Ruby considered a 'code smell'?
'Validate_default_type!': An option's default must match its type (ArgumentError) when running rails generate in Windows," I am following this tutorial and have just started. I have installed Ruby on Rails with gem install rails and have created a blog with rails new blog.The tutorial now says that I need to run rails generate controller Welcome index, however when I do, I get this error: I have found a similar question on Stack Overflow asking the same question here, but the poster never responded when asked to show his gem list. So here's mine: Has anybody encountered this error before? If so, how did you resolve it? <code>  C:/Ruby22/lib/ruby/gems/2.2.0/gems/thor-0.19.2/lib/thor/parser/option.rb:130:in `validate_default_type!': An option's default must match its type. (ArgumentError) from C:/Ruby22/lib/ruby/gems/2.2.0/gems/thor-0.19.2/lib/thor/parser/option.rb:113:in `validate!' from C:/Ruby22/lib/ruby/gems/2.2.0/gems/thor-0.19.2/lib/thor/parser/argument.rb:24:in `initialize' from C:/Ruby22/lib/ruby/gems/2.2.0/gems/thor-0.19.2/lib/thor/parser/option.rb:9:in `initialize' from C:/Ruby22/lib/ruby/gems/2.2.0/gems/thor-0.19.2/lib/thor/base.rb:544:in `new' from C:/Ruby22/lib/ruby/gems/2.2.0/gems/thor-0.19.2/lib/thor/base.rb:544:in `build_option' from C:/Ruby22/lib/ruby/gems/2.2.0/gems/thor-0.19.2/lib/thor/base.rb:278:in `class_option' from C:/Ruby22/lib/ruby/gems/2.2.0/gems/railties-5.0.0.1/lib/rails/generators/base.rb:202:in `class_option' from C:/Ruby22/lib/ruby/gems/2.2.0/gems/railties-5.0.0.1/lib/rails/generators/base.rb:178:in `block in hook_for' from C:/Ruby22/lib/ruby/gems/2.2.0/gems/railties-5.0.0.1/lib/rails/generators/base.rb:168:in `each' from C:/Ruby22/lib/ruby/gems/2.2.0/gems/railties-5.0.0.1/lib/rails/generators/base.rb:168:in `hook_for' from C:/Ruby22/lib/ruby/gems/2.2.0/gems/jbuilder-2.6.0/lib/generators/rails/scaffold_controller_generator.rb:9:in `<class:ScaffoldControllerGenerator>' from C:/Ruby22/lib/ruby/gems/2.2.0/gems/jbuilder-2.6.0/lib/generators/rails/scaffold_controller_generator.rb:6:in `<module:Generators>' from C:/Ruby22/lib/ruby/gems/2.2.0/gems/jbuilder-2.6.0/lib/generators/rails/scaffold_controller_generator.rb:5:in `<module:Rails>' from C:/Ruby22/lib/ruby/gems/2.2.0/gems/jbuilder-2.6.0/lib/generators/rails/scaffold_controller_generator.rb:4:in `<top (required)>' from C:/Ruby22/lib/ruby/gems/2.2.0/gems/activesupport-5.0.0.1/lib/active_support/dependencies.rb:293:in `require' from C:/Ruby22/lib/ruby/gems/2.2.0/gems/activesupport-5.0.0.1/lib/active_support/dependencies.rb:293:in `block in require' from C:/Ruby22/lib/ruby/gems/2.2.0/gems/activesupport-5.0.0.1/lib/active_support/dependencies.rb:259:in `load_dependency' from C:/Ruby22/lib/ruby/gems/2.2.0/gems/activesupport-5.0.0.1/lib/active_support/dependencies.rb:293:in `require' from C:/Ruby22/lib/ruby/gems/2.2.0/gems/jbuilder-2.6.0/lib/jbuilder/railtie.rb:32:in `block in <class:Railtie>' from C:/Ruby22/lib/ruby/gems/2.2.0/gems/railties-5.0.0.1/lib/rails/railtie.rb:230:in `call' from C:/Ruby22/lib/ruby/gems/2.2.0/gems/railties-5.0.0.1/lib/rails/railtie.rb:230:in `block in run_generators_blocks' from C:/Ruby22/lib/ruby/gems/2.2.0/gems/railties-5.0.0.1/lib/rails/railtie.rb:247:in `each' from C:/Ruby22/lib/ruby/gems/2.2.0/gems/railties-5.0.0.1/lib/rails/railtie.rb:247:in `each_registered_block' from C:/Ruby22/lib/ruby/gems/2.2.0/gems/railties-5.0.0.1/lib/rails/railtie.rb:230:in `run_generators_blocks' from C:/Ruby22/lib/ruby/gems/2.2.0/gems/railties-5.0.0.1/lib/rails/application.rb:453:in `block in run_generators_blocks' from C:/Ruby22/lib/ruby/gems/2.2.0/gems/railties-5.0.0.1/lib/rails/engine/railties.rb:13:in `each' from C:/Ruby22/lib/ruby/gems/2.2.0/gems/railties-5.0.0.1/lib/rails/engine/railties.rb:13:in `each' from C:/Ruby22/lib/ruby/gems/2.2.0/gems/railties-5.0.0.1/lib/rails/application.rb:453:in `run_generators_blocks' from C:/Ruby22/lib/ruby/gems/2.2.0/gems/railties-5.0.0.1/lib/rails/engine.rb:465:in `load_generators' from C:/Ruby22/lib/ruby/gems/2.2.0/gems/railties-5.0.0.1/lib/rails/commands/commands_tasks.rb:144:in `generate_or_destroy' from C:/Ruby22/lib/ruby/gems/2.2.0/gems/railties-5.0.0.1/lib/rails/commands/commands_tasks.rb:60:in `generate' from C:/Ruby22/lib/ruby/gems/2.2.0/gems/railties-5.0.0.1/lib/rails/commands/commands_tasks.rb:49:in `run_command!' from C:/Ruby22/lib/ruby/gems/2.2.0/gems/railties-5.0.0.1/lib/rails/commands.rb:18:in `<top (required)>' from bin/rails:4:in `require' from bin/rails:4:in `<main>' actioncable (5.0.0.1)actionmailer (5.0.0.1)actionpack (5.0.0.1)actionview (5.0.0.1)activejob (5.0.0.1)activemodel (5.0.0.1)activerecord (5.0.0.1)activesupport (5.0.0.1)arel (7.1.4)bigdecimal (1.2.7, default: 1.2.6)builder (3.2.2)bundler (1.13.6)coffee-rails (4.2.1)coffee-script (2.4.1)coffee-script-source (1.11.1)concurrent-ruby (1.0.2)debug_inspector (0.0.2)erubis (2.7.0)execjs (2.7.0)globalid (0.3.7)i18n (0.7.0)io-console (0.4.6, default: 0.4.3)jbuilder (2.6.0)jquery-rails (4.2.1)json (2.0.2, default: 1.8.1)loofah (2.0.3)mail (2.6.4)method_source (0.8.2)mime-types (3.1)mime-types-data (3.2016.0521)mini_portile2 (2.1.0)minitest (5.9.1, 5.4.3)multi_json (1.12.1)nio4r (1.2.1)nokogiri (1.6.8.1 x86-mingw32)power_assert (0.3.1, 0.2.2)psych (2.2.0, default: 2.0.8)puma (3.6.2)rack (2.0.1, 1.6.4)rack-protection (1.5.3)rack-test (0.6.3)rails (5.0.0.1)rails-dom-testing (2.0.1)rails-html-sanitizer (1.0.3)railties (5.0.0.1)rake (11.3.0, default: 10.4.2)rdoc (5.0.0, default: 4.2.0)sass (3.4.22)sass-rails (5.0.6)sinatra (1.4.7)sprockets (3.7.0)sprockets-rails (3.2.0)sqlite3 (1.3.12 x86-mingw32)test-unit (3.2.3, 3.0.8)thor (0.19.2, 0.19.1)thread_safe (0.3.5)tilt (2.0.5)turbolinks (5.0.1)turbolinks-source (5.0.0)tzinfo (1.2.2)tzinfo-data (1.2016.10)uglifier (3.0.3)web-console (3.4.0)websocket-driver (0.6.4)websocket-extensions (0.1.2)","Error ""'Validate_default_type!': An option's default must match its type (ArgumentError)"" when running Ruby on Rails generate on Windows"
"Error ""'Validate_default_type!': An option's default must match its type (ArgumentError)"" when running Ruby on Rails generate in Windows"," I am following this tutorial and have just started. I have installed Ruby on Rails with gem install rails and have created a blog with rails new blog.The tutorial now says that I need to run rails generate controller Welcome index, however when I do, I get this error: I have found a similar question on Stack Overflow asking the same question here, but the poster never responded when asked to show his gem list. So here's mine: Has anybody encountered this error before? If so, how did you resolve it? <code>  C:/Ruby22/lib/ruby/gems/2.2.0/gems/thor-0.19.2/lib/thor/parser/option.rb:130:in `validate_default_type!': An option's default must match its type. (ArgumentError) from C:/Ruby22/lib/ruby/gems/2.2.0/gems/thor-0.19.2/lib/thor/parser/option.rb:113:in `validate!' from C:/Ruby22/lib/ruby/gems/2.2.0/gems/thor-0.19.2/lib/thor/parser/argument.rb:24:in `initialize' from C:/Ruby22/lib/ruby/gems/2.2.0/gems/thor-0.19.2/lib/thor/parser/option.rb:9:in `initialize' from C:/Ruby22/lib/ruby/gems/2.2.0/gems/thor-0.19.2/lib/thor/base.rb:544:in `new' from C:/Ruby22/lib/ruby/gems/2.2.0/gems/thor-0.19.2/lib/thor/base.rb:544:in `build_option' from C:/Ruby22/lib/ruby/gems/2.2.0/gems/thor-0.19.2/lib/thor/base.rb:278:in `class_option' from C:/Ruby22/lib/ruby/gems/2.2.0/gems/railties-5.0.0.1/lib/rails/generators/base.rb:202:in `class_option' from C:/Ruby22/lib/ruby/gems/2.2.0/gems/railties-5.0.0.1/lib/rails/generators/base.rb:178:in `block in hook_for' from C:/Ruby22/lib/ruby/gems/2.2.0/gems/railties-5.0.0.1/lib/rails/generators/base.rb:168:in `each' from C:/Ruby22/lib/ruby/gems/2.2.0/gems/railties-5.0.0.1/lib/rails/generators/base.rb:168:in `hook_for' from C:/Ruby22/lib/ruby/gems/2.2.0/gems/jbuilder-2.6.0/lib/generators/rails/scaffold_controller_generator.rb:9:in `<class:ScaffoldControllerGenerator>' from C:/Ruby22/lib/ruby/gems/2.2.0/gems/jbuilder-2.6.0/lib/generators/rails/scaffold_controller_generator.rb:6:in `<module:Generators>' from C:/Ruby22/lib/ruby/gems/2.2.0/gems/jbuilder-2.6.0/lib/generators/rails/scaffold_controller_generator.rb:5:in `<module:Rails>' from C:/Ruby22/lib/ruby/gems/2.2.0/gems/jbuilder-2.6.0/lib/generators/rails/scaffold_controller_generator.rb:4:in `<top (required)>' from C:/Ruby22/lib/ruby/gems/2.2.0/gems/activesupport-5.0.0.1/lib/active_support/dependencies.rb:293:in `require' from C:/Ruby22/lib/ruby/gems/2.2.0/gems/activesupport-5.0.0.1/lib/active_support/dependencies.rb:293:in `block in require' from C:/Ruby22/lib/ruby/gems/2.2.0/gems/activesupport-5.0.0.1/lib/active_support/dependencies.rb:259:in `load_dependency' from C:/Ruby22/lib/ruby/gems/2.2.0/gems/activesupport-5.0.0.1/lib/active_support/dependencies.rb:293:in `require' from C:/Ruby22/lib/ruby/gems/2.2.0/gems/jbuilder-2.6.0/lib/jbuilder/railtie.rb:32:in `block in <class:Railtie>' from C:/Ruby22/lib/ruby/gems/2.2.0/gems/railties-5.0.0.1/lib/rails/railtie.rb:230:in `call' from C:/Ruby22/lib/ruby/gems/2.2.0/gems/railties-5.0.0.1/lib/rails/railtie.rb:230:in `block in run_generators_blocks' from C:/Ruby22/lib/ruby/gems/2.2.0/gems/railties-5.0.0.1/lib/rails/railtie.rb:247:in `each' from C:/Ruby22/lib/ruby/gems/2.2.0/gems/railties-5.0.0.1/lib/rails/railtie.rb:247:in `each_registered_block' from C:/Ruby22/lib/ruby/gems/2.2.0/gems/railties-5.0.0.1/lib/rails/railtie.rb:230:in `run_generators_blocks' from C:/Ruby22/lib/ruby/gems/2.2.0/gems/railties-5.0.0.1/lib/rails/application.rb:453:in `block in run_generators_blocks' from C:/Ruby22/lib/ruby/gems/2.2.0/gems/railties-5.0.0.1/lib/rails/engine/railties.rb:13:in `each' from C:/Ruby22/lib/ruby/gems/2.2.0/gems/railties-5.0.0.1/lib/rails/engine/railties.rb:13:in `each' from C:/Ruby22/lib/ruby/gems/2.2.0/gems/railties-5.0.0.1/lib/rails/application.rb:453:in `run_generators_blocks' from C:/Ruby22/lib/ruby/gems/2.2.0/gems/railties-5.0.0.1/lib/rails/engine.rb:465:in `load_generators' from C:/Ruby22/lib/ruby/gems/2.2.0/gems/railties-5.0.0.1/lib/rails/commands/commands_tasks.rb:144:in `generate_or_destroy' from C:/Ruby22/lib/ruby/gems/2.2.0/gems/railties-5.0.0.1/lib/rails/commands/commands_tasks.rb:60:in `generate' from C:/Ruby22/lib/ruby/gems/2.2.0/gems/railties-5.0.0.1/lib/rails/commands/commands_tasks.rb:49:in `run_command!' from C:/Ruby22/lib/ruby/gems/2.2.0/gems/railties-5.0.0.1/lib/rails/commands.rb:18:in `<top (required)>' from bin/rails:4:in `require' from bin/rails:4:in `<main>' actioncable (5.0.0.1)actionmailer (5.0.0.1)actionpack (5.0.0.1)actionview (5.0.0.1)activejob (5.0.0.1)activemodel (5.0.0.1)activerecord (5.0.0.1)activesupport (5.0.0.1)arel (7.1.4)bigdecimal (1.2.7, default: 1.2.6)builder (3.2.2)bundler (1.13.6)coffee-rails (4.2.1)coffee-script (2.4.1)coffee-script-source (1.11.1)concurrent-ruby (1.0.2)debug_inspector (0.0.2)erubis (2.7.0)execjs (2.7.0)globalid (0.3.7)i18n (0.7.0)io-console (0.4.6, default: 0.4.3)jbuilder (2.6.0)jquery-rails (4.2.1)json (2.0.2, default: 1.8.1)loofah (2.0.3)mail (2.6.4)method_source (0.8.2)mime-types (3.1)mime-types-data (3.2016.0521)mini_portile2 (2.1.0)minitest (5.9.1, 5.4.3)multi_json (1.12.1)nio4r (1.2.1)nokogiri (1.6.8.1 x86-mingw32)power_assert (0.3.1, 0.2.2)psych (2.2.0, default: 2.0.8)puma (3.6.2)rack (2.0.1, 1.6.4)rack-protection (1.5.3)rack-test (0.6.3)rails (5.0.0.1)rails-dom-testing (2.0.1)rails-html-sanitizer (1.0.3)railties (5.0.0.1)rake (11.3.0, default: 10.4.2)rdoc (5.0.0, default: 4.2.0)sass (3.4.22)sass-rails (5.0.6)sinatra (1.4.7)sprockets (3.7.0)sprockets-rails (3.2.0)sqlite3 (1.3.12 x86-mingw32)test-unit (3.2.3, 3.0.8)thor (0.19.2, 0.19.1)thread_safe (0.3.5)tilt (2.0.5)turbolinks (5.0.1)turbolinks-source (5.0.0)tzinfo (1.2.2)tzinfo-data (1.2016.10)uglifier (3.0.3)web-console (3.4.0)websocket-driver (0.6.4)websocket-extensions (0.1.2)","Error ""'Validate_default_type!': An option's default must match its type (ArgumentError)"" when running Ruby on Rails generate on Windows"
Ruby !! Multiple conditions with ||," I've been testing this code and it's not working as I expected. Can someone shed some light on this please ? , When I put in the first entry it runs, but if I use the latter entry it prints ""I don't Know!""i.e : if I enter 'js' runs, but If I enter 'JS' it throws 'I don't know!' <code>  language = { JS: ""Websites"", Python: ""Science"", Ruby: ""Web apps"" }puts ""What language would you like to know? ""choice = gets.chompcase choicewhen ""js"" || ""JS"" puts ""Websites!""when ""Python"" || ""python"" puts ""Science!""when ""Ruby"" || ""ruby"" puts ""Web apps!""else puts ""I don't know!""end",Multiple case/when conditions with ||
Find interleaving Regexp matches," I want to find all matches within a given string including overlapping matches. How could I achieve it? <code>  # Example""a-b-c-d"".???(/\w-\w/) # => [""a-b"", ""b-c"", ""c-d""] expected# Solution without overlapped results""a-b-c-d"".scan(/\w-\w/) # => [""a-b"", ""c-d""], but ""b-c"" is missing",Find overlapping Regexp matches
"""Format Document"" does not work for html.erb files in VS Code"," I press + + F in Visual Studio Code for macOS, the shortcut to Format Document, to format a file called foo.rb or foo.html.erb.Instead of formatting the document it prints out this letter: How do I get it to format the document? <code> ",How do I auto format Ruby or .erb files in VS Code?
"""Format Document"" does not work for .rb or html.erb files in VS Code"," I press + + F in Visual Studio Code for macOS, the shortcut to Format Document, to format a file called foo.rb or foo.html.erb.Instead of formatting the document it prints out this letter: How do I get it to format the document? <code> ",How do I auto format Ruby or .erb files in VS Code?
Return safe yield," As every Ruby programmer eventually discovers, calling blocks or procs that contain return statements can be dangerous as this might exit your current context: In cases you want to be absolutely sure some of your code runs after you called a block or proc, you can use a begin ... ensure construct. But since ensure is also called if there is an exception during yield, it requires a little more work.I've created a tiny module that deals with this problem in two different ways:Using safe_yield, it is detected whether the yielded block or proc actually returns using the return keyword. If so, it raises an exception. Using call_then_yield, you can call a block and then make sure that a second block is executed, even if the first block contains a return statement. I'm considering to create a quick Gem out of this, or is there any built-in solution to prevent quick return from the nested block which I missed? <code>  def some_method(&_block) puts 1 yield # The following line will never be executed in this example # as the yield is actually a `yield-and-return`. puts 3enddef test some_method do puts 2 return endendtest# This prints ""1\n2\n"" instead of ""1\n2\n3\n"" unknown_block = proc do returnend ReturnSafeYield.safe_yield(unknown_block)# => Raises a UnexpectedReturnException exception unknown_block = proc do returnendReturnSafeYield.call_then_yield(unknown_block) do # => This line is called even though the above block contains a `return`.end",How to prevent problems with `return` from block when using Ruby `yield`
Scopes with Polymorphic Associations," I have found very little about how one can write scopes for polymorphic associations in rails, let alone how to write queries on polymorphic associations. In the Rails Documentation, I have looked at the Polymorphic Associations section, the Joining Tables section, and the Scopes section. I have also done my fair share of googling.Take this setup for example: So a Pet can be of animal_type ""Dog"", ""Cat"", or ""Bird"".To show all the table structures: here is my schema.rb: I then went ahead and made some records: And then I went and made some pet records: And that is the setup! Now the tough part: I want to create some scopes on the Pet model which dig into the polymorphic associations. Here are some scopes I would like to write:Give me all the Pets of animal_type == ""Dog"" that can sitGive me all the Pets of animal_type == ""Cat"" that have killed at least 10 miceGive me all the Pets that are NOT both animal_type ""Dog"" and cannot sit. (In other words: Give me all the pets: all of them: except for dogs that cannot sit)So in my Pet model I would want to put my scopes in there: I am finding it pretty tough to write these scopes. Some stuff I found online makes it look like you can only write these scopes with raw SQL. I am wondering if it is possible to use the Hash syntax for these scopes instead.Any tips/help would be greatly appreciated! <code>  class Pet < ActiveRecord::Base belongs_to :animal, polymorphic: trueendclass Dog < ActiveRecord::Base has_many :pets, as: :animalendclass Cat < ActiveRecord::Base has_many :pets, as: :animalendclass Bird < ActiveRecord::Base has_many :pets, as: :animalend create_table ""birds"", force: :cascade do |t| t.datetime ""created_at"", null: false t.datetime ""updated_at"", null: falseendcreate_table ""cats"", force: :cascade do |t| t.integer ""killed_mice"" t.datetime ""created_at"", null: false t.datetime ""updated_at"", null: falseendcreate_table ""dogs"", force: :cascade do |t| t.boolean ""sits"" t.datetime ""created_at"", null: false t.datetime ""updated_at"", null: falseendcreate_table ""pets"", force: :cascade do |t| t.string ""name"" t.integer ""animal_id"" t.string ""animal_type"" t.datetime ""created_at"", null: false t.datetime ""updated_at"", null: falseend Dog.create(sits: false)Dog.create(sits: true)Dog.create(sits: true) #Dog record that will not be tied to a petCat.create(killed_mice: 2)Cat.create(killed_mice: 15)Cat.create(killed_mice: 15) #Cat record that will not be tied to a petBird.create Pet.create(name: 'dog1', animal_id: 1, animal_type: ""Dog"")Pet.create(name: 'dog2', animal_id: 2, animal_type: ""Dog"")Pet.create(name: 'cat1', animal_id: 1, animal_type: ""Cat"")Pet.create(name: 'cat2', animal_id: 2, animal_type: ""Cat"")Pet.create(name: 'bird1', animal_id: 1, animal_type: ""Bird"") class Pet < ActiveRecord::Base belongs_to :animal, polymorphic: true scope :sitting_dogs, -> {#query goes here} scope :killer_cats, -> {#query goes here} scope :remove_dogs_that_cannot_sit, -> {#query goes here} #only removes pet records of dogs that cannot sit. All other pet records are returnedend",Scopes and Queries with Polymorphic Associations
"Ruby: why does File.read(""| echo mystring"") work?", I found this in some code I was working on. It was designed to work around a requirement to read a keyfile from disk. In production the contents of the keyfile were in an environment variable.Old code: New code: How does this work? <code>  key = File.read('path/to/key.pem') key = File.read('| echo $KEY_VARIABLE'),"How does File.read(""| echo mystring"") work?"
"why does File.read(""| echo mystring"") work?", I found this in some code I was working on. It was designed to work around a requirement to read a keyfile from disk. In production the contents of the keyfile were in an environment variable.Old code: New code: How does this work? <code>  key = File.read('path/to/key.pem') key = File.read('| echo $KEY_VARIABLE'),"How does File.read(""| echo mystring"") work?"
Before process_action callback :authenticate_user! has not been defined," I'm creating a rails app that includes devise.I'm trying to add Twilio messaging to my site with Ngrok, i used this tutorial:https://www.twilio.com/blog/2016/04/receive-and-reply-to-sms-in-rails.htmlI was able to open Ngrok in the console and get the web-id they give for my url.I keep getting this error when I plug the url into my browser ..I'm supposed to get to my own rails local app. Not sure whats wrong. What I added in my messaging controller made for ngrok: really unsure what is wrong.when its not connecting to the 'def reply' and authenticate_user should be defined by devise.  <code>  class MessagesController < ApplicationController skip_before_filter :verify_authenticity_token skip_before_filter :authenticate_user!, :only => ""reply""def reply message_body = params[""Body""] from_number = params[""From""] boot_twilio sms = @client.messages.create( from: Rails.application.secrets.twilio_number, to: from_number, body: ""Hello there, thanks for texting me. Your number is #{from_number}."" ) #twilio expects a HTTP response to this requestendprivate def boot_twilio account_sid = Rails.application.secrets.twilio_sid auth_token = Rails.application.secrets.twilio_token @client = Twilio::REST::Client.new account_sid, auth_token endend",Rails: Before process_action callback :authenticate_user! has not been defined
Why is `Time.utc` slower in a forked process in Ruby on OS X?," I saw the question Why does Process.fork make stuff slower in Ruby on OS X? and was able to determine that Process.fork does not actually make tasks, in general, slower. However, it does seem to make Time.utc, in particular, much slower. Here are some results: One clue might be that the above takes place on OS X, whereas on Ubuntu, there doesn't seem to be a difference: Can anyone explain this oddity?Further investigation:@tadman suggested that it might be a bug in the macOS / OS X time code, so I wrote a similar test in Python: Again, on Ubuntu, the benchmarks are the same for the forked/main processes. On OS X, however, the forked process is now slightly faster than the main process, which is the opposite of the behavior in Ruby.This leads me to believe that the source of the ""fork penalty"" is in the Ruby implementation and not in the OS X time implementation. <code>  require 'benchmark'def do_stuff 50000.times { Time.utc(2016) }endputs ""main: #{Benchmark.measure { do_stuff }}""Process.fork do puts ""fork: #{Benchmark.measure { do_stuff }}""end main: 0.100000 0.000000 0.100000 ( 0.103762)fork: 0.530000 3.210000 3.740000 ( 3.765203)main: 0.100000 0.000000 0.100000 ( 0.104218)fork: 0.540000 3.280000 3.820000 ( 3.858817)main: 0.100000 0.000000 0.100000 ( 0.102956)fork: 0.520000 3.280000 3.800000 ( 3.831084) main: 0.100000 0.070000 0.170000 ( 0.166505)fork: 0.090000 0.070000 0.160000 ( 0.169578)main: 0.090000 0.080000 0.170000 ( 0.167889)fork: 0.100000 0.060000 0.160000 ( 0.169160)main: 0.100000 0.070000 0.170000 ( 0.170839)fork: 0.100000 0.070000 0.170000 ( 0.176146) from timeit import timeitfrom os import forkprint timeit(""datetime.datetime.utcnow()"", setup=""import datetime"")if fork() == 0: print timeit(""datetime.datetime.utcnow()"", setup=""import datetime"")else: pass",Why is Time.utc slower in a forked process in Ruby on OS X (and not in Python)?
Why is `Time.utc` slower in a forked process in Ruby on OS X (and not in Python)?," I saw the question Why does Process.fork make stuff slower in Ruby on OS X? and was able to determine that Process.fork does not actually make tasks, in general, slower. However, it does seem to make Time.utc, in particular, much slower. Here are some results: One clue might be that the above takes place on OS X, whereas on Ubuntu, there doesn't seem to be a difference: Can anyone explain this oddity?Further investigation:@tadman suggested that it might be a bug in the macOS / OS X time code, so I wrote a similar test in Python: Again, on Ubuntu, the benchmarks are the same for the forked/main processes. On OS X, however, the forked process is now slightly faster than the main process, which is the opposite of the behavior in Ruby.This leads me to believe that the source of the ""fork penalty"" is in the Ruby implementation and not in the OS X time implementation. <code>  require 'benchmark'def do_stuff 50000.times { Time.utc(2016) }endputs ""main: #{Benchmark.measure { do_stuff }}""Process.fork do puts ""fork: #{Benchmark.measure { do_stuff }}""end main: 0.100000 0.000000 0.100000 ( 0.103762)fork: 0.530000 3.210000 3.740000 ( 3.765203)main: 0.100000 0.000000 0.100000 ( 0.104218)fork: 0.540000 3.280000 3.820000 ( 3.858817)main: 0.100000 0.000000 0.100000 ( 0.102956)fork: 0.520000 3.280000 3.800000 ( 3.831084) main: 0.100000 0.070000 0.170000 ( 0.166505)fork: 0.090000 0.070000 0.160000 ( 0.169578)main: 0.090000 0.080000 0.170000 ( 0.167889)fork: 0.100000 0.060000 0.160000 ( 0.169160)main: 0.100000 0.070000 0.170000 ( 0.170839)fork: 0.100000 0.070000 0.170000 ( 0.176146) from timeit import timeitfrom os import forkprint timeit(""datetime.datetime.utcnow()"", setup=""import datetime"")if fork() == 0: print timeit(""datetime.datetime.utcnow()"", setup=""import datetime"")else: pass",Why is Time.utc slower in a forked process in Ruby on OS X (and not in Python)?
Ruby freeze method modifying my string," I am using ruby freeze method. As far as the definition of freeze is considered, it freezes the value of the object on which it is called. We can not modify the value of that object after it. I have to achieve same task, I have a an object and I am executing following code This gives outputs as follows: Why it is modifying my frozen string? <code>  a = ""Test""a.freezea += ""this string""puts a Test this string[Finished in 0.0s]",+= operator appears to modify frozen string
`+=` operator appears to modify frozen string," I am using ruby freeze method. As far as the definition of freeze is considered, it freezes the value of the object on which it is called. We can not modify the value of that object after it. I have to achieve same task, I have a an object and I am executing following code This gives outputs as follows: Why it is modifying my frozen string? <code>  a = ""Test""a.freezea += ""this string""puts a Test this string[Finished in 0.0s]",+= operator appears to modify frozen string
"Difference between ""require"" and ""load"" wrt to ""load"" and ""execute"""," Below are some snippets from the documentation for Kernel:Kernel#load Loads and executes the Ruby program in the file filename...Kernel#require Loads the given name...I know there are differences between require and load for example:require will tack on an rb extension while load will notrequire will store the ruby file path inside $LOADED_FEATURES aka $"" while load will notrequire will search $LOADED_FEATURES before ""loading"" the file again while load will notI'm wondering about the distinction between the word ""load"" and the word ""executes"".The documentation makes it seem like they are two different things. To me, ""load"" would mean ""Hey I know about this file now"" while ""execute"" would mean ""Hey I know about this file now and I'm going to run all the commands also""But I don't think that's right.For example, given the following structure: with foo.rb: bar.rb: baz.rb: When I run foo.rb I would expect ""Inside of baz..."" to print but not ""Inside of bar..."" because load ""loads and executes"" while require just ""loads"". But what actually happens is both seem to ""execute"": So is there a difference between ""loading"" and ""executing"" a ruby file? <code>  $ tree. bar.rb baz.rb foo.rb0 directories, 3 files $LOAD_PATH << __dir__require 'bar'load 'baz.rb' puts ""Inside of bar..."" puts ""Inside of baz..."" $ ruby foo.rbInside of bar...Inside of baz...","Difference between require and load wrt to ""load"" and ""execute"""
Strange behavior with '_' (underscore) values in Ruby," Just curious about it.If you open the IRB and type _, you'll get nil as response: And you can modify its value: But if you create a new variable with _, its value is modified: Why? Is this a design decision? <code>  irb(main):001:0> _=> nil irb(main):002:0> _ = 'some value'irb(main):003:0> _=> ""some value"" irb(main):004:0> foo_bar = 'other value'irb(main):005:0> _=> ""other value""",Strange behavior with '_' (underscore) in Ruby
Ruby 2.4 and Rails 4.0.8 stack level too deep (SystemStackError)," I'm trying to run newly created project in Rails 4.0.8 but I receive and error: Ruby version: My Gemefile: I tried to reinstall rails because before I have 5.0 Rails installed on my machine.Local gems: Meybe unistall: ruby and rails will solve this problem, but I dont want to do that. Beasically I whant to have installed both version of rails, for exampole: rails 4 and rails 5 as well. Is that configuration possible ? <code>  rails s=> Booting WEBrick=> Rails 4.0.8 application starting in development on http://0.0.0.0:3000=> Run `rails server -h` for more startup options=> Ctrl-C to shutdown server/usr/local/lib/ruby/gems/2.4.0/gems/activesupport-4.0.8/lib/active_support/core_ext/numeric/conversions.rb:121: warning: constant ::Fixnum is deprecated/usr/local/lib/ruby/gems/2.4.0/gems/activesupport-4.0.8/lib/active_support/core_ext/numeric/conversions.rb:121: warning: constant ::Bignum is deprecatedExiting/usr/local/lib/ruby/gems/2.4.0/gems/activesupport-4.0.8/lib/active_support/core_ext/numeric/conversions.rb:124:in `block (2 levels) in <class:Numeric>': stack level too deep (SystemStackError) from /usr/local/lib/ruby/gems/2.4.0/gems/activesupport-4.0.8/lib/active_support/core_ext/numeric/conversions.rb:131:in `block (2 levels) in <class:Numeric>' from /usr/local/lib/ruby/gems/2.4.0/gems/activesupport-4.0.8/lib/active_support/core_ext/numeric/conversions.rb:131:in `block (2 levels) in <class:Numeric>' from /usr/local/lib/ruby/gems/2.4.0/gems/activesupport-4.0.8/lib/active_support/core_ext/numeric/conversions.rb:131:in `block (2 levels) in <class:Numeric>' from /usr/local/lib/ruby/gems/2.4.0/gems/activesupport-4.0.8/lib/active_support/core_ext/numeric/conversions.rb:131:in `block (2 levels) in <class:Numeric>' from /usr/local/lib/ruby/gems/2.4.0/gems/activesupport-4.0.8/lib/active_support/core_ext/numeric/conversions.rb:131:in `block (2 levels) in <class:Numeric>' from /usr/local/lib/ruby/gems/2.4.0/gems/activesupport-4.0.8/lib/active_support/core_ext/numeric/conversions.rb:131:in `block (2 levels) in <class:Numeric>' from /usr/local/lib/ruby/gems/2.4.0/gems/activesupport-4.0.8/lib/active_support/core_ext/numeric/conversions.rb:131:in `block (2 levels) in <class:Numeric>' from /usr/local/lib/ruby/gems/2.4.0/gems/activesupport-4.0.8/lib/active_support/core_ext/numeric/conversions.rb:131:in `block (2 levels) in <class:Numeric>' ... 5532 levels... from /usr/local/lib/ruby/gems/2.4.0/gems/railties-4.0.8/lib/rails/commands.rb:71:in `tap' from /usr/local/lib/ruby/gems/2.4.0/gems/railties-4.0.8/lib/rails/commands.rb:71:in `<top (required)>' from bin/rails:4:in `require' from bin/rails:4:in `<main>' Rails 4.0.8 source 'https://rubygems.org'# Bundle edge Rails instead: gem 'rails', github: 'rails/rails'gem 'rails', '4.0.8'# Use sqlite3 as the database for Active Recordgem 'sqlite3'# Use SCSS for stylesheetsgem 'sass-rails', '~> 4.0.2'# Use Uglifier as compressor for JavaScript assetsgem 'uglifier', '>= 1.3.0'# Use CoffeeScript for .js.coffee assets and viewsgem 'coffee-rails', '~> 4.0.0'# See https://github.com/sstephenson/execjs#readme for more supported runtimes# gem 'therubyracer', platforms: :ruby# Use jquery as the JavaScript librarygem 'jquery-rails'# Turbolinks makes following links in your web application faster. Read more: https://github.com/rails/turbolinksgem 'turbolinks'# Build JSON APIs with ease. Read more: https://github.com/rails/jbuildergem 'jbuilder', '~> 1.2'gem 'json', github: 'flori/json', branch: 'v1.8'group :doc do # bundle exec rake doc:rails generates the API under doc/api. gem 'sdoc', require: falseend *** LOCAL GEMS ***autoprefixer-rails (6.6.0)coffee-rails (4.2.1, 4.0.1)font-awesome-rails (4.7.0.1)jquery-atwho-rails (1.3.2)jquery-rails (4.2.2, 3.1.4)rails (4.0.8, 4.0.0)rails-dom-testing (2.0.2)rails-html-sanitizer (1.0.3)rails_12factor (0.0.3)rails_serve_static_assets (0.0.5)rails_stdout_logging (0.0.5)sass-rails (5.0.6, 4.0.5)sprockets-rails (3.2.0, 2.3.3, 2.0.1)",Ruby 2.4 and Rails 4 stack level too deep (SystemStackError)
Facebook pixel fires on controller action," I have a ruby on rails app. I followed the facebook instructions to add a pixel. However, to track a conversion, facebook requires you to put the page in the conversion that will appear when the desired result is reached. i.e if I want to show a customer has signed up, I would put the page you go to after signing up as the success object to track.My issue is that in my application when a customer signs up, there is no landing page. The app takes the user back to the homepage. It shows a message on the homepage so I am trying to see if there is a way to track conversions from controller actions instead of actual pages.The actions I need to count don't have pages, they are controller actions. Is there a gem, documentation, or a best practice on how to do this that anyone is aware of?Here is the pixel that goes into the layouts file... However I need it to fire here in the controller... <code>  <!-- Facebook Pixel Code --> <script> !function(f,b,e,v,n,t,s){if(f.fbq)return;n=f.fbq=function(){n.callMethod? n.callMethod.apply(n,arguments):n.queue.push(arguments)};if(!f._fbq)f._fbq=n; n.push=n;n.loaded=!0;n.version='2.0';n.queue=[];t=b.createElement(e);t.async=!0; t.src=v;s=b.getElementsByTagName(e)[0];s.parentNode.insertBefore(t,s)}(window, document,'script','https://connect.facebook.net/en_US/fbevents.js'); fbq('init', '18027724*****', { em: 'insert_email_variable,' }); fbq('track', 'PageView'); </script> <noscript><img height=""1"" width=""1"" style=""display:none"" src=""https://www.facebook.com/tr?id=180277241*****&ev=PageView&noscript=1"" /></noscript> <!-- DO NOT MODIFY --><!-- End Facebook Pixel Code --> def create @reportapproval = current_user.reportapprovals.create(authorization_params) if @reportapproval.valid? if @reportapproval.manager_paying_report == true flash[:notice] = ""Please make payment before proceeding"" redirect_to new_managers_charge_path(id: @reportapproval.id) else flash[:notice] = ""You have requested a report from #{@reportapproval.tenant_last_name}."" redirect_to managers_dashboard_path @reportapproval.save end <----PIXEL FIRES HERE IN THE PROCESS -----> else flash[:error] = @reportapproval.errors.full_messages.to_sentence redirect_to managers_dashboard_path endend",How to make a Facebook pixel fire on a rails controller action
Why Array.new is better than .times.map in Rubocop," RuboCop suggests: Use Array.new with a block instead of .times.map.In the docs for the cop: This cop checks for .times.map calls. In most cases such calls can be replaced with an explicit array creation.Examples: I know it can be replaced, but I feel 9.times.map is closer to English grammar, and it's easier to understand what the code does.Why should it be replaced? <code>  # bad9.times.map do |i| i.to_send# goodArray.new(9) do |i| i.to_send",Why does RuboCop suggest replacing .times.map with Array.new?
Ruby Gem Install MySQL Error," I have a problem with an install of mysql gem. This is my error : When i try this command sudo gem install mysql -v '2.9.1', it's works, and I read this line to justify it... I don't understand what happened and how to solved this. If someone could help me... <code>  gem install mysql -v '2.9.1'Building native extensions. This could take a while...ERROR: Error installing mysql: ERROR: Failed to build gem native extension. current directory: /usr/local/rvm/gems/ruby-2.4.0/gems/mysql-2.9.1/ext/mysql_api/usr/local/rvm/rubies/ruby-2.4.0/bin/ruby -r ./siteconf20170107-4120-x2dv85.rb extconf.rbchecking for mysql_ssl_set()... yeschecking for rb_str_set_len()... yeschecking for rb_thread_start_timer()... nochecking for mysql.h... yescreating MakefileTo see why this extension failed to compile, please check the mkmf.log which can be found here: /usr/local/rvm/gems/ruby-2.4.0/extensions/x86_64-linux/2.4.0/mysql-2.9.1/mkmf.logcurrent directory: /usr/local/rvm/gems/ruby-2.4.0/gems/mysql-2.9.1/ext/mysql_apimake ""DESTDIR="" cleancurrent directory: /usr/local/rvm/gems/ruby-2.4.0/gems/mysql-2.9.1/ext/mysql_apimake ""DESTDIR=""compiling mysql.cmysql.c: In function stmt_bind_result:mysql.c:1320:74: error: rb_cFixnum undeclared (first use in this function) else if (argv[i] == rb_cNumeric || argv[i] == rb_cInteger || argv[i] == rb_cFixnum) ^mysql.c:1320:74: note: each undeclared identifier is reported only once for each function it appears inmysql.c: At top level:cc1: warning: unrecognized command line option ""-Wno-self-assign""cc1: warning: unrecognized command line option ""-Wno-constant-logical-operand""cc1: warning: unrecognized command line option ""-Wno-parentheses-equality""cc1: warning: unrecognized command line option ""-Wno-tautological-compare""Makefile:241: recipe for target 'mysql.o' failedmake: *** [mysql.o] Error 1make failed, exit code 2Gem files will remain installed in /usr/local/rvm/gems/ruby-2.4.0/gems/mysql-2.9.1 for inspection.Results logged to /usr/local/rvm/gems/ruby-2.4.0/extensions/x86_64-linux/2.4.0/mysql-2.9.1/gem_make.out sudo gem install mysql -v '2.9.1'Building native extensions. This could take a while...Successfully installed mysql-2.9.1Parsing documentation for mysql-2.9.1Done installing documentation for mysql after 0 seconds1 gem installed",MySQL Gem Install Error on Ruby 2.4
ES6 template strings error on Heroku," I have some code using template strings which works in development, but the push to Heroku fails with this error: Running bundle exec rake assets:precompile RAILS_ENV=production shows the same thing.The code is something like this: I wonder if the Heroku Node version is too low to support this. I'm not customizing this at all. Just pushing a Rails 4 app with the default configuration. <code>  ExecJS::RuntimeError: SyntaxError: Unexpected character '`' `1 + 1 is ${1 + 1}`",Can't precompile production assets when using ES6
Testing validations in model using Rspec with rails," I'm super new to testing my app using RSpec and I'm trying to test the validation of a comment without a user and keep getting syntax errors.Here is the comment model code. and here is the comment spec: <code>  class Comment < ApplicationRecord belongs_to :user belongs_to :product scope :rating_desc, -> { order(rating: :desc) } validates :body, presence: true validates :user, presence: true validates :product, presence: true validates :rating, numericality: { only_integer: true } after_create_commit { CommentUpdateJob.perform_later(self, user) }end require 'rails_helper'describe Comment do before do @product = Product.create!(name: ""race bike"", description: ""fast race bike"") @user = User.create!(email: ""jerryhoglen@me.com"", password: ""Maggie1!"") @product.comments.create!(rating: 1, user: @user, body: ""Awful bike!"") end it ""is invalid without a user"" expect(build(:comment, user:nil)).to_not be_valid endend",Testing validations in model using RSpec with Rails
Why are Ruby's File related types string based (stringly typed)?, e.g. Dir.entries returns an array of strings vs an array containing File or Dir instances.Most methods on Dir and File types. The instances are aneamic in comparison.There is no Dir#folders or Dir#files - instead I explicitly loop over Dir.entries build the path (File.expand_path) foreach item check File.directory?Simple use-cases like get all .svg files in this directory seem to require a number of hoops/loops/checks. Am I using Ruby wrong or does this facet of Ruby seem very un-ruby-ish? <code> ,Why are Ruby's file related types string-based (stringly typed)?
Whats the purpose of Nokogiri?," Nokogiri is the bane of my existence. It makes my rails new command fail for a different reason every time I create a new Rails app.Theres a ton of Nokogiri troubleshooting on StackOverflow, but, I cant find, neither here nor elsewhere, the reason why Nokogiri is included with Rails. The Nokogiri documentation states that its used for parsing, searching, and modifying HTML/XML documents, but, what purpose, if any, does it serve if Im not screen scraping? <code> ",Whats the purpose of Nokogiri in Rails?
Devise could not find the `Warden::Proxy` instance on request environment," I try to use Devise for my Rails app. I can sign up and login but when I go to my other page ""build"" I get the following error: Devise::MissingWarden in Home#show Devise could not find the Warden::Proxy instance on your request environment. Make sure that your application is loading Devise and Warden as expected and that the Warden::Manager middleware is present in your middleware stack. If you are seeing this on one of your tests, ensure that your tests are either executing the Rails middleware stack or that your tests are using the Devise::Test::ControllerHelpers module to inject the request.env['warden'] object for you.Here is my controller: Here rea my two partial views: and After debugging, I figured out that the problem is coming from this line in my ""show"" controller: template = HomeController.render('layouts/_template')Thanks for your help. <code>  class ApplicationController < ActionController::Base protect_from_forgery with: :exception private # Overwriting the sign_out redirect path method def after_sign_out_path_for(resource_or_scope) build_path endend <!-- views/devise/menu/_login_items.html.erb --><% if user_signed_in? %> <li> <%= link_to('Logout', destroy_user_session_path, :method => :delete) %> </li><% else %> <li> <%= link_to('Login', new_user_session_path) %> </li><% end %> <!-- views/devise/menu/_registration_items.html.erb --><% if user_signed_in? %> <li> <%= link_to('Edit registration', edit_user_registration_path) %> </li><% else %> <li> <%= link_to('Register', new_user_registration_path) %> </li><% end %>",Helper Devise: could not find the `Warden::Proxy` instance on request environment
specify order of execution of seed file in rails, I am trying to add data to two tables courses and course_subjects tables with the predefined data(as I don't need to alter these tables content). course_subjects table refers to courses table for the column course_id .When executing the rake db:seed command following error occurs. How can I specify to execute course.rb in seed first then course_subjects.I have data in separate csv files <code>  ActiveRecord::InvalidForeignKey: Mysql2::Error: Cannot add or update a child row: a foreign key constraint fails ,specify execution order of seed files in rails
Docker container sending empty reponses," Hoping someone can tell me what I am missing? This is a ruby app using webrick and I am trying to containerize the app. Running on Mac OSX 10.12.3 Sierra. Here is my Dockerfile Here is how the image is built if I run the service directly on the host, it runs fine verify the server is up: now run it in docker: verify the process now try and get some data but, if we execute the above GET (with wget instead of curl because it's not installed on this container) we can see all is well inside the container Is this an app issue?  <code>  FROM ruby:2.4.0-alpineRUN apk add --no-cache gcc musl-dev libstdc++ g++ makeRUN gem install jekyll bundler redcarpetRUN mkdir -p /usr/app/jekyllCOPY . /usr/app/jekyllWORKDIR /usr/app/jekyllEXPOSE 4000:4000CMD [""jekyll"", ""serve""] docker build -t chb0docker/cheat . Violas-MacBook-Pro:progfun-wiki cbongiorno$ jekyll serve &[1] 49286Violas-MacBook-Pro:progfun-wiki cbongiorno$ Configuration file: /Users/cbongiorno/development/progfun-wiki/_config.ymlConfiguration file: /Users/cbongiorno/development/progfun-wiki/_config.yml Source: /Users/cbongiorno/development/progfun-wiki Destination: /Users/cbongiorno/development/progfun-wiki/_site Incremental build: disabled. Enable with --incremental Generating... done in 0.409 seconds. Auto-regeneration: enabled for '/Users/cbongiorno/development/progfun-wiki'Configuration file: /Users/cbongiorno/development/progfun-wiki/_config.yml Server address: http://127.0.0.1:4000/ Server running... press ctrl-c to stop. Violas-MacBook-Pro:progfun-wiki cbongiorno$ curl localhost:4000 2> /dev/null | wc -l 40 Violas-MacBook-Pro:progfun-wiki cbongiorno$ fgjekyll serve^CViolas-MacBook-Pro:progfun-wiki cbongiorno$ docker run -d --name jekyll -p 4000:4000 chb0docker/cheat e766e4acb007033583885b1a3c52dc3c2dc51c6929c8466f3a4ff958f76ebc5f Violas-MacBook-Pro:progfun-wiki cbongiorno$ docker psCONTAINER ID IMAGE COMMAND CREATED STATUS PORTS NAMESe766e4acb007 chb0docker/cheat ""jekyll serve"" 19 minutes ago Up 32 seconds 0.0.0.0:4000->4000/tcp jekyllViolas-MacBook-Pro:progfun-wiki cbongiorno$ docker inspect --format '{{ .NetworkSettings.IPAddress }}' jekyll172.17.0.3Violas-MacBook-Pro:progfun-wiki cbongiorno$ docker logs jekyllConfiguration file: /usr/app/jekyll/_config.ymlConfiguration file: /usr/app/jekyll/_config.yml Source: /usr/app/jekyll Destination: /usr/app/jekyll/_site Incremental build: disabled. Enable with --incremental Generating... done in 0.329 seconds. Auto-regeneration: enabled for '/usr/app/jekyll'Configuration file: /usr/app/jekyll/_config.yml Server address: http://127.0.0.1:4000/ Server running... press ctrl-c to stop. Violas-MacBook-Pro:progfun-wiki cbongiorno$ curl localhost:4000 2> /dev/null | wc -l 0Violas-MacBook-Pro:progfun-wiki cbongiorno$ curl 172.17.0.3:4000 2> /dev/null | wc -l 0Violas-MacBook-Pro:progfun-wiki cbongiorno$ curl 0.0.0.0:4000 2> /dev/null | wc -l 0 docker exec -it jekyll /usr/bin/wget -q -O - localhost:4000 | wc -l 40",Docker container sending empty responses
Why random works like this in Ruby?," I was trying to be clever about deterministically picking random stuff, and found this: For a second, I thought ""wow, maybe that's a property of random number generators"", but Python and C# fail to reproduce this. <code>  irb(main):011:0> Random.new(Random.new(1).rand + 1).rand == Random.new(1).rand=> trueirb(main):012:0> Random.new(Random.new(5).rand + 1).rand == Random.new(5).rand=> falseirb(main):013:0> Random.new(Random.new(5).rand + 5).rand == Random.new(5).rand=> true",Why does random work like this in Ruby?
Listen error: unable to monitor directories for changes.," I am getting the following error while running my rails app in Ubuntu server FATAL: Listen error: unable to monitor directories for changes. Visit https://github.com/guard/listen/wiki/Increasing-the-amount-of-inotify-watchers for info on how to fix this.I have followed the above GitHub page, but I was unable to write in max_user_watches which were set in 8192 and I want to set that to 524288.in cat /proc/sys/fs/inotify/max_user_watches the file was in only read mode.I tried to grant write permissions, but I was getting permission denied error even with root access.Thanks in Advance!!!  <code> ",Listen error: unable to monitor directories for changes
"How do I avoid ""Invalid byte sequence"" when looking for link with text using Rails 5/Nokogiri?"," I'm using Rails 5 with Ruby 4.2 and scanning a document that I parsed with Nokogiri, looking in a case insensitive way for a link with text: After getting the HTML of my web page in content, I parse it into a Nokogiri doc using: The problem is, I'm getting on certain web pages when using the above regular expression. Is there a way I can rewrite the above to automatically account for the encoding or weird characters and not flip out?  <code>  a_elt = doc ? doc.xpath('//a').detect { |node| /link[[:space:]]+text/i === node.text } : nil doc = Nokogiri::HTML(content) ArgumentError invalid byte sequence in UTF-8 2.4.0 :002 > doc.encoding => ""UTF-8"" 2.4.0 :003 > doc.xpath('//a').detect { |node| /individual[[:space:]]+results/i === node.text }ArgumentError: invalid byte sequence in UTF-8 from (irb):3:in `===' from (irb):3:in `block in irb_binding' from /Users/davea/.rvm/gems/ruby-2.4.0@global/gems/nokogiri-1.7.0/lib/nokogiri/xml/node_set.rb:187:in `block in each' from /Users/davea/.rvm/gems/ruby-2.4.0@global/gems/nokogiri-1.7.0/lib/nokogiri/xml/node_set.rb:186:in `upto' from /Users/davea/.rvm/gems/ruby-2.4.0@global/gems/nokogiri-1.7.0/lib/nokogiri/xml/node_set.rb:186:in `each' from (irb):3:in `detect' from (irb):3 from /Users/davea/.rvm/gems/ruby-2.4.0@global/gems/railties-5.0.1/lib/rails/commands/console.rb:65:in `start' from /Users/davea/.rvm/gems/ruby-2.4.0@global/gems/railties-5.0.1/lib/rails/commands/console_helper.rb:9:in `start' from /Users/davea/.rvm/gems/ruby-2.4.0@global/gems/railties-5.0.1/lib/rails/commands/commands_tasks.rb:78:in `console' from /Users/davea/.rvm/gems/ruby-2.4.0@global/gems/railties-5.0.1/lib/rails/commands/commands_tasks.rb:49:in `run_command!' from /Users/davea/.rvm/gems/ruby-2.4.0@global/gems/railties-5.0.1/lib/rails/commands.rb:18:in `<top (required)>' from bin/rails:4:in `require' from bin/rails:4:in `<main>' ","How to avoid ""Invalid byte sequence"" when looking for link with text using Nokogiri"
Storing a String Identifier to a Model attribute," I'm using Virtus to create models that represent Salesforce objects.I'm trying to create attributes that have friendly names that are used to access the value and method that I can use to retrieve a identifier ""String"" for that variable. The friendly name is used as the getter/setter and a identifier that I can store each attribute corresponding to the API name.Here is an example: Or, instead of having a method on the Attribute itself, maybe a secondary method gets created for each identifier set: Could I extend Virtus::Attribute and add this? If so, I'm unsure on how to go about it. <code>  Object.attribute #=> ""BOB""Object.get_identifier(:attribute_name) #=> ""KEY""# OR something like thisObject.attribute.identifier #=> ""KEY"" class Case include Virtus.model attribute :case_number, String, identifier: 'Case_Number__c'endc = Case.new(case_number: 'XXX')c.case_number #=> 'XXX'c.case_number.identifier #=> 'Case_Number__c' c.case_number #=> 'XXX'c.case_number_identifier #=> 'Case_Number__c'",How to store a string identifier to a model attribute
Best way to create a complex Nested -> Belongs To association in form?," I'm building a form where a user should be able to create a template with fields. However they should also be able to create an optional Collection which belongs_to each Field at the same time. So far it looks like this:Tables ModelsTemplate Template Fields Collection CollectionValue How can I create these objects? How do I go about this in the controller? The only way I can think of is to create it as a nested association (even though Collection isn't really a nested attribute) or create the Collections before the Templates, and somehow link each Field to each Collection that was created.Controller <code>  templates: id, nametemplate_fields: id, template_id, collection_id, field_namecollections: id, namecollection_values: id, collection_id, value class Template < ActiveRecord::Base has_many :template_fields accepts_nested_attributes_for :template_fieldsend class TemplateField < ActiveRecord::Base belongs_to :template belongs_to :collectionend class Collection < ActiveRecord::Base has_many :collection_valuesend class CollectionValue < ActiveRecord::Base belongs_to :collectionend def create @template = Template.new(template_params) if @template.save flash[:notice] = ""Template successfully created."" flash[:color]= ""valid"" redirect_to templates_path else flash[:notice] = ""Form is invalid"" flash[:color]= ""invalid"" render :new endenddef template_params params.require(:template).permit(:id,:name, template_fields_attributes: [:id, :template_id, :field_name, :collection_id, collection_values_attributes: [:value] ])end",How to create a complex Nested -> Belongs To object?
Best way to create a complex Nested -> Belongs To association?," I'm building a form where a user should be able to create a template with fields. However they should also be able to create an optional Collection which belongs_to each Field at the same time. So far it looks like this:Tables ModelsTemplate Template Fields Collection CollectionValue How can I create these objects? How do I go about this in the controller? The only way I can think of is to create it as a nested association (even though Collection isn't really a nested attribute) or create the Collections before the Templates, and somehow link each Field to each Collection that was created.Controller <code>  templates: id, nametemplate_fields: id, template_id, collection_id, field_namecollections: id, namecollection_values: id, collection_id, value class Template < ActiveRecord::Base has_many :template_fields accepts_nested_attributes_for :template_fieldsend class TemplateField < ActiveRecord::Base belongs_to :template belongs_to :collectionend class Collection < ActiveRecord::Base has_many :collection_valuesend class CollectionValue < ActiveRecord::Base belongs_to :collectionend def create @template = Template.new(template_params) if @template.save flash[:notice] = ""Template successfully created."" flash[:color]= ""valid"" redirect_to templates_path else flash[:notice] = ""Form is invalid"" flash[:color]= ""invalid"" render :new endenddef template_params params.require(:template).permit(:id,:name, template_fields_attributes: [:id, :template_id, :field_name, :collection_id, collection_values_attributes: [:value] ])end",How to create a complex Nested -> Belongs To object?
How to create a complex Nested -> Belongs To association?," I'm building a form where a user should be able to create a template with fields. However they should also be able to create an optional Collection which belongs_to each Field at the same time. So far it looks like this:Tables ModelsTemplate Template Fields Collection CollectionValue How can I create these objects? How do I go about this in the controller? The only way I can think of is to create it as a nested association (even though Collection isn't really a nested attribute) or create the Collections before the Templates, and somehow link each Field to each Collection that was created.Controller <code>  templates: id, nametemplate_fields: id, template_id, collection_id, field_namecollections: id, namecollection_values: id, collection_id, value class Template < ActiveRecord::Base has_many :template_fields accepts_nested_attributes_for :template_fieldsend class TemplateField < ActiveRecord::Base belongs_to :template belongs_to :collectionend class Collection < ActiveRecord::Base has_many :collection_valuesend class CollectionValue < ActiveRecord::Base belongs_to :collectionend def create @template = Template.new(template_params) if @template.save flash[:notice] = ""Template successfully created."" flash[:color]= ""valid"" redirect_to templates_path else flash[:notice] = ""Form is invalid"" flash[:color]= ""invalid"" render :new endenddef template_params params.require(:template).permit(:id,:name, template_fields_attributes: [:id, :template_id, :field_name, :collection_id, collection_values_attributes: [:value] ])end",How to create a complex Nested -> Belongs To object?
"Trying to run a bundle install on rails 5.0.0 prompts a nio4r error, any ideas on a fix?"," The exact error is: Here is a trace: <code>  An error occurred while installing nio4r (1.2.1), and bundler cannot continue. Make sure that 'gem install nio4r -v '1.2.1'' succeeds before bundling. Fetching gem metadata from https://rubygems.org/Fetching version metadata from https://rubygems.org/Fetching dependency metadata from https://rubygems.org/Using rake 12.0.0Using concurrent-ruby 1.0.5Using i18n 0.8.1Using minitest 5.10.1Using thread_safe 0.3.6Using builder 3.2.3Using erubis 2.7.0Using mini_portile2 2.1.0Using rack 2.0.1Installing nio4r 1.2.1 with native extensionsErrno::EACCES: Permission denied @ rb_sysopen - /Users/lukeplourde/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/nio4r-1.2.1/.gitignoreUsing websocket-extensions 0.1.2Using mime-types-data 3.2016.0521Using arel 7.1.4Using byebug 9.0.6Using coffee-script-source 1.12.2Using execjs 2.7.0Using method_source 0.8.2Using thor 0.19.4Using debug_inspector 0.0.2Using ffi 1.9.17Using multi_json 1.12.1Using rb-fsevent 0.9.8Using puma 3.7.0Using bundler 1.12.5Using sass 3.4.23Using tilt 2.0.6Using sqlite3 1.3.13Using turbolinks-source 5.0.0Using tzinfo 1.2.2Using nokogiri 1.7.0.1Using rack-test 0.6.3Using sprockets 3.7.1An error occurred while installing nio4r (1.2.1), and Bundler cannot continue.Make sure that `gem install nio4r -v '1.2.1'` succeeds before bundling.","How to fix a bundle install ""nio4r error"" on Rails 5.0.0"
Does Ruby compile certain idioms upfront?," See this simple Ruby class: When running this class the following behavior can be observed in the debugger's console: At the breakpoint the debugger returns the following values: Note that - although the debugger's breakpoint is in line #5 - it already knows that there will be a local variable bar defined in line #10 that will shadow the method bar and the debugger is actually not able anymore to call the bar method. What is doesn't know at this point is that the string 'local string' will be assign to bar. The debugger returns nil for bar.Let's continue with the original code in the Ruby file and look at its output: At run time in line #7 Ruby still knowns that bar is indeed a method and it is still able to call it in line #8. Then l ine #10 actually defines the local variable that shadows the method with the same name and tTherefore Ruby returns like expected in line #12 and #13.Questions: Why does the debugger return different values than the original code? It seems like it is able to look into the future. Is this considered a feature or a bug? Is this behavior documented? <code>  require 'byebug'class Foo def run byebug puts defined?(bar) puts bar.inspect bar = 'local string' puts defined?(bar) puts bar.inspect end def bar 'string from method' endendFoo.new.run $ ruby byebug.rb [2, 11] in /../test.rb 2: 3: class Foo 4: def run 5: byebug 6: => 7: puts defined?(bar) 8: puts bar.inspect 9: 10: bar = 'local string' 11: (byebug) defined?(bar) ""local-variable"" (byebug) bar.inspect ""nil"" (byebug) continue method ""string from method"" local-variable ""local string""",Why does the Ruby debugger return different values than the code at run time?
Do Ruby debugger compile certain idioms upfront?," See this simple Ruby class: When running this class the following behavior can be observed in the debugger's console: At the breakpoint the debugger returns the following values: Note that - although the debugger's breakpoint is in line #5 - it already knows that there will be a local variable bar defined in line #10 that will shadow the method bar and the debugger is actually not able anymore to call the bar method. What is doesn't know at this point is that the string 'local string' will be assign to bar. The debugger returns nil for bar.Let's continue with the original code in the Ruby file and look at its output: At run time in line #7 Ruby still knowns that bar is indeed a method and it is still able to call it in line #8. Then l ine #10 actually defines the local variable that shadows the method with the same name and tTherefore Ruby returns like expected in line #12 and #13.Questions: Why does the debugger return different values than the original code? It seems like it is able to look into the future. Is this considered a feature or a bug? Is this behavior documented? <code>  require 'byebug'class Foo def run byebug puts defined?(bar) puts bar.inspect bar = 'local string' puts defined?(bar) puts bar.inspect end def bar 'string from method' endendFoo.new.run $ ruby byebug.rb [2, 11] in /../test.rb 2: 3: class Foo 4: def run 5: byebug 6: => 7: puts defined?(bar) 8: puts bar.inspect 9: 10: bar = 'local string' 11: (byebug) defined?(bar) ""local-variable"" (byebug) bar.inspect ""nil"" (byebug) continue method ""string from method"" local-variable ""local string""",Why does the Ruby debugger return different values than the code at run time?
ActiveSupport::Concern include in the module VS in the included block, Suppose I have the following namespace with a Base module that defines some methods that can be reused What is the difference (if there is any) between and (The question is about the difference of include Magic being either outside or inside the included block) <code>  module MyNameSpace module Magic extend ActiveSupport::Concern class_methods do def magic_field(field_name) # Defines methods and attributes based on field name end end endend module MyNameSpace module Foo extend ActiveSupport::Concern include Magic included do magic_field(:foo) end endend module MyNameSpace module Foo extend ActiveSupport::Concern included do include Magic magic_field(:foo) end endend,ActiveSupport::Concern code placed inside the included block or in the module body
How to execute query over Amazon Athena with ruby?, how to connect Amazon Athena with Ruby and execute query over Amazon Athena and get result.we not able to find any gem or example with help us to connect Amazon Athena in ruby.Please provide any reference using which we can use to build connection with Amazon Athena and build a custom query executor in Ruby.just to clarify my application on production so changing SDK from Ruby to JRuby is not a suitable option for me. <code> ,How to execute query over Amazon Athena with Ruby?
How do I remove an element from an array at a specified index but not do the operation in-place?," Ruby 2.4. I want to create a new array by removing an element at a specified index from an array. I thought delete_at was the way, but it performs in-place and doesn't return the newly created array, but rather, the element that was removed: How do I delete an element from an array at a specified index but not perform the operation in place? <code>  2.4.0 :003 > a = [""a"", ""b"", ""c""] => [""a"", ""b"", ""c""]2.4.0 :004 > a.delete_at(0) => ""a""2.4.0 :005 > a => [""b"", ""c""]",How do I remove an element from an array at a specified index but not do the operation in-place
Find all indicies of a substring within a string," I want to be able to find the index of all occurrences of a substring in a larger string using Ruby. E.g.: all ""in"" in ""Einstein"" <code>  str = ""Einstein""str.index(""in"") #returns only 1str.scan(""in"") #returns [""in"",""in""]#desired output would be [1, 6]",Find all indices of a substring within a string
What to use instead of `render :text` in rails 5.1 and later?," Rails 5.1 removes a whole load of previously deprecated methods. Among them is the old friend render :text.It was very useful when you need to render some text, but don't want the overhead of a view template. Examples: What to use instead? <code>  render text: ""ok""render text: t('business_rules.project_access_denied'), status: 401",What to use instead of `render :text` (and `render nothing: true`) in rails 5.1 and later?
Don't work rubocop with atom," I was trying to connect rubocop to atom, but received the error: which rubocop returns: can someone assist with that? <code>  linter-registry.js [sm]:144 [Linter] Error running RuboCop Error: /usr/lib/ruby/2.3.0/rubygems/dependency.rb:319:in `to_specs': Could not find 'rubocop' (>= 0.a) among 16 total gem(s) (Gem::LoadError)Checked in 'GEM_PATH=/home/kurilovichay/.rvm/gems/ruby-2.3.1:/home/kurilovichay/.rvm/gems/ruby-2.3.1@global', execute `gem env` for more information from /usr/lib/ruby/2.3.0/rubygems/dependency.rb:328:in `to_spec' from /usr/lib/ruby/2.3.0/rubygems/core_ext/kernel_gem.rb:65:in `gem' from /usr/local/bin/rubocop:22:in `<main>' at parseFromStd (/home/kurilovichay/.atom/packages/linter-rubocop/src/index.js:41:43) at Object.<anonymous> (/home/kurilovichay/.atom/packages/linter-rubocop/src/index.js:212:27) at next (<anonymous>) at step (/home/kurilovichay/.atom/packages/linter-rubocop/src/index.js:11:273) /usr/local/bin/rubocop",Atom-Editor: Rubocop doesn't work with atom
Atom-Editor: Don't work rubocop with atom," I was trying to connect rubocop to atom, but received the error: which rubocop returns: can someone assist with that? <code>  linter-registry.js [sm]:144 [Linter] Error running RuboCop Error: /usr/lib/ruby/2.3.0/rubygems/dependency.rb:319:in `to_specs': Could not find 'rubocop' (>= 0.a) among 16 total gem(s) (Gem::LoadError)Checked in 'GEM_PATH=/home/kurilovichay/.rvm/gems/ruby-2.3.1:/home/kurilovichay/.rvm/gems/ruby-2.3.1@global', execute `gem env` for more information from /usr/lib/ruby/2.3.0/rubygems/dependency.rb:328:in `to_spec' from /usr/lib/ruby/2.3.0/rubygems/core_ext/kernel_gem.rb:65:in `gem' from /usr/local/bin/rubocop:22:in `<main>' at parseFromStd (/home/kurilovichay/.atom/packages/linter-rubocop/src/index.js:41:43) at Object.<anonymous> (/home/kurilovichay/.atom/packages/linter-rubocop/src/index.js:212:27) at next (<anonymous>) at step (/home/kurilovichay/.atom/packages/linter-rubocop/src/index.js:11:273) /usr/local/bin/rubocop",Atom-Editor: Rubocop doesn't work with atom
Ruby : If adjacent numbers are same then group it," I need to pack if there are at least two adjacent numbers which are same in the format <number : number_of_occurrences >.This is my input: And the expected output: So far I tried: If it's equal try a counter maybe, but thats not working. <code>  [2,2,2,3,4,3,3,2,4,4,5] ""2:3,3,4,3:2,2,4:2,5"" a = [1, 1, 1, 2, 2, 3, 2, 3, 4, 4, 5]a.each_cons(2).any? do |s , t| if s == t",How to group adjacent numbers that are the same
If adjacent numbers are same then group them," I need to pack if there are at least two adjacent numbers which are same in the format <number : number_of_occurrences >.This is my input: And the expected output: So far I tried: If it's equal try a counter maybe, but thats not working. <code>  [2,2,2,3,4,3,3,2,4,4,5] ""2:3,3,4,3:2,2,4:2,5"" a = [1, 1, 1, 2, 2, 3, 2, 3, 4, 4, 5]a.each_cons(2).any? do |s , t| if s == t",How to group adjacent numbers that are the same
How to map Rails web and API to different Newrelic app names?," I'm using Rails 5 to serve a website and a RESTful API, and I use Newrelic (newrelic_rpm gem) to monitor the application performance. At the moment, the gem monitor to all requests to one application name. let's say my routes looks something like: Here /users is the route for the web app and api/users is the route for the API. For now, once I use newrelic_rpm it won't see the different between the API and the web. I want to make more separation for the reports so I can log web requests to a specific app name, ex: web_app and for the API another name api_app. Any help?  <code>  Rails.application.routes.draw do resources :users namespace :api do namespace :v1 do resources :users, only: :index end endend",How to differentiate Rails API calls in Newrelic?
How to map Rails routes to different Newrelic app names?," I'm using Rails 5 to serve a website and a RESTful API, and I use Newrelic (newrelic_rpm gem) to monitor the application performance. At the moment, the gem monitor to all requests to one application name. let's say my routes looks something like: Here /users is the route for the web app and api/users is the route for the API. For now, once I use newrelic_rpm it won't see the different between the API and the web. I want to make more separation for the reports so I can log web requests to a specific app name, ex: web_app and for the API another name api_app. Any help?  <code>  Rails.application.routes.draw do resources :users namespace :api do namespace :v1 do resources :users, only: :index end endend",How to differentiate Rails API calls in Newrelic?
How to map different Rails routes to multiple Newrelic app names?," I'm using Rails 5 to serve a website and a RESTful API, and I use Newrelic (newrelic_rpm gem) to monitor the application performance. At the moment, the gem monitor to all requests to one application name. let's say my routes looks something like: Here /users is the route for the web app and api/users is the route for the API. For now, once I use newrelic_rpm it won't see the different between the API and the web. I want to make more separation for the reports so I can log web requests to a specific app name, ex: web_app and for the API another name api_app. Any help?  <code>  Rails.application.routes.draw do resources :users namespace :api do namespace :v1 do resources :users, only: :index end endend",How to differentiate Rails API calls in Newrelic?
Ruby: Merging Two Array of Hashes," I have two arrays of hashes: I want to merge them into one array of hashes, so essentially a + b except I want any duplicated key in b to overwrite those in a. In this case, both a and b contain a key 1 and I want the final result to have b's key value pair.Here's the expected result: I got it to work but I was wondering if there's a less wordy way of doing this: <code>  a = [ { key: 1, value: ""foo"" }, { key: 2, value: ""baz"" }]b = [ { key: 1, value: ""bar"" }, { key: 1000, value: ""something"" }] expected = [ { key: 1, value: ""bar"" }, { key: 2, value: ""baz"" }, { key: 1000, value: ""something"" }] hash_result = {}a.each do |item| hash_result[item[:key]] = item[:value]endb.each do |item| hash_result[item[:key]] = item[:value]endresult = []hash_result.each do |k,v| result << {:key => k, :value => v}endputs resultputs expected == result # prints true",How to merge two arrays of hashes
Rails 5.1.0 and JQuery," I started using Rails v5.1.0 which I understand comes without jQuery as a default, however want to install jQuery to work with Zurb Foundation 6.What's the best way to set this up as foundation is not currently loading modals?  <code> ",How to use Rails 5.1.0 and jQuery
Rails5 controller spec unknown keyword: id," I have simple action show and i want write spec for it but I have got an error How to fix it? <code>  def show @field = Field.find_by(params[:id])end require 'spec_helper'RSpec.describe FieldsController, type: :controller do let(:field) { create(:field) } it 'should show field' do get :show, id: field expect(response.status).to eq(200) endend Failure/Error: get :show, id: field ArgumentError: unknown keyword: id",Controller spec unknown keyword: id
"What is the magic behind the respond_to? method in ruby? How can it just ""transform"" a method into a symbol as argument?"," The respond_to? method takes as argument, a method to be checked, but as a symbol.Why as symbol? And how does ruby convert the method into a symbol? <code> ",How can Ruby transform a method into a symbol as argument?
Define dynamic instance attributes without losing initial data," Let's say we have a Virtus model User Then we create an instance of this model and extend from Virtus.model to add another attribute on the fly: Current output: But when I try to get either attributes or convert the object to JSON via as_json(or to_json) or Hash via to_h I get only post-extended attribute active: What is causing the problem and how can I get to convert the object without loosing the data?P.S.I have found a github issue, but it seems that it was not fixed after all (the approach recommended there doesn't work stably as well). <code>  class User include Virtus.model attribute :name, String, default: 'John', lazy: trueend user = User.newuser.extend(Virtus.model)user.attribute(:active, Virtus::Attribute::Boolean, default: true, lazy: true) user.active? # => trueuser.name # => 'John' user.to_h # => { active: true }",Dynamically extend Virtus instance attributes
Dynamically extend Virtus instance attributes without losing initial data," Let's say we have a Virtus model User Then we create an instance of this model and extend from Virtus.model to add another attribute on the fly: Current output: But when I try to get either attributes or convert the object to JSON via as_json(or to_json) or Hash via to_h I get only post-extended attribute active: What is causing the problem and how can I get to convert the object without loosing the data?P.S.I have found a github issue, but it seems that it was not fixed after all (the approach recommended there doesn't work stably as well). <code>  class User include Virtus.model attribute :name, String, default: 'John', lazy: trueend user = User.newuser.extend(Virtus.model)user.attribute(:active, Virtus::Attribute::Boolean, default: true, lazy: true) user.active? # => trueuser.name # => 'John' user.to_h # => { active: true }",Dynamically extend Virtus instance attributes
rails redirec_to :back not working, I'm trying to use the following: I got this exception: Why this is happening? <code>  class PaymentsController < ApplicationController def addproduct (session[:products] ||= []) << params[:item] redirect_to :back end end undefined method `back_url' for #<PaymentsController:0x007ff682c467a8>,rails redirect_to :back not working
Array to Hash Conversion in Ruby," Is there a way to pull the values from an array and assign them each a unique key in Ruby?I want to be able to turn this array: Into this hash: I would rather not assign each value individually, like this: <code>  [""12"", ""21"", ""1985""] {:month => ""12"", :day => ""21"", :year => ""1985""} arr = [""12"", ""21"", ""1985""]bday_hash = {:month => arr[0], :day => arr[1], :year => arr[2]}",Ruby convert an Array to Hash values with specific keys
Output json in rails without escaping back slashes," I need to output some JSON for a customer in a somewhat unusual format. My app is written with Rails 5.Desired JSON: The timestamp value needs to have a \/ at both the start and end of the string. As far as I can tell, this seems to be a format commonly used in .NET services. I'm stuck trying to get the slashes to output correctly.I reduced the problem to a vanilla Rails 5 application with a single controller action. All the permutations of escapes I can think of have failed so far. Which outputs the following: For the sake of discussion, assume that the format cannot be changed since it is controlled by a third party.I have uploaded a test app to Github to demonstrate the problem. https://github.com/gregawoods/test_app_ignore_me <code>  { ""key"": ""\/Date(0000000000000)\/""} def index render json: { a: '\/Date(0000000000000)\/', b: ""\/Date(0000000000000)\/"", c: '\\/Date(0000000000000)\\/', d: ""\\/Date(0000000000000)\\/"" }end { ""a"": ""\\/Date(0000000000000)\\/"", ""b"": ""/Date(0000000000000)/"", ""c"": ""\\/Date(0000000000000)\\/"", ""d"": ""\\/Date(0000000000000)\\/""}",How to output JSON in Rails without escaping back slashes
Messenger bot using Rails: set up for multiple pages," I want to create a Messenger Bot used by different users for their Facebook pages. I created a rails app and use the facebook-messenger gem.I successfully created the bot and it works when I do the set up for one page. Now, I follow the instructions to make my bot live on multiple Facebook Pages (see ""Make a configuration provider"" section).I'm new to rails and I'm not sure where to put the class ExampleProvider? I put it in my config/application.rb file: Then I have my app/bot/setup.rb file to create the bot. I don't know how to use the provider I created in place of the ENV variables? I searched in the Rails documentation how to make it work but unfortunately could not find anything.UPDATE:Now I'm able to set up the bots for different pages. Unfortunately, the following line of my ConfigProvider is getting an error:config/initializers/config_provider.rb NameError (uninitialized constant BotletterApp::Bot): config/initializers/config_provider.rb:17:in bot' config/initializers/config_provider.rb:7:inapp_secret_for'Do you know how should I name my app?My BotModule: UPDATE, it works with ::Application, here is the new file: The problem is I get the following error unless my db query seems working (it works in the rails console): ActiveRecord::StatementInvalid (SQLite3::SQLException: no such column: page_id.id: SELECT ""core_bots"".* FROM ""core_bots"" WHERE ""page_id"".""id"" = ? LIMIT ?): <code>  require_relative 'boot'require 'rails/all'# Require the gems listed in Gemfile, including any gems# you've limited to :test, :development, or :production.Bundler.require(*Rails.groups)module BotletterApp class Application < Rails::Application # Settings in config/environments/* take precedence over those specified here. # Application configuration should go into files in config/initializers # -- all .rb files in that directory are automatically loaded. config.paths.add File.join('app', 'bot'), glob: File.join('**', '*.rb') config.autoload_paths += Dir[Rails.root.join('app', 'bot', '*')] end class BotProvider < Facebook::Messenger::Configuration::Providers::Base def valid_verify_token?(verify_token) bot.exists?(verify_token: verify_token) end def app_secret_for() ENV['APP_SECRET'] end def access_token_for(page_id) bot.find_by(user_id: page_id).page_access_token end private def bot MyApp::Bot end end Facebook::Messenger.configure do |config| config.provider = BotProvider.new endend require ""facebook/messenger""include Facebook::MessengerFacebook::Messenger::Subscriptions.subscribe(access_token: ENV[""ACCESS_TOKEN""])Facebook::Messenger::Profile.set({ get_started: { payload: 'GET_STARTED_PAYLOAD' }}, access_token: ENV['ACCESS_TOKEN']) def bot Rails.application.class.parent::Bot endI'm getting the following error: module BotletterApp class Application < Rails::Application # Settings in config/environments/* take precedence over those specified here. # Application configuration should go into files in config/initializers # -- all .rb files in that directory are automatically loaded. config.paths.add File.join('app', 'listen'), glob: File.join('**', '*.rb') config.autoload_paths += Dir[Rails.root.join('app', 'listen', '*')] endend class ConfigProvider < Facebook::Messenger::Configuration::Providers::Base def valid_verify_token?(verify_token) ENV['VERIFY_TOKEN'] end def app_secret_for(page_id) ENV['APP_SECRET'] end def access_token_for(page_id) CoreBot.find_by_page_id(page_id).page_access_token end private def bot BotletterApp::Application endendFacebook::Messenger.configure do |config| config.provider = ConfigProvider.newend",Messenger bot using Rails: setup for multiple pages
Ruby - call method on a block," I'm doing the following: Can I call map and compact in one statement somehow, so I can return the result instantly?I'm thinking on something like this (it may be invalid, however): <code>  array_variable = collection.map do |param| some value with paramendreturn array_variable.compact array_variable = block_code param.compact # block_code here is a method for example which fills the array",How to chain a method call to a `do ... end` block in Ruby?
Ruby - call method on a block's result," I'm doing the following: Can I call map and compact in one statement somehow, so I can return the result instantly?I'm thinking on something like this (it may be invalid, however): <code>  array_variable = collection.map do |param| some value with paramendreturn array_variable.compact array_variable = block_code param.compact # block_code here is a method for example which fills the array",How to chain a method call to a `do ... end` block in Ruby?
Ruby default assignment ( ||= ) vs Rescueing error," Since a ||= 1 is equivalent to a || a = 1, one can state that this is synctactic sugar for this: Likewise, given that session is a hash-like object, the following: is equivalent to: Does that mean that the implicit if statement will be executed every time in the original definition of increment_session_counter? Since session[:counter] will mostly likely be nil only the first time (i.e. << 1% of the time), I have the feeling that the following code is better, since the implicit if won't be fired every time: Is this code better in such sense?Having said that, I have no idea how Rescue is implemented in ruby and whether it's actually relevant regarding the tiny little optimization that can bring if so. <code>  if a.nil? a = 1end def increment_session_counter session[:counter] ||= 0 session[:counter] += 1end def increment_session_counter if session[:counter].nil? session[:counter] = 0 end session[:counter] += 1end def increment_session_counter session[:counter] += 1rescue NoMethodError session[:counter] = 1end",Ruby default assignment ( ||= ) vs Rescuing error
Best permutation algorithm in ruby," I am trying to count the number of numbers that are expressed by P number of 1's and 0's in binary form. If P = 2, then the numbers expressed are 0011, 1100, 0110, 0101, 1001, 1010, so the count is 6.I tried: But it is not the best solution for big numbers (P can be <= 30).What could be the best permutation technique, or do we have any straight forward math to do this? <code>  [0,0,1,1].permutation.to_a.uniq",Best permutation count algorithm in ruby
Ruby select / reject operating on index rather than element," Given: In Python, one can select or reject elements of a list given the index of that element by combining enumerate and an if clause in a list comprehension:Every item except the third: Every third item in a list: Or, even easier, with a slice: In Ruby, we have .select and .reject And then apply .collect to that: For the slice, the rough Ruby equivalent might be: But I can't figure out how toe collect those into a new array other than: Questions: Are these the best Ruby idioms for what I am trying to do (.select or .reject with .collect)?Is there a way to do something along these lines with a slice: new_arr=(0..arr.length).step(3).each { |e| arr[e] }.some_method? <code>  arr=[10, 20, 30, 40, 50, 60, 70, 80, 90, 100] 0 1 2 3 4 5 6 7 8 9 # index of arr >>> [e for i,e in enumerate(arr) if i%3][20, 30, 50, 60, 80, 90] >>> [e for i,e in enumerate(arr) if not i%3][10, 40, 70, 100] >>> arr[::3][10, 40, 70, 100] > arr.each_with_index.reject { |e,i| i%3==0 }=> [[20, 1], [30, 2], [50, 4], [60, 5], [80, 7], [90, 8]]> arr.each_with_index.select { |e,i| i%3==0 }=> [[10, 0], [40, 3], [70, 6], [100, 9]] > arr.each_with_index.select { |e,i| i%3==0 }.collect{|e,i| e}=> [10, 40, 70, 100] > (0..arr.length).step(3).each { |e| p arr[e] }104070100=> 0..10 > new_arr=[]=> []> (0..arr.length).step(3).each { |e| new_arr.push(arr[e]) }=> 0..10> new_arr=> [10, 40, 70, 100]",Python list comprehension => Ruby select / reject on index rather than element
String to Array in Ruby (Without YAML) That Splits by Spaces," I want to have a user type some words, and get them converted to an array. I want to split by word. Here is an example:""15 17 21 46"" [15, 17, 21, 46]Stuff like split("""") and scan make an array out of every single letter.I would prefer doing it without using YAML. Also, take note in the example that it doesn't include the spaces but it uses those as breaks between values.Is it possible to do what I did in the example above where I have a bunch of numbers with spaces and those get converted directly to integers? I feel like the spaces might interrupt it in case I do something like to_i.This question is similar to String to Array in Ruby, but it does not have an answer. <code> ",Split string by spaces into an array
Ruby - making an object callable?," Is there a way to create a object that has properties and can be called using only the notation of a function call? Something equivalent to Python's __call__.For example: Alternate approaches are welcome, I need a way for the callable ""object"" to store its own properties.What I am trying to do is store a callable ""object"" in a variable. This object has properties that are associated with it, while at the same time, it can be used exactly like a method. <code>  obj = ExampleClass.new()obj() # call notation",How can I make an object callable?
How can I make an object callable?," Is there a way to create a object that has properties and can be called using only the notation of a function call? Something equivalent to Python's __call__.For example: Alternate approaches are welcome, I need a way for the callable ""object"" to store its own properties.What I am trying to do is store a callable ""object"" in a variable. This object has properties that are associated with it, while at the same time, it can be used exactly like a method. <code>  obj = ExampleClass.new()obj() # call notation",How can I make an object callable?
How can I make an object callable?," Is there a way to create a object that has properties and can be called using only the notation of a function call? Something equivalent to Python's __call__.For example: Alternate approaches are welcome, I need a way for the callable ""object"" to store its own properties.What I am trying to do is store a callable ""object"" in a variable. This object has properties that are associated with it, while at the same time, it can be used exactly like a method. <code>  obj = ExampleClass.new()obj() # call notation",How can I make an object callable?
Ruby - How can I make an object callable?," Is there a way to create a object that has properties and can be called using only the notation of a function call? Something equivalent to Python's __call__.For example: Alternate approaches are welcome, I need a way for the callable ""object"" to store its own properties.What I am trying to do is store a callable ""object"" in a variable. This object has properties that are associated with it, while at the same time, it can be used exactly like a method. <code>  obj = ExampleClass.new()obj() # call notation",How can I make an object callable?
Why use Ruby include do end block," I read this post: Ruby modules - included do end block – but still don't get when you would use the self.included do ... end block in a module.The post says that code in the block will be ran when you include the module, but what's the point of that if a module's sole purpose is to be included? Wouldn't that code need to be run anyway? That block doesn't need to be there in order for that code to be run, right?What would be the difference between the two below: vs. <code>  module M def self.included(base) base.extend ClassMethods base.class_eval do scope :disabled, -> { where(disabled: true) } end end module ClassMethods ... endend module M def self.some_class_method ... end scope :disabled, -> { where(disabled: true) }end",self.included  including class methods from a module in Ruby
"The following gems are missing (Ruby, Ruby on Rails, Capistrano)"," I'm creating a Rails app. I deployed to a vps server by Capistrano, running the following deploy command: And the deploying looked like success, but some gems were missing. I want to installing the missing gems.The specs are:ubuntu 16.04 Bundler 1.14.6 ruby 2.4.1p111 (2017-03-22 revision58053) [x86_64-darwin16] Rails 5.1.2 capistrano 3cloud9 (local environment)My Gemfile: My Gemfile.lock My Capfile <code>  $ bundle exec cap development deploy The following gems are missing DEBUG [16b13d82] * debug_inspector (0.0.3) * web-console (3.1.1) DEBUG [16b13d82] * spring (1.7.2) * spring-watcher-listen (2.0.0) DEBUG [16b13d82] * rails-controller-testing (0.1.1) DEBUG [16b13d82] * ansi (1.5.0) DEBUG [16b13d82] * ruby-progressbar (1.8.1) * minitest-reporters (1.1.9) * formatador (0.2.5) DEBUG [16b13d82] * lumberjack (1.0.12) DEBUG [16b13d82] * nenv (0.3.0) DEBUG [16b13d82] * shellany (0.0.1) DEBUG [16b13d82] * notiffany (0.1.1) DEBUG [16b13d82] * coderay (1.1.1) DEBUG [16b13d82] * slop (3.6.0) DEBUG [16b13d82] * pry (0.10.4) DEBUG [16b13d82] * guard (2.13.0) DEBUG [16b13d82] * guard-compat (1.2.1) DEBUG [16b13d82] * guard-minitest (2.4.4) DEBUG [16b13d82] Install missing gems with `bundle install` source 'https://rubygems.org'gem 'rails', '5.1.2'gem 'will_paginate', '3.1.0'gem 'bootstrap-will_paginate', '0.0.10'gem 'bootstrap-sass', '~> 3.3.6' gem 'sass-rails', '>= 3.2'gem 'puma', '3.4.0'gem 'uglifier', '3.0.0'gem 'coffee-rails', '4.2.1'gem 'jquery-rails', '4.1.1'gem 'turbolinks', '5.0.1'gem 'jbuilder', '2.4.1'gem 'devise'gem 'toastr-rails'gem 'omniauth'gem 'omniauth-facebook'gem 'omniauth-twitter'gem 'omniauth-google-oauth2'gem 'paperclip'gem 'geocoder'gem 'jquery-ui-rails', '5.0.5'gem 'private_pub'gem 'thin'gem 'ransack'gem 'font-awesome-rails'gem 'font-awesome-sass'gem 'rails-i18n'gem 'payjp'gem 'carrierwave'gem 'rmagick'gem 'rack-mini-profiler'gem 'rb-readline'gem 'unicorn'gem 'capistrano', '~> 3.6'gem 'capistrano-rails', '~> 1.3'gem 'capistrano-bundler'gem 'capistrano-passenger'gem 'capistrano-rbenv'gem 'therubyracer', platforms: :rubygem 'capistrano3-unicorn'gem 'capistrano-safe-deploy-to'gem 'listen', '~> 3.1.5'gem 'sqlite3', '1.3.13'group :development do gem 'web-console', '3.1.1' gem 'spring', '1.7.2' gem 'spring-watcher-listen', '2.0.0'endgroup :test do gem 'rails-controller-testing', '0.1.1' gem 'minitest-reporters', '1.1.9' gem 'guard', '2.13.0' gem 'guard-minitest', '2.4.4'endgroup :production do gem 'pg', '0.18.4' gem 'rails_12factor'end GEM remote: https://rubygems.org/ specs: actioncable (5.0.3) actionpack (= 5.0.3) nio4r (>= 1.2, < 3.0) websocket-driver (~> 0.6.1) actionmailer (5.0.3) actionpack (= 5.0.3) actionview (= 5.0.3) activejob (= 5.0.3) mail (~> 2.5, >= 2.5.4) rails-dom-testing (~> 2.0) actionpack (5.0.3) actionview (= 5.0.3) activesupport (= 5.0.3) rack (~> 2.0) rack-test (~> 0.6.3) rails-dom-testing (~> 2.0) rails-html-sanitizer (~> 1.0, >= 1.0.2) actionview (5.0.3) activesupport (= 5.0.3) builder (~> 3.1) erubis (~> 2.7.0) rails-dom-testing (~> 2.0) rails-html-sanitizer (~> 1.0, >= 1.0.3) activejob (5.0.3) activesupport (= 5.0.3) globalid (>= 0.3.6) activemodel (5.0.3) activesupport (= 5.0.3) activerecord (5.0.3) activemodel (= 5.0.3) activesupport (= 5.0.3) arel (~> 7.0) activesupport (5.0.3) concurrent-ruby (~> 1.0, >= 1.0.2) i18n (~> 0.7) minitest (~> 5.1) tzinfo (~> 1.1) addressable (2.5.1) public_suffix (~> 2.0, >= 2.0.2) airbrussh (1.3.0) sshkit (>= 1.6.1, != 1.7.0) ansi (1.5.0) arel (7.1.4) autoprefixer-rails (7.1.2.2) execjs bcrypt (3.1.11) bootstrap-sass (3.3.7) autoprefixer-rails (>= 5.2.1) sass (>= 3.3.4) bootstrap-will_paginate (0.0.10) will_paginate builder (3.2.3) capistrano (3.8.2) airbrussh (>= 1.0.0) i18n rake (>= 10.0.0) sshkit (>= 1.9.0) capistrano-bundler (1.2.0) capistrano (~> 3.1) sshkit (~> 1.2) capistrano-passenger (0.2.0) capistrano (~> 3.0) capistrano-rails (1.3.0) capistrano (~> 3.1) capistrano-bundler (~> 1.1) capistrano-rbenv (2.1.1) capistrano (~> 3.1) sshkit (~> 1.3) capistrano-safe-deploy-to (1.1.1) capistrano (>= 3.0) capistrano3-unicorn (0.2.1) capistrano (~> 3.1, >= 3.1.0) carrierwave (1.1.0) activemodel (>= 4.0.0) activesupport (>= 4.0.0) mime-types (>= 1.16) climate_control (0.2.0) cocaine (0.5.8) climate_control (>= 0.0.3, < 1.0) coderay (1.1.1) coffee-rails (4.2.1) coffee-script (>= 2.2.0) railties (>= 4.0.0, < 5.2.x) coffee-script (2.4.1) coffee-script-source execjs coffee-script-source (1.12.2) concurrent-ruby (1.0.5) cookiejar (0.3.3) daemons (1.2.4) debug_inspector (0.0.3) devise (4.3.0) bcrypt (~> 3.0) orm_adapter (~> 0.1) railties (>= 4.1.0, < 5.2) responders warden (~> 1.2.3) domain_name (0.5.20170404) unf (>= 0.0.5, < 1.0.0) em-http-request (1.1.5) addressable (>= 2.3.4) cookiejar (!= 0.3.1) em-socksify (>= 0.3) eventmachine (>= 1.0.3) http_parser.rb (>= 0.6.0) em-socksify (0.3.1) eventmachine (>= 1.0.0.beta.4) erubis (2.7.0) eventmachine (1.2.3) execjs (2.7.0) faraday (0.12.1) multipart-post (>= 1.2, < 3) faye (1.2.4) cookiejar (>= 0.3.0) em-http-request (>= 0.3.0) eventmachine (>= 0.12.0) faye-websocket (>= 0.9.1) multi_json (>= 1.0.0) rack (>= 1.0.0) websocket-driver (>= 0.5.1) faye-websocket (0.10.7) eventmachine (>= 0.12.0) websocket-driver (>= 0.5.1) ffi (1.9.18) font-awesome-rails (4.7.0.2) railties (>= 3.2, < 5.2) font-awesome-sass (4.7.0) sass (>= 3.2) formatador (0.2.5) geocoder (1.4.4) globalid (0.4.0) activesupport (>= 4.2.0) guard (2.13.0) formatador (>= 0.2.4) listen (>= 2.7, <= 4.0) lumberjack (~> 1.0) nenv (~> 0.1) notiffany (~> 0.0) pry (>= 0.9.12) shellany (~> 0.0) thor (>= 0.18.1) guard-compat (1.2.1) guard-minitest (2.4.4) guard-compat (~> 1.2) minitest (>= 3.0) hashie (3.5.6) http-cookie (1.0.3) domain_name (~> 0.5) http_parser.rb (0.6.0) i18n (0.8.6) jbuilder (2.4.1) activesupport (>= 3.0.0, < 5.1) multi_json (~> 1.2) jquery-rails (4.1.1) rails-dom-testing (>= 1, < 3) railties (>= 4.2.0) thor (>= 0.14, < 2.0) jquery-ui-rails (5.0.5) railties (>= 3.2.16) jwt (1.5.6) kgio (2.11.0) libv8 (3.16.14.19) listen (3.1.5) rb-fsevent (~> 0.9, >= 0.9.4) rb-inotify (~> 0.9, >= 0.9.7) ruby_dep (~> 1.2) loofah (2.0.3) nokogiri (>= 1.5.9) lumberjack (1.0.12) mail (2.6.6) mime-types (>= 1.16, < 4) method_source (0.8.2) mime-types (3.1) mime-types-data (~> 3.2015) mime-types-data (3.2016.0521) mimemagic (0.3.2) mini_portile2 (2.2.0) minitest (5.10.2) minitest-reporters (1.1.9) ansi builder minitest (>= 5.0) ruby-progressbar multi_json (1.12.1) multi_xml (0.6.0) multipart-post (2.0.0) nenv (0.3.0) net-scp (1.2.1) net-ssh (>= 2.6.5) net-ssh (4.1.0) netrc (0.11.0) nio4r (2.1.0) nokogiri (1.8.0) mini_portile2 (~> 2.2.0) notiffany (0.1.1) nenv (~> 0.1) shellany (~> 0.0) oauth (0.5.3) oauth2 (1.4.0) faraday (>= 0.8, < 0.13) jwt (~> 1.0) multi_json (~> 1.3) multi_xml (~> 0.5) rack (>= 1.2, < 3) omniauth (1.6.1) hashie (>= 3.4.6, < 3.6.0) rack (>= 1.6.2, < 3) omniauth-facebook (4.0.0) omniauth-oauth2 (~> 1.2) omniauth-google-oauth2 (0.5.0) jwt (~> 1.5) multi_json (~> 1.3) omniauth (>= 1.1.1) omniauth-oauth2 (>= 1.3.1) omniauth-oauth (1.1.0) oauth omniauth (~> 1.0) omniauth-oauth2 (1.4.0) oauth2 (~> 1.0) omniauth (~> 1.2) omniauth-twitter (1.4.0) omniauth-oauth (~> 1.1) rack orm_adapter (0.5.0) paperclip (5.1.0) activemodel (>= 4.2.0) activesupport (>= 4.2.0) cocaine (~> 0.5.5) mime-types mimemagic (~> 0.3.0) payjp (0.0.5) rest-client (~> 2.0) pg (0.18.4) polyamorous (1.3.1) activerecord (>= 3.0) private_pub (1.0.3) faye pry (0.10.4) coderay (~> 1.1.0) method_source (~> 0.8.1) slop (~> 3.4) public_suffix (2.0.5) puma (3.4.0) rack (2.0.3) rack-mini-profiler (0.10.5) rack (>= 1.2.0) rack-test (0.6.3) rack (>= 1.0) rails (5.0.3) actioncable (= 5.0.3) actionmailer (= 5.0.3) actionpack (= 5.0.3) actionview (= 5.0.3) activejob (= 5.0.3) activemodel (= 5.0.3) activerecord (= 5.0.3) activesupport (= 5.0.3) bundler (>= 1.3.0, < 2.0) railties (= 5.0.3) sprockets-rails (>= 2.0.0) rails-controller-testing (0.1.1) actionpack (~> 5.x) actionview (~> 5.x) activesupport (~> 5.x) rails-dom-testing (2.0.3) activesupport (>= 4.2.0) nokogiri (>= 1.6) rails-html-sanitizer (1.0.3) loofah (~> 2.0) rails-i18n (5.0.4) i18n (~> 0.7) railties (~> 5.0) rails_12factor (0.0.3) rails_serve_static_assets rails_stdout_logging rails_serve_static_assets (0.0.5) rails_stdout_logging (0.0.5) railties (5.0.3) actionpack (= 5.0.3) activesupport (= 5.0.3) method_source rake (>= 0.8.7) thor (>= 0.18.1, < 2.0) raindrops (0.18.0) rake (12.0.0) ransack (1.8.3) actionpack (>= 3.0) activerecord (>= 3.0) activesupport (>= 3.0) i18n polyamorous (~> 1.3) rb-fsevent (0.10.2) rb-inotify (0.9.10) ffi (>= 0.5.0, < 2) rb-readline (0.5.4) ref (2.0.0) responders (2.4.0) actionpack (>= 4.2.0, < 5.3) railties (>= 4.2.0, < 5.3) rest-client (2.0.2) http-cookie (>= 1.0.2, < 2.0) mime-types (>= 1.16, < 4.0) netrc (~> 0.8) rmagick (2.16.0) ruby-progressbar (1.8.1) ruby_dep (1.5.0) sass (3.5.1) sass-listen (~> 4.0.0) sass-listen (4.0.0) rb-fsevent (~> 0.9, >= 0.9.4) rb-inotify (~> 0.9, >= 0.9.7) sass-rails (5.0.6) railties (>= 4.0.0, < 6) sass (~> 3.1) sprockets (>= 2.8, < 4.0) sprockets-rails (>= 2.0, < 4.0) tilt (>= 1.1, < 3) shellany (0.0.1) slop (3.6.0) spring (1.7.2) spring-watcher-listen (2.0.0) listen (>= 2.7, < 4.0) spring (~> 1.2) sprockets (3.7.1) concurrent-ruby (~> 1.0) rack (> 1, < 3) sprockets-rails (3.2.0) actionpack (>= 4.0) activesupport (>= 4.0) sprockets (>= 3.0.0) sqlite3 (1.3.13) sshkit (1.14.0) net-scp (>= 1.1.2) net-ssh (>= 2.8.0) therubyracer (0.12.3) libv8 (~> 3.16.14.15) ref thin (1.7.2) daemons (~> 1.0, >= 1.0.9) eventmachine (~> 1.0, >= 1.0.4) rack (>= 1, < 3) thor (0.19.4) thread_safe (0.3.6) tilt (2.0.7) toastr-rails (1.0.3) railties (>= 3.1.0) turbolinks (5.0.1) turbolinks-source (~> 5) turbolinks-source (5.0.3) tzinfo (1.2.3) thread_safe (~> 0.1) uglifier (3.0.0) execjs (>= 0.3.0, < 3) unf (0.1.4) unf_ext unf_ext (0.0.7.4) unicorn (5.3.0) kgio (~> 2.6) raindrops (~> 0.7) warden (1.2.7) rack (>= 1.0) web-console (3.1.1) activemodel (>= 4.2) debug_inspector railties (>= 4.2) websocket-driver (0.6.5) websocket-extensions (>= 0.1.0) websocket-extensions (0.1.2) will_paginate (3.1.0)PLATFORMS rubyDEPENDENCIES bootstrap-sass (~> 3.3.6) bootstrap-will_paginate (= 0.0.10) capistrano (~> 3.6) capistrano-bundler capistrano-passenger capistrano-rails (~> 1.3) capistrano-rbenv capistrano-safe-deploy-to capistrano3-unicorn carrierwave coffee-rails (= 4.2.1) devise font-awesome-rails font-awesome-sass geocoder guard (= 2.13.0) guard-minitest (= 2.4.4) jbuilder (= 2.4.1) jquery-rails (= 4.1.1) jquery-ui-rails (= 5.0.5) listen (~> 3.1.5) minitest-reporters (= 1.1.9) omniauth omniauth-facebook omniauth-google-oauth2 omniauth-twitter paperclip payjp pg (= 0.18.4) private_pub puma (= 3.4.0) rack-mini-profiler rails (= 5.0.3) rails-controller-testing (= 0.1.1) rails-i18n rails_12factor ransack rb-readline rmagick sass-rails (>= 3.2) spring (= 1.7.2) spring-watcher-listen (= 2.0.0) sqlite3 (= 1.3.13) therubyracer thin toastr-rails turbolinks (= 5.0.1) uglifier (= 3.0.0) unicorn web-console (= 3.1.1) will_paginate (= 3.1.0)BUNDLED WITH 1.15.1 require 'capistrano/setup'require 'capistrano/deploy'require ""capistrano/scm/git""install_plugin Capistrano::SCM::Gitrequire 'capistrano/rbenv'set :rbenv_type, :userset :rbenv_ruby, '2.4.1'require 'capistrano/bundler'require 'capistrano3/unicorn'require 'capistrano/rails'require 'capistrano/rails/assets'require 'capistrano/rails/migrations'require 'capistrano/safe_deploy_to'Dir.glob('lib/capistrano/tasks/*.cap').each { |r| import r }","Gems missing after deployment (Ruby, Ruby on Rails, Capistrano)"
Can't dup NilClass onr rails rake with assets:precompile," When I try to precompile my assets I get the following error. This is the trace with the full output: So unfortunately I can't figure out where the error is pointing to as none of the code is my stuff and mainly the trace consists of code from the default gems. The one thing that I can see that I have added in there is the bootstrap gem, but the same thing happens even if I take that out. <code>  RAILS_ENV=production bundle exec rake assets:precompile --trace** Invoke assets:precompile (first_time)** Invoke assets:environment (first_time)** Execute assets:environment** Invoke environment (first_time)** Execute environmentrake aborted!TypeError: can't dup NilClass/var/lib/gems/2.3.0/gems/redis-activesupport-5.0.3/lib/active_support/cache/redis_store.rb:38:in `dup'/var/lib/gems/2.3.0/gems/redis-activesupport-5.0.3/lib/active_support/cache/redis_store.rb:38:in `map'/var/lib/gems/2.3.0/gems/redis-activesupport-5.0.3/lib/active_support/cache/redis_store.rb:38:in `initialize'/var/lib/gems/2.3.0/gems/activesupport-5.0.5/lib/active_support/cache.rb:60:in `new'/var/lib/gems/2.3.0/gems/activesupport-5.0.5/lib/active_support/cache.rb:60:in `lookup_store'/var/lib/gems/2.3.0/gems/railties-5.0.5/lib/rails/application/bootstrap.rb:64:in `block in <module:Bootstrap>'/var/lib/gems/2.3.0/gems/railties-5.0.5/lib/rails/initializable.rb:30:in `instance_exec'/var/lib/gems/2.3.0/gems/railties-5.0.5/lib/rails/initializable.rb:30:in `run'/var/lib/gems/2.3.0/gems/railties-5.0.5/lib/rails/initializable.rb:55:in `block in run_initializers'/usr/lib/ruby/2.3.0/tsort.rb:228:in `block in tsort_each'/usr/lib/ruby/2.3.0/tsort.rb:350:in `block (2 levels) in each_strongly_connected_component'/usr/lib/ruby/2.3.0/tsort.rb:431:in `each_strongly_connected_component_from'/usr/lib/ruby/2.3.0/tsort.rb:349:in `block in each_strongly_connected_component'/usr/lib/ruby/2.3.0/tsort.rb:347:in `each'/usr/lib/ruby/2.3.0/tsort.rb:347:in `call'/usr/lib/ruby/2.3.0/tsort.rb:347:in `each_strongly_connected_component'/usr/lib/ruby/2.3.0/tsort.rb:226:in `tsort_each'/usr/lib/ruby/2.3.0/tsort.rb:205:in `tsort_each'/var/lib/gems/2.3.0/gems/railties-5.0.5/lib/rails/initializable.rb:54:in `run_initializers'/var/lib/gems/2.3.0/gems/railties-5.0.5/lib/rails/application.rb:352:in `initialize!'/home/alex/Dev/livingrecipe/config/environment.rb:5:in `<top (required)>'/var/lib/gems/2.3.0/gems/activesupport-5.0.5/lib/active_support/dependencies.rb:293:in `require'/var/lib/gems/2.3.0/gems/activesupport-5.0.5/lib/active_support/dependencies.rb:293:in `block in require'/var/lib/gems/2.3.0/gems/activesupport-5.0.5/lib/active_support/dependencies.rb:259:in `load_dependency'/var/lib/gems/2.3.0/gems/activesupport-5.0.5/lib/active_support/dependencies.rb:293:in `require'/var/lib/gems/2.3.0/gems/railties-5.0.5/lib/rails/application.rb:328:in `require_environment!'/var/lib/gems/2.3.0/gems/railties-5.0.5/lib/rails/application.rb:448:in `block in run_tasks_blocks'/var/lib/gems/2.3.0/gems/rake-12.0.0/lib/rake/task.rb:250:in `block in execute'/var/lib/gems/2.3.0/gems/rake-12.0.0/lib/rake/task.rb:250:in `each'/var/lib/gems/2.3.0/gems/rake-12.0.0/lib/rake/task.rb:250:in `execute'/var/lib/gems/2.3.0/gems/rake-12.0.0/lib/rake/task.rb:194:in `block in invoke_with_call_chain'/usr/lib/ruby/2.3.0/monitor.rb:214:in `mon_synchronize'/var/lib/gems/2.3.0/gems/rake-12.0.0/lib/rake/task.rb:187:in `invoke_with_call_chain'/var/lib/gems/2.3.0/gems/rake-12.0.0/lib/rake/task.rb:180:in `invoke'/var/lib/gems/2.3.0/gems/sprockets-rails-3.2.0/lib/sprockets/rails/task.rb:62:in `block (2 levels) in define'/var/lib/gems/2.3.0/gems/rake-12.0.0/lib/rake/task.rb:250:in `block in execute'/var/lib/gems/2.3.0/gems/rake-12.0.0/lib/rake/task.rb:250:in `each'/var/lib/gems/2.3.0/gems/rake-12.0.0/lib/rake/task.rb:250:in `execute'/var/lib/gems/2.3.0/gems/rake-12.0.0/lib/rake/task.rb:194:in `block in invoke_with_call_chain'/usr/lib/ruby/2.3.0/monitor.rb:214:in `mon_synchronize'/var/lib/gems/2.3.0/gems/rake-12.0.0/lib/rake/task.rb:187:in `invoke_with_call_chain'/var/lib/gems/2.3.0/gems/rake-12.0.0/lib/rake/task.rb:216:in `block in invoke_prerequisites'/var/lib/gems/2.3.0/gems/rake-12.0.0/lib/rake/task.rb:214:in `each'/var/lib/gems/2.3.0/gems/rake-12.0.0/lib/rake/task.rb:214:in `invoke_prerequisites'/var/lib/gems/2.3.0/gems/rake-12.0.0/lib/rake/task.rb:193:in `block in invoke_with_call_chain'/usr/lib/ruby/2.3.0/monitor.rb:214:in `mon_synchronize'/var/lib/gems/2.3.0/gems/rake-12.0.0/lib/rake/task.rb:187:in `invoke_with_call_chain'/var/lib/gems/2.3.0/gems/rake-12.0.0/lib/rake/task.rb:180:in `invoke'/var/lib/gems/2.3.0/gems/rake-12.0.0/lib/rake/application.rb:152:in `invoke_task'/var/lib/gems/2.3.0/gems/rake-12.0.0/lib/rake/application.rb:108:in `block (2 levels) in top_level'/var/lib/gems/2.3.0/gems/rake-12.0.0/lib/rake/application.rb:108:in `each'/var/lib/gems/2.3.0/gems/rake-12.0.0/lib/rake/application.rb:108:in `block in top_level'/var/lib/gems/2.3.0/gems/rake-12.0.0/lib/rake/application.rb:117:in `run_with_threads'/var/lib/gems/2.3.0/gems/rake-12.0.0/lib/rake/application.rb:102:in `top_level'/var/lib/gems/2.3.0/gems/rake-12.0.0/lib/rake/application.rb:80:in `block in run'/var/lib/gems/2.3.0/gems/rake-12.0.0/lib/rake/application.rb:178:in `standard_exception_handling'/var/lib/gems/2.3.0/gems/rake-12.0.0/lib/rake/application.rb:77:in `run'/var/lib/gems/2.3.0/gems/rake-12.0.0/exe/rake:27:in `<top (required)>'/usr/local/bin/rake:23:in `load'/usr/local/bin/rake:23:in `<main>'",Can't dup NilClass on rails rake with assets:precompile
Autoload files in directories and sub directories with rspec," I am testing a web application with ruby, rspec, capybara and selenium and i ran into an uninitialized constant ActiveAdminLoginPage Exception that i don't know how to solve.In spec_helper.rb i am requiring the following: I have 2 classes inherits from unfortunately the sub class is loaded before the parent class.How do i create a autoload command dynamically from all filenames in a directory? I would like to replace this command: Dir[File.join(Dir.pwd, 'spec/page_objects/**/*.rb')].each { |f| require f } with a autoload command. <code>  Dir[File.join(Dir.pwd, 'spec/page_objects/**/*.rb')].each { |f| require f } spec/page_objects/products/active_admin_login_page.rb module Products class ActiveAdminLoginPage < ::ActiveAdminLoginPage ... endend spec/page_objects/active_admin_login_page.rb",Dynamically create autoload command from filenames in Ruby
Move x element to the end of an array - RUBY," I'm trying to find a method to take a particular relation and move it to the end of the array. Basically, I have a current_account and I want to take this account and move it to the end of the account relationship array so that it will display last when I iteration over the relationships. I want to make a scope and use SQL if possible, here is my attempt and I haven't really gotten anywhere.HTML This current return a list of sorted by created_at accounts. I don't want it to be sorted by created at but the current_account to be at the bottom so I make a scope called current_sort but I'm not sure what to do here.CURRENT_SORT SCOPE ON ACCOUNT I want this scope to return the passed in account last in the association array. How can I do this with SQL or Ruby?  <code>  <% current_user.accounts.current_sort(current_account).each do |account| %> <li><%= link_to account.name, switch_account_accounts_path(account_id: account.id) %></li><% end %> scope :current_sort, lambda { |account| }",Move x element to the end of an array
Rails Dotenv multiline variables," I'm using dotenv. A Ruby gem to load environment variables from .env.Is it possible to have multiline variables in my .env file?e.g. ^ having the above just throws an error on that middle line, as if it's not part of the string and I'm trying to create an improperly formatted variable. <code>  SOMETHING_CERTIFICATE=""-----BEGIN CERTIFICATE-----JSDFALDAFSSKLABVCXZLV2314IH4IHDFG9AYDF9DSSDF82QWEIWFHDSSD8SADF0=-----END CERTIFICATE-----""",Dotenv multiline variables
cocoapods issue in High Sierra?," I updated my macOS to High Sierra, Now installing dependencies through cocoapods in my iOS application. But I face the following error. Than i tried any help would be greatly appreciated.  <code>  XXXXXXXXX:MyProject CompanyName$ pod update -bash: /usr/local/bin/pod: /System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/bin/ruby: bad interpreter: No such file or directory Zubair-mac-mini:~ sdsol$ gem install cocoapods ERROR: While executing gem ... (Gem::FilePermissionError)You don't have write permissions for the /Library/Ruby/Gems/2.3.0 directory.Zubair-mac-mini:~ sdsol$",cocoapods permission issue in High Sierra?
production.log is not updating in rails 4 app," My app is breaking when customer place an order. I'm really getting desperate since I need my production.log to figure out what is breaking the app!! I logged into the :~/mystore/current/log$ nano production.logAnd it seems like the production.log haven't been updated since 23/5 2017.here are the last lines from the production.log Now I can't see why my app is breaking today. Which is strange because I've always been able to monitor the performance through the production.logthis is the settings in the production.rb In the deploy.rb I'm sim-linking, don't know if it has any thing to do with this. The app is running on Nginx and was deployed via Capistrano Have anyone had this problem? Can someone help me?Or maybe more important at the moment: Is there another way to see what is Breaking my app? <code>  I, [2017-05-23T11:12:35.067624 #1060] INFO -- : Completed 404 Not Found in 27ms (ActiveRecord: 3.0ms)F, [2017-05-23T11:12:35.069957 #1060] FATAL -- :ActiveRecord::RecordNotFound (Couldn't find Label with 'id'=10): app/controllers/labels_controller.rb:21:in `set_label' config.log_level = :info config.logger = ActiveSupport::Logger.new('/tmp/foo.log') config.logger.info ""SMTP_ADDR: #{ENV[""SMTP_ADDRESS""].inspect}"" config.log_formatter = ::Logger::Formatter.new set :linked_files, %w{config/database.yml config/secrets.yml config/application.yml}set :linked_dirs, %w{log tmp/pids tmp/cache tmp/sockets vendor/bundle public/system}","Rails 4 app is not writing to production.log , running on Nginx, ubuntu and deployed via capistrano"
"production.log is not updating in rails 4 app running on Nginx, ubuntu and deployed via capistrano."," My app is breaking when customer place an order. I'm really getting desperate since I need my production.log to figure out what is breaking the app!! I logged into the :~/mystore/current/log$ nano production.logAnd it seems like the production.log haven't been updated since 23/5 2017.here are the last lines from the production.log Now I can't see why my app is breaking today. Which is strange because I've always been able to monitor the performance through the production.logthis is the settings in the production.rb In the deploy.rb I'm sim-linking, don't know if it has any thing to do with this. The app is running on Nginx and was deployed via Capistrano Have anyone had this problem? Can someone help me?Or maybe more important at the moment: Is there another way to see what is Breaking my app? <code>  I, [2017-05-23T11:12:35.067624 #1060] INFO -- : Completed 404 Not Found in 27ms (ActiveRecord: 3.0ms)F, [2017-05-23T11:12:35.069957 #1060] FATAL -- :ActiveRecord::RecordNotFound (Couldn't find Label with 'id'=10): app/controllers/labels_controller.rb:21:in `set_label' config.log_level = :info config.logger = ActiveSupport::Logger.new('/tmp/foo.log') config.logger.info ""SMTP_ADDR: #{ENV[""SMTP_ADDRESS""].inspect}"" config.log_formatter = ::Logger::Formatter.new set :linked_files, %w{config/database.yml config/secrets.yml config/application.yml}set :linked_dirs, %w{log tmp/pids tmp/cache tmp/sockets vendor/bundle public/system}","Rails 4 app is not writing to production.log , running on Nginx, ubuntu and deployed via capistrano"
"production.log is not updating in rails 4 app running on Nginx, ubuntu and deployed via capistrano"," My app is breaking when customer place an order. I'm really getting desperate since I need my production.log to figure out what is breaking the app!! I logged into the :~/mystore/current/log$ nano production.logAnd it seems like the production.log haven't been updated since 23/5 2017.here are the last lines from the production.log Now I can't see why my app is breaking today. Which is strange because I've always been able to monitor the performance through the production.logthis is the settings in the production.rb In the deploy.rb I'm sim-linking, don't know if it has any thing to do with this. The app is running on Nginx and was deployed via Capistrano Have anyone had this problem? Can someone help me?Or maybe more important at the moment: Is there another way to see what is Breaking my app? <code>  I, [2017-05-23T11:12:35.067624 #1060] INFO -- : Completed 404 Not Found in 27ms (ActiveRecord: 3.0ms)F, [2017-05-23T11:12:35.069957 #1060] FATAL -- :ActiveRecord::RecordNotFound (Couldn't find Label with 'id'=10): app/controllers/labels_controller.rb:21:in `set_label' config.log_level = :info config.logger = ActiveSupport::Logger.new('/tmp/foo.log') config.logger.info ""SMTP_ADDR: #{ENV[""SMTP_ADDRESS""].inspect}"" config.log_formatter = ::Logger::Formatter.new set :linked_files, %w{config/database.yml config/secrets.yml config/application.yml}set :linked_dirs, %w{log tmp/pids tmp/cache tmp/sockets vendor/bundle public/system}","Rails 4 app is not writing to production.log , running on Nginx, ubuntu and deployed via capistrano"
"production.log haven't been updated since 23/5 2017 in rails 4 app running on Nginx, ubuntu and deployed via capistrano"," My app is breaking when customer place an order. I'm really getting desperate since I need my production.log to figure out what is breaking the app!! I logged into the :~/mystore/current/log$ nano production.logAnd it seems like the production.log haven't been updated since 23/5 2017.here are the last lines from the production.log Now I can't see why my app is breaking today. Which is strange because I've always been able to monitor the performance through the production.logthis is the settings in the production.rb In the deploy.rb I'm sim-linking, don't know if it has any thing to do with this. The app is running on Nginx and was deployed via Capistrano Have anyone had this problem? Can someone help me?Or maybe more important at the moment: Is there another way to see what is Breaking my app? <code>  I, [2017-05-23T11:12:35.067624 #1060] INFO -- : Completed 404 Not Found in 27ms (ActiveRecord: 3.0ms)F, [2017-05-23T11:12:35.069957 #1060] FATAL -- :ActiveRecord::RecordNotFound (Couldn't find Label with 'id'=10): app/controllers/labels_controller.rb:21:in `set_label' config.log_level = :info config.logger = ActiveSupport::Logger.new('/tmp/foo.log') config.logger.info ""SMTP_ADDR: #{ENV[""SMTP_ADDRESS""].inspect}"" config.log_formatter = ::Logger::Formatter.new set :linked_files, %w{config/database.yml config/secrets.yml config/application.yml}set :linked_dirs, %w{log tmp/pids tmp/cache tmp/sockets vendor/bundle public/system}","Rails 4 app is not writing to production.log , running on Nginx, ubuntu and deployed via capistrano"
What is the difference between keys.each and each_key? Ruby," When iterating through a hash like below: Rubocop proclaims I should use: instead of: What is the ""key"" difference between keys.each and each_key? <code>  hash.keys.each do |key| process_key(key)end each_key keys.each",What is the difference between 'keys.each' and 'each_key'?
Using ActionCable with different identification methods," I develop a Ruby on Rails 5.1 application using ActionCable. User authentification via Devise works fine for several channels. Now, I want to add a second type of channels which does not require any user authentification. More precisely, I would like to enable anonymous website visitors to chat with support staff.My current implementation of ApplicationCable::Connection for authenticated users looks like this: Anonymous users will be identified by some random UUID (SecureRandom.urlsafe_base64).Question:How do I best add this new type of channels? Could I add a boolean flag require_authentification somewhere, override it in my inherited channel class for anonymous communication, and switch the identification method in Connection depending on this attribute? Or would I rather have to implement a completely new module, say AnonymousApplicationCable? <code>  # app/channels/application_cable/connection.rbmodule ApplicationCable class Connection < ActionCable::Connection::Base identified_by :current_user def connect self.current_user = find_verified_user end protected def find_verified_user user = User.find_by(id: cookies.signed['user.id']) return user if user fail 'User needs to be authenticated.' end endend",Using ActionCable with multiple identification methods
How to split an array between two adjacent elements that satisfy a condition?," Let's say I have an array of numbers, e.g. I would like to split the array between the first point where a smaller number follows a larger one. My output should be: I've tried slice_when and it comes quite close: But it also splits between 13 and 7, so I have to join the remaining arrays: which looks a bit cumbersome. It also seems inefficient to keep comparing items when the match was already found.I am looking for a general solution based on an arbitrary condition. Having numeric elements and i > j is just an example.Is there a better way to approach this? <code>  ary = [1, 3, 6, 7, 10, 9, 11, 13, 7, 24] [[1, 3, 6, 7, 10], [9, 11, 13, 7, 24]] ary.slice_when { |i, j| i > j }.to_a#=> [[1, 3, 6, 7, 10], [9, 11, 13], [7, 24]] first, *rest = ary.slice_when { |i, j| i > j }.to_a[first, rest.flatten(1)]#=> [[1, 3, 6, 7, 10], [9, 11, 13, 7, 24]]",How to split an array by a condition on adjacent elements into a limited number of partitions
Rails bundle error on new project," I installed ruby 2.4.2p198 (2017-09-14 revision 59899) [x86_64-darwin16] versions using rbenv, and rails with the following version Rails 5.1.4after creating a new app via rails new my-appI am getting the followig error when I try to run bundleThe dependency tzinfo-data (>= 0) will be unused by any of the platforms Bundler is installing for. Bundler is installing for ruby but the dependency is only for x86-mingw32, x86-mswin32, x64-mingw32, java. To add those platforms to the bundle, run bundle lock --add-platform x86-mingw32 x86-mswin32 x64-mingw32 java.There was an error while trying to write to/Users/my-user/.bundle/cache/compact_index/rubygems.org.443.29b0360b937aa4d161703e6160654e47/versions.It is likely that you need to grant write permissions for that path.``` <code> ","Bundler warning when running ""bundle"" - Ruby on Rails"
"could not translate host name ""postgres"" to address: Name or service not known (PG::ConnectionBad)"," I'm working on a Rails 4.2.3 project with ruby 2.2.2 (Running ubuntu 16.04). It was working ok but after revisiting it after a while I can't serve. I've tried searching but all situations don't seem to be of help.Here's the error log: The only issue seems to be connecting to postgres.PS. I've already tried running unset DATABASE_URL if anyone is feeling compelled to suggest that.Extra info: <code>  bigzoo@bigzoo:~/Documents/projects/proj$ rs=> Booting Puma=> Rails 4.2.3 application starting in development on http://localhost:3000=> Run `rails server -h` for more startup options=> Ctrl-C to shutdown serverExiting/home/bigzoo/Documents/projects/proj/.bundle/ruby/2.2.0/gems/activerecord-4.2.3/lib/active_record/connection_adapters/postgresql_adapter.rb:655:in `initialize': could not translate host name ""postgres"" to address: Name or service not known (PG::ConnectionBad) from /home/bigzoo/Documents/projects/proj/.bundle/ruby/2.2.0/gems/activerecord-4.2.3/lib/active_record/connection_adapters/postgresql_adapter.rb:655:in `new' from /home/bigzoo/Documents/projects/proj/.bundle/ruby/2.2.0/gems/activerecord-4.2.3/lib/active_record/connection_adapters/postgresql_adapter.rb:655:in `connect' from /home/bigzoo/Documents/projects/proj/.bundle/ruby/2.2.0/gems/activerecord-4.2.3/lib/active_record/connection_adapters/postgresql_adapter.rb:242:in `initialize' from /home/bigzoo/Documents/projects/proj/.bundle/ruby/2.2.0/gems/activerecord-4.2.3/lib/active_record/connection_adapters/postgresql_adapter.rb:44:in `new' from /home/bigzoo/Documents/projects/proj/.bundle/ruby/2.2.0/gems/activerecord-4.2.3/lib/active_record/connection_adapters/postgresql_adapter.rb:44:in `postgresql_connection' from /home/bigzoo/Documents/projects/proj/.bundle/ruby/2.2.0/gems/activerecord-4.2.3/lib/active_record/connection_adapters/abstract/connection_pool.rb:438:in `new_connection' from /home/bigzoo/Documents/projects/proj/.bundle/ruby/2.2.0/gems/activerecord-4.2.3/lib/active_record/connection_adapters/abstract/connection_pool.rb:448:in `checkout_new_connection' from /home/bigzoo/Documents/projects/proj/.bundle/ruby/2.2.0/gems/activerecord-4.2.3/lib/active_record/connection_adapters/abstract/connection_pool.rb:422:in `acquire_connection' from /home/bigzoo/Documents/projects/proj/.bundle/ruby/2.2.0/gems/activerecord-4.2.3/lib/active_record/connection_adapters/abstract/connection_pool.rb:349:in `block in checkout' from /home/bigzoo/.rbenv/versions/2.2.2/lib/ruby/2.2.0/monitor.rb:211:in `mon_synchronize' from /home/bigzoo/Documents/projects/proj/.bundle/ruby/2.2.0/gems/activerecord-4.2.3/lib/active_record/connection_adapters/abstract/connection_pool.rb:348:in `checkout' from /home/bigzoo/Documents/projects/proj/.bundle/ruby/2.2.0/gems/activerecord-4.2.3/lib/active_record/connection_adapters/abstract/connection_pool.rb:263:in `block in connection' from /home/bigzoo/.rbenv/versions/2.2.2/lib/ruby/2.2.0/monitor.rb:211:in `mon_synchronize' from /home/bigzoo/Documents/projects/proj/.bundle/ruby/2.2.0/gems/activerecord-4.2.3/lib/active_record/connection_adapters/abstract/connection_pool.rb:262:in `connection' from /home/bigzoo/Documents/projects/proj/.bundle/ruby/2.2.0/gems/activerecord-4.2.3/lib/active_record/connection_adapters/abstract/connection_pool.rb:571:in `retrieve_connection' from /home/bigzoo/Documents/projects/proj/.bundle/ruby/2.2.0/gems/activerecord-4.2.3/lib/active_record/connection_handling.rb:113:in `retrieve_connection' from /home/bigzoo/Documents/projects/proj/.bundle/ruby/2.2.0/gems/activerecord-4.2.3/lib/active_record/connection_handling.rb:87:in `connection' from /home/bigzoo/Documents/projects/proj/.bundle/ruby/2.2.0/gems/activerecord-4.2.3/lib/active_record/querying.rb:39:in `find_by_sql' from /home/bigzoo/Documents/projects/proj/.bundle/ruby/2.2.0/gems/activerecord-4.2.3/lib/active_record/relation.rb:638:in `exec_queries' from /home/bigzoo/Documents/projects/proj/.bundle/ruby/2.2.0/gems/activerecord-4.2.3/lib/active_record/relation.rb:514:in `load' from /home/bigzoo/Documents/projects/proj/.bundle/ruby/2.2.0/gems/activerecord-4.2.3/lib/active_record/relation.rb:243:in `to_a' from /home/bigzoo/Documents/projects/proj/.bundle/ruby/2.2.0/gems/activerecord-4.2.3/lib/active_record/relation/delegation.rb:46:in `map' from /home/bigzoo/Documents/projects/proj/app/admin/product.rb:62:in `block in <top (required)>' from /home/bigzoo/Documents/projects/proj/.bundle/ruby/2.2.0/bundler/gems/activeadmin-21f76b1faf65/lib/active_admin/dsl.rb:15:in `instance_exec' from /home/bigzoo/Documents/projects/proj/.bundle/ruby/2.2.0/bundler/gems/activeadmin-21f76b1faf65/lib/active_admin/dsl.rb:15:in `run_registration_block' from /home/bigzoo/Documents/projects/proj/.bundle/ruby/2.2.0/bundler/gems/activeadmin-21f76b1faf65/lib/active_admin/namespace.rb:223:in `parse_registration_block' from /home/bigzoo/Documents/projects/proj/.bundle/ruby/2.2.0/bundler/gems/activeadmin-21f76b1faf65/lib/active_admin/namespace.rb:48:in `register' from /home/bigzoo/Documents/projects/proj/.bundle/ruby/2.2.0/bundler/gems/activeadmin-21f76b1faf65/lib/active_admin/application.rb:154:in `register' from /home/bigzoo/Documents/projects/proj/.bundle/ruby/2.2.0/bundler/gems/activeadmin-21f76b1faf65/lib/active_admin.rb:75:in `register' from /home/bigzoo/Documents/projects/proj/app/admin/product.rb:1:in `<top (required)>' from /home/bigzoo/Documents/projects/proj/.bundle/ruby/2.2.0/gems/activesupport-4.2.3/lib/active_support/dependencies.rb:268:in `load' from /home/bigzoo/Documents/projects/proj/.bundle/ruby/2.2.0/gems/activesupport-4.2.3/lib/active_support/dependencies.rb:268:in `block in load' from /home/bigzoo/Documents/projects/proj/.bundle/ruby/2.2.0/gems/activesupport-4.2.3/lib/active_support/dependencies.rb:240:in `load_dependency' from /home/bigzoo/Documents/projects/proj/.bundle/ruby/2.2.0/gems/activesupport-4.2.3/lib/active_support/dependencies.rb:268:in `load' from /home/bigzoo/Documents/projects/proj/.bundle/ruby/2.2.0/bundler/gems/activeadmin-21f76b1faf65/lib/active_admin/application.rb:212:in `block in load' from /home/bigzoo/Documents/projects/proj/.bundle/ruby/2.2.0/bundler/gems/activeadmin-21f76b1faf65/lib/active_admin/error.rb:41:in `capture' from /home/bigzoo/Documents/projects/proj/.bundle/ruby/2.2.0/bundler/gems/activeadmin-21f76b1faf65/lib/active_admin/application.rb:212:in `load' from /home/bigzoo/Documents/projects/proj/.bundle/ruby/2.2.0/bundler/gems/activeadmin-21f76b1faf65/lib/active_admin/application.rb:204:in `block in load!' from /home/bigzoo/Documents/projects/proj/.bundle/ruby/2.2.0/bundler/gems/activeadmin-21f76b1faf65/lib/active_admin/application.rb:204:in `each' from /home/bigzoo/Documents/projects/proj/.bundle/ruby/2.2.0/bundler/gems/activeadmin-21f76b1faf65/lib/active_admin/application.rb:204:in `load!' from /home/bigzoo/Documents/projects/proj/.bundle/ruby/2.2.0/bundler/gems/activeadmin-21f76b1faf65/lib/active_admin/application.rb:226:in `routes' from /home/bigzoo/Documents/projects/proj/.bundle/ruby/2.2.0/bundler/gems/activeadmin-21f76b1faf65/lib/active_admin.rb:79:in `routes' from /home/bigzoo/Documents/projects/proj/config/routes.rb:20:in `block in <top (required)>' from /home/bigzoo/Documents/projects/proj/.bundle/ruby/2.2.0/gems/actionpack-4.2.3/lib/action_dispatch/routing/route_set.rb:434:in `instance_exec' from /home/bigzoo/Documents/projects/proj/.bundle/ruby/2.2.0/gems/actionpack-4.2.3/lib/action_dispatch/routing/route_set.rb:434:in `eval_block' from /home/bigzoo/Documents/projects/proj/.bundle/ruby/2.2.0/gems/actionpack-4.2.3/lib/action_dispatch/routing/route_set.rb:412:in `draw' from /home/bigzoo/Documents/projects/proj/config/routes.rb:1:in `<top (required)>' from /home/bigzoo/Documents/projects/proj/.bundle/ruby/2.2.0/gems/activesupport-4.2.3/lib/active_support/dependencies.rb:268:in `load' from /home/bigzoo/Documents/projects/proj/.bundle/ruby/2.2.0/gems/activesupport-4.2.3/lib/active_support/dependencies.rb:268:in `block in load' from /home/bigzoo/Documents/projects/proj/.bundle/ruby/2.2.0/gems/activesupport-4.2.3/lib/active_support/dependencies.rb:240:in `load_dependency' from /home/bigzoo/Documents/projects/proj/.bundle/ruby/2.2.0/gems/activesupport-4.2.3/lib/active_support/dependencies.rb:268:in `load' from /home/bigzoo/Documents/projects/proj/.bundle/ruby/2.2.0/gems/railties-4.2.3/lib/rails/application/routes_reloader.rb:40:in `block in load_paths' from /home/bigzoo/Documents/projects/proj/.bundle/ruby/2.2.0/gems/railties-4.2.3/lib/rails/application/routes_reloader.rb:40:in `each' from /home/bigzoo/Documents/projects/proj/.bundle/ruby/2.2.0/gems/railties-4.2.3/lib/rails/application/routes_reloader.rb:40:in `load_paths' from /home/bigzoo/Documents/projects/proj/.bundle/ruby/2.2.0/gems/railties-4.2.3/lib/rails/application/routes_reloader.rb:16:in `reload!' from /home/bigzoo/Documents/projects/proj/.bundle/ruby/2.2.0/gems/railties-4.2.3/lib/rails/application/routes_reloader.rb:26:in `block in updater' from /home/bigzoo/Documents/projects/proj/.bundle/ruby/2.2.0/gems/activesupport-4.2.3/lib/active_support/file_update_checker.rb:75:in `call' from /home/bigzoo/Documents/projects/proj/.bundle/ruby/2.2.0/gems/activesupport-4.2.3/lib/active_support/file_update_checker.rb:75:in `execute' from /home/bigzoo/Documents/projects/proj/.bundle/ruby/2.2.0/gems/railties-4.2.3/lib/rails/application/routes_reloader.rb:27:in `updater' from /home/bigzoo/Documents/projects/proj/.bundle/ruby/2.2.0/gems/railties-4.2.3/lib/rails/application/routes_reloader.rb:7:in `execute_if_updated' from /home/bigzoo/Documents/projects/proj/.bundle/ruby/2.2.0/gems/railties-4.2.3/lib/rails/application/finisher.rb:69:in `block in <module:Finisher>' from /home/bigzoo/Documents/projects/proj/.bundle/ruby/2.2.0/gems/railties-4.2.3/lib/rails/initializable.rb:30:in `instance_exec' from /home/bigzoo/Documents/projects/proj/.bundle/ruby/2.2.0/gems/railties-4.2.3/lib/rails/initializable.rb:30:in `run' from /home/bigzoo/Documents/projects/proj/.bundle/ruby/2.2.0/gems/railties-4.2.3/lib/rails/initializable.rb:55:in `block in run_initializers' from /home/bigzoo/.rbenv/versions/2.2.2/lib/ruby/2.2.0/tsort.rb:226:in `block in tsort_each' from /home/bigzoo/.rbenv/versions/2.2.2/lib/ruby/2.2.0/tsort.rb:348:in `block (2 levels) in each_strongly_connected_component' from /home/bigzoo/.rbenv/versions/2.2.2/lib/ruby/2.2.0/tsort.rb:429:in `each_strongly_connected_component_from' from /home/bigzoo/.rbenv/versions/2.2.2/lib/ruby/2.2.0/tsort.rb:347:in `block in each_strongly_connected_component' from /home/bigzoo/.rbenv/versions/2.2.2/lib/ruby/2.2.0/tsort.rb:345:in `each' from /home/bigzoo/.rbenv/versions/2.2.2/lib/ruby/2.2.0/tsort.rb:345:in `call' from /home/bigzoo/.rbenv/versions/2.2.2/lib/ruby/2.2.0/tsort.rb:345:in `each_strongly_connected_component' from /home/bigzoo/.rbenv/versions/2.2.2/lib/ruby/2.2.0/tsort.rb:224:in `tsort_each' from /home/bigzoo/.rbenv/versions/2.2.2/lib/ruby/2.2.0/tsort.rb:203:in `tsort_each' from /home/bigzoo/Documents/projects/proj/.bundle/ruby/2.2.0/gems/railties-4.2.3/lib/rails/initializable.rb:54:in `run_initializers' from /home/bigzoo/Documents/projects/proj/.bundle/ruby/2.2.0/gems/railties-4.2.3/lib/rails/application.rb:352:in `initialize!' from /home/bigzoo/Documents/projects/proj/config/environment.rb:5:in `<top (required)>' from /home/bigzoo/Documents/projects/proj/.bundle/ruby/2.2.0/gems/activesupport-4.2.3/lib/active_support/dependencies.rb:274:in `require' from /home/bigzoo/Documents/projects/proj/.bundle/ruby/2.2.0/gems/activesupport-4.2.3/lib/active_support/dependencies.rb:274:in `block in require' from /home/bigzoo/Documents/projects/proj/.bundle/ruby/2.2.0/gems/activesupport-4.2.3/lib/active_support/dependencies.rb:240:in `load_dependency' from /home/bigzoo/Documents/projects/proj/.bundle/ruby/2.2.0/gems/activesupport-4.2.3/lib/active_support/dependencies.rb:274:in `require' from /home/bigzoo/Documents/projects/proj/config.ru:3:in `block in <main>' from /home/bigzoo/Documents/projects/proj/.bundle/ruby/2.2.0/gems/rack-1.6.5/lib/rack/builder.rb:55:in `instance_eval' from /home/bigzoo/Documents/projects/proj/.bundle/ruby/2.2.0/gems/rack-1.6.5/lib/rack/builder.rb:55:in `initialize' from /home/bigzoo/Documents/projects/proj/config.ru:in `new' from /home/bigzoo/Documents/projects/proj/config.ru:in `<main>' from /home/bigzoo/Documents/projects/proj/.bundle/ruby/2.2.0/gems/rack-1.6.5/lib/rack/builder.rb:49:in `eval' from /home/bigzoo/Documents/projects/proj/.bundle/ruby/2.2.0/gems/rack-1.6.5/lib/rack/builder.rb:49:in `new_from_string' from /home/bigzoo/Documents/projects/proj/.bundle/ruby/2.2.0/gems/rack-1.6.5/lib/rack/builder.rb:40:in `parse_file' from /home/bigzoo/Documents/projects/proj/.bundle/ruby/2.2.0/gems/rack-1.6.5/lib/rack/server.rb:299:in `build_app_and_options_from_config' from /home/bigzoo/Documents/projects/proj/.bundle/ruby/2.2.0/gems/rack-1.6.5/lib/rack/server.rb:208:in `app' from /home/bigzoo/Documents/projects/proj/.bundle/ruby/2.2.0/gems/railties-4.2.3/lib/rails/commands/server.rb:61:in `app' from /home/bigzoo/Documents/projects/proj/.bundle/ruby/2.2.0/gems/rack-1.6.5/lib/rack/server.rb:336:in `wrapped_app' from /home/bigzoo/Documents/projects/proj/.bundle/ruby/2.2.0/gems/railties-4.2.3/lib/rails/commands/server.rb:139:in `log_to_stdout' from /home/bigzoo/Documents/projects/proj/.bundle/ruby/2.2.0/gems/railties-4.2.3/lib/rails/commands/server.rb:78:in `start' from /home/bigzoo/Documents/projects/proj/.bundle/ruby/2.2.0/gems/railties-4.2.3/lib/rails/commands/commands_tasks.rb:80:in `block in server' from /home/bigzoo/Documents/projects/proj/.bundle/ruby/2.2.0/gems/railties-4.2.3/lib/rails/commands/commands_tasks.rb:75:in `tap' from /home/bigzoo/Documents/projects/proj/.bundle/ruby/2.2.0/gems/railties-4.2.3/lib/rails/commands/commands_tasks.rb:75:in `server' from /home/bigzoo/Documents/projects/proj/.bundle/ruby/2.2.0/gems/railties-4.2.3/lib/rails/commands/commands_tasks.rb:39:in `run_command!' from /home/bigzoo/Documents/projects/proj/.bundle/ruby/2.2.0/gems/railties-4.2.3/lib/rails/commands.rb:17:in `<top (required)>' from /home/bigzoo/Documents/projects/proj/bin/rails:8:in `require' from /home/bigzoo/Documents/projects/proj/bin/rails:8:in `<top (required)>' from /home/bigzoo/Documents/projects/proj/.bundle/ruby/2.2.0/gems/spring-1.3.6/lib/spring/client/rails.rb:28:in `load' from /home/bigzoo/Documents/projects/proj/.bundle/ruby/2.2.0/gems/spring-1.3.6/lib/spring/client/rails.rb:28:in `call' from /home/bigzoo/Documents/projects/proj/.bundle/ruby/2.2.0/gems/spring-1.3.6/lib/spring/client/command.rb:7:in `call' from /home/bigzoo/Documents/projects/proj/.bundle/ruby/2.2.0/gems/spring-1.3.6/lib/spring/client.rb:26:in `run' from /home/bigzoo/Documents/projects/proj/.bundle/ruby/2.2.0/gems/spring-1.3.6/bin/spring:48:in `<top (required)>' from /home/bigzoo/Documents/projects/proj/.bundle/ruby/2.2.0/gems/spring-1.3.6/lib/spring/binstub.rb:11:in `load' from /home/bigzoo/Documents/projects/proj/.bundle/ruby/2.2.0/gems/spring-1.3.6/lib/spring/binstub.rb:11:in `<top (required)>' from /home/bigzoo/.rbenv/versions/2.2.2/lib/ruby/2.2.0/rubygems/core_ext/kernel_require.rb:54:in `require' from /home/bigzoo/.rbenv/versions/2.2.2/lib/ruby/2.2.0/rubygems/core_ext/kernel_require.rb:54:in `require' from /home/bigzoo/Documents/projects/proj/bin/spring:13:in `<top (required)>' from bin/rails:3:in `load' from bin/rails:3:in `<main>' bigzoo@bigzoo:~/Documents/projects/proj$ sudo netstat -atpn | grep 5432[sudo] password for bigzoo: tcp 0 0 127.0.0.1:5432 0.0.0.0:* LISTEN 1744/postgres ","Rails could not translate host name ""postgres"" to address: Name or service not known (PG::ConnectionBad)"
Whats does %i or %I do in ruby?," What's the meaning of %i or %I in ruby?I searched Google for but I didn't find anything relevant to Ruby. <code>  ""%i or %I"" ruby",What does %i or %I do in Ruby?
What does %i or %I do in ruby?," What's the meaning of %i or %I in ruby?I searched Google for but I didn't find anything relevant to Ruby. <code>  ""%i or %I"" ruby",What does %i or %I do in Ruby?
why freeze mutable objects assigned to constants?, Consider this offense reported by rubocop Why should I freeze this IP address? <code>  lib/awesomelib/aws.rb:6:10: C: Style/MutableConstant: Freeze mutable objects assigned to constants. IP = '34.111.241.111' ^^^^^^^^^^^^^^^^,Ruby: Why freeze mutable objects assigned to constants?
What are the brackets [5.1] after ActiveRecord Migration?, When generating a new migration using bin/rails g migration CreateUser the first line will look like this: What does the [5.1] stand for and how does it work?This is a follow up on Whats does the [5.0] in Rails 5s ActiveRecord::Migration mean? as it does not explain how this is legal ruby and does not show up in search using [5.1] or brackets <code>  class CreateUser < ActiveRecord::Migration[5.1],What are the brackets [5.1] after ActiveRecord Migration and how does it work?
how add every element in Array [ruby]," On Ruby. I have array of array c = [[""a""], [""b""]]How convert it to c = a + b for any array. Maybe it is possible not using other variables.All array inside not flatten. I need [ [[""a""], [""b""], [""c""], [""d""], [""e""], [""f""]] ] <code>  c = [""a"", ""b""] d = [ [[""a""], [""b""]], [[""c""], [""d""]], [[""e""], [""f""]] ] ",How do I flatten an array in Ruby?
Rails delegation without losing preloaded data AND abiding by law of demeter," Is it possible to delegate a method to a has_many association in rails, AND still save the preloaded data on that association, all while following the law of demeter? Currently it seems to me that you are forced to choose one or the other. That is: keep your preloaded data by NOT delegating, or lose your preloaded data and delegate.Example: I have the following two models: Notice: that User#all_blogs_have_title? does the exact same thing as the delegation method of all_have_title?.The following, as I understand it, violates law of demeter. However: it maintains your preloaded data: Notice: when I called user.all_blogs_have_title? it DID NOT do an additional query. However, notice that the method all_blogs_have_title? is asking about Blog attributes, which is violating law of demeter.Other way which applies law of demeter but you lose the preloaded data: Hopefully the downside of both implementations is apparent. Ideally: I would like to do it the second way with the delegate implementation, but to maintain that preloaded data. Is this possible? <code>  class User < ApplicationRecord has_many :blogs delegate :all_have_title?, to: :blogs, prefix: false, allow_nil: false def all_blogs_have_title? blogs.all? {|blog| blog.title.present?} endendclass Blog < ApplicationRecord belongs_to :user def self.all_have_title? all.all? {|blog| blog.title.present?} endend user = User.includes(:blogs).first User Load (0.1ms) SELECT ""users"".* FROM ""users"" ORDER BY ""users"".""id"" ASC LIMIT ? [[""LIMIT"", 1]] Blog Load (0.1ms) SELECT ""blogs"".* FROM ""blogs"" WHERE ""blogs"".""user_id"" = 1 => #<User id: 1, name: ""all yes"", created_at: ""2017-12-05 20:28:00"", updated_at: ""2017-12-05 20:28:00"">user.all_blogs_have_title? => true user = User.includes(:blogs).first User Load (0.1ms) SELECT ""users"".* FROM ""users"" ORDER BY ""users"".""id"" ASC LIMIT ? [[""LIMIT"", 1]] Blog Load (0.1ms) SELECT ""blogs"".* FROM ""blogs"" WHERE ""blogs"".""user_id"" = 1 => #<User id: 1, name: ""all yes"", created_at: ""2017-12-05 20:28:00"", updated_at: ""2017-12-05 20:28:00"">user.all_have_title? Blog Load (0.2ms) SELECT ""blogs"".* FROM ""blogs"" WHERE ""blogs"".""user_id"" = ? [[""user_id"", 1]] => true ",Delegating method to has_many association ignores preloading
Rails delegating messages to has_many associations ignores preloaded data," Is it possible to delegate a method to a has_many association in rails, AND still save the preloaded data on that association, all while following the law of demeter? Currently it seems to me that you are forced to choose one or the other. That is: keep your preloaded data by NOT delegating, or lose your preloaded data and delegate.Example: I have the following two models: Notice: that User#all_blogs_have_title? does the exact same thing as the delegation method of all_have_title?.The following, as I understand it, violates law of demeter. However: it maintains your preloaded data: Notice: when I called user.all_blogs_have_title? it DID NOT do an additional query. However, notice that the method all_blogs_have_title? is asking about Blog attributes, which is violating law of demeter.Other way which applies law of demeter but you lose the preloaded data: Hopefully the downside of both implementations is apparent. Ideally: I would like to do it the second way with the delegate implementation, but to maintain that preloaded data. Is this possible? <code>  class User < ApplicationRecord has_many :blogs delegate :all_have_title?, to: :blogs, prefix: false, allow_nil: false def all_blogs_have_title? blogs.all? {|blog| blog.title.present?} endendclass Blog < ApplicationRecord belongs_to :user def self.all_have_title? all.all? {|blog| blog.title.present?} endend user = User.includes(:blogs).first User Load (0.1ms) SELECT ""users"".* FROM ""users"" ORDER BY ""users"".""id"" ASC LIMIT ? [[""LIMIT"", 1]] Blog Load (0.1ms) SELECT ""blogs"".* FROM ""blogs"" WHERE ""blogs"".""user_id"" = 1 => #<User id: 1, name: ""all yes"", created_at: ""2017-12-05 20:28:00"", updated_at: ""2017-12-05 20:28:00"">user.all_blogs_have_title? => true user = User.includes(:blogs).first User Load (0.1ms) SELECT ""users"".* FROM ""users"" ORDER BY ""users"".""id"" ASC LIMIT ? [[""LIMIT"", 1]] Blog Load (0.1ms) SELECT ""blogs"".* FROM ""blogs"" WHERE ""blogs"".""user_id"" = 1 => #<User id: 1, name: ""all yes"", created_at: ""2017-12-05 20:28:00"", updated_at: ""2017-12-05 20:28:00"">user.all_have_title? Blog Load (0.2ms) SELECT ""blogs"".* FROM ""blogs"" WHERE ""blogs"".""user_id"" = ? [[""user_id"", 1]] => true ",Delegating method to has_many association ignores preloading
Delegating messages to has_many associations ignores preloaded data," Is it possible to delegate a method to a has_many association in rails, AND still save the preloaded data on that association, all while following the law of demeter? Currently it seems to me that you are forced to choose one or the other. That is: keep your preloaded data by NOT delegating, or lose your preloaded data and delegate.Example: I have the following two models: Notice: that User#all_blogs_have_title? does the exact same thing as the delegation method of all_have_title?.The following, as I understand it, violates law of demeter. However: it maintains your preloaded data: Notice: when I called user.all_blogs_have_title? it DID NOT do an additional query. However, notice that the method all_blogs_have_title? is asking about Blog attributes, which is violating law of demeter.Other way which applies law of demeter but you lose the preloaded data: Hopefully the downside of both implementations is apparent. Ideally: I would like to do it the second way with the delegate implementation, but to maintain that preloaded data. Is this possible? <code>  class User < ApplicationRecord has_many :blogs delegate :all_have_title?, to: :blogs, prefix: false, allow_nil: false def all_blogs_have_title? blogs.all? {|blog| blog.title.present?} endendclass Blog < ApplicationRecord belongs_to :user def self.all_have_title? all.all? {|blog| blog.title.present?} endend user = User.includes(:blogs).first User Load (0.1ms) SELECT ""users"".* FROM ""users"" ORDER BY ""users"".""id"" ASC LIMIT ? [[""LIMIT"", 1]] Blog Load (0.1ms) SELECT ""blogs"".* FROM ""blogs"" WHERE ""blogs"".""user_id"" = 1 => #<User id: 1, name: ""all yes"", created_at: ""2017-12-05 20:28:00"", updated_at: ""2017-12-05 20:28:00"">user.all_blogs_have_title? => true user = User.includes(:blogs).first User Load (0.1ms) SELECT ""users"".* FROM ""users"" ORDER BY ""users"".""id"" ASC LIMIT ? [[""LIMIT"", 1]] Blog Load (0.1ms) SELECT ""blogs"".* FROM ""blogs"" WHERE ""blogs"".""user_id"" = 1 => #<User id: 1, name: ""all yes"", created_at: ""2017-12-05 20:28:00"", updated_at: ""2017-12-05 20:28:00"">user.all_have_title? Blog Load (0.2ms) SELECT ""blogs"".* FROM ""blogs"" WHERE ""blogs"".""user_id"" = ? [[""user_id"", 1]] => true ",Delegating method to has_many association ignores preloading
Delegating methods to has_many associations ignores preloaded data," Is it possible to delegate a method to a has_many association in rails, AND still save the preloaded data on that association, all while following the law of demeter? Currently it seems to me that you are forced to choose one or the other. That is: keep your preloaded data by NOT delegating, or lose your preloaded data and delegate.Example: I have the following two models: Notice: that User#all_blogs_have_title? does the exact same thing as the delegation method of all_have_title?.The following, as I understand it, violates law of demeter. However: it maintains your preloaded data: Notice: when I called user.all_blogs_have_title? it DID NOT do an additional query. However, notice that the method all_blogs_have_title? is asking about Blog attributes, which is violating law of demeter.Other way which applies law of demeter but you lose the preloaded data: Hopefully the downside of both implementations is apparent. Ideally: I would like to do it the second way with the delegate implementation, but to maintain that preloaded data. Is this possible? <code>  class User < ApplicationRecord has_many :blogs delegate :all_have_title?, to: :blogs, prefix: false, allow_nil: false def all_blogs_have_title? blogs.all? {|blog| blog.title.present?} endendclass Blog < ApplicationRecord belongs_to :user def self.all_have_title? all.all? {|blog| blog.title.present?} endend user = User.includes(:blogs).first User Load (0.1ms) SELECT ""users"".* FROM ""users"" ORDER BY ""users"".""id"" ASC LIMIT ? [[""LIMIT"", 1]] Blog Load (0.1ms) SELECT ""blogs"".* FROM ""blogs"" WHERE ""blogs"".""user_id"" = 1 => #<User id: 1, name: ""all yes"", created_at: ""2017-12-05 20:28:00"", updated_at: ""2017-12-05 20:28:00"">user.all_blogs_have_title? => true user = User.includes(:blogs).first User Load (0.1ms) SELECT ""users"".* FROM ""users"" ORDER BY ""users"".""id"" ASC LIMIT ? [[""LIMIT"", 1]] Blog Load (0.1ms) SELECT ""blogs"".* FROM ""blogs"" WHERE ""blogs"".""user_id"" = 1 => #<User id: 1, name: ""all yes"", created_at: ""2017-12-05 20:28:00"", updated_at: ""2017-12-05 20:28:00"">user.all_have_title? Blog Load (0.2ms) SELECT ""blogs"".* FROM ""blogs"" WHERE ""blogs"".""user_id"" = ? [[""user_id"", 1]] => true ",Delegating method to has_many association ignores preloading
"Difference b/w yield_self, yield(self) and Object#tap in ruby"," Ruby 2.5.0-rc1 has been released and introduces a new Kernel#yield_self method.What is the difference between yield_self, yield(self) and the existing Object#tap method? <code> ","Difference between Kernel#yield_self, yield(self) and Object#tap in ruby"
"Difference between yield_self, yield(self) and Object#tap in ruby"," Ruby 2.5.0-rc1 has been released and introduces a new Kernel#yield_self method.What is the difference between yield_self, yield(self) and the existing Object#tap method? <code> ","Difference between Kernel#yield_self, yield(self) and Object#tap in ruby"
"Why the number week of the year in 2017 starts in 1 and this year 2018, in 0?"," Why does the number of the week of the year start with 1 in 2017 and 0 in 2018? <code>  Date.strptime('2017-01-01', '%Y-%m-%d').strftime('%Y-%m-%d %U') #2017-01-01 01Date.strptime('2018-01-01', '%Y-%m-%d').strftime('%Y-%m-%d %U') #2018-01-01 00",Why does the number week of the year start with 1 or 0 depending on the year?
Why does the number week of the year starts with 1 or 0 depending on the year?," Why does the number of the week of the year start with 1 in 2017 and 0 in 2018? <code>  Date.strptime('2017-01-01', '%Y-%m-%d').strftime('%Y-%m-%d %U') #2017-01-01 01Date.strptime('2018-01-01', '%Y-%m-%d').strftime('%Y-%m-%d %U') #2018-01-01 00",Why does the number week of the year start with 1 or 0 depending on the year?
"Error installing sass (Ruby 2.5.0.1, MSYS2 20161025.0.0)"," I tried to install Sass. I installed Ruby and MSYS2 prior to that, the latest from all with Chocolatey: Seemingly they were properly installed. ruby -v results in: When I tried to run gem install sass I received the following error message: Ok, so I attempted to run gem install ffi -v 1.9.18.I received this error message: I tried to reinstall Ruby with proper installer, restarted computer, but the same error appears.How can I make Sass to get installed? <code>  choco install rubychoco install msys2 ruby 2.5.0p0 (2017-12-25 revision 61468) [x64-mingw32] ERROR: Error installing sass: The last version of ffi (< 2, >= 0.5.0) to support your Ruby & RubyGems was 1.9.18. Try installing it with `gem install ffi -v 1.9.18` and then running the current command again ffi requires Ruby version < 2.5, >= 2.0. The current ruby version is 2.5.0. ERROR: Error installing ffi: The last version of ffi (= 1.9.18) to support your Ruby & RubyGems was 1.9.18. Try installing it with `gem install ffi -v 1.9.18` ffi requires Ruby version < 2.5, >= 2.0. The current ruby version is 2.5.0.","Error installing Sass (Ruby 2.5.0.1, MSYS2 20161025.0.0)"
Cyrillic string length issue in ruby and other programming languages," In Ruby, Javascript and Java (others I didn't try), have cyrillic chars length 2. When I try to check length of string with these chars indside, I get bad output value. Please note, that strings are encoded in UTF-8 and each char behave as single character.My question is why is there such behaviour and how can I get length of string correctly with these chars inside? <code>  """".mb_chars.length#=> 2 #should be 1 (ruby on rails)"""".length#=> 2 #should be 1 (ruby, javascript)"""".length#=> 1 #correct (ruby, javascript)",cyrillic strings    return length 2 instead of 1 in ruby and other programming languages
Don't pass block to super parent," How can I set a block to nil for the super call? I don't want to yield the block twice. Is it somehow possible that block_given? in class A returns false?Background is that I don't own the A class and I can't change it's foo method but I want to avoid calling my block twice. I also don't want to pass a dummy / empty block to super, because the behaviour of A's foo method changes when a block is given. <code>  class A def foo if block_given? result = yield # do stuff with the yield result end # some more code endendclass B < A def foo block_result = yield # process block results and store it # ... super endendB.new.foo { puts ""block called"" }# => block called# => block called",Don't pass block when calling super
how to remove content within the square brackets in ruby," I am trying to extract the content inside the square brackets. So far I have been using this, which works but I was wondering instead of using this delete function, if I could directly use something in regex. <code>  a = ""This is such a great day [cool awesome]"" a[/\[.*?\]/].delete('[]') #=> ""cool awesome""",How to extract content within square brackets in ruby
RuboCop complains when using Hash.new," RuboCop complains when I use Hash.new, and suggests that I instead use a hash literal. Is there a way to make RuboCop ignore uses of Hash.new? More specifically, can I edit my .rubocop.yml configuration to allow the use of Hash.new without raising any complaints? <code> ",RuboCop complains when using 'Hash.new'
Convert array of strings to an array of Integers in Ruby," I need to convert strings in an array representing numbers into integers. into How can I do this? <code>  ["""", ""22"", ""14"", ""18""] [22, 14, 18]",Convert array of strings to an array of integers
"How to flatten a hash, making each key a unique value? Ruby"," I want to take a hash with nested hashes and arrays and flatten it out into a single hash with unique values. I keep trying to approach this from different angles, but then I make it way more complex than it needs to be and get myself lost in what's happening.Example Source Hash: Example Desired Hash: For what it's worth, here's my most recent attempt before giving up. <code>  { ""Name"" => ""Kim Kones"", ""License Number"" => ""54321"", ""Details"" => { ""Name"" => ""Kones, Kim"", ""Licenses"" => [ { ""License Type"" => ""PT"", ""License Number"" => ""54321"" }, { ""License Type"" => ""Temp"", ""License Number"" => ""T123"" }, { ""License Type"" => ""AP"", ""License Number"" => ""A666"", ""Expiration Date"" => ""12/31/2020"" } ] }} { ""Name"" => ""Kim Kones"", ""License Number"" => ""54321"", ""Details_Name"" => ""Kones, Kim"", ""Details_Licenses_1_License Type"" => ""PT"", ""Details_Licenses_1_License Number"" => ""54321"", ""Details_Licenses_2_License Type"" => ""Temp"", ""Details_Licenses_2_License Number"" => ""T123"", ""Details_Licenses_3_License Type"" => ""AP"", ""Details_Licenses_3_License Number"" => ""A666"", ""Details_Licenses_3_Expiration Date"" => ""12/31/2020""} def flattify(hashy) temp = {} hashy.each do |key, val| if val.is_a? String temp[""#{key}""] = val elsif val.is_a? Hash temp.merge(rename val, key, """") elsif val.is_a? Array temp[""#{key}""] = enumerate val, key else end print ""=> #{temp}\n"" end return tempenddef rename (hashy, str, n) temp = {} hashy.each do |key, val| if val.is_a? String temp[""#{key}#{n}""] = val elsif val.is_a? Hash val.each do |k, v| temp[""#{key}_#{k}#{n}""] = v end elsif val.is_a? Array temp[""#{key}""] = enumerate val, key else end end return flattify tempenddef enumerate (ary, str) temp = {} i = 1 ary.each do |x| temp[""#{str}#{i}""] = x i += 1 end return flattify tempend","How to flatten a hash, making each key a unique value?"
Ruby: Subtract n months datetime, I'm new in ruby and date arithmetics seems confusing.How can I remove n months from a DateTime without using any other modules? <code> ,How to subtract n months from a DateTime in Ruby?
Ruby Module Nesting Syntax Preference," I got bit by assuming that and are alike. I was able to find a solution from this blog, this SO thread and and this SO thread.Why and when should one prefer the compact syntax A::B over the other, given that it evidently has a drawback? I have a intuition that it could be related to performance, as looking up constants in more namespaces requires more computation. But I was not able to verify this by benchmarking normal classes. <code>  module A module B endend module A::Bend",Preference of code style in module nesting
How to completely remove webpackack and all its dependencies from Rails App," I created my rails with this template that included webpack, I still write my javascript code in app/assets/javascript. I am trying to deploy my app to heroku and it keeps failing, I get this error ""remote: /tmp/build_6f0656280cbbda40c5832ccb79fc1783/vendor/bundle/ruby/2.3.0/gems/bundler-1.15.2/lib/bundler/rubygems_integration.rb:432:in `block in replace_bin_path': can't find executable webpack for gem webpacker (Gem::Exception)""I have tried lots of solutions but still cant get my app deployed to Heroku. I want to know how to completely delete webpack and all its depencies from my app since it was not even useful to my app <code>  source 'https://rubygems.org'ruby '2.3.5'gem 'figaro'gem 'jbuilder', '~> 2.0'gem 'puma'gem 'rails', '5.1.4'gem 'redis'gem 'cloudinary'gem 'carrierwave', '~> 1.2'gem 'rails_admin', '~> 1.2'group :production do gem 'pg', '~> 0.20'endgem 'autoprefixer-rails'gem 'bootstrap-sass'gem 'jquery-rails'gem 'font-awesome-sass'gem 'sass-rails'gem 'simple_form'gem 'turbolinks', '~> 5.0.0'gem 'coffee-rails'gem 'uglifier'gem 'webpacker'gem 'devise'gem 'ransack'gem 'trix'gem ""letter_opener"", group: :developmentgroup :development do gem 'web-console', '>= 3.3.0' gem 'sqlite3'endgroup :development, :test do # gem 'binding_of_caller' # gem 'better_errors' gem 'pry-byebug' gem 'pry-rails' gem 'listen', '~> 3.0.5' gem 'spring' gem 'spring-watcher-listen', '~> 2.0.0'end",How to completely remove webpack and all its dependencies from Rails App
Is there some non-mutating array push method equivalent in Ruby on Rails?," I'd like to add a new element to an array in a non-mutating way. In JS, I can do this: instead of this: How can I do the same thing in Ruby? The concat method in Ruby is mutating. <code>  var new_arr = arr.concat(3) arr.push(3)",Non-mutating array push method equivalent
Why duplicable? is defined the way rails defines," I come across this in Rails source code: With this code, even after dup is removed from an object, that object responds to duplicable? with true.I think it can be rewritten to a simpler code like: What is the merit of defining duplicable? using begin...rescue? <code>  class Object def duplicable? true endendclass NilClass begin nil.dup rescue TypeError def duplicable? false end endend class Object def duplicable? repond_to?(:dup) endend",Why is `duplicable?` defined the way it is?
Is there an equivalent for using matplotlib.imge in ruby," Been experimenting with using Ruby inside a jupyter notebook. With Python I can do this Does anyone know the equivalent with Ruby, I have not been able to find it in any of the iRuby or sciruby documentation?To clarify a little, In my gemfile I have this But cannot seem to get access to the image part of matplotlib that I am use to using in python.I am trying to find the Ruby version of what, in Python, I would write like this Thanks so much for any suggestions <code>  import matplotlib.image as mpimg gem 'iruby'gem 'cztop'gem 'matplotlib' #importing some useful packagesimport matplotlib.pyplot as pltimport matplotlib.image as mpimg...%matplotlib inline#reading in an imageimage = mpimg.imread('test_images/solidWhiteRight.jpg')#printing out some stats and plottingprint('This image is:', type(image), 'with dimesions:', image.shape)plt.imshow(image) #call as plt.imshow(gray, cmap='gray') to show a grayscaled image",Is there an equivalent for using matplotlib.image in ruby
`Concurrent::Promise.all?` doesn't call proc," I'm trying to make some calculations after I got all promises executed. But proc never calls: Made with concurrent-ruby gem.Should I create a loop that will check this every 100 ms for example?UpdateI tried to add a loop and byebug the code (in sidekiq worker): but the state of all promises is pending. It could be because of byebug, but anyway the proc never calls. <code>  cbr_promise = Concurrent::Promise.execute { CbrRatesService.call }bitfinex_promise = Concurrent::Promise.execute { BitfinexService.call }proc = Proc.new do puts 10endConcurrent::Promise.all?([cbr_promise, bitfinex_promise]).then { proc } while @fl Concurrent::Promise.all?([cbr_promise, bitfinex_promise]).then { proc }end",Concurrent::Promise.all? doesn't work
How to custom format integers in Axlsx?," I am using ruby Axlsx gem for writing my clients accounts data in xlsx. Now I am appending "" Dr"" string to all debit amounts which is making amount as a string e.g. ""1000 Dr"". I want to append "" Dr"" but the amount should still be an integer and excel should give sum at bottom when column is selected.What I am doing, notice that excel shows sum = 0 in bottom-right even on selecting :-What I am doing, notice that cell remains a string on selecting (880 Dr should become 880.00 on selecting the cell):-What I want to do, excel should show sum of selected colums as shown by excel in bottom-right sum=1957.00 Dr:-What I want to do, the cell should be converted to number when double clicked (1341.00 Dr has become 1341 on selecting)but Dr should be visible on unselecting again:-  <code> ",How to format currency columns in Axlsx?
Using JSON to Parse data from Googlesheets To FusionCharts in Ruby on Rails app," Im loading Data from Googlesheets to fusioncharts in my rails app.I use Jquery to Fetch the data from the google sheets as seen in this tutorial https://www.sitepoint.com/interactive-javascript-charts-using-data-from-google-sheets/Rails always gives me this error undefined local variable or method 'parsedData' for #<GreetingsController:0x007fdb862e9cf8> when I try to fetch the data from the pasedDatavariable like this.data: parsedData I'm not sure on what I'm doing wrong here, this is the first time I'm using JSON to load data to fusioncharts in rails app. Any help would be much appreciated here is the Jquery snippet were the googlesheets gets turned into JSON. Here is the fusionchart snippet from the rails controller and here is instructions about rails and fusioncharts https://github.com/fusioncharts/rails-wrapper <code>  var spreadsheetId = ""XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX"", url = ""https://spreadsheets.google.com/feeds/list/"" + spreadsheetId + ""/od6/public/basic?alt=json"";$.get({ url: url, success: function(response) { var data = response.feed.entry, len = data.length, i = 0, parsedData = []; for (i = 0; i < len; i++) { parsedData.push({ label: data[i].title.$t, value: data[i].content.$t.replace('income: ', '') }); } }}); @chart2 = Fusioncharts::Chart.new({ type: 'bar2d', renderAt: 'chart-container', width: '100%', height: '300', dataFormat: 'json', dataSource: { chart: { caption: ""Highest Paid Actors"", yAxisName: ""Annual Income (in milion USD)"", numberPrefix: ""$"", theme: ""fint"", exportEnabled: ""1"", }, data: parsedData }})",Undefined local variable or method `parsedData' when Using JSON to Parse data from Googlesheets To FusionCharts in Ruby on Rails app
changing sqlite to postgresql in my app made it with ruby on rails," I am using win 7 with docker and in docker I am using ruby on rails, I did an application that works very well with sqlite3 but when I try to upload to Heroku, Heroku gave me an error that it is not supported sqlite3 so I had to change my app database to PostgreSQL and I did the following changes:in my Gemfile I commented gem sqlite3: second i did a ""bundle install"" and then a docker-compuse buildthen in my database.yml:BEFORE: after the changes: so when i tried to create a new datebase with ""rake db:create"" docker gave me the next error: i found different solution but for linux and mac, all i could inform here is that maybe the problem is because i have to delete some file that i didn t know where i can find with windows or with docker :(, all the information i found is here: PG::ConnectionBad - could not connect to server: Connection refusedthis is my docker-compose.yml file: <code>  # Use sqlite3 as the database for Active Record#gem 'sqlite3'#posgresqlgem 'pg' default: &default adapter: sqlite3 pool: <%= ENV.fetch(""RAILS_MAX_THREADS"") { 5 } %> timeout: 5000development: <<: *default database: db/development.sqlite3# Warning: The database defined as ""test"" will be erased and# re-generated from your development database when you run ""rake"".# Do not set this db to the same as development or production.test: <<: *default database: db/test.sqlite3production: <<: *default database: db/production.sqlite3 development: adapter: postgresql database: my_database_development pool: 5 timeout: 5000test: adapter: postgresql database: my_database_test pool: 5 timeout: 5000production: adapter: postgresql database: my_database_production pool: 5 timeout: 5000 $ docker-compose run web rails db:createStarting grupo43_postgres_1 ... donecould not connect to server: No such file or directory Is the server running locally and accepting connections on Unix domain socket ""/var/run/postgresql/.s.PGSQL.5432""?Couldn't create database for {""adapter""=>""postgresql"", ""database""=>""my_database_development"", ""pool""=>5, ""timeout""=>5000}rails aborted!PG::ConnectionBad: could not connect to server: No such file or directory Is the server running locally and accepting connections on Unix domain socket ""/var/run/postgresql/.s.PGSQL.5432""?/usr/local/bundle/gems/pg-1.0.0/lib/pg.rb:56:in `initialize'/usr/local/bundle/gems/pg-1.0.0/lib/pg.rb:56:in `new'/usr/local/bundle/gems/pg-1.0.0/lib/pg.rb:56:in `connect'/usr/local/bundle/gems/activerecord-5.1.6/lib/active_record/connection_adapters/postgresql_adapter.rb:697:in `connect'/usr/local/bundle/gems/activerecord-5.1.6/lib/active_record/connection_adapters/postgresql_adapter.rb:221:in `initialize'/usr/local/bundle/gems/activerecord-5.1.6/lib/active_record/connection_adapters/postgresql_adapter.rb:38:in `new'/usr/local/bundle/gems/activerecord-5.1.6/lib/active_record/connection_adapters/postgresql_adapter.rb:38:in `postgresql_connection'/usr/local/bundle/gems/activerecord-5.1.6/lib/active_record/connection_adapters/abstract/connection_pool.rb:759:in `new_connection'/usr/local/bundle/gems/activerecord-5.1.6/lib/active_record/connection_adapters/abstract/connection_pool.rb:803:in `checkout_new_connection'/usr/local/bundle/gems/activerecord-5.1.6/lib/active_record/connection_adapters/abstract/connection_pool.rb:782:in `try_to_checkout_new_connection'/usr/local/bundle/gems/activerecord-5.1.6/lib/active_record/connection_adapters/abstract/connection_pool.rb:743:in `acquire_connection'/usr/local/bundle/gems/activerecord-5.1.6/lib/active_record/connection_adapters/abstract/connection_pool.rb:500:in `checkout'/usr/local/bundle/gems/activerecord-5.1.6/lib/active_record/connection_adapters/abstract/connection_pool.rb:374:in `connection'/usr/local/bundle/gems/activerecord-5.1.6/lib/active_record/connection_adapters/abstract/connection_pool.rb:931:in `retrieve_connection'/usr/local/bundle/gems/activerecord-5.1.6/lib/active_record/connection_handling.rb:116:in `retrieve_connection'/usr/local/bundle/gems/activerecord-5.1.6/lib/active_record/connection_handling.rb:88:in `connection'/usr/local/bundle/gems/activerecord-5.1.6/lib/active_record/tasks/postgresql_database_tasks.rb:10:in `connection'/usr/local/bundle/gems/activerecord-5.1.6/lib/active_record/tasks/postgresql_database_tasks.rb:19:in `create'/usr/local/bundle/gems/activerecord-5.1.6/lib/active_record/tasks/database_tasks.rb:117:in `create'/usr/local/bundle/gems/activerecord-5.1.6/lib/active_record/tasks/database_tasks.rb:137:in `block in create_current'/usr/local/bundle/gems/activerecord-5.1.6/lib/active_record/tasks/database_tasks.rb:305:in `block in each_current_configuration'/usr/local/bundle/gems/activerecord-5.1.6/lib/active_record/tasks/database_tasks.rb:302:in `each'/usr/local/bundle/gems/activerecord-5.1.6/lib/active_record/tasks/database_tasks.rb:302:in `each_current_configuration'/usr/local/bundle/gems/activerecord-5.1.6/lib/active_record/tasks/database_tasks.rb:136:in `create_current'/usr/local/bundle/gems/activerecord-5.1.6/lib/active_record/railties/databases.rake:27:in `block (2 levels) in <top (required)>'/usr/local/bundle/gems/railties-5.1.6/lib/rails/commands/rake/rake_command.rb:21:in `block in perform'/usr/local/bundle/gems/railties-5.1.6/lib/rails/commands/rake/rake_command.rb:18:in `perform'/usr/local/bundle/gems/railties-5.1.6/lib/rails/command.rb:46:in `invoke'/usr/local/bundle/gems/railties-5.1.6/lib/rails/commands.rb:16:in `<top (required)>'/example/bin/rails:9:in `require'/example/bin/rails:9:in `<top (required)>'/usr/local/bundle/gems/spring-2.0.2/lib/spring/client/rails.rb:28:in `load'/usr/local/bundle/gems/spring-2.0.2/lib/spring/client/rails.rb:28:in `call'/usr/local/bundle/gems/spring-2.0.2/lib/spring/client/command.rb:7:in `call'/usr/local/bundle/gems/spring-2.0.2/lib/spring/client.rb:30:in `run'/usr/local/bundle/gems/spring-2.0.2/bin/spring:49:in `<top (required)>'/usr/local/bundle/gems/spring-2.0.2/lib/spring/binstub.rb:31:in `load'/usr/local/bundle/gems/spring-2.0.2/lib/spring/binstub.rb:31:in `<top (required)>'/example/bin/spring:15:in `require'/example/bin/spring:15:in `<top (required)>'bin/rails:3:in `load'bin/rails:3:in `<main>'Tasks: TOP => db:create(See full trace by running task with --trace) version: '3'services: postgres: image: postgres:10.3 ports: - ""3000"" web: build: . env_file: - .env command: bash -c ""(bundle check || bundle install) && bundle exec rails s -p 3000 -b '0.0.0.0'"" volumes: - .:/example ports: - ""3000:3000"" depends_on: - postgres",Changing sqlite to PostgreSQL in ruby on rails
Parse ul and ol tags," I have to handle deep nesting of ul, ol, and li tags. I need to give the same view as we are giving in the browser. I want to achieve the following example in a pdf file: I have to use prawn for my task. But prawn doesn't support HTML tags. So, I came up with a solution using nokogiri:. I am parsing and later removing the tags with gsub. The below solution I have written for a part of the above content but the problem is ul and ol can vary. Problem 1) What I want to achieve is how to handle space when working with ul and ol tags2) How to handle deep nesting when li come inside ul or li come inside ol <code>  text = ""<body> <ol> <li>One</li> <li>Two <ol> <li>Inner One</li> <li>inner Two <ul> <li>hey <ol> <li>hiiiiiiiii</li> <li>why</li> <li>hiiiiiiiii</li> </ol> </li> <li>aniket </li> </li> </ul> <li>sup </li> <li>there </li> </ol> <li>hey </li> <li>Three</li> </li> </ol> <ol> <li>Introduction</li> <ol> <li>Introduction</li> </ol> <li>Description</li> <li>Observation</li> <li>Results</li> <li>Summary</li> </ol> <ul> <li>Introduction</li> <li>Description <ul> <li>Observation <ul> <li>Results <ul> <li>Summary</li> </ul> </li> </ul> </li> </ul> </li> <li>Overview</li> </ul></body>"" RULES = { ol: { 1 => ->(index) { ""#{index + 1}. "" }, 2 => ->(index) { ""#{}"" }, 3 => ->(index) { ""#{}"" }, 4 => ->(index) { ""#{}"" } }, ul: { 1 => ->(_) { ""\u2022 "" }, 2 => ->(_) { """" }, 3 => ->(_) { """" }, 4 => ->(_) { """" }, }}def ol_rule(group, deepness: 1) group.search('> li').each_with_index do |item, i| prefix = RULES[:ol][deepness].call(i) item.prepend_child(prefix) descend(item, deepness + 1) endenddef ul_rule(group, deepness: 1) group.search('> li').each_with_index do |item, i| prefix = RULES[:ul][deepness].call(i) item.prepend_child(prefix) descend(item, deepness + 1) endenddef descend(item, deepness) item.search('> ol').each do |ol| ol_rule(ol, deepness: deepness) end item.search('> ul').each do |ul| ul_rule(ul, deepness: deepness) endenddoc = Nokogiri::HTML.fragment(text)doc.search('ol').each do |group| ol_rule(group, deepness: 1)enddoc.search('ul').each do |group| ul_rule(group, deepness: 1)end puts doc.inner_text1. One2. Two1. Inner One2. inner Two hey1. hiiiiiiiii2. why3. hiiiiiiiii aniket 3. sup 4. there 3. hey 4. Three1. Introduction1. Introduction2. Description3. Observation4. Results5. Summary Introduction Description Observation Results Summary Overview",Parse 'ul' and 'ol' tags
How can i get url of my attachment stored in active storage in my rails controller," How can I get url of my has_one model attachment stored in active storage in my rails controller. So, that I would be able to send it as full link as api in json.So far, I have tried following methods but each of them are giving various issues:current_user.image.service_url ---- undefined method `service_url' for #<ActiveStorage::Attached::One:0x....Rails.application.routes.url_helpers.rails_disk_blob_path(current_user.image, only_path: true), it gives me an output like:""/rails/blobs/%23%3CActiveStorage::Attached::One:0x007f991c7b41b8%3E""but this is not a url, right? I am not able to hit and get image on browser.url_for ----undefined method `active_storage_attachment_url' for #<Api::V1::UsersController:0x007f991c1eaa98 <code> ",How can I get url of my attachment stored in active storage in my rails controller
Faker - not unique," I'm using FactoryBot and Faker for my tests, and it looks like that Faker is generating the same name: Even I'm using the unique method, I'm getting the error Any clues? <code>  class Profile < ApplicationRecord belongs_to :user validates_presence_of :first_name, :last_name, :nickname validates :nickname, uniqueness: { case_sensitive: false }endFactoryBot.define do factory :user do sequence(:email) { |n| ""user#{n}@example.org"" } password ""123456"" trait :with_profile do profile end endendFactoryBot.define do factory :profile do first_name Faker::Name.unique.first_name last_name Faker::Name.unique.last_name nickname { ""#{first_name}_#{last_name}"".downcase } user endendRSpec.feature ""Friendships"", type: :feature do scenario ""User can accept a pending friendship request"" do @tom = create(:user, :with_profile) @jerry = create(:user, :with_profile) #other stuff endend ActiveRecord::RecordInvalid: Validation failed: Nickname has already been taken`.",FactoryBot and Faker - unique is not working
Why does integer division always round down?," In the languages I have tested, - (x div y ) is not equal to -x div y; I have tested // in Python, / in Ruby, div in Perl 6; C has a similar behavior.That behavior is usually according to spec, since div is usually defined as the rounding down of the result of the division, however it does not make a lot of sense from the arithmetic point of view, since it makes div behave in a different way depending on the sign, and it causes confusion such as this post on how it is done in Python.Is there some specific rationale behind this design decision, or is just div defined that way from scratch? Apparently Guido van Rossum uses a coherency argument in a blog post that explains how it is done in Python, but you can have coherency also if you choose to round up.(Inspired by this question by PMurias in the #perl6 IRC channel) <code> ",Why does integer division round down in many scripting languages?
Different Ways to use a form in Ruby on Rails | What is the difference?," What is the difference between these methods of addressing an edit form for ""packs""?How do these different approaches affect the stability of the application? It's versatility?Where would these run into major problems? Why is one better than the other?Via ""method?"" <%= simple_form_for Pack.find(params[:id]), method: :patch do |f| %>Via Object <%= simple_form_for @pack, url: pack_path(@pack), method: :patch do |f| %>Via Symbol <%= simple_form_for :pack, url: pack_path(@pack), method: :patch do |f| %>Any information would be nice, I would love to know! <code> ",Different Ways to use simple_form in Ruby on Rails | What is the difference?
Ruby code execution," I had a confusion about how Ruby executes a query:Lets suppose we have two methods: everytime I call this method I get a query running which says: 'User Load (18.3ms) SELECT ""users"".* FROM ""users"" INNER JOIN ""roles"" ON ""roles"".""user_id"" = ""users"".""id"" WHERE ""users"".""banned"" = 'f' AND ""roles"".""description"" = 'gogetter''It means that it queries the users...lets suppose I have another method: when I call this it returned me the SQL format of that query:So my question is in the first method the query gets executed but does the query gets executed in the second method? Or its just showing me the end result without executing the query because I never used it? <code>  def meet1 user = User.allend def meet2 user = User.all user.to_sqlend",When is an ActiveRecord query executed?
Active Record get all children of children and so on," I am using MongoDb as database.I want all the children of children and so on. Lets Suppose A has B & C childrenB has D & E childrenD has F & G children So when I query for children node A. I get all the children as output such as B C D E F G So can anyone suggest me the way, to get recursive children.Customer model Can anybody please help me out. Or suggest a way to accomplish this. <code>  C = Customer.find_by(:id => ""SOME_ID"") C.children #list all children upto one level class Customer include Mongoid::Document field :email, type: String field :referral_id, type: String belongs_to :parent, class_name: 'Customer',foreign_key: ""referral_id"", optional: true has_many :children, :class_name => 'Customer', :foreign_key => ""referral_id""end",Get all children of children and so on
I18n::InvalidLocaleData: I18n gem has issues in js export.," I'm working on a application with Rails 3.2.22.4, Ruby 2.2.7 on OS X 10.13.4. There are multiple translation files eg. en.yml, sq.yml based on the countries. While executing the command from rubymine below, errors are seen on loading the webpages. rake --trace i18n:js:exportThe yaml content from en.yml has been validated and it's correct. The specific line in which error is thrown once removed from file will give error in some other .yml file. The current version of gem i18n (0.9.5) is being used.Rails server starts but loading of the first page of web application breaks with same error. Error is thrown the code encounters i18n translation code, yml formatting is not an issue as error moves from one file to another. This is mostly a gem issue either i18n, Psych etc but changing multiple versions have not helped to solve.Error displayed in browser if tried loading the page: Error stack when tried executing rake tasks snippet from .yml file, line 26 which is giving error. EDITReconstructing the Error in rails console: I'm unable to get the pointers after enough search, could be a gem issue not sure though. Any help is appreciated.  <code>  can not load translations from /Users/biju/projecty/config/locales/en.yml: #<Psych::SyntaxError: (/Users/biju/projecty/config/locales/en.yml): found unknown escape character while parsing a quoted scalar at line 26 column 27> 2018-07-18 16:40:51 +0530 Projecty::Application.initialize! took 1.733 sec---------------------------------------------------------------------------------------------------------------** Execute i18n:js:exportrake aborted!I18n::InvalidLocaleData: can not load translations from /Users/biju/projecty/config/locales/en.yml: #<Psych::SyntaxError: (/Users/biju/projecty/config/locales/en.yml): found unknown escape character while parsing a quoted scalar at line 26 column 27>/Users/biju/.rvm/gems/ruby-2.2.7@yb/gems/i18n-0.9.5/lib/i18n/backend/base.rb:232:in `rescue in load_yml'/Users/biju/.rvm/gems/ruby-2.2.7@yb/gems/i18n-0.9.5/lib/i18n/backend/base.rb:229:in `load_yml'/Users/biju/.rvm/gems/ruby-2.2.7@yb/gems/i18n-0.9.5/lib/i18n/backend/base.rb:213:in `load_file'/Users/biju/.rvm/gems/ruby-2.2.7@yb/gems/i18n-0.9.5/lib/i18n/backend/base.rb:15:in `block in load_translations'/Users/biju/.rvm/gems/ruby-2.2.7@yb/gems/i18n-0.9.5/lib/i18n/backend/base.rb:15:in `each'/Users/biju/.rvm/gems/ruby-2.2.7@yb/gems/i18n-0.9.5/lib/i18n/backend/base.rb:15:in `load_translations'/Users/biju/.rvm/gems/ruby-2.2.7@yb/gems/i18n-0.9.5/lib/i18n/backend/simple.rb:63:in `init_translations'/Users/biju/.rvm/gems/ruby-2.2.7@yb/gems/i18n-js-3.0.5/lib/i18n/js.rb:164:in `block in translations'/Users/biju/.rvm/gems/ruby-2.2.7@yb/gems/i18n-js-3.0.5/lib/i18n/js.rb:163:in `instance_eval'/Users/biju/.rvm/gems/ruby-2.2.7@yb/gems/i18n-js-3.0.5/lib/i18n/js.rb:163:in `translations'/Users/biju/.rvm/gems/ruby-2.2.7@yb/gems/i18n-js-3.0.5/lib/i18n/js.rb:121:in `block in scoped_translations'/Users/biju/.rvm/gems/ruby-2.2.7@yb/gems/i18n-js-3.0.5/lib/i18n/js.rb:120:in `each'/Users/biju/.rvm/gems/ruby-2.2.7@yb/gems/i18n-js-3.0.5/lib/i18n/js.rb:120:in `scoped_translations'/Users/biju/.rvm/gems/ruby-2.2.7@yb/gems/i18n-js-3.0.5/lib/i18n/js.rb:43:in `segment_for_scope'/Users/biju/.rvm/gems/ruby-2.2.7@yb/gems/i18n-js-3.0.5/lib/i18n/js.rb:54:in `block in configured_segments'/Users/biju/.rvm/gems/ruby-2.2.7@yb/gems/i18n-js-3.0.5/lib/i18n/js.rb:48:in `each'/Users/biju/.rvm/gems/ruby-2.2.7@yb/gems/i18n-js-3.0.5/lib/i18n/js.rb:48:in `inject'/Users/biju/.rvm/gems/ruby-2.2.7@yb/gems/i18n-js-3.0.5/lib/i18n/js.rb:48:in `configured_segments'/Users/biju/.rvm/gems/ruby-2.2.7@yb/gems/i18n-js-3.0.5/lib/i18n/js.rb:93:in `translation_segments'/Users/biju/.rvm/gems/ruby-2.2.7@yb/gems/i18n-js-3.0.5/lib/i18n/js.rb:36:in `export'/Users/biju/.rvm/gems/ruby-2.2.7@yb/gems/i18n-js-3.0.5/lib/tasks/export.rake:5:in `block (3 levels) in <top (required)>'/Users/biju/.rvm/gems/ruby-2.2.7@yb/gems/rake-10.5.0/lib/rake/task.rb:240:in `call'/Users/biju/.rvm/gems/ruby-2.2.7@yb/gems/rake-10.5.0/lib/rake/task.rb:240:in `block in execute'/Users/biju/.rvm/gems/ruby-2.2.7@yb/gems/rake-10.5.0/lib/rake/task.rb:235:in `each'/Users/biju/.rvm/gems/ruby-2.2.7@yb/gems/rake-10.5.0/lib/rake/task.rb:235:in `execute'/Users/biju/.rvm/gems/ruby-2.2.7@yb/gems/rake-10.5.0/lib/rake/task.rb:179:in `block in invoke_with_call_chain'/Users/biju/.rvm/rubies/ruby-2.2.7/lib/ruby/2.2.0/monitor.rb:211:in `mon_synchronize'/Users/biju/.rvm/gems/ruby-2.2.7@yb/gems/rake-10.5.0/lib/rake/task.rb:172:in `invoke_with_call_chain'/Users/biju/.rvm/gems/ruby-2.2.7@yb/gems/rake-10.5.0/lib/rake/task.rb:165:in `invoke'/Users/biju/.rvm/gems/ruby-2.2.7@yb/gems/rake-10.5.0/lib/rake/application.rb:150:in `invoke_task'/Users/biju/.rvm/gems/ruby-2.2.7@yb/gems/rake-10.5.0/lib/rake/application.rb:106:in `block (2 levels) in top_level'/Users/biju/.rvm/gems/ruby-2.2.7@yb/gems/rake-10.5.0/lib/rake/application.rb:106:in `each'/Users/biju/.rvm/gems/ruby-2.2.7@yb/gems/rake-10.5.0/lib/rake/application.rb:106:in `block in top_level'/Users/biju/.rvm/gems/ruby-2.2.7@yb/gems/rake-10.5.0/lib/rake/application.rb:115:in `run_with_threads'/Users/biju/.rvm/gems/ruby-2.2.7@yb/gems/rake-10.5.0/lib/rake/application.rb:100:in `top_level'/Users/biju/.rvm/gems/ruby-2.2.7@yb/gems/rake-10.5.0/lib/rake/application.rb:78:in `block in run'/Users/biju/.rvm/gems/ruby-2.2.7@yb/gems/rake-10.5.0/lib/rake/application.rb:176:in `standard_exception_handling'/Users/biju/.rvm/gems/ruby-2.2.7@yb/gems/rake-10.5.0/lib/rake/application.rb:75:in `run'/Users/biju/.rvm/gems/ruby-2.2.7@yb/gems/rake-10.5.0/bin/rake:33:in `<top (required)>'/Users/biju/.rvm/gems/ruby-2.2.7@yb/bin/rake:23:in `load'/Users/biju/.rvm/gems/ruby-2.2.7@yb/bin/rake:23:in `<top (required)>'-e:1:in `load'-e:1:in `<main>' en: formtastic: labels: event_filter: source_server: ""Server:"" source_source: ""Sevent_filter:"" source_server: ""Server:"" source_source: ""Source:"" serverOption: ""Server:"" Category: ""Category:"" EventID: ""Event ID:"" Type: ""Type:"" TEA: ""Target E-mail Address:"" All: ""All"" ShWare: ""ShWare:"" Services: ""Services:"" Other: ""Other"" Any: ""Any"" Error: ""Error"" Warning: ""Warning"" Information: ""Information"" None: """" can_not_be_blank: ""can't be blank or click on \'Any\'"" list: buttons: previous: ""Previous"" next: ""Next"" trans2 = YAML.load(File.read(""#{D2_DIR}/config/locales/en.yml"")).with_indifferent_accessPsych::SyntaxError: (<unknown>): found unknown escape character while parsing a quoted scalar at line 26 column 27 from /Users/biju/.rvm/rubies/ruby-2.2.7/lib/ruby/2.2.0/psych.rb:370:in `parse' from /Users/biju/.rvm/rubies/ruby-2.2.7/lib/ruby/2.2.0/psych.rb:370:in `parse_stream' from /Users/biju/.rvm/rubies/ruby-2.2.7/lib/ruby/2.2.0/psych.rb:318:in `parse' from /Users/biju/.rvm/rubies/ruby-2.2.7/lib/ruby/2.2.0/psych.rb:245:in `load' from (irb):18 from /Users/biju/.rvm/gems/ruby-2.2.7@yb/gems/railties-3.2.22.4/lib/rails/commands/console.rb:47:in `start' from /Users/biju/.rvm/gems/ruby-2.2.7@yb/gems/railties-3.2.22.4/lib/rails/commands/console.rb:8:in `start' from /Users/biju/.rvm/gems/ruby-2.2.7@yb/gems/railties-3.2.22.4/lib/rails/commands.rb:41:in `<top (required)>' from /Users/biju/projecty/script/rails:11:in `require' from /Users/biju/projecty/script/rails:11:in `<top (required)>' from -e:1:in `load' from -e:1:in `<main>'",I18n::InvalidLocaleData: I18n gem has issues in js export
How to access Sinatra port using Docker," I'm not sure how to a correctly expose the Sinatra port 4567 from Docker back to the host. Running the app locally has no issues.The following repository show cases the issue https://gitlab.com/davidhooey/sinatra-dockerFrom searching I noticed the following issue Running Ruby Sinatra inside a Docker container not able to connect (via Mac host) or find commands (in different scenario)? where the --host 0.0.0.0 is passed into the rackup command. However, I'm launching the site programmatically through using Site.run!.File tree app.rb In site.rb the :bind Sinatra setting is set to 0.0.0.0.site.rb Even still the site is inaccessible when run within a Docker container.Dockfile docker-compose.yml Local works: Docker not so much: Docker run example. Launch a bash shell into the running container to access Sinatra within the container. Any ideas are more than welcome on how to access the Sinatra port running within the container from the localhost when Sinatra is launched programmatically. <code>  . Dockerfile Gemfile Gemfile.lock README.md app.rb docker-compose.yml site.rb views index.erb module App class App def initialize(args) # Do some stuff before launching site. # Launch site Site.run! end endendApp::App.new(ARGV) require 'sinatra'module App class Site < Sinatra::Base set :bind, '0.0.0.0' set :static, true set :public_dir, File.expand_path(__dir__) get '/' do erb :'/index' end endend FROM ruby:2.2.6EXPOSE 4567RUN mkdir /appWORKDIR /appCOPY . /appRUN gem install bundler && bundle installCMD [""/bin/bash""] version: '3.2'services: app: build: . hostname: app ports: - ""4567:4567"" environment: - RUBYOPT=-W0 -KU -E utf-8:utf-8 volumes: - type: bind source: . target: /app ruby app.rb docker-compose builddocker-compose run --rm app ruby app.rb $ docker-compose run --rm app ruby app.rb[2018-07-27 14:21:10] INFO WEBrick 1.3.1[2018-07-27 14:21:10] INFO ruby 2.2.6 (2016-11-15) [x86_64-linux]== Sinatra (v2.0.3) has taken the stage on 4567 for development with backup from WEBrick[2018-07-27 14:21:10] INFO WEBrick::HTTPServer#start: pid=1 port=4567 $ docker exec -it aa8f64b009b0 bashroot@app:/app# curl localhost:4567<html lang=""en""> <head> <meta charset=""UTF-8""> <title>Sinatra Docker</title> </head>",How to access Sinatra port using Docker with docker-compose run
How do you run and debug Ruby on Rails from Visual Studio Code?, How can you launch Ruby on Rails using the built-in Visual Studio Code Launch/Debug features?How do you fix the Debugger terminal error: Process failed: spawn rdebug-ide ENOENT error? <code> ,How do you run and debug Ruby on Rails from Visual Studio Code?
External tests together with simplecov," I want to analyse the test coverage of our code , and therefore, installed the simplecov gem.Our testing environement has 2 seperate project: REST API test (Java+Rest-Assured) and Web UI testing (Java-Selenium).As you can see, we dont have unit testing inside the rails app, and we are testing using external projects.I configured the simplecov gem as descriped in the tutorial and put this, in the rails script: When loading the app, I see the string I printed.I ran both automation test projects, saw their printouts in the rails log, but I don't see any coverage of controllers/models, I see only small precentage of initializtion files of some gems and rails.I searched the net, and tried putting the code phrase in boot.rb or even puma.rb and it returned the same results.Any ideas?EDITNothing helped with all the comments, but I figured out something very interesting, in all cases, I only see the name of methods marked as tested, not the content (in controllers).I tried to put the simplecov start phrase in both bin/rails, puma.rb, config.ru, environment.rb, all not given the desired results of code coverage. <code>  require 'simplecov'SimpleCov.start 'rails'puts ""require simplecov""",Ruby on Rails test coverage with simplecov
Determine if the End of a String Overlaps with Beginning of a Separate String?," I want to find if the ending of a string overlaps with the beginning of separate string. For example if I have these two strings: How do I find that the ""but I"" part at the end of string_1 is the same as the beginning of string_2?I could write a method to loop over the two strings, but I'm hoping for an answer that has a Ruby string method that I missed or a Ruby idiom. <code>  string_1 = 'People say nothing is impossible, but I'string_2 = 'but I do nothing every day.'",Determine if the end of a string overlaps with beginning of a separate string
Array#push causes StackTooDeep error with large arrays," I made two arrays, each with 1 million items: I tried to push a2 into a1: This returns SystemStackError: stack level too deep.However, when I try with concat, I don't get the error: I also don't get the error with the splat operator: Why is this the case? I looked at the documentation for Array#push, and it is written in C. I suspect that it may be doing some recursion under the hood, and that's why it's causing this error for large arrays. Is this correct? Is it not a good idea to use push for large arrays? <code>  a1 = 1_000_000.times.to_aa2 = a1.clone a1.push *a2 a1.concat a2a1.length # => 2_000_000 a3 = [*a1, *a2]a3.length # => 2_000_000","Array#push causes ""stack level too deep"" error with large arrays"
Why use /apps/libs instead of /libs in Rails?," In the sidekiq documentation, there is this quote about preferring to use /app/lib instead of /lib in Rails projects related to autoloading errors:A lib/ directory will only cause pain. Move the code to app/lib/ and make sure the code inside follows the class/filename conventions.Additionally, there is also:Don't configure extra paths in autoload_paths or eager_load_paths. That's a hack; follow the conventions! Any directory underneath app/ may contain Ruby code, you don't need to explicitly configure anything.My questions are:Is there any truth to these statements that using /app/lib is better than /lib?Is this only helpful for autoloading Rails-related objects (such as AR models, controllers, jobs, etc)? Or will it also help POROs?Is there only a specific context in which these comments make sense? <code> ",Why use /app/lib instead of /lib in Rails?
Overriding a method with a setter in Ruby," The code below runs as intended however are they any disadvantages to override a method (see action_label in the code below) with the getter of an attribute? See the :action_label in the code <code>  class BaseAction def action_label raise NotImplementedError end def run puts ""Running action: #{action_label}"" yield endendclass SimpleAction < BaseAction def initialize(label) @action_label = label end private attr_reader :action_labelendsa = SimpleAction.new(""foo"")sa.run {puts ""action!""}",Overriding a method with a getter in Ruby
ruby - rotate Matrix anti-clockwise by one position," Given a 2D matrix: How can we rotate the matrix anti-clockwise so that values are pushed like this? NoteThis question is not a duplicate of this & this because what I'm trying to achieve is by rotating the values in anti-clockwise fashion.My current implementation & ProblemMy current implementation only prints out the values in anti-clockwise fashion, but it does not rotate the values. update v0.1The key idea is that the matrix needs to be rotated in the correct way. For example, let's say our matrix requires 2 rotation. Therefore: Update v0.2The dimension of the array is denoted: NxM where N and M can be any numbers, even or odd. For example 5x4, 4,4, 4x8 etc..There is no such thing as ""empty squares"". <code>  matrix = [ [ 1, 2, 3, 4 ], [ 5, 6, 7, 8 ], [ 9, 10, 11, 12 ], [ 13, 14, 15, 16 ]] matrix = [ [ 2, 3, 4, 8 ] [ 1, 7, 11, 12 ] [ 5, 6, 10, 16 ] [ 9, 13, 14, 15 ]] layers = [_rows, _cols].min / 2 r1, r2, c3, c4 = 0, _rows, _cols, _cols new_matrix = Array.new(_rows + 1) { Array.new(_cols + 1) } (0..layers).each do |layer| row_top_left, row_bottom_left, col_top_right, col_bottom_right = r1, r2, c3, c4 result = [] while row_top_left < row_bottom_left result << matrix[row_top_left][layer] row_top_left += 1 end row_bottom_left = layer while row_bottom_left < col_bottom_right result << matrix[row_top_left][row_bottom_left] row_bottom_left += 1 end temp_col_bottom_right = col_bottom_right temp_col_top_right = layer while col_bottom_right > temp_col_top_right result << matrix[col_bottom_right][temp_col_bottom_right] col_bottom_right -= 1 end # p row_top_left tmp_row_top_left = layer while col_top_right > tmp_row_top_left result << matrix[tmp_row_top_left][col_top_right] col_top_right -= 1 end p result.cycle r1 += 1 r2 -= 1 c3 -= 1 c4 -= 1 matrix_rotation( matrix.length - 1, # rows matrix[0].length - 1, # columns 2, # Nom. of rotation matrix # The matrix ) matrix = [ # Original Iter: 1 Iter: 2 [ 1, 2, 3, 4 ], # [ 2, 3, 4, 8 ] # [ 3, 4, 8, 12 ] [ 5, 6, 7, 8 ], # [ 1, 7, 11, 12 ] # [ 2, 11, 10, 16 ] [ 9, 10, 11, 12 ], # [ 5, 6, 10, 16 ] # [ 1, 7, 6, 15 ] [ 13, 14, 15, 16 ] # [ 9, 13, 14, 15 ] # [ 5, 9, 13, 14 ]]",ruby - rotate Matrix anti-clockwise by n position
"Why Ruby File.write() can slow down, sporadically?"," This is my code: In some cases, I see this in the log: Why is there occasionally such a spike? What could that be? I'm not using flock anywhere. My suspicion is that some library has overridden the method File.write() and added some locking/synchronization there. Is it possible?Update: It seems that Dir.new(), which regularly gets access to the directory, blocks access to it. <code>  start = Time.nowFile.write('/tmp/a.txt', 'Hello, world!')puts ""Saved in #{Time.now - start}"" Saved in 0.001Saved in 0.002Saved in 0.245Saved in 0.002",Why does `File.write` slow down sometimes?
last_sign_in_at Devise activation," Im trying to get the last sign in date time in RoR application using Devise gem. In one of my migration files I noticed the # t.datetime :last_sign_in_at field among others: So the question is: how to activate this field for my users to be able to call it later in my app? Should I just uncomment that? <code>  ## Trackable # t.integer :sign_in_count, default: 0, null: false # t.datetime :current_sign_in_at # t.datetime :last_sign_in_at # t.string :current_sign_in_ip # t.string :last_sign_in_ip",How do I add trackable to an existing Devise setup?
Why is instance_variable_set necessary in Ruby?," What's the point of instance_variable_set? Aren't these two lines the same? <code>  instance_variable_set(@name, value)@name = value""",Why is `instance_variable_set` necessary in Ruby?
Jekyll - Could not find 'jekyll' (Gem::LoadError)," I've recently discovered that the jekyll command doesn't work anymore on my computer, after perfectly using it for several months.Whenever I try to run a jekyll command, it says: I'm on macOS Sierra (10.12.6).Xcode is installedI have Xcode installed on my computer: Reinstalling JekyllChecking ruby version and (re)installing bundlerSo I tried reinstalling Jekyll as I did the first time: Creating a GemfileI created a Gemfile which contains: Bundle install (here come the issues)And ran, in the directory that contains the Gemfile: Here, the installation doesn't work, it says: So I tried the gem install commonmarker -v '0.17.13' --source 'https://rubygems.org/' command, and it says: I noticed that I have several jekyll and github-pages gems in my /Library/Ruby/Gems/2.0.0/gems (2.0.0) directory: But not in my /Library/Ruby/Gems/2.3.0/gems (2.3.0) directory! (the one which seems to be targeted by the GEM_PATH when running a jekyll command)So, maybe I did something that changed the version or something. (I've recently installed osxfuse and sshfs (via brew), I don't know if it has anything to do with the issue?)I don't know anything about Ruby, Gems system, and so on. Maybe the solution is obvious but I've tried several things with no success.(Sorry it's a bit long but I wanted to be as clear as possible!) <code>  /System/Library/Frameworks/Ruby.framework/Versions/2.3/usr/lib/ruby/2.3.0/rubygems/dependency.rb:319:in `to_specs': Could not find 'jekyll' (>= 0) among 34 total gem(s) (Gem::LoadError)Checked in 'GEM_PATH=/Users/Mael/.gem/ruby/2.3.0:/Library/Ruby/Gems/2.3.0:/System/Library/Frameworks/Ruby.framework/Versions/2.3/usr/lib/ruby/gems/2.3.0', execute `gem env` for more information from /System/Library/Frameworks/Ruby.framework/Versions/2.3/usr/lib/ruby/2.3.0/rubygems/dependency.rb:328:in `to_spec' from /System/Library/Frameworks/Ruby.framework/Versions/2.3/usr/lib/ruby/2.3.0/rubygems/core_ext/kernel_gem.rb:65:in `gem' from /usr/local/bin/jekyll:22:in `<main>' $ xcode-select --installxcode-select: error: command line tools are already installed, use ""Software Update"" to install updates $ ruby -vruby 2.3.7p456 (2018-03-28 revision 63024) [universal.x86_64-darwin16]$ sudo gem install bundlerSuccessfully installed bundler-1.17.1Parsing documentation for bundler-1.17.1Done installing documentation for bundler after 4 seconds1 gem installed gem 'github-pages'source 'https://rubygems.org' $ bundle install An error occurred while installing commonmarker (0.17.13), and Bundler cannot continue.Make sure that `gem install commonmarker -v '0.17.13' --source 'https://rubygems.org/'` succeeds before bundling.In Gemfile: github-pages was resolved to 192, which depends on jekyll-commonmark-ghpages was resolved to 0.1.5, which depends on jekyll-commonmark was resolved to 1.2.0, which depends on commonmarker Building native extensions. This could take a while...ERROR: Error installing commonmarker: ERROR: Failed to build gem native extension. current directory: /Library/Ruby/Gems/2.3.0/gems/commonmarker-0.17.13/ext/commonmarker/System/Library/Frameworks/Ruby.framework/Versions/2.3/usr/bin/ruby -r ./siteconf20181112-6105-u9aca2.rb extconf.rbcreating Makefilecurrent directory: /Library/Ruby/Gems/2.3.0/gems/commonmarker-0.17.13/ext/commonmarkermake ""DESTDIR="" cleancurrent directory: /Library/Ruby/Gems/2.3.0/gems/commonmarker-0.17.13/ext/commonmarkermake ""DESTDIR=""make: *** No rule to make target `/Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.13.sdk/System/Library/Frameworks/Ruby.framework/Versions/2.3/usr/include/ruby-2.3.0/universal-darwin16/ruby/config.h', needed by `arena.o'. Stop.make failed, exit code 2Gem files will remain installed in /Library/Ruby/Gems/2.3.0/gems/commonmarker-0.17.13 for inspection.Results logged to /Library/Ruby/Gems/2.3.0/extensions/universal-darwin-16/2.3.0/commonmarker-0.17.13/gem_make.out github-pages-146github-pages-health-check-1.3.5...jekyll-3.4.5jekyll-avatar-0.4.2jekyll-coffeescript-1.0.1[and several other jekyll directories]...",Why is my jekyll command not working anymore?
Jekyll - Could not find 'jekyll' (Gem::LoadError) when running it," I've recently discovered that the jekyll command doesn't work anymore on my computer, after perfectly using it for several months.Whenever I try to run a jekyll command, it says: I'm on macOS Sierra (10.12.6).Xcode is installedI have Xcode installed on my computer: Reinstalling JekyllChecking ruby version and (re)installing bundlerSo I tried reinstalling Jekyll as I did the first time: Creating a GemfileI created a Gemfile which contains: Bundle install (here come the issues)And ran, in the directory that contains the Gemfile: Here, the installation doesn't work, it says: So I tried the gem install commonmarker -v '0.17.13' --source 'https://rubygems.org/' command, and it says: I noticed that I have several jekyll and github-pages gems in my /Library/Ruby/Gems/2.0.0/gems (2.0.0) directory: But not in my /Library/Ruby/Gems/2.3.0/gems (2.3.0) directory! (the one which seems to be targeted by the GEM_PATH when running a jekyll command)So, maybe I did something that changed the version or something. (I've recently installed osxfuse and sshfs (via brew), I don't know if it has anything to do with the issue?)I don't know anything about Ruby, Gems system, and so on. Maybe the solution is obvious but I've tried several things with no success.(Sorry it's a bit long but I wanted to be as clear as possible!) <code>  /System/Library/Frameworks/Ruby.framework/Versions/2.3/usr/lib/ruby/2.3.0/rubygems/dependency.rb:319:in `to_specs': Could not find 'jekyll' (>= 0) among 34 total gem(s) (Gem::LoadError)Checked in 'GEM_PATH=/Users/Mael/.gem/ruby/2.3.0:/Library/Ruby/Gems/2.3.0:/System/Library/Frameworks/Ruby.framework/Versions/2.3/usr/lib/ruby/gems/2.3.0', execute `gem env` for more information from /System/Library/Frameworks/Ruby.framework/Versions/2.3/usr/lib/ruby/2.3.0/rubygems/dependency.rb:328:in `to_spec' from /System/Library/Frameworks/Ruby.framework/Versions/2.3/usr/lib/ruby/2.3.0/rubygems/core_ext/kernel_gem.rb:65:in `gem' from /usr/local/bin/jekyll:22:in `<main>' $ xcode-select --installxcode-select: error: command line tools are already installed, use ""Software Update"" to install updates $ ruby -vruby 2.3.7p456 (2018-03-28 revision 63024) [universal.x86_64-darwin16]$ sudo gem install bundlerSuccessfully installed bundler-1.17.1Parsing documentation for bundler-1.17.1Done installing documentation for bundler after 4 seconds1 gem installed gem 'github-pages'source 'https://rubygems.org' $ bundle install An error occurred while installing commonmarker (0.17.13), and Bundler cannot continue.Make sure that `gem install commonmarker -v '0.17.13' --source 'https://rubygems.org/'` succeeds before bundling.In Gemfile: github-pages was resolved to 192, which depends on jekyll-commonmark-ghpages was resolved to 0.1.5, which depends on jekyll-commonmark was resolved to 1.2.0, which depends on commonmarker Building native extensions. This could take a while...ERROR: Error installing commonmarker: ERROR: Failed to build gem native extension. current directory: /Library/Ruby/Gems/2.3.0/gems/commonmarker-0.17.13/ext/commonmarker/System/Library/Frameworks/Ruby.framework/Versions/2.3/usr/bin/ruby -r ./siteconf20181112-6105-u9aca2.rb extconf.rbcreating Makefilecurrent directory: /Library/Ruby/Gems/2.3.0/gems/commonmarker-0.17.13/ext/commonmarkermake ""DESTDIR="" cleancurrent directory: /Library/Ruby/Gems/2.3.0/gems/commonmarker-0.17.13/ext/commonmarkermake ""DESTDIR=""make: *** No rule to make target `/Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.13.sdk/System/Library/Frameworks/Ruby.framework/Versions/2.3/usr/include/ruby-2.3.0/universal-darwin16/ruby/config.h', needed by `arena.o'. Stop.make failed, exit code 2Gem files will remain installed in /Library/Ruby/Gems/2.3.0/gems/commonmarker-0.17.13 for inspection.Results logged to /Library/Ruby/Gems/2.3.0/extensions/universal-darwin-16/2.3.0/commonmarker-0.17.13/gem_make.out github-pages-146github-pages-health-check-1.3.5...jekyll-3.4.5jekyll-avatar-0.4.2jekyll-coffeescript-1.0.1[and several other jekyll directories]...",Why is my jekyll command not working anymore?
What are the performance reasons to prefer size over either length or count?, In Airbnb's Ruby Style Guide one suggestion reads:Prefer size over either length or count for performance reasons.What would these performance reasons be? <code> ,Are there performance reasons to prefer size over length or count in Ruby?
invisible recaptcha won't work unless use e.preventDefault()," I am using the recaptcha gem. Rails 5.2.I have the following form: I have added the following javascript for the form: I check the value from the recaptcha in my controller as follows: It all works as long as I use the e.preventDefault(); line. If I remove this line I get a failure with the recaptcha and I can see in the parameters that the recaptcha attriburte is sending in blank data.I don't understand why I need it as none of the documentation specify it. So I'm doing something wrong but I can't figure it out.Can anyone see how I can fix this? <code>  = simple_form_for @quote_request_form, url: quote_requests_path, html: {id: ""invisible-recaptcha-form""} do |f| .form-group = f.input :name, label: false, placeholder: 'First and Last Name', .form-group.actions.mt-5 button.btn.btn-primary.btn-lg.btn-block#submit-btn Submit = invisible_recaptcha_tags ui: :invisible, callback: 'submitInvisibleRecaptchaForm' javascript: document.getElementById('submit-btn').addEventListener('click', function (e) { e.preventDefault(); grecaptcha.execute(); }); var submitInvisibleRecaptchaForm = function () { document.getElementById(""invisible-recaptcha-form"").submit(); }; if verify_recaptcha(model: @quote_request_form) && @quote_request_form.save redirect_to quote_confirm_path, notice: ""Your quotation request is being processed"" else render :new end",invisible recaptcha submitting form before getting data
HTTParty GET is sending a GET," I'm hitting Github's v3 rest api, I'm making a POST request attempting to create a comment on a test PR. I'm getting back a 200 response, and upon inspecting the request, it was sent as a GET, not a POST: The response body is a list of all the comments on that PR, which is the GET request to that same url. I have no idea why it's not sending a POST. Any help is appreciated. <code>  response = HTTParty.post( ""http://api.github.com/repos/my_github/my_repo/issues/1/comments"", body: { body: ""works"" }.to_json, headers: { ""Authorization"": ""Bearer #{ENV['GITHUB_TOKEN']}"", ""Content-Type"": ""application/json"", ""User-Agent"": ENV[""GITHUB_USER_AGENT""] })response.request=> #<HTTParty::Request:0x007fdd45a42688 @http_method=Net::HTTP::Get, @last_response=#<Net::HTTPOK 200 OK readbody=true>, @last_uri=#<URI::HTTPS https://api.github.com/repos/my_github/my_repo/issues/1/comments>, @options= {:limit=>4, :assume_utf16_is_big_endian=>true, :default_params=>{}, :follow_redirects=>true, :parser=>HTTParty::Parser, :uri_adapter=>URI, :connection_adapter=>HTTParty::ConnectionAdapter, :body=>{:body=>""works""}, :headers=> {:Authorization=>""Bearer my_token"", :Accept=>""application/vnd.github.machine-man-preview+json"", :""Content-Type""=>""application/json"", :""User-Agent""=>""me""}}, @path=#<URI::HTTPS https://api.github.com/repos/my_github/my_repo/issues/1/comments>,",HTTParty POST is sending a GET
can't find gem bundler (>= 0.a) with executable bundle (Gem::GemNotFoundException) during bundle install with gem," I'm executing the following script: output: I've added /srv/myuser/.gem/ruby/2.5.0/bin to my path so I was able to install gems.the gem env shows gem list shows the installed gems.I can also find bundle when I perform: I've also tried to install bundler but that didn't also help.What am I doing wrong?gem which bundle is showing nothing.gem spec bundle is showing it.Update: I tried to install bundler before running bundle but the same issue appears while:gem list bundle shows <code>  gem install rdoc --no-documentgem install bundlebundle + gem install rdoc --no-documentSuccessfully installed rdoc-6.1.11 gem installed+ gem install bundleSuccessfully installed bundle-0.0.1Parsing documentation for bundle-0.0.1Done installing documentation for bundle after 2 seconds1 gem installed1 gem installed+ bundle install/usr/lib/ruby/2.5.0/rubygems.rb:289:in `find_spec_for_exe': can't find gem bundler (>= 0.a) with executable bundle (Gem::GemNotFoundException) from /usr/lib/ruby/2.5.0/rubygems.rb:308:in `activate_bin_path' from /srv/myuser/.gem/ruby/2.5.0/bin/bundle:23:in `<main>' RubyGems Environment: - RUBYGEMS VERSION: 2.7.7 - RUBY VERSION: 2.5.1 (2018-03-29 patchlevel 57) [x86_64-linux] - INSTALLATION DIRECTORY: /usr/lib/ruby/gems/2.5.0 - USER INSTALLATION DIRECTORY: /srv/myuser/.gem/ruby/2.5.0 - RUBY EXECUTABLE: /usr/bin/ruby - EXECUTABLE DIRECTORY: /usr/bin - SPEC CACHE DIRECTORY: /srv/myuser/.gem/specs - SYSTEM CONFIGURATION DIRECTORY: /etc - RUBYGEMS PLATFORMS: - ruby - x86_64-linux - GEM PATHS: - /usr/lib/ruby/gems/2.5.0 - /srv/myuser/.gem/ruby/2.5.0 - GEM CONFIGURATION: - :update_sources => true - :verbose => true - :backtrace => false - :bulk_threshold => 1000 - ""gem"" => ""--user-install"" - REMOTE SOURCES: - https://rubygems.org/ - SHELL PATH: - /usr/local/sbin - /usr/local/bin - /usr/bin ls -ltrah /srv/myuser/.gem/ruby/2.5.0/bin bundle (0.0.1)bundler (2.0.1)",Bundler: can't find gem bundler (>= 0.a) with executable bundle (Gem::GemNotFoundException) during bundle install with gem
Shoulda-matchers belong_to optional test," I have a model The spec for this model looks like thisrequire 'rails_helper' But when I run this spec I get this error1) Certificate is expected to belong to share_class optional: true I do not know why I'm getting this error. <code>  class Certificate < ApplicationRecord notification_object belongs_to :user belongs_to :share_class, optional: true belongs_to :round, optional: true belongs_to :company, optional: true has_many :approvals, as: :votableend RSpec.describe Certificate, type: :model do it { should belong_to(:user) } it { should belong_to(:share_class).optional } it { should belong_to(:round).optional } it { should belong_to(:company).optional } it { should have_many(:approvals) } end Failure/Error: it { should belong_to(:share_class).optional } Expected Certificate to have a belongs_to association called share_class (the association should have been defined with`optional: true`, but was not) # ./spec/models/certificate_spec.rb:5:in `block (2 levels) in <top (required)>'",Rails: Shoulda-matchers belong_to optional test
"How to fix ""s3_webisite"" issue while pushing Jekyll site on CloudFront through gitlab CI/CD?"," I have created Pipeline in GitLabs and I am using docker as gitlab-runner. I want to push Jekyll website on s3 website. And to do so, I am using s3_website gem. I have 4 stages defined in my pipeline. Where I am building Jekyll, creating Artifacts using Gulp, executing test on my jekyll site and then deploying.All steps are working fine but while doing deployment, I'm getting following error. And i could not figure it how to get this solve. It is working perfectly fine on my local machine when I'm not on Docker. But when I try to do the same thing using docker. It is giving me above error.I tried it with ruby 2.3, 2.4, 2.5, 2.6 on my docker machine. However no luck. I am expecting this to deploy the site on S3 bucket and corresponding cloudfront. Any clue would be appreciated.  <code>  [fail] Could not load the site: Failed to parse ERB in /builds/myproject/s3_website.yml: (SyntaxError) /usr/local/lib/ruby/site_ruby/2.4.0/rubygems/core_ext/kernel_warn.rb:15: syntax error, unexpected tLABEL module_function define_method(:warn) {|*messages, uplevel: nil| bundle exec s3_website push","How to fix ""s3_website"" issue while pushing Jekyll site on CloudFront through gitlab CI/CD?"
"in ruby, why am I able to declare an instance variable outside of initialize method?"," I have been taught to declare my instance variables with def initialize. I have been under the impression that I could declare instance variables only within my initialize methods.Nevertheless, I declared an instance variable @foo outside my initialize method, and made it work as I intended: Why am I able to declare an instance variable outside of initialize method? Since I can declare instance variables in any method, is there a best practices rule I should follow, regarding where to declare instance variables (i.e., declare them within initialize) or does it not matter? <code>  class FooBar def initialize(bar) @bar = bar end def foo_as_instance_var @foo = @bar.split(' ') @foo endendx = ""something wicked this way comes""y = FooBar.new(x)puts y.foo_as_instance_var",Declaring an instance variable outside of `initialize` method
`selenium-webdriver` ruby gem cannot connect with chromedriver on Ubuntu 16.04," I'm running Ubuntu 16.04 and I'm trying to run a headless Chrome browser in ruby with chromedriver. I've installed chromedriver on Ubuntu using these instructions and then I run this via the ruby irb console: Any idea on how to fix it? A few notes:Some people seem to encounter issues with rbenv and the shim that it sets up. I'm not using rbenv at all, so that's irrelevant here.The above works when I try it on my OSx laptop. Of course there I can easily install chromedriver with brew install chromedriver and it just seems to workAlternatively, I uninstalled chromedriver and re-installed it using the chromedriver-helper gem. Still the same result.I've been tearing my hair out for a while on this - any help would be appreciated. Thanks!UPDATE I dug deeper into the source of the selenium-webdriver gem to see exactly what it was doing when trying to connect to the chromedriver process. I was able to replicate the following in my ruby console on the server using the same commands the selenium-webdriver gem uses: So it seems the core error is that the socket refuses to connect on that (local) address and port, even though chromedriver is very much running on that port. I don't know much about sockets at all - is this a common error? Thanks! <code>  require 'selenium-webdriver'options = Selenium::WebDriver::Chrome::Options.newoptions.add_argument('--headless')@driver = Selenium::WebDriver.for(:chrome, options: options)Traceback (most recent call last): 10: from /home/weefee/.rvm/rubies/ruby-2.5.1/bin/irb:11:in `<main>' 9: from (irb):5 8: from /home/weefee/.rvm/gems/ruby-2.5.1/gems/selenium-webdriver-3.141.0/lib/selenium/webdriver.rb:86:in `for' 7: from /home/weefee/.rvm/gems/ruby-2.5.1/gems/selenium-webdriver-3.141.0/lib/selenium/webdriver/common/driver.rb:44:in `for' 6: from /home/weefee/.rvm/gems/ruby-2.5.1/gems/selenium-webdriver-3.141.0/lib/selenium/webdriver/common/driver.rb:44:in `new' 5: from /home/weefee/.rvm/gems/ruby-2.5.1/gems/selenium-webdriver-3.141.0/lib/selenium/webdriver/chrome/driver.rb:44:in `initialize' 4: from /home/weefee/.rvm/gems/ruby-2.5.1/gems/selenium-webdriver-3.141.0/lib/selenium/webdriver/common/service.rb:69:in `start' 3: from /home/weefee/.rvm/gems/ruby-2.5.1/gems/selenium-webdriver-3.141.0/lib/selenium/webdriver/common/socket_lock.rb:39:in `locked' 2: from /home/weefee/.rvm/gems/ruby-2.5.1/gems/selenium-webdriver-3.141.0/lib/selenium/webdriver/common/service.rb:72:in `block in start' 1: from /home/weefee/.rvm/gems/ruby-2.5.1/gems/selenium-webdriver-3.141.0/lib/selenium/webdriver/common/service.rb:142:in `connect_until_stable'Selenium::WebDriver::Error::WebDriverError (unable to connect to chromedriver 127.0.1.1:9515) ## Start the Chromedriver Process#require 'childprocess'process = ChildProcess.build(*[""/usr/local/bin/chromedriver"", ""--port=9515""])process.leader = trueprocess.alive? #=> falseprocess.startprocess.alive? #=> true## Create a Socket connection to 127.0.0.1:9515#require 'socket'require 'selenium-webdriver'host = Selenium::WebDriver::Platform.localhost #=> ""127.0.1.1""port = Integer(Selenium::WebDriver::Chrome::Service::DEFAULT_PORT) #=> 9515timeout = 5# Create and connect to socketaddr = Socket.getaddrinfo(host, port, Socket::AF_INET, Socket::SOCK_STREAM)sock = Socket.new(Socket::AF_INET, Socket::SOCK_STREAM, 0)sockaddr = Socket.pack_sockaddr_in(port, addr[0][3])# First need to rescue the writable error and then connect again# to get the actual error. No idea why but even the official# rubydocs use this pattern: https://apidock.com/ruby/Socket/connect_nonblockbegin sock.connect_nonblock(sockaddr)rescue IO::WaitWritable IO.select(nil, [sock], nil, 5) sock.connect_nonblock(sockaddr)end#=> Errno::ECONNREFUSED (Connection refused - connect(2) for 127.0.1.1:9515)",`selenium-webdriver` ruby gem cannot connect with chromedriver on Ubuntu 14.04
How can i download internet image in rails using image URL and save to local disk(computer)?," I have a form to add image url form,If user adds image url I want to download the image and save to local disk(home/documents/image) I create image model and controller..need help plsin image model in image controller in image/index.html.erb but getting error <code>  class Image < ApplicationRecord has_one_attached :image require 'open-uri' image = open('http://example.com/image.png') IO.copy_stream(image, '~/home/Documents/Images/local_image.png')end class ImagesController < ApplicationController def index @image = Image.new endend <%= form_for(@image, url: images_path) do |f| %> <%= f.text_field :image_url %> <%=f.submit%><% end %> OpenURI::HTTPError in ImagesController#index 404 not found",How can I download image from URL in rails using and save it to local disk(computer)?
ruby-build cannot be built with any available compilers," For example, I tried to run brew upgrade ruby-build.That failed with error: When I ran brew install gcc , I got: How can I upgrade ruby-build via brew? <code>  CompilerSelectionError: ruby-build cannot be built with any available compilers.Install GNU's GCC brew install gcc Warning: Building gcc from source: The bottle needs the Xcode CLT to be installed.xcrun: error: invalid active developer path (/Library/Developer/CommandLineTools), missing xcrun at: /Library/Developer/CommandLineTools/usr/bin/xcrunError: An exception occurred within a child process: CompilerSelectionError: gcc cannot be built with any available compilers.Install GNU's GCC brew install gcc","`brew upgrade <package>`: ""<package> cannot be built with any available compilers"""
"Where does active storage store files, and how can I retrieve them physically?"," I am using active storage with Rails 5.2. I am following the EdgeRails guide, and have configured Active-Storage to use the local disk.The file uploads work great when I am using the Rails App.However, the problem is that I need to physically access those uploaded files without using Rails as a mediator.A query for where the files are stored returns this: I am trying to figure out where this file path is saved in my local disk. So far, I've had no luck.Any explanations about how Active-Storage works and where I can see the uploaded files are greatly appreciated. <code>  url_for(@employee_staff.avatar)=> ""/rails/active_storage/blobs/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBGUT09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--e76664d247cb5437fe1cd11f7ee0ded24f95aee2/profilepic3.jpeg""","Where does active storage store files (on disk), and how can I retrieve them physically?"
Can't install Ruby on Mac OS Mojave 10.14.3," PROBLEMI am trying to download ruby 2.6.1 on Mac OS Mojave 10.14.3 but I keep getting failed builds and I'm not sure what the error is.Please help! Completely lost :(Current setup: . ATTEMPTED FIXESI've tried unsetting RUBY_CFLAGS, deleting/ redownloading command line tools/ rbenv/rvm, changing my developer directory to /Library/Developer/CommandLineTools. Really not sure where to go from here.CODEI've tried both and RESULTSExpected result: ruby build successful.Actual result: Ruby Build Log from Config Summary onwards:  <code>  > rbenv install --versionruby-build 20190130> llvm-gcc --versionApple LLVM version 10.0.0 (clang-1000.11.45.5) Target: x86_64-apple-darwin18.2.0 Thread model: posixInstalledDir: /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin> xcode-select -print-path/Applications/Xcode.app/Contents/Developer rbenv install 2.6.1 CC=gcc rbenv install 2.6.1 BUILD FAILED (OS X 10.14.3 using ruby-build 20190130)Inspect or clean up the working tree at /var/folders/0k/yx4v818d37v50bw7xmr8bvlh0000gn/T/ruby-build.20190210231226.58235Results logged to /var/folders/0k/yx4v818d37v50bw7xmr8bvlh0000gn/T/ruby-build.20190210231226.58235.logLast 10 log lines:transform_mjit_header: SKIPPED to transform __inline_isnandtransform_mjit_header: SKIPPED to transform __inline_isnanftransform_mjit_header: SKIPPED to transform __inline_isinfltransform_mjit_header: SKIPPED to transform __inline_isinfdtransform_mjit_header: SKIPPED to transform __inline_isinfftransform_mjit_header: SKIPPED to transform __inline_isfiniteltransform_mjit_header: SKIPPED to transform __inline_isfinitedtransform_mjit_header: SKIPPED to transform __inline_isfiniteftransform_mjit_header: SKIPPED to transform __sputcln -sf ../../../.ext/include/x86_64-darwin18/rb_mjit_min_header-2.6.1.h include/ruby-2.6.0/x86_64-darwin18/rb_mjit_min_header-2.6.1.h Configuration summary for ruby version 2.6.1 * Installation prefix: /Users/michelleslee/.rbenv/versions/2.6.1 * exec prefix: ${prefix} * arch: x86_64-darwin18 * site arch: ${arch} * RUBY_BASE_NAME: ruby * ruby lib prefix: ${libdir}/${RUBY_BASE_NAME} * site libraries path: ${rubylibprefix}/${sitearch} * vendor path: ${rubylibprefix}/vendor_ruby * target OS: darwin18 * compiler: $(CC_WRAPPER) gcc * with pthread: yes * enable shared libs: no * dynamic library ext: bundle * CFLAGS: ${optflags} ${debugflags} ${warnflags} * LDFLAGS: -L. \ -L/Users/michelleslee/.rbenv/versions/2.6.1/lib \ -Wl,-pie -Wl,-headerpad_max_install_names \ -Wl,-dead_strip_dylibs -fstack-protector-strong \ -L/usr/local/lib * DLDFLAGS: -L/Users/michelleslee/.rbenv/versions/2.6.1/lib \ -Wl,-pie -Wl,-headerpad_max_install_names \ -Wl,-dead_strip_dylibs \ -Wl,-undefined,dynamic_lookup \ -Wl,-multiply_defined,suppress * optflags: -O3 * debugflags: -ggdb3 * warnflags: -Wall -Wextra -Wdeclaration-after-statement \ -Wdeprecated-declarations -Wdivision-by-zero \ -Wimplicit-function-declaration -Wimplicit-int \ -Wpointer-arith -Wshorten-64-to-32 \ -Wwrite-strings -Wmissing-noreturn \ -Wno-constant-logical-operand -Wno-long-long \ -Wno-missing-field-initializers \ -Wno-overlength-strings -Wno-parentheses-equality \ -Wno-self-assign -Wno-tautological-compare \ -Wno-unused-parameter -Wno-unused-value \ -Wunused-variable -Wextra-tokens * strip command: /anaconda3/bin/x86_64-apple-darwin13.4.0-strip -A \ -n * install doc: yes * JIT support: yes * man page type: doc--- BASERUBY = /usr/bin/ruby --disable=gems CC = ./tool/darwin-cc gcc LD = /anaconda3/bin/x86_64-apple-darwin13.4.0-ld LDSHARED = ./tool/darwin-cc gcc -dynamiclib CFLAGS = -march=core2 -mtune=haswell -mssse3 -ftree-vectorize -fPIC -fPIE -fstack-protector-strong -O2 -pipe XCFLAGS = -D_FORTIFY_SOURCE=2 -fstack-protector-strong -fno-strict-overflow -fvisibility=hidden -DRUBY_EXPORT -fPIE -DCANONICALIZATION_FOR_MATHN CPPFLAGS = -I/Users/michelleslee/.rbenv/versions/2.6.1/include -D_FORTIFY_SOURCE=2 -mmacosx-version-min=10.9 -D_XOPEN_SOURCE -D_DARWIN_C_SOURCE -D_DARWIN_UNLIMITED_SELECT -D_REENTRANT -I. -I.ext/include/x86_64-darwin18 -I./include -I. -I./enc/unicode/11.0.0 DLDFLAGS = -L/Users/michelleslee/.rbenv/versions/2.6.1/lib -Wl,-pie -Wl,-headerpad_max_install_names -Wl,-dead_strip_dylibs -Wl,-undefined,dynamic_lookup -Wl,-multiply_defined,suppress -fstack-protector-strong -Wl,-pie -framework Security -framework Foundation SOLIBS = -lpthread -ldl -lobjc LANG = LC_ALL = LC_CTYPE = UTF-8Apple LLVM version 10.0.0 (clang-1000.11.45.5)Target: x86_64-apple-darwin18.2.0Thread model: posixInstalledDir: /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/binConfigured with: --prefix=/Applications/Xcode.app/Contents/Developer/usr --with-gxx-include-dir=/usr/include/c++/4.2.1compiling ./main.ccompiling dmydln.ccompiling miniinit.ccompiling dmyext.ccompiling miniprelude.ctranslating probes probes.dcompiling ast.ccompiling bignum.ccompiling class.ccompiling compar.c. ./vm_opts.hcompiling compile.ccompiling complex.ccompiling cont.ccompiling debug.ccompiling debug_counter.ccompiling dir.ccompiling dln_find.ccompiling encoding.ccompiling enum.ccompiling enumerator.ccompiling error.ccompiling eval.ccompiling file.ccompiling gc.ccompiling hash.ccompiling inits.ccompiling io.ccompiling iseq.ccompiling load.ccompiling marshal.cfile.c:2679:6: warning: 'utimensat' is only available on macOS 10.13 or newer [-Wunguarded-availability-new] if (utimensat(AT_FDCWD, path, tsp, flags) < 0) { ^~~~~~~~~/usr/include/sys/stat.h:374:5: note: 'utimensat' has been explicitly marked partial hereint utimensat(int __fd, const char *__path, const struct timespec __times[2], ^file.c:2679:6: note: enclose 'utimensat' in a __builtin_available check to silence this warning if (utimensat(AT_FDCWD, path, tsp, flags) < 0) { ^~~~~~~~~1 warning generated.compiling math.cmaking mjit_config.hcompiling mjit_compile.ccompiling node.ccompiling numeric.ccompiling object.ccompiling pack.ccompiling parse.ccompiling proc.ccompiling process.ccompiling random.ccompiling range.ccompiling rational.ccompiling re.ccompiling regcomp.ccompiling regenc.ccompiling regerror.ccompiling regexec.ccompiling regparse.ccompiling regsyntax.ccompiling ruby.ccompiling safe.ccompiling signal.ccompiling sprintf.ccompiling st.ccompiling strftime.ccompiling string.ccompiling struct.ccompiling symbol.ccompiling thread.ccompiling time.ccompiling transcode.ccompiling transient_heap.ccompiling util.ccompiling variable.c./revision.h unchangedcompiling vm.ccompiling vm_backtrace.ccompiling vm_dump.ccompiling vm_trace.ccompiling ./missing/explicit_bzero.ccompiling ./missing/setproctitle.ccompiling addr2line.ccompiling dmyenc.ccompiling dln.ccompiling localeinit.ccompiling prelude.cconfig.status: creating ruby-runner.hcompiling array.ccompiling mjit.cassembling coroutine/amd64/Context.Scompiling enc/ascii.ccompiling enc/us_ascii.ccompiling enc/unicode.ccompiling enc/utf_8.ccompiling enc/trans/newline.ccompiling version.cbuilding rb_mjit_header.hlinking minirubyrb_mjit_header.h updatedwarning: no debug symbols in executable (-arch x86_64)warning: no debug symbols in executable (-arch x86_64)generating encdb.hbuilding .ext/include/x86_64-darwin18/rb_mjit_min_header-2.6.1.h./miniruby -I./lib -I. -I.ext/common ./tool/transform_mjit_header.rb ""./tool/darwin-cc gcc "" rb_mjit_header.h .ext/include/x86_64-darwin18/rb_mjit_min_header-2.6.1.hencdb.h updated./tool/ifchange ""--timestamp=.rbconfig.time"" rbconfig.rb rbconfig.tmprbconfig.rb updatedgenerating enc.mkcreating verconf.hverconf.h updatedcompiling loadpath.cmaking srcs under enclinking static-library libruby.2.6-static.a/anaconda3/bin/x86_64-apple-darwin13.4.0-ar: illegal option -- nusage: ar -d [-TLsv] archive file ... ar -m [-TLsv] archive file ... ar -m [-abiTLsv] position archive file ... ar -p [-TLsv] archive [file ...] ar -q [-cTLsv] archive file ... ar -r [-cuTLsv] archive file ... ar -r [-abciuTLsv] position archive file ... ar -t [-TLsv] archive [file ...] ar -x [-ouTLsv] archive [file ...]make: *** [Makefile:286: libruby.2.6-static.a] Error 1make: *** Waiting for unfinished jobs....make[1]: Entering directory '/private/var/folders/0k/yx4v818d37v50bw7xmr8bvlh0000gn/T/ruby-build.20190210231226.58235/ruby-2.6.1'make[1]: Nothing to be done for 'srcs'.make[1]: Leaving directory '/private/var/folders/0k/yx4v818d37v50bw7xmr8bvlh0000gn/T/ruby-build.20190210231226.58235/ruby-2.6.1'Transforming external functions to static:transform_mjit_header: making external definition of 'Init_vm_stack_canary' static inlinetransform_mjit_header: making external definition of 'rb_vm_opt_struct_aset' static inlinetransform_mjit_header: making external definition of 'rb_vm_opt_struct_aref' static inlinetransform_mjit_header: making external definition of 'rb_eql_opt' static inlinetransform_mjit_header: changing definition of 'rb_equal_opt' to declarationtransform_mjit_header: changing definition of 'rb_vm_search_method_slowpath' to declarationtransform_mjit_header: making external definition of 'rb_vm_rewrite_cref' static inlinetransform_mjit_header: making external definition of 'rb_vm_push_frame' static inlinetransform_mjit_header: making external definition of 'rb_vm_block_ep_update' static inlinetransform_mjit_header: making external definition of 'rb_vm_cref_new_toplevel' static inlinetransform_mjit_header: making external definition of 'rb_vm_frame_block_handler' static inlinetransform_mjit_header: making external definition of 'rb_vm_ep_local_ep' static inlinetransform_mjit_header: making declaration of 'rb_vm_rewrite_cref' static inlinetransform_mjit_header: making declaration of 'rb_vm_frame_block_handler' static inlinetransform_mjit_header: making declaration of 'rb_vm_block_ep_update' static inlinetransform_mjit_header: making declaration of 'rb_vm_ep_local_ep' static inlinetransform_mjit_header: SKIPPED to transform __sigbitstransform_mjit_header: making declaration of 'Init_vm_stack_canary' static inlinetransform_mjit_header: making declaration of 'rb_eql_opt' static inlinetransform_mjit_header: SKIPPED to transform __sincospitransform_mjit_header: SKIPPED to transform __sincospiftransform_mjit_header: SKIPPED to transform __sincostransform_mjit_header: SKIPPED to transform __sincosftransform_mjit_header: SKIPPED to transform __inline_isnormalltransform_mjit_header: SKIPPED to transform __inline_isnormaldtransform_mjit_header: SKIPPED to transform __inline_isnormalftransform_mjit_header: SKIPPED to transform __inline_signbitltransform_mjit_header: SKIPPED to transform __inline_signbitdtransform_mjit_header: SKIPPED to transform __inline_signbitftransform_mjit_header: SKIPPED to transform __inline_isnanltransform_mjit_header: SKIPPED to transform __inline_isnandtransform_mjit_header: SKIPPED to transform __inline_isnanftransform_mjit_header: SKIPPED to transform __inline_isinfltransform_mjit_header: SKIPPED to transform __inline_isinfdtransform_mjit_header: SKIPPED to transform __inline_isinfftransform_mjit_header: SKIPPED to transform __inline_isfiniteltransform_mjit_header: SKIPPED to transform __inline_isfinitedtransform_mjit_header: SKIPPED to transform __inline_isfiniteftransform_mjit_header: SKIPPED to transform __sputcln -sf ../../../.ext/include/x86_64-darwin18/rb_mjit_min_header-2.6.1.h include/ruby-2.6.0/x86_64-darwin18/rb_mjit_min_header-2.6.1.h",rbenv install 2.6.1 FAILED on Mac OS Mojave 10.14.3
"Explain please, What is this file config.ru, and what is if for?"," What is this file config.ru, and what is it for in Sinatra projects? In my lanyard of the project, such code is written: <code>  require './app'run Sinatra::Application","What is this file config.ru, and what is it for?"
Add link to a flash notice in rails view," I am trying to add a link in a flash message on successful create action of active-admin controller.But the HTML of the link is being escaped and displayed as plain text on view.Rails 5.2.1, ruby 2.5.3p105 (2018-10-18 revision 65156) [x86_64-linux]eg: If I try to do The flash message is displayed as, Expected behaviour: There should be a working link in the flash message <code>  flash[:success] = ""Complete this quick survey. <a href='#{url}'>Click here</a>"".html_safe ""Complete this quick survey. <a href='https://www.example.com'>Click here</a>""",Add link to a flash notice in Rails ActiveAdmin view
Capyabra / Selenium Crome-Driver Settings," I have my Rails-App set up with Capybara. Tests are working fine but I'm getting this error: 2019-05-03 14:51:58 WARN Selenium [DEPRECATION] Selenium::WebDriver::Chrome#driver_path= is deprecated. Use Selenium::WebDriver::Chrome::Service#driver_path= instead.Gemfile test_helper.rb(with or without the disabled lines makes no difference) Any ideas? <code>  group :test do # Adds support for Capybara system testing and selenium driver gem 'capybara', '>= 2.15' gem 'selenium-webdriver' # Easy installation and use of chromedriver to run system tests with Chrome gem 'chromedriver-helper'end ENV['RAILS_ENV'] ||= 'test'require File.expand_path('../../config/environment', __FILE__)require 'capybara/rspec'require 'rspec/rails'require 'capybara/rails'RSpec.configure do |config| # Capybara.register_driver :chrome do |app| # Capybara::Selenium::Driver.new app, browser: :chrome, # options: Selenium::WebDriver::Chrome::Options.new(args: %w[headless disable-gpu]) # end # Capybara.javascript_driver = :chrome config.expect_with :rspec do |expectations| expectations.include_chain_clauses_in_custom_matcher_descriptions = true end config.mock_with :rspec do |mocks| mocks.verify_partial_doubles = true end config.shared_context_metadata_behavior = :apply_to_host_groups Kernel.srand config.seedend",Rails: Capyabra / Selenium Chrome-Driver Settings
Capyabra / Selenium Chrome-Driver Settings," I have my Rails-App set up with Capybara. Tests are working fine but I'm getting this error: 2019-05-03 14:51:58 WARN Selenium [DEPRECATION] Selenium::WebDriver::Chrome#driver_path= is deprecated. Use Selenium::WebDriver::Chrome::Service#driver_path= instead.Gemfile test_helper.rb(with or without the disabled lines makes no difference) Any ideas? <code>  group :test do # Adds support for Capybara system testing and selenium driver gem 'capybara', '>= 2.15' gem 'selenium-webdriver' # Easy installation and use of chromedriver to run system tests with Chrome gem 'chromedriver-helper'end ENV['RAILS_ENV'] ||= 'test'require File.expand_path('../../config/environment', __FILE__)require 'capybara/rspec'require 'rspec/rails'require 'capybara/rails'RSpec.configure do |config| # Capybara.register_driver :chrome do |app| # Capybara::Selenium::Driver.new app, browser: :chrome, # options: Selenium::WebDriver::Chrome::Options.new(args: %w[headless disable-gpu]) # end # Capybara.javascript_driver = :chrome config.expect_with :rspec do |expectations| expectations.include_chain_clauses_in_custom_matcher_descriptions = true end config.mock_with :rspec do |mocks| mocks.verify_partial_doubles = true end config.shared_context_metadata_behavior = :apply_to_host_groups Kernel.srand config.seedend",Rails: Capyabra / Selenium Chrome-Driver Settings
Installing font-awesome in Rails 6.0.0-rc1 with webpacker and yarn," I'm trying to install FontAwesome via yarn by doing yarn add @fontawesome/fontawesome-free, and then adding it to my application.scss: I have tried several things to write in the application.scss that I've seen through the internet, but none of them works, as I get the following error: Thanks a lot for the help in advance! <code>  $fa-font-path: '~@fortawesome/fontawesome-free-webfonts/webfonts';@import '~@fortawesome/fontawesome-free-webfonts/scss/fontawesome';@import '~@fortawesome/fontawesome-free-webfonts/scss/fa-solid'; Sass::SyntaxError in Pages#indexShowing /Users/foo/dev/project/app/views/layouts/application.html.erb where line #9 raised:File to import not found or unreadable: ~@fortawesome/fontawesome-free-webfonts/scss/fontawesome.Load paths: /Users/foo/dev/project/app/assets/images /Users/foo/dev/project/app/assets/javascripts /Users/foo/dev/project/app/assets/stylesheets /Users/foo/dev/project/vendor/bundle/ruby/2.5.0/gems/coffee-rails-5.0.0/lib/assets/javascripts /Users/foo/dev/project/vendor/bundle/ruby/2.5.0/gems/actioncable-6.0.0.rc1/app/assets/javascripts /Users/foo/dev/project/vendor/bundle/ruby/2.5.0/gems/activestorage-6.0.0.rc1/app/assets/javascripts /Users/foo/dev/project/vendor/bundle/ruby/2.5.0/gems/actionview-6.0.0.rc1/lib/assets/compiled /Users/foo/dev/project/node_modules",Rails: Installing font-awesome in Rails 6.0.0-rc1 with webpacker and yarn
Specifying Bundler version," I've joined a project which is using bundler version 1.17.1 . Currently my system is using bundler 2.0.2 . Is there any way for me to specify a bundler version just like specifying ruby version with rbenv. Something likes: So that, when I run the command bundler -v I will receive the result 1.71.1 rather than 2.0.2 I tried to uninstall the current bundler with gem uninstall bundler and received this message: That makes me think there is a certain way allows me to work with multiple bundler versions. Any clues just for pointing me to where I should look up would be really appreciated.EDIT 1I tried bundle _1.17.1_ --version and it didn't work as I expected expected: Bundler version 1.17.1actual: Bundler version 2.0.2 <code>  bundler --global 1.17.1 $ gem uninstall bundlerSelect gem to uninstall: 1. bundler-1.17.1 2. bundler-1.17.3 3. bundler-2.0.2 4. All versions> $ bundler -vBundler version 2.0.2$ bundle _1.17.1_ --versionBundler version 1.17.1$ bundler -vBundler version 2.0.2",Using multiple Bundler versions
Require doesnt work if there is Cyrillic char in the path," Im trying to build a cross-platform portable application with Ruby and there is a problem on Windows. When there is a Cyrillic character (maybe just not Latin) in the path require doesnt work: We can see such encoding transformations in the output: I have an old Ruby installation that works fine: The same is for ruby 2.0.0p643 (2015-02-25) [i386-mingw32].I also checked that require fails in the same case for  <code>  D:\users\\Ruby\2.6\bin>ruby -vruby 2.6.3p62 (2019-04-16 revision 67580) [x64-mingw32]D:\users\\Ruby\2.6\bin>ruby -e ""require 'logger'""Traceback (most recent call last): 1: from <internal:gem_prelude>:2:in `<internal:gem_prelude>'<internal:gem_prelude>:2:in `require': No such file or directory -- D:/users//Ruby/2.6/lib/ruby/2.6.0/rubygems.rb (LoadError)D:\users\\Ruby\2.6\bin>ruby --disable=rubyopt -e ""require 'logger'""Traceback (most recent call last): 1: from <internal:gem_prelude>:2:in `<internal:gem_prelude>'<internal:gem_prelude>:2:in `require': No such file or directory -- D:/users//Ruby/2.6/lib/ruby/2.6.0/rubygems.rb (LoadError)D:\users\\Ruby\2.6\bin>gem listTraceback (most recent call last): 1: from <internal:gem_prelude>:2:in `<internal:gem_prelude>'<internal:gem_prelude>:2:in `require': No such file or directory -- D:/users//Ruby/2.6/lib/ruby/2.6.0/rubygems.rb (LoadError) -> win1251 -> utf-8 D:\users\\Ruby\2.0\bin>ruby -e ""require 'logger'""D:\users\\Ruby\2.0\bin>ruby -vruby 2.0.0p451 (2014-02-24) [i386-mingw32] ruby 2.1.9p490 (2016-03-30 revision 54437) [i386-mingw32]",How to use require if there is Cyrillic char in the path
Kernel#require raises LoadError," Hi I have wondered for years why you can't use the Kernel#require method for loading gems.For example this will work: Here require's owner is Kernel: But this works: or [bad idea, but you can send the require method on any Object]Somehow this doesn't work: What's going on here? <code>  #!/usr/bin/ruby -wrequire 'ruby2d' # => true p Object.method(:require).owner # => Kernelp Kernel.method(:require).owner # => #<Class:Kernel> p Object.send :require, 'ruby2d' # => truep String.send :require, 'ruby2d' # => falsep Kernel.require 'ruby2d' # => false gem 'ruby2d' # => truep String.send :require, 'ruby2d' # => truep Kernel.require 'ruby2d' # => false #!/usr/bin/ruby -wp Kernel.require 'ruby2d' Traceback (most recent call last): 1: from p.rb:2:in `<main>'p.rb:2:in `require': cannot load such file -- ruby2d (LoadError)",Why does Kernel#require raise a LoadError in Ruby?
Why does Kernel#require raises LoadError in Ruby?," Hi I have wondered for years why you can't use the Kernel#require method for loading gems.For example this will work: Here require's owner is Kernel: But this works: or [bad idea, but you can send the require method on any Object]Somehow this doesn't work: What's going on here? <code>  #!/usr/bin/ruby -wrequire 'ruby2d' # => true p Object.method(:require).owner # => Kernelp Kernel.method(:require).owner # => #<Class:Kernel> p Object.send :require, 'ruby2d' # => truep String.send :require, 'ruby2d' # => falsep Kernel.require 'ruby2d' # => false gem 'ruby2d' # => truep String.send :require, 'ruby2d' # => truep Kernel.require 'ruby2d' # => false #!/usr/bin/ruby -wp Kernel.require 'ruby2d' Traceback (most recent call last): 1: from p.rb:2:in `<main>'p.rb:2:in `require': cannot load such file -- ruby2d (LoadError)",Why does Kernel#require raise a LoadError in Ruby?
Timeout error when making get request on a specific site using ruby 2.5.3," Can anyone get a proper response from the site www.coupang.com?I keep making requests to ""https://www.coupang.com/"" and I get an error 9 out of 10 times.(Sometimes it works! Surprisingly.) I have also tried making request using python3 and it works fine.I think there is something wrong with my ruby configuration or ruby itself. I would appreciate your kind thoughts on this matter. Thank you! <code>  Traceback (most recent call last): 14: from lib/add_sup/test.rb:7:in `<main>' 13: from /Users/j/.rbenv/versions/2.5.3/lib/ruby/2.5.0/net/http.rb:485:in `get_response' 12: from /Users/j/.rbenv/versions/2.5.3/lib/ruby/2.5.0/net/http.rb:609:in `start' 11: from /Users/j/.rbenv/versions/2.5.3/lib/ruby/2.5.0/net/http.rb:910:in `start' 10: from /Users/j/.rbenv/versions/2.5.3/lib/ruby/2.5.0/net/http.rb:487:in `block in get_response' 9: from /Users/j/.rbenv/versions/2.5.3/lib/ruby/2.5.0/net/http.rb:1365:in `request_get' 8: from /Users/j/.rbenv/versions/2.5.3/lib/ruby/2.5.0/net/http.rb:1464:in `request' 7: from /Users/j/.rbenv/versions/2.5.3/lib/ruby/2.5.0/net/http.rb:1491:in `transport_request' 6: from /Users/j/.rbenv/versions/2.5.3/lib/ruby/2.5.0/net/http.rb:1491:in `catch' 5: from /Users/j/.rbenv/versions/2.5.3/lib/ruby/2.5.0/net/http.rb:1494:in `block in transport_request' 4: from /Users/j/.rbenv/versions/2.5.3/lib/ruby/2.5.0/net/http/response.rb:29:in `read_new' 3: from /Users/j/.rbenv/versions/2.5.3/lib/ruby/2.5.0/net/http/response.rb:40:in `read_status_line' 2: from /Users/j/.rbenv/versions/2.5.3/lib/ruby/2.5.0/net/protocol.rb:167:in `readline' 1: from /Users/j/.rbenv/versions/2.5.3/lib/ruby/2.5.0/net/protocol.rb:157:in `readuntil'/Users/j/.rbenv/versions/2.5.3/lib/ruby/2.5.0/net/protocol.rb:181:in `rbuf_fill': Net::ReadTimeout (Net::ReadTimeout) require 'nokogiri'require 'open-uri'require 'net/http'uri = URI(""https://www.coupang.com/"")res = Net::HTTP.get_response(uri)puts res.body if res.is_a?(Net::HTTPSuccess)",Timeout error when making get request on specific site using ruby 2.5.3
Why do I get Could not find 'bundler' (1.17.3) after upgrading Ruby?, After upgrading from Ruby 2.3 to a newer version and then doing a bundle install I get the error Could not find 'bundler'.This happens even after doing gem install bundler. <code> ,Why do I get `Could not find 'bundler' (1.17.3)` after upgrading Ruby?
Why am I able use Kernel singleton methods like `puts`?," In Ruby, the method puts is a singleton method of the Kernel module.Normally, when a module is included or extended by another module, the module (but not its singleton class) is added to the inheritance tree. That effectively makes the instance methods of the module available to either the module or its singleton class (for include and extend, respectively)... but the singleton methods of a mixed-in module remain inaccessible, because the singleton class of a module isn't ever added to the inheritance tree.So why can I use puts (and other Kernel singleton methods)? Note that puts does not seem to be an instance method on Kernel: Although Object does include Kernel as far as I can tell, Kernel's singleton class (#<Class:Kernel>) doesn't show up in the ancestors of any object. is_a? appears to agree with this: Yet, for some reason, they show up as private methods for every object. How does the method lookup find these methods at all if #<Class:Kernel> doesn't show up in the ancestor chain?Related:Ruby method lookup path for an objectClass, Module, their eigenclasses, and method lookupNote: this is different from what I'm asking, because this is class inheritance, so #<Class:Class> inherits from #<Class:Module>Why a module's singleton method is not visible in downstream eigenclasses where it gets mixed? <code>  Kernel.singleton_methods(false)# => [:caller_locations, :local_variables, :require, :require_relative, :autoload, :sprintf, :format, :Integer, :Float, :String, :Array, :Hash, :test, :warn, :autoload?, :fork, :binding, :exit, :raise, :fail, :global_variables, :__method__, :__callee__, :__dir__, :URI, :eval, :iterator?, :block_given?, :catch, :throw, :loop, :gets, :sleep, :proc, :lambda, :trace_var, :untrace_var, :at_exit, :load, :Rational, :select, :Complex, :syscall, :open, :printf, :print, :putc, :puts, :readline, :readlines, :`, :p, :system, :spawn, :exec, :exit!, :abort, :set_trace_func, :rand, :srand, :trap, :caller] Kernel.instance_methods.grep(/puts/)# [] Object.included_modules# [Kernel] Object.is_a? Class.singleton_class # falseObject.is_a? Kernel.singleton_class # falseObject.singleton_class.is_a? Class.singleton_class # trueObject.singleton_class.is_a? Kernel.singleton_class # false Object.puts ""asdf""# NoMethodError (private method `puts' called for Object:Class)",Why am I able to use Kernel singleton methods like `puts`?
Adding BigDecimal hours to DateTime is wrong by 1 milisecond," This happens with the update to ActiveSupport 6 Oddly enough this works fine with Time Can anybody explain why? <code>  start_time = DateTime.now.beginning_of_daystart_time + BigDecimal(2).hours #=> Wed, 11 Sep 2019 01:59:59 +0000 start_time = Time.now.beginning_of_daystart_time + BigDecimal(2).hours #=> 2019-09-11 02:00:00 +0000",Adding BigDecimal hours to DateTime is wrong by 1 second
Extract first word from array of string," I have an array of strings from which I need to extract the first words, convert them to integers and get the their sum.Example: Expected output => 25 My attempt: <code>  [""5 Apple"", ""5 Orange"", ""15 Grapes""] [""5"",""5"",""15""].map(&:to_i).sum",Sum of first part of string in an array of strings
How to use rails server and bot with procfile and foreman," I am trying to run my rails server and slackbot in two processes using Procfile and gem 'foreman'.But when I use foreman start the bot is only running the server is not starting up. I tried removing the line bot and tried to run web only but in that case, also my server is not starting up it just shows started with pid 1502. But when I start it from another terminal with rails s it starts up with no problem. I have googled a lot and can't seem to find out a solution for this. Help is much appreciated. Thanks.This is my Procfile : <code>  web: bundle exec rails server -p $PORTbot: rails runner -e development slackbot/slack.rb",How to use rails server and bot with procfile and foreman?
"Why ""render 'new' "" is changing my URL? (Ruby On Rails)"," I have a view called new.html.erb for clients at localhost:3000/clients/new. I validate it for errors. If there's an error I render the new view again to show all the errors. The problem is that it is showing as localhost:3000/clients in my browser instead of localhost:3000/clients/new. Why is that? Isn't ""render"" supposed to not change anything from the URL? This gives problems when I refresh the page because I have no ""index"" view and it's triggering an error instead of showing the ""new"" view as it's supposed to.new.html.erb clients_controller.rb routes.rb client.rb <code>  <% if @client.errors.any? %> <div class=""alert alert-danger""> <h4 class=""alert-heading"">Error</h4> <% @client.errors.full_messages.each do |msg| %> <p><%= msg %></p> <% end %> </div><% end %><%= form_for @client, url: clients_path, remote: false do |f| %> <div class=""form-group row""><label class=""col-sm-2 col-form-label"">*Name</label> <div class=""col-sm-3""> <%= f.text_field :name, class:""form-control"" %> <% if @client.errors[:name].any? %> <script>$('#client_name').css('border-color', 'red');</script> <% end %> </div></div><div class=""col-sm-4 col-sm-offset-2""> <%= f.submit ""Submit"", id:""submit"", class: 'btn btn-primary btn-sm'%> <%= link_to ""Cancel"", controller:""mainpages"", action:""index"", :html=>{:class=> ""btn btn-primary btn-sm""}%></div><% end %> def new @client = Client.new end def create @client = Client.new(client_params) if @client.save return redirect_to :root end render 'new' end root to: ""mainpages#index"" get '/mainpages', controller: 'mainpages', action: 'index' get '/planes', controller: 'planes', action: 'planes' resources :clients resources :planes class Client < ApplicationRecord validates :name, presence: trueend","Why is ""render 'new' "" changing my URL? (Ruby On Rails)"
Sass is not working & Can't install ruby-sass on macOS Catalina (beta)," Ruby sass is not working after upgrading to macOS Catalina beta.When I run sudo gem install sass, I'm getting an error:  <code>  ERROR: Error installing sass: ERROR: Failed to build gem native extension. current directory: /Library/Ruby/Gems/2.6.0/gems/ffi-1.11.1/ext/ffi_c/System/Library/Frameworks/Ruby.framework/Versions/2.6/usr/bin/ruby -I /Library/Ruby/Site/2.6.0 -r ./siteconf20191007-37566-177grvx.rb extconf.rbmkmf.rb can't find header files for ruby at /System/Library/Frameworks/Ruby.framework/Versions/2.6/usr/lib/ruby/include/ruby.hYou might have to install separate package for the ruby developmentenvironment, ruby-dev or ruby-devel for example.extconf failed, exit code 1Gem files will remain installed in /Library/Ruby/Gems/2.6.0/gems/ffi-1.11.1 for inspection.Results logged to /Library/Ruby/Gems/2.6.0/extensions/universal-darwin-19/2.6.0/ffi-1.11.1/gem_make.out```",Sass is not working & Can't install ruby-sass on macOS Catalina
No Method Error when using .sum to an array," The below function will throw a NoMethodError when it is expected to calculate the sum of a given array.By printing the result ""p"" it should return 10. Instead of getting the result of the sum, I get the error below. <code>  p [1,2,3,4].sum#=> 10 undefined method `sum' for [1, 2, 3, 4]:Array (NoMethodError)",No Method Error when using .sum to an array in Ruby
"Plaid giving ""ITEM_LOGIN_REQUIRED"" even after using update mode"," I'm using plaid to attempt to get transactions from a linked account. In sandbox I was not getting any errors but once I moved into development I started seeing ""ITEM_LOGIN_REQUIRED"" while trying to get transactions. I'm using the plaid react component and plaid ruby gem. I suspect that there isn't an error in my code as much as the flow through Plaids api which like the followingUser interacts with Link -> logs into account with creds -> account is linked and public_token is returned -> public_token exchanged for access_token which is stored in DB -> access_token used to lookup transactions -> Plaid returns error. -> take user through update mode -> lookup transactions -> error -> rinse and repeat.Below is where I'm looking up transaction and where I get the error. <code>  start_date = Date.new(date[0].to_i, date[1].to_i, 1).strftime('%Y-%m-%d') end_date = Date.new(date[0].to_i, date[1].to_i, -1).strftime('%Y-%m-%d') plaid_env = Rails.application.config.plaid_env client_id = Rails.application.config.client_id secret = Rails.application.config.secret public_key = Rails.application.config.public_key client = Plaid::Client.new(env: plaid_env, client_id: client_id, secret: secret, public_key: public_key) transaction_response = client.transactions.get(access_token, start_date, end_date) transactions = transaction_response.transactions","Plaid only giving ""ITEM_LOGIN_REQUIRED"" for Capital One"
Why is it possible to assign a negative sign to 0.0 and multiply it by -1 and change its sign in Ruby?," In ruby why can I assign a negative sign to 0.0 float, is this feature useful in any way? Could someone explain this one to me? <code>  -0.0#=> -0.0-0.0 * -1#=> 0.0",Why do we have 0.0 and -0.0 in Ruby?
ruby - attr - should i use @ or local variable reference," I see that with this code: I get the output As you see I can refer to a as either @a or a in the m1 method and both work.Which should I use when and why? <code>  # filename: play.rbclass A attr_reader :a def initialize(num) @a=num # I have to use @ here end def m1 p ""---"" p @a p a end endobj = A.new(1)obj.m1 $ ruby play.rb ""---""11",ruby - attr - should i use @ or getter without @?
Export data to file csv on Ruby Rails," I'm trying export data using active record and csv class, but I dont have the file generated can help see me code.when i click export does not open a dialog to download from csv am i missing something?My Controller My Model My View Console Ouput only this nothing more no errors no messages warnings. <code>  def export_csv @contact = Contacts.find_by_sql(""select * from contacts_list limit 10"") respond_to do |format| format.html format.csv { send_data @contact.as_csv } end end def self.to_csv attributes = %w{id name mail} CSV.generate(headers: true) do |csv| csv << attributes all.each do |contact| csv << attributes.map{ |attr| contact.send(attr) } end end end <%= link_to( 'Export CSV' ,{ :controller => :company, :action => :export_csv, format: ""csv""}, { :class => ""btn-ex"" } ) %> Started GET ""/company/export_cs"" for 127.0.0.1 at 2019-12-17 11:31:26 -0200Processing by CompanyController#export_cs as HTML",Export data to file CSV on Ruby Rails
"Is it possible to detect that two images are ""the same"" even if one has slightly different cropping/ratio?"," I have two different images:in 100px with or 400px andin 100px width or 400px As you can see the two are clearly the ""same"" from a human point of view. Now I wanna detect programically that they are the same. I have been using image magic via the ruby gem called rmagick like so: While this works well for images that have same ratio/cropping, it is not ideal when they have slightly different cropping and has been resized to the same width. Is there a way to do it for images with different cropping? I am interested in a solution where I can say something like: One image is contained inside the other and covers somewhere around e.g. 90% of it.PS. I can get the images in higher resolution if that helps (e.g. the double) <code>  img1 = Magick::Image.from_blob(File.read(""image_1.jpeg"")).firstimg2 = Magick::Image.from_blob(File.read(""image_2.jpeg"")).firstif img1.difference(img2).first < 4000.0 # I have found this to be a good threshold, but does not work for cropped images puts ""they are the same!!!""end","How do I detect that two images are ""the same"" even if one has slightly different cropping/ratio?"
"Is this ruby code using threads, thread pools, and concurrency correctly"," I am what I now consider part 3 of completing a task of pinging a very large list of URLs (which number in the thousands) and retrieving a URL's x509 certificate associated with it. Part 1 is here (How do I properly use threads to ping a URL) and Part 2 is here (Why won't my connection pool implement my thread code).Since I asked these two questions, I have now ended up with the following code: The above code is paramount that I retrieve the ssl_client.peer_cert. Below I have the following code that is the snippet that makes multiple HTTP pings to URLs for their certs: So far when I run this code, it is unbelievably slow. I thought that by creating a thread pool with threads, the code would go much faster. That doesn't seem the case and I'm not sure why. A lot of it was because I didn't know the nuances of threads, pools, starvation, locks, etc. However, after implementing the above code, I read some more to try to speed it up and once again I'm confused and could use some clarification as to how I can make the code faster.For starters, in this excellent article here (ruby-concurrency-parallelism) . We get the following definitions and concepts: Concurrency vs. Parallelism These terms are used loosely, but they do have distinct meanings. Concurrency: The art of doing many tasks, one at a time. By switching between them quickly, it may appear to the user as though they happen simultaneously. Parallelism: Doing many tasks at literally the same time. Instead of appearing simultaneous, they are simultaneous. Concurrency is most often used for applications that are IO heavy. For example, a web app may regularly interact with a database or make lots of network requests. By using concurrency, we can keep our application responsive, even while we wait for the database to respond to our query. This is possible because the Ruby VM allows other threads to run while one is waiting during IO. Even if a program has to make dozens of requests, if we use concurrency, the requests will be made at virtually the same time. Parallelism, on the other hand, is not currently supported by Ruby.So from this piece of the article, I understand that what I want to do needs to be done concurrently because I am pinging URLs on the network and that Parallelism is not currently supported by Ruby.Next is where things get confused for me. From my part 1 question on Stack Overflow, I learned the following in a comment given to me that I should do the following: Use a thread pool; don't just create a thousand concurrent threads. For something like connecting to a URL where there will be a lot of waiting you can oversubscribe the number of threads per CPU core, but not by a huge amount. You'll have to experiment.Another user says this: You'd not spawn thousands of threads, use a connection pool (e.g https://github.com/mperham/connection_pool) so you have maximum 20-30 concurrent requests going (this maximum number should be determined by testing at which point network performance drops and you get these timeouts)So for this part, I turned to concurrent-ruby and implemented both a CachedThreadPool and a FixedThreadPool with10 threads. I chose a `CachedThreadPool because it seemed to me that the number of threads needed would be taken care of for me by the Threadpool. Now in concurrent ruby's documentation for a pool, I see this: I thought we just established in the first article that parallelism is not supported in Ruby, so what is the thread pool doing? Is it working concurrently or in parallel? What exactly is going on? Do I need a thread pool or not? Also at this point in time I thought connection pools and thread pools were the same just used interchangeably. What is the difference between the two pools and which one do I need?In another excellent article How to Perform Concurrent HTTP Requests in Ruby and Rails, this article introduces the Concurrent::Promises class form concurrent ruby to avoid locks and have thread safety with two api calls. Here is a snippet of code below with the following description: Every request is executed it its own thread, which can run in parallel because it is a blocking I/O. But can you see a catch here?In the above code, another mention of parallelism which we just said didn't exist in ruby. Below is the approach with Concurrent::Promise So according to this article, these requests are being made 'in parallel'. Are we still talking about concurrency at this point?Finally, in these two articles, they talk about using Futures for concurrent http requests. I won't go into the details but I'll paste the links here.1.Using Concurrent Ruby in a Ruby on Rails Application2. Learn Concurrency by Implementing Futures in RubyAgain, what's talked about in the article looks to me like the Concurrent::Promise functionality. I just want to note that the examples show how to use the concepts for two different API calls that need to be combined together. This is not what I need. I just need to make thousands of API calls fast and log the results.In conclusion, I just want to know what I need to do to make my code faster and thread safe to make it run concurrently. What exactly am I missing to make the code go faster because right now it is going so slow that I might as well not have used threads in the first place.SummaryI have to ping thousands of URLs using threads to speed up the process. The code is slow and I am confused if I am using threads, thread pools, and concurrency correctly. <code>  ###### This is the code that pings a url and grabs its x509 cert #####class SslClient attr_reader :url, :port, :timeout def initialize(url, port = '443') @url = url @port = port end def ping_for_certificate_info context = OpenSSL::SSL::SSLContext.new tcp_client = TCPSocket.new(url, port) ssl_client = OpenSSL::SSL::SSLSocket.new tcp_client, context ssl_client.hostname = url ssl_client.sync_close = true ssl_client.connect certificate = ssl_client.peer_cert verify_result = ssl_client.verify_result tcp_client.close {certificate: certificate, verify_result: verify_result } rescue => error {certificate: nil, verify_result: nil } endend pool = Concurrent::CachedThreadPool.new pool.post do [LARGE LIST OF URLS TO PING].each do |struct| ssl_client = SslClient.new(struct.domain.gsub(""*."", ""www.""), struct.scan_port) cert_info = ssl_client.ping_for_certificate_info struct.x509_cert = cert_info[:certificate] struct.verify_result = cert_info[:verify_result] end end pool.shutdown pool.wait_for_termination #Do some rails code with the database depending on the results. pool = Concurrent::CachedThreadPool.newpool.post do # some parallel workend def get_all_conversations groups_thread = Thread.new do get_groups_list end channels_thread = Thread.new do get_channels_list end [groups_thread, channels_thread].map(&:value).flattenend def get_all_conversations groups_promise = Concurrent::Promise.execute do get_groups_list end channels_promise = Concurrent::Promise.execute do get_channels_list end [groups_promise, channels_promise].map(&:value!).flattenend","Is this Ruby code using threads, thread pools, and concurrency correctly"
How to optimise code that parses a 2-d array in ruby," Note: This question poses a problem that I have already solved, however I feel my solution is very rudimentary and that other people, like myself, would benefit from a discussion with input from more experienced developers. Different approaches to solving the problem, as well as more sophisticated methods and algorithms would be really appreciated. I feel this is a good place to learn how Ruby can tackle what I consider to be a fairly difficult problem for a beginner.Given a 6x6 2D Array arr: We define an hourglass in arr to be a subset of values with indices falling in this pattern in arr's graphical representation: There are 16 hourglasses in arr and an hourglass sum is the sum of an hourglass' values. Calculate the hourglass sum for every hourglass in arr, then print the maximum hourglass sum.For example, given the 2D array: We calculate the following hourglass values: Our highest hourglass value is from the hourglass: My solution is: <code>  1 1 1 0 0 00 1 0 0 0 01 1 1 0 0 00 0 0 0 0 00 0 0 0 0 00 0 0 0 0 0 a b c de f g arr = [ [-9, -9, -9, 1, 1, 1], [ 0, -9, 0, 4, 3, 2], [-9, -9, -9, 1, 2, 3], [ 0, 0, 8, 6, 6, 0], [ 0, 0, 0, -2, 0, 0], [ 0, 0, 1, 2, 4, 0]] -63, -34, -9, 12, -10, 0, 28, 23, -27, -11, -2, 10, 9, 17, 25, 18 0 4 3 18 6 6 def hourglass_sum(arr) hourglasses = [] arr.each_with_index do |row, i| # rescue clause to prevent iterating outside the array unless arr[i].nil? arr[i].length.times do |iteration| # generate n 3x3 arrays r1 = arr[i][iteration...iteration+3] r2 = arr[i+1][iteration...iteration+3] if arr[i+1] != nil r3 = arr[i+2][iteration...iteration+3] if arr[i+2] != nil # rescue clause to stop creating 3x3 arrays that fall outside given input array if arr[i+1] != nil && arr[i+2] != nil # take all values except indices 0 and 5 from the 9 element array result = r1 + [r2[1]] + r3 hourglasses << result.sum unless result.include? nil end end end end p hourglasses.maxendarr = [[-9, -9, -9, 1, 1, 1], [0, -9, 0, 4, 3, 2], [-9, -9, -9, 1, 2, 3], [0, 0, 8, 6, 6, 0], [0, 0 ,0, -2, 0, 0], [0, 0, 1, 2, 4, 0]]hourglass_sum(arr)# => 28",How to optimise code that parses a 2-d array in Ruby
Why dividing by zero for Float does not raise exception in Ruby, Dividing by zero for Integer raises a ZeroDivisionError: However dividing by zero for Float does not: I was wondering why is there this difference in behaviour for Integer and Float in Ruby? <code>  0 / 0 # ZeroDivisionError 0.0 / 0 #NaN0 / 0.0 #NaN0.0 /0.0 #NaN 1.0 / 0 #Infinity1 / 0.0 #Infinity1.0 /0.0 #Infinity,Why does dividing by zero for Float not raise an exception in Ruby?
Error running 'env GEM_HOME=/Users/john/.rvm/gems/ruby-2.3.8@global," ErrorError running 'env GEM_HOME=/Users/john/.rvm/gems/ruby-2.3.8@globalI encountered this error while I was trying to install ruby 2.3.8 in MacOs Catalina 10.15.2 Log output Gist is I triedDigging deeper, I found that newer versions of OSX deprecated OpenSSL, leaving many dependencies broken. You need to reinstall ruby, but specify exactly where your OpenSSL libraries are. If you're using RVM then that looks like: but did not work, the error did not change.Then I tried says, nokogiri is not installed, Any idea how to solve this? <code>  $ rvm install 2.3.8Searching for binary rubies, this might take some time.No binary rubies available for: osx/10.15/x86_64/ruby-2.3.8.Continuing with compilation. Please read 'rvm help mount' to get more information on binary rubies.Checking requirements for osx.Certificates bundle '/usr/local/etc/openssl@1.1/cert.pem' is already up to date.Requirements installation successful.Installing Ruby from source to: /Users/john/.rvm/rubies/ruby-2.3.8, this may take a while depending on your cpu(s)...ruby-2.3.8 - #downloading ruby-2.3.8, this may take a while depending on your connection...ruby-2.3.8 - #extracting ruby-2.3.8 to /Users/john/.rvm/src/ruby-2.3.8 - please waitruby-2.3.8 - #configuring - please waitruby-2.3.8 - #post-configuration - please waitruby-2.3.8 - #compiling - please waitruby-2.3.8 - #installing - please waitruby-2.3.8 - #making binaries executable - please waitruby-2.3.8 - #downloading rubygems-3.0.8ruby-2.3.8 - #extracting rubygems-3.0.8 - please waitruby-2.3.8 - #removing old rubygems - please waitruby-2.3.8 - #installing rubygems-3.0.8 - please waitError running 'env GEM_HOME=/Users/john/.rvm/gems/ruby-2.3.8@global GEM_PATH= /Users/john/.rvm/rubies/ruby-2.3.8/bin/ruby -d /Users/john/.rvm/src/rubygems-3.0.8/setup.rb --no-document',please read /Users/john/.rvm/log/1583757882_ruby-2.3.8/rubygems.install.log $ cat /Users/john/.rvm/log/1583757882_ruby-2.3.8/rubygems.install.log...skipping...Exception `LoadError' at /Users/john/.rvm/rubies/ruby-2.3.8/lib/ruby/2.3.0/rubygems.rb:1242 - cannot load such file -- rubygems/defaults/operating_systemException `LoadError' at /Users/john/.rvm/rubies/ruby-2.3.8/lib/ruby/2.3.0/rubygems.rb:1251 - cannot load such file -- rubygems/defaults/rubyException `LoadError' at /Users/john/.rvm/rubies/ruby-2.3.8/lib/ruby/2.3.0/rubygems/core_ext/kernel_require.rb:55 - cannot load such file -- did_you_mean/Users/john/.rvm/src/rubygems-3.0.8/lib/rubygems/core_ext/kernel_require.rb:54:in `require': cannot load such file -- openssl (LoadError) from /Users/john/.rvm/src/rubygems-3.0.8/lib/rubygems/core_ext/kernel_require.rb:54:in `require' from /Users/john/.rvm/src/rubygems-3.0.8/lib/rubygems/specification.rb:2481:in `to_ruby' from /Users/john/.rvm/src/rubygems-3.0.8/lib/rubygems/commands/setup_command.rb:405:in `install_default_bundler_gem' from /Users/john/.rvm/src/rubygems-3.0.8/lib/rubygems/commands/setup_command.rb:167:in `execute' from /Users/john/.rvm/src/rubygems-3.0.8/lib/rubygems/command.rb:321:in `invoke_with_build_args' from /Users/john/.rvm/src/rubygems-3.0.8/lib/rubygems/command_manager.rb:184:in `process_args' from /Users/john/.rvm/src/rubygems-3.0.8/lib/rubygems/command_manager.rb:148:in `run' from /Users/john/.rvm/src/rubygems-3.0.8/lib/rubygems/gem_runner.rb:59:in `run' from setup.rb:41:in `<main>' `require': cannot load such file -- openssl (LoadError) $ brew install openssl$ rvm reinstall 2.3.8 --with-openssl-dir=`brew --prefix openssl` $ rvm reinstall 2.3.8 --rubygems 2.6.6 --with-openssl-dir=`brew --prefix openssl`Error running '__rvm_with ruby-2.3.8@myapp gemset_pristine',please read /Users/john/.rvm/log/1583758650_ruby-2.3.8/gemset.pristine-ruby-2.3.8@myapp $ gem install nokogiri -v=1.10.4ERROR: While executing gem ... (Gem::Exception) Unable to require openssl, install OpenSSL and rebuild ruby (preferred) or use non-HTTPS sources",Error installing Ruby 2.3.8 in OSX 10.15.2 Catalina using RVM; OpenSSL not found
Installing certain gems without Gemfile," My team hosts our Rails application out of a Dockerfile. We have a few slow gems that are really slowing down our builds. (I'm looking at yougrpc. )Is it possible to install a few gems before copying the Gemfile into our Dockerfile? This would allow Docker to cache those build steps, so we don't have to reinstall the slow gems every time the Gemfile changes.I tried this, but bundle install is still installing grpc, sassc and nokogiri. <code>  RUN gem install grpc --version 1.28.0RUN gem install sassc --version 2.2.1RUN gem install nokogiri --version 1.10.9WORKDIR /appADD Gemfile Gemfile.lock .ruby-version /app/RUN bundle install",Installing gems in Dockerfile without Gemfile
How to attach Base64 image for Active Storage object?," I can attach a png image from disc by and everything works just fine: But it doesn't work giving result like too tiny empty square when I save a Base64 png image which encoded into String something like that ""data:image/png;base64,iVB**..REST OF DATA..**kSuQmCC"" by: Also I tried to decoded it but gives the same error: Also tried writing this decoded value into a File but nothing worked too giving blank image result: So any other thoughts? <code>  obj.attachment.attach( io: File.open('dog.png'), filename: ""image_name"", content_type: ""image/png"") obj.attachment.attach( io: StringIO.new(encoded_base_sixty_four_img), filename: ""image_name"", content_type: ""image/png"") decoded_base_sixty_four_img = Base64.decode64(encoded_base_sixty_four_img)obj.attachment.attach( io: StringIO.new(decoded_base_sixty_four_img), filename: ""image_name"", content_type: ""image/png"") file = file.write(decoded_base_sixty_four_img)obj.attachment.attach( io: file, filename: ""image_name"", content_type: ""image/png"")",How to attach Base64 image to Active Storage object?
Attempt to get Twitter Oauth-1.0 request_token keeps giving 215 error," I'm trying to get an Oauth request token from Twitter - I'm following their guide (links below) and I've gone over every single step about 10 times but I cannot figure out why I'm getting this error: {\""errors\"":[{\""code\"":32,\""message\"":\""Could not authenticate you.\""}]}They use Oauth 1.0. I'm supposed to combine all the percent-encoded params in my request, percent encode them, add the request method (POST) and the request url, use that plus my api key secret to create a signature, and add the signature to my final Post request. The signature docs are on this page and the subsequent Post request docs are on this page. I used the example code given in the guide to generate a signature and I got the same result the guide did, so I don't think the actual signature generation is a problem.I triple checked my api key and api key secret and callback url.Here's my full code. Can anyone see a problem? here's my request[""Authorization""] header ""OAuth oauth_callback=\""http%3A%2F%2Fwww.example.localhost%3A3000%2Ftwittercallback\"", oauth_nonce=\""e5686f142ca58a45af233fb66876671592457549dsd\"", oauth_signature_method=\""HMAC-SHA1\"", oauth_timestamp=\""1592457549\"", oauth_consumer_key=\""[KEY]\"", oauth_signature=\""n9MNLO%2Ft%2FT6WX0Myu5JcTICXNAQ%3D\"", oauth_version=\""1.0\""""and this is the example header from Twitter's docs: OAuth oauth_nonce=""K7ny27JTpKVsTgdyLdDfmQQWVLERj2zAK5BslRsqyw"", oauth_callback=""http%3A%2F%2Fmyapp.com%3A3005%2Ftwitter%2Fprocess_callback"", oauth_signature_method=""HMAC-SHA1"", oauth_timestamp=""1300228849"", oauth_consumer_key=""OqEqJeafRSF11jBMStrZz"", oauth_signature=""Pc%2BMLdv028fxCErFyi8KXFM%2BddU%3D"", oauth_version=""1.0"" <code>  require 'net/http'require 'uri'require 'json'require 'base64'require 'cgi'require 'openssl'oauth_callback = ""http://www.example.localhost:3000/twittercallback""oauth_consumer_key = '[KEY]'oauth_timestamp = Time.now.to_ioauth_nonce = SecureRandom.hex(10) + oauth_timestamp.to_soauth_signature_method = ""HMAC-SHA1""oauth_version = ""1.0""one1 = CGI.escape ""oauth_callback""one2 = CGI.escape oauth_callbacktwo1 = CGI.escape ""oauth_consumer_key""two2 = CGI.escape oauth_consumer_keythree1 = CGI.escape ""oauth_nonce""three2 = CGI.escape oauth_noncefour1 = CGI.escape ""oauth_signature_method""four2 = CGI.escape oauth_signature_methodfive1 = CGI.escape ""oauth_timestamp""five2 = CGI.escape oauth_timestamp.to_ssix1 = CGI.escape ""oauth_version""six2 = CGI.escape oauth_versionstring = ""#{one1}=#{one2}&#{two1}=#{two2}&#{three1}=#{three2}&#{four1}=#{four2}&#{five1}=#{five2}&#{six1}=#{six2}""encoded_string = CGI.escape stringurl = ""https://api.twitter.com/oauth/request_token""encoded_url = CGI.escape urlencoded_string = ""POST&"" + encoded_url + ""&"" + encoded_stringsigning_key = '[SECRET]'encoded_signing_key = (CGI.escape signing_key) + ""&""digest = OpenSSL::Digest::Digest.new( 'sha1' )hmac = OpenSSL::HMAC.digest( digest, encoded_signing_key, encoded_string)signature = Base64.encode64( hmac ).chomp.gsub( /\n/, '' )uri = URI.parse(""https://api.twitter.com/oauth/request_token"")request = Net::HTTP::Post.new(uri)request.content_type = ""application/x-www-form-urlencoded""oauth = 'OAuth oauth_callback=""' + (CGI.escape oauth_callback) + '"", oauth_nonce=""' + (oauth_nonce + 'dsd') + '"", oauth_signature_method=""HMAC-SHA1"", oauth_timestamp=""' + oauth_timestamp.to_s + '"", oauth_consumer_key=""`<KEY>"", oauth_signature=""' + (CGI.escape signature) + '"", oauth_version=""1.0""'request['Authorization'] = oauthrequest.body = """"req_options = { use_ssl: uri.scheme == ""https"",}response = Net::HTTP.start(uri.hostname, uri.port, req_options) do |http| http.request(request)end",Attempt to get Twitter request_token using Oauth 1.0 keeps giving '215 Bad Authentication' error
How to get documentation for a method in ruby on rails gem?," I'm trying to find out about the can? method used by cancancan gem.I tried here, but cannot locate the method can?:As suggested here, I tried these: I'm simply trying to find out what parameters can? (the cancancan method used in the view) wants to receive, but this example is a good opportunity to learn how to do this for other methods as well, hence I hope for a general solution (one that will allow me to look up documentation for methods beyond the one asked in this specific example).Thanks in advance for all help/pointers! <code>  can?.arityNoMethodError: undefined method `can?' for main:Objectcan?.parametersNoMethodError: undefined method `can?' for main:Object",How to get documentation for a method in a Ruby gem?
"Ruby 2.7 says URI.encode is obsolete, what replaces it?"," I'm using URI.encode to generate HTML data URLs: After upgrading to Ruby 2.7.1, interpreter started warning: Recommended replacements of this are CGI.escape and URI.encode_www_form_component. However, they're not doing same thing: Result of these slight encoding differences - html page where spaces are replaced by +. My question is - what's a good replacement of URI.encode for this use case? <code>  visit ""data:text/html,#{URI::encode(html)}"" warning: URI.escape is obsolete 2.7.1 :007 > URI.escape '<html>this and that</html>'(irb):7: warning: URI.escape is obsolete => ""%3Chtml%3Ethis%20and%20that%3C/html%3E""2.7.1 :008 > CGI.escape '<html>this and that</html>' => ""%3Chtml%3Ethis+and+that%3C%2Fhtml%3E""2.7.1 :009 > URI.encode_www_form_component '<html>this and that</html>' => ""%3Chtml%3Ethis+and+that%3C%2Fhtml%3E""","Ruby 2.7 says URI.escape is obsolete, what replaces it?"
Rails 6.1: What is preventing tests from running?," I've created a new Rails 6.1 application from scratch with Ruby 3.0.0.I've run db:create and generated a single model with some string columns, followed by rails db:migrate.I ran rails test but got this require rexml error: I'm not at all sure what's causing this. Rails is up to date. Can anyone point me in the right direction? <code>  /Users/froop/.rvm/gems/ruby-3.0.0/gems/bootsnap-1.5.1/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:34:in `require': cannot load such file -- rexml/document (LoadError) from /Users/froop/.rvm/rubies/ruby-3.0.0/lib/ruby/gems/3.0.0/gems/activesupport-6.1.0/lib/active_support/dependencies.rb:332:in `block in require' from /Users/froop/.rvm/rubies/ruby-3.0.0/lib/ruby/gems/3.0.0/gems/activesupport-6.1.0/lib/active_support/dependencies.rb:299:in `load_dependency' from /Users/froop/.rvm/rubies/ruby-3.0.0/lib/ruby/gems/3.0.0/gems/activesupport-6.1.0/lib/active_support/dependencies.rb:332:in `require' from /Users/froop/.rvm/gems/ruby-3.0.0/gems/selenium-webdriver-3.142.7/lib/selenium/webdriver/firefox.rb:22:in `<main>' from /Users/froop/.rvm/gems/ruby-3.0.0/gems/bootsnap-1.5.1/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:23:in `require' from /Users/froop/.rvm/gems/ruby-3.0.0/gems/bootsnap-1.5.1/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:23:in `block in require_with_bootsnap_lfi' from /Users/froop/.rvm/gems/ruby-3.0.0/gems/bootsnap-1.5.1/lib/bootsnap/load_path_cache/loaded_features_index.rb:92:in `register' from /Users/froop/.rvm/gems/ruby-3.0.0/gems/bootsnap-1.5.1/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:22:in `require_with_bootsnap_lfi' from /Users/froop/.rvm/gems/ruby-3.0.0/gems/bootsnap-1.5.1/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:31:in `require' from /Users/froop/.rvm/rubies/ruby-3.0.0/lib/ruby/gems/3.0.0/gems/activesupport-6.1.0/lib/active_support/dependencies.rb:332:in `block in require' from /Users/froop/.rvm/rubies/ruby-3.0.0/lib/ruby/gems/3.0.0/gems/activesupport-6.1.0/lib/active_support/dependencies.rb:299:in `load_dependency' from /Users/froop/.rvm/rubies/ruby-3.0.0/lib/ruby/gems/3.0.0/gems/activesupport-6.1.0/lib/active_support/dependencies.rb:332:in `require' from /Users/froop/.rvm/gems/ruby-3.0.0/gems/webdrivers-4.4.1/lib/webdrivers/geckodriver.rb:72:in `<main>' from /Users/froop/.rvm/gems/ruby-3.0.0/gems/bootsnap-1.5.1/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:23:in `require' from /Users/froop/.rvm/gems/ruby-3.0.0/gems/bootsnap-1.5.1/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:23:in `block in require_with_bootsnap_lfi' from /Users/froop/.rvm/gems/ruby-3.0.0/gems/bootsnap-1.5.1/lib/bootsnap/load_path_cache/loaded_features_index.rb:92:in `register' from /Users/froop/.rvm/gems/ruby-3.0.0/gems/bootsnap-1.5.1/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:22:in `require_with_bootsnap_lfi' from /Users/froop/.rvm/gems/ruby-3.0.0/gems/bootsnap-1.5.1/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:31:in `require' from /Users/froop/.rvm/rubies/ruby-3.0.0/lib/ruby/gems/3.0.0/gems/activesupport-6.1.0/lib/active_support/dependencies.rb:332:in `block in require' from /Users/froop/.rvm/rubies/ruby-3.0.0/lib/ruby/gems/3.0.0/gems/activesupport-6.1.0/lib/active_support/dependencies.rb:299:in `load_dependency' from /Users/froop/.rvm/rubies/ruby-3.0.0/lib/ruby/gems/3.0.0/gems/activesupport-6.1.0/lib/active_support/dependencies.rb:332:in `require' from /Users/froop/.rvm/gems/ruby-3.0.0/gems/webdrivers-4.4.1/lib/webdrivers.rb:4:in `<main>' from /Users/froop/.rvm/gems/ruby-3.0.0/gems/bootsnap-1.5.1/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:23:in `require' from /Users/froop/.rvm/gems/ruby-3.0.0/gems/bootsnap-1.5.1/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:23:in `block in require_with_bootsnap_lfi' from /Users/froop/.rvm/gems/ruby-3.0.0/gems/bootsnap-1.5.1/lib/bootsnap/load_path_cache/loaded_features_index.rb:92:in `register' from /Users/froop/.rvm/gems/ruby-3.0.0/gems/bootsnap-1.5.1/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:22:in `require_with_bootsnap_lfi' from /Users/froop/.rvm/gems/ruby-3.0.0/gems/bootsnap-1.5.1/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:31:in `require' from /Users/froop/.rvm/rubies/ruby-3.0.0/lib/ruby/3.0.0/bundler/runtime.rb:66:in `block (2 levels) in require' from /Users/froop/.rvm/rubies/ruby-3.0.0/lib/ruby/3.0.0/bundler/runtime.rb:61:in `each' from /Users/froop/.rvm/rubies/ruby-3.0.0/lib/ruby/3.0.0/bundler/runtime.rb:61:in `block in require' from /Users/froop/.rvm/rubies/ruby-3.0.0/lib/ruby/3.0.0/bundler/runtime.rb:50:in `each' from /Users/froop/.rvm/rubies/ruby-3.0.0/lib/ruby/3.0.0/bundler/runtime.rb:50:in `require' from /Users/froop/.rvm/rubies/ruby-3.0.0/lib/ruby/3.0.0/bundler.rb:174:in `require' from /Users/froop/Rails/froop_app/config/application.rb:7:in `<top (required)>' from /Users/froop/.rvm/gems/ruby-3.0.0/gems/spring-2.1.1/lib/spring/application.rb:92:in `require' from /Users/froop/.rvm/gems/ruby-3.0.0/gems/spring-2.1.1/lib/spring/application.rb:92:in `preload' from /Users/froop/.rvm/gems/ruby-3.0.0/gems/spring-2.1.1/lib/spring/application.rb:157:in `serve' from /Users/froop/.rvm/gems/ruby-3.0.0/gems/spring-2.1.1/lib/spring/application.rb:145:in `block in run' from /Users/froop/.rvm/gems/ruby-3.0.0/gems/spring-2.1.1/lib/spring/application.rb:139:in `loop' from /Users/froop/.rvm/gems/ruby-3.0.0/gems/spring-2.1.1/lib/spring/application.rb:139:in `run' from /Users/froop/.rvm/gems/ruby-3.0.0/gems/spring-2.1.1/lib/spring/application/boot.rb:19:in `<top (required)>' from <internal:/Users/froop/.rvm/rubies/ruby-3.0.0/lib/ruby/3.0.0/rubygems/core_ext/kernel_require.rb>:85:in `require' from <internal:/Users/froop/.rvm/rubies/ruby-3.0.0/lib/ruby/3.0.0/rubygems/core_ext/kernel_require.rb>:85:in `require' from -e:1:in `<main>'","Rails 6.1, Ruby 3.0.0: tests error as they cannot load rexml"
Why is the string '3' not matched in a case statement with the range ('0'...'10')," When I try to match for the string '3' in a case statement, it matches if the range goes up to '9', but not '10'.I'm guessing it has something to do with the triple equals operator, but I don't know the exact reason why it can be in the range, but not matched.Here is an IRB run documenting both cases that work (with '9'), and don't work (with '10'): Output: number is valid Output: number is not validThe methods that I used as a reference for the expected results are Enumerable#include? Enumerable#member? and seeing what is output when converted to an array is (Enumerable#to_a).The result of the ""case equality"" (===) operator surprised me. <code>  case '3' when ('0'...'9') puts ""number is valid"" else puts ""number is not valid"" end case '3' when ('0'...'10') puts ""number is valid"" else puts ""number is not valid"" end puts ('0'...'10').include?('3') # => true puts ('0'...'10').member?('3') # => true puts ('0'...'10') === '3' # => false puts ('0'...'10').to_a # => [""0"", ""1"", ""2"", ""3"", ""4"", ""5"", ""6"", ""7"", ""8"", ""9""]",Why is the string '3' not matched in a case statement with the range ('0'...'10')?
"In ruby, in a method defined in class << self, why can't a constant defined on the superclass be access without self?"," I'm trying to understand Ruby singletons and class inheritance better. I read everywhere that is equivalent to But if that were true, then I would expect print_constant_fails to work, but it doesn't. What is going on here?  <code>  def self.method_name; end` class << self def method_name; endend class SuperExample A_CONSTANT = ""super example constant""endclass SubExample < SuperExample def self.print_constant_works_1 puts A_CONSTANT end class << self def print_constant_works_2 puts self::A_CONSTANT end def print_constant_fails puts A_CONSTANT end endend pry(main)> SubExample.print_constant_works_1super example constantpry(main)> SubExample.print_constant_works_2super example constantpry(main)> SubExample.print_constant_failsNameError: uninitialized constant #<Class:SubExample>::A_CONSTANTfrom (pry):13:in `print_constant_fails'","In Ruby, in a method defined in class << self, why can't a constant defined on the superclass be access without self?"
