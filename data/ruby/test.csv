originalTitle,body,reformulatedTitle
What IDE to use for developing in Ruby on Rails on windows?, Possible Duplicate: What Ruby IDE do you prefer? I've generally been doing stuff on Microsoft .NET out of college almost 2 years ago. I just started looking at Ruby on Rails. So what editor should I use? I'm using Notepad++ right now but can I get debugging etc. somehow? <code> ,What IDE to use for developing in Ruby on Rails on Windows?
How do I marshall a lambda (Proc) in Ruby?," Joe Van Dyk asked the Ruby mailing list: Hi, In Ruby, I guess you can't marshal a lambda/proc object, right? Is that possible in lisp or other languages? What I was trying to do: So, I'm sending BackgroundJob a lambda object, which contains the context/code for what to do. But, guess that wasn't possible. I ended up marshaling a normal ruby object that contained instructions for what to do after the program ran. Joe <code>  l = lamda { ... }Bj.submit ""/path/to/ruby/program"", :stdin => Marshal.dump(l)",How do I marshal a lambda (Proc) in Ruby?
Rails or grails ?, Grails vs Rails. Which has better support? And which one is a better choice to develop medium size apps with? Most importantly which one has more plug-ins? <code> ,Rails or Grails?
Javascript with embedded ruby - How to make sure the string does not break?, I have this line in a javascript block in a page: What is the best way to handle the case where @ruby_var has a single-quote in it? Else it will break the JavaScript code. <code>  res = foo('<%= @ruby_var %>'); ,Javascript with embedded Ruby: How to safely assign a ruby value to a javascript variable
Ruby - Convert File to String," I need an easy way to take a tar file and convert it into a string (and vice versa). Is there a way to do this in Ruby? My best attempt was this: I thought that would be enough to convert it to a string, but then when I try to write it back out like this... It isn't the same file. Doing ls -l shows the files are of different sizes, although they are pretty close (and opening the file reveals most of the contents intact). Is there a small mistake I'm making or an entirely different (but workable) way to accomplish this? <code>  file = File.open(""path-to-file.tar.gz"")contents = """"file.each {|line| contents << line} newFile = File.open(""test.tar.gz"", ""w"")newFile.write(contents)",Read binary file as string in Ruby
"Ruby Regex problem text.gsub[^\W-], '') fails"," I'm trying to learn RegEx in Ruby, based on what I'm reading in ""The Rails Way"". But, even this simple example has me stumped. I can't tell if it is a typo or not: It seems to me that this would replace all spaces with -, then anywhere a string starts with a non letter or number followed by a dash, replace that with ''. But, using irb, it fails first on ^: syntax error, unexpected '^', expecting ']'If I take out the ^, it fails again on the W. <code>  text.gsub(/\s/, ""-"").gsub([^\W-], '').downcase","Ruby RegEx problem text.gsub[^\W-], '') fails"
Markdown validation," It's possible to write Markdown content with invalid syntax. Invalid means that the BlueCloth library fails to parse the content and throws an exception. The markdown helper in Rails doesn't catch any BlueCloth exceptions and because of that the complete page fails to render (500 Server Error page is rendered instead).In my case, users are allowed to write Markdown content and save it to the database. If someone used invalid syntax, all successive rendering attempts of that content fail (Status Code 500 - Internal Server Error).How do you get around this issue? Is it possible to validate the Markdown syntax at the Model-level before saving to the database? <code> ",How to validate Markdown?
Can anyone recommend a Ruby source code analyzer (something like pylint), Does Ruby have any tools along the lines of pylint for analyzing source code for errors and simple coding standards?It would be nice if it could be integrated with cruisecontrolrb for continuous integration.Or does everyone write such good tests that they don't need source code checkers! <code> ,Ruby source code analyzer (something like pylint)
What is the best way to extend restful_authentication to support lazy logins by a long auth key?," I'm building an iPhone application that talks to a Ruby on Rails backend. The Ruby on Rails application will also service web users. The restful_authentication plugin is an excellent way to provide quick and customizable user authentication. However, I would like users of the iPhone application to have an account created automatically by the phone's unique identifier ([[UIDevice device] uniqueIdentifier]) stored in a new column. Later, when users are ready to create a username/password, the account will be updated to contain the username and password, leaving the iPhone unique identifier intact. Users should not be able to access the website until they've setup their username/password. They can however, use the iPhone application, since the application can authenticate itself using it's identifier.What is the best way to modify restful_authentication to do this? Create a plugin? Or modify the generated code?What about alternative frameworks, such as AuthLogic. What is the best way to allow iPhones to get a generated auth token locked to their UUID's, but then let the user create a username/password later? <code> ",What is the best way to extend restful_authentication/AuthLogic to support lazy logins by an anonymous iPhone?
How do I get ruby to print a full stack dump instead of a truncated one?," When I get exceptions, it is often from deep within the call stack. When this happens, more often than not, the actual offending line of code is hidden from me: That ""... 8 levels..."" truncation is causing me a great deal of trouble. I'm not having much success googling for this one: How do I tell ruby that I want dumps to include the full stack? <code>  tmp.rb:7:in `t': undefined method `bar' for nil:NilClass (NoMethodError) from tmp.rb:10:in `s' from tmp.rb:13:in `r' from tmp.rb:16:in `q' from tmp.rb:19:in `p' from tmp.rb:22:in `o' from tmp.rb:25:in `n' from tmp.rb:28:in `m' from tmp.rb:31:in `l' ... 8 levels... from tmp.rb:58:in `c' from tmp.rb:61:in `b' from tmp.rb:64:in `a' from tmp.rb:67",How do I get ruby to print a full backtrace instead of a truncated one?
Require path problem," Here is one more newbie question: I saw this line in Rakefile in the root path of every rails project. I guess this line is used to require vendor/rails/railties/lib/tasks/rails.rb to get all rake tasks loaded: My question is why only 'tasks/rails' is specified for the require method, but not the full path of the file?Thanks in advance. <code>  require 'tasks/rails' $VERBOSE = nil# Load Rails rakefile extensionsDir[""#{File.dirname(__FILE__)}/*.rake""].each { |ext| load ext }# Load any custom rakefile extensionsDir[""#{RAILS_ROOT}/lib/tasks/**/*.rake""].sort.each { |ext| load ext }Dir[""#{RAILS_ROOT}/vendor/plugins/*/**/tasks/**/*.rake""].sort.each { |ext| load ext }",How does Ruby know where to find a required file?
Preferred ruby plugin for Eclipse?," RDT (Ruby Development Tool) seems to be the preferred plugin for adding Ruby support to Eclipse. However, I see that the main developer on that project has joined Aptana RadRails. Does this mean that project is no longer up-to-date for Ruby in Eclipse?If so, which plugin is the preferred and best choice these days? <code> ",Preferred Ruby plugin for Eclipse?
replcae 2 strings at the same time?," how can I replace 2 strings in the same time? for example let's say I have string like this:str1 = ""AAAA BBBB CCCC DDDD""i want to replace every ""AAAA"" with ""CCCC"" and every ""CCCC"" with ""AAAA"" but if i did:str1.gsub(""AAAA"",""CCCC"") # CCCC BBBB CCCC DDDDstr1.gsub(""CCCC"",""AAAA"") # AAAA BBBB AAAA DDDDwhat I want str1 to be ""CCCC BBBB AAAA DDDD"" <code> ",Replace 2 strings at the same time?
How to do a safe join pathname in ruby? ," My Rails development environment is Windows-based, and my production environment is Linux-based.It's possible that VirtualHost will be used. Assume that one filename needs to be referenced in the /public folder with File.open('/tmp/abc.txt', 'r').but in Windows it should be C:\tmp\abc.txt. How can I do a correct path join to handle the two different environments? And when prefix_tmp_path = ""C:\tmp\"" I get C:\tmp\/1.txtWhat is the correct way to handle both cases? <code>  prefix_tmp_path = '/tmp/'filename = ""/#{rand(10)}.txt""fullname = prefix_tmp_path + filename # /tmp//1.txt <- but I don't want a double //",How to do a safe join pathname in ruby?
Ideal ruby project structure," I'm after an overview/clarification of the ideal project structure for a ruby (non-rails/merb/etc) project. I'm guessing it follows Have I got something wrong? What parts have I missed out? <code>  app/ bin/ #Files for command-line execution lib/ appname.rb appname/ #Classes and so on Rakefile #Running tests README test,spec,features/ #Whichever means of testing you go for appname.gemspec #If it's a gem",Ideal Ruby project structure
Getting Argument Names In Ruby Reflection," I would like to do some fairly heavy-duty reflection in Ruby. I want to create a function that returns the names of the arguments of various calling functions higher up the call stack (just one higher would be enough but why stop there?). I could use Kernel.caller, go to the file and parse the argument list but that would be ugly and unreliable. The function that I would like would work in the following way: I would not mind using ParseTree or some similar tool for this task but looking at Parsetree, it is not obvious how to use it for this purpose. Creating a C extension like this is another possibility but it would be nice if someone had already done it for me.I can see that I'll probably need some kind of C extension. I suppose that means my question is what combination of C extension would work most easily. I don't think caller+ParseTree would be enough by themselves. As far as why I would like to do this goes, rather than saying ""automatic debugging"", perhaps I should say that I would like to use this functionality to do automatic checking of the calling and return conditions of functions: Where check_positive would throw an exception if x and y weren't positive. Obviously, there would be more to it than that but hopefully this gives enough motivation. <code>  module A def method1( tuti, fruity) foo end def method2(bim, bam, boom) foo end def foo print caller_args[1].join("","") #the ""1"" mean one step up the call stack endendA.method1 #prints ""tuti,fruity""A.method2 #prints ""bim, bam, boom"" def add x, y check_positive return x + yend",How to get argument names using reflection
Ubuntu noob rails install fails on zlib," I've just moved over to Ubuntu 8.10 as my dev box; it's my first serious foray into Linux as a daily-use OS, and I'm having a hard time getting Rails going. I have followed a number of tutorials which all seem to work fine, but when I try and use gem install or gem update on anything, I get an error that looks like this: I have (as recommended in the tutorials) installed zlib, zlib1g, and zlib1g-dev. I've even found a few tutorials on this particular problem (all for flavors other than mine, however) but they didn't help.I'm on Ubuntu 8.10, ruby version 1.8.8dev gem version 1.3.2I've tried reinstalling ruby and gems each and separately, to no avail. <code>  /usr/local/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:31:in `gem_original_require': no such file to load -- zlib (LoadError)from /usr/local/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:31:in `require'from /usr/local/lib/ruby/site_ruby/1.8/rubygems/spec_fetcher.rb:1from /usr/local/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:31:in `gem_original_require'from /usr/local/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:31:in `require'from /usr/local/lib/ruby/site_ruby/1.8/rubygems/commands/update_command.rb:5from /usr/local/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:31:in `gem_original_require'from /usr/local/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:31:in `require'from /usr/local/lib/ruby/site_ruby/1.8/rubygems/command_manager.rb:167:in `load_and_instantiate'from /usr/local/lib/ruby/site_ruby/1.8/rubygems/command_manager.rb:88:in `[]'from /usr/local/lib/ruby/site_ruby/1.8/rubygems/command_manager.rb:144:in `find_command'from /usr/local/lib/ruby/site_ruby/1.8/rubygems/command_manager.rb:131:in `process_args'from /usr/local/lib/ruby/site_ruby/1.8/rubygems/command_manager.rb:102:in `run'from /usr/local/lib/ruby/site_ruby/1.8/rubygems/gem_runner.rb:58:in `run'from /usr/local/bin/gem:21",Ubuntu rails install fails on zlib
How can I access an object attribute named in a string in ruby," I am new to rails and trying to do a little refactoring (putting a partial renderer that lists titles in app/views/shared ) The renderer shows the dates along with the titles. However different users of the renderer use different dates. Part way through refactoring I have For the other user of the renderer I would want So can I use a string I pass through (using the :locals parameter)? I know in Python I could do but I can't work out how to do that in ruby. (Obviously in rails I would pass the date_wanted string through from the view calling the partial renderer.) <code>  title_date = list_titles.created_on title_date = list_titles.updated_on date_wanted = 'created_on'title_date = getattr(list_titles, date_wanted)",What is the ruby equivalent of python's getattr
Mechanize and JavaScript," I'm connecting to a web site, logging in.The website redirects me to new pages and Mechanize deals with all cookie and redirection jobs, but, I can't get the last page. I used Firebug and did same job again and saw that there are two more pages I had to pass with Mechanize. I took a quick look at the pages and saw that there is some JavaScript and HTML code but couldn't understand it because it doesn't look like normal page code. What are those pages for? How they can redirect to other pages? What should I do to pass these? <code> ",How do I use Mechanize to process JavaScript?
"can Ruby, PHP, or Perl create a pre-compiled file for the code like Python?"," For Python, it can create a pre-compiled version file.pyc so that the program can be run without interpreted again. Can Ruby, PHP, and Perl do the same on the command line? <code> ","Can Ruby, PHP, or Perl create a pre-compiled file for the code like Python?"
Setting Ruby Load Path Externally," I have a custom Ruby library directory that I'd like to have automatically added to Ruby's load path whenever Ruby is executed. I know I can use the -I option to Ruby, but is there something like an environment variable that I can set that will globally determine Ruby's load path.I want to install Ruby Gems on a Linux box where I don't have root privileges, so I need to have a Ruby load path in a non-standard location. I installed RubyGems per ""Installing RubyGems in a User Directory"", but the gem command isn't picking up the non-standard load path. Maybe I'm missing something obvious here and making things harder for myself? <code> ",How to set Ruby's load path externally
Understand Rails Authenticity Token!, I am running into some issues regarding the Authenticity Token in Rails.I would really like to understand the Authenticity token.Do you have some complete source of information on this subject or would you spend your time to explain in details here? <code> ,Understanding the Rails Authenticity Token
Understand Rails Authenticity Token, I am running into some issues regarding the Authenticity Token in Rails.I would really like to understand the Authenticity token.Do you have some complete source of information on this subject or would you spend your time to explain in details here? <code> ,Understanding the Rails Authenticity Token
Understanding the Rails Authenticity Token, I am running into some issues regarding the Authenticity Token in Rails.I would really like to understand the Authenticity token.Do you have some complete source of information on this subject or would you spend your time to explain in details here? <code> ,Understanding the Rails Authenticity Token
"(Ruby,Rails) Dynamically connecting a model to databases in a running app...?"," I've read many of the existing questions/threads on this subject, but keep in mind that none of them have directly addressed my issue. Also keep in mind that this is NOT a situation for database.yml as I won't know the DB info in advance.That said, I need a solution for DYNAMICALLY connecting to multiple databases in a Rails app. My situation is that I have multiple data logging sites, all with a simple data table (EVENTS, TIMESTAMP, VALUE). These sites need to (and will) remain as they are due to local applications that need to use them.What I need is to create an application that maintains a table of ""MYSQL_LOGINS"" and uses each of those logins to connect to any one of various databases and provide charts/graphs for the data therein.My ""data"" model will remain the same for all MySQL databases to which I connect, I simply need to be able to tell my MODEL to connect to a different DB on the fly. I'm hoping this is amazingly simple, but we'll see. <code> ",Dynamically connecting a model to databases in a running app?
How do I use domain objects from a middleware with cache_classes off?," In the rails development environment, cache_classes is off so you can modify code under app/ and see changes without restarting the server.In all environments, though, middleware is only created once. So if I have middleware like this: and I do this in config/environments/development.rb: then I'll always get the following error: The problem is that the MyMiddleware instance is created once at system load time, but the MyModel class is reloaded on each call.I tried 'MyModel'.constantize.first to delay binding to the class until method-call-time, but that changes the problem to a new one: <code>  class MyMiddleware def initialize(app) @app = app end def call(env) env['model'] = MyModel.first endend config.cache_classes = false # the default for developmentconfig.middleware.use MyMiddleware A copy of MyMiddleware has been removed from the module tree but is still active! /Library/Ruby/Gems/1.8/gems/activesupport-2.3.2/lib/active_support/dependencies.rb:414:in `load_missing_constant' /Library/Ruby/Gems/1.8/gems/activesupport-2.3.2/lib/active_support/dependencies.rb:96:in `const_missing' /Users/me/projects/my_project/lib/my_middleware.rb:8:in `call' /Library/Ruby/Gems/1.8/gems/actionpack-2.3.2/lib/action_controller/middleware_stack.rb:72:in `new' ... You have a nil object when you didn't expect it!The error occurred while evaluating nil.include? /Library/Ruby/Gems/1.8/gems/activerecord-2.3.2/active_record/attribute_methods.rb:142in `create_time_zone_conversion_attribute?' /Library/Ruby/Gems/1.8/gems/activerecord-2.3.2/active_record/attribute_methods.rb:75:in `define_attributes_methods' ...",How do I use domain objects from middleware with cache_classes off?
Validation of XML file against XSD in Ruby," I'm trying to validate the following XML against a XSD schema using Ruby.It simply won't work, stops with an error message telling me Error: Element 'request': No matching global declaration available for the validation root.Maybe it's the namespace? Any ideas?XML XSD Ruby code <code>  <?xml version=""1.0"" encoding=""UTF-8""?><request type=""test"" xmlns:xsd=""http://www.w3.org/2001/XMLSchema""> <channel name=""channel""> <username>user</username> <password>pass</password> </channel> <hotel id=""1""> <date from=""2009-07-07"" to=""2009-07-17""/> <room id=""1""> <allocation>10</allocation> </room> </hotel></request> <xsd:schema xmlns:xsd=""http://www.w3.org/2001/XMLSchema""> <!-- channel --> <xsd:element name=""channel""> <xsd:attribute name=""name"" use=""required"" type=""xsd:string"" /> <xsd:sequence> <xsd:element username=""name"" use=""required"" type=""xsd:string""/> <xsd:element password=""country"" use=""required"" type=""xsd:string""/> </xsd:sequence> </xsd:element> <!-- hotel --> <xsd:element name=""hotel""> <xsd:attribute name=""id"" use=""required"" type=""xsd:string"" /> <xsd:sequence> <xsd:element name=""hotel""> <xsd:attribute name=""from"" use=""required"" type=""xsd:string"" /> <xsd:attribute name=""to"" use=""required"" type=""xsd:string"" /> </xsd:element> <xsd:element ref=""room"" minOccurs=""1""/> </xsd:sequence> </xsd:element> <!-- room --> <xsd:element name=""room""> <xsd:sequence> <xsd:element name=""allocation"" type=""xsd:string""></xsd:element> <xsd:element ref=""hotel"" minOccurs=""1""/> </xsd:sequence> <xsd:attribute name=""id"" use=""required"" type=""xsd:string"" /> </xsd:element> <!-- building all together --> <xsd:element name=""request""> <xsd:attribute name=""type"" use=""required"" type=""xsd:string"" /> <xsd:complexType> <xsd:sequence> <xsd:element ref=""channel"" maxOccurs=""1""/> <xsd:element ref=""hotel"" maxOccurs=""1""/> </xsd:sequence> </xsd:complexType> </xsd:element></xsd:schema> require ""xml""document = LibXML::XML::Document.file(""/tmp/test.xml"")schema = LibXML::XML::Document.file(""/tmp/request.xsd"")result = document.validate_schema(schema) do |message,flag| log.debug(message) puts messageend",Validating XML: No matching global declaration available for the validation root
"What does Ruby have that Python doens't, and vice versa?"," There is a lot of discussions of Python vs Ruby, and I all find them completely unhelpful, because they all turn around why feature X sucks in language Y, or that claim language Y doesn't have X, although in fact it does. I also know exactly why I prefer Python, but that's also subjective, and wouldn't help anybody choosing, as they might not have the same tastes in development as I do.It would therefore be interesting to list the differences, objectively. So no ""Python's lambdas sucks"". Instead explain what Ruby's lambdas can do that Python's can't. No subjectivity. Example code is good!Don't have several differences in one answer, please. And vote up the ones you know are correct, and down those you know are incorrect (or are subjective). Also, differences in syntax is not interesting. We know Python does with indentation what Ruby does with brackets and ends, and that @ is called self in Python.UPDATE: This is now a community wiki, so we can add the big differences here.Ruby has a class reference in the class bodyIn Ruby you have a reference to the class (self) already in the class body. In Python you don't have a reference to the class until after the class construction is finished.An example: self in this case is the class, and this code would print out ""Kaka"". There is no way to print out the class name or in other ways access the class from the class definition body in Python (outside method definitions).All classes are mutable in RubyThis lets you develop extensions to core classes. Here's an example of a rails extension: Python (imagine there were no ''.startswith method): You could use it on any sequence (not just strings). In order to use it you should import it explicitly e.g., from some_module import starts_with.Ruby has Perl-like scripting featuresRuby has first class regexps, $-variables, the awk/perl line by line input loop and other features that make it more suited to writing small shell scripts that munge text files or act as glue code for other programs.Ruby has first class continuationsThanks to the callcc statement. In Python you can create continuations by various techniques, but there is no support built in to the language.Ruby has blocksWith the ""do"" statement you can create a multi-line anonymous function in Ruby, which will be passed in as an argument into the method in front of do, and called from there. In Python you would instead do this either by passing a method or with generators.Ruby: Python (Ruby blocks correspond to different constructs in Python): Or Or Interestingly, the convenience statement in Ruby for calling a block is called ""yield"", which in Python will create a generator.Ruby: Python: Although the principles are different, the result is strikingly similar.Ruby supports functional style (pipe-like) programming more easily Python: Python has built-in generators (which are used like Ruby blocks, as noted above)Python has support for generators in the language. In Ruby 1.8 you can use the generator module which uses continuations to create a generator from a block. Or, you could just use a block/proc/lambda! Moreover, in Ruby 1.9 Fibers are, and can be used as, generators, and the Enumerator class is a built-in generator 4docs.python.org has this generator example: Contrast this with the above block examples.Python has flexible name space handlingIn Ruby, when you import a file with require, all the things defined in that file will end up in your global namespace. This causes namespace pollution. The solution to that is Rubys modules. But if you create a namespace with a module, then you have to use that namespace to access the contained classes.In Python, the file is a module, and you can import its contained names with from themodule import *, thereby polluting the namespace if you want. But you can also import just selected names with from themodule import aname, another or you can simply import themodule and then access the names with themodule.aname. If you want more levels in your namespace you can have packages, which are directories with modules and an __init__.py file.Python has docstringsDocstrings are strings that are attached to modules, functions and methods and can beintrospected at runtime. This helps for creating such things as the help command andautomatic documentation. Ruby's equivalent are similar to javadocs, and located above the method instead of within it. They can be retrieved at runtime from the files by using 1.9's Method#source_location example usePython has multiple inheritanceRuby does not (""on purpose"" -- see Ruby's website, see here how it's done in Ruby). It does reuse the module concept as a type of abstract classes.Python has list/dict comprehensionsPython: Ruby: Python: Ruby: Python 2.7+: Ruby: Python has decoratorsThings similar to decorators can also be created in Ruby, and it can also be argued that they aren't as necessary as in Python.Syntax differencesRuby requires ""end"" or ""}"" to close all of its scopes, while Python uses white-space only. There have been recent attempts in Ruby to allow for whitespace only indentation http://github.com/michaeledgar/seamless <code>  class Kaka puts selfend class String def starts_with?(other) head = self[0, other.length] head == other endend def starts_with(s, prefix): return s[:len(prefix)] == prefix amethod { |here| many=lines+of+code goes(here)} with amethod() as here: # `amethod() is a context manager many=lines+of+code goes(here) for here in amethod(): # `amethod()` is an iterable many=lines+of+code goes(here) def function(here): many=lines+of+code goes(here)amethod(function) # `function` is a callback def themethod yield 5endthemethod do |foo| puts fooend def themethod(): yield 5for foo in themethod(): print foo myList.map(&:description).reject(&:empty?).join(""\n"") descriptions = (f.description() for f in mylist)""\n"".join(filter(len, descriptions)) def reverse(data): for index in range(len(data)-1, -1, -1): yield data[index] def frobnicate(bar): """"""frobnicate takes a bar and frobnicates it >>> bar = Bar() >>> bar.is_frobnicated() False >>> frobnicate(bar) >>> bar.is_frobnicated() True """""" res = [x*x for x in range(1, 10)] res = (0..9).map { |x| x * x } >>> (x*x for x in range(10))<generator object <genexpr> at 0xb7c1ccd4>>>> list(_)[0, 1, 4, 9, 16, 25, 36, 49, 64, 81] p = proc { |x| x * x }(0..9).map(&p) >>> {x:str(y*y) for x,y in {1:2, 3:4}.items()}{1: '4', 3: '16'} >> Hash[{1=>2, 3=>4}.map{|x,y| [x,(y*y).to_s]}]=> {1=>""4"", 3=>""16""}","What does Ruby have that Python doesn't, and vice versa?"
how to do static ocntent in Rails?," Looking at different options:One is to just put the static pages in the public/ folder, but I do want the header from layout/application to be consistent.I tried this, but I got an error: All I want is an easy way to put together things like my faq, contact, tos, privacy, and other non-application type pages somewhere easy by just creating an .rhtml. who has done this? <code>  # in routes.rb:map.connect '*path', :controller => 'content', :action => 'show'# in content_controller.rb:def show render :action => params[:path].join('/')end",How to do static content in Rails?
Is there a consensus about an ideal test framework for Ruby 1.9.x?," A two-parter with a quick intro. Intro: I'm coming to Ruby from Perl, and I'm a bit lost among the test framework choices. I understand that there is probably no single, all-around best choice, but I can't even get a clear picture of the playing field.So, first, MiniTest or Test::Unit? I just realized that 1.9.1 defaults to MiniTest now. I hadn't noticed since all the older Test::Unit tutorials still work fine. If you require test/unit, you actually get MiniTest as a Test::Unit emulator (!). My initial thought was to go with the default choice of MiniTest (once I knew it was there), but even very recent books don't seem interested in teaching it. Ruby Best Practices says ""There are significant differences"" between the two, but he chooses not to deal with them. He also runs all his tests via Test::Unit (plus some custom add-ons). The new Pickaxe also has very little about MiniTest per se, and in the chapter on testing they also use the Test::Unit emulation version of MiniTest. To clarify my first question then: is MiniTest a poor first option? Should I default to using the Test::Unit emulator?Second, beyond the built-in options, there are Rspec, Cucumber & company for behavior driven tests. Is the community tilting strongly towards this style and this framework? Should I just start with Rspec?I will play a bit with all three, but I'm curious to hear what kind of consensus (if any) is forming around testing in Ruby 1.9.(A quick follow-up, as a reminder to myself and for anyone interested. See this link for a useful overview of the different invocations for Test::Unit and MiniTest in the various Rubies 1.8 to 1.9.1.) <code> ",Is there a consensus about test frameworks for Ruby 1.9.x?
Submitting POST data from the controller in rails to another website, User submits a form with some basic data.The data is received and treated by an action in the controller and more information that needs to remain private is added.Then I need to send a post request to an external website with all of the combined data from the controller.What is the best way to do this? <code> ,Submit POST data from controller to another website in Rails
"Native threads in Ruby 1.9.1, whats in it for me? "," So, Ruby 1.9.1 is now declared stable. Rails is supposed to work with it and slowly gems are being ported to it.It has native threads and a global interpreter lock (GIL). Since a GIL is in place, do native threads offer any kind of benefit over green threads in 1.9.1?  <code> ","Native threads in Ruby 1.9.1, whats in it for me?"
how can I find out the current route in rails?," I need to know the current route in a filter in Rails. How can I find out what it is?I'm doing REST resources, and see no named routes. <code> ",How can I find out the current route in Rails?
What are library that is ported with different programming language than its original?," Since I am working with different Platforms and programming languages, I found there are many good libraries that are ported with different programming language than its original. For example JUnit and Log4j which has been ported into several different languages. Sometimes if I am already used to working with these libraries, I would find the ported version for it if I'm working with another programming language.What are other libraries that you have found been ported to different languages and as good as the original?Please make it one library per answer so others can vote.Format: Original-Library-Name, Original-Programming-LanguagePorted-Library-Name, Ported-Programming-LanguageIf possible with the links to the website of the libraries. <code> ",Which libraries have been ported to different programming languages?
What's the difference between DateTime and Time in Ruby?, What's the difference between DateTime and Time classes in Ruby and what factors would cause me to choose one or the other? <code> ,Difference between DateTime and Time in Ruby
How do I exscape #{ from string interpolation," I have a heredoc where I am using #{} to interpolate some other strings, but there is an instance where I also want to write the actual text #{some_ruby_stuff} in my heredoc, WITHOUT it being interpolated. Is there a way to escape the #{.I've tried ""\"", but no luck. Although it escapes the #{}, it also includes the ""\"": <code>  >> <<-END #{RAILS_ENV} \#{RAILS_ENV} END=> "" development \#{RAILS_ENV}\n""",How do I escape #{ from string interpolation
How do you find a min / max with Ruby?," I want to use min(5,10), or Math.max(4,7). Are there functions to this effect in Ruby? <code> ",How to find a min/max with Ruby
Ruby: how can I copy this global variable?," (Follow-up to my earlier question, Ruby: how can I copy a variable without pointing to the same object?)I'm writing a simple Ruby program to make some substitutions in an .svg file. The first step is to pull information from the file and put it in an array. In order to keep from reading the file from disk every time this function is called, I'm trying to use the memoize design pattern - use a cached result on every call after the first one.To do this, I'm using a global variable, defined just before the function. But even though I .dup that variable to a local one before returning the local variable, the function that calls this one is still modifying the global variable.Here is my actual code: Two questions (answer either or both):Why do other functions, which take in and modify the value returned here, also affect the global variable, even though I used .dup to copy it?I'm new to Ruby and I'm sure this isn't the most Rubyesque way to do this (and I don't like global variables, anyway). Can you suggest a better strategy? <code>  #memoize to keep from having to read original file on each pass$svg_filedata_cache = [] #the global variabledef svg_filedata(filename) if $svg_filedata_cache.empty? File.open(filename, ""r""){|f| $svg_filedata_cache = f.readlines} end svg_filedata_cache = $svg_filedata_cache.dup #try to copy it return svg_filedata_cache #SHOULD point to a different object (but doesn't)end",Ruby: how can I copy this array?
select parent node containing text inside children's node.," basically i want to select a node (div) in which it's children node's(h1,b,h3) contain specified text. i am expecting, /html/div/ not /html/div/h1i have this below, but unfortunately returns the children, instead of the xpath to the div. i am expecting, /html/div/ not /html/div/h1So is there a way to do this simply with xpath syntax? <code>  <html><div id=""contents""><p><h1> Child text 1</h1><b> Child text 2 </b>...</p><h3> Child text 3 </h3></div> expression = ""//div[contains(text(), 'Child text 1')]""doc.xpath(expression)",select parent node containing text inside children's node
"Using gsub to replace semicolons with newline characters (Ruby, Rails console)"," Annoying problem. I am trying to replace all semicolon characters in my Model's description field with newline characters (\n). The database is sqlite. The field is of type text. If I do it manually at the rails console (manually typing the description for a single record using \n for line breaks), the rails console automatically escapes the \n, and the description field becomes filled with \\n. If I do it programmatically using gsub, I get the following situation: => ...details of record ... => ...success - it all looks good, new lines in the returned value are represented by \n... => ...details of record ... => ... the description field still has semicolons in it rather than newline characters ...AHHHHHH!!!!!!! <code>  >> s = Sample.find(:first) >> s.description.gsub!(/;/,""\n"") >> s.save=> true>> reload!Reloading=> true>> s = Sample.find(:first) >> s.description","Using gsub to replace a particular character with a newline (Ruby, Rails console)"
How to do a regex search in nokogiri ," Given: I want to do something like what I can do in Hpricot: How do I do a pattern search for elements in XPath style?Where would I find the documentation to help me? I didn't see this in the rdocs. <code>  require 'rubygems'require 'nokogiri'value = Nokogiri::HTML.parse(<<-HTML_END)""<html><body> <p id='para-1'>A</p> <div class='block' id='X1'> <h1>Foo</h1> <p id='para-2'>B</p> </div> <p id='para-3'>C</p> <h2>Bar</h2> <p id='para-4'>D</p> <p id='para-5'>E</p> <div class='block' id='X2'> <p id='para-6'>F</p> </div></body></html>""HTML_END divs = value.search('//div[@id^=""para-""]')",How do I do a regex search in Nokogiri for text that matches a certain beginning?
How do I do a regex search in Nokogiri?," Given: I want to do something like what I can do in Hpricot: How do I do a pattern search for elements in XPath style?Where would I find the documentation to help me? I didn't see this in the rdocs. <code>  require 'rubygems'require 'nokogiri'value = Nokogiri::HTML.parse(<<-HTML_END)""<html><body> <p id='para-1'>A</p> <div class='block' id='X1'> <h1>Foo</h1> <p id='para-2'>B</p> </div> <p id='para-3'>C</p> <h2>Bar</h2> <p id='para-4'>D</p> <p id='para-5'>E</p> <div class='block' id='X2'> <p id='para-6'>F</p> </div></body></html>""HTML_END divs = value.search('//div[@id^=""para-""]')",How do I do a regex search in Nokogiri for text that matches a certain beginning?
Is there an existing way of passing initializing an object through a Hash?," If I have this class: and this code: is it possible to initialize the object directly from the hash, without me needing to go over each pair and call instance_variable_set? Something like: which should cause each instance variable to be initialized to the one that has the same name in the hash. <code>  class A attr_accessor :b,:c,:dend a = A.newh = {""b""=>10,""c""=>20,""d""=>30} a = A.new(h)",Is there a way to initialize an object through a hash?
Is there an way to initializing an object through a Hash?," If I have this class: and this code: is it possible to initialize the object directly from the hash, without me needing to go over each pair and call instance_variable_set? Something like: which should cause each instance variable to be initialized to the one that has the same name in the hash. <code>  class A attr_accessor :b,:c,:dend a = A.newh = {""b""=>10,""c""=>20,""d""=>30} a = A.new(h)",Is there a way to initialize an object through a hash?
how to jump from do to end in vim?," I'm using vim for ruby, php and perl development. There is the shortcut % to jump from the begin of a block (subroutine/function/method/if) to the end and vice versa.For me a % on a do/end tag in ruby doesn't work.How can I do that with vim?  <code> ",How to jump from do to end of a Ruby block using Vim?
perl6 grammars (or something similar) for ruby?, Perl has been one of my go-to programming language tools for years and years. Perl 6 grammars looks like a great language feature. I'd like to know if someone has started something like this for Ruby.  <code> ,Does Ruby have an addon similar to Perl 6 grammars?
Does anyone know if Ruby has an addon similar to Perl 6 grammars?, Perl has been one of my go-to programming language tools for years and years. Perl 6 grammars looks like a great language feature. I'd like to know if someone has started something like this for Ruby.  <code> ,Does Ruby have an addon similar to Perl 6 grammars?
Why isn't the Ruby 1.9 lambda call possible without the dot in front of the parens?," I checked out the latest Ruby version, to play a bit with the latest changes. The first thing I tried to do was call a Ruby lambda/block/proc just like you'd do with a Python callable. Why isn't the last call possible? Will it ever be? <code>  a = lambda {|x| puts x}a.call(4) # works, and prints 4a[4] # works and prints 4a.(4) # samea(4) # undefined method 'a' for main:Object",Why isn't the Ruby 1.9 lambda call possible without the dot in front of the parentheses ?
Assign multiple values to hash key in Ruby," For the sake of convenience I am trying to assign multiple values to a hash key in Ruby. Here's the code so far Looping through the hash gives a concatenated string of the 3 valuesOutput: Required Output: What code must I write to get the required output? <code>  myhash = { :name => [""Tom"" , ""Dick"" , ""Harry""] } name : TomDickHarry :name => ""Tom"" , :name => ""Dick"" , :name => ""Harry""",How can I assign multiple values to a hash key?
How to best create a random float in a range between to floats," I know that I can generate random floats with rand(max). I tried to generate a float in a range, this shouldn't be hard. But e.g rand(1.4512) returns 0, thus rand isn't calculating with floats. Now I tried a little trick, converting the thing to an integer and after randomizing a fitting number in my desired range, calculating it back to a float.. which is not working. My question is how to do this in a better way. If there is no better way, why is this one not working? (Maybe it's too late for me, I should've started sleeping 2 hours ago..). The whole thing aims to be a method for calculating a ""position"" field for database records so users can order them manually. I've never done something like this before, maybe someone can hint me with a better solution.Here's the code so far: Thanks! <code>  def calculate_position(@elements, index) min = @elements[index].position if @elements[index + 1].nil? pos = min + 1 else pos = min + (rand(@elements[index + 1].position * 10000000000) / 10000000000) end return posend",How to best create a random float in a range between two floats
What's the purpose of tainting ruby objects?," I'm aware of the possibility to mark untrusted objects as tainted, but what's the underlying purpose and why should I do it? <code> ",What's the purpose of tainting Ruby objects?
"Ruby - Error with ""Gets"""," I'm rather new to Ruby, and today I wrote an application which you can pass arguments to via ARGV. But inside my application, I want to be able to use ""gets"". Problem is, every time I try to do so, I get an error.Here's a simple script which shows my problem: If I'd call that like this: I get this error: Hope someone is able to help me solve this, so I can continue my Ruby journey. :)Edit: I am aware that ""Gets"" won't retrieve arguments passed to the file. ""Gets"" will query the user for input. I want to be able to use both these methods inside my application. <code>  print ""Say something! ""input = gets $ ruby script.rb this is arguments script.rb:2:in `gets': No such file or directory - this (Errno::ENOENT)from script.rb:2",Kernel#gets attempts to read file instead of standard input
ruby: how to initialized  an array across several lines ," I have a small Ruby script where an array is initialized to hold a few strings The problem is that I have quite a few strings in the initialization list and I would like to break the line: but Ruby flags a syntax error for this format I tried adding ""\"" to the end of each line without any success. How can this be accomplished in Ruby? <code>  MyArray = [""string 1"", ""string 2"" , ""string 2"" ] MyArray = [ ""string 1"" ,""string 2"" ,""string 2"" ]",Ruby: how to initialize an array across several lines 
How to embedded a tag in content tag in RoR??," I have this to generate a hyperlink for me: And I want it display in the td tag, so I want to use this content_tag to help me: I want the hyperlink in my td, so I have something like this: But I get the Syntax Error, what should I do? <code>  <%= link_to ""Example"", ""http://example.com"" %> <%= content_tag(:td,"""", :class => ""example"")%> <%= content_tag(:td,<%= link_to ""Example"", ""http://example.com"" %>, :class => ""example"")%>",How to embed a tag using content_tag in RoR?
date_select ruby, How do I extend the range of the date_select in Ruby?It only goes as far as 2005 and I'd like to use it for the date of birth. <code> ,date_select Ruby
Writing Beautiful Ruby: Checking for nil string before concatenating," This question is similar to a LOT of questions, but in no such way is it anything of a duplicate. This question is about string concatenation and writing better code less than it is for checking nil/zero.Currently I have: Which works fine, but doesn't look good. What is a better way to write this in ruby so that I am checking for nil and not concatenating it <code>  file.puts ""cn: "" + (var1.nil? ? ""UNKNOWN"" : var1)",Checking for nil string before concatenating
Sinatra: What's the correct way to serve a static HTML page?," This works, but it was a stab in the dark. I know little Ruby.What's the accepted way to serve a plain old file for a given resource? <code>  get '/xyz' do File.read 'abc.html'end",Sinatra: What's the correct way to serve a plain old file?
What is this &:last Ruby Construct Called?," Possible Duplicate: What does map(&:name) mean in Ruby? What are things like survey.map(&:questions).flatten.compact called, so I can find more information about them :). What problems does that &: solve, or what is it doing exactly? Is it used in other languages? <code> ",What is this &:last Ruby construct called?
Logging Ruby code execution path," I've inherited a large pile of Ruby code that's, frankly, close to impossible to understand for a mortal like myself. It's actually Rspec unit test code, but the structure is ""highly unusual"" to put it nicely.What I'd like to be able to do is run the code, and have the following information logged somewhere:every method that gets invoked, including the name of the class that defines the method, and the filename where the invoked method has been defined (yep, we've got the same class/method defined in multiple different files, and it's tough to know which is being invoked)(optionally) the parameters passed to each method invokedWith that, I could start trying to refactor it. Without it, it's going to be a very difficult task to get it straightened out, due to the size of the code base (20k+ unit test cases).I can't afford to go in and perform wholesale edits to the code being run, because it breaks when you even use harsh language around it (i.e. frequently). Instead, I need to be able to instrument the code in its existing state, or with minimal changes to what exists now.Is there a way of logging this level of detail without making wholesale changes to the code base? I've had a look at the Ruby profiler to see if it could help, and it probably could; I'm curious if there's a better way (particularly logging the filename containing the invoked method).Thanks in advance <code> ",How do I log every method that's called in a Ruby program?
how to protect password in my script? (ruby), in my ruby script I need to pass user name and password as a plain text in a form in order to log in. Both user name and password are currently stored in my script. I have no control over the server I log in from the script. The script is localy working fine and in the future I want to move to onto my webhosting provider and run it from there (I have ssh access)using cron. Is there any way/method how to protect the password in case somebody gets access to this script by any chance? <code> ,how to protect plain text password in my script? (ruby)
Ruby (or Python) Instead of Shell ," Since I am conversant in Ruby, I am about to script a few things on OSX using it. But then I thought, perhaps I am missing the boat. I know a lot of reasons to prefer Ruby over Bash (or whatever sh-compatible command language interpreter), but I don't know any reasons not to. What is the upside of programming the shell directly?I intend to take advantage of system commands using system whenever necessary.Note: I already know that Ruby won't always be there, but I'm interested in mostly technical, semantic and syntactic criteria.By Ruby not always being there, I mean that it is not a standard part of all *nix distributions, unlike vi. <code> ",Why and when to use the shell instead of Ruby
Why and when to use shell instead of Ruby," Since I am conversant in Ruby, I am about to script a few things on OSX using it. But then I thought, perhaps I am missing the boat. I know a lot of reasons to prefer Ruby over Bash (or whatever sh-compatible command language interpreter), but I don't know any reasons not to. What is the upside of programming the shell directly?I intend to take advantage of system commands using system whenever necessary.Note: I already know that Ruby won't always be there, but I'm interested in mostly technical, semantic and syntactic criteria.By Ruby not always being there, I mean that it is not a standard part of all *nix distributions, unlike vi. <code> ",Why and when to use the shell instead of Ruby
Opening a URL with a comma using `open-uri`," I am running in to OpenURI::HTTPError: 403 Forbidden errorwhen I try to open a URL with a comma (OR other special characters like .).I am able to open the same url in a browser. How do I escape such URL?I have tried to escape the url with CGI::escape and I get the same error. <code>  require 'open-uri'url = ""http://en.wikipedia.org/wiki/Thor_Industries,_Inc.""f = open(url)# throws OpenURI::HTTPError: 403 Forbidden error f = open(CGI::escape(url))",Opening a WIKI URL with a comma using `open-uri`
[RAILS] Howto to download a file from a http and save it into database," i would like to create a Rails controller that download a serie of jpg files from the web and directly write them into database as binary (I am not trying to do an upload form)Any clue on the way to do that ?Thank youEdit : Here is some code I already wrote using attachment-fu gem : And I get an ""undefined method `content_type' for #"" error <code>  http = Net::HTTP.new('awebsite', 443)http.use_ssl = truehttp.verify_mode = OpenSSL::SSL::VERIFY_NONEhttp.start() { |http| req = Net::HTTP::Get.new(""image.jpg"") req.basic_auth login, password response = http.request(req) attachment = Attachment.new(:uploaded_data => response.body) attachement.save}",Rails: How to to download a file from a http and save it into database
Duplicating an array of strings.," produces: Is there anyway to do a deep copy of an array of strings, other than using Marshal as i understand that is a hack.I could do: but it doesn't seem very elegant, or efficient.Thanks <code>  arr = [""red"",""green"",""yellow""]arr2 = arr.clonearr2[0].replace(""blue"")puts arr.inspectputs arr2.inspect [""blue"", ""green"", ""yellow""][""blue"", ""green"", ""yellow""] arr2 = []arr.each do |e| arr2 << e.cloneend",Duplicating a Ruby array of strings
Rails Sessions current practices (especially for rails 3)," Anyone have any ""best practices"" tips for Rails and sessions? The default session type for Rails 3 is still CookieStore, right? I used SqlSessionStore for a while and it worked well, but I may move away from that in favor of CookieStore. Is it still not a good idea to use CookieStore for sensitive info, even with salted info or is that better stored in the DB? <code> ",Rails sessions current practices
Rails sessions current practices (especially for Rails 3)," Anyone have any ""best practices"" tips for Rails and sessions? The default session type for Rails 3 is still CookieStore, right? I used SqlSessionStore for a while and it worked well, but I may move away from that in favor of CookieStore. Is it still not a good idea to use CookieStore for sensitive info, even with salted info or is that better stored in the DB? <code> ",Rails sessions current practices
Understanding ruby array sort," I am having a problem understanding how array.sort{ |x,y| block } works exactly, hence how to use it?An example from Ruby documentation: <code>  a = [ ""d"", ""a"", ""e"", ""c"", ""b"" ] a.sort #=> [""a"", ""b"", ""c"", ""d"", ""e""] a.sort { |x,y| y <=> x } #=> [""e"", ""d"", ""c"", ""b"", ""a""]",How does Array#sort work when a block is passed?
Any way to determine which object called a method? [Ruby], I'm hoping that Ruby's message-passing infrastructure means there might be some clever trick for this.How do I determine the calling object -- which object called the method I'm currently in? <code> ,Any way to determine which object called a method?
Unicode filenames on windows in ruby," I have a piece of code that looks like this: The problem comes when I have a file named .txt in the directory that I list.On a Windows 7 machine I get the output: From googling around, properly reading this filename on windows seems to be an impossible task. Any suggestions? <code>  Dir.new(path).each do |entry| puts entryend ???????.txt",Unicode filenames on Windows in Ruby
How to determine if a character is a chinese character, How to determine if a character is a Chinese character using ruby <code> ,How to determine if a character is a Chinese character
What's the Difference Between These Two Ruby Class Initialaztion Definitions?," I'm working through a book on Ruby, and the author used a slightly different form for writing a class initialization definition than he has in previous sections of the book. It looks like this: In previous sections of the book, it would've been defined like this: Is there any functional difference between using the setter method, as in the first example, vs. using the instance variable as in the second? They both seem to work. Even mixing them up works: <code>  class Ticket attr_accessor :venue, :date def initialize(venue, date) self.venue = venue self.date = date endend class Ticket attr_accessor :venue, :date def initialize(venue, date) @venue = venue @date = date endend class Ticket attr_accessor :venue, :date def initialize(venue, date) @venue = venue self.date = date endend",What's the Difference Between These Two Ruby Class Initialization Definitions?
usage of attr_attribute in Rails, When do you use attr_reader/attr_writer/attr_accessor in Rails models? <code> ,usage of attr_accessor in Rails
how do i Raw url ENCODING/ DECODING in javascript and ruby to get the same answers in both?," I am working on a web application where I have to encode and decode a string at the JavaScript side and Ruby backend of the code. the only problem is that the escape methods for JavaScript and Ruby have a small difference. in JavaScript the "" "" is treated as ""%20"" but in ruby the "" "" is encoded to ""+"".Any way to solve this? Another Ruby method to encode a string in raw URL encode?After some Selenium testing I noticed that for some reason the URI.unescape mixes up between the """" and the ""?"". If I use encodeURIComponent(""""); in JavaScript and then URI.unescape(""%C2%A3"") in Ruby which is the value we get when we encode the """" sign, I get the ""?"" sign returned. Any solution? <code> ",How do I raw URL encode/decode in JavaScript and Ruby to get the same values in both?
Ruby: method names ending with : (colon)?," Just wondering if it is possible, by some loophole, to define a method name that ends in a colon. The purpose it to make things look like this: <code>  mymethod: arg1,arg2,arg3",Is it possible in Ruby to define a method which name ends with : (colon)?
How to comment multiple lines in ruby..??, How can I comment multiple lines in Ruby? <code> ,Multi-Line Comments in Ruby?
How can I comment multiple lines in Ruby?, How can I comment multiple lines in Ruby? <code> ,Multi-Line Comments in Ruby?
Is ruby ||= intelligent?," I have a question regarding the ||= statement in ruby and this is of particular interest to me as I'm using it to write to memcache. What I'm wondering is, does ||= check the receiver first to see if it's set before calling that setter, or is it literally an alias to x = x || yThis wouldn't really matter in the case of a normal variable but using something like: could possibly do a memcache write which is more expensive than a simple variable set. I couldn't find anything about ||= in the ruby api oddly enough so I haven't been able to answer this myself.Of course I know that: would achieve this, I'm just looking for the most terse syntax. <code>  CACHE[:some_key] ||= ""Some String"" CACHE[:some_key] = ""Some String"" if CACHE[:some_key].nil?",Is the ruby operator ||= intelligent?
how do i get name of the month in ruby on Rails?, so i create in my view: How do i get the name of the month out of the date? I was trying to do sth like But without success. I keep getting an error: uninitialized constant ActionView::Base::CompiledTemplates::MONTHNAMESHow do i initialise the constant or is there any other way to get the name out of the Date format?would greatly appreciate any answers! <code>  <%=date=Date.today%> <%= DATE::ABBR_MONTHNAMES(date.month)%> ,how do I get name of the month in ruby on Rails?
Ruby refactoring in VIM," I'm a big fan of Resharper in Visual Studio. It has some awesome refactoring tools, similar to what you get in Eclipse for Java. Is there anything like this for Ruby? Better yet, is there a plugin or something into Vim that does refactoring for Ruby code like renaming all instances of a method or variable, renaming classes sitewide, etc? <code> ",Ruby refactoring in Vim
Functional unwrapping of nested array in ruby 1.9," Given an array containing other nested arrays, I want to create an array containing only the elements from the first array. For example [[""1"", ""2""], ""3"", [[""4""]]] should evaluate to [""1"", ""2"", ""3"", ""4""].I've managed to make a method that works: but I haven't been able to figure out how to eliminate the @@unwrapped_array variable. <code>  @@unwrapped_array = [] def unwrap_nested_array(array) if array.respond_to?('each') array.each { |elem| unwrap_nested_array(elem) } else @@unwrapped_array.push array end end",Functional unwrapping of nested array
There is something like Java Quartz in ruby?, The is a library like Quartz in Java for ruby? <code> ,Is there something like Java Quartz in ruby?
Ruby get current user windows (Web)," In C# I can get the current user of a web app using the HttpContext, however, I can't figure out how to do this in Ruby. Is there any way of doing this?FOR THOSE OF YOU SAYING IT IS IMPOSSIBLE, HERES PROOF:http://www.codeproject.com/KB/aspnet/How_to_NT_User_Name.aspx <code> ",Ruby: Get currently logged in user on windows
Ruby On Rails : Reading Spreadsheet ," I am trying to read an Excel spreadsheet file with Ruby, but it is not reading the content of the file. This is my script It is giving me the following: I need to get the actual content of file. What am I doing wrong? <code>  book = Spreadsheet.open 'myexcel.xls';sheet1 = book.worksheet 0sheet1.each do |row| puts row.inspect ; puts row.format 2; puts row[1]; exit;end [DEPRECATED] By requiring 'parseexcel', 'parseexcel/parseexcel' and/or 'parseexcel/parser' you are loading a Compatibility layer which provides a drop-in replacement for the ParseExcel library. This code makes the reading of Spreadsheet documents less efficient and will be removed in Spreadsheet version 1.0.0#<Spreadsheet::Excel::Row:0xffffffdbc3e0d2 @worksheet=#<Spreadsheet::Excel::Worksheet:0xb79b8fe0> @outline_level=0 @idx=0 @hidden=false @height= @default_format= @formats= []>#<Spreadsheet::Format:0xb79bc8ac>nil",How do I read the content of an Excel spreadsheet using Ruby?
How to know weather a model is new or not?, How do I judge whether the 'post' is a new model which is not pulled from the database?  <code>  class Post < ActiveRecord::Baseendpost = Post.new,How to know whether a model is new or not?
"ruby, check if integer is within a range"," Is there a simple way to evaluate whether an integer is within that range using the (2..100) syntax.For example, say I wanted to evaluate as true if my integer x = 100, and my range is (0..200), I'm just looking for the simple, concise ruby-way of doing this. <code> ",Check if an integer is within a range
Every 10 minuets do some task in Ruby," I would like to do a cron job every 10 minutes, but my system only does 1 hour. So I'm looking for a method to do this. I've seen Timer and sleep but I'm not sure how to do this or even better yet a resource for achieving this. <code> ",How to make Ruby run some task every 10 minutes?
"whats the diffrence between ""="" & ""=>"" and whats the diffrence bewtween ""@some_variable"", ""@@some_variable"" and "":some_variable"" in ruby? "," I know these are the basics of rails but i still don't know the full difference between = sign and => and the difference between @some_variable, @@some_variable and :some_variable in rails.Thanks.  <code> ","What's the difference between ""="" & ""=>"" and ""@variable"", ""@@variable"" and "":variable"" in ruby? "
"what's the difference between ""="" & ""=>"" and what's the difference between ""@some_variable"", ""@@some_variable"" and "":some_variable"" in ruby? "," I know these are the basics of rails but i still don't know the full difference between = sign and => and the difference between @some_variable, @@some_variable and :some_variable in rails.Thanks.  <code> ","What's the difference between ""="" & ""=>"" and ""@variable"", ""@@variable"" and "":variable"" in ruby? "
SCP with Ruby and a private key," I have a small problem here: I try to upload a file using SCP and Ruby to a server using a private key. The code looks like: However there is some problem, and not with the private key since we use it for daily purposes, and I get the following log error: Can you please point out what might be wrong here? I have quite limited Ruby experience at this stage. <code>  def transfer_file(source_file, destination_file) $log.info(""ScpDP: Key=#{@key}"") Net::SCP.start(@host, @userName, :keys => @key ) do |scp| scp.upload!(source_file,@folder + destination_file, :ssh => @key) end end I, [2010-08-24T11:21:27.247847 #14310] INFO -- : ScpDP: Key=/home/myself/.ssh/id_rsaI, [2010-08-24T11:21:27.397971 #14310] INFO -- : SCP did not finish successfully (1) (Net::SCP::Error)/usr/lib/ruby/gems/1.8/gems/net-scp-1.0.2/lib/net/scp.rb:351:in `start_command'/usr/lib/ruby/gems/1.8/gems/net-ssh-2.0.11/lib/net/ssh/connection/channel.rb:585:in `call'/usr/lib/ruby/gems/1.8/gems/net-ssh-2.0.11/lib/net/ssh/connection/channel.rb:585:in `do_close'/usr/lib/ruby/gems/1.8/gems/net-ssh-2.0.11/lib/net/ssh/connection/session.rb:575:in `channel_close'/usr/lib/ruby/gems/1.8/gems/net-ssh-2.0.11/lib/net/ssh/connection/session.rb:455:in `send'/usr/lib/ruby/gems/1.8/gems/net-ssh-2.0.11/lib/net/ssh/connection/session.rb:455:in `dispatch_incoming_packets'/usr/lib/ruby/gems/1.8/gems/net-ssh-2.0.11/lib/net/ssh/connection/session.rb:212:in `preprocess'/usr/lib/ruby/gems/1.8/gems/net-ssh-2.0.11/lib/net/ssh/connection/session.rb:196:in `process'/usr/lib/ruby/gems/1.8/gems/net-ssh-2.0.11/lib/net/ssh/connection/session.rb:160:in `loop'/usr/lib/ruby/gems/1.8/gems/net-ssh-2.0.11/lib/net/ssh/connection/session.rb:160:in `loop_forever'/usr/lib/ruby/gems/1.8/gems/net-ssh-2.0.11/lib/net/ssh/connection/session.rb:160:in `loop'/usr/lib/ruby/gems/1.8/gems/net-ssh-2.0.11/lib/net/ssh/connection/session.rb:109:in `close'/usr/lib/ruby/gems/1.8/gems/net-scp-1.0.2/lib/net/scp.rb:204:in `start'/home/myself/work/server.rb:458:in `transfer_file'",How do I do SCP with Ruby and a private key?
Is there a supplementary guide/answer key for ruby koans?," I have recently tried sharpening my rails skills with this tool:http://github.com/edgecase/ruby_koansbut I am having trouble passing some tests. Also I am not sure if I'm doing some things correctly since the objective is just to pass the test, there are a lot of ways in passing it and I may be doing something that isn't up to standards.Is there a way to confirm if I'm doing things right?a specific example:in about_nil, so is it telling me to check if that second clause is equal to an object(so i can say nil is an object) or just put assert_equal true, nil.is_a?(Object) because the statement is true?and the next test: Im guessing I should put a ""No method error"" string in the assert_match, but what about the assert_equal? <code>  def test_nil_is_an_object assert_equal __, nil.is_a?(Object), ""Unlike NULL in other languages"" end def test_you_dont_get_null_pointer_errors_when_calling_methods_on_nil # What happens when you call a method that doesn't exist. The # following begin/rescue/end code block captures the exception and # make some assertions about it. begin nil.some_method_nil_doesnt_know_about rescue Exception => ex # What exception has been caught? assert_equal __, ex.class # What message was attached to the exception? # (HINT: replace __ with part of the error message.) assert_match(/__/, ex.message) endend",Ruby Koan: test_nil_is_an_object
RVM cannot use ruby with sudo, I have succefully configured RVM to use Ruby 1.9.2 and everything is fine. However when I'm trying to run Ruby using sudo it says it cannot find RVM or Ruby: Is that correct behavior or is my RVM misconfigured? Perhaps I should be using the system wide install? <code>  $ ruby -vruby 1.9.2p0 (2010-08-18 revision 29036) [x86_64-linux]$ sudo ruby -v[sudo] password for administrator:sudo: ruby: command not found,Cannot use RVM-installed Ruby with sudo
how to display current date in mm/dd/yyyy format in rails," In my view I want to display the current date in ""mm/dd/yyyy"" format. <code> ","How to display the current date in ""mm/dd/yyyy"" format in Rails"
deleting multiple key and value pair from hash in rails," upon evaluation of certain condition i want to delete key-value pair of a,b,c <code>  number = {:a => 1, :b => 2, :c => 3, :d => 4}",Deleting multiple key and value pairs from hash in Rails
Python: open source projects with a (bit) of hand-holding," Ive been roaming around the interwebs looking for my first open-source project to contribute to - and most cool ones seem to be one-man bands on github, which I could fork - but wouldnt quite provide the code review etc. i think i want, so i can improve my python abilities.Web.py, flask, celery, twisted etc look interesting - so far only the latter seems like a candidate for something I could properly contribute to, but even though im a decent(ish) python programmer, I think the whole event driven thing is probably too steep a learning curve for me to be able to contribute meaningfully for a while... so i'd probably like to start elsewhere.Any suggestions?btw. yes, there is a duplicate question here: https://stackoverflow.com/questions/117561/what-are-good-open-source-projects-in-python-for-which-i-can-be-a-contributor - but it is two years old, I think it is fair to assume new stuff / projects will have emerged in the interim.Thanks! <code> ",Python (or maybe JavaScript / Ruby): open source projects that will give me a (bit) of hand-holding
Is there a Python equivalent to Ruby symbols? , Is there a Python equivalent to Ruby symbols? If so then what is it?If not then are we stuck with using strings as our keys in dictionaries only? <code> ,Is there a Python equivalent to Ruby symbols?
Why cant I do if zero in ruby," Why does it print test? <code>  >> current_user.first_visit=> 0>> if current_user.first_visit>> puts ""test"">> endtest=> nil","Why can't I do ""if zero"" in ruby?"
Is there a way to list the availble variables in an Ruby ERB template?," Suppose I have a Ruby ERB template named my_template.html.erb, and it contains the following: Is there a way I can programatically list out all the available variables in the template?For example, the following method: would return something like: Any help would be greatly appreciated.Thanks,Mike <code>  <div><%= @div_1 %></div><div><%= @div_2 %></div><div><%= @div_3 %></div> def list_out_variables template = File.open(""path_to/my_template.html.erb"", ""rb"").read erb = ERB.new( template ) erb.this_method_would_list_out_variables end ['div1','div2','div3']",Is there a way to list the available variables in an Ruby ERB template?
Rails - Best-Practice: How to create dependend has_one relations," What's the best practice to create has_one relations?For example, if I have a user model, and it must have a profile...How could I accomplish that?One solution would be: But that doesn't seem very clean... Any suggestions? <code>  # user.rbclass User << ActiveRecord::Base after_create :set_default_association def set_default_association self.create_profile endend",Rails - Best-Practice: How to create dependent has_one relations
Is there a good Process Monitoring and Control framework in either ruby or perl, I came across God which seems good but I am wondering if anyone knows of other process monitoring and control frameworks that I can compare god with.God has the following features:Config file is written in RubyEasily write your own custom conditions in RubySupports both poll and event based conditionsDifferent poll conditions can have different intervalsIntegrated notification system (write your own too!)Easily control non-daemonizing scriptsThe last one is what i am having difficulty with. <code> ,Is there a good process monitoring and control framework in either Ruby or Perl?
"Ruby on Rails migration, move table to MyISAM"," How does one create a Rails migration properly so that a table gets changed to MyISAM in MySQL? It is currently InnoDB. Running a raw execute statement will change the table, but it won't update db/schema.rb, so when the table is recreated in a testing environment, it goes back to InnoDB and my fulltext searches fail.How do I go about changing/adding a migration so that the existing table gets modified to MyISAM and schema.rb gets updated so my db and respective test db get updated accordingly? <code> ","Ruby on Rails migration, change table to MyISAM"
How to get an HTTPS request with SSL client cert to work with Ruby EventMachine," I am trying to access an HTTPS web service that uses SSL cert authentication using Ruby EventMachine but I am not getting it to work.I have written the following simple code block to test it end-to-end: Running the above outputs <SSL_incomp> followed by the raised RuntimeError message. I have tried running with :verify_peer set to both true and false and it gives me the same error. Running EventMachine::HttpRequest#get without the :ssl option does the same.I have also tried sending the request to GMail (https://mail.google.com) without the :ssl option (i.e. plain HTTPS without cert) and that works, outputting status code 200, the headers and the body.I have tried doing the same request to the web service with curl and that works: I am thinking that I am either using the em-http-request gem or EventMachine incorrectly or that the SSL files are in a format that works with curl but not EventMachine.I someone knows how to solve the example above or provide a similar example using EventMachine directly would be much appreciated! <code>  require 'rubygems'require 'em-http'EventMachine.run do url = 'https://foobar.com/' ssl_opts = {:private_key_file => '/tmp/private.key', :cert_chain_file => '/tmp/ca.pem', :verify_peer => false} http = EventMachine::HttpRequest.new(url).get :ssl => ssl_opts http.callback do p http.response_header.status p http.response_header p http.response EventMachine.stop end http.errback do EventMachine.stop fail ""Request failed"" endend curl --silent --cert /tmp/private.key --cacert /tmp/ca.pem https://foobar.com/",How do I get an HTTPS request with SSL client cert to work with Ruby EventMachine?
why can't we access local variable inside rescue ?, Local Variable Instance Variable <code>  begin transaction #Code inside transaction object = Class.new attributes raise unless object.save! end rescue puts object.error.full_messages # Why can't we use local varible inside rescue ?end begin transaction #Code inside transaction @object = Class.new attributes raise unless @object.save! end rescue puts @object.error.full_messages # This is working fine.end,Why can't we access local variable inside rescue ?
Rails method - to_sym, What does the to_sym method do? What is it used for? <code> ,What does the Ruby method 'to_sym' do?
What does the Ruby on Rails' method 'to_sym' do?, What does the to_sym method do? What is it used for? <code> ,What does the Ruby method 'to_sym' do?
How to convert string to bytes in Ruby ?," How do I extend the String class, and attach a method named to_bytes? <code> ",How to convert string to bytes in Ruby?
Devise not displaying error messge during a authentication failure!," I was expecting a flash notice when authentication failures occurs in devise. But get nothing during a authentication failure, just the page refreshes and remains still. I didn't change any stuffs. The default devise installation itself is not displaying flash errors with invalid authentication attempt. I just installed devise as a gem a tryed to uise it. Din't even change a word of the code that is generated.May be I thought if is it due to some browser comparability issues.But I get other mannually introduced flash messsages else working. Any suggestions as to what may be broken.I'm using rails 3.0.1* Update * I'm getting failure messages for user registration(sign up) but not for failures messages of signing in.some googleing on this topic revealed that for sign up it expects:- <%= devise_error_messages! %>But for sign in it expects some other alert message tag to be referenced, but didn't get the exact info of what is that alert tag which i must use and wher to use ???Please provide some suggestions !!!Thanks in advance. <code> ",Devise not displaying error messge during an authentication failure?
Device not displaying error messge during an authentication failure!," I was expecting a flash notice when authentication failures occurs in devise. But get nothing during a authentication failure, just the page refreshes and remains still. I didn't change any stuffs. The default devise installation itself is not displaying flash errors with invalid authentication attempt. I just installed devise as a gem a tryed to uise it. Din't even change a word of the code that is generated.May be I thought if is it due to some browser comparability issues.But I get other mannually introduced flash messsages else working. Any suggestions as to what may be broken.I'm using rails 3.0.1* Update * I'm getting failure messages for user registration(sign up) but not for failures messages of signing in.some googleing on this topic revealed that for sign up it expects:- <%= devise_error_messages! %>But for sign in it expects some other alert message tag to be referenced, but didn't get the exact info of what is that alert tag which i must use and wher to use ???Please provide some suggestions !!!Thanks in advance. <code> ",Devise not displaying error messge during an authentication failure?
Devise not displaying error messge during an authentication failure!," I was expecting a flash notice when authentication failures occurs in devise. But get nothing during a authentication failure, just the page refreshes and remains still. I didn't change any stuffs. The default devise installation itself is not displaying flash errors with invalid authentication attempt. I just installed devise as a gem a tryed to uise it. Din't even change a word of the code that is generated.May be I thought if is it due to some browser comparability issues.But I get other mannually introduced flash messsages else working. Any suggestions as to what may be broken.I'm using rails 3.0.1* Update * I'm getting failure messages for user registration(sign up) but not for failures messages of signing in.some googleing on this topic revealed that for sign up it expects:- <%= devise_error_messages! %>But for sign in it expects some other alert message tag to be referenced, but didn't get the exact info of what is that alert tag which i must use and wher to use ???Please provide some suggestions !!!Thanks in advance. <code> ",Devise not displaying error messge during an authentication failure?
Device not displaying error messge during an authentication failure!," I was expecting a flash notice when authentication failures occurs in devise. But get nothing during a authentication failure, just the page refreshes and remains still. I didn't change any stuffs. The default devise installation itself is not displaying flash errors with invalid authentication attempt. I just installed devise as a gem a tryed to uise it. Din't even change a word of the code that is generated.May be I thought if is it due to some browser comparability issues.But I get other mannually introduced flash messsages else working. Any suggestions as to what may be broken.I'm using rails 3.0.1* Update * I'm getting failure messages for user registration(sign up) but not for failures messages of signing in.some googleing on this topic revealed that for sign up it expects:- <%= devise_error_messages! %>But for sign in it expects some other alert message tag to be referenced, but didn't get the exact info of what is that alert tag which i must use and wher to use ???Please provide some suggestions !!!Thanks in advance. <code> ",Devise not displaying error messge during an authentication failure?
How do I reverse a 'rails generate' ? ," I want to delete all the files it created and roll back any changes made, but not necessarily to the database, but more to the config files.I'd like to automatically delete all the resource mappings for the model/controller deleted in the routes.rb file and everywhere else that changes might have been made? <code> ",How to reverse a 'rails generate'
How do I reverse a 'rails generate' ?," I want to delete all the files it created and roll back any changes made, but not necessarily to the database, but more to the config files.I'd like to automatically delete all the resource mappings for the model/controller deleted in the routes.rb file and everywhere else that changes might have been made? <code> ",How to reverse a 'rails generate'
How do I reverse a 'rails generate'?," I want to delete all the files it created and roll back any changes made, but not necessarily to the database, but more to the config files.I'd like to automatically delete all the resource mappings for the model/controller deleted in the routes.rb file and everywhere else that changes might have been made? <code> ",How to reverse a 'rails generate'
how can I install a specific rails version on windows," Normally I use: I can install Rails on Windows, but by default, I guess the latest version, version 3.0.3 is installed.So if I want to install some other version of Rails, let's say 3.0.1, how can I do it? <code>  gem install rails",Install a specific Ruby on Rails version on Windows
creating a series of high- and low-pitch beeps," I want to create a series of a low- and high-pitch beeps at fixed times. For example:High-pitch beep at 150 msLow-pitch beep at 151 msLow-pitch beep at 200 msHigh-pitch beep at 250 msIs there a way to do this in Ruby or Python? I don't really care what the output encoding is (.wav, .mp3, .ogg, whatever), but I do want to create an output file. <code> ",How do I create a series of high- and low-pitch beeps using Ruby or Python?
rails 3.0.3 check if boolean vaule is true," I want to check if a value is true or false. That doesn't work, but this works? Shouldn't the first method work or am I missing something? <code>  <% if item.active? %> <%= image_tag('on.png', :alt => ""Active"", :border => 0) %><% else %> <%= image_tag('off.png', :alt => ""Inactive"", :border => 0) %><% end %> <% if item.active == true %> <%= image_tag('on.png', :alt => ""Active"", :border => 0) %><% else %> <%= image_tag('off.png', :alt => ""Inactive"", :border => 0) %><% end %>",rails 3.0.3 check if boolean value is true
how to group numbers into different buckets in ruby," I have a file with numbers on each line: I want have a hash with the number of occurrences of each number, in this case: How can I do this? <code>  010110101311010113114311010431420 {0101 => 2, 1010 => 2, 1311 => 2, 431 => 2, 420 => 1}",How to group numbers into different buckets in Ruby
Ruby/RoR - Count occurrance of an element in an array," I'v a hash {1=>true, 7=>false, 6=>true, 4=>false} or an array like [1, true], [7, false], [6, true], [4, false]]or[true, false, true, false].How can I find the number of trues in the array? <code> ",Ruby/RoR - Count occurrence of an element in an array
Is there a way to glob a directory in ruby but exclude certain directories? ," I want to glob a directory to post-process header files. Yet I want to exclude some directories in the project. Right now the default way is... Seems inefficient to check each header entry manually if it's in an excluded directory. <code>  Dir[""**/*.h""].each { |header| puts header}",Is there a way to glob a directory in Ruby but exclude certain directories? 
Rails/Ruby: How to know if today's date is in date range," I have an event with start_time and end_time and want to check if the event is ""in progress"". That would be to check if today's date is in the range between the two dates.How would you do this in a function? <code> ",How to know if today's date is in a date range?
Why \w Regular Expression in Ruby generates wrong matching results," I use the code below: it puts ""matched"" and surprised me, since """" is two Chinese characters, it doesn't any of 0-9, a-z, A-Z and _, but why it outputs ""matched"".Could somebody give me some clues? <code>  puts ""matched"" if """" =~ /\w+/",\w in Ruby Regular Expression matches Chinese characters
Find the sum of all the multiples of 3 or 5 below 1000," I am trying to solve math problems with Ruby from the Project Euler. Here is the first one I tried: If we list all the natural numbers below 10 that are multiples of 3 or 5, we get 3, 5, 6 and 9. The sum of these multiples is 23. Find the sum of all the multiples of 3 or 5 below 1000.Please help me to improve my code. <code>  total = 0(0...1000).each do |i| total += i if (i%3 == 0 || i%5 == 0)endputs total",Project Euler 1:Find the sum of all the multiples of 3 or 5 below 1000
How to Run a Ruby/Python Script from inside PHP?," I need to turn HTML into equivalent Markdown-structured text. OBS.: Quick and clear way of doing this with PHP & Python.As I am programming in PHP, some people indicates Markdownify to do the job, but unfortunately, the code is not being updated and in fact it is not working. At sourceforge.net/projects/markdownify there is a ""NOTE: unsupported - do you want to maintain this project? contact me! Markdownify is a HTML to Markdown converter written in PHP. See it as the successor to html2text.php since it has better design, better performance and less corner cases.""From what I could discover, I have only two good choices:Python: Aaron Swartz's html2text.pyRuby: Singpolyma's html2markdown.rb, based on NokogiriSo, from PHP, I need to pass the HTML code, call the Ruby/Python Script and receive the output back.(By the way, a folk made a similar question here (""how to call ruby script from php?"") but with no practical information to my case).Following the Tin Man`s tip (bellow), I got to this:PHP code: Python code: With the above I am geting this:command returned 1Array( [0] => Resource id #17 1 => Resource id #18)And the ""error-output.txt"" file says:Traceback (most recent call last): File ""html2md.py"", line 5, in print html2text.html2text(sys.argv1)IndexError: list index out of rangeAny ideas???Ruby code (still beeing analysed) Just for the records, I tryed before to use PHP's most simple ""exec()"" but I got some problemas with some special characters very common to HTML language.PHP code: Ruby code: Python code: Both working fine. But when the string is a bit more complicated: It did not work at all.That's because the html string needed to have its special characters scaped. I got it using this: Now it works like I said here.I am runnig:Fedora 14ruby 1.8.7Python 2.7perl 5.12.2PHP 5.3.4nginx 0.8.53 <code>  $t='<p><b>Hello</b><i>world!</i></p>';$scaped=preg_quote($t,""/"");$program='python html2md.py';//exec($program.' '.$scaped,$n); print_r($n); exit; //Works!!!$input=$t;$descriptorspec=array( array('pipe','r'),//stdin is a pipe that the child will read from array('pipe','w'),//stdout is a pipe that the child will write to array('file','./error-output.txt','a')//stderr is a file to write to);$process=proc_open($program,$descriptorspec,$pipes);if(is_resource($process)){ fwrite($pipes[0],$input); fclose($pipes[0]); $r=stream_get_contents($pipes[1]); fclose($pipes[1]); $return_value=proc_close($process); echo ""command returned $return_value\n""; print_r($pipes); print_r($r);} #! /usr/bin/env pythonimport html2textimport sysprint html2text.html2text(sys.argv[1])#print ""Hi!"" #works!!! #!/usr/bin/env rubyrequire_relative 'html2markdown'puts HTML2Markdown.new(""<h1>#{ ARGF.read }</h1>"").to_s echo exec('./hi.rb');echo exec('./hi.py'); #!/usr/bin/rubyputs ""Hello World!"" #!usr/bin/pythonimport sysprint sys.argv[1] $h='<p><b>Hello</b><i>world!</i></p>';echo exec(""python hi.py $h""); $t='<p><b>Hello</b><i>world!</i></p>';$scaped=preg_quote($t,""/"");",How to run Ruby/Python scripts from inside PHP passing and receiving parameters?
How to I pass parameters to Ruby/Python scripts from inside PHP?," I need to turn HTML into equivalent Markdown-structured text. OBS.: Quick and clear way of doing this with PHP & Python.As I am programming in PHP, some people indicates Markdownify to do the job, but unfortunately, the code is not being updated and in fact it is not working. At sourceforge.net/projects/markdownify there is a ""NOTE: unsupported - do you want to maintain this project? contact me! Markdownify is a HTML to Markdown converter written in PHP. See it as the successor to html2text.php since it has better design, better performance and less corner cases.""From what I could discover, I have only two good choices:Python: Aaron Swartz's html2text.pyRuby: Singpolyma's html2markdown.rb, based on NokogiriSo, from PHP, I need to pass the HTML code, call the Ruby/Python Script and receive the output back.(By the way, a folk made a similar question here (""how to call ruby script from php?"") but with no practical information to my case).Following the Tin Man`s tip (bellow), I got to this:PHP code: Python code: With the above I am geting this:command returned 1Array( [0] => Resource id #17 1 => Resource id #18)And the ""error-output.txt"" file says:Traceback (most recent call last): File ""html2md.py"", line 5, in print html2text.html2text(sys.argv1)IndexError: list index out of rangeAny ideas???Ruby code (still beeing analysed) Just for the records, I tryed before to use PHP's most simple ""exec()"" but I got some problemas with some special characters very common to HTML language.PHP code: Ruby code: Python code: Both working fine. But when the string is a bit more complicated: It did not work at all.That's because the html string needed to have its special characters scaped. I got it using this: Now it works like I said here.I am runnig:Fedora 14ruby 1.8.7Python 2.7perl 5.12.2PHP 5.3.4nginx 0.8.53 <code>  $t='<p><b>Hello</b><i>world!</i></p>';$scaped=preg_quote($t,""/"");$program='python html2md.py';//exec($program.' '.$scaped,$n); print_r($n); exit; //Works!!!$input=$t;$descriptorspec=array( array('pipe','r'),//stdin is a pipe that the child will read from array('pipe','w'),//stdout is a pipe that the child will write to array('file','./error-output.txt','a')//stderr is a file to write to);$process=proc_open($program,$descriptorspec,$pipes);if(is_resource($process)){ fwrite($pipes[0],$input); fclose($pipes[0]); $r=stream_get_contents($pipes[1]); fclose($pipes[1]); $return_value=proc_close($process); echo ""command returned $return_value\n""; print_r($pipes); print_r($r);} #! /usr/bin/env pythonimport html2textimport sysprint html2text.html2text(sys.argv[1])#print ""Hi!"" #works!!! #!/usr/bin/env rubyrequire_relative 'html2markdown'puts HTML2Markdown.new(""<h1>#{ ARGF.read }</h1>"").to_s echo exec('./hi.rb');echo exec('./hi.py'); #!/usr/bin/rubyputs ""Hello World!"" #!usr/bin/pythonimport sysprint sys.argv[1] $h='<p><b>Hello</b><i>world!</i></p>';echo exec(""python hi.py $h""); $t='<p><b>Hello</b><i>world!</i></p>';$scaped=preg_quote($t,""/"");",How to run Ruby/Python scripts from inside PHP passing and receiving parameters?
OpenSSL Server Name Indication support in Ruby," I'm trying to get Ruby's Net::HTTP implementation to work with SNI.Both mail.google.com and gmail.com live on the same IP address, so when connecting via SSL, the Google server needs to know which certificate to use. By default, it returns the mail.google.com certificate, which is a problem if you're trying to implement WebFinger.WebFinger requires you to retrieve https://gmail.com/.well-known/host-meta to get the LRDD information, however, for security reasons, it's critical to verify the SSL certificate information.Since Google serves up the default mail.google.com certificate in this case, the SSL post_connection_check fails. The correct solution here would be to enable Server Name Indication for Net::HTTP, but it's not clear to me how to get that working with the Ruby bindings for OpenSSL. Anyone else have an idea?You should be able to see the problem by running: I've also created a gist that exhibits the problem using an earlier version of curl and OpenSSL:https://gist.github.com/7936ef38787092a22897 <code>  require 'open-uri'open('https://gmail.com/.well-known/host-meta') { |f| f.read }",Server Name Indication support in Net::HTTP?
OpenSSL Server Name Indication support in Net::HTTP?," I'm trying to get Ruby's Net::HTTP implementation to work with SNI.Both mail.google.com and gmail.com live on the same IP address, so when connecting via SSL, the Google server needs to know which certificate to use. By default, it returns the mail.google.com certificate, which is a problem if you're trying to implement WebFinger.WebFinger requires you to retrieve https://gmail.com/.well-known/host-meta to get the LRDD information, however, for security reasons, it's critical to verify the SSL certificate information.Since Google serves up the default mail.google.com certificate in this case, the SSL post_connection_check fails. The correct solution here would be to enable Server Name Indication for Net::HTTP, but it's not clear to me how to get that working with the Ruby bindings for OpenSSL. Anyone else have an idea?You should be able to see the problem by running: I've also created a gist that exhibits the problem using an earlier version of curl and OpenSSL:https://gist.github.com/7936ef38787092a22897 <code>  require 'open-uri'open('https://gmail.com/.well-known/host-meta') { |f| f.read }",Server Name Indication support in Net::HTTP?
Usage of exceptions in Ruby - best practices," I am reading Agile Web Development with Rails (4th ed.) and I have found the following code Since I am a Java developer, my understanding of that part of code is more or less the following: That what strikes me is that the exception handling is used to control normal application flow (lack of Cart is perfectly normal behaviour when user visits Depot application for the first time).If one takes any Java book, they say that this is a very bad thing to do - and for a good reason: error handling shouldn't be used as a replacement for control statements, it's kind of misleading for those who read code.Is there any good reason why such a practice is justified in Ruby (Rails)? Is this a common practice in Ruby? <code>  class ApplicationController < ActionController::Base protect_from_forgery private def current_cart Cart.find(session[:cart_id]) rescue ActiveRecord::RecordNotFound cart = Cart.create session[:cart_id] = cart.id cart endend private Cart currentCard(){ try{ return CartManager.get_cart_from_session(cartId) }catch(RecordNotFoundEx e){ Cart c = CartManager.create_cart_and_add_to_session(new Cart()) return c; }}",Is it good practice to use exceptions for control flow in Ruby or Ruby on Rails?
Where does rake tasks get defined?," On a freshly created Rails project (generated by rails someName), one can run some 'default' rake tasks like:rake testrake db:migrateetcQuestion is, where does these tasks get described? The default Rakefile doesn't have all these tasks.Furthermore, I checked out some project that uses rspec and I am able to run rake spec to run all the tests. Where does the spec target defined? <code> ",Where are rake tasks defined?
Anything similar in javascript to ruby's #{value}," i am tired of writing this: string_needed=""prefix....."" + topic + ""suffix...."" + name + ""testing"";i would think someone might have done something about this by now ;) <code> ",Anything similar in javascript to ruby's #{value} (string interpolation)
Simple Question: Converting a custom object into JSON using JSON gem - Ruby," I am learning how to parse and generate JSON with the JSON gem. I am easily able to create a hash of data and generate that into JSON; however, I am having a brain fart when it comes to taking a instance of a class (such as a Person instance) and putting all of its instance variables inside a hash to be converted into JSON.This is the example I am having trouble with: I want to create a .to_json method so that I can take a person object and have all of its instance variables converted into JSON. What I think I need to do is take all of the Person's instance variables, put them in a hash then call JSON.generate(hash). I am having a brain fart on how to do that right now. So can someone help me complete the to_json method, or perhaps suggest a better way of implementing it? Thanks! <code>  require ""json""class Person def initialize(name, age, address) @name = name @age = age @address = address end def to_json endendp = Person.new('John Doe', 46, ""123 Elm Street"")p.to_json",Converting a custom object into JSON using JSON gem
method_added for class methods - understanding," I would like to do some magic in the moment instance and class methods are added to some class. Therefore I tried the following: This approach works well for instance methods, fails for class methods. How can I solve that? Any suggestions? <code>  module Magic def self.included(base) base.extend ClassMethods end module ClassMethods def method_added(name) puts ""class method '#{name}' added"" end def some_class_method puts ""some class method"" end end endclass Foo include Magic def self.method_added(name) puts ""instance method #{name} added"" end end",Understanding method_added for class methods
Differences between Proc and Lambda in Ruby," Ruby has differences between Procs created via Proc.new and lambda (or the ->() operator in 1.9). It appears that non-lambda Procs will splat an array passed in across the block arguments; Procs created via lambda do not. Does anyone have any insight into the motivations behind this behavior? <code>  p = Proc.new { |a,b| a + b}p[[1,2]] # => 3l = lambda { |a,b| a + b }l[[1,2]] # => ArgumentError: wrong number of arguments (1 for 2)",Differences between Proc and Lambda
Merge two ruby hashes with no new keys," How could I merge two hashes that results in no new keys, meaning the merge would merge keys that exist in both hashes?For example, I want the following: I'm looking for a really clean way of doing this as my current implementation is pretty messy. <code>  h = {:foo => ""bar""}j = {:foo => ""baz"", :extra => ""value""}puts h.merge(j) # {:foo => ""baz""}",How to merge two hashes with no new keys
Please explain Ruby chaining," Why can you chain this: but not this: where  <code>  ""Test"".upcase.reverse.next.swapcase x = My_Class.new x.a.b.c class My_Class def a @b = 1 end def b @b = @b + 2 end def c @b = @b -72 endend",How does Ruby chaining work?
Nokogiri issue with Document has already a root node," Well I have a simple problem with Nokogiri. I want to make Nokogiri::HTML::Builder to make an HTML fragment of the following form: When trying to do: I get an error: Document has already a root node, which I partly understand. I know I am not wrapping the whole thing into tags (which Nokogiri expects as Nokogiri::HTML::Builder inherits from Nokogiri::XML::Builder and an XML document must have a root node). But I am not building an XML document.Am I missing something? Any kind of help is much appreciated. <code>  <div>#Some stuff in here</div><div>#Some other stuff in here</div> @builder = Nokogiri::HTML::Builder.new(:encoding => 'UTF-8') do |doc| doc.div { doc.p ""first test"" } doc.div { doc.p ""second test"" } end@builder.to_html",Using Nokogiri HTML Builder to create fragment with multiple root nodes
Using Nokogiri HTML Builder to create fragment with multiple root nodes.," Well I have a simple problem with Nokogiri. I want to make Nokogiri::HTML::Builder to make an HTML fragment of the following form: When trying to do: I get an error: Document has already a root node, which I partly understand. I know I am not wrapping the whole thing into tags (which Nokogiri expects as Nokogiri::HTML::Builder inherits from Nokogiri::XML::Builder and an XML document must have a root node). But I am not building an XML document.Am I missing something? Any kind of help is much appreciated. <code>  <div>#Some stuff in here</div><div>#Some other stuff in here</div> @builder = Nokogiri::HTML::Builder.new(:encoding => 'UTF-8') do |doc| doc.div { doc.p ""first test"" } doc.div { doc.p ""second test"" } end@builder.to_html",Using Nokogiri HTML Builder to create fragment with multiple root nodes
Find index of minimum array element. How to refactor more elegant?," Is there any way to rewrite this more elegant? I think, that it's a bad piece of code and should be refactored. <code>  >> a = [2, 4, 10, 1, 13]=> [2, 4, 10, 1, 13]>> index_of_minimal_value_in_array = a.index(a.min)=> 3",Ruby: How to find the index of the minimum array element?
How to find the index of the minimum array element?," Is there any way to rewrite this more elegant? I think, that it's a bad piece of code and should be refactored. <code>  >> a = [2, 4, 10, 1, 13]=> [2, 4, 10, 1, 13]>> index_of_minimal_value_in_array = a.index(a.min)=> 3",Ruby: How to find the index of the minimum array element?
Ruby on rails: How to reduce the quality of an uploading image using Paperclip?," I am running Ruby on Rails 3 and I would like to reduce the quality of an uploading image using the Paperclip plugin/gem. How can I do that?At this time in my model file I have: that will convert images in to the .jpg format and will set dimensions. <code>  has_attached_file :avatar, :styles => { :thumb => [""50x50#"", :jpg], :medium => [""250x250#"", :jpg], :original => [""600x600#"", :jpg] }",How can I reduce the quality of an uploading image using Paperclip?
Ruby on Rail upload file problem odd utf8 conversion error," I am trying to upload a file and i am getting the following error: I am pretty much following the rails guides in what they are doing. Here is the code I am using. I don't get why it doesn't work. What am I doing wrong?Update -- Here is the application Trace <code>  ""\xFF"" from ASCII-8BIT to UTF-8 file = params[:uploaded_file]File.open(Rails.root.join('public', 'images', file.original_filename), 'w') do |f| f.write(file.read)end app/controllers/shows_controller.rb:16:in `write'app/controllers/shows_controller.rb:16:in `block in create'app/controllers/shows_controller.rb:15:in `open'app/controllers/shows_controller.rb:15:in `create'",Ruby on Rails upload file problem odd utf8 conversion error
Rails Ruby Gems Vs Pure Devlopment When Gernating A Rich Blog," Some ruby gems like jekyll, toto and webby offer out of the box blog-type integration into your ruby app. Another way of developing a rich web blog-type application is to build and model the application yourself using pure ruby and rails practices. (e.g creating an Article and User model). The first offers out of the box features the 2nd option offers more customization and control.In people's experience on Stack Overflow, which would be the best route and what would people consider when making the decision to use a gem out of the box versus going alone? <code> ",Rails Ruby Gems vs Pure Development When Generating A Rich Blog
"Error installing ffi gem on Ubuntu, Ruby 1.9.2"," I get an error while trying to install the ffi gem: I'm getting frequent errors of all kinds while installing gems with native extensions, so I assume that there's something broken with my Ubuntu installation, but I've no idea what. I'll post any information you need to diagnose the problem.EDIT: When I cd to the ffi gem (mentioned in the second but last line), and run the rake line in line 6, I get ""Could not find RubyGem rake-compiler"".After gem i rake-compiler, and run rake again, I get this: Update:These are my rake gemspecs: The last one is where gem looks, but that gemspec is different from the first one, and doesn't include the executable. Copying the long one doesn't quite solve the problem though - I get a file not found for the rake executable. <code>  ~ - 16:54>gem i ffiBuilding native extensions. This could take a while...ERROR: Error installing ffi: ERROR: Failed to build gem native extension. rake RUBYARCHDIR=/home/mdemare/.rvm/gems/ruby-1.9.2-p136/gems/ffi-1.0.6/lib RUBYLIBDIR=/home/mdemare/.rvm/gems/ruby-1.9.2-p136/gems/ffi-1.0.6/lib/home/mdemare/.rvm/rubies/ruby-1.9.2-p136/lib/ruby/site_ruby/1.9.1/rubygems.rb:370:in `bin_path': can't find gem rake (["">= 0""]) with executable rake (Gem::GemNotFoundException) from /home/mdemare/.rvm/gems/ruby-1.9.2-p136/bin/rake:19:in `<main>'Gem files will remain installed in /home/mdemare/.rvm/gems/ruby-1.9.2-p136/gems/ffi-1.0.6 for inspection.Results logged to /home/mdemare/.rvm/gems/ruby-1.9.2-p136/gems/ffi-1.0.6/gen/gem_make.out configure: error: source directory already configured; run ""make distclean"" there firstmake: *** [/home/mdemare/.rvm/gems/ruby-1.9.2-p136/gems/ffi-1.0.6/build/x86_64-linux/ffi_c/1.9.2/libffi/.libs/libffi_convenience.a] Error 1rake aborted!Command failed with status (2): [make...] ~ - 10:59>find ~/.rvm/ -name 'rake-0.8.7.gemspec'~/.rvm/gems/ruby-1.9.2-p136/specifications/rake-0.8.7.gemspec~/.rvm/gems/ruby-1.9.2-p136@global/specifications/rake-0.8.7.gemspec~/.rvm/rubies/ruby-1.9.2-p136/lib/ruby/gems/1.9.1/specifications/rake-0.8.7.gemspec","Error installing gems that use native extensions on Ubuntu, Ruby 1.9.2 via RVM"
how to remove gem from ruby on rails application," I have installed a gem on my Rails application (devise). After I installed the gem, I realized that I don't need it.I want to remove the gem, its dependencies and the files it created on my application. In other words, I want to restore the system to what it used to be before the gem. How can I do this? (I'm using Ruby on Rails 3.) <code> ",How to remove gem from Ruby on Rails application?
Can ruby return nothing?," Can I return nothing in ruby?Just for educational purposeFor example: So if today is 11'th March myarray won't add new item. I don't want nil - because nil is not nothing :)And I understand, that I can use if | unless statement like myarray << some_method if some_method etc. I want to understand can I return nothing or every time in ruby I am returning something (least I can get is Nil Object) <code>  myarray = [1,2,3]myarray << some_methoddef some_method if Date.today.day > 15 return ""Trololo"" else return __NOTHING__ endend",Can Ruby return nothing?
In Nokogiri - What's the difference between .at_css to .css ?," I can't find a clear, direct answer, but what's the difference between .at_css and .css in Nokogiri? <code> ",What's the difference between .at_css to .css in Nokogiri?
nokogiri add new node into xml problem," I have a simple XML file, items.xml: I am trying to insert a new node with the following code: However this code adds a new node only after the last <manufacturer> node, items_fixed.xml: Why? <code>  <?xml version=""1.0"" encoding=""UTF-8"" ?><items> <item> <name>mouse</name> <manufacturer>Logicteh</manufacturer> </item> <item> <name>keyboard</name> <manufacturer>Logitech - Inc.</manufacturer> </item> <item> <name>webcam</name> <manufacturer>Logistech</manufacturer> </item></items> require 'rubygems'require 'nokogiri'f = File.open('items.xml')@items = Nokogiri::XML(f)f.closeprice = Nokogiri::XML::Node.new ""price"", @itemsprice.content = ""10""@items.xpath('//items/item/manufacturer').each do |node| node.add_next_sibling(price)endfile = File.open(""items_fixed.xml"",'w')file.puts @items.to_xmlfile.close <?xml version=""1.0"" encoding=""UTF-8""?><items> <item> <name>mouse</name> <manufacturer>Logitech</manufacturer> </item> <item> <name>keyboard</name> <manufacturer>Logitech</manufacturer> </item> <item> <name>webcam</name> <manufacturer>Logitech</manufacturer><price>10</price> </item></items>",How to add a new node to XML
does %x[] catch all output? (ruby)," If I run this code: I get this result but I want the error message from svn inside the variable svn_output. Is that possible? <code>  svn_output = %x[svn update /Users/radek/Sites/db2.rft -r 11105 --force ]putsputs "" output is =#{svn_output}="" svn: Working copy '/Users/radek/Sites/db2.rft' lockedsvn: run 'svn cleanup' to remove locks (type 'svn help cleanup' for details) output is ==",does %x[] catch all output?
stylesheet_link_tag(:all) generates `all.css` when not asked," I have stylesheet_link_tag(:all) in my layout.It behaves as expected on local machine, even when I run it in production environment (rails s -e production).By expected I mean that it emits all the links to existing stylesheets without concating them into all.css and it does not emit the link to all.css.But when I deploy it to Heroku, the result is the same plus a link to all.css in the beginning. This is what I don't want and don't expect, especially when production environment on local machine does not emit it.So the question is how do I get rid of all.css link on Heroku without specifying all files manually?Thanks. <code> ",stylesheet_link_tag(:all) generates reference to `all.css` on Heroku
Using RVM in eshell of emacs," Using RVM in eshell of emacs, I am not able to set the ruby version. Why?Environment : Ubuntu 9.10 <code>  /media/Work/rubyworkspace $ ruby -v ruby 1.8.7 (2009-06-12 patchlevel 174) [i486-linux]/media/Work/rubyworkspace $ rvm use 1.9.2Using /usr/local/rvm/gems/ruby-1.9.2-p180/media/Work/rubyworkspace $ ruby -vruby 1.8.7 (2009-06-12 patchlevel 174) [i486-linux]",Using RVM in eshell of Emacs
Differene between plugin and gem, What is the difference between plugins and gems? What are the different uses of each? Where and why would you use one over the other? <code> ,Difference between plugins and Ruby gems?
RVM bunlde not found," I just installed rvm and then the bundler gem. But when I try to run the bundle command then I got the following error: The interesting thing is that it works if I prepend ""rvm ruby"" Still, I don't think like I should prepend rvm ruby before any command. Is this behavior correct?EDIT: apparently the problem is that the default configuration is not remembered between shells.If I type ""rvm 1.8.7 --default"" then it works, but as soon as I open a new shell it doesn't. <code>  ~ ruby -vruby 1.8.7 (2011-02-18 patchlevel 334) [i686-darwin10.7.0] ~ gem list|grep bundlerbundler (1.0.12) ~ which bundlebundle not found ~ rvm ruby bundle",RVM bundle not found
"Is ""modifying the prototype"" really that bad?"," Some languages like Ruby and JavaScript have open classes which allow you to modify interfaces of even core classes like numbers, strings, arrays, etc. Obviously doing so could confuse others who are familiar with the API but is there a good reason to avoid it otherwise, assuming that you are adding to the interface and not changing existing behavior?For example, it might be nice to add a an Array.map implementation to web browsers which don't implement ECMAScript 5th edition (and if you don't need all of jQuery). Or your Ruby arrays might benefit from a ""sum"" convenience method which uses ""inject"". As long as the changes are isolated to your systems (e.g. not part of a software package you release for distribution) is there a good reason not to take advantage of this language feature? <code> ","Is ""monkey patching"" really that bad?"
How to know ip address of a domain, How can I find the IP address of an arbitrary domain? I want to get the IP address from the DNS server. <code> ,Finding the IP address of a domain
Ruby: Conditional in Hash," Is there a nice (one line) way of writing a hash in ruby with some entry only there if a condition is fulfilled? I thought of But that leaves :b == nil if the condition is not fulfilled. I realize this could be done easily in two lines or so, but it would be much nicer in one line (e.g. when passing the hash to a function).Am I missing (yet) another one of ruby's amazing features here? ;) <code>  {:a => 'a', :b => ('b' if condition)}",Conditional key/value in a ruby hash
What can RVM do for me?," I set up RVM and used it to install Ruby and a few other libraries. As I was going through various tutorials and set-ups of other technologies like Rails, I began getting confused about what I should do via RVM and what I should just do as the tutorials suggest.One example is the RubyGems tutorial here:http://rubygems.org/pages/downloadShould I download that tar file they are talking about? Seems unnecessary since that is what I thought RVM was for. Do I even need RubyGems? What is that for really? Also, how do I actually get Rails? Is there a precise RVM command to actually download and install Rails? <code> ",How do I install Ruby gems when using RVM?
What Should I do using RVM and what to do without it?," I set up RVM and used it to install Ruby and a few other libraries. As I was going through various tutorials and set-ups of other technologies like Rails, I began getting confused about what I should do via RVM and what I should just do as the tutorials suggest.One example is the RubyGems tutorial here:http://rubygems.org/pages/downloadShould I download that tar file they are talking about? Seems unnecessary since that is what I thought RVM was for. Do I even need RubyGems? What is that for really? Also, how do I actually get Rails? Is there a precise RVM command to actually download and install Rails? <code> ",How do I install Ruby gems when using RVM?
Ruby: how do I check if a class is defined?," How do I turn a string into a class name, but only if that class already exists?If Amber is already a class, I can get from a string to the class via: or (in Rails) But either of these will fail with NameError: uninitialized constant Amber if Amber is not already a class.My first thought is to use the defined? method, but it doesn't discriminate between classes that already exist and those that don't: So how do I test if a string names a class before I try to convert it? (Okay, how about a begin/rescue block to catch NameError errors? Too ugly? I agree...) <code>  Object.const_get(""Amber"") ""Amber"".constantize >> defined?(""Object"".constantize)=> ""method"">> defined?(""AClassNameThatCouldNotPossiblyExist"".constantize)=> ""method""",How do I check if a class is defined?
"Phusion Passenger Error: You have activated rack 1.2.1, but your Gemfile requires rack 1.2.2."," I'm trying to run a Ruby on Rails app on a Dreamhost shared server. All is well so far except one weird bug I have not been able to unravel.Sometimes when I visit the web app, I get presented with a Phusion Passenger error saying, You have already activated rack 1.2.1, but your Gemfile requires rack 1.2.2. Consider using bundle exec.When I just refresh the page it seems to work, though - no more Phusion Passenger error message.Following other stack overflow threads and a similar Dreamhost wiki, I added the following to the top of the config/environment.rb file:  <code>  if ENV['RAILS_ENV'] == 'production' # don't bother on dev ENV['GEM_PATH'] = '/home/myusername/.gems' + ':/usr/lib/ruby/gems/1.8'end","Phusion Passenger Error: You have activated rack 1.2.1, but your Gemfile requires rack 1.2.2"
"Using nokogiri how do you search for ""text"" then traverse the DOM from the find?"," I have webpage that I need to scrape some data from. The problem is, each page may or may not have specific data, or it may have extra data above or below it in the DOM, and there is no CSS ids to speak of. Typically I could use either CSS ids or XPath to get to the node I'm looking for. I don't have that option in this case. What I'm trying to do is search for the ""label"" text then grab the data in the next <TD> node: In the above HTML, I would search for: to get the node just before the data I need, but I'm not sure how to navigate from there. <code>  <tr> <td><b>Name:</b></td> <td>Joe Smith <small><a href=""/Joe""><img src=""/joe.png""></a></small></td> </tr> doc.search(""[text()*='Name:']"")","How do I search for ""text"" then traverse the DOM from the found node?"
Writing loop to file," I have the following code that I want to use to ping IP addresses and write to a file. It all works fine, except I can't get it to write to the file. <code>  server = %w'192.168.150.254192.168.150.251192.168.120.1192.168.120.2'File.open('/test/test2.out','w') do |s| server.each do |p| r = `ping -a -n 1 #{p}` puts r endend",How do I get Ruby 'puts' to write data into a file?
Ruby/Rails: How to identify the language of a given text ?," In my Rails 3 application, users may write messages in forum. I would like to identify what the language is for a given message. I'm interested in English, Russian, and Hebrew languages. Is there any built-in library in Ruby/Rails for such a task? If not, any ideas will be appreciated. <code> ",How to detect the language of a given text
Ruby/Rails: How to detect the language of a given text ?," In my Rails 3 application, users may write messages in forum. I would like to identify what the language is for a given message. I'm interested in English, Russian, and Hebrew languages. Is there any built-in library in Ruby/Rails for such a task? If not, any ideas will be appreciated. <code> ",How to detect the language of a given text
Ruby: Add two weeks to Time.now," How can I add two weeks to the current Time.now in Ruby? I have a small Sinatra project that uses DataMapper and before saving, I have a field populated with the current time PLUS two weeks, but is not working as needed. Any help is greatly appreciated! I get the following error: Here is the code for the Model:  <code>  NoMethodError at /undefined method `weeks' for 2:Fixnum class Job include DataMapper::Resource property :id, Serial property :position, String property :location, String property :email, String property :phone, String property :description, Text property :expires_on, Date property :status, Boolean property :created_on, DateTime property :updated_at, DateTime before :save do t = Time.now self.expires_on = t + 2.week self.status = '0' endend",How do I add two weeks to Time.now?
Rails error resource_name - devise help routing and rendering," I am trying to render the login view for the Devise gem but I get an error, below is the code I currently have:This is my views/users/shared/_links.html.erb: And my config/routes.rb: And in my application layout: I get the following error in the _links.html.erb partial: Finally, in my application controller I have the following: Any help would be much appreciated, thanks! <code>  <%- if controller_name != 'sessions' %> <%= link_to ""Sign in"", new_session_path(resource_name) %><br /><% end -%><%- if devise_mapping.registerable? && controller_name != 'registrations' %> <%= link_to ""Sign up"", new_registration_path(resource_name) %><br /><% end -%><%- if devise_mapping.recoverable? && controller_name != 'passwords' %> <%= link_to ""Forgot your password?"", new_password_path(resource_name) %><br /><% end -%><%- if devise_mapping.confirmable? && controller_name != 'confirmations' %> <%= link_to ""Didn't receive confirmation instructions?"", new_confirmation_path(resource_name) %><br /><% end -%><%- if devise_mapping.lockable? && resource_class.unlock_strategy_enabled?(:email) && controller_name != 'unlocks' %> <%= link_to ""Didn't receive unlock instructions?"", new_unlock_path(resource_name) %><br /><% end -%><%- if devise_mapping.omniauthable? %> <%- resource_class.omniauth_providers.each do |provider| %> <%= link_to ""Sign in with #{provider.to_s.titleize}"", omniauth_authorize_path(resource_name, provider) %><br /> <% end -%><% end -%> Densidste::Application.routes.draw do match 'user/edit' => 'users#edit', :as => :edit_current_user match 'signup' => 'devise/users#new', :as => :signup match 'logout' => 'devise/sessions#destroy', :as => :logout devise_for :users do get ""login"", :to => ""devise/sessions#new"" end resources :sessions resources :users devise_for :users resources :aktivs resources :taggingposts resources :tags resources :kommentares resources :posts # You can have the root of your site routed with ""root"" # just remember to delete public/index.html. root :to => ""public#index""end <%= render(""users/shared/links"") %> NameError in Public#indexShowing C:/Rails/Densidste/app/views/users/shared/_links.erb where line #2 raised:undefined local variable or method `resource_name' for #<#<Class:0x5db76c0>:0x5db6538>Extracted source (around line #2):1: <%- if controller_name != 'sessions' %>2: <%= link_to ""Sign in"", new_session_path(resource_name) %><br />3: <% end -%>4: 5: <%- if devise_mapping.registerable? && controller_name != 'registrations' %>Trace of template inclusion: app/views/public/index.html.erbRails.root: C:/Rails/Densidste before_filter :resource_name def resource_name if user_signed_in? current_user.name else :user end endend",Rails error resource_name - devise help routing and rendering
Rails error - devise help routing and rendering," I am trying to render the login view for the Devise gem but I get an error, below is the code I currently have:This is my views/users/shared/_links.html.erb: And my config/routes.rb: And in my application layout: I get the following error in the _links.html.erb partial: Finally, in my application controller I have the following: Any help would be much appreciated, thanks! <code>  <%- if controller_name != 'sessions' %> <%= link_to ""Sign in"", new_session_path(resource_name) %><br /><% end -%><%- if devise_mapping.registerable? && controller_name != 'registrations' %> <%= link_to ""Sign up"", new_registration_path(resource_name) %><br /><% end -%><%- if devise_mapping.recoverable? && controller_name != 'passwords' %> <%= link_to ""Forgot your password?"", new_password_path(resource_name) %><br /><% end -%><%- if devise_mapping.confirmable? && controller_name != 'confirmations' %> <%= link_to ""Didn't receive confirmation instructions?"", new_confirmation_path(resource_name) %><br /><% end -%><%- if devise_mapping.lockable? && resource_class.unlock_strategy_enabled?(:email) && controller_name != 'unlocks' %> <%= link_to ""Didn't receive unlock instructions?"", new_unlock_path(resource_name) %><br /><% end -%><%- if devise_mapping.omniauthable? %> <%- resource_class.omniauth_providers.each do |provider| %> <%= link_to ""Sign in with #{provider.to_s.titleize}"", omniauth_authorize_path(resource_name, provider) %><br /> <% end -%><% end -%> Densidste::Application.routes.draw do match 'user/edit' => 'users#edit', :as => :edit_current_user match 'signup' => 'devise/users#new', :as => :signup match 'logout' => 'devise/sessions#destroy', :as => :logout devise_for :users do get ""login"", :to => ""devise/sessions#new"" end resources :sessions resources :users devise_for :users resources :aktivs resources :taggingposts resources :tags resources :kommentares resources :posts # You can have the root of your site routed with ""root"" # just remember to delete public/index.html. root :to => ""public#index""end <%= render(""users/shared/links"") %> NameError in Public#indexShowing C:/Rails/Densidste/app/views/users/shared/_links.erb where line #2 raised:undefined local variable or method `resource_name' for #<#<Class:0x5db76c0>:0x5db6538>Extracted source (around line #2):1: <%- if controller_name != 'sessions' %>2: <%= link_to ""Sign in"", new_session_path(resource_name) %><br />3: <% end -%>4: 5: <%- if devise_mapping.registerable? && controller_name != 'registrations' %>Trace of template inclusion: app/views/public/index.html.erbRails.root: C:/Rails/Densidste before_filter :resource_name def resource_name if user_signed_in? current_user.name else :user end endend",Rails error resource_name - devise help routing and rendering
Resizing the default image with Paperclip," I want to be able to resize the default profile image I use with Paperclip. This is the code in my model: However, the default image doesn't get resized like the user submitted images do. How can I do this? <code>  has_attached_file :photo, :styles => { :tiny => ""25x25#"", :thumbnail => ""100x100#"", :small => ""150x150>"", :medium => ""300x300>"" }, :default_url => ""/images/default.png""",Trouble resizing the default image with Paperclip
Logging in Sinatra," I'm having trouble figuring out how to log messages with Sinatra. I'm not looking to log requests, but rather custom messages at certain points in my app. For example, when fetching a URL I would like to log ""Fetching #{url}"".Here's what I'd like:The ability to specify log levels (ex: logger.info(""Fetching #{url}""))In development and testing environments, the messages would be written to the console.In production, only write out messages matching the current log level.I'm guessing this can easily be done in config.ru, but I'm not 100% sure which setting I want to enable, and if I have to manually create a Logger object myself (and furthermore, which class of Logger to use: Logger, Rack::Logger, or Rack::CommonLogger).(I know there are similar questions on StackOverflow, but none seem to directly answer my question. If you can point me to an existing question, I will mark this one as a duplicate). <code> ",Logging in Sinatra?
CarrierWave and :remote location validation," I'm using CarrierWave on my Rails 3 sample app. I want to validate the remote location upload so I don't get the standard error exception when a user submits an invalid URL either blank or not an image: This is my model: This is my controller: I'm not really sure how to tackle this problem so any insight would be great. <code>  CarrierWave::DownloadError in ImageController#createtrying to download a file which is not served over HTTP class Painting < ActiveRecord::Base attr_accessible :gallery_id, :name, :image, :remote_image_url belongs_to :gallery mount_uploader :image, ImageUploader validates :name, :presence => true, :length => { :minimum => 5, :maximum => 100 } validates :image, :presence => trueend class PaintingsController < ApplicationController def new @painting = Painting.new(:gallery_id => params[:gallery_id]) end def create @painting = Painting.new(params[:painting]) if @painting.save flash[:notice] = ""Successfully created painting."" redirect_to @painting.gallery else render :action => 'new' end end def edit @painting = Painting.find(params[:id]) end def update @painting = Painting.find(params[:id]) if @painting.update_attributes(params[:painting]) flash[:notice] = ""Successfully updated painting."" redirect_to @painting.gallery else render :action => 'edit' end end def destroy @painting = Painting.find(params[:id]) @painting.destroy flash[:notice] = ""Successfully destroyed painting."" redirect_to @painting.gallery endend",How do I do :remote location validation with CarrierWave?
Regex for Twitter-like names," I have been coding for a while but never had the need for regular expressions until recently. I need to do a regular expression that accepts usernames as Twitter does. Basically, I want to allow one underscore at a time. There can be more than one underscore in a name but these should not be consecutive characters. Alphanumeric characters are also allowed. But numbers cannot start a name.Names such as _myname67myname67my_name_my_67_name_are valid but94myname__mynamemy__namemy nameare not valid.I have played with Rubular and come up with a couple regexes:/^[^0-9\s+](_?[a-z0-9]+_?)+$/i/^([a-z_?])+$/iThe problem I keep running into is that these match more than one underscores. <code> ",What is a regex for Twitter-like names?
JRUBY cannot switch to 1.6.2 for this Interpreter error rvm," I am trying to configure JRuby using RVM on Ubuntu Linux. I have successfully installed RVM, but when trying to install Jruby, I get the following error: <code>  dlitwak@ubuntu:~$ rvm install jruby-1.6.0jruby-1.6.0 - #fetching jruby-1.6.0 - #extracted to /home/dlitwak/.rvm/src/jruby-1.6.0 (already extracted)Building Nailgunjruby-1.6.0 - #installing to /home/dlitwak/.rvm/rubies/jruby-1.6.0**ERROR: Cannot switch to 1.6.2 for this interpreter.**jruby-1.6.0 - #importing default gemsets (/home/dlitwak/.rvm/gemsets/)Copying across included gemsBuilding native extensions. This could take a while...Successfully installed jruby-launcher-1.0.7-java1 gem installed",JRuby cannot switch to 1.6.2 for this interpreter error rvm
deleting multiple keys in redis-rb," Using redis-rb in a Rails app, the following doesn't work: This works fine: Am I missing something obvious? The source is just: which looks to me like it should work to pass it an array...? <code>  irb> keys = $redis.keys(""autocomplete*"")=> [""autocomplete_foo"", ""autocomplete_bar"", ""autocomplete_bat""]irb> $redis.del(keys)=> 0 irb> $redis.del(""autocomplete_foo"", ""autocomplete_bar"")=> 2 # Delete a key.def del(*keys) synchronize do @client.call [:del, *keys] endend",Deleting multiple keys in redis-rb
how to change default timezone for ActiveRecord in rails3," In my application.rb I came across the following comment As you see from above, I've made config.time_zone to EST time. However, still when records are created in the DB, it looks like datetime is being stored in UTC format.In the above comment, they say ...and make Active Record auto-convert to this zone...How can I do that, and where?Also, I'll be deploying this on heroku as well and i'd like the setting to carry over <code>  # Set Time.zone default to the specified zone and make Active Record auto-convert to this zone.# Run ""rake -D time"" for a list of tasks for finding time zone names. Default is UTC. config.time_zone = 'Eastern Time (US & Canada)'",How to change default timezone for Active Record in Rails?
How to change default timezone for ActiveRecord in Rails 3?," In my application.rb I came across the following comment As you see from above, I've made config.time_zone to EST time. However, still when records are created in the DB, it looks like datetime is being stored in UTC format.In the above comment, they say ...and make Active Record auto-convert to this zone...How can I do that, and where?Also, I'll be deploying this on heroku as well and i'd like the setting to carry over <code>  # Set Time.zone default to the specified zone and make Active Record auto-convert to this zone.# Run ""rake -D time"" for a list of tasks for finding time zone names. Default is UTC. config.time_zone = 'Eastern Time (US & Canada)'",How to change default timezone for Active Record in Rails?
Ruby: check if its instance of nil," So as i understand it's calling split not on a string, but on nil.This part is parsing web server log. But I can't understand why it's getting nil. As I understand it's null.Some of the subpatterns in regex failed? So it's the webserver's fault, which sometimes generates wrong logging strings?By the way how do I write to file in ruby? I can't read properly in this cmd window under windows. <code>  def parse( line ) _, remote_addr, status, request, size, referrer, http_user_agent, http_x_forwarded_for = /^([^\s]+) - (\d+) \""(.+)\"" (\d+) \""(.*)\"" \""([^\""]*)\"" \""(.*)\""/.match(line).to_a print line print request if request && request != nil _, referrer_host, referrer_url = /^http[s]?:\/\/([^\/]+)(\/.*)/.match(referrer).to_a if referrer method, full_url, _ = request.split(' ')in parse: private method 'split' called for nil:NilClass (NoMethodError)",Ruby: check if object is nil
How to substring some field?, I have text with length ~700. How do I get only ~30 of its first characters? <code> ,How to get a substring of text?
How to set up rails in order to have french language," I have to develop a Ruby on Rails app for my company and don't know how to configure it for a French site.I don't need multiple language support, I just want to have error messages, pluralization and date format for French.I tried to set: in my application.rb file but it doesn't seem to have any effect.Are these features already implemented in RoR 3? Or I will have to translate these things myself? <code>  config.i18n.default_locale = :fr",How do I set up Rails for French language?
"How to start reading at offset in BinData, RUby?"," I have a C-like struct like this: I have a bunch of offsets and lengths before :Person. All the offsets and lengths describe the data within the :Person struct. How can I start reading data at a specified offset, for the given length, or until the next offset? <code>  SomeStruct << BinData::Recordendian :littleuint32 :offsetOfNameuint32 :offsetOfLastname#...uint32 :lenVarsstruct :Person, :length => :lenVars string :name string :lname #...end",How do I start reading at an offset in binary data?
"Math.Infinity in ruby, how do i iterate over an infinite sequence"," I am trying to solve Project Euler problem #12: The sequence of triangle numbers is generated by adding the natural numbers. So the 7th triangle number would be 1 + 2 + 3 + 4 + 5 + 6 + 7 = 28. The first ten terms would be: Let us list the factors of the first seven triangle numbers: We can see that 28 is the first triangle number to have over five divisors. What is the value of the first triangle number to have over five hundred divisors?Here's the solution that I came up with using Ruby: I shouldn't be using an arbitrary huge number like 9_999_999_999_999_999. It would be better if we had a Math.INFINITY sequence like some functional languages. How can I generate a lazy infinite sequence in Ruby? <code>  1, 3, 6, 10, 15, 21, 28, 36, 45, 55, ... 1: 1 3: 1,3 6: 1,2,3,610: 1,2,5,1015: 1,3,5,1521: 1,3,7,2128: 1,2,4,7,14,28 triangle_number = 1(2..9_999_999_999_999_999).each do |i| triangle_number += i num_divisors = 2 # 1 and the number divide the number always so we don't iterate over the entire sequence (2..( i/2 + 1 )).each do |j| num_divisors += 1 if i % j == 0 end if num_divisors == 500 then puts i break endend",Iterate over an infinite sequence in Ruby
how to make single digi number to double digi number in ruby?," Time.new.month returns a single digit representation of any month prior to October (e.g. June is 6), but I want a 2-digit format (i.e. instead of 6 I want 06).I wrote the following solution, and I am asking to see some other/better solutions. <code>  s = 6.to_s; s[1]=s[0]; s[0] = '0'; s #=> '06'",How to make single digit number a two digit number in ruby?
Why are Ruby method calls particularly slow?," I'm trying to read about Ruby performance, and came across this SO thread, where one of the answers mentions that ""method calls, one of the most common operations in Ruby, are particularly slow.""Another thread mentions that ""It does ""late lookup"" for methods, to allow for flexibility. This slows it down quite a bit. It also has to remember names per context to allow for eval, so its frames and method calls are slower.""Can someone explain in more detail why Ruby method calls are particularly slow, and elaborate on the second thread? I'm not totally sure what late lookup is or why it's slow, and I don't know what names per context means or how it relates to frames and method calls.My (possibly incorrect) understanding is that since methods can be added or modified at runtime, the Ruby interpreter can never ""remember"" how to run a particular method, so it has to lookup the method every time while the program is running, and this is what is meant by method calls being slow. But corrections and more technical explanations would be great. <code> ",Why are Ruby method calls particularly slow (in comparison to other languages)?
"after_create, after_save????????", Are after_create and after_save the same as per functionality?I want to do an operation with the email of a user after its account creation.I want to do that operation when it is saved in the database.which is preferable to use: after_create or after_save? <code> ,What is the difference between `after_create` and `after_save` and when to use which?
Difference between self.* or @* in Ruby/Rails Models/Controllers," Assuming a Rails Model with persistent / non-persistent attributes, what is the best practice regarding referencing them? If you look at code publicly available, different patterns are used. For instance, if you have an association from one model to another. What is the difference between using self.association_name and @association_name?. What is the preferable way? Same as with non-persistent attributes defined with attr_accessor :attr in Models. You can reference them with both approaches, self.attr and @attr. What is the preferable way?  <code> ","Differences between *, self.* and @* when referencing associations/attributes in Ruby/Rails Models/Controllers"
"Difference between *, self.* or @* in Ruby/Rails Models/Controllers"," Assuming a Rails Model with persistent / non-persistent attributes, what is the best practice regarding referencing them? If you look at code publicly available, different patterns are used. For instance, if you have an association from one model to another. What is the difference between using self.association_name and @association_name?. What is the preferable way? Same as with non-persistent attributes defined with attr_accessor :attr in Models. You can reference them with both approaches, self.attr and @attr. What is the preferable way?  <code> ","Differences between *, self.* and @* when referencing associations/attributes in Ruby/Rails Models/Controllers"
Testing ActionMailer multipart emails with RSpec," I'm currently testing my mailers with RSpec, but I've started setting up multipart emails as described in the Rails Guides here: http://guides.rubyonrails.org/action_mailer_basics.html#sending-multipart-emailsI have both mailer templates in text and html formats, but it looks like my tests are only checking the HTML portion. Is there a way to check the text template separately?Is it only checking the HTML view because it's first in the default order? <code> ",Testing ActionMailer multipart emails(text and html version) with RSpec
Better String#hash based only on the string's content.," GOAL: Map every URL handled by a server to 0, 1, 2, or 3, distributing as uniformly as possible.While the documentation for ruby's String#hash method says it will ""return a hash based on the strings length and content,"" this clearly isn't the whole story. A given string's hash is not consistent across invocations of the interpreter: This means a particular string's hash value may differ across, say, servers. Rails uses String#hash internally to map a URL path to one of four asset hosts (if the app's asset_host is so configured), but this feature is a lot less efficient than it could be because of the cross-machine inconsistencies; different servers may map the same URL to different asset hosts, reducing the effectiveness of caches, clouding skies, cooling cups of tea prematurely, besmirching the reputations of otherwise fine programmers.Can you suggest an alternate hash function that could effectively and speedily distribute hashes across a typical app's URL space, preferably one that produces a Fixnum since, in the end, I'll want to map it into one of four asset hosts? <code>  $ irbruby-1.9.2-p180 :001 > ""foo"".hash => 360517580588231756 ruby-1.9.2-p180 :002 > ^D$ irbruby-1.9.2-p180 :001 > ""foo"".hash => -2716152678666510148 ",Consistent String#hash based only on the string's content
Deleting files in ruby," I'm using the carrierwave gem to upload files.I have built a system for users to flag images as inappropriate and for admins to remove the images. From what I can tell, calling destroy on the image will only remove the path name from the table.Is there a way to have carrierwave actually remove the file itself? Or should rails automatically remove the file when I destroy the image path? <code> ",How to make carrierwave delete the file when destroying a record?
Deleting file images using Ruby on Rails," I'm using the carrierwave gem to upload files.I have built a system for users to flag images as inappropriate and for admins to remove the images. From what I can tell, calling destroy on the image will only remove the path name from the table.Is there a way to have carrierwave actually remove the file itself? Or should rails automatically remove the file when I destroy the image path? <code> ",How to make carrierwave delete the file when destroying a record?
Problem with triggering mouse event in Capybara test," I am using Capybara 1.0.0, and I have a link in my page which gets visible when mouse hover over that block. So I want to trigger mouse over in test so that I can click that hidden link.I googled it, but couldn't find the solution that suits me. Can you guys help me with this? <code> ",Unable to trigger mouse event in Capybara test
lion xcode problems using RVM," I had Xcode 4.1 preview 5 working fine but decided to upgrade to the final xcode 4.1 thru the App store. I uninstalled Xcode first... Then installed Xcode thru the app store and rebooted.I also removed RVM completely but... now whenever I try and install a version of Ruby it fails. In the error file i get this: There is no gcc-4.2 or any other gcc in the /usr/bin directory.What's up with Xcode? <code>  sudo /Developer/Library/uninstall-devtools mode=all [2011-07-27 18:29:25] ./configure --prefix=""/Users/holden/.rvm/usr"" checking for a BSD-compatible install... /usr/bin/install -cchecking whether build environment is sane... yeschecking for a thread-safe mkdir -p... config/install-sh -c -dchecking for gawk... nochecking for mawk... nochecking for nawk... nochecking for awk... awkchecking whether make sets $(MAKE)... nochecking for gcc... /usr/bin/gcc-4.2checking whether the C compiler works... noconfigure: error: in `/Users/holden/.rvm/src/yaml-0.1.4':configure: error: C compiler cannot create executablesSee `config.log' for more details",Mac OS X Lion Xcode problems using RVM
writing a file change listener in ruby, I want to write a listener (ruby module) to identify a file creation inside a folder. My scenario is as followsI have a folder called (files)I have a Rails project which will create a file (demo.txt) insidethe folder ('file')I need to write a listener to identify the file change and startreading the file (demo.txt)Where can I start on creating this Ruby module?I'm using 'Ruby 1.8.7 (2010-06-23 patchlevel 299) [i686-linux]'. <code> ,Writing a file change listener in Ruby
"Running ""bundle install"" fails and asks me to run ""bundle install"" -___-"," In fact, all gem-related commands result in the same error message, when run from inside the existing rails app I cloned from a git repo. I thought I already had rails installed... (following commands were run from outside the app directory): Any idea what's up with ""bundle install"" telling me to run ""bundle install""??I exited my app directory and manually did But upon entering my app directory again and trying ""bundle install""... So I went back out of the app directory, did ""bundle install"" now yielded Why am I having to manually install all these random gems that I didn't have to in the past? (new dev env). Anyone know what I could have set up wrong in my environment? <code>  $ bundle installCould not find tzinfo-0.3.27 in any of the sourcesRun `bundle install` to install missing gems.$ gem listCould not find tzinfo-0.3.27 in any of the sourcesRun `bundle install` to install missing gems.$ bundle updateCould not find tzinfo-0.3.27 in any of the sourcesRun `bundle install` to install missing gems.$ rails -vCould not find tzinfo-0.3.27 in any of the sourcesRun `bundle install` to install missing gems. $ rails -vRails 3.0.3$ ruby -vruby 1.9.2p290 (2011-07-09 revision 32553) [x86_64-darwin11.0.0] sudo gem install tzinfo -v 0.3.27 $ bundle installCould not find polyglot-0.3.1 in any of the sourcesRun `bundle install` to install missing gems. sudo gem install polyglot -v 0.3.1 $ bundle installCould not find treetop-1.4.9 in any of the sourcesRun `bundle install` to install missing gems.","Running ""bundle install"" fails and asks me to run ""bundle install"""
rmv 1.9.2 and Rails 3.1 can't start server, Im using rvm use 1.9.2 then when trying to run rails s I'm getting the following error. <code>  /Users/pel/.rvm/gems/ruby-1.9.2-p290/gems/actionpack-3.1.0.rc5/lib/action_view/railtie.rb:34:in `block (3 levels) in <class:Railtie>': undefined method `debug_rjs=' for ActionView::Base:Class (NoMethodError),rvm ruby 1.9.2 and Rails 3.1 can't start server
How to count records of a joined table with Rails 3 and arel?," I have a Collection class which has many coins.I am trying to select collections which have more than two coins.Currently, I have no problem doing that through straight Ruby, but that's extremely inefficient.My current code: How do I achieve that through a joins call with Arel?Thanks! <code>  collections = Collection.all.select { |c| c.coins.count > 2 }",How to join a table and count records in Rails 3?
File openning mode in Ruby," I am new programmar in Ruby. Can someone take an example about opening file with r+,w+,a+ mode in Ruby? What is difference between them and r,w,a?Please explain, and provide an example. <code> ",File opening mode in Ruby
Insert in file not overwriten it," I have a txt file.how can I place some text among that and don't overwrite it? because when I use for example f.puts ""aaaaaaaaaaaaaaa"" Ruby overwrites my txt file .thanks <code> ",Insert text into existing file
Is there a Expect equivallent gem for ruby?," Is there an Expect equivalent gem for Ruby?I tried searching on code.google and rubygems.org, but sadly it did not show up.FYI: Expect is a Unix automation and testing tool, written by Don Libes as an extension to the Tcl scripting language, for interactive applications such as telnet, ftp, passwd, fsck, rlogin, tip, ssh, and others. <code> ",Is there an Expect equivalent gem for Ruby?
What's a good way to validate links (urls) in rails 3?," I was wondering how I would best validate URLs in Rails. I was thinking of using a regular expression, but am not sure if this is the best practice.And, if I were to use a regex, could someone suggest one to me? I am still new to Regex. <code> ",Rails: What's a good way to validate links (URLs)?
What's a good way to validate links (urls) in rails?," I was wondering how I would best validate URLs in Rails. I was thinking of using a regular expression, but am not sure if this is the best practice.And, if I were to use a regex, could someone suggest one to me? I am still new to Regex. <code> ",Rails: What's a good way to validate links (URLs)?
is it possible to use pointers in Ruby?," I think Ruby is interpreted to C. If so, how can I use the concept of pointers and other features that are parts of C environment?How can we utilize the power of C with the simplicity of Ruby? <code> ",Is it possible to use pointers in Ruby?
Passenger concurent connections error," I have production server (Nginx + Passenger). When I trying to ab -n 3 -c 3 myhost.ru/ from another computer I get this error log in my nginx error.log: <code>  [ pid=21160 thr=139775297914624 file=ext/nginx/HelperAgent.cpp:584 time=2011-08-31 15:25:49.22 ]: Uncaught exception in PassengerServer client thread: exception: Cannot read response from backend process: Connection reset by peer (104) backtrace: in 'void Client::forwardResponse(Passenger::SessionPtr&, Passenger::FileDescriptor&, const Passenger::AnalyticsLogPtr&)' (HelperAgent.cpp:330) in 'void Client::handleRequest(Passenger::FileDescriptor&)' (HelperAgent.cpp:510) in 'void Client::threadMain()' (HelperAgent.cpp:603)[ pid=21249 thr=15884760 file=utils.rb:176 time=2011-08-31 15:25:49.022 ]: *** Exception PGError in application (server closed the connection unexpectedly This probably means the server terminated abnormally before or while processing the request.) (process 21249, thread #<Thread:0x00000001e4c3b0>): from /home/deployer/yandex.ru/shared/bundle/ruby/1.9.1/gems/activerecord-3.1.0/lib/active_record/connection_adapters/postgresql_adapter.rb:276:in `exec' from /home/deployer/yandex.ru/shared/bundle/ruby/1.9.1/gems/activerecord-3.1.0/lib/active_record/connection_adapters/postgresql_adapter.rb:276:in `block in clear_cache!' from /home/deployer/yandex.ru/shared/bundle/ruby/1.9.1/gems/activerecord-3.1.0/lib/active_record/connection_adapters/postgresql_adapter.rb:275:in `each_value' from /home/deployer/yandex.ru/shared/bundle/ruby/1.9.1/gems/activerecord-3.1.0/lib/active_record/connection_adapters/postgresql_adapter.rb:275:in `clear_cache!' from /home/deployer/yandex.ru/shared/bundle/ruby/1.9.1/gems/activerecord-3.1.0/lib/active_record/connection_adapters/postgresql_adapter.rb:303:in `disconnect!' from /home/deployer/yandex.ru/shared/bundle/ruby/1.9.1/gems/activerecord-3.1.0/lib/active_record/connection_adapters/abstract/connection_pool.rb:202:in `block in disconnect!' from /home/deployer/yandex.ru/shared/bundle/ruby/1.9.1/gems/activerecord-3.1.0/lib/active_record/connection_adapters/abstract/connection_pool.rb:201:in `each' from /home/deployer/yandex.ru/shared/bundle/ruby/1.9.1/gems/activerecord-3.1.0/lib/active_record/connection_adapters/abstract/connection_pool.rb:201:in `disconnect!' from /home/deployer/yandex.ru/shared/bundle/ruby/1.9.1/gems/activesupport-3.1.0/lib/active_support/core_ext/module/synchronization.rb:35:in `block in disconnect_with_synchronization!' from /home/deployer/.rvm/rubies/ruby-1.9.2-p180/lib/ruby/1.9.1/monitor.rb:201:in `mon_synchronize' from /home/deployer/yandex.ru/shared/bundle/ruby/1.9.1/gems/activesupport-3.1.0/lib/active_support/core_ext/module/synchronization.rb:34:in `disconnect_with_synchronization!' from /home/deployer/yandex.ru/shared/bundle/ruby/1.9.1/gems/activerecord-3.1.0/lib/active_record/connection_adapters/abstract/connection_pool.rb:395:in `block in clear_all_connections!' from /home/deployer/yandex.ru/shared/bundle/ruby/1.9.1/gems/activerecord-3.1.0/lib/active_record/connection_adapters/abstract/connection_pool.rb:395:in `each_value' from /home/deployer/yandex.ru/shared/bundle/ruby/1.9.1/gems/activerecord-3.1.0/lib/active_record/connection_adapters/abstract/connection_pool.rb:395:in `clear_all_connections!' from /home/deployer/yandex.ru/shared/bundle/ruby/1.9.1/gems/activerecord-3.1.0/lib/active_record/connection_adapters/abstract/connection_specification.rb:123:in `clear_all_connections!' from /home/deployer/.rvm/gems/ruby-1.9.2-p180/gems/passenger-3.0.7/lib/phusion_passenger/utils.rb:398:in `before_handling_requests' from /home/deployer/.rvm/gems/ruby-1.9.2-p180/gems/passenger-3.0.7/lib/phusion_passenger/rack/application_spawner.rb:204:in `start_request_handler' from /home/deployer/.rvm/gems/ruby-1.9.2-p180/gems/passenger-3.0.7/lib/phusion_passenger/rack/application_spawner.rb:170:in `block in handle_spawn_application' from /home/deployer/.rvm/gems/ruby-1.9.2-p180/gems/passenger-3.0.7/lib/phusion_passenger/utils.rb:479:in `safe_fork' from /home/deployer/.rvm/gems/ruby-1.9.2-p180/gems/passenger-3.0.7/lib/phusion_passenger/rack/application_spawner.rb:165:in `handle_spawn_application' from /home/deployer/.rvm/gems/ruby-1.9.2-p180/gems/passenger-3.0.7/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop' from /home/deployer/.rvm/gems/ruby-1.9.2-p180/gems/passenger-3.0.7/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously' from /home/deployer/.rvm/gems/ruby-1.9.2-p180/gems/passenger-3.0.7/lib/phusion_passenger/abstract_server.rb:180:in `start' from /home/deployer/.rvm/gems/ruby-1.9.2-p180/gems/passenger-3.0.7/lib/phusion_passenger/rack/application_spawner.rb:128:in `start' from /home/deployer/.rvm/gems/ruby-1.9.2-p180/gems/passenger-3.0.7/lib/phusion_passenger/spawn_manager.rb:253:in `block (2 levels) in spawn_rack_application' from /home/deployer/.rvm/gems/ruby-1.9.2-p180/gems/passenger-3.0.7/lib/phusion_passenger/abstract_server_collection.rb:132:in `lookup_or_add' from /home/deployer/.rvm/gems/ruby-1.9.2-p180/gems/passenger-3.0.7/lib/phusion_passenger/spawn_manager.rb:246:in `block in spawn_rack_application' from /home/deployer/.rvm/gems/ruby-1.9.2-p180/gems/passenger-3.0.7/lib/phusion_passenger/abstract_server_collection.rb:82:in `block in synchronize' from <internal:prelude>:10:in `synchronize' from /home/deployer/.rvm/gems/ruby-1.9.2-p180/gems/passenger-3.0.7/lib/phusion_passenger/abstract_server_collection.rb:79:in `synchronize' from /home/deployer/.rvm/gems/ruby-1.9.2-p180/gems/passenger-3.0.7/lib/phusion_passenger/spawn_manager.rb:244:in `spawn_rack_application' from /home/deployer/.rvm/gems/ruby-1.9.2-p180/gems/passenger-3.0.7/lib/phusion_passenger/spawn_manager.rb:137:in `spawn_application' from /home/deployer/.rvm/gems/ruby-1.9.2-p180/gems/passenger-3.0.7/lib/phusion_passenger/spawn_manager.rb:275:in `handle_spawn_application' from /home/deployer/.rvm/gems/ruby-1.9.2-p180/gems/passenger-3.0.7/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop' from /home/deployer/.rvm/gems/ruby-1.9.2-p180/gems/passenger-3.0.7/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously' from /home/deployer/.rvm/gems/ruby-1.9.2-p180/gems/passenger-3.0.7/helper-scripts/passenger-spawn-server:99:in `<main>'2011/08/31 15:25:49 [error] 21197#0: *41173 upstream prematurely closed connection while reading response header from upstream, client: 78.47.253.164, server: yandex.ru, request: ""GET / HTTP/1.0"", upstream: ""passenger:unix:/passenger_helper_server:"", host: ""yandex.ru""[ pid=21160 thr=139775298115328 file=ext/nginx/HelperAgent.cpp:584 time=2011-08-31 15:25:49.31 ]: Uncaught exception in PassengerServer client thread: exception: Cannot read response from backend process: Connection reset by peer (104) backtrace: in 'void Client::forwardResponse(Passenger::SessionPtr&, Passenger::FileDescriptor&, const Passenger::AnalyticsLogPtr&)' (HelperAgent.cpp:330) in 'void Client::handleRequest(Passenger::FileDescriptor&)' (HelperAgent.cpp:510) in 'void Client::threadMain()' (HelperAgent.cpp:603)2011/08/31 15:25:49 [error] 21197#0: *41172 upstream prematurely closed connection while reading response header from upstream, client: 78.47.253.164, server: yandex.ru, request: ""GET / HTTP/1.0"", upstream: ""passenger:unix:/passenger_helper_server:"", host: ""yandex.ru""[ pid=21257 thr=15884760 file=utils.rb:176 time=2011-08-31 15:25:49.032 ]: *** Exception PGError in application (server closed the connection unexpectedly This probably means the server terminated abnormally before or while processing the request.) (process 21257, thread #<Thread:0x00000001e4c3b0>): from /home/deployer/yandex.ru/shared/bundle/ruby/1.9.1/gems/activerecord-3.1.0/lib/active_record/connection_adapters/postgresql_adapter.rb:276:in `exec' from /home/deployer/yandex.ru/shared/bundle/ruby/1.9.1/gems/activerecord-3.1.0/lib/active_record/connection_adapters/postgresql_adapter.rb:276:in `block in clear_cache!' from /home/deployer/yandex.ru/shared/bundle/ruby/1.9.1/gems/activerecord-3.1.0/lib/active_record/connection_adapters/postgresql_adapter.rb:275:in `each_value' from /home/deployer/yandex.ru/shared/bundle/ruby/1.9.1/gems/activerecord-3.1.0/lib/active_record/connection_adapters/postgresql_adapter.rb:275:in `clear_cache!' from /home/deployer/yandex.ru/shared/bundle/ruby/1.9.1/gems/activerecord-3.1.0/lib/active_record/connection_adapters/postgresql_adapter.rb:303:in `disconnect!' from /home/deployer/yandex.ru/shared/bundle/ruby/1.9.1/gems/activerecord-3.1.0/lib/active_record/connection_adapters/abstract/connection_pool.rb:202:in `block in disconnect!' from /home/deployer/yandex.ru/shared/bundle/ruby/1.9.1/gems/activerecord-3.1.0/lib/active_record/connection_adapters/abstract/connection_pool.rb:201:in `each' from /home/deployer/yandex.ru/shared/bundle/ruby/1.9.1/gems/activerecord-3.1.0/lib/active_record/connection_adapters/abstract/connection_pool.rb:201:in `disconnect!' from /home/deployer/yandex.ru/shared/bundle/ruby/1.9.1/gems/activesupport-3.1.0/lib/active_support/core_ext/module/synchronization.rb:35:in `block in disconnect_with_synchronization!' from /home/deployer/.rvm/rubies/ruby-1.9.2-p180/lib/ruby/1.9.1/monitor.rb:201:in `mon_synchronize' from /home/deployer/yandex.ru/shared/bundle/ruby/1.9.1/gems/activesupport-3.1.0/lib/active_support/core_ext/module/synchronization.rb:34:in `disconnect_with_synchronization!' from /home/deployer/yandex.ru/shared/bundle/ruby/1.9.1/gems/activerecord-3.1.0/lib/active_record/connection_adapters/abstract/connection_pool.rb:395:in `block in clear_all_connections!' from /home/deployer/yandex.ru/shared/bundle/ruby/1.9.1/gems/activerecord-3.1.0/lib/active_record/connection_adapters/abstract/connection_pool.rb:395:in `each_value' from /home/deployer/yandex.ru/shared/bundle/ruby/1.9.1/gems/activerecord-3.1.0/lib/active_record/connection_adapters/abstract/connection_pool.rb:395:in `clear_all_connections!' from /home/deployer/yandex.ru/shared/bundle/ruby/1.9.1/gems/activerecord-3.1.0/lib/active_record/connection_adapters/abstract/connection_specification.rb:123:in `clear_all_connections!' from /home/deployer/.rvm/gems/ruby-1.9.2-p180/gems/passenger-3.0.7/lib/phusion_passenger/utils.rb:398:in `before_handling_requests' from /home/deployer/.rvm/gems/ruby-1.9.2-p180/gems/passenger-3.0.7/lib/phusion_passenger/rack/application_spawner.rb:204:in `start_request_handler' from /home/deployer/.rvm/gems/ruby-1.9.2-p180/gems/passenger-3.0.7/lib/phusion_passenger/rack/application_spawner.rb:170:in `block in handle_spawn_application' from /home/deployer/.rvm/gems/ruby-1.9.2-p180/gems/passenger-3.0.7/lib/phusion_passenger/utils.rb:479:in `safe_fork' from /home/deployer/.rvm/gems/ruby-1.9.2-p180/gems/passenger-3.0.7/lib/phusion_passenger/rack/application_spawner.rb:165:in `handle_spawn_application' from /home/deployer/.rvm/gems/ruby-1.9.2-p180/gems/passenger-3.0.7/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop' from /home/deployer/.rvm/gems/ruby-1.9.2-p180/gems/passenger-3.0.7/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously' from /home/deployer/.rvm/gems/ruby-1.9.2-p180/gems/passenger-3.0.7/lib/phusion_passenger/abstract_server.rb:180:in `start' from /home/deployer/.rvm/gems/ruby-1.9.2-p180/gems/passenger-3.0.7/lib/phusion_passenger/rack/application_spawner.rb:128:in `start' from /home/deployer/.rvm/gems/ruby-1.9.2-p180/gems/passenger-3.0.7/lib/phusion_passenger/spawn_manager.rb:253:in `block (2 levels) in spawn_rack_application' from /home/deployer/.rvm/gems/ruby-1.9.2-p180/gems/passenger-3.0.7/lib/phusion_passenger/abstract_server_collection.rb:132:in `lookup_or_add' from /home/deployer/.rvm/gems/ruby-1.9.2-p180/gems/passenger-3.0.7/lib/phusion_passenger/spawn_manager.rb:246:in `block in spawn_rack_application' from /home/deployer/.rvm/gems/ruby-1.9.2-p180/gems/passenger-3.0.7/lib/phusion_passenger/abstract_server_collection.rb:82:in `block in synchronize' from <internal:prelude>:10:in `synchronize' from /home/deployer/.rvm/gems/ruby-1.9.2-p180/gems/passenger-3.0.7/lib/phusion_passenger/abstract_server_collection.rb:79:in `synchronize' from /home/deployer/.rvm/gems/ruby-1.9.2-p180/gems/passenger-3.0.7/lib/phusion_passenger/spawn_manager.rb:244:in `spawn_rack_application' from /home/deployer/.rvm/gems/ruby-1.9.2-p180/gems/passenger-3.0.7/lib/phusion_passenger/spawn_manager.rb:137:in `spawn_application' from /home/deployer/.rvm/gems/ruby-1.9.2-p180/gems/passenger-3.0.7/lib/phusion_passenger/spawn_manager.rb:275:in `handle_spawn_application' from /home/deployer/.rvm/gems/ruby-1.9.2-p180/gems/passenger-3.0.7/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop' from /home/deployer/.rvm/gems/ruby-1.9.2-p180/gems/passenger-3.0.7/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously' from /home/deployer/.rvm/gems/ruby-1.9.2-p180/gems/passenger-3.0.7/helper-scripts/passenger-spawn-server:99:in `<main>'",Passenger concurrent connections error
Can't install RedCloth on Windows," When running gem install RedCloth (on Windows XP) I got: Why do I get this error ?Then I added require 'RedCloth' to config/environment.rb, and tried to run rails s, but unfortunately I got: What am I doing wrong ?I use Rails 3.0.1, Ruby 1.9.2. <code>  Fetching: RedCloth-4.2.8.gem (100%)Temporarily enhancing PATH to include DevKit...Building native extensions. This could take a while...Successfully installed RedCloth-4.2.81 gem installedInstalling ri documentation for RedCloth-4.2.8...Installing RDoc documentation for RedCloth-4.2.8...ERROR: While generating documentation for RedCloth-4.2.8... MESSAGE: error generating index.html: Error while evaluating D:/Programs/Ruby/lib/ruby/gems/1.9.1/gems/rdoc-3.9/lib/rdoc/generator/template/darkfish/index.rhtml: undefined method `[]' for nil:NilClass (RDoc::Error)... RDOC args: --op D:/Programs/Ruby/lib/ruby/gems/1.9.1/doc/RedCloth-4.2.8/rdoc --charset=UTF-8 --line-numbers --title RedCloth --main README.rdoc lib lib/case_sensitive_require ext README.rdoc COPYING CHANGELOG --title RedCloth-4.2.8 Documentation --quiet D:/Programs/Ruby/lib/ruby/gems/1.9.1/gems/RedCloth-4.2.8/lib/redcloth.rb:12:in `require': no such file to load -- 1.9/redcloth_scan (LoadError)Couldn't load 1.9/redcloth_scanThe $LOAD_PATH was: ... bundle show RedCloth=> D:/Programs/Ruby/lib/ruby/gems/1.9.1/gems/RedCloth-4.2.8",How to install RedCloth on Windows?
Where does flash messages store?," I thought they were stored in cookies - but no, cookies inspecting gives me nothing. Sessions do not store them either. So, where I can find them?I need this to set them directly (not through flash hash). <code> ",Where are flash messages stored?
What's the efficient way to multiply two arrays and get sum of multiplied values in Rails 3?," What's the efficient way to multiply two arrays and get sum of multiply values in Ruby?I have two arrays in Ruby: My aim is to get the sum value of array_A * array_B, i.e., 1*3 + 2*2 + 1*4 + ... + 8*5 + 9*4.Because I need to calculate them million times in my apps, what's the most efficient way to do such calculations?It's just like a matrix calcuation: 1* N matrix * N*1 matrix or a vector dot product. <code>  array_A = [1, 2, 1, 4, 5, 3, 2, 6, 5, 8, 9]array_B = [3, 2, 4, 2, 5, 1, 3, 3, 7, 5, 4]",What's the efficient way to multiply two arrays and get sum of multiplied values in Ruby?
ruby lambda context," Is it possible not to assign context to lambda? For example: My target is -> stored procedure objects without contexts, and assign context before call in specific places. Is it possible? <code>  class Rule def get_rule return lambda {puts name} endendclass Person attr_accessor :name def init_rule @name = ""ruby"" Rule.new.get_rule.call() # should say ""ruby"" but say what object of class Rull, does not have variable name # or self.instance_eval &Rule.new.get_rule endend",Ruby assign context to lambda?
"how to specify ""http request header"" in open-uri"," I am trying to call a URL using Ruby's OpenURI gem, however it needs me to pass certain values inside its HTTP request header.Any idea how to do this? <code> ","How to specify ""http request header"" in OpenURI"
"FactoryGirl model association trouble: ""stack level too deep"""," I am using Ruby on Rails 3.0.9, RSpec-rails 2 and FactoryGirl. I am trying to state a Factory association model but I am in trouble.I have a factories/user.rb file like the following: and a factories/users/account.rb file like the following: The above example works as expected in my spec files, but if in the factory :users_account statement I add the association :user code so to have I get the following error: How can I solve that problem so to access associated models from both sides\factories (that is, in my spec files I would like to use RoR association model methods like user.account and account.user)?P.S.: I read the Factory Girl and has_one question and my case is very close to the case explained in the linked question. That is, I have an has_one association too (between User and Users::Account classes). <code>  FactoryGirl.define do factory :user, :class => User do attribute_1 attribute_2 ... association :account, :factory => :users_account, :method => :build, :email => 'foo@bar.com' endend FactoryGirl.define do factory :users_account, :class => Users::Account do sequence(:email) {|n| ""foo#{n}@bar.com"" } ... endend FactoryGirl.define do factory :users_account, :class => Users::Account do sequence(:email) {|n| ""foo#{n}@bar.com"" } ... association :user endend Failure/Error: Unable to find matching line from backtraceSystemStackError: stack level too deep","FactoryGirl association model trouble: ""SystemStackError: stack level too deep"""
"FactoryGirl association model trouble: ""stack level too deep"""," I am using Ruby on Rails 3.0.9, RSpec-rails 2 and FactoryGirl. I am trying to state a Factory association model but I am in trouble.I have a factories/user.rb file like the following: and a factories/users/account.rb file like the following: The above example works as expected in my spec files, but if in the factory :users_account statement I add the association :user code so to have I get the following error: How can I solve that problem so to access associated models from both sides\factories (that is, in my spec files I would like to use RoR association model methods like user.account and account.user)?P.S.: I read the Factory Girl and has_one question and my case is very close to the case explained in the linked question. That is, I have an has_one association too (between User and Users::Account classes). <code>  FactoryGirl.define do factory :user, :class => User do attribute_1 attribute_2 ... association :account, :factory => :users_account, :method => :build, :email => 'foo@bar.com' endend FactoryGirl.define do factory :users_account, :class => Users::Account do sequence(:email) {|n| ""foo#{n}@bar.com"" } ... endend FactoryGirl.define do factory :users_account, :class => Users::Account do sequence(:email) {|n| ""foo#{n}@bar.com"" } ... association :user endend Failure/Error: Unable to find matching line from backtraceSystemStackError: stack level too deep","FactoryGirl association model trouble: ""SystemStackError: stack level too deep"""
"Ruby: General style question, unless vs if not", I find myself preferring if not rather than unless. Is there a proper way to write that sort of condition? How do people generally feel about unless? <code> ,Ruby: unless vs if not
Devise Sign Out Error," Devise generated the following code to sign a user out: And the route appears when executing rake routes However I'm getting an error saying: Any ideas? <code>  <%= link_to ""Sign out"", destroy_user_session_path %> destroy_user_session DELETE /users/sign_out(.:format){:action=>""destroy"", :controller=>""devise/sessions""} The action 'show' could not be found for UsersController",Devise Sign Out Error - The action 'show' could not be found for UsersController
How to run gem spec tests?, I have forked a ruby gem and made some updates. I need to run the gem tests and add my new tests and ensure all tests are succeeding.The forked ruby gem is using rspec tests. How can I run these test? <code> ,How do I run a Ruby gem's specs?
Class constructors in Ruby," I'm trying to create a class, which has a constructor that takes a single argument. When I create a new instance of the object, it returns a pointer. What am I doing wrong?Thanks <code>  class Adder def initialize(my_num) @my_num = my_num endendy = Adder.new(12)puts y",Ruby object prints out as pointer
ruby: how to save a hash into a csv," I am new in ruby so please forgive the noobishness.I have a CSV with two columns. One for animal name and one for animal type.I have a hash with all the keys being animal names and the values being animal type. I would like to write the hash to the CSV without using fasterCSV. I have thought of several ideas what would be easiest.. here is the basic layout. When I opened the file to read from it I opened it File.open(""blabla.csv"", headers: true)Would it be possible to write back to the file the same way?  <code>  require ""csv""def write_file h = { 'dog' => 'canine', 'cat' => 'feline', 'donkey' => 'asinine' } CSV.open(""data.csv"", ""wb"") do |csv| csv << [???????????] endend",How to save a hash into a CSV
Ruby: How to concatenate multiple arrays into one," I have an array of arrays in Ruby on Rails (3.1) where all the internal arrays are of different size. Is there a way to easily concatenate all the internal arrays to get one big one dimesional array with all the items?I know you can use the Array::concat function to concatenate two arrays, and I could do a loop to concatenate them sequentially like so: but I wanted to know if there was like a Ruby one-liner which would do it in a cleaner manner.Thanks for your help. <code>  concatenated = Array.newarray_of_arrays.each do |array| concatenated.concat(array)end",Ruby: How to concatenate array of arrays into one
How to Uninstall RubyMine (mac)," How do you uninstall RubyMine (from Mac OSX or other systems)?It doesn't come with an uninstaller (from what I can tell). There are no options to uninstall in the application itself. There is no documentation (except a ""Thank you for trying to uninstall..."" on their site.I can drag the App to the trash, but I assume there are Preferences, etc. to also uninstall. I hate to lose files.  <code> ",How to Uninstall RubyMine?
Converting a hash into a recursive hash," This question is the inverse of this question.Given a hash that has an array for each key like what is the best way to convert it into a nested hash like <code>  { [:a, :b, :c] => 1, [:a, :b, :d] => 2, [:a, :e] => 3, [:f] => 4,} { :a => { :b => {:c => 1, :d => 2}, :e => 3, }, :f => 4,}",Converting a hash into a nested hash
Change log level in sinatra," I am using this code to enable logging in my Sinatra app: The actual logging is done using: It turns out that only INFO or higher level log messages are logged and DEBUG messages are not logged. I am looking for a way to set up the log level to DEBUG.  <code>  log_file = File.new('my_log_file.log', ""a"") $stdout.reopen(log_file)$stderr.reopen(log_file) $stdout.sync=true$stderr.sync=true logger.debug(""Starting call. Params = #{params.inspect}"")",How to change the log level in Sinatra
RubyOnRails 1.9.3p0 and mysql gem," I'm running CentOS6 and installed Ruby from source, along with Rails and some other staff. Some gems: I need Rails in order to run chiliproject, but when running the following command I get: Now with --trace: Does anyone knows what's wrong with mysql gem files?I also tried to install mysql gem files like this <code>  ruby -vruby 1.9.3p0 (2011-10-30 revision 33570) [x86_64-linux] rails -vRails 3.1.3 *** LOCAL GEMS ***actionmailer (3.1.3, 2.3.14)actionpack (3.1.3, 2.3.14)activemodel (3.1.3)activerecord (3.1.3, 2.3.14)activeresource (3.1.3, 2.3.14)activesupport (3.1.3, 2.3.14)archive-tar-minitar (0.5.2)arel (2.2.1)bigdecimal (1.1.0)bouncy-castle-java (1.5.0146.1)builder (3.0.0)bundler (1.0.21)coderay (0.9.7)columnize (0.3.5)edavis10-object_daddy (0.4.3)erubis (2.7.0)fastercsv (1.5.0)ffi (1.0.11)hike (1.2.1)hoe (2.12.4)i18n (0.6.0, 0.4.2)io-console (0.3)jruby-openssl (0.7.4)json (1.5.4)linecache19 (0.5.13)mail (2.3.0)metaclass (0.0.1)mime-types (1.17.2)minitest (2.5.1)mocha (0.10.0)multi_json (1.0.4)mysql (2.8.1)mysql2 (0.3.11, 0.2.7)net-ldap (0.2.2)polyglot (0.3.3)rack (1.3.5, 1.1.2)rack-cache (1.1)rack-mount (0.8.3)rack-ssl (1.3.2)rack-test (0.6.1)rails (3.1.3, 2.3.14)railties (3.1.3)rake (0.9.2.2)rdoc (3.9.4)rmagick (2.13.1)ruby-debug-base19 (0.11.26, 0.11.25)ruby-debug19 (0.11.6)ruby-mysql (2.9.4)ruby-openid (2.1.4)ruby_core_source (0.1.5)rubygems-update (1.8.12)rubytree (0.5.2)shoulda (2.11.3, 2.10.3)sprockets (2.0.3)sqlite3 (1.3.5, 0.1.1)sqlite3-ruby (1.3.3, 1.2.5)thor (0.14.6)tilt (1.3.3)treetop (1.4.10)tzinfo (0.3.31) RAILS_ENV=production bundle exec rake db:migrate !!! The bundled mysql.rb driver has been removed from Rails 2.2. Please install the mysql gem and try again: gem install mysql.rake aborted!cannot load such file -- mysqlTasks: TOP => db:migrate => environment(See full trace by running task with --trace) RAILS_ENV=production bundle exec rake db:migrate --trace >> tmp/rake** Invoke db:migrate (first_time)** Invoke environment (first_time)** Execute environment!!! The bundled mysql.rb driver has been removed from Rails 2.2. Please install the mysql gem and try again: gem install mysql.rake aborted!cannot load such file -- mysql/usr/local/lib/ruby/gems/1.9.1/gems/activesupport-2.3.14/lib/active_support/dependencies.rb:184:in `require'/usr/local/lib/ruby/gems/1.9.1/gems/activesupport-2.3.14/lib/active_support/dependencies.rb:184:in `require'/usr/local/lib/ruby/gems/1.9.1/gems/activesupport-2.3.14/lib/active_support/core_ext/kernel/requires.rb:7:in `block in require_library_or_gem'/usr/local/lib/ruby/gems/1.9.1/gems/activesupport-2.3.14/lib/active_support/core_ext/kernel/reporting.rb:11:in `silence_warnings'/usr/local/lib/ruby/gems/1.9.1/gems/activesupport-2.3.14/lib/active_support/core_ext/kernel/requires.rb:5:in `require_library_or_gem'/usr/local/lib/ruby/gems/1.9.1/gems/activerecord-2.3.14/lib/active_record/connection_adapters/mysql_adapter.rb:61:in `mysql_connection'/usr/local/lib/ruby/gems/1.9.1/gems/activerecord-2.3.14/lib/active_record/connection_adapters/abstract/connection_pool.rb:223:in `new_connection'/usr/local/lib/ruby/gems/1.9.1/gems/activerecord-2.3.14/lib/active_record/connection_adapters/abstract/connection_pool.rb:245:in `checkout_new_connection'/usr/local/lib/ruby/gems/1.9.1/gems/activerecord-2.3.14/lib/active_record/connection_adapters/abstract/connection_pool.rb:188:in `block (2 levels) in checkout'/usr/local/lib/ruby/gems/1.9.1/gems/activerecord-2.3.14/lib/active_record/connection_adapters/abstract/connection_pool.rb:184:in `loop'/usr/local/lib/ruby/gems/1.9.1/gems/activerecord-2.3.14/lib/active_record/connection_adapters/abstract/connection_pool.rb:184:in `block in checkout'/usr/local/lib/ruby/1.9.1/monitor.rb:211:in `mon_synchronize'/usr/local/lib/ruby/gems/1.9.1/gems/activerecord-2.3.14/lib/active_record/connection_adapters/abstract/connection_pool.rb:183:in `checkout'/usr/local/lib/ruby/gems/1.9.1/gems/activerecord-2.3.14/lib/active_record/connection_adapters/abstract/connection_pool.rb:98:in `connection'/usr/local/lib/ruby/gems/1.9.1/gems/activerecord-2.3.14/lib/active_record/connection_adapters/abstract/connection_pool.rb:326:in `retrieve_connection'/usr/local/lib/ruby/gems/1.9.1/gems/activerecord-2.3.14/lib/active_record/connection_adapters/abstract/connection_specification.rb:123:in `retrieve_connection'/usr/local/lib/ruby/gems/1.9.1/gems/activerecord-2.3.14/lib/active_record/connection_adapters/abstract/connection_specification.rb:115:in `connection'/var/www/html/chiliproject/vendor/plugins/awesome_nested_set/lib/awesome_nested_set.rb:218:in `quoted_left_column_name'/var/www/html/chiliproject/vendor/plugins/awesome_nested_set/lib/awesome_nested_set.rb:94:in `acts_as_nested_set'/var/www/html/chiliproject/app/models/issue.rb:33:in `'/var/www/html/chiliproject/app/models/issue.rb:15:in `'/usr/local/lib/ruby/gems/1.9.1/gems/activesupport-2.3.14/lib/active_support/dependencies.rb:184:in `require'/usr/local/lib/ruby/gems/1.9.1/gems/activesupport-2.3.14/lib/active_support/dependencies.rb:184:in `require'/usr/local/lib/ruby/gems/1.9.1/gems/activesupport-2.3.14/lib/active_support/dependencies.rb:291:in `require_or_load'/var/www/html/chiliproject/vendor/plugins/engines/lib/engines/rails_extensions/dependencies.rb:133:in `require_or_load_with_engine_additions'/usr/local/lib/ruby/gems/1.9.1/gems/activesupport-2.3.14/lib/active_support/dependencies.rb:451:in `load_missing_constant'/usr/local/lib/ruby/gems/1.9.1/gems/activesupport-2.3.14/lib/active_support/dependencies.rb:106:in `const_missing_with_dependencies'/usr/local/lib/ruby/gems/1.9.1/gems/activesupport-2.3.14/lib/active_support/dependencies.rb:118:in `const_missing'/usr/local/lib/ruby/gems/1.9.1/gems/activesupport-2.3.14/lib/active_support/inflector.rb:375:in `const_get'/usr/local/lib/ruby/gems/1.9.1/gems/activesupport-2.3.14/lib/active_support/inflector.rb:375:in `block in constantize'/usr/local/lib/ruby/gems/1.9.1/gems/activesupport-2.3.14/lib/active_support/inflector.rb:374:in `each'/usr/local/lib/ruby/gems/1.9.1/gems/activesupport-2.3.14/lib/active_support/inflector.rb:374:in `constantize'/usr/local/lib/ruby/gems/1.9.1/gems/activesupport-2.3.14/lib/active_support/core_ext/string/inflections.rb:162:in `constantize'/usr/local/lib/ruby/gems/1.9.1/gems/activerecord-2.3.14/lib/active_record/observer.rb:157:in `observed_class'/usr/local/lib/ruby/gems/1.9.1/gems/activerecord-2.3.14/lib/active_record/observer.rb:183:in `observed_classes'/usr/local/lib/ruby/gems/1.9.1/gems/activerecord-2.3.14/lib/active_record/observer.rb:166:in `initialize'/usr/local/lib/ruby/1.9.1/singleton.rb:141:in `new'/usr/local/lib/ruby/1.9.1/singleton.rb:141:in `block in instance':10:in `synchronize'/usr/local/lib/ruby/1.9.1/singleton.rb:139:in `instance'/usr/local/lib/ruby/gems/1.9.1/gems/activerecord-2.3.14/lib/active_record/observer.rb:38:in `block in instantiate_observers'/usr/local/lib/ruby/gems/1.9.1/gems/activerecord-2.3.14/lib/active_record/observer.rb:36:in `each'/usr/local/lib/ruby/gems/1.9.1/gems/activerecord-2.3.14/lib/active_record/observer.rb:36:in `instantiate_observers'/usr/local/lib/ruby/gems/1.9.1/gems/actionpack-2.3.14/lib/action_controller/dispatcher.rb:15:in `block in define_dispatcher_callbacks'/usr/local/lib/ruby/gems/1.9.1/gems/activesupport-2.3.14/lib/active_support/callbacks.rb:182:in `call'/usr/local/lib/ruby/gems/1.9.1/gems/activesupport-2.3.14/lib/active_support/callbacks.rb:182:in `evaluate_method'/usr/local/lib/ruby/gems/1.9.1/gems/activesupport-2.3.14/lib/active_support/callbacks.rb:166:in `call'/usr/local/lib/ruby/gems/1.9.1/gems/activesupport-2.3.14/lib/active_support/callbacks.rb:90:in `block in run'/usr/local/lib/ruby/gems/1.9.1/gems/activesupport-2.3.14/lib/active_support/callbacks.rb:90:in `each'/usr/local/lib/ruby/gems/1.9.1/gems/activesupport-2.3.14/lib/active_support/callbacks.rb:90:in `run'/usr/local/lib/ruby/gems/1.9.1/gems/activesupport-2.3.14/lib/active_support/callbacks.rb:276:in `run_callbacks'/usr/local/lib/ruby/gems/1.9.1/gems/actionpack-2.3.14/lib/action_controller/dispatcher.rb:51:in `run_prepare_callbacks'/usr/local/lib/ruby/gems/1.9.1/gems/rails-2.3.14/lib/initializer.rb:631:in `prepare_dispatcher'/usr/local/lib/ruby/gems/1.9.1/gems/rails-2.3.14/lib/initializer.rb:185:in `process'/usr/local/lib/ruby/gems/1.9.1/gems/rails-2.3.14/lib/initializer.rb:113:in `run'/var/www/html/chiliproject/config/environment.rb:39:in `'/usr/local/lib/ruby/gems/1.9.1/gems/activesupport-2.3.14/lib/active_support/dependencies.rb:182:in `require'/usr/local/lib/ruby/gems/1.9.1/gems/activesupport-2.3.14/lib/active_support/dependencies.rb:182:in `block in require'/usr/local/lib/ruby/gems/1.9.1/gems/activesupport-2.3.14/lib/active_support/dependencies.rb:547:in `new_constants_in'/usr/local/lib/ruby/gems/1.9.1/gems/activesupport-2.3.14/lib/active_support/dependencies.rb:182:in `require'/usr/local/lib/ruby/gems/1.9.1/gems/rails-2.3.14/lib/tasks/misc.rake:4:in `block in '/usr/local/lib/ruby/1.9.1/rake/task.rb:205:in `call'/usr/local/lib/ruby/1.9.1/rake/task.rb:205:in `block in execute'/usr/local/lib/ruby/1.9.1/rake/task.rb:200:in `each'/usr/local/lib/ruby/1.9.1/rake/task.rb:200:in `execute'/usr/local/lib/ruby/1.9.1/rake/task.rb:158:in `block in invoke_with_call_chain'/usr/local/lib/ruby/1.9.1/monitor.rb:211:in `mon_synchronize'/usr/local/lib/ruby/1.9.1/rake/task.rb:151:in `invoke_with_call_chain'/usr/local/lib/ruby/1.9.1/rake/task.rb:176:in `block in invoke_prerequisites'/usr/local/lib/ruby/1.9.1/rake/task.rb:174:in `each'/usr/local/lib/ruby/1.9.1/rake/task.rb:174:in `invoke_prerequisites'/usr/local/lib/ruby/1.9.1/rake/task.rb:157:in `block in invoke_with_call_chain'/usr/local/lib/ruby/1.9.1/monitor.rb:211:in `mon_synchronize'/usr/local/lib/ruby/1.9.1/rake/task.rb:151:in `invoke_with_call_chain'/usr/local/lib/ruby/1.9.1/rake/task.rb:144:in `invoke'/usr/local/lib/ruby/1.9.1/rake/application.rb:116:in `invoke_task'/usr/local/lib/ruby/1.9.1/rake/application.rb:94:in `block (2 levels) in top_level'/usr/local/lib/ruby/1.9.1/rake/application.rb:94:in `each'/usr/local/lib/ruby/1.9.1/rake/application.rb:94:in `block in top_level'/usr/local/lib/ruby/1.9.1/rake/application.rb:133:in `standard_exception_handling'/usr/local/lib/ruby/1.9.1/rake/application.rb:88:in `top_level'/usr/local/lib/ruby/1.9.1/rake/application.rb:66:in `block in run'/usr/local/lib/ruby/1.9.1/rake/application.rb:133:in `standard_exception_handling'/usr/local/lib/ruby/1.9.1/rake/application.rb:63:in `run'/usr/local/bin/rake:32:in `'Tasks: TOP => db:migrate => environment gem install ruby-mysql2 --no-rdoc --no-ri -- --with-mysql-config=/usr/bin/mysql_config","Rails, Ruby 1.9.3p0, and mysql gem"
How to write my radio_button_tag?," For my form I am using my Product model: On my form I have the :purchase_date working correctly when I create multiple products but also want to make the radio_button_tag do the same: This didn't work for me, my database doesn't flag as either false or true.I think the problem lies in the params of the ""send_to_data"". Unlike the ""purchase_date"" it isn't finding the object (product). Is there a way to map it to the object like the purchase date does? <code>  class Product < ActiveRecord::Base attr_accessible :purchase_date, :send_to_dataend <%= form_tag create_multiple_products_path, :method => :post do %> <%= date_select(""product"", ""purchase_date"") %> <%= radio_button_tag(:send_to_data, 1) %> <%= radio_button_tag(:send_to_data, 0) %> <% @products.each_with_index do |product, index| %> <%= fields_for ""products[#{index}]"", product do |up| %> <%= render ""fields"", :f => up %> <% end %> <% end %> <%= submit_tag ""Done"" %><% end %> {""product""=>{""purchase_date(2i)""=>""12"", ""purchase_date(3i)""=>""11"", ""purchase_date(1i)""=>""2011""},""send_to_data""=>""1"", ""products""=>{""0""=>{""product_name""=>""Test"", ""price""=>""23"", ""product_store""=>""13"", ""exact_url""=>""""},""1""=>{""product_name""=>"""", ""price""=>"""", ""product_store""=>"""", ""exact_url""=>""""},""2""=>{""product_name""=>"""", ""price""=>"""", ""product_store""=>"""", ""exact_url""=>""""},""3""=>{""product_name""=>"""", ""price""=>"""", ""product_store""=>"""", ""exact_url""=>""""},""4""=>{""product_name""=>"""", ""price""=>"""", ""product_store""=>"""", ""exact_url""=>""""}}, ""commit""=>""Done""}",How to pass an object in a radio button tag?
How to pass an object for radio_button_tag?," For my form I am using my Product model: On my form I have the :purchase_date working correctly when I create multiple products but also want to make the radio_button_tag do the same: This didn't work for me, my database doesn't flag as either false or true.I think the problem lies in the params of the ""send_to_data"". Unlike the ""purchase_date"" it isn't finding the object (product). Is there a way to map it to the object like the purchase date does? <code>  class Product < ActiveRecord::Base attr_accessible :purchase_date, :send_to_dataend <%= form_tag create_multiple_products_path, :method => :post do %> <%= date_select(""product"", ""purchase_date"") %> <%= radio_button_tag(:send_to_data, 1) %> <%= radio_button_tag(:send_to_data, 0) %> <% @products.each_with_index do |product, index| %> <%= fields_for ""products[#{index}]"", product do |up| %> <%= render ""fields"", :f => up %> <% end %> <% end %> <%= submit_tag ""Done"" %><% end %> {""product""=>{""purchase_date(2i)""=>""12"", ""purchase_date(3i)""=>""11"", ""purchase_date(1i)""=>""2011""},""send_to_data""=>""1"", ""products""=>{""0""=>{""product_name""=>""Test"", ""price""=>""23"", ""product_store""=>""13"", ""exact_url""=>""""},""1""=>{""product_name""=>"""", ""price""=>"""", ""product_store""=>"""", ""exact_url""=>""""},""2""=>{""product_name""=>"""", ""price""=>"""", ""product_store""=>"""", ""exact_url""=>""""},""3""=>{""product_name""=>"""", ""price""=>"""", ""product_store""=>"""", ""exact_url""=>""""},""4""=>{""product_name""=>"""", ""price""=>"""", ""product_store""=>"""", ""exact_url""=>""""}}, ""commit""=>""Done""}",How to pass an object in a radio button tag?
Radio button tag not working?," For my form I am using my Product model: On my form I have the :purchase_date working correctly when I create multiple products but also want to make the radio_button_tag do the same: This didn't work for me, my database doesn't flag as either false or true.I think the problem lies in the params of the ""send_to_data"". Unlike the ""purchase_date"" it isn't finding the object (product). Is there a way to map it to the object like the purchase date does? <code>  class Product < ActiveRecord::Base attr_accessible :purchase_date, :send_to_dataend <%= form_tag create_multiple_products_path, :method => :post do %> <%= date_select(""product"", ""purchase_date"") %> <%= radio_button_tag(:send_to_data, 1) %> <%= radio_button_tag(:send_to_data, 0) %> <% @products.each_with_index do |product, index| %> <%= fields_for ""products[#{index}]"", product do |up| %> <%= render ""fields"", :f => up %> <% end %> <% end %> <%= submit_tag ""Done"" %><% end %> {""product""=>{""purchase_date(2i)""=>""12"", ""purchase_date(3i)""=>""11"", ""purchase_date(1i)""=>""2011""},""send_to_data""=>""1"", ""products""=>{""0""=>{""product_name""=>""Test"", ""price""=>""23"", ""product_store""=>""13"", ""exact_url""=>""""},""1""=>{""product_name""=>"""", ""price""=>"""", ""product_store""=>"""", ""exact_url""=>""""},""2""=>{""product_name""=>"""", ""price""=>"""", ""product_store""=>"""", ""exact_url""=>""""},""3""=>{""product_name""=>"""", ""price""=>"""", ""product_store""=>"""", ""exact_url""=>""""},""4""=>{""product_name""=>"""", ""price""=>"""", ""product_store""=>"""", ""exact_url""=>""""}}, ""commit""=>""Done""}",How to pass an object in a radio button tag?
How to pass an object in a radio button tag?," For my form I am using my Product model: On my form I have the :purchase_date working correctly when I create multiple products but also want to make the radio_button_tag do the same: This didn't work for me, my database doesn't flag as either false or true.I think the problem lies in the params of the ""send_to_data"". Unlike the ""purchase_date"" it isn't finding the object (product). Is there a way to map it to the object like the purchase date does? <code>  class Product < ActiveRecord::Base attr_accessible :purchase_date, :send_to_dataend <%= form_tag create_multiple_products_path, :method => :post do %> <%= date_select(""product"", ""purchase_date"") %> <%= radio_button_tag(:send_to_data, 1) %> <%= radio_button_tag(:send_to_data, 0) %> <% @products.each_with_index do |product, index| %> <%= fields_for ""products[#{index}]"", product do |up| %> <%= render ""fields"", :f => up %> <% end %> <% end %> <%= submit_tag ""Done"" %><% end %> {""product""=>{""purchase_date(2i)""=>""12"", ""purchase_date(3i)""=>""11"", ""purchase_date(1i)""=>""2011""},""send_to_data""=>""1"", ""products""=>{""0""=>{""product_name""=>""Test"", ""price""=>""23"", ""product_store""=>""13"", ""exact_url""=>""""},""1""=>{""product_name""=>"""", ""price""=>"""", ""product_store""=>"""", ""exact_url""=>""""},""2""=>{""product_name""=>"""", ""price""=>"""", ""product_store""=>"""", ""exact_url""=>""""},""3""=>{""product_name""=>"""", ""price""=>"""", ""product_store""=>"""", ""exact_url""=>""""},""4""=>{""product_name""=>"""", ""price""=>"""", ""product_store""=>"""", ""exact_url""=>""""}}, ""commit""=>""Done""}",How to pass an object in a radio button tag?
How to pass a model in a radio button tag?," For my form I am using my Product model: On my form I have the :purchase_date working correctly when I create multiple products but also want to make the radio_button_tag do the same: This didn't work for me, my database doesn't flag as either false or true.I think the problem lies in the params of the ""send_to_data"". Unlike the ""purchase_date"" it isn't finding the object (product). Is there a way to map it to the object like the purchase date does? <code>  class Product < ActiveRecord::Base attr_accessible :purchase_date, :send_to_dataend <%= form_tag create_multiple_products_path, :method => :post do %> <%= date_select(""product"", ""purchase_date"") %> <%= radio_button_tag(:send_to_data, 1) %> <%= radio_button_tag(:send_to_data, 0) %> <% @products.each_with_index do |product, index| %> <%= fields_for ""products[#{index}]"", product do |up| %> <%= render ""fields"", :f => up %> <% end %> <% end %> <%= submit_tag ""Done"" %><% end %> {""product""=>{""purchase_date(2i)""=>""12"", ""purchase_date(3i)""=>""11"", ""purchase_date(1i)""=>""2011""},""send_to_data""=>""1"", ""products""=>{""0""=>{""product_name""=>""Test"", ""price""=>""23"", ""product_store""=>""13"", ""exact_url""=>""""},""1""=>{""product_name""=>"""", ""price""=>"""", ""product_store""=>"""", ""exact_url""=>""""},""2""=>{""product_name""=>"""", ""price""=>"""", ""product_store""=>"""", ""exact_url""=>""""},""3""=>{""product_name""=>"""", ""price""=>"""", ""product_store""=>"""", ""exact_url""=>""""},""4""=>{""product_name""=>"""", ""price""=>"""", ""product_store""=>"""", ""exact_url""=>""""}}, ""commit""=>""Done""}",How to pass an object in a radio button tag?
"How to ""require"" a file from the current working dir"," How do I require a file from the current folder?I have a file called sql_parser.rb that contains a class. I want to include this in another file also in the same folder, so I used: That fails when I run from that folder: I tried using IRB in the folder where this file exists and requiring it from there, but had the same issue. <code>  require 'sql_parser' LoadError: no such file to load -- sql_parser","Ruby: how to ""require"" a file from the current working dir?"
"How can I ""require"" a file from the current working dir?"," How do I require a file from the current folder?I have a file called sql_parser.rb that contains a class. I want to include this in another file also in the same folder, so I used: That fails when I run from that folder: I tried using IRB in the folder where this file exists and requiring it from there, but had the same issue. <code>  require 'sql_parser' LoadError: no such file to load -- sql_parser","Ruby: how to ""require"" a file from the current working dir?"
"In ruby, how can I ""require"" a file from the current working dir?"," How do I require a file from the current folder?I have a file called sql_parser.rb that contains a class. I want to include this in another file also in the same folder, so I used: That fails when I run from that folder: I tried using IRB in the folder where this file exists and requiring it from there, but had the same issue. <code>  require 'sql_parser' LoadError: no such file to load -- sql_parser","Ruby: how to ""require"" a file from the current working dir?"
"Why the hitting left arrow gives me ""^[[D"" in irb"," I'm using Ubuntu Server 10 lucid, ruby 1.9.2-p0. In irb, the left arrow shows ^[[D. Any idea? <code> ","Why does hitting the left arrow in irb give me ""^[[D""?"
Rails app as an LDAP server?," I'm working on an in-house Rails app, which is (among other things) a CRM app so it contains names, addresses etc., for customers and other contacts.A neat feature would to allow these contacts to be fetched/searched over by clients such as email programs and address book apps (i.e. just simple read-only access).The idea would be to use LDAP or CardDAV for this, but I haven't been able to much (recent) info on how to achieve it.For CardDAV, I've found basically nothing.For LDAP, I've found plenty of LDAP client gems and plugins, but only a few LDAP server implementations. What I've found so far is the plain Ruby LDAP server and LDAP-ActiveRecord-gateway, which is built on top of the former.The latter sounds like it'd fit the ticket, but it explicitly says ""Deprecated without replacement"" (in June of this year). It might still work, but I can't say I'm too keen on using it, now that it's been abandoned.So I was wondering if there's anything more recent out there? Is there some automagical gem or plugin I can use? Or some clues, hints, or tutorials I can dig into? While I'm not above writing everything myself, I'd rather avoid that. <code> ",Rails app as an LDAP or CardDAV server?
Rails assignment notations key: :value vs. :key => :value," Is there any difference between :key => ""value"" (hashrocket) and key: ""value"" (Ruby 1.9) notations?If not, then I would like to use key: ""value"" notation. Is there a gem that helps me to convert from :x => to x: notations? <code> ","Is there any difference between the `:key => ""value""` and `key: ""value""` hash notations?"
"Is there any difference between `:key => ""value""` and `key: ""value""` assignments?"," Is there any difference between :key => ""value"" (hashrocket) and key: ""value"" (Ruby 1.9) notations?If not, then I would like to use key: ""value"" notation. Is there a gem that helps me to convert from :x => to x: notations? <code> ","Is there any difference between the `:key => ""value""` and `key: ""value""` hash notations?"
"Is there any difference between the `:key => ""value""` and `key: ""value""` notations?"," Is there any difference between :key => ""value"" (hashrocket) and key: ""value"" (Ruby 1.9) notations?If not, then I would like to use key: ""value"" notation. Is there a gem that helps me to convert from :x => to x: notations? <code> ","Is there any difference between the `:key => ""value""` and `key: ""value""` hash notations?"
(Ruby) Instance variable still references after 'dup'," I have an object of a class, and I want to duplicate it with dup. One of the instance variables is an array, and it seems to be referencing it. I thought dup actually created a DUPLICATE.Here's my IRB session: I would expect a to be unchanged, because dup creates a whole new variable, not reference. Also note that if you were to replace [1,2,3] with a scalar in G::initialize, dup will not reference it. <code>  irb(main):094:0> class Girb(main):095:1> attr_accessor :ivirb(main):096:1> def initializeirb(main):097:2> @iv = [1,2,3]irb(main):098:2> endirb(main):099:1> end=> nilirb(main):100:0> a=G.new=> #<G:0x27331f8 @iv=[1, 2, 3]>irb(main):101:0> b=a.dup=> #<G:0x20e4730 @iv=[1, 2, 3]>irb(main):103:0> b.iv<<4=> [1, 2, 3, 4]irb(main):104:0> a=> #<G:0x27331f8 @iv=[1, 2, 3, 4]",Instance variable still references after 'dup'
Stream output of child process in ruby, I want to be able to stream the output of a child process in Rubye.g. I want to see the ping responses immediately; I don't want to wait for the process to complete. <code>  p `ping google.com`,Stream output of child process in Ruby
Ruby alias method chain undefined method," For some reason my alias_method_chain doesn't want to work and I have no idea why. Can anyone explain to me why the following won't work? <code>  [2] pry(main)> Client.respond_to? :mapping=> true[3] pry(main)> Client.alias_method_chain :mapping, :safetyNameError: undefined method `mapping' for class `Client'",Alias method chain undefined method
Workaround for Stack Overflow in Ruby recursion?," Is there any workaround for Stack Overflow errors in recursive functions in Ruby?Say, for example, I have this block: if I call countUpTo(1, 10000), I get an error: stack level too deep (SystemStackError).It appears to break at 8187. Is there some function that I can call telling Ruby to ignore the size of stacks, or a way to increase the maximum stack size? <code>  def countUpTo(current, final) puts current return nil if current == final countUpTo(current+1, final)end","Is there a workaround for ""stack level too deep"" errors in recursive routines?"
Iterate over an deeply nested level of hashes in Ruby," So I have a hash, and for each level of the hash, I want to store its key and value. The problem is, a value can be another hash array. Furthermore, that hash can contain key value pairs where the value is again another hash array, etc, etc. Also, I won't know how deeply nested each hash will be. To give an example: ..And so on. What I want to do is save each key, value pair and the id of its parent. I figure this will probably be done recursively, I'm just unsure how because I'm unfamiliar with recursive functions. I know how to iterate through the data normally: And so I'm guessing the recursive call will be something like this: This is untested, and I'm still unsure how to incorporate saving the parent ids regardless. <code>  { :key1 => 'value1', :key2 => 'value2', :key3 => { :key4 => 'value4', :key5 => 'value5' }, :key6 => { :key7 => 'value7', :key8 => { :key9 => 'value9' } } } myHash.each {|key, value| ...Do something with the key and value ... } def save_pair (myHash) myHash.each {|key, value| if(value.class != Hash) ? Pair.create(key, value) : save_pair(value) }end",Iterate over a deeply nested level of hashes in Ruby
Message/logging from Rack," How can I stop Rack Thin from returning initial messages of the following type? >> Thin web server (v1.3.1 codename Triple Espresso) >> Maximum connections set to 1024 >> istening on 0.0.0.0:3000, CTRL+C to stop I am using it like this: <code>  Rack::Handler::Thin.run(Rack::Builder.new do map(""/resource/""){run(Rack::File.new(""/""))} map(""/"") do run(->env{ h = Rack::Utils.parse_nested_query(env[""QUERY_STRING""]) [200, {},[routine_to_generate_dynamic_content(h)]] }) endend, Port: 3000)",Message/logging from Thin
"Given a URL, how to return just the domain"," Given URLs like: Using Ruby/Rails, how can I return back just the domain? No protocol, no slashes, just the subdomain if it's not www, and the domain, and ext? <code>  http://online.wsj.com/http://online.wsj.com/article/SB10001424052970204409004577158764211274708.htmlhttp://www.techcrunch.com/2012/01/13/techcrunch-coo/ online.wsj.comonline.wsj.comtechcrunch.com","Given a URL, how can I get just the domain?"
multiple level nesting in YAML," I'm trying to use YAML to create list of all stored procs used in an application and from where they are called. I envisioned something like below but I think YAML does not allow multiple level nesting. Is there a way to do this in YAML and if not, what other alternatives are there? <code>  access_log: stored_proc: getsomething uses: usedin: some->bread->crumb usedin: something else here stored_proc: anothersp uses: usedin: blahblahreporting: stored_proc: reportingsp uses: usedin: breadcrumb",Multiple level nesting in YAML
removing html tags from string," I have a string which contains some HTML encoded characters and I want to remove them: <code>  ""&lt;div&gt;Hi All,&lt;/div&gt;&lt;div class=\""paragraph_break\""&gt;&lt; /&gt;&lt;/div&gt;&lt;div&gt;Starting today we are initiating PoLS.&lt;/div&gt;&lt;div class=\""paragraph_break\""&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;Please use the following communication protocols:&lt;br /&gt;&lt;/div&gt;&lt;div&gt;1. Task Breakup and allocation - Gravity&lt;br /&gt;&lt;/div&gt;&lt;div&gt;2. All mail communications - BC messages&lt;br /&gt;&lt;/div&gt;&lt;div&gt;3. Reports on PoC / Spikes: Writeboard&lt;br /&gt;&lt;/div&gt;&lt;div&gt;4. Non story related tasks: BC To-Do&lt;br /&gt;&lt;/div&gt;&lt;div&gt;5. All UI and HTML will communicated to you through BC.&lt;br /&gt;&lt;/div&gt;&lt;div&gt;6. For File sharing, we'll be using Dropbox.&lt;br /&gt;&lt;/div&gt;&lt;div&gt;7. Use Skype for lighter and generic desicussions. However, in case you need any approvals, data for later reference, etc, then please use BC. PoLS conversation has been created on skype.&lt;/div&gt;&lt;div class=\""paragraph_break\""&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;You'll have been given necessary accesses to all these portals. Please start using them judiciously.&lt;/div&gt;&lt;div class=\""paragraph_break\""&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;All the best!&lt;/div&gt;&lt;div class=\""paragraph_break\""&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;Thanks,&lt;br /&gt;&lt;/div&gt;&lt;div&gt;Saurav&lt;br /&gt;&lt;/div&gt;""",How do I remove HTML encoded characters from a string?
Author archieve pages in Jekyll," I'm trying to make a multiple author blog with Jekyll on Github pages. I added authors array field to _config.yml and I can use that data on posts template._config.yml: posts.html Now I want to make an author archive page with a url like /authors/muratcorlu/ (i.e. listing posts authored by muratcorlu), but I don't know how can I get author name from url. <code>  authors: muratcorlu: display_name: Murat Corlu avatar: 2906955ae59c795275979d3782d7bfca {% assign author = site.authors[page.author] %}<p>Author: {{ author.display_name }}</p>",Author archive pages in Jekyll
"Converting String ""2"" into 2.5"," Right now I'm building a small app that imports data from a spreadsheet and due to the nature of the original entry, there is a string being read in that has values such as 8, 2, etc.My goal with a simple function is to convert 2 into float 2.5, for example.I've tried the .to_f method but that has left me with a weird value of 2.02.Any insight or suggestions here would be very much appreciated! <code> ","Converting String ""2"" (two and a half) into 2.5"
Better way of formatting numbers?," I want to put in a space at every third character when formatting a number. According to this spec: and I came up with this piece of code that does the job So my question is if this was the best way to do it. I suspect that there may be a regex way around it but I am not sure I will like the readability of that. (On the other hand - the %03.f magic is not very readable either....) <code>  it ""should format an amount"" do spaces_on( 1202003 ).should == ""1 202 003"" end def spaces_on amount thousands = amount / 1000 remainder = amount % 1000 if thousands == 0 ""#{remainder}"" else zero_padded_remainder = '%03.f' % remainder ""#{spaces_on thousands} #{zero_padded_remainder}"" end end",Formatting a number to split at every third digit
RUBY_VERSION from IRB," I am trying to get the current ruby version from IRB but its giving me this error: ruby -v shows ruby 1.9.3p0 (2011-10-30 revision 33570) [x86_64-darwin11.2.0]I am using Mac OS X LionUPDATE:Actually, it doesn't run anything at all. UPDATE # 2: (For the Tin Man)Using /usr/bin/irb, I get  <code>  >> RUBY_VERSIONNoMethodError: undefined method `write' for nil:NilClass from /usr/local/lib/ruby/1.9.1/irb.rb:311:in `printf' from /usr/local/lib/ruby/1.9.1/irb.rb:311:in `output_value' from /usr/local/lib/ruby/1.9.1/irb.rb:160:in `block (2 levels) in eval_input' from /usr/local/lib/ruby/1.9.1/irb.rb:273:in `signal_status' from /usr/local/lib/ruby/1.9.1/irb.rb:156:in `block in eval_input' from /usr/local/lib/ruby/1.9.1/irb/ruby-lex.rb:243:in `block (2 levels) in each_top_level_statement' from /usr/local/lib/ruby/1.9.1/irb/ruby-lex.rb:229:in `loop' from /usr/local/lib/ruby/1.9.1/irb/ruby-lex.rb:229:in `block in each_top_level_statement' from /usr/local/lib/ruby/1.9.1/irb/ruby-lex.rb:228:in `catch' from /usr/local/lib/ruby/1.9.1/irb/ruby-lex.rb:228:in `each_top_level_statement' from /usr/local/lib/ruby/1.9.1/irb.rb:155:in `eval_input' from /usr/local/lib/ruby/1.9.1/irb/ext/multi-irb.rb:166:in `block (2 levels) in irb' from /usr/local/lib/ruby/1.9.1/irb/ext/multi-irb.rb:165:in `catch' from /usr/local/lib/ruby/1.9.1/irb/ext/multi-irb.rb:165:in `block in irb'Maybe IRB bug! >> a = 'Hello, World!'NoMethodError: undefined method `write' for nil:NilClass from /usr/local/lib/ruby/1.9.1/irb.rb:311:in `printf' from /usr/local/lib/ruby/1.9.1/irb.rb:311:in `output_value' from /usr/local/lib/ruby/1.9.1/irb.rb:160:in `block (2 levels) in eval_input' from /usr/local/lib/ruby/1.9.1/irb.rb:273:in `signal_status' from /usr/local/lib/ruby/1.9.1/irb.rb:156:in `block in eval_input' from /usr/local/lib/ruby/1.9.1/irb/ruby-lex.rb:243:in `block (2 levels) in each_top_level_statement' from /usr/local/lib/ruby/1.9.1/irb/ruby-lex.rb:229:in `loop' from /usr/local/lib/ruby/1.9.1/irb/ruby-lex.rb:229:in `block in each_top_level_statement' from /usr/local/lib/ruby/1.9.1/irb/ruby-lex.rb:228:in `catch' from /usr/local/lib/ruby/1.9.1/irb/ruby-lex.rb:228:in `each_top_level_statement' from /usr/local/lib/ruby/1.9.1/irb.rb:155:in `eval_input' from /usr/local/lib/ruby/1.9.1/irb/ext/multi-irb.rb:166:in `block (2 levels) in irb' from /usr/local/lib/ruby/1.9.1/irb/ext/multi-irb.rb:165:in `catch' from /usr/local/lib/ruby/1.9.1/irb/ext/multi-irb.rb:165:in `block in irb'Maybe IRB bug! >> 5+5NoMethodError: undefined method `write' for nil:NilClass from /System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/irb.rb:310:in `printf' from /System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/irb.rb:310:in `output_value' from /System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/irb.rb:159:in `eval_input' from /System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/irb.rb:271:in `signal_status' from /System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/irb.rb:155:in `eval_input' from /System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/irb/ruby-lex.rb:244:in `each_top_level_statement' from /System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/irb/ruby-lex.rb:230:in `loop' from /System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/irb/ruby-lex.rb:230:in `each_top_level_statement' from /System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/irb/ruby-lex.rb:229:in `catch' from /System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/irb/ruby-lex.rb:229:in `each_top_level_statement' from /System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/irb.rb:154:in `eval_input' from /System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/irb.rb:71:in `start' from /System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/irb.rb:70:in `catch' from /System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/irb.rb:70:in `start' from /usr/bin/irb:13Maybe IRB bug!!","All commands in irb giving ""NoMethodError: undefined method `write' for nil:NilClass"""
How do I capture the output of a shell command in pry?," I'm using pry and I want to capture, and work with output of a shell command.For example, If I run I want to get the list of files into an array that I can work with in Ruby.How can I do this? <code>  pry(main)> .ls",How do I capture the output of a pry shell command?
Going nuts trying to get cucumber/aruba to work," In an effort to use Cucumber for a command-line script, I've installed the aruba gem as per the instructions provided. It's in my Gemfile, I can verify that the correct version is installed and I've included in 'features/env.rb'In order to ensure it works, I wrote the following scenario: assuming the thing should fail.It does fail, but it fails for the wrong reasons: Anyone have any ideas why this isn't working? This seems to be very basic aruba behavior. <code>  require 'aruba/cucumber' @announceScenario: Testing cucumber/aruba Given a blank slateThen the output from ""ls -la"" should contain ""drw"" @announceScenario: Testing cucumber/aruba Given a blank slate Then the output from ""ls -la"" should contain ""drw"" You have a nil object when you didn't expect it! You might have expected an instance of Array. The error occurred while evaluating nil.[] (NoMethodError) features/dataloader.feature:9:in `Then the output from ""ls -la"" should contain ""drw""'","Checking output from ""command"" should contain unexpected crash with NilClass"
"RUBY, case expression different in 1.9?"," This is an example code from a book. I assume it's for Ruby 1.8. I ran it on Ruby 1.9, and got this error message: How should I change this? <code>  birthyear = 1986 generation = case birthyear when 1946...1963: ""Baby boomer"" when 1964...1976: ""Generation X"" when 1977...2012: ""new generation"" else nil end puts generation Untitled 2.rb:12: syntax error, unexpected ':', expecting keyword_then or ',' or ';' or '\n' when 1946...1963: ""Baby boomer"" ^Untitled 2.rb:13: syntax error, unexpected keyword_when, expecting $end when 1964...1976: ""Generation X""",Case expression different in Ruby 1.9?
Ruby - Fastest way to find a string into an array of string," The script has to verify if one predefined IP is present in a big array of IPs. Currently I code that function like this (saying that ""ips"" is my array of IP and ""ip"" is the predefined ip) Is there a faster way to do the same thing?Edit : I might have wrongly expressed myself. I can do array.include? but what I'd like to know is : Is array.include? the method that will give me the fastest result? <code>  ips.each do |existsip| if ip == existsip puts ""ip exists"" return 1 endendputs ""ip doesn't exist""return nil",Fastest way to find a String into an array of string
Requesting a secure http stream with basic auth with ruby - Yajl::HttpStream::HttpError Code 200 expected got 0," I'm attempting to consume the Gnip PowerTrack API which requires me to connect to an HTTPS stream of JSON with basic auth. I feel like this should be fairly trivial so I'm hoping some rubyist who is smarter than me can point out my obvious mistake.Here's relevant parts my ruby 1.9.3 code: The stream connects (My Gnip dashboard repors a connection) but then just buffers and never outputs anything. In fact, it seems like it never enters the s.stream do.. block. Note that this is a GZip encoded stream. Note that this works: EDIT: I'm sure this is kinda implicit, but I can't give out any login creds or the actual URL, so don't ask ;)EDIT #2: yajl-ruby would probably work if I could figure out how to encode credentials for the URL (simple URL encoding doesn't seem to work as I fail authentication with Gnip).EDIT #3: @rweald found that em-http does not support streaming gzip, I've created a GitHub issue here. EDIT #4: I have forked and fixed this in em-http-request, you can point at my fork if you want to use em-http this way. The patch has been merged into the maintainer's repo and will be working in the next release.EDIT #5: My fixes have been published in em-http-request 1.0.3, so this should no longer be an issue. <code>  require 'eventmachine'require 'em-http'require 'json'usage = ""#{$0} <user> <password>""abort usage unless user = ARGV.shiftabort usage unless password = ARGV.shiftGNIP_STREAMING_URL = 'https://stream.gnip.com:443/foo/bar/prod.json'http = EM::HttpRequest.new(GNIP_STREAMING_URL)EventMachine.run do s = http.get(:head => { 'Authorization' => [user, password], 'accept' => 'application/json', 'Accept-Encoding' => 'gzip,deflate' }, :keepalive => true, :connect_timeout => 0, :inactivity_timeout => 0) buffer = """" s.stream do |chunk| buffer << chunk while line = buffer.slice!(/.+\r?\n/) puts JSON.parse(line) end endend curl --compressed -uusername $GNIP_STREAMING_URL",em-http stream with basic auth and gzip hangs
Where and how is the _ (underscore) variable specified in Ruby?," Most are aware of _s special meaning in IRB as a holder for last return value, but that is not what I'm asking about here.Instead, Im asking about _ when used as a variable name in plain-old-Ruby-code. Here it appears to have special behavior, akin to a don't care variable ( la Prolog). Here are some useful examples illustrating its unique behavior: These were all run in Ruby directly (with putss added in)not IRBto avoid conflicting with its additional functionality.This is all a result of my own experimentation though, as I cannot find any documentation on this behavior anywhere (admittedly it's not the easiest thing to search for). Ultimately, I'm curious how all of this works internally so I can better understand exactly what is special about _. So Im asking for references to documentation, and, preferably, the Ruby source code (and perhaps RubySpec) that reveal how _ behaves in Ruby.Note: most of this arose out of this discussion with @Niklas B. <code>  lambda { |x, x| 42 } # SyntaxError: duplicated argument namelambda { |_, _| 42 }.call(4, 2) # => 42lambda { |_, _| 42 }.call(_, _) # NameError: undefined local variable or method `_'lambda { |_| _ + 1 }.call(42) # => 43lambda { |_, _| _ }.call(4, 2) # 1.8.7: => 2 # 1.9.3: => 4_ = 42_ * 100 # => 4200_, _ = 4, 2; _ # => 2",Where and how is the _ (underscore) variable specified?
Ruby split by comma ignoring trailing space," I need to split a string into two variables. For example, the following would work fine: I would like to split user input, which might have an optional space after the comma. How do I write it so a space after the comma is absorbed? I need to correctly handle all these possibilities: <code>  first,second = ""red,blue"".split(',') ""red,blue"" # first=""red"" second=""blue""""red, blue"" # first=""red"" second=""blue""""red,dark blue"" # first=""red"" second=""dark blue""""red, light blue"" # first=""red"" second=""light blue""",Ruby split by comma absorbing trailing space
Rails: ERROR undefined method `join' for nil:NilClass," I have this code in my ""index.html.erb"" file in my project: When I go to this url: I'm getting this error: Any idea whats going on? Here is the full call stack: Model for the app is file called business.rb it contains this: <code>  <h1>Listing businesses</h1><table><tr> <th>Index</th> <th>Name</th> <th>Phone Number</th> <th>Suite</th> <th>Address</th> <th>City</th><th>Province</th><th>Postal Code</th><th>Fax</th> <th>Latitude</th> <th>Longitude</th> <th>Website</th> </tr><% count = 0 %><% @businesses.each do |business| %><!--<%=business.inspect %> <br> <br>--><%count = count.to_i + 1 %> <tr> <td><%= count %></td> <td><%= business.name %></td> <td><%= business.phone %></td> <td><%= business.suite %></td> <td><%= business.address %></td> <td><%= business.city %></td> <td><%= business.province %></td> <td><%= business.phone %></td> <td><%= business.postalcode %></td> <td><%= business.fax %></td> <td><%= business.latitude %></td> <td><%= business.longitude %></td> <td><%= business.website %></td> <td><%= link_to 'Show', business %></td> <td><%= link_to 'Edit', edit_business_path(business) %></td> <td><%= link_to 'Destroy', user, confirm: 'Are you sure?', method: :delete %></td></tr><% end %></table> http://localhost:3000/businesses/ NoMethodError in Businesses#indexShowing /Users/AM/Documents/RailsWS/cmdLineWS/Directory/app/views/businesses/index.html.erb where line #37 raised:undefined method `join' for nil:NilClassExtracted source (around line #37):34: <td><%= business.latitude %></td>35: <td><%= business.longitude %></td>36: <td><%= business.website %></td>37: <td><%= link_to 'Show', business %></td>38: <td><%= link_to 'Edit', edit_business_path(business) %></td>39: <td><%= link_to 'Destroy', user, confirm: 'Are you sure?', method: :delete %></td>40: </tr>Rails.root: /Users/AM/Documents/RailsWS/cmdLineWS/Directory activemodel (3.2.1) lib/active_model/conversion.rb:52:in `to_param'actionpack (3.2.1) lib/action_dispatch/routing/route_set.rb:417:in `block in <class:Generator>'journey (1.0.3) lib/journey/formatter.rb:31:in `call'journey (1.0.3) lib/journey/formatter.rb:31:in `block (2 levels) in generate'journey (1.0.3) lib/journey/formatter.rb:30:in `each'journey (1.0.3) lib/journey/formatter.rb:30:in `block in generate'journey (1.0.3) lib/journey/formatter.rb:58:in `match_route'journey (1.0.3) lib/journey/formatter.rb:16:in `generate'actionpack (3.2.1) lib/action_dispatch/routing/route_set.rb:510:in `generate'actionpack (3.2.1) lib/action_dispatch/routing/route_set.rb:551:in `generate'actionpack (3.2.1) lib/action_dispatch/routing/route_set.rb:576:in `url_for'actionpack (3.2.1) lib/action_dispatch/routing/url_for.rb:148:in `url_for'actionpack (3.2.1) lib/action_view/helpers/url_helper.rb:107:in `url_for'actionpack (3.2.1) lib/action_dispatch/routing/route_set.rb:202:in `business_path'app/views/businesses/index.html.erb:37:in `block in _app_views_businesses_index_html_erb___1138300221443858101_2152537040'app/views/businesses/index.html.erb:20:in `each'app/views/businesses/index.html.erb:20:in `_app_views_businesses_index_html_erb___1138300221443858101_2152537040'actionpack (3.2.1) lib/action_view/template.rb:143:in `block in render'activesupport (3.2.1) lib/active_support/notifications.rb:125:in `instrument'actionpack (3.2.1) lib/action_view/template.rb:141:in `render'actionpack (3.2.1) lib/action_view/renderer/template_renderer.rb:41:in `block (2 levels) in render_template'actionpack (3.2.1) lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'activesupport (3.2.1) lib/active_support/notifications.rb:123:in `block in instrument'activesupport (3.2.1) lib/active_support/notifications/instrumenter.rb:20:in `instrument'activesupport (3.2.1) lib/active_support/notifications.rb:123:in `instrument'actionpack (3.2.1) lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'actionpack (3.2.1) lib/action_view/renderer/template_renderer.rb:40:in `block in render_template'actionpack (3.2.1) lib/action_view/renderer/template_renderer.rb:48:in `render_with_layout'actionpack (3.2.1) lib/action_view/renderer/template_renderer.rb:39:in `render_template'actionpack (3.2.1) lib/action_view/renderer/template_renderer.rb:12:in `render'actionpack (3.2.1) lib/action_view/renderer/renderer.rb:36:in `render_template'actionpack (3.2.1) lib/action_view/renderer/renderer.rb:17:in `render'actionpack (3.2.1) lib/abstract_controller/rendering.rb:109:in `_render_template'actionpack (3.2.1) lib/action_controller/metal/streaming.rb:225:in `_render_template'actionpack (3.2.1) lib/abstract_controller/rendering.rb:103:in `render_to_body'actionpack (3.2.1) lib/action_controller/metal/renderers.rb:28:in `render_to_body'actionpack (3.2.1) lib/action_controller/metal/compatibility.rb:50:in `render_to_body'actionpack (3.2.1) lib/abstract_controller/rendering.rb:88:in `render'actionpack (3.2.1) lib/action_controller/metal/rendering.rb:16:in `render'actionpack (3.2.1) lib/action_controller/metal/instrumentation.rb:40:in `block (2 levels) in render'activesupport (3.2.1) lib/active_support/core_ext/benchmark.rb:5:in `block in ms'/Users/AM/.rvm/rubies/ruby-1.9.2-p290/lib/ruby/1.9.1/benchmark.rb:310:in `realtime'activesupport (3.2.1) lib/active_support/core_ext/benchmark.rb:5:in `ms'actionpack (3.2.1) lib/action_controller/metal/instrumentation.rb:40:in `block in render'actionpack (3.2.1) lib/action_controller/metal/instrumentation.rb:83:in `cleanup_view_runtime'activerecord (3.2.1) lib/active_record/railties/controller_runtime.rb:24:in `cleanup_view_runtime'actionpack (3.2.1) lib/action_controller/metal/instrumentation.rb:39:in `render'actionpack (3.2.1) lib/action_controller/metal/implicit_render.rb:10:in `default_render'actionpack (3.2.1) lib/action_controller/metal/mime_responds.rb:268:in `block in retrieve_response_from_mimes'actionpack (3.2.1) lib/action_controller/metal/mime_responds.rb:195:in `call'actionpack (3.2.1) lib/action_controller/metal/mime_responds.rb:195:in `respond_to'app/controllers/businesses_controller.rb:5:in `index'actionpack (3.2.1) lib/action_controller/metal/implicit_render.rb:4:in `send_action'actionpack (3.2.1) lib/abstract_controller/base.rb:167:in `process_action'actionpack (3.2.1) lib/action_controller/metal/rendering.rb:10:in `process_action'actionpack (3.2.1) lib/abstract_controller/callbacks.rb:18:in `block in process_action'activesupport (3.2.1) lib/active_support/callbacks.rb:414:in `_run__4378774651029744650__process_action__1974792849221574797__callbacks'activesupport (3.2.1) lib/active_support/callbacks.rb:405:in `__run_callback'activesupport (3.2.1) lib/active_support/callbacks.rb:385:in `_run_process_action_callbacks'activesupport (3.2.1) lib/active_support/callbacks.rb:81:in `run_callbacks'actionpack (3.2.1) lib/abstract_controller/callbacks.rb:17:in `process_action'actionpack (3.2.1) lib/action_controller/metal/rescue.rb:29:in `process_action'actionpack (3.2.1) lib/action_controller/metal/instrumentation.rb:30:in `block in process_action'activesupport (3.2.1) lib/active_support/notifications.rb:123:in `block in instrument'activesupport (3.2.1) lib/active_support/notifications/instrumenter.rb:20:in `instrument'activesupport (3.2.1) lib/active_support/notifications.rb:123:in `instrument'actionpack (3.2.1) lib/action_controller/metal/instrumentation.rb:29:in `process_action'actionpack (3.2.1) lib/action_controller/metal/params_wrapper.rb:205:in `process_action'activerecord (3.2.1) lib/active_record/railties/controller_runtime.rb:18:in `process_action'actionpack (3.2.1) lib/abstract_controller/base.rb:121:in `process'actionpack (3.2.1) lib/abstract_controller/rendering.rb:45:in `process'actionpack (3.2.1) lib/action_controller/metal.rb:203:in `dispatch'actionpack (3.2.1) lib/action_controller/metal/rack_delegation.rb:14:in `dispatch'actionpack (3.2.1) lib/action_controller/metal.rb:246:in `block in action'actionpack (3.2.1) lib/action_dispatch/routing/route_set.rb:66:in `call'actionpack (3.2.1) lib/action_dispatch/routing/route_set.rb:66:in `dispatch'actionpack (3.2.1) lib/action_dispatch/routing/route_set.rb:30:in `call'journey (1.0.3) lib/journey/router.rb:68:in `block in call'journey (1.0.3) lib/journey/router.rb:56:in `each'journey (1.0.3) lib/journey/router.rb:56:in `call'actionpack (3.2.1) lib/action_dispatch/routing/route_set.rb:589:in `call'actionpack (3.2.1) lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'rack (1.4.1) lib/rack/etag.rb:23:in `call'rack (1.4.1) lib/rack/conditionalget.rb:25:in `call'actionpack (3.2.1) lib/action_dispatch/middleware/head.rb:14:in `call'actionpack (3.2.1) lib/action_dispatch/middleware/params_parser.rb:21:in `call'actionpack (3.2.1) lib/action_dispatch/middleware/flash.rb:242:in `call'rack (1.4.1) lib/rack/session/abstract/id.rb:205:in `context'rack (1.4.1) lib/rack/session/abstract/id.rb:200:in `call'actionpack (3.2.1) lib/action_dispatch/middleware/cookies.rb:338:in `call'activerecord (3.2.1) lib/active_record/query_cache.rb:64:in `call'activerecord (3.2.1) lib/active_record/connection_adapters/abstract/connection_pool.rb:443:in `call'actionpack (3.2.1) lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'activesupport (3.2.1) lib/active_support/callbacks.rb:405:in `_run__539745845193235082__call__2953064504705011211__callbacks'activesupport (3.2.1) lib/active_support/callbacks.rb:405:in `__run_callback'activesupport (3.2.1) lib/active_support/callbacks.rb:385:in `_run_call_callbacks'activesupport (3.2.1) lib/active_support/callbacks.rb:81:in `run_callbacks'actionpack (3.2.1) lib/action_dispatch/middleware/callbacks.rb:27:in `call'actionpack (3.2.1) lib/action_dispatch/middleware/reloader.rb:65:in `call'actionpack (3.2.1) lib/action_dispatch/middleware/remote_ip.rb:31:in `call'actionpack (3.2.1) lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'actionpack (3.2.1) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'railties (3.2.1) lib/rails/rack/logger.rb:26:in `call_app'railties (3.2.1) lib/rails/rack/logger.rb:16:in `call'actionpack (3.2.1) lib/action_dispatch/middleware/request_id.rb:22:in `call'rack (1.4.1) lib/rack/methodoverride.rb:21:in `call'rack (1.4.1) lib/rack/runtime.rb:17:in `call'activesupport (3.2.1) lib/active_support/cache/strategy/local_cache.rb:72:in `call'rack (1.4.1) lib/rack/lock.rb:15:in `call'actionpack (3.2.1) lib/action_dispatch/middleware/static.rb:53:in `call'railties (3.2.1) lib/rails/engine.rb:479:in `call'railties (3.2.1) lib/rails/application.rb:220:in `call'rack (1.4.1) lib/rack/content_length.rb:14:in `call'railties (3.2.1) lib/rails/rack/log_tailer.rb:14:in `call'rack (1.4.1) lib/rack/handler/webrick.rb:59:in `service'/Users/AM/.rvm/rubies/ruby-1.9.2-p290/lib/ruby/1.9.1/webrick/httpserver.rb:111:in `service'/Users/AM/.rvm/rubies/ruby-1.9.2-p290/lib/ruby/1.9.1/webrick/httpserver.rb:70:in `run'/Users/AM/.rvm/rubies/ruby-1.9.2-p290/lib/ruby/1.9.1/webrick/server.rb:183:in `block in start_thread' class Business < ActiveRecord::Base establish_connection ""Listings_development""end",Why do I get a undefined method `join' for nil:NilClass error?
What is the differnce between '..' and '...'?," I've just started learning Ruby and Ruby on Rails and came across validation code that uses ranges: At first I thought the difference was in the inclusion of endpoints, but in the API docs I looked into, it didn't seem to matter whether it was .. or ...: it always included the endpoints.However, I did some testing in irb and it seemed to indicate that .. includes both endpoints, while ... only included the lower bound but not the upper one. Is this correct? <code>  validates_inclusion_of :age, :in => 21..99validates_exclusion_of :age, :in => 0...21, :message => ""Sorry, you must be over 21""",Difference between '..' (double-dot) and '...' (triple-dot) in range generation?
Can't receive JSON object with Rack ruby server," I have a very simple Ruby Rack server, like: Whenever I send a POST HTTP request to the server with an JSON object: I receive nothing. I can detect the request received but can't get the data. The results at my console for puts req.inspect is something like: How am I supposed to get the data?I tried to change that with something like: But I'm getting the following warning:  <code>  app = Proc.new do |env| req = Rack::Request.new(env).params p req.inspect [200, { 'Content-Type' => 'text/plain' }, ['Some body']]end Rack::Handler::Thin.run(app, :Port => 4001, :threaded => true) { ""session"": {""accountId"": String,""callId"": String,""from"": Object,""headers"": Object,""id"": String,""initialText"": String,""parameters"": Object,""timestamp"": String,""to"": Object,""userType"": String } } ""{}"" request = Rack::Request.new envobject = JSON.parse request.bodyputs JSON.pretty_generate(object) !! Unexpected error while processing request: can't convert StringIO into String",How to receive a JSON object with Rack
Match a string against multiple paterns," How can I match a string against multiple patterns using regular expression in ruby.I am trying to see if a string is included in an array of prefixes, This is not working but I think it demonstrates at least what I am trying to do. <code>  # example:# prefixes.include?(""Mrs. Kirsten Hess"")prefixes.include?(name) # should return true / falseprefixes = [ /Ms\.?/i, /Miss/i, /Mrs\.?/i, /Mr\.?/i, /Master/i, /Rev\.?/i, /Reverend/i, /Fr\.?/i, /Father/i, /Dr\.?/i, /Doctor/i, /Atty\.?/i, /Attorney/i, /Prof\.?/i, /Professor/i, /Hon\.?/i, /Honorable/i, /Pres\.?/i, /President/i, /Gov\.?/i, /Governor/i, /Coach/i, /Ofc\.?/i, /Officer/i, /Msgr\.?/i, /Monsignor/i, /Sr\.?/i, /Sister\.?/i, /Br\.?/i, /Brother/i, /Supt\.?/i, /Superintendent/i, /Rep\.?/i, /Representative/i, /Sen\.?/i, /Senator/i, /Amb\.?/i, /Ambassador/i, /Treas\.?/i, /Treasurer/i, /Sec\.?/i, /Secretary/i, /Pvt\.?/i, /Private/i, /Cpl\.?/i, /Corporal/i, /Sgt\.?/i, /Sargent/i, /Adm\.?/i, /Administrative/i, /Maj\.?/i, /Major/i, /Capt\.?/i, /Captain/i, /Cmdr\.?/i, /Commander/i, /Lt\.?/i, /Lieutenant/i, /^Lt Col\.?$/i, /^Lieutenant Col$/i, /Col\.?/i, /Colonel/i, /Gen\.?/i, /General/i]",Match a string against multiple patterns
How can be only max 4 objects iterated and not all? (ruby)," How can I iterate up to four objects of an array and not all? In the following code, it iterates over all objects. I need only the first four objects. Can it be done like objects=objects.slice(4), or is iteration the only way?Edit:I also need to print how many times the iteration happens, but my solution objects[0..3] (thanks to answers here) long. <code>  objects = Products.all();arr=Array.newobjects.each do |obj| arr << objendp arr i=0;arr=Array.newobjects[0..3].each do |obj| arr << obj p i; i++;end",Iterate over the first n elements of an array
Iterate over the first 4 elements of an array," How can I iterate up to four objects of an array and not all? In the following code, it iterates over all objects. I need only the first four objects. Can it be done like objects=objects.slice(4), or is iteration the only way?Edit:I also need to print how many times the iteration happens, but my solution objects[0..3] (thanks to answers here) long. <code>  objects = Products.all();arr=Array.newobjects.each do |obj| arr << objendp arr i=0;arr=Array.newobjects[0..3].each do |obj| arr << obj p i; i++;end",Iterate over the first n elements of an array
ORM with Sinatra App -- Ideal one with less issue and good performance," I am looking to add an ORM to my existing Sinatra app. I went through Datamapper, Sequel and ActiveRecord though I haven't tried ActiveRecord yet.Datamapper seems easy but I am constantly facing a issue discussed in ""What ORM to use in one process multiple db connections sinatra application?"", but was unable to understand the solution and root cause for it.Are there any suggestions to choose the appropriate and performance oriented ORM? <code> ",Adding an ORM to a Sinatra app; Is there an ideal one with less issues and good performance?
Do i need a slash in front of rails route," I have the following url structure in rails routes: Do i need a leading slash in front of ""financial-dictionary""? What will happen if i remove it? <code>  match '/financial-dictionary/:letter' => 'learning_center#dictionary', :as => :lc_dictionary",Do I need a slash in front of rails route
"How do you fix the error ""undefined method `error_messages'"" that occurs in your form_for block?"," I am getting the following error in my Rails 3.2 functional tests: ActionView::Template::Error: undefined method `error_messages' for # <ActionView::Helpers::FormBuilder:0x007ff8ad00d3b0>The view code that is creating the error: Here is the code in my controller that is calling the above view code: And here is the test I am running: Does anyone have any insight into why this error is occurring in a Rails 3.2 app?Thanks! <code>  <%= form_for [@camp, @program] do |f| %> <%= f.error_messages %> # problematic code <%= f.label :name %><% end %> render :action => ""edit"", :status => :bad_request test ""update a program with a bad request"" do put :update, :id => programs(:traditional).to_param, :program => { :min_age => ""a"" }, :camp_id => camps(123).uri assert_response :bad_requestend","Use ""error_messages"" in Rails 3.2? (raises ""undefined method"" error)"
Ruby on Rails - How to delete an element from array by value," I have an array of elements in Ruby I need to remove elements with value 3 for exampleHow do I do that? <code>  [2,4,6,3,8]",How can I delete one element from an array by value
How to delete an element from array by value," I have an array of elements in Ruby I need to remove elements with value 3 for exampleHow do I do that? <code>  [2,4,6,3,8]",How can I delete one element from an array by value
Ruby - how can I delete one element from an array by value," I have an array of elements in Ruby I need to remove elements with value 3 for exampleHow do I do that? <code>  [2,4,6,3,8]",How can I delete one element from an array by value
RVM refusing to install and giving me odd errors," I'm working off a relatively clean OS X install. I had Xcode, but removed it. When I type rvm install 1.9.3, I get: Weird things seems to be happening, like I don't have a default system. This is the first time I've tried installing Ruby (eventually trying to get to Rails), so this whole process is quite foreign to me. I've checked a couple of the logs the output mentions and most of the time RVM is looking for a file that doesnt exist (however it says it was downloaded) or a program that doesnt exist (it was trying to run ./configure and got a ""File not Found"").Can anyone shed any insight on this? I want to get my hands dirty with Rails ASAP. <code>  max-macbook:~ max$ rvm install 1.9.3 Fetching yaml-0.1.4.tar.gz to /Users/max/.rvm/archives % Total % Received % Xferd Average Speed Time Time Time Current Dload Upload Total Spent Left Speed 0 0 0 0 0 0 0 0 --:--:-- --:--:----:--:-- 0 curl: (60) SSL certificate problem, verify that the CA cert is OK. Details: error:14090086:SSL routines:SSL3_GET_SERVER_CERTIFICATE:certificate verify failed More details here: http://curl.haxx.se/docs/sslcerts.htmlcurl performs SSL certificate verification by default, using a ""bundle"" of Certificate Authority (CA) public keys (CA certs). If the default bundle file isn't adequate, you can specify an alternate file using the --cacert option. If this HTTPS server uses a certificate signed by a CA represented in the bundle, the certificate verification probably failed due to a problem with the certificate (it might be expired, or the name might not match the domain name in the URL). If you'd like to turn off curl's verification of the certificate, use the -k (or --insecure) option. There was an error, please check /Users/max/.rvm/log//*.log. Next we'll try to fetch via http. Trying ftp:// URL instead. % Total % Received % Xferd Average Speed Time Time Time Current Dload Upload Total Spent Left Speed 0 0 0 0 0 0 0 0 --:--:-- --:--:----:--:-- 0 curl: (60) SSL certificate problem, verify that the CA cert is OK. Details: error:14090086:SSL routines:SSL3_GET_SERVER_CERTIFICATE:certificate verify failed More details here: http://curl.haxx.se/docs/sslcerts.htmlcurl performs SSL certificate verification by default, using a ""bundle"" of Certificate Authority (CA) public keys (CA certs). If the default bundle file isn't adequate, you can specify an alternate file using the --cacert option. If this HTTPS server uses a certificate signed by a CA represented in the bundle, the certificate verification probably failed due to a problem with the certificate (it might be expired, or the name might not match the domain name in the URL). If you'd like to turn off curl's verification of the certificate, use the -k (or --insecure) option. There was an error, please check /Users/max/.rvm/log//*.log Extracting yaml-0.1.4.tar.gz to /Users/max/.rvm/src Error running 'tar xmzf /Users/max/.rvm/archives/yaml-0.1.4.tar.gz -C /Users/max/.rvm/src ', please read /Users/max/.rvm/log/ruby-1.9.3-p125/yaml/extract.log /Users/max/.rvm/scripts/functions/pkg: line 52: cd: /Users/max/.rvm/src/yaml-0.1.4: No such file or directory Configuring yaml in /Users/max/.rvm/src/yaml-0.1.4. Error running ' ./configure--prefix=""/Users/max/.rvm/usr"" ', please read /Users/max/.rvm/log/ruby-1.9.3-p125/yaml/configure.log Compiling yaml in /Users/max/.rvm/src/yaml-0.1.4. Error running 'make ', please read /Users/max/.rvm/log/ruby-1.9.3-p125/yaml/make.logDatabase file /Users/max/.rvm/config/packages does not exist./Users/max/.rvm/scripts/functions/build: line 28: --version: command not found Installing Ruby from source to: /Users/max/.rvm/rubies/ruby-1.9.3-p125, this may take a while depending on your cpu(s)...ruby-1.9.3-p125 - #fetching ruby-1.9.3-p125 - #downloading ruby-1.9.3-p125, this may take a while depending on your connection...",RVM refusing to install - curl SSL certificate verification failed
RVM refusing to install and giving non-existant log files?," I'm working off a relatively clean OS X install. I had Xcode, but removed it. When I type rvm install 1.9.3, I get: Weird things seems to be happening, like I don't have a default system. This is the first time I've tried installing Ruby (eventually trying to get to Rails), so this whole process is quite foreign to me. I've checked a couple of the logs the output mentions and most of the time RVM is looking for a file that doesnt exist (however it says it was downloaded) or a program that doesnt exist (it was trying to run ./configure and got a ""File not Found"").Can anyone shed any insight on this? I want to get my hands dirty with Rails ASAP. <code>  max-macbook:~ max$ rvm install 1.9.3 Fetching yaml-0.1.4.tar.gz to /Users/max/.rvm/archives % Total % Received % Xferd Average Speed Time Time Time Current Dload Upload Total Spent Left Speed 0 0 0 0 0 0 0 0 --:--:-- --:--:----:--:-- 0 curl: (60) SSL certificate problem, verify that the CA cert is OK. Details: error:14090086:SSL routines:SSL3_GET_SERVER_CERTIFICATE:certificate verify failed More details here: http://curl.haxx.se/docs/sslcerts.htmlcurl performs SSL certificate verification by default, using a ""bundle"" of Certificate Authority (CA) public keys (CA certs). If the default bundle file isn't adequate, you can specify an alternate file using the --cacert option. If this HTTPS server uses a certificate signed by a CA represented in the bundle, the certificate verification probably failed due to a problem with the certificate (it might be expired, or the name might not match the domain name in the URL). If you'd like to turn off curl's verification of the certificate, use the -k (or --insecure) option. There was an error, please check /Users/max/.rvm/log//*.log. Next we'll try to fetch via http. Trying ftp:// URL instead. % Total % Received % Xferd Average Speed Time Time Time Current Dload Upload Total Spent Left Speed 0 0 0 0 0 0 0 0 --:--:-- --:--:----:--:-- 0 curl: (60) SSL certificate problem, verify that the CA cert is OK. Details: error:14090086:SSL routines:SSL3_GET_SERVER_CERTIFICATE:certificate verify failed More details here: http://curl.haxx.se/docs/sslcerts.htmlcurl performs SSL certificate verification by default, using a ""bundle"" of Certificate Authority (CA) public keys (CA certs). If the default bundle file isn't adequate, you can specify an alternate file using the --cacert option. If this HTTPS server uses a certificate signed by a CA represented in the bundle, the certificate verification probably failed due to a problem with the certificate (it might be expired, or the name might not match the domain name in the URL). If you'd like to turn off curl's verification of the certificate, use the -k (or --insecure) option. There was an error, please check /Users/max/.rvm/log//*.log Extracting yaml-0.1.4.tar.gz to /Users/max/.rvm/src Error running 'tar xmzf /Users/max/.rvm/archives/yaml-0.1.4.tar.gz -C /Users/max/.rvm/src ', please read /Users/max/.rvm/log/ruby-1.9.3-p125/yaml/extract.log /Users/max/.rvm/scripts/functions/pkg: line 52: cd: /Users/max/.rvm/src/yaml-0.1.4: No such file or directory Configuring yaml in /Users/max/.rvm/src/yaml-0.1.4. Error running ' ./configure--prefix=""/Users/max/.rvm/usr"" ', please read /Users/max/.rvm/log/ruby-1.9.3-p125/yaml/configure.log Compiling yaml in /Users/max/.rvm/src/yaml-0.1.4. Error running 'make ', please read /Users/max/.rvm/log/ruby-1.9.3-p125/yaml/make.logDatabase file /Users/max/.rvm/config/packages does not exist./Users/max/.rvm/scripts/functions/build: line 28: --version: command not found Installing Ruby from source to: /Users/max/.rvm/rubies/ruby-1.9.3-p125, this may take a while depending on your cpu(s)...ruby-1.9.3-p125 - #fetching ruby-1.9.3-p125 - #downloading ruby-1.9.3-p125, this may take a while depending on your connection...",RVM refusing to install - curl SSL certificate verification failed
HAML formatting comments, I'm trying to generate a comment on a single line at the end of an HTML file: I have tried But this outputs it over 3 lines - I've tried But that doesn't evaluate the @server_name var - Any ideas? <code>  <!-- generated by SERVER1 --> / generated by #{@server_name} <!-- generated by SERVER1 --> / generated by #{@server_name} <!-- generated by #{@server_name} -->,Producing single-line comments with HAML?
Producing single-line comments with Haml, I'm trying to generate a comment on a single line at the end of an HTML file: I have tried But this outputs it over 3 lines - I've tried But that doesn't evaluate the @server_name var - Any ideas? <code>  <!-- generated by SERVER1 --> / generated by #{@server_name} <!-- generated by SERVER1 --> / generated by #{@server_name} <!-- generated by #{@server_name} -->,Producing single-line comments with HAML?
Ruby -- Mechanize -- Click Link," I have this: I want to click that link but I get an error when using link_to. I've tried: The error I get is:NoMethodError: undefined method `[]' for nil:NilClass <code>  <a class=""top_level_active"" href=""javascript:Submit('menu_home')"">Account Summary</a> bot.click(page.link_with(:href => /menu_home/))bot.click(page.link_with(:class => 'top_level_active'))bot.click(page.link_with(:href => /Account Summary/))",Clicking link with JavaScript in Mechanize
ruby: move one char left in console," In the console you can print ""\b"" to erase the character left of the cursor (backspace) like this How to just move one position to the left instead of erasing (left arrow)? <code>  print ""the last char is going to be erased\b"" # the last char is going to be erased",Move one character to the left in the console
Writing tests with RSpec for Redis," I have a model class that caches data in redis. The first time I call a method on the model, it computes a JSON/Hash value and stores it in Redis. Under certain circumstances I 'flush' that data and it gets recomputed on the next call.Here's the code snippet similar to the one I use to store the data in Redis: How should I unit test this code? I use RSpec and Capybara. I also use Cucumber and Capabara for integration testing if that helps. <code>  def cache_data self.data_values = data_to_cache REDIS.set(redis_key,ActiveSupport::JSON.encode(self.data_values)) REDIS.get(redis_key) enddef data_to_cache # generate a hash of values to returnend",Writing tests with RSpec for Redis with Rails
File upload Base64 encoded string in PaperClip using Rails 3," I have at base64 encoded string of a image file. I need to save it using Paper ClipMy Controller code is In my user model Currently the file is saved as a text file(stringio.txt). But when I change the extension to JPG I can view it as image. How can I name the image correctly using StringIO.I am having rails 3.2, ruby 1.9.2, paperclip 3.0.3  <code>  @driver = User.find(6) encoded_file = Base64.encode64(File.open('/pjt_path/public/test.jpg').read) decoded_file = Base64.decode64(encoded_file) @driver.profile_pic = StringIO.open(decoded_file) @driver.save has_attached_file :profile_pic, :styles => { :medium => ""300x300>"", :thumb => ""100x100>"" }, :default_url => '/icon.jpg'",File upload Base64 encoded string in PaperClip using Rails
What are the restrictions for function names in Ruby?," For example, I found the method name bundler? in the following snippet, and don't know whether the ? character is a specialized keyword or just part of the method name. <code>  # This is a predicate useful for the doc:guides task of applications.def bundler? # Note that rake sets the cwd to the one that contains the Rakefile # being executed. File.exists?('Gemfile')end",What are the restrictions for method names in Ruby?
Ruby: checking whether a collection is a subset of another collection," How can I check whether one array is a subset of another array, regardless of the order of elements? <code>  a1 = [3, 6, 4]a2 = [1, 2, 3, 4, 5, 6, 7, 8, 9]...?a1 is a subset of a2",Check if an array is subset of another array in Ruby
Check if collection is subset of another collection," How can I check whether one array is a subset of another array, regardless of the order of elements? <code>  a1 = [3, 6, 4]a2 = [1, 2, 3, 4, 5, 6, 7, 8, 9]...?a1 is a subset of a2",Check if an array is subset of another array in Ruby
Ruby: How can i convert a array data to hash and to json format?," I am very new to Ruby array and hash manipulation.How can I do this simple transformation? desired output in json: Does anyone have any hints? <code>  array = [#<struct id=1, car='red'>, #<struct id=2, car='yellow'>, #<struct id=3, car='green'>] [{id : 1, car : 'red'} , {id:2, car :'yellow'} ,{id:3 , car: ""green""}]",Ruby: How can I convert an array of data to hash and to json format?
Make this HTTP POST request in ruby," So here's the request using curl: I've been trying to make this same request using ruby, but I can't seem to get it to work.I tried a couple of libraries also, but I can't get it to work.Here's what I have so far: I get a 415 unsupported media type error. <code>  curl -XPOST -H content-type:application/json -d ""{\""credentials\"":{\""username\"":\""username\"",\""key\"":\""key\""}}"" https://auth.api.rackspacecloud.com/v1.1/auth uri = URI.parse(""https://auth.api.rackspacecloud.com"")http = Net::HTTP.new(uri.host, uri.port)http.use_ssl = truehttp.verify_mode = OpenSSL::SSL::VERIFY_NONErequest = Net::HTTP::Post.new(""/v1.1/auth"")request.set_form_data({'credentials' => {'username' => 'username', 'key' => 'key'}})response = http.request(request)",How to invoke HTTP POST method over SSL in ruby?
Check if two arrays have the same contents," I'm using Ruby 1.8.6 with Rails 1.2.3, and need to determine whether two arrays have the same elements, regardless of whether or not they're in the same order. One of the arrays is guaranteed not to contain duplicates (the other might, in which case the answer is no).My first thought was but I was wondering if there was a more efficient or idiomatic way of doing it. <code>  require 'set'a.to_set == b.to_set",Check if two arrays have the same contents (in any order)
How to encrypt data using OpenSSL::Cipher in UTF-8?," In a Rails 3.0 (Ruby 1.9.2) app I'm trying to encrypt some data using something like this: That will go into a UTF-8 database. My problem is that How can I get an UTF-8 encrypted string? <code>  cipher = OpenSSL::Cipher.new 'aes-256-cbc'cipher.encryptcipher.key = cipher.random_keycipher.iv = cipher.random_ivencrypted = cipher.update 'most secret data in the world'encrypted << cipher.final > encrypted.encoding => #<Encoding:ASCII-8BIT>> encrypted.encode 'utf-8'Encoding::UndefinedConversionError: ""\xF7"" from ASCII-8BIT to UTF-8",How to encrypt data in a UTF-8 string using OpenSSL::Cipher?
Error installing json gem in Ubuntu," Using Ubuntu, when I run ""bundle install"" to set up my Rails environment, it throws an error during the JSON gem installation: When I try installing only the JSON 1.7.3 gem it also gives me an error: I've installed RVM and am running Ruby 1.9.3; Why can't it install the JSON gem? <code>  Installing json (1.7.3) with native extensions Gem::Installer::ExtensionBuildError: ERROR: Failed to build gem native extension./usr/bin/ruby1.9.1 extconf.rb /usr/lib/ruby/1.9.1/rubygems/custom_require.rb:36:in `require': cannot load such file -- mkmf (LoadError) from /usr/lib/ruby/1.9.1/rubygems/custom_require.rb:36:in `require' from extconf.rb:1:in `<main>'Gem files will remain installed in /home/danny/.bundler/tmp/2040/gems/json-1.7.3 for inspection.Results logged to /home/danny/.bundler/tmp/2040/gems/json-1.7.3/ext/json/ext/parser/gem_make.outAn error occured while installing json (1.7.3), and Bundler cannot continue.Make sure that `gem install json -v '1.7.3'` succeeds before bundling. Building native extensions. This could take a while...ERROR: Error installing json: ERROR: Failed to build gem native extension./usr/bin/ruby1.9.1 extconf.rb/usr/lib/ruby/1.9.1/rubygems/custom_require.rb:36:in `require': cannot load such file -- mkmf (LoadError) from /usr/lib/ruby/1.9.1/rubygems/custom_require.rb:36:in `require' from extconf.rb:1:in `<main>'Gem files will remain installed in /var/lib/gems/1.9.1/gems/json-1.7.3 for inspection.Results logged to /var/lib/gems/1.9.1/gems/json-1.7.3/ext/json/ext/parser/gem_make.out",Why do I get an error installing the JSON gem in Ubuntu?
Typing unicode characters in Ruby console (irb)," Update: I found almost exact similar question, yet it has slightly different prerequisites and thus doesn't help much.Given:MacOS Lion 10.7.3rvm 1.14.2ruby 1.9.3p194 (2012-04-20 revision 35410) [x86_64-darwin11.3.0]Ruby was installed with the following line: rvm install 1.9.3 --with-readline-dir=/usr/local/Cellar/readline/6.2.2/When I fire up irb or rails c and start typing unicode characters, I get: \U+FFD0\U+FFBF\U+FFD1\U+FFD0\U+FFB8\U+FFD0\U+FFBC\U+FFD0\U+FFB5\U+FFD1How do I get unicode characters displayed correctly when typing on Ruby/Rails consoles?P.S. Typing same characters in bash session of Terminal result in proper output.P.P.S. Just to be clear -- in console I am typing russian characters: are they considered unicode symbols? <code> ",Unicode characters in Ruby 1.9.3 IRB with RVM
will ruby on rails have gems with functionality like JSF(primefaces)," Question 1)I would like to know whether ruby on rails have gems with functionality similar to primefaces.why i am asking is if you go with primefaces ( http://www.primefaces.org/showcase-labs/ui/home.jsf ) developer no need to worry about javascript or jquery stuffs.As far as my knowledge JSF is an spec , on based the spec various implementations available , primefaces is an ui framework for those implementations , primefaces has so many components based on jquery and javascript libs. More or less primefaces simply serves as a javascript wrapper.I you use primefaces , you mainly concentrate on business logic no need to worry about UI.i was heavily inspired by ruby on rails approach and there are lot of gems available.what my question is , Is there an gem or UI framework available for ruby on rails similar to UI magic driven by primefacesnote: i am not looking for pure jquery or dojo stuffs, i am looking for UI component driven stuffs for ruby on rails. Guys who worked on projects using primefaces and projects using rails will understand my question 100 %.Question 2)I would like to know list of gems related to user interface. what i am asking is inorder to create very niche user interface on ruby on rails what are the stuffs(frameworks or gems) needed. <code> ",How to achieve UI magic driven by JSF 2.0 (Primefaces) In Ruby on Rails
How to achieve UI magic driven by JSF (Primefaces) In Ruby on Rails," Question 1)I would like to know whether ruby on rails have gems with functionality similar to primefaces.why i am asking is if you go with primefaces ( http://www.primefaces.org/showcase-labs/ui/home.jsf ) developer no need to worry about javascript or jquery stuffs.As far as my knowledge JSF is an spec , on based the spec various implementations available , primefaces is an ui framework for those implementations , primefaces has so many components based on jquery and javascript libs. More or less primefaces simply serves as a javascript wrapper.I you use primefaces , you mainly concentrate on business logic no need to worry about UI.i was heavily inspired by ruby on rails approach and there are lot of gems available.what my question is , Is there an gem or UI framework available for ruby on rails similar to UI magic driven by primefacesnote: i am not looking for pure jquery or dojo stuffs, i am looking for UI component driven stuffs for ruby on rails. Guys who worked on projects using primefaces and projects using rails will understand my question 100 %.Question 2)I would like to know list of gems related to user interface. what i am asking is inorder to create very niche user interface on ruby on rails what are the stuffs(frameworks or gems) needed. <code> ",How to achieve UI magic driven by JSF 2.0 (Primefaces) In Ruby on Rails
Why does Process.setsid require root privileges?," In Ruby, a call to Process.setsid fails with ""Operation not permitted"" error if it's run as non-superuser. Try: Or, it fails with the same error if I change the uid or the process using Process.uid= method. It works fine if I run the Ruby program as root, and I do not change the UID of the process during runtime.However, in Ubuntu's or some other distro's shell, the setsid (reference: http://linux.die.net/man/2/setsid ) program does not require superuser privileges.I understand that stdsid resets the program's session, which is also useful when daemonizing a process. In my code, I'm attempting to change the UID as well as daemonize it, while also resetting the session.Hence, I'm curious why Process.setsid requires the said privileges, while the setsid program on most UNIX like OSes does not. <code>  $ irbirb(main):001:0> Process.setsidErrno::EPERM: Operation not permitted from (irb):1:in `setsid' from (irb):1 from ~/.rbenv/versions/1.9.2-p290/bin/irb:12:in `<main>'",Why does Process.setsid require root privileges in ruby?
Xpath nokogiri returning empty array [] whereas I am expecting to have results," I am trying to parse XML files using Nokogiri, Ruby and XPath. I usually don't encounter any problem but with the following I can't make any xpath request: Here is an simplified version of my XML File How can I get all children of <Hit> from this XML?  <code>  doc = Nokogiri::HTML(open(""myfile.xml""))doc.(""//Meta"").count # result ==> 0doc.xpath(""//Meta"") # result ==> []doc.xpath(.).count# result => 1 <Answer xmlns=""test:com.test.search"" context=""hf%3D10%26target%3Dst0"" last=""0"" estimated=""false"" nmatches=""1"" nslices=""0"" nhits=""1"" start=""0""> <time> ... </time> <promoted> ... </promoted> <hits> <Hit url=""http://www.test.com/"" source=""test"" collapsed=""false"" preferred=""false"" score=""1254772"" sort=""0"" mask=""272"" contentFp=""4294967295"" did=""1287"" slice=""1""> <groups> ... </groups> <metas> <Meta name=""enligne""> <MetaString name=""value""> </MetaString> </Meta> <Meta name=""language""> <MetaString name=""value""> fr </MetaString> </Meta> <Meta name=""text""> <MetaText name=""value""> <TextSeg highlighted=""false"" highlightClass=""0""> La </TextSeg> </MetaText> </Meta> </metas> </Hit> </hits> <keywords> ... </keywords> <groups> ... </groups>",XPath in Nokogiri returning empty array [] whereas I am expecting to have results
Nokogiri to get raw html of a node," I am using Nokogiri to analyze some HTML, but, I don't know how get the raw HTML inside a node. For example, given: When I use this XPath selector: The results from node.text and node.content are: I want to get all raw HTML inside the tr block, which, in this case, is: What's the proper way to do that? <code>  <tr class=""tableX""> <td align=""center""> <font size=""2""><a href=""javascript:open('9746')"">9746</a></font> </td> <td align=""center""> <font size=""2"">2012-06-26</font> </td></tr> doc = Nokogiri::HTML(html)nodes = doc.search(""//tr[@class='tablebX']"")nodes.each do |node| node.text # or node.contentend 97462012-06-26 <td align=""center""> <font size=""2""><a href=""javascript:open('9746')"">9746</a></font></td><td align=""center""> <font size=""2"">2012-06-26</font></td>",How to get the raw HTML of a node
create array of n items based on integer value," Given I have an integer value of, e.g., 10. How can I create an array of 10 elements like [1,2,3,4,5,6,7,8,9,10]? <code> ",Create array of n items based on integer value
ruby to_s vs to_str," I'm learning Ruby and I've seen a couple of methods that are confusing me a bit, particularly to_s vs to_str (and similarly, to_i/to_int, to_a/to_ary, & to_h/to_hash). What I've read explains that the shorter form (e.g. to_s) are for explicit conversions while the longer form are for implicit conversions.I don't really understand how to_str would actually be used. Would something other than a String ever define to_str? Can you give a practical application for this method? <code> ",to_s vs. to_str (and to_i/to_a/to_h vs. to_int/to_ary/to_hash) in Ruby
to_s vs. to_str (and to_i/to_a vs. to_int/to_ary) in Ruby," I'm learning Ruby and I've seen a couple of methods that are confusing me a bit, particularly to_s vs to_str (and similarly, to_i/to_int, to_a/to_ary, & to_h/to_hash). What I've read explains that the shorter form (e.g. to_s) are for explicit conversions while the longer form are for implicit conversions.I don't really understand how to_str would actually be used. Would something other than a String ever define to_str? Can you give a practical application for this method? <code> ",to_s vs. to_str (and to_i/to_a/to_h vs. to_int/to_ary/to_hash) in Ruby
What is the best way to access Cucumber's instance variables form nested classes inside steps," It's a simple question. I have Cucumber steps, for example: In the Then step I'm using my own classes, they simplify the process of testing: Inside the MyValidatorClass instance, I deal with the above instance variables @user, @post, etc.What is the best and simpliest way to access Cucumber variables from MyValidatorClass class instance? Now I have manually passed all arguments to MyValidatorClass instance: But I think this purpose is bad. I need something more transparent, because we are using Ruby, that why!What is the best way to do this? <code>  Given /We have the test environment/ do @user = # Create User model instance @post = # Create Post model instance # etc...end Then /all should be fine/ do # MyValidatorClass has been defined somwhere in features/support dir validator = MyValidatorClass.new validator.valid?.should be_trueend class MyValidatorClass def valid? @post @user endend validator = MyValidatorClass.new @user, @post",What is the best way to access Cucumber's instance variables form nested classes inside steps?
Changing heroku repo for pre-existing rails app," I created a heroku repo some time ago for my rails app but deleted it because I was never using it. Now I have come to the point where I need to use heroku but I am encountering the following error:! No such app as furious-mist-2295. which was the old repo name, so it is clearly not pushing to the new stack I created. This is what I was considering trying, but am concerned about causing unnecessary changes to my git repo.git remote rm origingit remote add origin <URL to new heroku app>git push -u origin master <code> ",Changing heroku repo for pre-existing app
"sql joins, filters and rails"," I am a rails newbie and am trying to perform a search on a table with rails, and i'm just using my sql knowledge to do this. But this just doesn't seems like rails or ruby even...Is there any better way to do what i'm doing below? (basically, only pass date arguments to sql if they are filled) EDITuser.rb place.rb container.rb label.rb Basically, i want to get a count of the number of containers within a given user's labels or with a direct relationship, per location, and want to be able to filter it by begin and end dates.Either of this dates may be nil, and so i would need to address this in my ""query"".My question is : How can i do this the rails way? I took a look at http://guides.rubyonrails.org/active_record_querying.html and perhaps i could use the except command here somewhere...but this relationship model just seems a bit complex to do this with ActiveRecord...how may I?, i really think i should use ActiveRecord, but how?Thank you <code>  def search(begin_date=nil, end_date=nil) subject = "" and created_at "" if !(begin_date.nil? || end_date.nil?) where_part = subject + ""BETWEEN :begin_date AND :end_date"" else if (begin_date.nil? && end_date.nil?) where_part = """" else if(begin_date.nil?) where_part = subject + "" <= :end_date"" else if (end_date.nil?) where_part = subject + "" >= :begin_date"" end end end end User.joins(places: {containers: {label: :user}}).where(""users.id= :user_id ""+where_part, user_id: self.id, begin_date:begin_date, end_date:end_date).group(...).select(...)end has_many :containershas_many :user_placeshas_many :places, through: :user_placeshas_many :labels has_many :containershas_many :user_placeshas_many :users, through: :user_places belongs_to :labelbelongs_to :placebelongs_to :user belongs_to :userhas_many :containers",How to add conditional where clauses in rails
Crash on action mailer SMTP," I tried to configure actionmailer to send via google apps with smtp. However whenever gitlab tries to send an e-mail: Server runs ruby 1.9.3p194. Why doesn't google apps accept the username/password? <code>  config.action_mailer.delivery_method = :smtpconfig.action_mailer.smtp_settings = {:address => ""smtp.gmail.com"",:port => 587,:domain => ""mydomain.com"",:user_name => ""username"",:password => ""password"",:authentication => 'plain',:enable_starttls_auto => true }config.action_mailer.perform_deliveries = trueconfig.action_mailer.raise_delivery_errors = true Sent mail to user@my.domain.com (10ms)Completed 500 Internal Server Error in 29ms535-5.7.1 Username and Password not accepted",Action mailer SMTP google apps
Crash on action mailer SMTP google apps," I tried to configure actionmailer to send via google apps with smtp. However whenever gitlab tries to send an e-mail: Server runs ruby 1.9.3p194. Why doesn't google apps accept the username/password? <code>  config.action_mailer.delivery_method = :smtpconfig.action_mailer.smtp_settings = {:address => ""smtp.gmail.com"",:port => 587,:domain => ""mydomain.com"",:user_name => ""username"",:password => ""password"",:authentication => 'plain',:enable_starttls_auto => true }config.action_mailer.perform_deliveries = trueconfig.action_mailer.raise_delivery_errors = true Sent mail to user@my.domain.com (10ms)Completed 500 Internal Server Error in 29ms535-5.7.1 Username and Password not accepted",Action mailer SMTP google apps
Why are my hashes are printed as strings?," It's pretty wierd, but I do not know what to configure or where to configure. I am trying to print a simple hash value as below: I expect the output to be while I get Any ideas? <code>  #!/usr/bin/rubynames = Hash.newnames[1] = ""Jane""names[2] = ""Thomas""puts names {1=>""Jane"", 2=>""Thomas""} 1Jane2Thomas",Why are my hashes printed as strings?
"Ruby, which exception is best to to handle unset environment variables?"," The script I wrote runs at start up and requires that an environment variable be set, but which of Ruby's Exceptions, is best? I used LoadError, I just want to be as descriptive as possible and follow the proper conventions.Secondly, I can't find another way to see if an environment variable is set besides checking it's length, but that doesn't seem so elegant. <code>  begin raise LoadError if ENV['FOO'].to_s.length == 0 system ""open http://example.com/"" + ENV['FOO']rescue Exception => e puts ""=> #{e} FOO environment variable not set""end","Ruby, which exception is best to handle unset environment variables?"
Ruby: Official expansion of ||= conditional assignment operator," I want to emphasize I am looking for the actual way the ||= operator is expanded by the Ruby 1.9.3 interpreter, not how it appears to be expanded based on its behavior. What I'm really hoping for is someone who has grokked the actual interpreter source, a task which I sadly am probably not up to. The only resource I have found that appears to examine this question is out of date: ""A short-circuit (||=) edge case"".The resource I mentioned above seems to suggest that the ""official"" expansion of x ||= y to x = x || y was either inaccurate or buggy in interpreter versions prior to 1.9. In any case, the edge case indicated seems to have been smoothed out. The resource above claims that x || x = y or x or x = y are ""more accurate"". Neither of those, however, is correct, because they don't work when x is a previously undeclared global variable: So in 1.9.3, at least, the x = x || y expansion appears to be correct, as far as these examples are concerned. However, to reiterate my original point, I would really like to see some truly authoritative source resolve this question, well, authoritatively rather than anecdotally as I (and others) have done. <code>  [11:04:18][****@asha:~]$ irb1.9.3-p194 :001 > a || a = 3 NameError: undefined local variable or method `a' for main:Object1.9.3-p194 :002 > b or b = 3 NameError: undefined local variable or method `b' for main:Object1.9.3-p194 :003 > c = c || 3 => 3 ",Official expansion of ||= conditional assignment operator
Why ArgumentError exception does not raise?," The following code causes an argument error: which I think is because it evaluates to: and different types of classes are used in range: TrueClass and FalseClass. However, the following code does not raise an error. Why is that? Does Enumerable#collect catch it? Added later: If fcn returns 15, then only first half of range is evaluated but if we change return value to 16 then input will be It's strange, because in this case expression evaluates to And such kind of range is invalid according to sawa's answer below.Then in first case (with def's return value 15) we have only partial range with no ending part? It's so strange :) <code>  n = 15(n % 4 == 0)..(n % 3 == 0)# => bad value for range (ArgumentError) false..true (11..20).collect { |i| (i % 4 == 0)..(i % 3 == 0) ? i : nil }# => no error def fcn(x) puts x 15endif (fcn(1) % 4 == 0)..(fcn(2) % 3 == 0); end# => 1 # => 1# => 2 true..false",Why does a range with invalid arguments sometimes not cause an argument error?
Why does true..false and false..true sometimes not cause an argument error?," The following code causes an argument error: which I think is because it evaluates to: and different types of classes are used in range: TrueClass and FalseClass. However, the following code does not raise an error. Why is that? Does Enumerable#collect catch it? Added later: If fcn returns 15, then only first half of range is evaluated but if we change return value to 16 then input will be It's strange, because in this case expression evaluates to And such kind of range is invalid according to sawa's answer below.Then in first case (with def's return value 15) we have only partial range with no ending part? It's so strange :) <code>  n = 15(n % 4 == 0)..(n % 3 == 0)# => bad value for range (ArgumentError) false..true (11..20).collect { |i| (i % 4 == 0)..(i % 3 == 0) ? i : nil }# => no error def fcn(x) puts x 15endif (fcn(1) % 4 == 0)..(fcn(2) % 3 == 0); end# => 1 # => 1# => 2 true..false",Why does a range with invalid arguments sometimes not cause an argument error?
how to validate assoicated model id?," I have a student and a course model. Student belongs to course, and course has many students. In the form used to create student record, I let the user enter the course ID. But I don't know how to validate the course_id input by the user. The student model validation will not generate an error, even when I type a course ID that does not exist. How do I get it to show the error? <code>  class Student < ActiveRecord::Base attr_accessible :course_id, :name, :password, :status, :studentID, :year belongs_to :course validates :name, :password, :status, :studentID, :year, :presence =>true validates_associated :courseendclass Course < ActiveRecord::Base attr_accessible :courseCode, :courseName, :courseYr validates :courseCode,:courseName,:courseYr, :presence => true validates :courseCode,:courseYr, :uniqueness=>{:message=>""Cannot repeat the code""} has_many :students end <div class=""field""> <%= f.label :course_id %><br /> <%= f.text_field :course_id %></div>",how to validate associated model id?
How can I post with and instance variable and HTTParty to an API that uses OAuth2," I can get information from an Oauth2 API by: How would I post to that API content generated in my app? I have an instance variable: I tried this: to no avail. <code>  token = ""Token I get from authenticating my App""auth = ""Bearer "" + tokenuser = HTTParty.get(""API Website"", :headers => { ""Authorization"" => auth}) @contact = {""contact"": {""name"": ""John Doe"" }} token = ""Token I get from authenticating my App""auth = ""Bearer "" + tokenuser = HTTParty.get(""API Website"", :headers => { ""Authorization"" => auth}, @contact)",How can I post with an instance variable and HTTParty to an API that uses OAuth2
How does CSV.table know if no headers are in a CSV file?," I have been doing some testing with CSV.table. I have two small and almost identical CSV files, however one is missing the header row.When I run CSV.table against the CSV file with the header row, everything works as expected.When I run it against the CSV file without the header row I get: I tried this with different types of data, with different types of headers, and get the same results.I am curious to the magic of CSV.table. If I use CSV.parse with headers set to true, then it always makes the first row be headers no matter what. So, I have been using CSV.table to check if a CSV file being imported has a header row but I am not too comfortable with this because I don't understand if or when it will or will not work the way I'm using it. Does anyone know?P.S. I've already read through this and the source code it provides on each method - http://www.ruby-doc.org/stdlib-1.9.3/libdoc/csv/rdoc/CSV.html <code>  NoMethodError: undefined method `encode' for nil:NilClass begin CSV.table(csv_file_path)rescue # Add error to log or something.end",Ruby 1.9.3 - How does CSV.table know if no headers are in a CSV file?
2 Namespaces of activeadmin," I'm trying to install activeadmin with two namespaces for the past 4 hours and am having no luck.I want two namespaces. ""admin"" and ""admin_unit"".I would assume that I would have the app/admin and app/admin_unit directories.For the admin namespace, I would like to use the default devise authentication, and for the ""admin_unit"" namespace, I have a current_user method that I need to use.I've tried wrapping all the config in the active_admin config with namespaces, and i've tried manually creating the files etc. but every time I have some problem.Activeadmin has changed so much in the past year, I'm affraid half of the instructions i've seen are outdated. And none of them are complete. The documentation is only partially there on the namespacing.Does anyone have some step by step instructions on installing these two namespaces from start to finish? I would be very appreciative for some help on this!EDITWhen I go to start server (or in this case im trying to rake routes), I get this error: dashboard.rb has this in it: I've also tried with no namespace: FYI I added a ""active_admin"" directory, and put both namespaced directories in there. I added both to the loadpaths (thanks for that).Does this error have anything to do with the new dashboard pages? I am going to look into how those work next.Thanks guys! Thanks for your work Gregg, I have used AA on dozens of apps now and love it!EDIT FIXOk, on the last issue, I found that taking the two activeadmin namespaced directories out of the ""active_admin"" directory that I created fixed the problem. Not sure what that wouldn't work... but oh well, i've spent enough cycles on this issue, and am ready to move on.Hope that helps someone else.. <code>  Expected /app/active_admin/admin/dashboard.rb to define Admin::Dashboard (LoadError) ActiveAdmin.register_page ""My Page"", :namespace => :admin do content do para ""Hello World"" endend ActiveAdmin.register_page ""My Page"" do content do para ""Hello World"" endend",Two Namespaces of activeadmin
How do I get ruby to make a noise (make my computer beep or play a sound/track) when my script breaks?," I'm running a testing script that runs over a website over and over again that runs hundreds of times over the course of several hours. I would like for ruby to starting playing a loud song/mp3 for example, to alert me while I'm in a different part of my fairly small apartment. <code> ",How do I get shell/ruby to make a noise (make my computer beep or play a sound/track) when my script breaks?
Greedy matching multiple groups using regex," I would like to grab the contents of any value between pairs of <tag></tag> tags. The regex I have come up with is/<tag>(.*)</tag>/mThough, it appears to be greedy and is capturing everything within the enclosed parentheses up until the very last </tag>. I would like it to be as lazy as possible so that everytime it sees a closing tag, it will treat that as a match group and start over.How can I write the regex so that I will be able to get multiple matches in the given scenario?I have included a sample of what I am describing in the following linkhttp://rubular.com/r/JW5M3rnqIENote: This is not XML, nor is it really based on any existing standard format. I won't need anything sophisticated like a full-fledged library that comes with a nice parser. <code>  <tag>This is one block of text</tag><tag>This is another one</tag>",Lazy (ungreedy) matching multiple groups using regex
Reading/greping a file in ruby more tha once," How can I reset the ""pointer"" of a file to its start without reopening it? (Something like fseek in C?)For example, I have a file that I want to grep for two patterns: Is it possible to reset f without reopening the file?Note: I am not looking for workarounds; I can think some on my own ;). <code>  f=open('test') => #<File:test> f.grep(/llo/) => [""Hello world\n""] f.grep(/wo/) => [] ",Reading/greping a file in ruby more than once
Rails console (and irb) can't use text helpers," Probably something wrong with my setup: Looks like I cannot use any text helpers (both in irb and rails console).What should I check? <code>  irb(main):001:0> truncate(""Once upon a time in a world far far away"", :length => 17)NoMethodError: undefined method `truncate' for main:Object from (irb):1 from /usr/lib64/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/commands/console.rb:47:in `start' from /usr/lib64/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/commands/console.rb:8:in `start' from /usr/lib64/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/commands.rb:41:in `<top (required)>' from script/rails:6:in `require' from script/rails:6:in `<main>'",RubyOnRails: How do I use helper methods in Rails Console?
Best way to install Ruby 1.8.7 on OS X 1.8 Mountain Lion, I've been looking around for the best way to do this and found an easier way than to install both tcl and tk. <code> ,How to install Ruby 1.8.7 on OS X 10.8 Mountain Lion
Best way to install Ruby 1.8.7 on OS X 10.8 Mountain Lion, I've been looking around for the best way to do this and found an easier way than to install both tcl and tk. <code> ,How to install Ruby 1.8.7 on OS X 10.8 Mountain Lion
Ruby stack level too deep exception NOT from recursive infinite loop," EDIT : (SOLVED) actually it probably was raised BECAUSE OF an infinite loopI was coding and after adding a method I got this : I'm pretty sure there is no infinite recursive loop involved.The code is for now somehow gemified, but I also got the error running the ruby file directly.Thank you for any help on how to (get some information to, run some tests to) fix the problem, if possible without having to rewrite the whole thing...Environment :ruby 1.9.3p194 / rails 3.2.8, installed via rvmthe program at this stage only uses rails string inflexions functionsOS : linux kubuntu i386memory 4GO'ulimit -s' : 8192 (stack size in kB)What I tried unsuccessfully :removed the chunk of code where the exception was initially raised, but it was still raised a tiny bit later at runtimeset stack size with command line 'ulimit -s 20000', 'ulimit -s unlimited'. Same error, apparently at the same place (which makes me think the stack size wasn't actually changed)downgraded to ruby1.9.2 / rails3.1.3, got the same messagesame error under WindowsApplication context :I'm writing an application that heavily uses ruby mixins.Besides I created a bunch of classes that generate mixins (instance / class methods modules to be included by other classes).So all in all I end up with quite a bit of generated named modules with some custom generated code, and classes with many ancestors.But that should eventually save me quite a bit of pain in the as$ when I write the program that sits on top of this lib (that's the plan anyway).Resources I used : How to increase stack size for a ruby app. Recursive app getting: Stack level too deep (SystemStackError)http://dalibornasevic.com/posts/5-ruby-stack-level-too-deep-systemstackerrorEDIT : Until some code is available for the showing/testing, let's abstract my question down to this one : Are there other cases that raise stack level too deep exception, besides the classical program-execution-tree-is-too-deep scenario (crossing fingers it's clear and means something...) ? <code>  user_name@the_computer:/media/ECC3-C3B0/Prog/mts/src/mts$ rake test --trace** Invoke test (first_time)** Execute test/home/user_name/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36: stack level too deep (SystemStackError)rake aborted!Command failed with status (1): [/home/user_name/.rvm/rubies/ruby-1.9.3-p19...]/home/user_name/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/file_utils.rb:53:in `block in create_shell_runner'/home/user_name/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/file_utils.rb:45:in `call'/home/user_name/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/file_utils.rb:45:in `sh'/home/user_name/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/file_utils_ext.rb:39:in `sh'/home/user_name/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/file_utils.rb:82:in `ruby'/home/user_name/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/file_utils_ext.rb:39:in `ruby'/home/user_name/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/testtask.rb:99:in `block (2 levels) in define'/home/user_name/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/file_utils_ext.rb:60:in `verbose'/home/user_name/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/testtask.rb:98:in `block in define'/home/user_name/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/task.rb:205:in `call'/home/user_name/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/task.rb:205:in `block in execute'/home/user_name/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/task.rb:200:in `each'/home/user_name/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/task.rb:200:in `execute'/home/user_name/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/task.rb:158:in `block in invoke_with_call_chain'/home/user_name/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/monitor.rb:211:in `mon_synchronize'/home/user_name/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/task.rb:151:in `invoke_with_call_chain'/home/user_name/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/task.rb:144:in `invoke'/home/user_name/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/application.rb:116:in `invoke_task'/home/user_name/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/application.rb:94:in `block (2 levels) in top_level'/home/user_name/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/application.rb:94:in `each'/home/user_name/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/application.rb:94:in `block in top_level'/home/user_name/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/application.rb:133:in `standard_exception_handling'/home/user_name/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/application.rb:88:in `top_level'/home/user_name/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/application.rb:66:in `block in run'/home/user_name/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/application.rb:133:in `standard_exception_handling'/home/user_name/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/application.rb:63:in `run'/home/user_name/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/bin/rake:33:in `<top (required)>'/home/user_name/.rvm/gems/ruby-1.9.3-p194@global/bin/rake:19:in `load'/home/user_name/.rvm/gems/ruby-1.9.3-p194@global/bin/rake:19:in `<main>'/home/user_name/.rvm/gems/ruby-1.9.3-p194/bin/ruby_noexec_wrapper:14:in `eval'/home/user_name/.rvm/gems/ruby-1.9.3-p194/bin/ruby_noexec_wrapper:14:in `<main>'Tasks: TOP => test",Ruby stack level too deep exception NOT from recursive infinite loop
Ruby stack level too deep exception NOT from recursive infinite loop (SOLVED)," EDIT : (SOLVED) actually it probably was raised BECAUSE OF an infinite loopI was coding and after adding a method I got this : I'm pretty sure there is no infinite recursive loop involved.The code is for now somehow gemified, but I also got the error running the ruby file directly.Thank you for any help on how to (get some information to, run some tests to) fix the problem, if possible without having to rewrite the whole thing...Environment :ruby 1.9.3p194 / rails 3.2.8, installed via rvmthe program at this stage only uses rails string inflexions functionsOS : linux kubuntu i386memory 4GO'ulimit -s' : 8192 (stack size in kB)What I tried unsuccessfully :removed the chunk of code where the exception was initially raised, but it was still raised a tiny bit later at runtimeset stack size with command line 'ulimit -s 20000', 'ulimit -s unlimited'. Same error, apparently at the same place (which makes me think the stack size wasn't actually changed)downgraded to ruby1.9.2 / rails3.1.3, got the same messagesame error under WindowsApplication context :I'm writing an application that heavily uses ruby mixins.Besides I created a bunch of classes that generate mixins (instance / class methods modules to be included by other classes).So all in all I end up with quite a bit of generated named modules with some custom generated code, and classes with many ancestors.But that should eventually save me quite a bit of pain in the as$ when I write the program that sits on top of this lib (that's the plan anyway).Resources I used : How to increase stack size for a ruby app. Recursive app getting: Stack level too deep (SystemStackError)http://dalibornasevic.com/posts/5-ruby-stack-level-too-deep-systemstackerrorEDIT : Until some code is available for the showing/testing, let's abstract my question down to this one : Are there other cases that raise stack level too deep exception, besides the classical program-execution-tree-is-too-deep scenario (crossing fingers it's clear and means something...) ? <code>  user_name@the_computer:/media/ECC3-C3B0/Prog/mts/src/mts$ rake test --trace** Invoke test (first_time)** Execute test/home/user_name/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36: stack level too deep (SystemStackError)rake aborted!Command failed with status (1): [/home/user_name/.rvm/rubies/ruby-1.9.3-p19...]/home/user_name/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/file_utils.rb:53:in `block in create_shell_runner'/home/user_name/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/file_utils.rb:45:in `call'/home/user_name/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/file_utils.rb:45:in `sh'/home/user_name/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/file_utils_ext.rb:39:in `sh'/home/user_name/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/file_utils.rb:82:in `ruby'/home/user_name/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/file_utils_ext.rb:39:in `ruby'/home/user_name/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/testtask.rb:99:in `block (2 levels) in define'/home/user_name/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/file_utils_ext.rb:60:in `verbose'/home/user_name/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/testtask.rb:98:in `block in define'/home/user_name/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/task.rb:205:in `call'/home/user_name/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/task.rb:205:in `block in execute'/home/user_name/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/task.rb:200:in `each'/home/user_name/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/task.rb:200:in `execute'/home/user_name/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/task.rb:158:in `block in invoke_with_call_chain'/home/user_name/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/monitor.rb:211:in `mon_synchronize'/home/user_name/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/task.rb:151:in `invoke_with_call_chain'/home/user_name/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/task.rb:144:in `invoke'/home/user_name/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/application.rb:116:in `invoke_task'/home/user_name/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/application.rb:94:in `block (2 levels) in top_level'/home/user_name/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/application.rb:94:in `each'/home/user_name/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/application.rb:94:in `block in top_level'/home/user_name/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/application.rb:133:in `standard_exception_handling'/home/user_name/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/application.rb:88:in `top_level'/home/user_name/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/application.rb:66:in `block in run'/home/user_name/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/application.rb:133:in `standard_exception_handling'/home/user_name/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/application.rb:63:in `run'/home/user_name/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/bin/rake:33:in `<top (required)>'/home/user_name/.rvm/gems/ruby-1.9.3-p194@global/bin/rake:19:in `load'/home/user_name/.rvm/gems/ruby-1.9.3-p194@global/bin/rake:19:in `<main>'/home/user_name/.rvm/gems/ruby-1.9.3-p194/bin/ruby_noexec_wrapper:14:in `eval'/home/user_name/.rvm/gems/ruby-1.9.3-p194/bin/ruby_noexec_wrapper:14:in `<main>'Tasks: TOP => test",Ruby stack level too deep exception NOT from recursive infinite loop
Ruby. Want to select a random number a random number of times but never the same random number twice, Possible Duplicate: How do I generate a list of n unique random numbers in Ruby? I want to do: with the exception that if a random number has already been displayed it cannot be displayed again. How do I do this most easily? <code>  Random.rand(0..10).times do puts Random.rand(0..10)end,Select a random number a random number of times but never the same random number twice
Ruby's `begin ... end` without `rescue` used as a code block," I occasionally see begin...end blocks used in ruby without any rescue, else, ensure, etc. statements in between. For example: The coder's intent, it seems, is to use the begin...end block just for its block-grouping quality (as if begin were do). Personally I think this usage kind of violates the principle of least surprise (begin implies exception-handling to me).Are there any unintended consequences of using begin...end in this way? Do begin...end blocks have any semantic differences (maybe in exception-handling?) that make this usage dangerous? Ruby's syntax is unbelievably subtle, and I wouldn't be surprised if there were weird gotchas lying in wait here. <code>  foo = begin whatever = 3 ""great"" 42end",Are there unintended consequences of Ruby's `begin ... end` without `rescue` used as a code block?
Ruby On Rails newbie Q. Passing parameters from view to controller," I got a bit of a newbie question. I'm trying to pass a variable from my view to my controller. Is there anyway my method in my controller can receive variables from my view? Thanks in advance :) <code>  Post view: show.html.erb:....<%=link_to ""Add relationship"", :method => :add_relationship(@rela) %> Controller: post.controller.rb: def add_relationship(rela) @post = Post.find(params[:id]) if current_user.id == @post.user_id @post.rel_current_id = rela.id @post.save redirect_to relationships_url else redirect_to posts_url, :notice => ""FY!"" endend",Passing parameters from view to controller
how to net-ssh sudo su in ruby," I'm trying to figure out how to a send chain of multiple net-ssh commands after a sudo su - #{su_user} in Ruby.My current code is below, and hangs with the sudo su command, even after the send_data ""#{password}\n"".Meanwhile, on the system, a manual execution of sudo su - admin2 does not require a password entry.Any help would be appreciated! <code>  require 'rubygems' require 'net/ssh'host = 'hostA'user = 'admin'password = 'hostA_pwd'su_user = 'Admin2'Net::SSH.start(host, user, :password => password) do |ssh| ssh.open_channel do |channel| channel.request_pty do |c, success| raise ""could not request pty"" unless success channel.exec ""pwd; whoami; sudo su - #{su_user} ; pwd ; whoami"" channel.on_data do |c_, data| if data =~ /\[sudo\]/ || data =~ /Password/i channel.send_data ""#{password}\n"" else result << data end end puts result end end ssh.loop end",How to net-ssh sudo su in Ruby
HAML: How to know in what environment the code runs?," In the layout file of haml I would like to determine whether we are in our development and build environments. We're using Middleman.I would like to do something like this: I tried to access Ruby's environment variable, as well as define a custom variable in the config.rb file with no success. <code>  - if environment == 'development' / Development Code = javascript_include_tag ""Dev.js""",How to know in what environment the code runs?
Upload Csv file in Rails and process records to display on page without saving file," I am in the process of learning Rails and am trying to create a file upload page to process CSV data without any use of my database or model. I am also trying to avoid using any gems such as Paperclip or Carrier-wave.I have made some progress, but for some reason, my code is not working. I don't get the records that are in the CSV file displayed on the import.html.erb page.When I click the upload button on my page: localhost:3000/upload, it redirects me properly to the expected page after submission, but the rows from file don't appear. Does anyone have a clue why the page is not displaying the records from the CSV file?The upload file view (index.html.erb): The controller (upload_controller.rb): The result view (import.html.erb): <code>  <%= form_tag({:action => :import}, multipart: true) do %> <%= file_field_tag :file %> <%= submit_tag( ""Import"" ) %><% end %> class UploadController < ApplicationController def index end def import rowarray = Array.new myfile = params[:file] CSV.foreach(myfile.path) do |row| rowarray << row @rowarraydisp = rowarray end endend <% @rowarraydisp.each do |row| %> <%= row %><% end %><h1>File has been uploaded. Check</h1>",Upload CSV file in Rails and process records to display on page without saving file?
what is the difference between ~= and .match() in pattern matching?," I am using Ruby 1.9.3. I was playing with some patterns and found something interesting:Example 1: Example 2: =~ returns the first location of its first match, whereas match returns the pattern. Other than that, is there any difference between =~ and match()?Execution time difference (As per @Casper) <code>  irb(main):001:0> /hay/ =~ 'haystack'=> 0irb(main):003:0> /st/ =~ 'haystack'=> 3 irb(main):002:0> /hay/.match('haystack')=> #<MatchData ""hay"">irb(main):004:0> /st/.match('haystack')=> #<MatchData ""st""> irb(main):005:0> quickbm(10000000) { ""foobar"" =~ /foo/ }Rehearsal ------------------------------------ 8.530000 0.000000 8.530000 ( 8.528367)--------------------------- total: 8.530000sec user system total real 8.450000 0.000000 8.450000 ( 8.451939)=> nilirb(main):006:0> quickbm(10000000) { ""foobar"".match(/foo/) }Rehearsal ------------------------------------ 15.360000 0.000000 15.360000 ( 15.363360)-------------------------- total: 15.360000sec user system total real 15.240000 0.010000 15.250000 ( 15.250471)=> nil",What is the difference between =~ and match() when pattern matching?
What is the difference between ~= and match() when pattern matching?," I am using Ruby 1.9.3. I was playing with some patterns and found something interesting:Example 1: Example 2: =~ returns the first location of its first match, whereas match returns the pattern. Other than that, is there any difference between =~ and match()?Execution time difference (As per @Casper) <code>  irb(main):001:0> /hay/ =~ 'haystack'=> 0irb(main):003:0> /st/ =~ 'haystack'=> 3 irb(main):002:0> /hay/.match('haystack')=> #<MatchData ""hay"">irb(main):004:0> /st/.match('haystack')=> #<MatchData ""st""> irb(main):005:0> quickbm(10000000) { ""foobar"" =~ /foo/ }Rehearsal ------------------------------------ 8.530000 0.000000 8.530000 ( 8.528367)--------------------------- total: 8.530000sec user system total real 8.450000 0.000000 8.450000 ( 8.451939)=> nilirb(main):006:0> quickbm(10000000) { ""foobar"".match(/foo/) }Rehearsal ------------------------------------ 15.360000 0.000000 15.360000 ( 15.363360)-------------------------- total: 15.360000sec user system total real 15.240000 0.010000 15.250000 ( 15.250471)=> nil",What is the difference between =~ and match() when pattern matching?
Remove whitespaces in ruby csv.parse," I have a string with extra whitespace: I want to parse this line and remove the whitespaces.My code looks like: <code>  First,Last,Email ,Mobile Phone ,Company,Title ,Street,City,State,Zip,Country, Birthday,Gender ,Contact Type namespace :db dotask :populate_contacts_csv => :environment dorequire 'csv'csv_text = File.read('file_upload_example.csv') csv = CSV.parse(csv_text, :headers => true) csv.each do |row| puts ""First Name: #{row['First']} \nLast Name: #{row['Last']} \nEmail: #{row['Email']}"" end endend",Removing whitespaces in a CSV file
Is there an accepted way of parsing these numbers in Rails?," Is there an already existing solution that can parse all the numbers below? <code>  ""300.00""""2.300,00""""2,300.00""",How to parse numbers from different locale formats?
cant start elasticsearch server - rails tire," So I have installed elasticsearch through brew: Then when I run the elasticsearch server: I get this error: How can I fix this? Any ideas och suggestions are welcome.I did this and it had worked for me:Get the package: Unzipp: Run the elasticsearch server: <code>  $ brew install elasticsearch elasticsearch -f -D es.config=/usr/local/Cellar/elasticsearch/0.19.3/config/elasticsearch.yml {0.20.4}: Setup Failed ...- FailedToResolveConfigException[Failed to resolve config path [/usr/local/Cellar/elasticsearch/0.19.3/config/elasticsearch.yml], tried file path [/usr/local/Cellar/elasticsearch/0.19.3/config/elasticsearch.yml], path file [/usr/local/Cellar/elasticsearch/0.20.4/config/usr/local/Cellar/elasticsearch/0.19.3/config/elasticsearch.yml], and classpath] $ curl -k -L -o elasticsearch-0.20.2.tar.gz http://download.elasticsearch.org/elasticsearch/elasticsearch/elasticsearch-0.20.2.tar.gz $ tar -zxvf elasticsearch-0.20.2.tar.gz ./elasticsearch-0.20.2/bin/elasticsearch -f",Can't start elasticsearch server via Homebrew
ruby: net-ssh timeout for execution," In my application I want to terminate the exec! command of my SSH connection after a specified amount of time.I found the :timeout for the Net::SSH.start command but following the documentation this is only for the initial connection. Is there something equivalent for the exec command? My first guess would be not using exec! as this will wait until the command is finished but using exec and surround the call with a loop that checks the execution status with every iteration and fails after the given amount of time.Something like this, if I understood the documentation correctly: However this seems dirty to me. I expect something like server.exec(""some command"" { :timeout=>60}). Maybe there is some built in function for achieving this functionality? <code>  server = NET::SSH.start(...)server.exec(""some command"")start_time = Time.nowterminate_calculation = falsetrap(""TIME"") { terminate_calculation = ((Time.now - start_time) > 60) }ssh.loop(0.1) { not terminate_calculation }",Net-ssh timeout for execution?
What does `class << self` actually means," Regarding: I came up with following image in my head:Since everything is an object in Ruby, classes themselves are objects of class Class. By calling class << self you open up Class definition from the inside of Test and inject few instance methods. Since Test is an instance of Class, you can call those methods same way you call instance methods on your objects: Test.hi. Following is the pseudo code which helps to visualise my previous sentence: Am I getting this right? <code>  class Test class << self def hi puts ""Hi there"" endend class Class def hi puts Hi there endendTest = Class.new(class Testend)Test.hi",What does class << self mean?
What does `class << self` mean," Regarding: I came up with following image in my head:Since everything is an object in Ruby, classes themselves are objects of class Class. By calling class << self you open up Class definition from the inside of Test and inject few instance methods. Since Test is an instance of Class, you can call those methods same way you call instance methods on your objects: Test.hi. Following is the pseudo code which helps to visualise my previous sentence: Am I getting this right? <code>  class Test class << self def hi puts ""Hi there"" endend class Class def hi puts Hi there endendTest = Class.new(class Testend)Test.hi",What does class << self mean?
Ruby 1.9.x hash syntax: {if: true} is not equal to {:if => true}," Long story short, I was writing a method that included an options argument, that will do certain stuff if the value for the key :if, evaluated to true. When I trying the hash in IRB using the new syntax I got a syntax error in IRB, the prompt stays open: Using the old syntax, works just fine: All keywords that start a statement, exhibit the same behavior. E.g. def, do, module, caseOther reserved words that occur in the middle and class work just fine: else, endMy question is: Is this expected behavior, a bug or a limitation? <code>  1.9.3p374 :010 > {if: true}1.9.3p374 :011?> 1.9.3p374 :011 > {:if => true} => {:if=>true} ",IRB - Ruby 1.9.x hash syntax: {if: true} is not equal to {:if => true}
Ruby OpenSSL Issues on Mac," Using rvm I upgraded my ruby to 1.9.3-p392, also added 2.0.0, anytime I try to use this version when I run my bundle command I get this error. I have followed several different instructions on how to fix this. I have tried removing the version and installing it with the rvm options I have installed OpenSSL with rvm, and macports. Both have not helped the problem. I even changed the file location of the ssl cert using this: No matter what I do I continue to get the error. Can someone please help me fix this? <code>  Could not load OpenSSL.You must recompile Ruby with OpenSSL support or change the sources in your Gemfile from 'https' to 'http'. Instructions for compiling with OpenSSL using RVM areavailable at rvm.io/packages/openssl. --with-openssl-dir=$HOME/.rvm/usr export SSL_CERT_FILE=/Users/DarkLord/.rvm/usr/ssl/cert.pem","Ruby and ""You must recompile Ruby with OpenSSL support or change the sources in your Gemfile"""
Ruby gem install not working - GEM_HOME," When running rvm rubygems latest I get the error.How fix it? The log (rubygems.install.log) has this: Because I didn't know what I was doing, I think my earlier attempt at installing sass may have caused this. I followed these instructions, thus doing these commands earlier in the day. Again, I don't if that matters as GEM_HOME and GEM_PATH seem correct. <code>  Error running 'env GEM_PATH=/Users/sjc/.rvm/gems/ruby-2.0.0-p0:/Users/sjc/.rvm/gems/ruby-2.0.0-p0@global:/Users/sjc/.rvm/gems/ruby-2.0.0-p0:/Users/sjc/.rvm/gems/ruby-2.0.0-p0@global GEM_HOME=/Users/sjc/.rvm/gems/ruby-2.0.0-p0 /Users/sjc/.rvm/rubies/ruby-2.0.0-p0/bin/ruby /Users/sjc/.rvm/src/rubygems-2.0.0/setup.rb', please read /Users/sjc/.rvm/log/ruby-2.0.0-p0/rubygems.install.log [2013-03-05 20:31:37] /Users/sjc/.rvm/rubies/ruby-2.0.0-p0/bin/ruby/Users/sjc/.rvm/src/rubygems-2.0.0/lib/rubygems/core_ext/kernel_require.rb:45:in `require': cannot load such file -- openssl (LoadError) from /Users/sjc/.rvm/src/rubygems-2.0.0/lib/rubygems/core_ext/kernel_require.rb:45:in `require' from /Users/sjc/.rvm/src/rubygems-2.0.0/lib/rubygems/security.rb:8:in `<top (required)>' from /Users/sjc/.rvm/src/rubygems-2.0.0/lib/rubygems/core_ext/kernel_require.rb:45:in `require' from /Users/sjc/.rvm/src/rubygems-2.0.0/lib/rubygems/core_ext/kernel_require.rb:45:in `require' from /Users/sjc/.rvm/src/rubygems-2.0.0/lib/rubygems/package.rb:43:in `<top (required)>' from /Users/sjc/.rvm/src/rubygems-2.0.0/lib/rubygems/core_ext/kernel_require.rb:45:in `require' from /Users/sjc/.rvm/src/rubygems-2.0.0/lib/rubygems/core_ext/kernel_require.rb:45:in `require' from /Users/sjc/.rvm/src/rubygems-2.0.0/lib/rubygems/installer.rb:8:in `<top (required)>' from /Users/sjc/.rvm/src/rubygems-2.0.0/lib/rubygems/core_ext/kernel_require.rb:45:in `require' from /Users/sjc/.rvm/src/rubygems-2.0.0/lib/rubygems/core_ext/kernel_require.rb:45:in `require' from /Users/sjc/.rvm/src/rubygems-2.0.0/lib/rubygems/request_set.rb:5:in `<top (required)>' from /Users/sjc/.rvm/src/rubygems-2.0.0/lib/rubygems.rb:195:in `finish_resolve' from /Users/sjc/.rvm/src/rubygems-2.0.0/lib/rubygems/rdoc.rb:14:in `<top (required)>' from /Users/sjc/.rvm/src/rubygems-2.0.0/lib/rubygems/core_ext/kernel_require.rb:45:in `require' from /Users/sjc/.rvm/src/rubygems-2.0.0/lib/rubygems/core_ext/kernel_require.rb:45:in `require' from /Users/sjc/.rvm/src/rubygems-2.0.0/lib/rubygems/uninstaller.rb:10:in `<top (required)>' from /Users/sjc/.rvm/src/rubygems-2.0.0/lib/rubygems/core_ext/kernel_require.rb:45:in `require' from /Users/sjc/.rvm/src/rubygems-2.0.0/lib/rubygems/core_ext/kernel_require.rb:45:in `require' from /Users/sjc/.rvm/src/rubygems-2.0.0/lib/rubygems/commands/setup_command.rb:440:in `uninstall_old_gemcutter' from /Users/sjc/.rvm/src/rubygems-2.0.0/lib/rubygems/commands/setup_command.rb:144:in `execute' from /Users/sjc/.rvm/src/rubygems-2.0.0/lib/rubygems/command.rb:305:in `invoke_with_build_args' from /Users/sjc/.rvm/src/rubygems-2.0.0/lib/rubygems/command_manager.rb:170:in `process_args' from /Users/sjc/.rvm/src/rubygems-2.0.0/lib/rubygems/command_manager.rb:130:in `run' from /Users/sjc/.rvm/src/rubygems-2.0.0/lib/rubygems/gem_runner.rb:60:in `run' from setup.rb:45:in `<main>'RubyGems 2.0.0 installed $ export GEM_HOME=/home/mygemrepository$ ruby setup.rb --prefix=/home/mystuff $ echo $GEM_HOME/Users/sjc/.rvm/gems/ruby-2.0.0-p0$ echo $GEM_PATH/Users/sjc/.rvm/gems/ruby-2.0.0-p0:/Users/sjc/.rvm/gems/ruby-2.0.0-p0@global ",How to install ruby(rubygems) with openssl?
Ruby gem install not working - GEM_PATH," When running rvm rubygems latest I get the error.How fix it? The log (rubygems.install.log) has this: Because I didn't know what I was doing, I think my earlier attempt at installing sass may have caused this. I followed these instructions, thus doing these commands earlier in the day. Again, I don't if that matters as GEM_HOME and GEM_PATH seem correct. <code>  Error running 'env GEM_PATH=/Users/sjc/.rvm/gems/ruby-2.0.0-p0:/Users/sjc/.rvm/gems/ruby-2.0.0-p0@global:/Users/sjc/.rvm/gems/ruby-2.0.0-p0:/Users/sjc/.rvm/gems/ruby-2.0.0-p0@global GEM_HOME=/Users/sjc/.rvm/gems/ruby-2.0.0-p0 /Users/sjc/.rvm/rubies/ruby-2.0.0-p0/bin/ruby /Users/sjc/.rvm/src/rubygems-2.0.0/setup.rb', please read /Users/sjc/.rvm/log/ruby-2.0.0-p0/rubygems.install.log [2013-03-05 20:31:37] /Users/sjc/.rvm/rubies/ruby-2.0.0-p0/bin/ruby/Users/sjc/.rvm/src/rubygems-2.0.0/lib/rubygems/core_ext/kernel_require.rb:45:in `require': cannot load such file -- openssl (LoadError) from /Users/sjc/.rvm/src/rubygems-2.0.0/lib/rubygems/core_ext/kernel_require.rb:45:in `require' from /Users/sjc/.rvm/src/rubygems-2.0.0/lib/rubygems/security.rb:8:in `<top (required)>' from /Users/sjc/.rvm/src/rubygems-2.0.0/lib/rubygems/core_ext/kernel_require.rb:45:in `require' from /Users/sjc/.rvm/src/rubygems-2.0.0/lib/rubygems/core_ext/kernel_require.rb:45:in `require' from /Users/sjc/.rvm/src/rubygems-2.0.0/lib/rubygems/package.rb:43:in `<top (required)>' from /Users/sjc/.rvm/src/rubygems-2.0.0/lib/rubygems/core_ext/kernel_require.rb:45:in `require' from /Users/sjc/.rvm/src/rubygems-2.0.0/lib/rubygems/core_ext/kernel_require.rb:45:in `require' from /Users/sjc/.rvm/src/rubygems-2.0.0/lib/rubygems/installer.rb:8:in `<top (required)>' from /Users/sjc/.rvm/src/rubygems-2.0.0/lib/rubygems/core_ext/kernel_require.rb:45:in `require' from /Users/sjc/.rvm/src/rubygems-2.0.0/lib/rubygems/core_ext/kernel_require.rb:45:in `require' from /Users/sjc/.rvm/src/rubygems-2.0.0/lib/rubygems/request_set.rb:5:in `<top (required)>' from /Users/sjc/.rvm/src/rubygems-2.0.0/lib/rubygems.rb:195:in `finish_resolve' from /Users/sjc/.rvm/src/rubygems-2.0.0/lib/rubygems/rdoc.rb:14:in `<top (required)>' from /Users/sjc/.rvm/src/rubygems-2.0.0/lib/rubygems/core_ext/kernel_require.rb:45:in `require' from /Users/sjc/.rvm/src/rubygems-2.0.0/lib/rubygems/core_ext/kernel_require.rb:45:in `require' from /Users/sjc/.rvm/src/rubygems-2.0.0/lib/rubygems/uninstaller.rb:10:in `<top (required)>' from /Users/sjc/.rvm/src/rubygems-2.0.0/lib/rubygems/core_ext/kernel_require.rb:45:in `require' from /Users/sjc/.rvm/src/rubygems-2.0.0/lib/rubygems/core_ext/kernel_require.rb:45:in `require' from /Users/sjc/.rvm/src/rubygems-2.0.0/lib/rubygems/commands/setup_command.rb:440:in `uninstall_old_gemcutter' from /Users/sjc/.rvm/src/rubygems-2.0.0/lib/rubygems/commands/setup_command.rb:144:in `execute' from /Users/sjc/.rvm/src/rubygems-2.0.0/lib/rubygems/command.rb:305:in `invoke_with_build_args' from /Users/sjc/.rvm/src/rubygems-2.0.0/lib/rubygems/command_manager.rb:170:in `process_args' from /Users/sjc/.rvm/src/rubygems-2.0.0/lib/rubygems/command_manager.rb:130:in `run' from /Users/sjc/.rvm/src/rubygems-2.0.0/lib/rubygems/gem_runner.rb:60:in `run' from setup.rb:45:in `<main>'RubyGems 2.0.0 installed $ export GEM_HOME=/home/mygemrepository$ ruby setup.rb --prefix=/home/mystuff $ echo $GEM_HOME/Users/sjc/.rvm/gems/ruby-2.0.0-p0$ echo $GEM_PATH/Users/sjc/.rvm/gems/ruby-2.0.0-p0:/Users/sjc/.rvm/gems/ruby-2.0.0-p0@global ",How to install ruby(rubygems) with openssl?
Couldn't understand the `Module#prepend_features` and `Module#append_features` in Ruby," From the ModuleModule#append_features(mod) mod => When this module is included in another, Ruby calls append_features in this module, passing it the receiving module in mod. Rubys default implementation is to add the constants, methods, and module variables of this module to mod if this module has not already been added to mod or one of its ancestors.Module#prepend_features(mod) mod => When this module is prepended in another, Ruby calls prepend_features in this module, passing it the receiving module in mod. Rubys default implementation is to overlay the constants, methods, and module variables of this module to mod if this module has not already been added to mod or one of its ancestors.Can anyone help me to understand the below questions:What more features of Module are defined as append and prepend except those default?How they differ functionally?When to use append_features and when prepend_features?what is the difference between two bold lines as above? <code> ",What is the difference between 'include' and 'prepend' in Ruby?
How Do I convert a Month Name into a Month Integer in Ruby," If I start with a string: ""March"", how can I get the integer for that month? <code> ",How Do I Convert a Month Name into a Month Integer in Ruby?
Multiline ruby in Haml," How can I use multiple lines for a single Ruby statement in HAML? For example, I'd like to write something like the following: But of course the first four lines produce a syntax error. <code>  - entries = [{- :title => ""The Fellowship of the Ring"", - :body => ""We should walk instead of fly""- }]!!! 5%html %head %title Blog %body #content - entries.each do |entry| .entry %h3.title= entry[:title] %p.body= entry[:body]",How do I wrap multiline Ruby arguments in HAML?
How to MySQL ruby on rails?," I am really new in Ruby on Rails. I have read this tutorial and it sounds really easy.But how can I connect to my database (MySQL) or what does Rails use? In php I'd use... I have searched google and cannot find any useful tips. <code>  mysql_connect(""..."",""..."",""..."");mysql_select_db(""..."");",How can I connect to MySQL in Ruby on Rails?
Ruby: split body of text into sentences but keep punctuation?," I'm attempting to produce a human readable wiki-like difference between 2 bodies of html laden text. I'm using diff-lcs and the first step is separating the string (array of characters) into an array of sentences, but keep their punctuation. This should do the trick Except gsub appears to have trouble inserting the characters .?!. Instead it's returning this What's the easiest way to do a non-destructive split? As in it keeps the characters it splits by. <code>  ""I am a lion. Hear me roar! Where is my cub? Never mind, found him."".magic_split(/[.?!]/)# => ""I am a lion."" ""Hear me roar!"" ""Where is my cub?"" ""Never mind, found him."" ""I am a lion. Hear me roar! Where is my cub? Never mind, found him."".gsub(/[.?!]/, '\1|').split('|') ""I am a lion| Hear me roar| Where is my cub| Never mind, found him|""",Split body of text into sentences but keep punctuation?
Ruby Sinatra - build routes on top of a common base route?," I have a common base path; say: get /base where I need to have basic auth performed and working for all sub calls under that path. Say: get /base/foo and get /base/bar. Looking at http://www.sinatrarb.com/intro.html#Helpers suggests I should be able to do this with the use of helpers. I was looking at the pass helper and use of call under triggering a new route in the documentation. But, another suggestion I read was using dynamic routing using regexes IE %r{/base/?:(path)?} or some such. So what about: Has anyone dealt with this kind of thing before? I'm trying to keep it DRY. Of course, I'm not sure the given example would be the best in preserving params. <code>  def '/base' # do some funky basic auth stuff here # to work with all request to this common # base path? passenddef %r{/base/?(path)?} do |path| case path when 'foo' # do something. when 'bar' # do something else. end # some kind of redirection or template rendering here: erb :templateend",Build routes on top of a common base route?
"sidekiq, reset counters"," In my sidekiq dashboard, I see on the left a box with the counters How do I reset them all to 0? <code>  Processed 168Failed 111Busy 0Scheduled 0Retries 0Enqueued 0",How do I reset my sidekiq counters?
Possible to make Ruby web apps without a framework?, I want to build a web app in Ruby but I don't know if it's possible to do so without having to use a framework. I don't know why most Ruby developers use a framework like Rails or Sinatra.How do I set up a Ruby web app that's not based on an existing framework? <code> ,Creating a web app in Ruby without a framework
Is it possible to make Ruby web apps without a framework?, I want to build a web app in Ruby but I don't know if it's possible to do so without having to use a framework. I don't know why most Ruby developers use a framework like Rails or Sinatra.How do I set up a Ruby web app that's not based on an existing framework? <code> ,Creating a web app in Ruby without a framework
ruby on rails how to render a page withou layout and other head field, I want to render the page ...with only the code in that page....not add <head>...layout and,ruby on rails how to render a page without layout and other head field
How to check that a file is empty?, I have a text file for example. What is the best way to check in Ruby that a file is empty?File.size('test.rb') == 0 looks ugly. <code> ,How to check that a Ruby file is empty?
Can't get Rspec to work, I just spent three days of my life banging my head against the wall trying to figure out why a simple 'rake' would not pass my spec file. If this happens to you: Do not have a space in any folder path!. Seriously. In fact do not have a space in anything you name from here on out. Here is my console output: (in /Users/*****/Desktop/Learning Ruby/learn_ruby) <code>  $ rake/Users/*******/Desktop/Learning Ruby/learn_ruby/00_hello/hello_spec.rb:116: in `require': cannot load such file -- hello (LoadError),Can't get RSpec to work -- 'require': cannot load such file
Can't get Rspec to work -- 'require': cannot load such file --, I just spent three days of my life banging my head against the wall trying to figure out why a simple 'rake' would not pass my spec file. If this happens to you: Do not have a space in any folder path!. Seriously. In fact do not have a space in anything you name from here on out. Here is my console output: (in /Users/*****/Desktop/Learning Ruby/learn_ruby) <code>  $ rake/Users/*******/Desktop/Learning Ruby/learn_ruby/00_hello/hello_spec.rb:116: in `require': cannot load such file -- hello (LoadError),Can't get RSpec to work -- 'require': cannot load such file
Ruby: Conditional Assignment ( ||= ) inside a loop," If I have: I get 1 2 1 2, whereas I was expecting 1 2 2 3. Why does i lose its assignment when the loop starts over? It behaves as expected if the assignment occurs outside the loop, so I guess it has to do with scope, but I didn't realize loops have their own scopes. Can someone clarify?Update: Thanks for the help on this. Part of my confusion stemmed from coming to Ruby from Python, which doesn't have block scope (I think).  <code>  2.times do i ||= 1 print ""#{i} "" i += 1 print ""#{i} ""end",Scope of a local variable in a block
Scope of a block variable," If I have: I get 1 2 1 2, whereas I was expecting 1 2 2 3. Why does i lose its assignment when the loop starts over? It behaves as expected if the assignment occurs outside the loop, so I guess it has to do with scope, but I didn't realize loops have their own scopes. Can someone clarify?Update: Thanks for the help on this. Part of my confusion stemmed from coming to Ruby from Python, which doesn't have block scope (I think).  <code>  2.times do i ||= 1 print ""#{i} "" i += 1 print ""#{i} ""end",Scope of a local variable in a block
Rails implementation of a database file system," Because ""file system"" and ""rails"" are such common topics both together and separate I fail to find any Ruby on Rails open source app that implements a file system in the database. I would like to use such an application as a starting point or template.I've already been able to implement the User and the Directory models (using Ancestry for the latter), and I'm on my way for the File model (my app only requires one kind of file). In views I'm using jsTree to present the tree and a form to add/delete, edit, ... This will need to change into using AJAX because redirecting back to same page does not preserve the expanded/collapsed state of the tree.However I have this nagging feeling that I'm doing something that has already been done lots of times. Can you please provide links to such application(s) or give hints about implementing both the model part and the view part? <code>  class User < ActiveRecord::Base attr_accessible :email, :name, :password, :password_confirmation has_secure_password has_many :directories, dependent: :destroy # ...end # class Userclass Directory < ActiveRecord::Base attr_accessible :name, :parent_id has_ancestry belongs_to :user has_many :files, dependent: :destroy # ...end # class Directory# not actually implemented, yetclass File < ActiveRecord::Base attr_accessible :name belongs_to :directory # ...end # class File",Rails implementation of a database-based file system
When to use symbols?," If there are at least two instances of the same string in my script, should I instead use a symbol? <code> ",When to use symbols instead of strings in Ruby?
When to use symbols versus strings in Ruby?," If there are at least two instances of the same string in my script, should I instead use a symbol? <code> ",When to use symbols instead of strings in Ruby?
All of my assets return 404 after a push to heroku," I have deployed this app (rails 3.2.11) a million times, I haven't messed with any settings, but now I'm greeted with this:Why did this happen out of the blue? My conents of application.rb include config.assets.enabled = true - never had any issues.In fact running it locally on port 3000 seems to not have any issues whatsoever.After deploying to heroku this morning, it seems that it loads nothing that's inside /assets/Interestingly, after copying the files over to try and just make a new app, git commit results in all the stuff you'd expect as well as a LONG list of these which I think might be related:Edit: Interestingly enough SOME of the assets have loaded, like the logo and the background, but the rest as you can see return 404. <code> ",Most of my assets suddenly return 404 after a push to heroku
Why alias_method fails here," In first call alias_method fails with: I mean it fails when I do for example Country.first.But in console I can call Country.first.langEN successfully, and see that second call also works.What am I missing? <code>  class Country < ActiveRecord::Base #alias_method :name, :langEN # here fails #alias_method :name=, :langEN= #attr_accessible :name def name; langEN end #here worksend NameError: undefined method `langEN' for class `Country'",Why alias_method fails in Rails model
Can not find compiler and 'make' tool - make sure Xcode and/or Command Line Tools are installed," I installed RVM on OS X 10.8.3. The command rvm -v works but there was one error when I tried to execute the following code: Here is the error: I even tried rvm install 1.9.2 but the same error showed up. I also installed Xcode with no luck.  <code>  \curl -L https://get.rvm.io | bash -s stable --rails # Or, --ruby=2.0.0-p195 rvm 1.20.13 (stable) by Wayne E. Seguin , Michal Papis [https://rvm.io/]Searching for binary rubies, this might take some time.No binary rubies available for: osx/10.8/x86_64/ruby-2.0.0-p195.Continuing with compilation. Please read 'rvm mount' to get more information on binary rubies.Installing requirements for osx, might require sudo password. Can not find compiler and 'make' tool - make sure Xcode and/or Command Line Tools are installed.",Why can't RVM find compiler and 'make' tool after installing XCode?
How Fill Join Table With Seed?," I have a problem with a has_and_belongs_to_many association in my Ruby On Rails project.Here are my models: This is my join table migration: I then tried to insert some values with seed.rb: But it doesn't work; I have this error:  <code>  class Store < ActiveRecord::Base attr_accessible :address, :city, :map_url, :name, :uimage_url has_and_belongs_to_many :furnitures_idendclass Furniture < ActiveRecord::Base attr_accessible :description, :image_url, :maintenance, :name, :size has_and_belongs_to_many :store_idend create_table ""furnitures_stores"", :id => false, :force => true do |t| t.integer ""furniture_id"" t.integer ""store_id""end Furniture.delete_allfurnitures = Furniture.create([{name: 'aaaa 1'}])Store.delete_allstoree = Store.create([{name: 'S 1'}]) **rake aborted!uninitialized constant Store::FurnituresId**",has_and_belongs_to_many assocation is not working
Fragment caching in Rails 4 with personalised data," My app (Rails 4) allows users to vote on posts. Is it possible to cache the post, but personalise the vote cache so it shows one personalised for current_user? For example, whether the user voted or not.I would rather not change the html structure to achieve this. <code>  # posts/_post.html.slim- cache post do h1 = post.title = post.text = render 'votes/form', post: post# votes/_form.html.slim- if signed_in? && current_user.voted?(post) = form_for current_user.votes.find_by(post: post), method: :delete do |f| = f.submit- else = form_for Vote.new do |f| = f.submit",How do I cache a personalised fragment in Rails 4?
Nested if loops in rails," I was writing some code and it ended up being way too ugly to my liking. Is there anyway that I can refactor it so that I don't use nested if statements? I know I'll be able to do something like this for availability but how do I set the focus variable accordingly? <code>  def hours_occupied(date) #assuming date is a valid date object availability = get_work_hours(date) focus = ""work"" if availability.nil availability = get_family_hours(date) focus = ""family"" if availability.nil availability = get_friend_hours(date) focus = ""friends"" end endend availability = get_work_hours(date) || get_family_hours(date) || get_friend_hours(date)",Ruby: nested if statements
Ruby: nested if loops," I was writing some code and it ended up being way too ugly to my liking. Is there anyway that I can refactor it so that I don't use nested if statements? I know I'll be able to do something like this for availability but how do I set the focus variable accordingly? <code>  def hours_occupied(date) #assuming date is a valid date object availability = get_work_hours(date) focus = ""work"" if availability.nil availability = get_family_hours(date) focus = ""family"" if availability.nil availability = get_friend_hours(date) focus = ""friends"" end endend availability = get_work_hours(date) || get_family_hours(date) || get_friend_hours(date)",Ruby: nested if statements
Nested if statements in rails," I was writing some code and it ended up being way too ugly to my liking. Is there anyway that I can refactor it so that I don't use nested if statements? I know I'll be able to do something like this for availability but how do I set the focus variable accordingly? <code>  def hours_occupied(date) #assuming date is a valid date object availability = get_work_hours(date) focus = ""work"" if availability.nil availability = get_family_hours(date) focus = ""family"" if availability.nil availability = get_friend_hours(date) focus = ""friends"" end endend availability = get_work_hours(date) || get_family_hours(date) || get_friend_hours(date)",Ruby: nested if statements
do sublimetext has support for ruby API (auto-complete)?," How can I get the list of methods that are available for some object or class, like this:Does Sublime Text have this feature for Ruby?just like this https://github.com/BoundInCode/Display-Functions , but for RubyNOTE: i don't talk about tab complete, what i want for example if i typed ""Array."" then a list of the Array class methods ruby-doc.org/core-1.9.3/Array.html show up in a list, just like in netbeans with java or in eclipse <code> ",Does Sublime Text have support for Ruby API (auto-complete)?
Capistrano deploy:migrate runs all migrations every time," So, I'm diddling around with rails (ruby 1.9.3p392, rails 3.2, sqlite3 db) and I'm trying to deploy the ubiquitous blog tutorial code to a ""production"" server (apache, passenger, ubuntu). My deploy.rb looks like this: Now, I am sure that must look like a big hot mess to those who know what they are doing with capistrano, but I am an utter rube. In the end, despite my inadequacies, the deploy seems to work, because when I run the following my app is up and running and, just because I can, I add a few rows to a table in the db via the web ui that was created for me by rails. Now, I get bold and create a migration, adding a column to a table. I push my changes to git. To my horror, when I run ALL the migrations are run, which recreates the tables, thus destroying all my data. I have repeated this painful process several times. My schema_migrations table looks like this: What am I missing here? UPDATE: I recently gave @TheMahrvin's suggestion regarding running deploy:migrations at the command line and removing it from the deploy.rb. It didn't work... once again, all migrations were run. My muse must have whispered something in my ear, because I decided to try running db:migrate on the server itself. I was astonished to see this output after running just ""rake"": Only the last migrations should be pending. So, perhaps this isn't a problem with Capistrano at all (I've updated the title of this question to reflect that). So, why are the previous migrations still being flagged as pending? I know they were run in the past, both because I saw them in the output and verified the db schema after they ran.UPDATE #2: Setup another migration and ssh'd into the server and cd'd my way to the ""current"" directory, which if I understand capistrano at all (fat chance) is where the current files are. Running got me: I can't help feeling that there is something profoundly wrong with what I am trying to do. <code>  require 'bundler/capistrano'require 'rvm/capistrano'load 'deploy/assets'set :rvm_ruby_string, ENV['GEM_HOME'].gsub(/.*\//,"""")set :rvm_type, :userset :user, 'blah'set :application, 'railsTest'set :domain, 'www.blah.com'set :applicationdir, ""/home/sean/public/blah.com/public""set :scm, 'git'set :repository, ""ssh://blah@1.1.1.1/home/blah/public/bla.com/public/capDep.git""#set :git_enable_submodules, 1 # if you have vendored railsset :branch, 'master'set :git_shallow_clone, 1set :scm_verbose, trueset :use_sudo, false# roles (servers)role :web, domainrole :app, domainrole :db, domain, :primary => true# deploy configset :deploy_to, applicationdirset :deploy_via, :exportset :migrate_target, :latest# additional settingsdefault_run_options[:pty] = true # Forgo errors when deploying from windows#ssh_options[:keys] = %w(/home/blah/.ssh/id_rsa)ssh_options[:forward_agent] = true# if you want to clean up old releases on each deploy uncomment this:# If you are using Passenger mod_rails uncomment this:namespace :deploy do task :start do ; end task :stop do ; end task :restart, :roles => :app, :except => { :no_release => true } do run ""#{try_sudo} touch #{File.join(current_path,'tmp','restart.txt')}"" endend#after ""deploy:update_code"", ""deploy:migrate"" cap deploy:setupcap deploy cap deploy 2013062021000420130620220229201306282133312013062821494620130628223002 20130717230110 CreateHighScores 20130717230342 CreateGames 20130717231041 AddGameTypeToGame 20130717233707 AddGamePublisherToGame 20130717234124 AddGameRatingToGame 20130731210558 AddGameMechanicToGame bundle exec rake db:migrate:status Status Migration ID Migration Name-------------------------------------------------- down 20130717230110 Create high scores down 20130717230342 Create games down 20130717231041 Add game type to game down 20130717233707 Add game publisher to game down 20130717234124 Add game rating to game down 20130731210558 Add game mechanic to game down 20130731212454 Add publish year to game down 20130731214515 Add game rank to game down 20130731214928 Add game abbr to game down 20130731215749 Add crazy field to game",Capistrano deploy:migrate and db:migrate run all migrations every time
How to pass parameters trough the associations chain in FactoryGirl," By default, FactoryGirl calls the factories of associations to create them. I can pass a association for a factory as a parameter. But how can I passa an object which should be used deep in the associations chain?For example:I have a Post, which has a PostsManager, which has an Account, which belongs to the current_user.When I do a Factory(:post) it creates an PostsManager, which creates an Account, which doesn't belongs to the (stubed) current_user.So, in specs that use the Post factory I have to do: What I would like to do is call the factory with Factory(:post, user: current_user), and then pass current_user all the way through the associations to the Account factory. Is there a way to do it so? <code>  account = Factory(:account, user: current_user)post_manager = Factory(:post_manager, account: account)post = Factory(:post, post_manager: post_manager)",How to pass parameters through the associations chain in FactoryGirl
"Ruby File.exist? says no, but truth is yes"," This is my piece of Ruby in a Chef recipe: The result is: I know that /vol/postgres/data exists and is a directory, yet it still attempts to execute the mv. Why?Just to be sure, running the following standalone Ruby script on the same machine outputs ""nomv"": <code>  # if datadir doesn't exist, move over the default oneif !File.exist?(""/vol/postgres/data"") execute ""mv /var/lib/postgresql/9.1/main /vol/postgres/data""end Executing mv /var/lib/postgresql/9.1/main /vol/postgres/datamv: inter-device move failed: `/var/lib/postgresql/9.1/main' to `/vol/postgres/data/main'; unable to remove target: Is a directory if !File.exist?(""/vol/postgres/data"")print ""mv""elseprint ""nomv""end",Check for existing directory fails in Ruby + Chef
Moving directory fails with mv: inter-device move failed," This is my piece of Ruby in a Chef recipe: The result is: I know that /vol/postgres/data exists and is a directory, yet it still attempts to execute the mv. Why?Just to be sure, running the following standalone Ruby script on the same machine outputs ""nomv"": <code>  # if datadir doesn't exist, move over the default oneif !File.exist?(""/vol/postgres/data"") execute ""mv /var/lib/postgresql/9.1/main /vol/postgres/data""end Executing mv /var/lib/postgresql/9.1/main /vol/postgres/datamv: inter-device move failed: `/var/lib/postgresql/9.1/main' to `/vol/postgres/data/main'; unable to remove target: Is a directory if !File.exist?(""/vol/postgres/data"")print ""mv""elseprint ""nomv""end",Check for existing directory fails in Ruby + Chef
"I'm in my app folder, and ""rails s"" is not working"," I'm in my app folder, but the command rails s is not working. I read through quite a few posts on Stack Overflow, and most of them seem to be from users who are not in their app directory.In addition, I built a few other apps. I checked those, and the Rails server works for all of those apps. This is the only one where I can't get it to launch.Output of which rails: Output of rails s: I'm working through Hartl's Rails Tutorial, and he makes quite a few modifications to the gemfile. I am wondering if this might be the cause? <code>  /Users/jmcrist/.rvm/gems/ruby-2.0.0-p247/bin/rails MacBook-Pro:first_app jmcrist$ rails sUsage: rails new APP_PATH [options]Options: -r, [--ruby=PATH] # Path to the Ruby binary of your choice # Default: /Users/jmcrist/.rvm/rubies/ruby-2.0.0-p247/bin/ruby -b, [--builder=BUILDER] # Path to a application builder (can be a filesystem path or URL) -m, [--template=TEMPLATE] # Path to an application template (can be a filesystem path or URL) [--skip-gemfile] # Don't create a Gemfile [--skip-bundle] # Don't run bundle install -G, [--skip-git] # Skip Git ignores and keeps -O, [--skip-active-record] # Skip Active Record files -S, [--skip-sprockets] # Skip Sprockets files -d, [--database=DATABASE] # Preconfigure for selected database (options: mysql/oracle/postgresql/sqlite3/frontbase/ibm_db/sqlserver/jdbcmysql/jdbcsqlite3/jdbcpostgresql/jdbc) # Default: sqlite3 -j, [--javascript=JAVASCRIPT] # Preconfigure for selected JavaScript library # Default: jquery -J, [--skip-javascript] # Skip JavaScript files [--dev] # Setup the application with Gemfile pointing to your Rails checkout [--edge] # Setup the application with Gemfile pointing to Rails repository -T, [--skip-test-unit] # Skip Test::Unit files [--old-style-hash] # Force using old style hash (:foo => 'bar') on Ruby >= 1.9Runtime options: -f, [--force] # Overwrite files that already exist -p, [--pretend] # Run but do not make any changes -q, [--quiet] # Suppress status output -s, [--skip] # Skip files that already existRails options: -h, [--help] # Show this help message and quit -v, [--version] # Show Rails version number and quitDescription: The 'rails new' command creates a new Rails application with a default directory structure and configuration at the path you specify. You can specify extra command-line arguments to be used every time 'rails new' runs in the .railsrc configuration file in your home directory. Note that the arguments specified in the .railsrc file don't affect the defaults values shown above in this help message.Example: rails new ~/Code/Ruby/weblog This generates a skeletal Rails installation in ~/Code/Ruby/weblog. See the README in the newly created application to get going. source 'https://rubygems.org'gem 'rails', '3.2.13'group :development do gem 'sqlite3', '1.3.5'end# Gems used only for assets and not required# in production environments by default.group :assets do gem 'sass-rails', '3.2.5' gem 'coffee-rails', '3.2.2' gem 'uglifier', '1.2.3'endgem 'jquery-rails', '2.0.2'group :production do gem 'pg', '0.12.2'end","Why doesn't ""rails s"" work from the app directory?"
Selenium webdriver documentaion in Ruby, Could anyone point me to useful documentation sites for writing selenium webdriver scripts with Ruby language?I am referring link 'http://docs.seleniumhq.org/docs' but also need other site.  <code> ,Where to find documentation for Selenium WebDriver in Ruby
Regular expressions with validating in RoR 4," There is the following code: It works, but when I try to test it using ""rake test"" I'll catch this message: What does it mean? How can I fix it?  <code>  class Product < ActiveRecord::Base validates :title, :description, :image_url, presence: true validates :price, numericality: {greater_than_or_equal_to: 0.01} validates :title, uniqueness: true validates :image_url, allow_blank: true, format: { with: %r{\.(gif|jpg|png)$}i, message: 'URL must point to GIT/JPG/PNG pictures' }end rake aborted!The provided regular expression is using multiline anchors (^ or $), which may present a security risk. Did you mean to use \A and \z, or forgot to add the :multiline => true option?",Regular expressions with validations in RoR 4
What is the best way to toggle?," What is the best way to have a variable toggle between true and false? An obvious way is to initialize a variable foo: and do: every time when I want to toggle. But this becomes verbose when the variable name is long. Is there a simpler way to do this (by using anything such as syntax sugar, original classes)? Especially, I wonder if there is a way to toggle by just giving it a single method: <code>  foo = false foo = foo.! foo.some_method",What is the best way to toggle a boolean variable?
What is the best way to toggle boolean variable?," What is the best way to have a variable toggle between true and false? An obvious way is to initialize a variable foo: and do: every time when I want to toggle. But this becomes verbose when the variable name is long. Is there a simpler way to do this (by using anything such as syntax sugar, original classes)? Especially, I wonder if there is a way to toggle by just giving it a single method: <code>  foo = false foo = foo.! foo.some_method",What is the best way to toggle a boolean variable?
Regex match count of characters that include non-matching characters," I want to count characters, but they may be separated by characters that do not match.Here is an example.I want to match a text that has 10 or more word-characters. It may include spaces but i don't want to count the spaces.Should not match: ""foo bar baz"" (should count 9)Should not match: ""aa"" (should count 2)Should match: ""foo baz bars"" (should count 10, match whole string)This is what i came up with, but it counts the whole thing: Edit I do not want to include spaces for counting. Sorry I edited this a few times, I didn't describe it correctly.Any ideas on this? <code>  ((?<=\s)*\w(?=\s)*){10}",Regex match count of characters that are separated by non-matching characters
Regex match count of non-matching characters," I want to count characters, but they may be separated by characters that do not match.Here is an example.I want to match a text that has 10 or more word-characters. It may include spaces but i don't want to count the spaces.Should not match: ""foo bar baz"" (should count 9)Should not match: ""aa"" (should count 2)Should match: ""foo baz bars"" (should count 10, match whole string)This is what i came up with, but it counts the whole thing: Edit I do not want to include spaces for counting. Sorry I edited this a few times, I didn't describe it correctly.Any ideas on this? <code>  ((?<=\s)*\w(?=\s)*){10}",Regex match count of characters that are separated by non-matching characters
Rails - Failed to build gem native extension on Ubuntu 12.04," Hey I'm trying to install rails on a new ubuntu machine. I have ruby and rvm installed but I'm getting a ""failed to build gem native extension"" error. What does this mean? (without the sudo says I don't have permissions)Then it outputs a lot of 'fetching' commands and ultimately this error: When I type It says rails is not currently installed <code>  $ sudo gem install rails -v 3.2.9 Building native extensions. This could take a while... ERROR: Error installing rails: ERROR: Failed to build gem native extension. /usr/bin/ruby1.9.1 extconf.rb /usr/lib/ruby/1.9.1/rubygems/custom_require.rb:36:in `require': cannot load such file -- mkmf (LoadError) from /usr/lib/ruby/1.9.1/rubygems/custom_require.rb:36:in `require' from extconf.rb:1:in `<main>' Gem files will remain installed in /var/lib/gems/1.9.1/gems/json-1.8.0 for inspection. Results logged to /var/lib/gems/1.9.1/gems/json-1.8.0/ext/json/ext/generator/gem_make.out $rails server",Failed to build gem native extension (mkmf (LoadError)) - Ubuntu 12.04
Removing backslahes in json string," I have a JSON string that looks as below I need to change it to the one below using Ruby or Rails: I need to know how to remove those slashes. <code>  '{\""test\"":{\""test1\"":{\""test1\"":[{\""test2\"":\""1\"",\""test3\"": \""foo\"",\""test4\"":\""bar\"",\""test5\"":\""test7\""}]}}}' '{""test"":{""test1"":{""test1"":[{""test2"":""1"",""test3"": ""foo"",""test4"":""bar"",""test5"":""bar2""}]}}}'",How do I remove backslashes from a JSON string?
Removing backslashes in JSON string," I have a JSON string that looks as below I need to change it to the one below using Ruby or Rails: I need to know how to remove those slashes. <code>  '{\""test\"":{\""test1\"":{\""test1\"":[{\""test2\"":\""1\"",\""test3\"": \""foo\"",\""test4\"":\""bar\"",\""test5\"":\""test7\""}]}}}' '{""test"":{""test1"":{""test1"":[{""test2"":""1"",""test3"": ""foo"",""test4"":""bar"",""test5"":""bar2""}]}}}'",How do I remove backslashes from a JSON string?
How do I removing backslashes from a JSON string?," I have a JSON string that looks as below I need to change it to the one below using Ruby or Rails: I need to know how to remove those slashes. <code>  '{\""test\"":{\""test1\"":{\""test1\"":[{\""test2\"":\""1\"",\""test3\"": \""foo\"",\""test4\"":\""bar\"",\""test5\"":\""test7\""}]}}}' '{""test"":{""test1"":{""test1"":[{""test2"":""1"",""test3"": ""foo"",""test4"":""bar"",""test5"":""bar2""}]}}}'",How do I remove backslashes from a JSON string?
Rails 4 add file_field for attachment upload to existing form and controller," I'm super new to rails. Been learning a few weeks now. Please excuse my idiocy. I cannot get my file I've selected to upload.I'm using Rails 4.0.0.I am working on my first application, and I started by following the rails guide for the blog application. I took that and ran with it and am creating something different (bug tracking system) just trying to learn to ropes.So, I've got my form: and I've added in my file_field. The display part in from the view looks and works good as far as selecting a file goes. I've pulled this from the rails 4 guides FYI. So my controller looks like this: The new piece in here is upload. Everything else is working fine with writing/reading from the database and displaying. When the view is displayed I make text entries, attached a file and hit submit. Everything writes to the database and shows up on index, but the file I've attempted to attached does not get written to ~/bugs/public/uploads/Thanks in advance for the help. <code>  <%= form_for @post do |f| %> <%= f.label :attachment %><%= f.file_field :attachment %> class PostsController < ApplicationController def new @post = Post.new end def create @post = Post.new(params[:post].permit(:title, :text, :user, :screen)) if @post.save redirect_to posts_path else render 'new' end end def show @post = Post.find(params[:id]) end def index @posts = Post.all end def edit @post = Post.find(params[:id]) end def update @post = Post.find(params[:id]) if @post.update(params[:post].permit(:title, :text, :user, :screen)) redirect_to posts_path else render 'edit' end end def destroy @post = Post.find(params[:id]) @post.destroy redirect_to posts_path end def upload uploaded_io = params[:post][:attachment] File.open(Rails.root.join('public', 'uploads', uploaded_io.original_filename), 'w') do |file| file.write(uploaded_io.read) end end private def post_params params.require(:post).permit(:title, :text, :user, :screen, :attachment) endend",Add file_field for attachment upload to existing form and controller
"A method definition begins with hooks, can't understand its usefulness"," In Ruby, I see a method's definition like this: What does this method declaration mean? How does it work? When to use it? And how to call this kinds of method with an instance object? <code>  def [](param) # do stuffend","A method definition begins with brackets, can't understand its usefulness"
Rails strong paramaters with objects array," When using Rails 4.0 strong parameters, how do I permit JSON like this? I tried: But it didn't work. <code>  { ""user"": { ""first_name"":""Jello"" }, ""users_to_employer"":[ { ""start_date"":""2013-09-03T16:45:27+02:00"", ""end_date"":""2013-09-10T16:45:27+02:00"", ""employer"":{""company_name"":""Telenor""} }, { ""start_date"":""2013-09-17T16:45:27+02:00"", ""end_date"":null, ""employer"":{""company_name"":""Erixon""} } ]} params.require(:users_to_employers => []).permit( :start_date, :end_date => nil, :employer => [ :company_name ])",How to use strong parameters with an objects array in Rails
Rails strong parameters with objects array," When using Rails 4.0 strong parameters, how do I permit JSON like this? I tried: But it didn't work. <code>  { ""user"": { ""first_name"":""Jello"" }, ""users_to_employer"":[ { ""start_date"":""2013-09-03T16:45:27+02:00"", ""end_date"":""2013-09-10T16:45:27+02:00"", ""employer"":{""company_name"":""Telenor""} }, { ""start_date"":""2013-09-17T16:45:27+02:00"", ""end_date"":null, ""employer"":{""company_name"":""Erixon""} } ]} params.require(:users_to_employers => []).permit( :start_date, :end_date => nil, :employer => [ :company_name ])",How to use strong parameters with an objects array in Rails
Rails 3: fields_for showing blank filed on Edit view.," On my Rails 3 app, I'm using fields_for inside a form_for to create and edit questions and answers. But I'm having a problem with Edit view on fields_for for answers. When I have 2 answers registered on the DB for 1 Question, the edit view shows the 2 answers plus a blank field.Here is the model code, and the views code:Question Model: Answer Model: And finally the partial used for New and Edit view: Everything works fine, just on edit view, there is always one more blank field rendered. Is there a way to remove this blank field?EDIT:Question Controller Answer Controller <code>  # encoding: utf-8class Question < ActiveRecord::Base attr_accessible :description, :question_id , :research_id , :answer_id ,:answer_attributes has_many :answer, :class_name => ""Answer"", :dependent => :destroy accepts_nested_attributes_for :answer , :allow_destroy => true belongs_to :researchend class Answer < ActiveRecord::Base belongs_to :question has_many :evaluate_answers attr_accessible :question_id, :description , :answer_attributesend <%= form_for [:admin, @question] ,:html => { :class => ""form-horizontal"", :multipart => true, :onSubmit => "" return teste()"" } do |f| %> ... .... <div id=""div_respostas"" class=""respostas"" style=""margin-top: 25px; margin-left: 65px;""> <div id=""campo_answers""> <%= hidden_field_tag :count_resp, 0%> <p>Respostas <a href=""#""><%=image_tag(""admin/icons/btn_adicionar_p.jpg"" ,{:onclick =>'add_answer()'}) %></a></p> <%= f.fields_for :answer do |a| %> <div id=""answer_<%= @number = @number + 1 %>""> <%= a.text_field ""description"" %> Delete: <%= a.check_box :_destroy %> <a class=""button_<%=@number%>"" href=""#""><%=image_tag(""admin/icons/btn_excluir_p.jpg"" , {:onclick =>""remove_answer(#{@number})""}) %></a><br /><br /> </div> <%end%> def edit @question = Question.find(params[:id]) @answers = Answer.where(:question_id => @question.question_id) @number = 0 @question.answer.build @questions = Question.all end class AnswersController < ApplicationController def index @answers = Answer.all endend",Rails 3: fields_for showing blank filed on Edit view
Adding key value pair to beginning of hash ruby," My code is: Within the method, puts hash returns { :one => 1, :two => 2, :three => 3 }, but when hash1 is put to the method, it remains unchanged afterward. It's like the assignment isn't carrying itself outside of the function.I guess I could return the updated hash and set the hash I want to change to it outside the method: But I just don't see why the assignment I give to the hash does not stick outside of the method.I have this, which works: Which gives me what I'm wanting when this method is called, but it just seems a little excessive to have to rebuild the hash like that. <code>  hash = { two: 2, three: 3 }def hash_add(hash, new_key, new_value) temp_hash = {} temp_hash[new_key.to_sym] = new_value temp_hash.merge!(hash) hash = temp_hash puts hashendhash_add(hash, 'one', 1) hash = hash_add(hash, 'one', 1) def hash_add(hash, new_key, new_value) temp_hash = {} temp_hash[new_key.to_sym] = new_value temp_hash.merge!(hash) hash.clear temp_hash.each do |key, value| hash[key] = value endend",How do I add a key/value pair to the beginning of a hash?
Is it possible to include local functions in the current scope without hacking Object," Sinatra defines a number of methods which appear to live in the current scope, i.e. not within a class declaration. These are defined in the Sinatra gem. I'd like to be able to write a gem which will create a function which I can call from the global scope, e.g This would then call the function my_blog in the global scope.Obviously I could monkeypatch the Object class in the gem with the add_blog function, but this seems like overkill as it would extend every object. <code>  add_blog(:my_blog)",How can I add a method to the global scope in Ruby?
Is it possible in Ruby to wrate a gem which will create a function that can be called from the global scope without hacking Object," Sinatra defines a number of methods which appear to live in the current scope, i.e. not within a class declaration. These are defined in the Sinatra gem. I'd like to be able to write a gem which will create a function which I can call from the global scope, e.g This would then call the function my_blog in the global scope.Obviously I could monkeypatch the Object class in the gem with the add_blog function, but this seems like overkill as it would extend every object. <code>  add_blog(:my_blog)",How can I add a method to the global scope in Ruby?
Is it possible in Ruby to add a method to the global scope from within a gem without hacking Object," Sinatra defines a number of methods which appear to live in the current scope, i.e. not within a class declaration. These are defined in the Sinatra gem. I'd like to be able to write a gem which will create a function which I can call from the global scope, e.g This would then call the function my_blog in the global scope.Obviously I could monkeypatch the Object class in the gem with the add_blog function, but this seems like overkill as it would extend every object. <code>  add_blog(:my_blog)",How can I add a method to the global scope in Ruby?
Why does my rails rollback when i try to user.save?," I have installed the RailsTutorial sample app(the twitter like application) and am trying to understand why the following piece of console code does not update the database when I try updating the user db. I am expecting the user information to get updated once I use the user.save. However, this rolls back to unedited data. Is this due to a user based restriction? Users controller: Rails console: User model: <code>  class UsersController < ApplicationController#before_filter :signed_in_user, only: [:index, :edit, :update, :destroy, :following, :followers]# By default before filters apply to all actions#before_filter :correct_user, only: [:edit, :update] def edit @user = User.find(params[:id]) end def update @user = User.find params[:id] respond_to do |format| if @user.update_attributes(params[:user]) flash[:notice] = ""Profile updated"" format.html { redirect_to(@user, :notice => 'User was successfully updated.') } format.json { respond_with_bip(@user) } else format.html { render :action => ""edit"" } format.json { respond_with_bip(@user) } end end end private def correct_user @user = User.find(params[:id]) redirect_to(root_path) unless current_user?(@user) end def admin_user redirect_to(root_path) unless current_user.admin? endend 1.9.3-p392 :001 > user = User.find(109)User Load (8.2ms) SELECT ""users"".* FROM ""users"" WHERE ""users"".""id"" = ? LIMIT 1 [[""id"", 109]] => #<User id: 109, name: ""laurie"", email: ""auriepage@gmail.com"", created_at: ""2013-09-26 18:10:12"", updated_at: ""2013-09-26 18:10:12"", password_digest: ""$2a$10$aXEtun8Z2Deqy2wNxvFRNOjPczKQkYc1vDezP5OduJuF..."", remember_token: ""YhIUhgFm9iMewxdNOHJ45A"", admin: false> 1.9.3-p392 :002 > user.name = ""larry"" => ""larry"" 1.9.3-p392 :003 > user.save (0.2ms) begin transaction User Exists (0.6ms) SELECT 1 AS one FROM ""users"" WHERE (LOWER(""users"".""email"") = LOWER('auriepage@gmail.com') AND ""users"".""id"" != 109) LIMIT 1 (0.1ms) rollback transaction => false class User < ActiveRecord::Base# Declaration of public variables attr_accessible :email, :name, :password, :password_confirmation has_secure_password has_many :microposts, dependent: :destroy has_many :relationships, foreign_key: ""follower_id"", dependent: :destroy has_many :followed_users, through: :relationships, source: :followed has_many :reverse_relationships, foreign_key: ""followed_id"", class_name: ""Relationship"", dependent: :destroy has_many :followers, through: :reverse_relationships, source: :follower before_save {email.downcase!} before_save :create_remember_token validates :name, presence: true, length: {maximum: 50} VALID_EMAIL_REGEX = /\A[\w+\-.]+@[a-z\d\-.]+\.[a-z]+\z/i validates :email, presence: true, format: {with: VALID_EMAIL_REGEX}, uniqueness: {case_sensitive: false} validates :password, presence: true, length: {minimum: 6} validates :password_confirmation, presence: true after_validation {self.errors.messages.delete(:password_digest)} private def create_remember_token self.remember_token = SecureRandom.urlsafe_base64 endend",Why does my rails rollback when I try to user.save?
How do I perform this translation efficiently?," I have a table of 1.6M IP ranges with organization names. The IP addresses are converted to integers. The table is in the form of:I have a list of 2000 unique ip addresses (e.g. 321223, 531223, ....) that need to be translated to an organization name.I loaded the translation table as a mysql table with an index on IP_from and IP_to. I looped through the 2000 IP addresses, running one query per ip address, and after 15 minutes the report was still running. The query I'm using is Is there a more efficient way to do this batch look-up? I'll use my fingers if it's a good solution. And in case someone has a Ruby-specific solution, I want to mention that I'm using Ruby. <code>  select organization from iptable where ip_addr BETWEEN ip_start AND ip_end",Efficient lookup in a range table
RegExp#math return only one match," Explain me, please, why match() returns only one match, instead of four (for example): It is stranger that with grouping match() return two matches, independently of real matches count: Thank for yours answers. <code>  s = 'aaaa'p /a/.match(s).to_a # => [""a""] s = 'aaaa'p /(a)/.match(s).to_a # => [""a"", ""a""]s = 'a aaa a'p /(a)/.match(s).to_a # => [""a"", ""a""]",RegExp#match returns only one match
Sort a ruby array of hashes," So I have an array of hashes: And I want to sort it by the id attribute, so that it looks like this: I'm assuming I use the sort_by method but I'm not exactly sure how to do it. <code>  [{""id"":""30"",""name"":""Dave""}, {""id"":""57"",""name"":""Mike""}, {""id"":""9"",""name"":""Kevin""}, ... {""id"":""1"",""name"":""Steve""}] [{""id"":""1"",""name"":""Steve""}, {""id"":""2"",""name"":""Walter""}, ... {""id"":""60"",""name"":""Chester""}]",Sort in ruby a JSON array of hashes
Rails %w(...) vs %w[...]," Is there a difference between %w(don matt james) and %w[don matt james] in Ruby?Using the Ruby Console, both of them output an array with each word as an element. I'm curious why there are multiple ways to do this - and how each way is supposed to be used.  <code> ",Ruby %w(...) vs %w[...]
"Rails: ""if name is"" alternatives"," I've got a lot of code like this in my app: Which I realise is poor and ugly code. I'm not sure though what alternatives exist for this kind of code. Are there any best practices for it? I hope so. Cheers!Sample controller codeIn this controller code sample it posts an image to Twitter if the name is ""Newsletter"". I know it's messy, and that a lot of the code should be moved to the model. I'm more concerned about the conditional though. <code>  if @document.template.name == ""Newsletter"" ...end if @document.template.name == ""Newsletter"" source = Magick::Image.read(@document.component.image_newsletter.path).first overlay = Magick::Image.read(@document.user.logo.path).first.resize_to_fit(source.columns) rec = Magick::Draw.new rec.stroke = ""##{@document.user.colour1}"" rec.fill = ""##{@document.user.colour1}"" rec.rectangle 0, 0, source.rows, 5 lank = source.extent(source.columns, source.rows+overlay.rows, 0 ,0) combo = lank.composite(overlay, Magick::SouthGravity, 0, 0, Magick::OverCompositeOp) rec.draw(combo) client.update_with_media(""#{@document.title}: #{@document.remove_html(@document.components.first.body[0..100])}..."", open(combo.to_blob))else client.update(""#{@document.title}: #{@document.remove_html(@document.components.first.body[0..100])}... http://domain.com#{share_path(@document.user.ftp, @document)}"")end",How to clean up messy views and controllers in Rails?
How to clean up messy views in Rails?," I've got a lot of code like this in my app: Which I realise is poor and ugly code. I'm not sure though what alternatives exist for this kind of code. Are there any best practices for it? I hope so. Cheers!Sample controller codeIn this controller code sample it posts an image to Twitter if the name is ""Newsletter"". I know it's messy, and that a lot of the code should be moved to the model. I'm more concerned about the conditional though. <code>  if @document.template.name == ""Newsletter"" ...end if @document.template.name == ""Newsletter"" source = Magick::Image.read(@document.component.image_newsletter.path).first overlay = Magick::Image.read(@document.user.logo.path).first.resize_to_fit(source.columns) rec = Magick::Draw.new rec.stroke = ""##{@document.user.colour1}"" rec.fill = ""##{@document.user.colour1}"" rec.rectangle 0, 0, source.rows, 5 lank = source.extent(source.columns, source.rows+overlay.rows, 0 ,0) combo = lank.composite(overlay, Magick::SouthGravity, 0, 0, Magick::OverCompositeOp) rec.draw(combo) client.update_with_media(""#{@document.title}: #{@document.remove_html(@document.components.first.body[0..100])}..."", open(combo.to_blob))else client.update(""#{@document.title}: #{@document.remove_html(@document.components.first.body[0..100])}... http://domain.com#{share_path(@document.user.ftp, @document)}"")end",How to clean up messy views and controllers in Rails?
Downgrading or installing older version of Cocoapods," How can I downgrade Cocoapods to an older version, or how can I install an older version of Cocoapods? <code> ",How to downgrade or install an older version of Cocoapods
How to downgrad or install an older version of Cocoapods," How can I downgrade Cocoapods to an older version, or how can I install an older version of Cocoapods? <code> ",How to downgrade or install an older version of Cocoapods
How to write to file in ruby," There are many SO answers for this such as ""How to write to file in Ruby?"", but I am missing a point with a path to file:I have a file structure like this: and ""write_to_file.rb"" has the following content: How do I write some content to test.txt file from another write_to_file.rb?  <code>  test.txt write_to_file.rb File.open('test.txt', 'w') { |file| file.write('hello') } # tried ('./test.txt','w') ..as well.",How do I write to a file in Ruby?
Active admin CSV export custom query, Am using active admin Export CSV option. Its returning all the values related to the particular table.I want the reports only for a particular month.Can anyone help? <code> ,Active admin CSV export custom query scoped
ruby - how to check if a variable really responds_to :dup," I wanted to use value.respond_to?(:dup) ? value.dup : value in order to check if I can duplicate an object but it failed with TypeError on booleans, nil or such ""primitives"" alike.I've ended up with: Is there a better way? Bonus: Why does it responds :dup?Not deep dup, just for the question.EDIT: Thoughts:obj.class.methods.include? :new is nice but a bit too hackish i think it has bad performance Marshal also looks like an overkillone line rescue could have been the best solution, but type specific one line rescue is not possible at this time (IIUC matz is on that!), and as @JrgWMittag mentioned its wrong. Personally i think dup being defined at the object level is wrong.So, quoting @Linuxios There isn't really a better way <code>  begin value = value.duprescue #ignore, use the original if no dup-able (e.g nil, true, etc)end",How do I check if a variable really responds_to :dup?
Dump pry Output to File/Vim," I have a Rails application, and I'm trying to export data, but directly through Pry because I only need to do it once.Is this possible with Pry? I looked at the documentation but doesn't seem like there's an easy way to dump console data anywhere. <code> ",How do I dump Pry output to a file or Vim?
Ruby: What is different between Integer and Fixnum?," I know that the Fixnum class inherits from the Integer class. But what is the actual difference between them? Are there any use cases where we sometimes use Fixnum, and sometimes use Integer instead? <code> ",What is the difference between Integer and Fixnum?
Ruby: What is the difference between Integer and Fixnum?," I know that the Fixnum class inherits from the Integer class. But what is the actual difference between them? Are there any use cases where we sometimes use Fixnum, and sometimes use Integer instead? <code> ",What is the difference between Integer and Fixnum?
How do I convert a Time integer to a Date in Ruby?," I'm getting this stamp from an external API: and I need to convert it to a Date. I have seen a lot of conversion pages on the internet and on SO, but they all seem to be going the other way. I'm not familiar with this integer format at all. WHY THIS IS NOT A DUPLICATE QUESTION *This question should not be marked as a duplicate because the referenced question specifically mentions seconds since epoch. While that is actually the number I was looking for, I had no idea it was called that. Judging by the very quick up-votes and a favorite as well as 40 views in less than one week, I would judge that the seconds since epoch time format is not universally known among programmers. Thus SO users will benefit from the question being asked both ways. <code>  1391655852",How do I convert this Time integer to a Date in Ruby?
Ruby: Get a array of the values of a key from an array of hashes," For an array like this: I would like to return an array containing values for :a keys, so: That can be done using: I wonder if there is a native method in Rails or Ruby to do it like this? <code>  a = [{a:'a',b:'3'},{a:'b',b:'2'},{a:'c',b:'1'}] ['a', 'b', 'c'] a.map{|x|x[:a]} a.something :a",Get an array of the values of a key from an array of hashes?
Ruby on Rails 3 / 4 - What authentication gem do you use?," So in the past we had acts_as_authenticated, restful_authentication etc... But now there are a variety of options along with Rails itself having authentication functionality.I'm about to start a new rails project and am interested in what everyone's preference (for non oAuth) authentication and what you would recommend I consider?Thanks,Scott <code> ",Ruby on Rails 4 - What authentication gem to use?
Sending raw XML using Savon," I'm trying to use Savon to send requests to a webservice. The service I'm consuming requires nested namespaces, and I haven't figured out yet how to provide them on a request.I've tried to craft the request by hand (with nokogiri, actually) and send the resulting xml: But savon escapes the string and sends &lt;elem/&gt;How can I send raw xml without escaping? <code>  client.call(:some_op, :message=>{:""op""=>""<elem/>""})",Sending raw XML using Savon 2
Posting videos to Facebook as a command-line (desktop) application," I am working for a charity which is promoting sign language, and they want to post a video to their FB page every day. There's a large (and growing) number of videos, so they want to schedule the uploads programmatically. I don't really mind what programming language I end up doing this in, but I've tried the following and not got very far:Perl using WWW::Facebook::API (old REST API) Authentication is OK, and this correctly posts a facebook.video.upload method to https://api-video.facebook.com/restserver.php. Unfortunately, this returns ""Method unknown"". I presume this is to do with the REST API being deprecated.Facebook::Graph in Perl or fb_graph gem in Ruby. (OAuth API)I can't even authenticate. Both of these are geared towards web rather than desktop applications of OAuth, but I think I ought to be able to do: Go to that URL in my browser, capture the code parameter returned, and then Unfortunately: Similarly in Ruby, using fb_graph, Gives me a URL which returns a code, but running returns Update: When I change the access_token! call to access_token!(""foobar"") to force Rack::OAuth2::Client to put the identifier and secret into the request body, I get the following error instead: How am I supposed to authenticate a desktop/command line app to Facebook using OAuth? <code>  my $res = $client->video->upload( title => $name, description => $description, data => scalar(read_file(""videos/split/$name.mp4""))); my $fb = Facebook::Graph->new( app_id => ""xxx"", secret => ""yyy"", postback => ""https://www.facebook.com/connect/login_success.html"");print $fb->authorize->extend_permissions(qw(publish_stream read_stream))->uri_as_string; my $r = $fb->request_access_token($code); Could not fetch access token: Bad Request at /Library/Perl/5.16/Facebook/Graph/AccessToken/Response.pm line 26 fb_auth = FbGraph::Auth.new(APP_ID, APP_SECRET)client = fb_auth.clientclient.redirect_uri = ""https://www.facebook.com/connect/login_success.html""puts client.authorization_uri( :scope => [:publish_stream, :read_stream]) client.authorization_code = <code>FbGraph.debug!access_token = client.access_token! { ""error"": { ""message"": ""Missing client_id parameter."", ""type"": ""OAuthException"", ""code"": 101 }} { ""error"": { ""message"": ""The request is invalid because the app is configured as a desktop app"", ""type"": ""OAuthException"", ""code"": 1 }}",Obtaining a Facebook auth token for a command-line (desktop) application
file accessing in ruby," What is the different between the following statements? I used above statements in Chef framework of Ruby. <code>  #(not working)File.exists?(""path to file"")#(working)::File.exists?(""path to file"")",Accessing a file in ruby - differences
Rails gem for complex password rules?," I need to implement password security with various flexible requirements. The requirements are essentially taken from the Sans password policy: Strong passwords have the following characteristics: Contain at least three of the five following character classes: Lower case characters Upper case characters Numbers Punctuation Special characters (e.g. @#$%^&*()_+|~-=`{}[]:"";'<>/ etc) Contain at least fifteen alphanumeric characters. There are also requirements of not allowing the users email address to appear in the password.Ideally, I would like a gem that would handle this - it would be more widely tested and used, and we would be less likely to have bugs.If no gem covers this, then what is the best and most-hardened method to handle these requirements? Ideally we would be able to say that we are not only safe, but safe because we have an industry standard implementation.The gems I have found so far are:Devise Security Extensions, which has a very simple regex for checking that there is uppercase, lowercase, and digitsandStrong Password, which looks to just provide an entropy check to let the user know if their password is strong.(We are using Rails 3.2.17 and Ruby 1.9.3, but are planning on moving to Rails 4 and Ruby 2 soon, so newer solutions are also welcome). <code> ",Best flexible rails password security implementation
Ruby Unary Operator Behavior, Had some weird results when redefining the unary + operator in Ruby on the Fixnum class. Not exactly sure why things are happening the way they are (specifically line 009). <code>  irb:003> class Fixnumirb:004> def +@ #define unary +irb:005> 15irb:006> endirb:007> end=> nilirb:008> 2=> 2irb:009> +2=> 2irb:010> +(2)=> 15irb:011> ++2=> 15,Unary operators behavior
Calculate set partitions with specific group sizes," Given a set with n elements, I need to find all the partitions of that set where there are k subsets of almost equal size.For example, for a set with 7 elements and 3 subsets I only want partitions where there are two subsets with 2 elements each and one subset with 3 elements. I do not want a partition that has subsets with 1, 2, and 4 elements.Put another way, there are 877 possible partitions for a set of 7 elements, but I'm only interested in the 105 (?) partitions that are made up subsets with 2/2/3 elements:                In reality n is around 35, which means that there are approximately 2.81 * 1027 partitions, ""only"" 8,338,573,669,964,101 partitions with three subsets. As such, I can't possibly calculate them all and wade through to find the ones that I want.What's an algorithm for calculating just the partitions of interest? (Not the number of partitions, but that actual members in each sub-set for each partition.) <code> ",Calculate set partitions with specific subset sizes
Ruby error? Time object to_date() method returns wrong date," We're using Ruby 1.9.3, and I found what appears to be a strange Ruby error with Time#to_dateTime.new(1).to_date returns 3 January 0001 when it should return 1 January 0001.I discovered this problem accidentally. It seems if I call .to_datetime.to_date,the result would be correct.I also found some other related weirdness. See the irb console output below.(Note I'm using irb, not rails console to ensure that it's only Ruby I'm using,not any add-on stuff of Rails.) Could someone explain why this happens? Is this related to Unix time somehow?It seems DateTime is more reliable, at least with Ruby 1.9.3. <code>  >> require ""Time""=> true>> Time.new(1).to_date=> #<Date: 0001-01-03 ((1721426j,0s,0n),+0s,2299161j)>>> Time.new(1).to_datetime=> #<DateTime: 0001-01-01T00:00:00+01:00 ((1721423j,82800s,0n),+3600s,2299161j)>>> Time.new(1).to_datetime.to_date=> #<Date: 0001-01-01 ((1721424j,0s,0n),+0s,2299161j)>>> Time.new(100).to_date=> #<Date: 0100-01-03 ((1757585j,0s,0n),+0s,2299161j)>>> Time.new(1969).to_date=> #<Date: 1969-01-01 ((2440223j,0s,0n),+0s,2299161j)>>> Time.new(500).to_date=> #<Date: 0499-12-31 ((1903682j,0s,0n),+0s,2299161j)>>> Time.new(1000).to_date=> #<Date: 0999-12-27 ((2086303j,0s,0n),+0s,2299161j)>>> Time.new(2014).to_date=> #<Date: 2014-01-01 ((2456659j,0s,0n),+0s,2299161j)>>> Time.new(1,1,1,10,0,0, ""+00:00"").to_date=> #<Date: 0001-01-03 ((1721426j,0s,0n),+0s,2299161j)>>> DateTime.new(1,1,1,10,0,0, ""+00:00"").to_date=> #<Date: 0001-01-01 ((1721424j,0s,0n),+0s,2299161j)>",Ruby Time#to_date() method returns wrong date
Time object to_date() method returns wrong date," We're using Ruby 1.9.3, and I found what appears to be a strange Ruby error with Time#to_dateTime.new(1).to_date returns 3 January 0001 when it should return 1 January 0001.I discovered this problem accidentally. It seems if I call .to_datetime.to_date,the result would be correct.I also found some other related weirdness. See the irb console output below.(Note I'm using irb, not rails console to ensure that it's only Ruby I'm using,not any add-on stuff of Rails.) Could someone explain why this happens? Is this related to Unix time somehow?It seems DateTime is more reliable, at least with Ruby 1.9.3. <code>  >> require ""Time""=> true>> Time.new(1).to_date=> #<Date: 0001-01-03 ((1721426j,0s,0n),+0s,2299161j)>>> Time.new(1).to_datetime=> #<DateTime: 0001-01-01T00:00:00+01:00 ((1721423j,82800s,0n),+3600s,2299161j)>>> Time.new(1).to_datetime.to_date=> #<Date: 0001-01-01 ((1721424j,0s,0n),+0s,2299161j)>>> Time.new(100).to_date=> #<Date: 0100-01-03 ((1757585j,0s,0n),+0s,2299161j)>>> Time.new(1969).to_date=> #<Date: 1969-01-01 ((2440223j,0s,0n),+0s,2299161j)>>> Time.new(500).to_date=> #<Date: 0499-12-31 ((1903682j,0s,0n),+0s,2299161j)>>> Time.new(1000).to_date=> #<Date: 0999-12-27 ((2086303j,0s,0n),+0s,2299161j)>>> Time.new(2014).to_date=> #<Date: 2014-01-01 ((2456659j,0s,0n),+0s,2299161j)>>> Time.new(1,1,1,10,0,0, ""+00:00"").to_date=> #<Date: 0001-01-03 ((1721426j,0s,0n),+0s,2299161j)>>> DateTime.new(1,1,1,10,0,0, ""+00:00"").to_date=> #<Date: 0001-01-01 ((1721424j,0s,0n),+0s,2299161j)>",Ruby Time#to_date() method returns wrong date
Ruby Time object to_date() method returns wrong date," We're using Ruby 1.9.3, and I found what appears to be a strange Ruby error with Time#to_dateTime.new(1).to_date returns 3 January 0001 when it should return 1 January 0001.I discovered this problem accidentally. It seems if I call .to_datetime.to_date,the result would be correct.I also found some other related weirdness. See the irb console output below.(Note I'm using irb, not rails console to ensure that it's only Ruby I'm using,not any add-on stuff of Rails.) Could someone explain why this happens? Is this related to Unix time somehow?It seems DateTime is more reliable, at least with Ruby 1.9.3. <code>  >> require ""Time""=> true>> Time.new(1).to_date=> #<Date: 0001-01-03 ((1721426j,0s,0n),+0s,2299161j)>>> Time.new(1).to_datetime=> #<DateTime: 0001-01-01T00:00:00+01:00 ((1721423j,82800s,0n),+3600s,2299161j)>>> Time.new(1).to_datetime.to_date=> #<Date: 0001-01-01 ((1721424j,0s,0n),+0s,2299161j)>>> Time.new(100).to_date=> #<Date: 0100-01-03 ((1757585j,0s,0n),+0s,2299161j)>>> Time.new(1969).to_date=> #<Date: 1969-01-01 ((2440223j,0s,0n),+0s,2299161j)>>> Time.new(500).to_date=> #<Date: 0499-12-31 ((1903682j,0s,0n),+0s,2299161j)>>> Time.new(1000).to_date=> #<Date: 0999-12-27 ((2086303j,0s,0n),+0s,2299161j)>>> Time.new(2014).to_date=> #<Date: 2014-01-01 ((2456659j,0s,0n),+0s,2299161j)>>> Time.new(1,1,1,10,0,0, ""+00:00"").to_date=> #<Date: 0001-01-03 ((1721426j,0s,0n),+0s,2299161j)>>> DateTime.new(1,1,1,10,0,0, ""+00:00"").to_date=> #<Date: 0001-01-01 ((1721424j,0s,0n),+0s,2299161j)>",Ruby Time#to_date() method returns wrong date
rspec and testing enums," I am trying to test that Lead.new(params).active! raises an error. What is the best way to go about this? I know I can set the enum value manually and then test valid? on the object that I instantiate, but I was hoping there was a way to test stale! and converted! which save to the database when called. <code>  class Lead < ActiveRecord::Base enum status: { stale: 0, active: 1, converted: 2 } validate :existing_lead, on: :create private def existing_lead if new_record? && (stale? || converted?) errors.add(:status, ""invalid for new leads"") end endend",How do I test that an enum action method validates the object before creation or saving?
Nested forms fail when using an ActiveResource model," I have problem with creating a form for my ActiveResource models but I can't seem to find a solution. The problem is that the model does not know the fields, and throws an error when I try to create a text field: For this form: This is my from my controller: Thie is my user model: I tried the following, but that does not work well with ActiveResource models, it is somehow not able to store retrieved data anymore. user.firstname is empty, when i remove the line it is not... Then I found the gem Fortify (https://rubygems.org/gems/fortify) but the last update was in 2010 and installing it doesn't work...I hope someone is familiar with this problem and can help me in the right direction. <code>  undefined method `firstname' for #<User:0x00000002946ec8> <%= form_for(@user) do |f| %><div class=""field""> <%= f.label :firstname %><br> <%= f.text_field :firstname %> </div> def new @user = User.newend class User < ActiveResource::Base self.site = ""https://***.com/api/v1.0/""end attr_accessor :firstname, :lastname","Nested forms fail when using an ActiveResource model, Rails 4"
How to get Rails function to return its own name?," I have this very simple controller for managing static pages within my Rails application: How can I get a view template to return its own name, so I can do something like this: Thanks for any help. <code>  class PagesController < ApplicationController def home end def features end def pricing endend # pricing.html.erb<h1><%= my_own_name.capitalize %></h1># --> ""Pricing""",How to get Rails views to return its associated action names?
How to install Ruby 2 on Ubuntu box with Ansible, I want to provision Ubuntu Server machine with latest Ruby and Ruby Gems version using Ansible.How do I do this? <code> ,How to install Ruby 2 and Ruby Gems on Ubuntu box with Ansible
What is the different between rails s and bundle exec rails s?," What is the difference between rails s and bundle exec rails s? People seem to say that bundle exec rails s is better, but why? Meanwhile this post says rails s is better.Which is it? <code> ","What is the difference between ""rails s"" and ""bundle exec rails s""?"
Uninstall specific version of a library using gem," For example I have the following four versions installed: capybara (2.2.1, 2.2.0.rc1, 2.1.0, 1.1.4)Please suggest how to uninstall the capybara version 1.1.4 <code> ",Rails: Uninstall specific version of a library using gem
"Ruby method(*args) syntax gives ""ArgumentError: wrong number of arguments"" for nil value"," All values for b below let me call a method with the *args syntax. With nil, I expected to get nil, not argument error: What is happening here? <code>  def some_method(a) puts aendb = 1some_method(*b) # => 1b = falsesome_method(*b) # => falseb = ""whatever""some_method(*b) # => ""whatever"" b = nilsome_method(*b) # => ArgumentError: wrong number of arguments (0 for 1)",Passing splat on nil as argument
"Ruby strftime(""%Q"") broken"," The strftime docs claim that %Q works: But it returns ""%Q"" for me. I'm using RVM and Ruby 2.1.1.Am I doing something wrong, or is this a Ruby bug? <code>  %Q - Number of milliseconds since 1970-01-01 00:00:00 UTC. 2.1.1 :054 > date = Time.now => 2014-06-10 12:28:57 -07002.1.1 :055 > date.strftime(""%Q"") => ""%Q""","Ruby strftime(""%Q"") broken?"
Does `group_by` preserve the order?," Does Enumerable#group_by preserve the original order within each value? When I get this: is it guaranteed that, for example, the array [1, 3, 5] contains the elements in this order and not, for example [3, 1, 5]?Is there any description regarding this point?I am not mentioning the order between the keys 1 and 0. That is a different issue. <code>  [1, 2, 3, 4, 5].group_by{|i| i % 2}# => {1=>[1, 3, 5], 0=>[2, 4]}",Does Enumerable's group_by preserve the Enumerable's order?
RSpec: uinitialized constant ActiveRecord (NameError)," When I run rspec from the root of my rails project, I get the following error: which is being triggered by the call to require_relative in my spec_helper.rb fileHere is my test: Here is my spec_helper.rb file. FYI when I remove the require_relative statement it no longer knows what SchoolApplication is. Not really sure what is going on here. I have looked at other threads but I am confused about how their solutions/issues coincide with my own (e.g. having another copy of Active_Record in my /lib/ dir???) Thanks!Here is the file that is throwing the error, school_application.rb P.S. don't worry all of the payment credentials are fabricated.  <code>  /Users/ysername/code/fsf/app/models/school_application.rb:3:in `<top (required)>': uninitialized constant ActiveRecord (NameError) require 'spec_helper'describe '#to_xml' do it 'returns the xml-ified version of a payment' do expect(SchoolApplication.to_xml(XXXXXXXXXXXXXXXX,10, 400, ""bob"").to eq(""<txn> <ssl_merchant_id>5</ssl_merchant_id><ssl_user_id>3</ssl_user_id><ssl_test_mode>false</ssl_test_mode><ssl_card_number>2443444433334444</ssl_card_number><ssl_amount>400</ssl_amount><ssl_ssl_cvv2cvc2_indicator>1</ssl_cvv2cvc2_indicator><ssl_first_name>'bob'</ssl_first_name></txn>"")) endend require 'rubygems'ENV[""RAILS_ENV""] ||= 'test'require_relative(""../app/models/school_application"") require 'builder'class SchoolApplication < ActiveRecord::Base def self.to_xml(number,expiration,cvv,amount, name) xml = ::Builder::XmlMarkup.new xml.txn { xml.ssl_merchant_id 5 xml.ssl_user_id 3 xml.ssl_ssl_pin 1434 xml.ssl_test_mode false xml.ssl_card_number number xml.ssl_amount amount xml.ssl_cvv2cvc2_indicator cvv xml.ssl_first_name name } xml endend",RSpec: uninitialized constant ActiveRecord (NameError)
Populating array with random numbers, I am trying to populate an array of four elements with positive integers that are less than 9.Here is my code: I don't understand what I'm missing. <code>  generated_number=Array.new(4)#create empty array of size 4generated_number.each do |random| #for each position in the array create a random number random=rand(10)endputs generated_number,How do I populate an array with random numbers?
guard doesn't run test for changed file," After upgrading to guard 2.6.1 guard stopped executing specs for changed file My bundle is <code>  13:27:09 - INFO - LiveReload is waiting for a browser to connect. 13:27:09 - INFO - Guard::RSpec is running 13:27:09 - INFO - Guard is now watching at '[path to project]'13:27:13 - INFO - Running: spec/models/[some_model]_spec.rb13:27:13 - ERROR - No cmd option specified, unable to run specs! Using guard (2.6.1)Using guard-livereload (2.3.0)Using guard-rails (0.5.3)Using guard-rspec (4.3.1)Using rspec-core (2.14.8)Using rspec-expectations (2.14.5)Using rspec-mocks (2.14.6)Using rspec (2.14.1)Using rspec-rails (2.14.2)Using rails (4.0.4)","Guard::RSpec error: No cmd option specified, unable to run specs"
"What are the purposes of the specifications `files`, `executables`, `test_files`, and `require_paths` in a Ruby gem's .gemspec file?"," I am not clear on what certain specifications in the .gemspec file are doing. Specifically, Can someone explain how these relate to the functionality of a Ruby Gem and why they are necessary? <code>  spec.files = `git ls-files -z`.split(""\x0"")spec.executables = spec.files.grep(%r{^bin/}) { |f| File.basename(f) }spec.test_files = spec.files.grep(%r{^(test|spec|features)/})spec.require_paths = [""lib""]","What are `files`, `executables`, `test_files`, and `require_paths` in gemspec file?"
Error: spawn ENOENT: missing the sass executable [windows], I'm using bash in windows.Getting this error when trying to run a sass compiler command via gulp.I have Ruby & Sass installed.Sass works fine when running it manually. I have included the directory of my ruby bin in the PATH var (system variables within Enviroment variables).Anyone got any ideas? <code>  Error: spawn ENOENT: missing the sass executable. Please install sass and make available on your PATH,Error: spawn ENOENT: missing the sass executable
How to run all unit tests that I have in a folder with a single command?," I have, let's say: How can I run them all together? Should I include them into another test file?I am using test/unit gem. <code>  emp_test.rbsales_emp_test.rbcorporate_emp_test.rbpayroll_emp_test.rb",Ruby: How to run all unit tests that I have in a folder with a single command?
Ruby syntax ? @song ||= ::TwelveDaysSong.new, What is ::? <code>  @song ||= ::TwelveDaysSong.new,What does :: mean in Ruby syntax?
Ruby sort array using custom sorting preferences?," Can someone show me how to sort a nested array based on custom strings? For example, is there a way to sort: by ""Orange"", ""Yellow"", and then ""Blue""? The end result would look like this: It's not sorting by alphabetical order. I'm curious to know if I can define the values to sort by to accomplish the goal above. <code>  [['Red','Blue'],['Green','Orange'],['Purple','Yellow']] [['Green','Orange'],['Purple','Yellow'],['Red','Blue']]",Sort array using custom sorting preferences?
Parse command line key value pairs in a ruby script," I want to call a Ruby script from the command line, and pass in parameters that are key/value pairs.Command line call: my_script.rb: What is the standard Ruby way to do this? In other languages I usually have to use an option parser. In Ruby I saw we have ARGF.read, but that does not seem to work key/value pairs like in this example.OptionParser looks promising, but I can't tell if it actually supports this case. <code>  $ ruby my_script.rb --first_name=donald --last_name=knuth puts args.first_name + args.last_name",Parse command line arguments in a Ruby script
Parse command line arguments in a ruby script," I want to call a Ruby script from the command line, and pass in parameters that are key/value pairs.Command line call: my_script.rb: What is the standard Ruby way to do this? In other languages I usually have to use an option parser. In Ruby I saw we have ARGF.read, but that does not seem to work key/value pairs like in this example.OptionParser looks promising, but I can't tell if it actually supports this case. <code>  $ ruby my_script.rb --first_name=donald --last_name=knuth puts args.first_name + args.last_name",Parse command line arguments in a Ruby script
Truly optional named arguments in Ruby 2.0," Is there a way for an argument to be truly optional so I know if it was set by caller or not?Having an argument use nil as the default does not work because there is no way to know if the caller passed nil or it is the default value for the argument.Before named arguments, in Ruby 1.9, using an options hash: With Ruby 2.0 named arguments: <code>  def foo(options = {}) # bar(options)enddef bar(options = {}) puts options.fetch(:name, unknown) # => 'unknown'end def foo(name: nil) # bar(name: name)enddef bar(name: unknown) # puts name # => nil, since nil is explicitly passed from `foo`end",How to pass optional named arguments in Ruby 2.0
Ruby difference between inline if conditional and block if conditional," Today I come across this weird behaviour of Ruby's inline if and block if What is the difference between inline if conditional and block if conditional? <code>  2.0.0-p247 :001 > inline_if = 'value will not set but no error' if inline_if => nil 2.0.0-p247 :002 > if block_if2.0.0-p247 :003?> block_if = 'forget about setting value, I will raise an error'2.0.0-p247 :004?> endNameError: undefined local variable or method `block_if' for main:Object from (irb):2 from /Users/myuser/.rvm/rubies/ruby-2.0.0-p247/bin/irb:13:in `<main>'",Difference between inline if conditional and block if conditional in Ruby
Active admin with friendly id," I am using friendly_id in my rails 4 application with slug. Now I am using active_admin gem.Problem:When I click on show link from active admin for Group resource, It is throwing the following exception: I guess, I need to override some of the active_admin default functions?  <code>  ActiveRecord::RecordNotFound at /admin/groups/username20-s-group-1",ActiveAdmin with friendly id
what is comma followed by an equal sign means in Ruby?," Just saw something like this in some Ruby code: <code>  def getis;gets.split.map(&:to_i);endk,=getis # What is this line doing?di=Array::new(k){Array::new(k)}",What does a comma followed by an equals sign mean in Ruby?
Creating and Infinite Loop," I'm trying to create an infinite loop, where a block of code will be executed forever.All loop documentation I have found warns against creating an infinite loop, but no examples of a working one.If I have a block of code: How would I go about running this block forever? <code>  { puts ""foo"" puts ""bar"" sleep 300 }",Creating an infinite loop
Creating an Infinite Loop," I'm trying to create an infinite loop, where a block of code will be executed forever.All loop documentation I have found warns against creating an infinite loop, but no examples of a working one.If I have a block of code: How would I go about running this block forever? <code>  { puts ""foo"" puts ""bar"" sleep 300 }",Creating an infinite loop
Is Ruby's $! only visible in rescue block?," Googled around but didn't find a clear answer.Just want to confirm the life-time(?) of $!, does it hold value only inside a rescue block? <code>  begin raise 'foo'rescue puts $!.inspect # => #<RuntimeError: foo>ensure puts $!.inspect # => nilendputs $!.inspect # => nil",Does Ruby's $! hold value only in rescue block?
Not able to use mysql2 gem with Rails 4.1.5," I am trying to use the mysql 2 gem with Rails, so I added gem 'mysql2'. I am not able to install it using bundle install, and it gives me this error. I have no idea how to get it to work, so any help would be appreciated.Here is some info on my computer.ruby -v => ruby 2.2.0p0 (2014-12-25 revision 49005) [x86_64-darwin14]gem 'rails', '4.1.5' (rails -v won't work)bundler -v => Bundler version 1.8.4OS: Mac Yosemite <code>  Gem::Ext::BuildError: ERROR: Failed to build gem native extension. /Users/Ben/.rvm/rubies/ruby-2.2.0/bin/ruby -r ./siteconf20150307-17143-1jx7cob.rb extconf.rb checking for ruby/thread.h... yeschecking for rb_thread_call_without_gvl() in ruby/thread.h... yeschecking for rb_thread_blocking_region()... nochecking for rb_wait_for_single_fd()... yeschecking for rb_hash_dup()... yeschecking for rb_intern3()... yeschecking for mysql_query() in -lmysqlclient... nochecking for main() in -lm... yeschecking for mysql_query() in -lmysqlclient... nochecking for main() in -lz... yeschecking for mysql_query() in -lmysqlclient... nochecking for main() in -lsocket... nochecking for mysql_query() in -lmysqlclient... nochecking for main() in -lnsl... nochecking for mysql_query() in -lmysqlclient... nochecking for main() in -lmygcc... nochecking for mysql_query() in -lmysqlclient... no*** extconf.rb failed ***Could not create Makefile due to some reason, probably lack of necessarylibraries and/or headers. Check the mkmf.log file for more details. You mayneed configuration options.Provided configuration options: --with-opt-dir --with-opt-include --without-opt-include=${opt-dir}/include --with-opt-lib --without-opt-lib=${opt-dir}/lib --with-make-prog --without-make-prog --srcdir=. --curdir --ruby=/Users/Ben/.rvm/rubies/ruby-2.2.0/bin/$(RUBY_BASE_NAME) --with-mysql-dir --without-mysql-dir --with-mysql-include --without-mysql-include=${mysql-dir}/include --with-mysql-lib --without-mysql-lib=${mysql-dir}/lib --with-mysql-config --without-mysql-config --with-mysql-dir --without-mysql-dir --with-mysql-include --without-mysql-include=${mysql-dir}/include --with-mysql-lib --without-mysql-lib=${mysql-dir}/lib --with-mysqlclientlib --without-mysqlclientlib --with-mlib --without-mlib --with-mysqlclientlib --without-mysqlclientlib --with-zlib --without-zlib --with-mysqlclientlib --without-mysqlclientlib --with-socketlib --without-socketlib --with-mysqlclientlib --without-mysqlclientlib --with-nsllib --without-nsllib --with-mysqlclientlib --without-mysqlclientlib --with-mygcclib --without-mygcclib --with-mysqlclientlib --without-mysqlclientlibextconf failed, exit code 1Gem files will remain installed in /Users/Ben/.rvm/gems/ruby-2.2.0/gems/mysql2-0.3.18 for inspection.Results logged to /Users/Ben/.rvm/gems/ruby-2.2.0/extensions/x86_64-darwin-14/2.2.0/mysql2-0.3.18/gem_make.outAn error occurred while installing mysql2 (0.3.18), and Bundler cannot continue.Make sure that `gem install mysql2 -v '0.3.18'` succeeds before bundling.",Not able to use mysql2 gem with Rails 4.1.5 in RubyMine
Rails set up cloned project (bundle problems)," I'm currently working on a project using:rvm 1.26.11ruby 2.2.1p85I tried to run bundle install but keep getting the following error: and, following: When I try running gem install nio4r -v '1.0.0': When I try running bundle update: When I try running bundle update nio4r: I tried that command too, to no result.I also tried changing Ruby version:rvm use 2.2.1 2.2.0 2.0.0 and running the commands above, but it doesn't change anythingEdit:The output from running bundle install log: <code>  Gem::Ext::BuildError: ERROR: Failed to build gem native extension. An error occurred while installing nio4r (1.0.0), and Bundler cannot continue.Make sure that `gem install nio4r -v '1.0.0'` succeeds before bundling. Building native extensions. This could take a while...ERROR: Error installing nio4r:ERROR: Failed to build gem native extension. Please make sure you have the correct access rightsand the repository exists.Retrying git clone 'git@github.com:kshmir/requirejs-rails.git' ....*Git error: command `git clone 'git@github.com:kshmir/requirejs-rails.git'.... has failed Gem::Ext::BuildError: ERROR: Failed to build gem native extension....An error occurred while installing eventmachine (1.0.3), and Bundler cannot continue.Make sure that `gem install eventmachine -v '1.0.3'` succeeds before bundling. Fetching gem metadata from rubygems....... Fetching version metadata from rubygems... Fetching dependency metadata from rubygems.. Using rake 10.2.2 Using i18n0.7.0 Using multi_json 1.11.0 Using activesupport 3.2.17 Using builder 3.0.4 Using activemodel 3.2.17 Using erubis 2.7.0 Using journey 1.0.4 Using rack 1.4.5 Using rack-cache 1.2 Using rack-test 0.6.2 Using hike1.2.3 Using tilt 1.4.1 Using sprockets 2.2.2 Using actionpack 3.2.17 Using mime-types 1.25.1 Using polyglot 0.3.4 Using treetop 1.4.15 Using mail 2.5.4 Using actionmailer 3.2.17 Using arbre 1.0.1 Using sass 3.2.19 Using thor 0.19.1 Using bourbon 3.1.8 Using bcrypt 3.1.7 Using bcrypt-ruby 3.1.5 Using orm_adapter 0.5.0 Using rack-ssl 1.3.4 Using json 1.8.1 Using rdoc 3.12.2 Using railties 3.2.17 Using atomic1.1.15 Using thread_safe 0.2.0 Using warden 1.2.3 Using devise 3.2.3 Using formtastic 2.2.1 Using has_scope 0.6.0.rc Using responders 1.0.0 Using inherited_resources 1.4.1 Using jquery-rails 2.3.0 Using kaminari 0.15.1 Using arel 3.0.3 Using tzinfo 0.3.39 Using activerecord 3.2.17 Using polyamorous 0.5.0 Using meta_search 1.1.3 Using activeresource 3.2.17 Using bundler 1.8.4 Using rails 3.2.17 Using activeadmin 0.6.2 Using rgeo 0.3.20 Using rgeo-activerecord0.5.0 Using activerecord-postgis-adapter 0.6.5 Using addressable 2.3.5 Using airbrake 3.1.16 Using descendants_tracker 0.0.3 Using ice_nine0.11.0 Using axiom-types 0.0.5 Using coderay 1.1.0 Using better_errors 1.1.0 Using debug_inspector 0.0.2 Using binding_of_caller 0.7.2 Using bootstrap-datepicker-rails 1.1.1.8 Using bootstrap-sass 3.1.1.0 Using browser 0.8.0 Using columnize 0.3.6 Using debugger-linecache 1.2.0 Using byebug 2.7.0 Using cancan 1.6.10 Using highline 1.6.21 Using net-ssh 2.8.0 Using net-scp 1.1.2 Using net-sftp 2.1.2 Using net-ssh-gateway 1.2.0 Using capistrano 2.15.5 Using mini_portile 0.5.2 Using nokogiri 1.6.1 Using ffi 1.9.3 Using childprocess 0.5.1 Using rubyzip 1.1.0 Using websocket 1.0.7 Using selenium-webdriver 2.40.0 Using xpath 1.0.0 Using capybara 2.0.2 Using carrierwave 0.10.0 Using carrierwave_backgrounder 0.3.0 Using hitimes 1.2.2 Using timers 4.0.1 Using celluloid 0.16.0Gem::Ext::BuildError: ERROR: Failed to build gem native extension. /home/adrian/.rvm/rubies/ruby-2.2.1/bin/ruby -r ./siteconf20150424-28432-11y95op.rb extconf.rb checking for rb_thread_blocking_region()... no checking for sys/select.h... yes checking for poll.h... yes checking for sys/epoll.h... yes checking for sys/event.h... no checking for port.h... no checking for sys/resource.h... yes creating Makefilemake ""DESTDIR="" cleanmake ""DESTDIR="" compiling selector.c In file included from nio4r.h:10:0, from selector.c:6: /home/adrian/.rvm/rubies/ruby-2.2.1/include/ruby-2.2.0/ruby/backward/rubyio.h:2:2: warning: #warning use ""ruby/io.h"" instead of ""rubyio.h"" [-Wcpp] #warning use ""ruby/io.h"" instead of ""rubyio.h"" ^ In file included from selector.c:7:0: /home/adrian/.rvm/rubies/ruby-2.2.1/include/ruby-2.2.0/ruby/backward/rubysig.h:14:2: warning: #warning rubysig.h is obsolete [-Wcpp] #warning rubysig.h is obsolete ^ selector.c: In function NIO_Selector_allocate: selector.c:94:5: warning: dereferencing type-punned pointer will break strict-aliasing rules [-Wstrict-aliasing] ev_init(&selector->timer, NIO_Selector_timeout_callback); ^ selector.c:94:5: warning: dereferencing type-punned pointer will break strict-aliasing rules [-Wstrict-aliasing] selector.c:94:5: warning: dereferencing type-punned pointer will break strict-aliasing rules [-Wstrict-aliasing] selector.c:99:5: warning: dereferencing type-punned pointer will break strict-aliasing rules [-Wstrict-aliasing] ev_io_init(&selector->wakeup, NIO_Selector_wakeup_callback, selector->wakeup_reader, EV_READ); ^ selector.c:99:5: warning: dereferencing type-punned pointer will break strict-aliasing rules [-Wstrict-aliasing] selector.c:99:5: warning: dereferencing type-punned pointer will break strict-aliasing rules [-Wstrict-aliasing] selector.c: In function NIO_Selector_synchronize: selector.c:159:11: warning: variable current_thread set but not used [-Wunused-but-set-variable] VALUE current_thread, lock_holder, lock; ^ selector.c: In function NIO_Selector_deregister_synchronized: selector.c:241:11: warning: unused variable monitor_args [-Wunused-variable] VALUE monitor_args[3]; ^ selector.c:240:21: warning: unused variable interests [-Wunused-variable] VALUE self, io, interests, selectables, monitor; ^ selector.c: In function NIO_Selector_select: selector.c:268:20: warning: unused variable array [-Wunused-variable] VALUE timeout, array; ^ selector.c: In function NIO_Selector_select_synchronized: selector.c:286:9: warning: unused variable i [-Wunused-variable] int i, ready; ^ selector.c: In function NIO_Selector_run: selector.c:326:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement] ev_tstamp started_at = ev_now(selector->ev_loop); ^ selector.c:341:9: error: TRAP_BEG undeclared (first use in this function) TRAP_BEG; ^ selector.c:341:9: note: each undeclared identifier is reported only once for each function it appears in selector.c:343:9: error: TRAP_END undeclared (first use in this function) TRAP_END; ^ selector.c:347:9: warning: dereferencing type-punned pointer will break strict-aliasing rules [-Wstrict-aliasing] ev_timer_init(&selector->timer, NIO_Selector_timeout_callback, BUSYWAIT_INTERVAL, BUSYWAIT_INTERVAL); ^ selector.c:347:9: warning: dereferencing type-punned pointer will break strict-aliasing rules [-Wstrict-aliasing] selector.c:347:9: warning: dereferencing type-punned pointer will break strict-aliasing rules [-Wstrict-aliasing] selector.c:347:9: warning: dereferencing type-punned pointer will break strict-aliasing rules [-Wstrict-aliasing] selector.c: In function NIO_Selector_close: selector.c:391:5: warning: passing argument 2 of NIO_Selector_synchronize from incompatible pointer type [enabled by default] return NIO_Selector_synchronize(self, NIO_Selector_close_synchronized, self); ^ selector.c:157:14: note: expected VALUE (*)(VALUE *) but argument is of type VALUE (*)(VALUE) static VALUE NIO_Selector_synchronize(VALUE self, VALUE (*func)(VALUE *args), VALUE*args) ^ selector.c:391:5: warning: passing argument 3 of NIO_Selector_synchronize makes pointer from integer without a cast [enabled by default] return NIO_Selector_synchronize(self, NIO_Selector_close_synchronized, self); ^ selector.c:157:14: note: expected VALUE * but argument is of type VALUE static VALUE NIO_Selector_synchronize(VALUE self, VALUE (*func)(VALUE *args), VALUE *args) ^ selector.c: In function NIO_Selector_closed: selector.c:407:5: warning: passing argument 2 of NIO_Selector_synchronize from incompatible pointer type [enabled by default] return NIO_Selector_synchronize(self, NIO_Selector_closed_synchronized, self); ^ selector.c:157:14: note: expected VALUE (*)(VALUE *) but argument is of type VALUE (*)(VALUE) static VALUE NIO_Selector_synchronize(VALUE self, VALUE (*func)(VALUE *args), VALUE*args) ^ selector.c:407:5: warning: passing argument 3 of NIO_Selector_synchronize makes pointer from integer without a cast [enabled by default] return NIO_Selector_synchronize(self, NIO_Selector_closed_synchronized, self); ^ selector.c:157:14: note: expected VALUE * but argument is of type VALUE static VALUE NIO_Selector_synchronize(VALUE self, VALUE (*func)(VALUE *args), VALUE *args) ^ selector.c: In function NIO_Selector_wakeup: selector.c:384:10: warning: ignoring return value of write, declared with attribute warn_unused_result [-Wunused-result] write(selector->wakeup_writer, ""\0"", 1); ^ make: *** [selector.o] Error 1make failed, exit code 2Gem files will remain installed in /home/adrian/.rvm/gems/ruby-2.2.1/gems/nio4r-1.0.0 for inspection. Results logged to /home/adrian/.rvm/gems/ruby-2.2.1/extensions/x86_64-linux/2.2.0/nio4r-1.0.0/gem_make.out An error occurred while installing nio4r (1.0.0), and Bundler cannot continue. Make sure that `gem install nio4r -v '1.0.0'` succeeds before bundling.",Bundle install: ERROR: Failed to build gem native extension. nio4r gem
Bundle install: ERROR: Failed to build gem native extension," I'm currently working on a project using:rvm 1.26.11ruby 2.2.1p85I tried to run bundle install but keep getting the following error: and, following: When I try running gem install nio4r -v '1.0.0': When I try running bundle update: When I try running bundle update nio4r: I tried that command too, to no result.I also tried changing Ruby version:rvm use 2.2.1 2.2.0 2.0.0 and running the commands above, but it doesn't change anythingEdit:The output from running bundle install log: <code>  Gem::Ext::BuildError: ERROR: Failed to build gem native extension. An error occurred while installing nio4r (1.0.0), and Bundler cannot continue.Make sure that `gem install nio4r -v '1.0.0'` succeeds before bundling. Building native extensions. This could take a while...ERROR: Error installing nio4r:ERROR: Failed to build gem native extension. Please make sure you have the correct access rightsand the repository exists.Retrying git clone 'git@github.com:kshmir/requirejs-rails.git' ....*Git error: command `git clone 'git@github.com:kshmir/requirejs-rails.git'.... has failed Gem::Ext::BuildError: ERROR: Failed to build gem native extension....An error occurred while installing eventmachine (1.0.3), and Bundler cannot continue.Make sure that `gem install eventmachine -v '1.0.3'` succeeds before bundling. Fetching gem metadata from rubygems....... Fetching version metadata from rubygems... Fetching dependency metadata from rubygems.. Using rake 10.2.2 Using i18n0.7.0 Using multi_json 1.11.0 Using activesupport 3.2.17 Using builder 3.0.4 Using activemodel 3.2.17 Using erubis 2.7.0 Using journey 1.0.4 Using rack 1.4.5 Using rack-cache 1.2 Using rack-test 0.6.2 Using hike1.2.3 Using tilt 1.4.1 Using sprockets 2.2.2 Using actionpack 3.2.17 Using mime-types 1.25.1 Using polyglot 0.3.4 Using treetop 1.4.15 Using mail 2.5.4 Using actionmailer 3.2.17 Using arbre 1.0.1 Using sass 3.2.19 Using thor 0.19.1 Using bourbon 3.1.8 Using bcrypt 3.1.7 Using bcrypt-ruby 3.1.5 Using orm_adapter 0.5.0 Using rack-ssl 1.3.4 Using json 1.8.1 Using rdoc 3.12.2 Using railties 3.2.17 Using atomic1.1.15 Using thread_safe 0.2.0 Using warden 1.2.3 Using devise 3.2.3 Using formtastic 2.2.1 Using has_scope 0.6.0.rc Using responders 1.0.0 Using inherited_resources 1.4.1 Using jquery-rails 2.3.0 Using kaminari 0.15.1 Using arel 3.0.3 Using tzinfo 0.3.39 Using activerecord 3.2.17 Using polyamorous 0.5.0 Using meta_search 1.1.3 Using activeresource 3.2.17 Using bundler 1.8.4 Using rails 3.2.17 Using activeadmin 0.6.2 Using rgeo 0.3.20 Using rgeo-activerecord0.5.0 Using activerecord-postgis-adapter 0.6.5 Using addressable 2.3.5 Using airbrake 3.1.16 Using descendants_tracker 0.0.3 Using ice_nine0.11.0 Using axiom-types 0.0.5 Using coderay 1.1.0 Using better_errors 1.1.0 Using debug_inspector 0.0.2 Using binding_of_caller 0.7.2 Using bootstrap-datepicker-rails 1.1.1.8 Using bootstrap-sass 3.1.1.0 Using browser 0.8.0 Using columnize 0.3.6 Using debugger-linecache 1.2.0 Using byebug 2.7.0 Using cancan 1.6.10 Using highline 1.6.21 Using net-ssh 2.8.0 Using net-scp 1.1.2 Using net-sftp 2.1.2 Using net-ssh-gateway 1.2.0 Using capistrano 2.15.5 Using mini_portile 0.5.2 Using nokogiri 1.6.1 Using ffi 1.9.3 Using childprocess 0.5.1 Using rubyzip 1.1.0 Using websocket 1.0.7 Using selenium-webdriver 2.40.0 Using xpath 1.0.0 Using capybara 2.0.2 Using carrierwave 0.10.0 Using carrierwave_backgrounder 0.3.0 Using hitimes 1.2.2 Using timers 4.0.1 Using celluloid 0.16.0Gem::Ext::BuildError: ERROR: Failed to build gem native extension. /home/adrian/.rvm/rubies/ruby-2.2.1/bin/ruby -r ./siteconf20150424-28432-11y95op.rb extconf.rb checking for rb_thread_blocking_region()... no checking for sys/select.h... yes checking for poll.h... yes checking for sys/epoll.h... yes checking for sys/event.h... no checking for port.h... no checking for sys/resource.h... yes creating Makefilemake ""DESTDIR="" cleanmake ""DESTDIR="" compiling selector.c In file included from nio4r.h:10:0, from selector.c:6: /home/adrian/.rvm/rubies/ruby-2.2.1/include/ruby-2.2.0/ruby/backward/rubyio.h:2:2: warning: #warning use ""ruby/io.h"" instead of ""rubyio.h"" [-Wcpp] #warning use ""ruby/io.h"" instead of ""rubyio.h"" ^ In file included from selector.c:7:0: /home/adrian/.rvm/rubies/ruby-2.2.1/include/ruby-2.2.0/ruby/backward/rubysig.h:14:2: warning: #warning rubysig.h is obsolete [-Wcpp] #warning rubysig.h is obsolete ^ selector.c: In function NIO_Selector_allocate: selector.c:94:5: warning: dereferencing type-punned pointer will break strict-aliasing rules [-Wstrict-aliasing] ev_init(&selector->timer, NIO_Selector_timeout_callback); ^ selector.c:94:5: warning: dereferencing type-punned pointer will break strict-aliasing rules [-Wstrict-aliasing] selector.c:94:5: warning: dereferencing type-punned pointer will break strict-aliasing rules [-Wstrict-aliasing] selector.c:99:5: warning: dereferencing type-punned pointer will break strict-aliasing rules [-Wstrict-aliasing] ev_io_init(&selector->wakeup, NIO_Selector_wakeup_callback, selector->wakeup_reader, EV_READ); ^ selector.c:99:5: warning: dereferencing type-punned pointer will break strict-aliasing rules [-Wstrict-aliasing] selector.c:99:5: warning: dereferencing type-punned pointer will break strict-aliasing rules [-Wstrict-aliasing] selector.c: In function NIO_Selector_synchronize: selector.c:159:11: warning: variable current_thread set but not used [-Wunused-but-set-variable] VALUE current_thread, lock_holder, lock; ^ selector.c: In function NIO_Selector_deregister_synchronized: selector.c:241:11: warning: unused variable monitor_args [-Wunused-variable] VALUE monitor_args[3]; ^ selector.c:240:21: warning: unused variable interests [-Wunused-variable] VALUE self, io, interests, selectables, monitor; ^ selector.c: In function NIO_Selector_select: selector.c:268:20: warning: unused variable array [-Wunused-variable] VALUE timeout, array; ^ selector.c: In function NIO_Selector_select_synchronized: selector.c:286:9: warning: unused variable i [-Wunused-variable] int i, ready; ^ selector.c: In function NIO_Selector_run: selector.c:326:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement] ev_tstamp started_at = ev_now(selector->ev_loop); ^ selector.c:341:9: error: TRAP_BEG undeclared (first use in this function) TRAP_BEG; ^ selector.c:341:9: note: each undeclared identifier is reported only once for each function it appears in selector.c:343:9: error: TRAP_END undeclared (first use in this function) TRAP_END; ^ selector.c:347:9: warning: dereferencing type-punned pointer will break strict-aliasing rules [-Wstrict-aliasing] ev_timer_init(&selector->timer, NIO_Selector_timeout_callback, BUSYWAIT_INTERVAL, BUSYWAIT_INTERVAL); ^ selector.c:347:9: warning: dereferencing type-punned pointer will break strict-aliasing rules [-Wstrict-aliasing] selector.c:347:9: warning: dereferencing type-punned pointer will break strict-aliasing rules [-Wstrict-aliasing] selector.c:347:9: warning: dereferencing type-punned pointer will break strict-aliasing rules [-Wstrict-aliasing] selector.c: In function NIO_Selector_close: selector.c:391:5: warning: passing argument 2 of NIO_Selector_synchronize from incompatible pointer type [enabled by default] return NIO_Selector_synchronize(self, NIO_Selector_close_synchronized, self); ^ selector.c:157:14: note: expected VALUE (*)(VALUE *) but argument is of type VALUE (*)(VALUE) static VALUE NIO_Selector_synchronize(VALUE self, VALUE (*func)(VALUE *args), VALUE*args) ^ selector.c:391:5: warning: passing argument 3 of NIO_Selector_synchronize makes pointer from integer without a cast [enabled by default] return NIO_Selector_synchronize(self, NIO_Selector_close_synchronized, self); ^ selector.c:157:14: note: expected VALUE * but argument is of type VALUE static VALUE NIO_Selector_synchronize(VALUE self, VALUE (*func)(VALUE *args), VALUE *args) ^ selector.c: In function NIO_Selector_closed: selector.c:407:5: warning: passing argument 2 of NIO_Selector_synchronize from incompatible pointer type [enabled by default] return NIO_Selector_synchronize(self, NIO_Selector_closed_synchronized, self); ^ selector.c:157:14: note: expected VALUE (*)(VALUE *) but argument is of type VALUE (*)(VALUE) static VALUE NIO_Selector_synchronize(VALUE self, VALUE (*func)(VALUE *args), VALUE*args) ^ selector.c:407:5: warning: passing argument 3 of NIO_Selector_synchronize makes pointer from integer without a cast [enabled by default] return NIO_Selector_synchronize(self, NIO_Selector_closed_synchronized, self); ^ selector.c:157:14: note: expected VALUE * but argument is of type VALUE static VALUE NIO_Selector_synchronize(VALUE self, VALUE (*func)(VALUE *args), VALUE *args) ^ selector.c: In function NIO_Selector_wakeup: selector.c:384:10: warning: ignoring return value of write, declared with attribute warn_unused_result [-Wunused-result] write(selector->wakeup_writer, ""\0"", 1); ^ make: *** [selector.o] Error 1make failed, exit code 2Gem files will remain installed in /home/adrian/.rvm/gems/ruby-2.2.1/gems/nio4r-1.0.0 for inspection. Results logged to /home/adrian/.rvm/gems/ruby-2.2.1/extensions/x86_64-linux/2.2.0/nio4r-1.0.0/gem_make.out An error occurred while installing nio4r (1.0.0), and Bundler cannot continue. Make sure that `gem install nio4r -v '1.0.0'` succeeds before bundling.",Bundle install: ERROR: Failed to build gem native extension. nio4r gem
Equivelant of array join() for Set in Ruby?, Is there an equivalent of array join() for the Set class in Ruby? or best to just monkey patch my own on the Set class?http://ruby-doc.org/stdlib-2.2.2/libdoc/set/rdoc/Set.html <code> ,Equivalent of array join() for Set in Ruby?
Rails Sass: variables arenot passed with @import," I have a rails project which uses twitter bootstrap and sass. The scss files are structured into folders so I havea better overview. Now I want to define a file for global variables which contains my colors etc. and pass those values down to other files so I have less redundant code. While all code is properly imported and applied,variables don't work.Here is the current setup:stylesheets/application.css.scss I'm not using the =require method as it does not allow the use of variables and mixins (which I'd like to use).I also use a main.scss which contains all the imports. stylesheets/main.scss The helpers/globals.scss contains the color definitions: stylesheets/helpers/globals.scss The file component/tables.scss is supposed to use that variable. According to most information on the web and the official SASS-guide this should work as I declared the variable and import the according file before the file that uses it. Certainly, the variable is not found:Undefined variable: ""$background-light"".The whole procedure seems rather simple but I'm running out of ideas. Do I need to set something in my environment files or do I need to change my application.css.scss? Or might bootstrap interfere here?Thanks in advance for your help.  <code>  /* *= require_self *= require_tree *//*stylesheets/|| base/| | _reset.scss # Reset/normalize| | _typography.scss # Typography rules|| components/| | _buttons.scss # Buttons| | _messages.scss # Nachrichten| | _dropdown.scss # Dropdown|| helpers/| | _globals.scss # Sass Variables| | _functions.scss # Sass Functions| | _mixins.scss # Sass Mixins| | _helpers.scss # Class & placeholders helpers//more files omitted|| vendors/| | _bootstrap_and_overrides.css # Bootstrap| | _scaffolds.scss # Bootstrap||` main.scss # primary Sass file*/ @import ""bootstrap-sprockets"";@import ""bootstrap"";@import ""helpers/globals"";@import ""base/normalize"";@import ""base/grid"";@import ""base/typography"";@import ""components/buttons"";@import ""components/tables"";//other files omitted $background-light : #4e4d4a; .table-striped > tbody > tr:nth-child(2n+1) > { tr, td, th { background-color: $background-light; }}",Rails Sass: variables are not passed with @import
Trying to set up Amazon's S3 bucket," I'm following Hartl's railstutorial.org and have arrived at 11.4.4: Image upload in production. What I've done:Signed up for Amazon Web ServicesIn Amazon Identity and Access Management I created a user. The user was created succesfully.In Amazon S3 I created a new bucket. Set permissions on the new bucket:Permissions:The tutorial instructs to ""grant read and write permission to the user created in the previous step"". However, under 'Permissons' for the bucket the new user's name is not mentioned. I could only choose between Everyone, Authenticated users, Log delivery, Me, and a username Amazon seems to have created itself from my name + a number. I have tried it by selecting Authenticated users and checked the boxes for Upload/Delete and View permissions (and not selecting List and Edit permissions). I also tried it by selecting Everyone and checked all the four boxes. The results were the same.I implemented in my Rails application following the instructions of the tutorial (I don't belief anything wen't wrong there, so I haven't included those steps here to not make it too long).The initializer carrier_wave.rb is set to the code below. I've added region: 'eu-west-1' to the initializer (an idea I got from here) to get rid of the message connecting to the matching region will be more performant. It worked in development and I pushed to Heroku.Error:When using the uploader in production to upload an image, I get the error We're sorry, but something went wrong. The Heroku server log says: What have I done wrong? I seems to have something to do with the permissions?Update:The cause turned out to be the policies granted to the user. If I grant the user standard AmazonS3FullAccess then it works. It doesn't work with just AmazonS3ReadOnlyAccess, since then the user can't save a new image. In my application the user basically only needs 2 rights: upload its own avatar image and read the avatar image. Would it be safe to use AmazonS3FullAccess or should I write my own custom policy?I tried the custom policy below, which should give the application read and write rights (adopted from here) but that still generated the 403 Forbidden error. <code>  if Rails.env.production? CarrierWave.configure do |config| config.fog_credentials = { # Configuration for Amazon S3 :provider => 'AWS', :aws_access_key_id => ENV['S3_ACCESS_KEY'], # Set these key's using heroku config:set S3_ACCESS_KEY=<access key> :aws_secret_access_key => ENV['S3_SECRET_KEY'], :region => 'eu-west-1' } config.fog_directory = ENV['S3_BUCKET'] endend app[web.1]: SQL (1.7ms) UPDATE ""users"" SET ""avatar"" = $1, ""updated_at"" = $2 WHERE ""users"".""id"" = $3 [[""avatar"", ""animaatjes.png.gif""], [""updated_at"", ""2015-05-20 12:37:56.683858""], [""id"", 18]]heroku[router]: at=info method=POST path=""/users/18"" host=xxx.herokuapp.com request_id=xxx-7f9f-4580-89ba-xxx fwd=""xx.xxx.xx.xxx"" dyno=web.1 connect=0ms service=3461ms status=500 bytes=1714app[web.1]: Completed 500 Internal Server Error in 3317ms (ActiveRecord: 13.0ms)app[web.1]: (1.4ms) ROLLBACKapp[web.1]: Excon::Errors::Forbidden (Expected(200) <=> Actual(403 Forbidden)app[web.1]: excon.error.responseapp[web.1]: :body => ""<?xml version=\""1.0\"" encoding=\""UTF-8\""?>\n<Error><Code>AccessDenied</Code><Message>Access Denied</Message><RequestId>F8xxxD89</RequestId><HostId>MdB5iSMgxxx1vqE+Q=</HostId></Error>""app[web.1]: :headers => {app[web.1]: ""Connection"" => ""close""app[web.1]: ""Content-Type"" => ""application/xml""app[web.1]: ""Date"" => ""Wed, 20 May 2015 12:37:57 GMT""app[web.1]: ""Server"" => ""AmazonS3""app[web.1]: ""x-amz-id-2"" => ""MdB5iSMg***K1vqdP+E+Q=""app[web.1]: ""x-amz-request-id"" => ""F80A**C58""app[web.1]: }app[web.1]: :local_address => ""***.**.**.**""app[web.1]: :local_port => *****app[web.1]: :reason_phrase => ""Forbidden""app[web.1]: :remote_ip => ""**.***.***.***""app[web.1]: :status => 403app[web.1]: :status_line => ""HTTP/1.1 403 Forbidden\r\n""app[web.1]: app/controllers/users_controller.rb:46:in 'update'app[web.1]: Completed 500 Internal Server Error in 6151ms (ActiveRecord: 60.7ms) { ""Version"": ""2012-10-17"", ""Statement"": [ { ""Effect"": ""Allow"", ""Action"": [""s3:ListBucket""], ""Resource"": [""arn:aws:s3:::mybucket""] }, { ""Effect"": ""Allow"", ""Action"": [ ""s3:PutObject"", ""s3:GetObject"", ""s3:DeleteObject"" ], ""Resource"": [""arn:aws:s3:::mybucket/*""] } ]}",Trying to set up Amazon's S3 bucket: 403 Forbidden error & setting permissions
Trying to set up Amazon's S3 bucket: Excon::Errors::SocketError (getaddrinfo)," I'm following Hartl's railstutorial.org and have arrived at 11.4.4: Image upload in production. What I've done:Signed up for Amazon Web ServicesIn Amazon Identity and Access Management I created a user. The user was created succesfully.In Amazon S3 I created a new bucket. Set permissions on the new bucket:Permissions:The tutorial instructs to ""grant read and write permission to the user created in the previous step"". However, under 'Permissons' for the bucket the new user's name is not mentioned. I could only choose between Everyone, Authenticated users, Log delivery, Me, and a username Amazon seems to have created itself from my name + a number. I have tried it by selecting Authenticated users and checked the boxes for Upload/Delete and View permissions (and not selecting List and Edit permissions). I also tried it by selecting Everyone and checked all the four boxes. The results were the same.I implemented in my Rails application following the instructions of the tutorial (I don't belief anything wen't wrong there, so I haven't included those steps here to not make it too long).The initializer carrier_wave.rb is set to the code below. I've added region: 'eu-west-1' to the initializer (an idea I got from here) to get rid of the message connecting to the matching region will be more performant. It worked in development and I pushed to Heroku.Error:When using the uploader in production to upload an image, I get the error We're sorry, but something went wrong. The Heroku server log says: What have I done wrong? I seems to have something to do with the permissions?Update:The cause turned out to be the policies granted to the user. If I grant the user standard AmazonS3FullAccess then it works. It doesn't work with just AmazonS3ReadOnlyAccess, since then the user can't save a new image. In my application the user basically only needs 2 rights: upload its own avatar image and read the avatar image. Would it be safe to use AmazonS3FullAccess or should I write my own custom policy?I tried the custom policy below, which should give the application read and write rights (adopted from here) but that still generated the 403 Forbidden error. <code>  if Rails.env.production? CarrierWave.configure do |config| config.fog_credentials = { # Configuration for Amazon S3 :provider => 'AWS', :aws_access_key_id => ENV['S3_ACCESS_KEY'], # Set these key's using heroku config:set S3_ACCESS_KEY=<access key> :aws_secret_access_key => ENV['S3_SECRET_KEY'], :region => 'eu-west-1' } config.fog_directory = ENV['S3_BUCKET'] endend app[web.1]: SQL (1.7ms) UPDATE ""users"" SET ""avatar"" = $1, ""updated_at"" = $2 WHERE ""users"".""id"" = $3 [[""avatar"", ""animaatjes.png.gif""], [""updated_at"", ""2015-05-20 12:37:56.683858""], [""id"", 18]]heroku[router]: at=info method=POST path=""/users/18"" host=xxx.herokuapp.com request_id=xxx-7f9f-4580-89ba-xxx fwd=""xx.xxx.xx.xxx"" dyno=web.1 connect=0ms service=3461ms status=500 bytes=1714app[web.1]: Completed 500 Internal Server Error in 3317ms (ActiveRecord: 13.0ms)app[web.1]: (1.4ms) ROLLBACKapp[web.1]: Excon::Errors::Forbidden (Expected(200) <=> Actual(403 Forbidden)app[web.1]: excon.error.responseapp[web.1]: :body => ""<?xml version=\""1.0\"" encoding=\""UTF-8\""?>\n<Error><Code>AccessDenied</Code><Message>Access Denied</Message><RequestId>F8xxxD89</RequestId><HostId>MdB5iSMgxxx1vqE+Q=</HostId></Error>""app[web.1]: :headers => {app[web.1]: ""Connection"" => ""close""app[web.1]: ""Content-Type"" => ""application/xml""app[web.1]: ""Date"" => ""Wed, 20 May 2015 12:37:57 GMT""app[web.1]: ""Server"" => ""AmazonS3""app[web.1]: ""x-amz-id-2"" => ""MdB5iSMg***K1vqdP+E+Q=""app[web.1]: ""x-amz-request-id"" => ""F80A**C58""app[web.1]: }app[web.1]: :local_address => ""***.**.**.**""app[web.1]: :local_port => *****app[web.1]: :reason_phrase => ""Forbidden""app[web.1]: :remote_ip => ""**.***.***.***""app[web.1]: :status => 403app[web.1]: :status_line => ""HTTP/1.1 403 Forbidden\r\n""app[web.1]: app/controllers/users_controller.rb:46:in 'update'app[web.1]: Completed 500 Internal Server Error in 6151ms (ActiveRecord: 60.7ms) { ""Version"": ""2012-10-17"", ""Statement"": [ { ""Effect"": ""Allow"", ""Action"": [""s3:ListBucket""], ""Resource"": [""arn:aws:s3:::mybucket""] }, { ""Effect"": ""Allow"", ""Action"": [ ""s3:PutObject"", ""s3:GetObject"", ""s3:DeleteObject"" ], ""Resource"": [""arn:aws:s3:::mybucket/*""] } ]}",Trying to set up Amazon's S3 bucket: 403 Forbidden error & setting permissions
Trying to set up Amazon's S3 bucket: 403 Forbidden error," I'm following Hartl's railstutorial.org and have arrived at 11.4.4: Image upload in production. What I've done:Signed up for Amazon Web ServicesIn Amazon Identity and Access Management I created a user. The user was created succesfully.In Amazon S3 I created a new bucket. Set permissions on the new bucket:Permissions:The tutorial instructs to ""grant read and write permission to the user created in the previous step"". However, under 'Permissons' for the bucket the new user's name is not mentioned. I could only choose between Everyone, Authenticated users, Log delivery, Me, and a username Amazon seems to have created itself from my name + a number. I have tried it by selecting Authenticated users and checked the boxes for Upload/Delete and View permissions (and not selecting List and Edit permissions). I also tried it by selecting Everyone and checked all the four boxes. The results were the same.I implemented in my Rails application following the instructions of the tutorial (I don't belief anything wen't wrong there, so I haven't included those steps here to not make it too long).The initializer carrier_wave.rb is set to the code below. I've added region: 'eu-west-1' to the initializer (an idea I got from here) to get rid of the message connecting to the matching region will be more performant. It worked in development and I pushed to Heroku.Error:When using the uploader in production to upload an image, I get the error We're sorry, but something went wrong. The Heroku server log says: What have I done wrong? I seems to have something to do with the permissions?Update:The cause turned out to be the policies granted to the user. If I grant the user standard AmazonS3FullAccess then it works. It doesn't work with just AmazonS3ReadOnlyAccess, since then the user can't save a new image. In my application the user basically only needs 2 rights: upload its own avatar image and read the avatar image. Would it be safe to use AmazonS3FullAccess or should I write my own custom policy?I tried the custom policy below, which should give the application read and write rights (adopted from here) but that still generated the 403 Forbidden error. <code>  if Rails.env.production? CarrierWave.configure do |config| config.fog_credentials = { # Configuration for Amazon S3 :provider => 'AWS', :aws_access_key_id => ENV['S3_ACCESS_KEY'], # Set these key's using heroku config:set S3_ACCESS_KEY=<access key> :aws_secret_access_key => ENV['S3_SECRET_KEY'], :region => 'eu-west-1' } config.fog_directory = ENV['S3_BUCKET'] endend app[web.1]: SQL (1.7ms) UPDATE ""users"" SET ""avatar"" = $1, ""updated_at"" = $2 WHERE ""users"".""id"" = $3 [[""avatar"", ""animaatjes.png.gif""], [""updated_at"", ""2015-05-20 12:37:56.683858""], [""id"", 18]]heroku[router]: at=info method=POST path=""/users/18"" host=xxx.herokuapp.com request_id=xxx-7f9f-4580-89ba-xxx fwd=""xx.xxx.xx.xxx"" dyno=web.1 connect=0ms service=3461ms status=500 bytes=1714app[web.1]: Completed 500 Internal Server Error in 3317ms (ActiveRecord: 13.0ms)app[web.1]: (1.4ms) ROLLBACKapp[web.1]: Excon::Errors::Forbidden (Expected(200) <=> Actual(403 Forbidden)app[web.1]: excon.error.responseapp[web.1]: :body => ""<?xml version=\""1.0\"" encoding=\""UTF-8\""?>\n<Error><Code>AccessDenied</Code><Message>Access Denied</Message><RequestId>F8xxxD89</RequestId><HostId>MdB5iSMgxxx1vqE+Q=</HostId></Error>""app[web.1]: :headers => {app[web.1]: ""Connection"" => ""close""app[web.1]: ""Content-Type"" => ""application/xml""app[web.1]: ""Date"" => ""Wed, 20 May 2015 12:37:57 GMT""app[web.1]: ""Server"" => ""AmazonS3""app[web.1]: ""x-amz-id-2"" => ""MdB5iSMg***K1vqdP+E+Q=""app[web.1]: ""x-amz-request-id"" => ""F80A**C58""app[web.1]: }app[web.1]: :local_address => ""***.**.**.**""app[web.1]: :local_port => *****app[web.1]: :reason_phrase => ""Forbidden""app[web.1]: :remote_ip => ""**.***.***.***""app[web.1]: :status => 403app[web.1]: :status_line => ""HTTP/1.1 403 Forbidden\r\n""app[web.1]: app/controllers/users_controller.rb:46:in 'update'app[web.1]: Completed 500 Internal Server Error in 6151ms (ActiveRecord: 60.7ms) { ""Version"": ""2012-10-17"", ""Statement"": [ { ""Effect"": ""Allow"", ""Action"": [""s3:ListBucket""], ""Resource"": [""arn:aws:s3:::mybucket""] }, { ""Effect"": ""Allow"", ""Action"": [ ""s3:PutObject"", ""s3:GetObject"", ""s3:DeleteObject"" ], ""Resource"": [""arn:aws:s3:::mybucket/*""] } ]}",Trying to set up Amazon's S3 bucket: 403 Forbidden error & setting permissions
Creating a Hashmap with values as arrays and default value as empty array," I want to create a Hash in Ruby with default values as an empty arraySo, I coded However, when I try to push a value into it All the keys get 99 pushed into that array. How do I resolve this? <code>  x = Hash.new([]) x[0].push(99)",Creating a Hash with values as arrays and default value as empty array
Convert a hex string to a hex int in ruby," I have to convert a hexadecimal string to a hexadecimal integer, like this: I can have RGB format too.I'm obliged to do this because this function goes after : I saw here that hexadecimal integers exist. Can someone help me with this problem? <code>  color = ""0xFF00FF"" #can be any color else, defined by functionscolorto = 0xFF00FF #copy of color, but from string to integer without changes def i2s int, len i = 1 out = """".force_encoding('binary') max = 127**(len-1) while i <= len num = int/max int -= num*max out << (num + 1) max /= 127 i += 1 end outend",Convert a hex string to a hex int
Ruby parallel assignment with parantheses and splat operator," I got this: I want to know why z has the value nil. <code>  x,(y,z)=1,*[2,3]x # => 1y # => 2z # => nil",Parallel assignment with parentheses and splat operator
"Can ruby hashes be included in sass and coffeescript, allowing data to be shared?"," I am wondering if a ruby hash can be shared between Sass and CoffeeScript with a minimum of fuss.I've looked around for an answer to this but found nothing conclusive. Sources, such as the documentation for Sass, talk about how to link files of the same type and how to manipulate data structures within the language, but don't touch on whether data can be imported from elsewhere, or whether ruby code can be interpreted in someway - the only similar thing I can think of is compass using a .rb file for it's config.My instinct suggests this is (or should) be possible, both languages are Ruby-like and capable of interpreting hashes.As this is a practical problem I've faced several times (DRYing up pre-processed front end code, but also providing the same values for back-end processing, such as generating an SVG in an HTML template) but never solved in a really clean way I would accept a solution that involved using Rails.Please note, I am quite specific about this relating to the pre-compilation stage of front end asset production, namely Sass and CoffeeScript. Answers which involve CSS, JavaScript or require a browser are not what I'm looking for.Extra bitsI've decided to add an example, here are three definitions of the same data as key value pairs:Ruby Sass Map CoffeeScript Coffeescript and Ruby hash definitions are identical, Sass is very close ... if this can work then colours (or any other variable) could be defined in one place then used throughout the front and back end by any code. <code>  colours = { brandBackground: '#f00', brandForeground: '#00f', brandText: '#0f0' }colours[:brandBackground] $colours: ( brandBackground: '#f00', brandForeground: '#00f', brandText: '#0f0' )map-get($colours, brandBackground) colours = { brandBackground: '#f00', brandForeground: '#00f', brandText: '#0f0' }colours.brandBackground","Can Ruby hashes be included in Sass and CoffeeScript, allowing data to be shared?"
How do I render multiple lines of HTML in a helper?," I have a helper that looks like this: I need all the links and their nested <i> tags to be rendered - but for some reason, this version is just rendering the last line.All of that is inside a method called show_vote_buttons(post), that is being called like this in the view: <%= show_vote_buttons(@post) %>What's the best way to tackle this? <code>  if current_user.find_voted_items(vote_scope: :inspired).include?(post) link_to vote_inspired_post_path(post, vote_scope: :inspired), method: :post, data: { confirm: 'Are you sure this post Inspires you?' }, class: ""btn btn-default"" do ""<i class='fa fa-lightbulb-o'></i> <br />Inspired"".html_safe end link_to vote_happy_post_path(post, vote_scope: :happy), method: :post, data: { confirm: 'Are you sure this post makes you happy?' }, class: ""btn btn-success"" do ""<i class='fa fa-smile-o'></i> <br />Happy"".html_safe end link_to vote_disappointed_post_path(post, vote_scope: :disappointed), method: :post, data: { confirm: 'Are you sure this post disappointed you?' }, class: ""btn btn-info"" do ""<i class='fa fa-meh-o'></i> <br />Disappointed"".html_safe end link_to vote_upset_post_path(post, vote_scope: :upset), method: :post, data: { confirm: 'Are you sure this post upsets you?' }, class: ""btn btn-inverse"" do ""<i class='fa fa-frown-o'></i> <br />Upset"".html_safe endend",Render output of multiple expressions in one ERB block
AWS Elastic Beanstalk - Cannot `Clone With Latest Platform` or `eb upgrade` from Ruby 2.1 to Ruby 2.2," AWS Elastic Beanstalk - Cannot Clone With Latest Platform or eb upgrade from Ruby 2.1 to Ruby 2.2I've been smashing my head on this one. Back in May, AWS announced that their Ruby Elastic Environments now offer Ruby-2.2 (e.g. ruby-2.2-(passenger-standalone) or ruby-2.2-(puma)). I can't upgrade my existing ruby-2.1 environments to ruby-2.2. It appears I have to recreate them completely...that seems silly? Anyone else out there experiencing this? Am I just missing something simple?Extra InformationI've been gleefully using ruby-2.1-(passenger-standalone) for several months in my staging and production environments. Now I'd like to upgrade them to the latest ruby-2.2 platform. The AWS documentation says this is pretty trivial, in fact some of their documentation even appear to state that you can use an eb clone <env-name> --update. That flag doesn't exist in the EB CLI 3.4.5 that I'm using :( Additionally, the web console has a Clone with Latest Platform option menu item, yet it is disabled.It appears that all I can do to get to the latest Ruby-2.2 instances is to create a brand new environment from scratch. That's tremendously annoying.So here's what I've tried... Great, confirms I'm using Ruby 2.1. So let's try to upgrade: Okay, that's nice, so what about the platform itself: So now, here's my platform settings: So New environments will take advantage of the Ruby-2.2 editions. That's great, but do I seriously have to retire my already configured Ruby-2.1 editions in lieu of a newly created Ruby-2.1 edition? Come on? <code>  $ eb statusEnvironment details for: staging Application name: xyz Region: us-west-2 Deployed Version: fbe7 Environment ID: someId Platform: 64bit Amazon Linux 2015.03 v1.4.3 running Ruby 2.1 (Passenger Standalone) Tier: WebServer-Standard CNAME: bla.bla.bla.elasticbeanstalk.com Updated: 2015-06-26 22:48:59.689000+00:00 Status: Ready Health: Green $ eb upgradeEnvironment already on most recent platform version. $ eb platform selectIt appears you are using Ruby. Is this correct?(y/n): ySelect a platform version.1) Ruby 2.2 (Puma)2) Ruby 2.2 (Passenger Standalone)3) Ruby 2.1 (Puma)4) Ruby 2.1 (Passenger Standalone)5) Ruby 2.0 (Puma)6) Ruby 2.0 (Passenger Standalone)7) Ruby 1.9.3(default is 1): 2 $ eb platform showCurrent default platform: Ruby 2.2 (Passenger Standalone)New environments will be running: 64bit Amazon Linux 2015.03 v1.4.3 running Ruby 2.2 (Passenger Standalone)Platform info for environment ""staging"":Current: 64bit Amazon Linux 2015.03 v1.4.3 running Ruby 2.1 (Passenger Standalone)Latest: 64bit Amazon Linux 2015.03 v1.4.3 running Ruby 2.1 (Passenger Standalone)",AWS Elastic Beanstalk - How To Upgrade Existing Environment from Ruby 2.1 to Ruby 2.2
Capybara increase page load wait time," I have a page that sometimes loads in over a minute. Assume this is the expected behavior and wont change. In these cases, I get Net::ReadTimeout.Note that this is after navigating to a page by clicking a button on the previous page, not an ajax request. Therefore Capybara.using_wait_time doesn't help.I have tried a number of radical things (some of which I knew wouldn't work) like:Setting page.driver.browser.manage.timeouts's implicit_wait, script_timeout and page_load.Looping through the entire object space and setting all Selenium::WebDriver::Remote::Http::Default's timeout value.Looping through the entire object space and setting allNet::HTTP's read_timeout.page.driver.browser.send(:bridge).http.instance_variable_get(:@http).read_timeout=None seem to work. This should be very trivial, still I couldn't find a way to do it.If you know of a webdriver agnostic solution that would be great. If not - I am using selenium. <code> ",Capybara increase max allowed page load time
Ruby - Rotating letters in a string so that each letter is shifted to another letter by n places," I have been tasked with coming up with a way of encoding a string. Among other things, I need to shift each letter by a given number but the transformed letter must be a letter (circular shift).I have got the following code so far: This works for most lettersMy problem is that if I am trying to shift y by 2 places, I should get a but instead I get the character [Where am I going wrong? <code>  def play_pass(str, n) letters = ('a'..'z').to_a str.chars.map {|x| letters.include?(x.downcase) ? (x.ord + n).chr : x}.joinend",Rotating letters in a string so that each letter is shifted to another letter by n places
difference between Rubys Hash and ActiveSupports HashWithIndifferentAccess, What is the difference between Rubys Hash and ActiveSupports HashWithIndifferentAccess? Which is the best for dynamic hashes? <code> ,Difference between Rubys Hash and ActiveSupports HashWithIndifferentAccess
Can't install gems on osx El Capitan, I am not able to install and run fakes3 gem on El Capitan Beta 5.I tried: Then I tried doing it the cocoapods way. It worked for cocoapods but not for fakes3. <code>  sudo gem install fakes3ERROR: While executing gem ... (Errno::EPERM) Operation not permitted - /usr/bin/fakes3 mkdir -p $HOME/Software/rubyexport GEM_HOME=$HOME/Software/rubygem install cocoapods[...]1 gem installedgem install fakes3ERROR: While executing gem ... (Gem::FilePermissionError) You don't have write permissions for the /Library/Ruby/Gems/2.0.0 directory.,"Can't install gems on OS X ""El Capitan"""
"Can't install gems on MacOS X ""El Capitan""", I am not able to install and run fakes3 gem on El Capitan Beta 5.I tried: Then I tried doing it the cocoapods way. It worked for cocoapods but not for fakes3. <code>  sudo gem install fakes3ERROR: While executing gem ... (Errno::EPERM) Operation not permitted - /usr/bin/fakes3 mkdir -p $HOME/Software/rubyexport GEM_HOME=$HOME/Software/rubygem install cocoapods[...]1 gem installedgem install fakes3ERROR: While executing gem ... (Gem::FilePermissionError) You don't have write permissions for the /Library/Ruby/Gems/2.0.0 directory.,"Can't install gems on OS X ""El Capitan"""
Why does ruby rails need puma or unicorn," In php, you only need apache or nginx. Why does ruby rails also need something like puma or unicorn when nginx is already installed? <code> ",Why does ruby rails need puma or unicorn?
What do I do with these errors?," I am trying to upgrade our app from Rails 3.2.22 to Rails 4.2.4 with Ruby 2.2.3.Here's what I've done so far:Modified Gemfile to specify rails, ""~> 4.2.4""bundlebundle update railsThe full transcript is below.ActiveRecord is not specified in our Gemfile, so I don't understand what has it locked or where to fix it? <code>  Craigs-MacBook-Pro~/Work/mbc(master|) % git checkout -b rails-424Switched to a new branch 'rails-424'Craigs-MacBook-Pro~/Work/mbc(rails-424|) % vim GemfileCraigs-MacBook-Pro~/Work/mbc(rails-424|1) % bundleFetching gem metadata from https://rubygems.org/........Fetching version metadata from https://rubygems.org/...Fetching dependency metadata from https://rubygems.org/..You have requested: rails ~> 4.2.4The bundle currently has rails locked at 3.2.22.Try running `bundle update rails`Craigs-MacBook-Pro~/Work/mbc(rails-424|1) % bundle update railsFetching gem metadata from https://rubygems.org/........Fetching version metadata from https://rubygems.org/...Fetching dependency metadata from https://rubygems.org/..Resolving dependencies............Bundler could not find compatible versions for gem ""activerecord"": In Gemfile: activerecord (< 4.3, >= 3.1) ruby activerecord (< 5.0, >= 3.0) ruby vestal_versions (>= 0) ruby depends on activerecord (~> 3.0) ruby activerecord (> 3.0.0) ruby rails (~> 4.2.4) ruby depends on activerecord (= 4.2.4) rubyCraigs-MacBook-Pro~/Work/mbc(rails-424|1) % ",Error upgrading from Rails 3.2.22 to Rails 4.2.4
ruby and rails Date.today format," In IRB, if I run following commands: I get the following output: But in Rails console, if I run Date.today, I get this: I looked at Rails' Date class but can't find how Rails' Date.today displays the output differently than Ruby's output.Can anybody tell, in Rails how Date.today or Date.tomorrow formats the date to display nicely? <code>  require 'date'Date.today => #<Date: 2015-09-26 ((2457292j,0s,0n),+0s,2299161j)> => Sat, 26 Sep 2015 ","Ruby and Rails ""Date.today"" format"
"Rbenv & bundler: ""bad interpreter: No such file or directory`"""," I messed up my configuration. I am running Ubuntu 14.04 and had some issues when I tried to move from a project to an other. I tried to uninstall and reinstall rbenv and then installed Ruby 2.1.7 following this guide: https://gorails.com/setup/ubuntu/14.04.Now, when I run gem install bundler nothing happens and I can't install any gems. When I type bundler or bundler -v I see this: I spent many hours trying to solve this but I really don't know what to do. <code>  /usr/local/bin/bundler: /usr/bin/ruby1.9.1: bad interpreter: No such file or directory","rbenv and bundler: ""bad interpreter: No such file or directory"""
Apipie Param Invalid value Must be a Float," When I send an object json all fields inside are changed to string, breaking my validation in the controller and i get the following error. My test I try indicate request.headers['Content-Type'] = 'application/json' My factory is My controller validations are I try to change validation :value from Float to :number but the problem continues I am using rails 4.2.3 and rspec 3.3.0  <code>  Api::V1::BillsController POST #create when logged in Failure/Error: post :create, { bill: bill_attributes } Apipie::ParamInvalid: Invalid parameter 'value' value ""41.64794235693306"": Must be Float # ./app/controllers/concerns/exception_aspects.rb:4:in exception_wrapper # ./spec/controllers/api/v1/bills_controller_spec.rb:135:in block (4 levels) in <top (required)> let(:bill_attributes) { FactoryGirl.attributes_for :bill }before(:each) do request.headers['Content-Type'] = 'application/json' post :create, { bill: bill_attributes }endit ""when is valid description"" do expect(json_response[:description]).to eq(bill_attributes[:description])end FactoryGirl.define do factory :bill do description { FFaker::Lorem.phrase } value { (rand() * 100).to_f } endend api :POST, ""/bills"", ""Add a new bill to an event""description ""Add a new bill""param :bill, Hash, :required => true, :action_aware => true do param :description, String, ""Bill description"" param :bill_photo, Hash, :required => false do param :base64image, String, ""Base 64 image file"" end param :value, Float, ""Amount of the bill""end",Rspec format Post parameters to String values
"In ruby, How can I get the count of overlapping ranges in sorted order"," Suppose I have an array of sorted inclusive ranges: I want as output an array of arrays, each of whose first element is a range and second element its overlapping count, like this: For example, the range 1017..1020 is included in two ranges 1016..1020 and 1017..1022, so its count would be two. <code>  a = [1012..1014, 1016..1020, 1017..1022, 1021..1035, 1040..1080] [[1012..1014, 1], [1016..1016, 1], [1017..1020, 2], [1021..1022, 2], [1023..1035, 1], [1040..1080, 1]]",How can I get the count of overlapping ranges in sorted order?
set non-database attribute for rails model without attr_accessor," In PHP, I can set an attribute (that is not a column in database) to a model. E.g.(PHP code), But in rails, when I set any attribute that doesn't exist in database, it will throw an error undefined method flag. There is attr_accessor method, but what will happen if I need about ten temp attributes? <code>  $user = new User;$user->flag = true;",Set non-database attribute for rails model without `attr_accessor`
Set non-database attribute for rails model without attr_accessor," In PHP, I can set an attribute (that is not a column in database) to a model. E.g.(PHP code), But in rails, when I set any attribute that doesn't exist in database, it will throw an error undefined method flag. There is attr_accessor method, but what will happen if I need about ten temp attributes? <code>  $user = new User;$user->flag = true;",Set non-database attribute for rails model without `attr_accessor`
rails 4.2.2. :autosave doesn't seem to working as expected," I made a real basic github project here that demonstrates the issue. Basically, when I create a new comment, it is saved as expected; when I update an existing comment, it isn't saved. However, that isn't what the docs for :autosave => true say ... they say the opposite. Here's the code: Now in the console, I test: Why not? What am I missing?Note if you don't use ""find_or_initialize"", it works as ActiveRecord respects the association cache - otherwise it reloads the comments too often, throwing out the change. ie, this implementation works But of course, I don't want to walk through the collection in memory if I could just do it with the database. Plus, it seems inconsistent that it works with new object but not an existing object. <code>  class Post < ActiveRecord::Base has_many :comments, :autosave => true, :inverse_of => :post, :dependent => :destroy def comment=(val) obj=comments.find_or_initialize_by(:posted_at=>Date.today) obj.text=val endendclass Comment < ActiveRecord::Base belongs_to :post, :inverse_of=>:commentsend p=Post.create(:name=>'How to groom your unicorn')p.comment=""That's cool!""p.save!p.comments # returns value as expected. Now we try the update case ... p.comment=""But how to you polish the rainbow?""p.save!p.comments # oops ... it wasn't updated def comment=(val) obj=comments.detect {|obj| obj.posted_at==Date.today} obj = comments.build(:posted_at=>Date.today) if(obj.nil?) obj.text=valend",rails associations :autosave doesn't seem to working as expected
"Ruby, add class method", Assume I have a class : To add a method to this class I know 2 options:Reopening the class and implement the method : using class_eval to implement method : What is the difference? Which one is better? <code>  class Fooend class Foo def bar endend Foo.class_eval { def bar; end},Ruby add method to a class
Error while installing nokogiri (1.6.7) on El Capitan," One of my developers have updated Nokogiri, and when pulling the updated Gemfile my bundle install fails. As suggested in ""Failing to install Nokogiri gem"" I have unsuccessfully tried to run: As suggested in ""Failing to install Nokogiri gem"" I also tried: and: My OS version is El Capitan 10.11.2, and I have checked that the Xcode licence agreement has been accepted.Any ideas how to get the Nokogiri installation to succeed? <code>  my-project git:(master) bundle installFetching source index from https://rubygems.org/Using rake 10.4.2Using i18n 0.7.0Using json 1.8.3Using minitest 5.8.3Using thread_safe 0.3.5Using tzinfo 1.2.2Using activesupport 4.2.3Using builder 3.2.2Using erubis 2.7.0Using mini_portile2 2.0.0Gem::Ext::BuildError: ERROR: Failed to build gem native extension. /Users/me/.rvm/rubies/ruby-2.1.2/bin/ruby extconf.rb --use-system-librarieschecking if the C compiler accepts ... yeschecking if the C compiler accepts -Wno-error=unused-command-line-argument-hard-error-in-future... noBuilding nokogiri using system libraries.libxml2 version 2.6.21 or later is required!*** extconf.rb failed ***Could not create Makefile due to some reason, probably lack of necessarylibraries and/or headers. Check the mkmf.log file for more details. You mayneed configuration options.Provided configuration options: --with-opt-dir --without-opt-dir --with-opt-include --without-opt-include=${opt-dir}/include --with-opt-lib --without-opt-lib=${opt-dir}/lib --with-make-prog --without-make-prog --srcdir=. --curdir --ruby=/Users/me/.rvm/rubies/ruby-2.1.2/bin/ruby --help --clean --use-system-libraries --with-zlib-dir --without-zlib-dir --with-zlib-include --without-zlib-include=${zlib-dir}/include --with-zlib-lib --without-zlib-lib=${zlib-dir}/lib --with-xml2-dir --without-xml2-dir --with-xml2-include --without-xml2-include=${xml2-dir}/include --with-xml2-lib --without-xml2-lib=${xml2-dir}/lib --with-libxml-2.0-config --without-libxml-2.0-config --with-pkg-config --without-pkg-config --with-xslt-dir --without-xslt-dir --with-xslt-include --without-xslt-include=${xslt-dir}/include --with-xslt-lib --without-xslt-lib=${xslt-dir}/lib --with-libxslt-config --without-libxslt-config --with-exslt-dir --without-exslt-dir --with-exslt-include --without-exslt-include=${exslt-dir}/include --with-exslt-lib --without-exslt-lib=${exslt-dir}/lib --with-libexslt-config --without-libexslt-configextconf failed, exit code 1Gem files will remain installed in /Users/me/.rvm/gems/ruby-2.1.2@my-project/gems/nokogiri-1.6.7 for inspection.Results logged to /Users/me/.rvm/gems/ruby-2.1.2@my-project/extensions/x86_64-darwin-13/2.1.0-static/nokogiri-1.6.7/gem_make.outAn error occurred while installing nokogiri (1.6.7), and Bundler cannot continue.Make sure that `gem install nokogiri -v '1.6.7'` succeeds before bundling. bundle config build.nokogiri --use-system-librariesbundle install gem install nokogiri -- --use-system-libraries gem install nokogiri -v 1.6.5 -- --use-system-libraries",Error while installing Nokogiri (1.6.7) on El Capitan
Auto-Correct Line length in a library," I am working on a huge project and we have decided to make all code conform to 80 characters per line. It is a ruby based project with wrappers for C. For Ruby, I decided to use Rubocop and with the command: I got 1,714 errors, where length of the line was greater than 80 characters. Aside from that, there were many other errors detected by Rubocop which I want to ignore for now.I am looking for the easiest way to auto-correct all the line length violations only, to satisfy the 80 character limit both in C and Ruby. <code>  rubocop --only LineLength",Auto-correct line lengths in a library
how to sort ruby array by associated model count?," This is cafe.rb model and this is postq.rb. post is like replies.I want to create new cafe array and sort it by cafe.posts.count.Finally, I will show top two cafes that have many replies.I've tried some sorting codes like, but it didn't work. The error said that cafe has no association with post.how can I sort ruby array by associated model count?I'm not good at english, I'll appreciate your answers! <code>  class Cafe < ActiveRecord::Base belongs_to :user has_many :posts, dependent: :destroy has_many :tags, dependent: :destroyend class Post < ActiveRecord::Base belongs_to :cafe belongs_to :userend @cafe_by_posts = Cafe.joins(:post).order('posts.size dsc')",How to sort ActiveRecord results by associated model count?
Ruby what are rules for selecting which method to execute out of more with same name?," I extended Kernel by itself, and within the definition of the instance method Kernel#abort, I called the singleton method Kernel.abort: When I call Kernel#abort, it seems that the Kernel.abort call inside the method definition refers to the original Kernel#abort (extended as Kernel.abort).How does Ruby know that when I write Kernel.abort, I mean the original abort method, not the one I just created? How would I recursively call the new abort method I just created? <code>  module Kernel extend self def abort puts ""Press ENTER to exit..."" gets Kernel.abort endendabort",Calling a singleton method within an instance method in a module that extends itself
What are rules for selecting the method to execute out of more with same name?," I extended Kernel by itself, and within the definition of the instance method Kernel#abort, I called the singleton method Kernel.abort: When I call Kernel#abort, it seems that the Kernel.abort call inside the method definition refers to the original Kernel#abort (extended as Kernel.abort).How does Ruby know that when I write Kernel.abort, I mean the original abort method, not the one I just created? How would I recursively call the new abort method I just created? <code>  module Kernel extend self def abort puts ""Press ENTER to exit..."" gets Kernel.abort endendabort",Calling a singleton method within an instance method in a module that extends itself
Selecting a method out of methods with the same name," I extended Kernel by itself, and within the definition of the instance method Kernel#abort, I called the singleton method Kernel.abort: When I call Kernel#abort, it seems that the Kernel.abort call inside the method definition refers to the original Kernel#abort (extended as Kernel.abort).How does Ruby know that when I write Kernel.abort, I mean the original abort method, not the one I just created? How would I recursively call the new abort method I just created? <code>  module Kernel extend self def abort puts ""Press ENTER to exit..."" gets Kernel.abort endendabort",Calling a singleton method within an instance method in a module that extends itself
Calling a singleton method within an instance method in a class that extends itself," I extended Kernel by itself, and within the definition of the instance method Kernel#abort, I called the singleton method Kernel.abort: When I call Kernel#abort, it seems that the Kernel.abort call inside the method definition refers to the original Kernel#abort (extended as Kernel.abort).How does Ruby know that when I write Kernel.abort, I mean the original abort method, not the one I just created? How would I recursively call the new abort method I just created? <code>  module Kernel extend self def abort puts ""Press ENTER to exit..."" gets Kernel.abort endendabort",Calling a singleton method within an instance method in a module that extends itself
Inserting an entry in Ruby hash at after any key," Given a hash: how can I add a new key-value pair after the set_filter entry? The expected output should be something like this: I want to insert a new key-value pair at a certain position in a hash. <code>  {""set_filter""=>[""0""], ""test1""=>[""=test1""], ""test2""=>[""=test2""]} { ""set_filter"" => [""0""], ""test3"" => [""=test3""], ""test1"" => [""=test1""], ""test2"" => [""=test2""]}",Inserting an entry in hash at certain position
Why is Crystal Lang faster than Ruby?," I would very much like to know what exactly makes Crystal faster than Ruby while code is so similar. The short answer could be that it is compiled, and Ruby is interpreted, yet I would like to understand more about the language specifications. <code> ",Why is Crystal faster than Ruby?
&&= meaning in Ruby," What does &&= mean in the following method? <code>  records.each do |record| raise_on_type_mismatch!(record) add_to_target(record) do |rec| result &&= insert_record(rec, true, should_raise) unless owner. new_record? endend","Grammar in Ruby ""&&="""
&&= grammar in Ruby," What does &&= mean in the following method? <code>  records.each do |record| raise_on_type_mismatch!(record) add_to_target(record) do |rec| result &&= insert_record(rec, true, should_raise) unless owner. new_record? endend","Grammar in Ruby ""&&="""
"Grammar in Ruby -- ""&&="""," What does &&= mean in the following method? <code>  records.each do |record| raise_on_type_mismatch!(record) add_to_target(record) do |rec| result &&= insert_record(rec, true, should_raise) unless owner. new_record? endend","Grammar in Ruby ""&&="""
Rubocop: ignore a specific directory or file, My project is extending open-source classes from a third-party gem that we don't want to hold to the same coding standards as our own code. Refactoring the gem code isn't a viable option. We just want Rubocop to ignore the copied code.How can I instruct Rubocop to completely ignore a file or directory? <code> ,How to tell Rubocop to ignore a specific directory or file
How to tell Robocop to ignore a specific directory or file, My project is extending open-source classes from a third-party gem that we don't want to hold to the same coding standards as our own code. Refactoring the gem code isn't a viable option. We just want Rubocop to ignore the copied code.How can I instruct Rubocop to completely ignore a file or directory? <code> ,How to tell Rubocop to ignore a specific directory or file
what does do do in ruby," I've seen a couple of do in Ruby, and I couldn't find a really good explanation of its purpose. For example, a place where I saw a do was in the gemfile: I know what this code does, but I don't know the purpose of do. I have my guesses, but I want them confirmed or denied by someone who knows more than me. <code>  group :development, :test do gem 'rspec-rails' gem 'rspec-its' gem 'simplecov', :require => false gem 'guard-rspec' gem 'spork-rails' gem 'guard-spork' gem 'childprosess' gem 'rails-erd' gem 'pry-rails' gem 'guard-rails' gem 'guard-livereload' gem 'guard-bundler'end","What is the meaning of the keyword ""do"", in ruby?"
Does ruby stop evaluating if sentences when first condition is false?," Does ruby stop evaluating if statements when first condition is false? I constantly get undefined method `ready' for nil:NilClass> if song = nil.  <code>  if !song.nil? && song.ready && !song.has_been_downloaded_by(event.author) song.send_to_user(event.author) nil elsif !song.ready ""The song is not ready yet. Try again once it is."" elsif song.has_been_downloaded_by(event.author) ""Yo, check your private messages, I've already sent you the song."" else 'Song with such index does not exist.' end",Does ruby stop evaluating if statements when first condition is false?
How to convert <img src= > to image_tag in rails app," This is my first post here and it might sound awfully stupid. Im building my first rails app.I have this line in my index.html.erb I want to use image_taginstead of the img srcWhat is the correct way to wrap it around the code?So far I've tried <%= image_tag ( ""/assets/rand_front/<%= @random_image%>"", style='height:50vw;width:100vw;margin-bottom:20px;') %>and <%= image_tag ( ""/assets/rand_front/<%= @random_image%>""), style='height:50vw;width:100vw;margin-bottom:20px;' %>and many other versions, but none seems to work, what am I doing wrong? and how should I write it properly?this <%= @random_image%> bit is taking this variable from the index method in the controller. <code>  <img src=""/assets/rand_front/<%= @random_image%>"", style='height:50vw;width:100vw;margin-bottom:20px;' > def index @products = Product.all.order(created_at: :desc).group_by(&:category_id) @images = [""1.jpg"", ""2.jpg"", ""3.jpg"", ""4.jpg"", ""5.jpg"", ""6.jpg"", ""7.jpg"", ""8.jpg"", ""9.jpg"", ""10.jpg""] @random_no = rand(10) @random_image = @images[@random_no]end",Rails: How to convert <img src= > to image_tag in rails app
Rails Arels: Unsupported argument type: String. Construct an Arel node instead," I'm using Arels for creating query. In this query, I use generate_series function. Here is my code: When I try to test by generate_series.to_sql. I meet exception: Arel::Visitors::UnsupportedVisitError: Unsupported argument type: String. Construct an Arel node instead.I try to shorter my code for testing: The problem is same. Please tell me how can I fix this problem. <code>  def generate_series Arel::Nodes::NamedFunction.new('GENERATE_SERIES', [start_date, end_day, '1 day']) enddef start_date Arel::Nodes::SqlLiteral.new(<<-SQL CASE WHEN DATE_PART('hour', NOW() AT TIME ZONE 'ICT') < #{Time.now - 3days} THEN (CURRENT_DATE - INTERVAL '14 days') ELSE (CURRENT_DATE - INTERVAL '13 days') END SQL ) end def end_date Arel::Nodes::SqlLiteral.new(<<-SQL CASE WHEN DATE_PART('hour', NOW() AT TIME ZONE 'ICT') < #{Time.now} THEN (CURRENT_DATE - INTERVAL '1 day') ELSE CURRENT_DATE END SQL ) end def generate_series Arel::Nodes::NamedFunction.new('GENERATE_SERIES', ['19/11/2012', '20/11/2012', '1 day']) end",Rails ActiveRecord Arels: Unsupported argument type: String. Construct an Arel node instead
Array assign vs. append behavior in class method," The following behavior looks to me like the assign method is processing visited by value, whereas the append method is treating it as a reference: Can someone explain this behavior?This is not a question about whether Ruby supports pass by reference or pass by value, but rather about the example provided below, and why two methods that purportedly do the same thing exhibit different behaviors. <code>  class MyClass def assign(visited) visited += [""A""] end def append(visited) visited << ""A"" endendinstance = MyClass.newvisited = []instance.assign(visited)visited # => []instance.append(visited)visited # => [""A""]",Array assign vs. append behavior
Boolean logic for ENV variables, Since Rails ENV variables should only have string values it could be the problem to decide how to use ENV variable for use cases which need boolean logic. For example since ENV variable have a string value and it would always be truthy it wouldn't be too nice to do something like that: So there are at least 2 ways to accomplish things like above:Initialize variable with particular value and check it Or just initialize variable with any value and check if it was initialized (the code could be exactly as we wanted). The question is what option is more preferred and what pros and cons each of them could have? <code>  if ENV['MY_VARIABLE'] # do somethingelse # do something elseend if ENV['MY_VARIABLE'] == 'some string' # do somethingelsif ENV['MY_VARIABLE'] == 'some other string' # do something elseend if ENV['MY_VARIABLE'] # do somethingelse # do something elseend,Boolean logic with Rails ENV variables
Error when running Rails aplication," I'm new to Ruby on Rails and am learning to use Angular with it, but after I ran ""gem install rack-cors"", when I try to start a Rails application, I keep getting this error: This is the file that's mentioned on the error: How do I solve it? <code>  C:/Ruby23-x64/lib/ruby/gems/2.3.0/gems/actionpack-5.1.1/lib/action_dispatch/middleware/stack.rb:35:in `build': undefined method `new' for ""Rack::Cors"":String (NoMethodError)Did you mean? next from C:/Ruby23-x64/lib/ruby/gems/2.3.0/gems/actionpack-5.1.1/lib/action_dispatch/middleware/stack.rb:99:in `block in build' from C:/Ruby23-x64/lib/ruby/gems/2.3.0/gems/actionpack-5.1.1/lib/action_dispatch/middleware/stack.rb:99:in `each' from C:/Ruby23-x64/lib/ruby/gems/2.3.0/gems/actionpack-5.1.1/lib/action_dispatch/middleware/stack.rb:99:in `inject' from C:/Ruby23-x64/lib/ruby/gems/2.3.0/gems/actionpack-5.1.1/lib/action_dispatch/middleware/stack.rb:99:in `build' from C:/Ruby23-x64/lib/ruby/gems/2.3.0/gems/railties-5.1.1/lib/rails/engine.rb:508:in `block in app' from C:/Ruby23-x64/lib/ruby/gems/2.3.0/gems/railties-5.1.1/lib/rails/engine.rb:504:in `synchronize' from C:/Ruby23-x64/lib/ruby/gems/2.3.0/gems/railties-5.1.1/lib/rails/engine.rb:504:in `app' from C:/Ruby23-x64/lib/ruby/gems/2.3.0/gems/railties-5.1.1/lib/rails/application/finisher.rb:45:in `block in <module:Finisher>' from C:/Ruby23-x64/lib/ruby/gems/2.3.0/gems/railties-5.1.1/lib/rails/initializable.rb:30:in `instance_exec' from C:/Ruby23-x64/lib/ruby/gems/2.3.0/gems/railties-5.1.1/lib/rails/initializable.rb:30:in `run' from C:/Ruby23-x64/lib/ruby/gems/2.3.0/gems/railties-5.1.1/lib/rails/initializable.rb:59:in `block in run_initializers' from C:/Ruby23-x64/lib/ruby/2.3.0/tsort.rb:228:in `block in tsort_each' from C:/Ruby23-x64/lib/ruby/2.3.0/tsort.rb:350:in `block (2 levels) in each_strongly_connected_component' from C:/Ruby23-x64/lib/ruby/2.3.0/tsort.rb:431:in `each_strongly_connected_component_from' from C:/Ruby23-x64/lib/ruby/2.3.0/tsort.rb:349:in `block in each_strongly_connected_component' from C:/Ruby23-x64/lib/ruby/2.3.0/tsort.rb:347:in `each' from C:/Ruby23-x64/lib/ruby/2.3.0/tsort.rb:347:in `call' from C:/Ruby23-x64/lib/ruby/2.3.0/tsort.rb:347:in `each_strongly_connected_component' from C:/Ruby23-x64/lib/ruby/2.3.0/tsort.rb:226:in `tsort_each' from C:/Ruby23-x64/lib/ruby/2.3.0/tsort.rb:205:in `tsort_each' from C:/Ruby23-x64/lib/ruby/gems/2.3.0/gems/railties-5.1.1/lib/rails/initializable.rb:58:in `run_initializers' from C:/Ruby23-x64/lib/ruby/gems/2.3.0/gems/railties-5.1.1/lib/rails/application.rb:353:in `initialize!' from D:/TFE Unipar/Vigia Back-End/config/environment.rb:5:in `<top (required)>' from config.ru:3:in `require_relative' from config.ru:3:in `block in <main>' from C:/Ruby23-x64/lib/ruby/gems/2.3.0/gems/rack-2.0.2/lib/rack/builder.rb:55:in `instance_eval' from C:/Ruby23-x64/lib/ruby/gems/2.3.0/gems/rack-2.0.2/lib/rack/builder.rb:55:in `initialize' from config.ru:in `new' from config.ru:in `<main>' from C:/Ruby23-x64/lib/ruby/gems/2.3.0/gems/rack-2.0.2/lib/rack/builder.rb:49:in `eval' from C:/Ruby23-x64/lib/ruby/gems/2.3.0/gems/rack-2.0.2/lib/rack/builder.rb:49:in `new_from_string' from C:/Ruby23-x64/lib/ruby/gems/2.3.0/gems/rack-2.0.2/lib/rack/builder.rb:40:in `parse_file' from C:/Ruby23-x64/lib/ruby/gems/2.3.0/gems/rack-2.0.2/lib/rack/server.rb:319:in `build_app_and_options_from_config' from C:/Ruby23-x64/lib/ruby/gems/2.3.0/gems/rack-2.0.2/lib/rack/server.rb:219:in `app' from C:/Ruby23-x64/lib/ruby/gems/2.3.0/gems/railties-5.1.1/lib/rails/commands/server/server_command.rb:24:in `app' from C:/Ruby23-x64/lib/ruby/gems/2.3.0/gems/rack-2.0.2/lib/rack/server.rb:354:in `wrapped_app' from C:/Ruby23-x64/lib/ruby/gems/2.3.0/gems/railties-5.1.1/lib/rails/commands/server/server_command.rb:80:in `log_to_stdout' from C:/Ruby23-x64/lib/ruby/gems/2.3.0/gems/railties-5.1.1/lib/rails/commands/server/server_command.rb:42:in `start' from C:/Ruby23-x64/lib/ruby/gems/2.3.0/gems/railties-5.1.1/lib/rails/commands/server/server_command.rb:131:in `block in perform' from C:/Ruby23-x64/lib/ruby/gems/2.3.0/gems/railties-5.1.1/lib/rails/commands/server/server_command.rb:126:in `tap' from C:/Ruby23-x64/lib/ruby/gems/2.3.0/gems/railties-5.1.1/lib/rails/commands/server/server_command.rb:126:in `perform' from C:/Ruby23-x64/lib/ruby/gems/2.3.0/gems/thor-0.19.4/lib/thor/command.rb:27:in `run' from C:/Ruby23-x64/lib/ruby/gems/2.3.0/gems/thor-0.19.4/lib/thor/invocation.rb:126:in `invoke_command' from C:/Ruby23-x64/lib/ruby/gems/2.3.0/gems/thor-0.19.4/lib/thor.rb:369:in `dispatch' from C:/Ruby23-x64/lib/ruby/gems/2.3.0/gems/railties-5.1.1/lib/rails/command/base.rb:63:in `perform' from C:/Ruby23-x64/lib/ruby/gems/2.3.0/gems/railties-5.1.1/lib/rails/command.rb:44:in `invoke' from C:/Ruby23-x64/lib/ruby/gems/2.3.0/gems/railties-5.1.1/lib/rails/commands.rb:16:in `<top (required)>' from bin/rails:4:in `require' from bin/rails:4:in `<main> require ""active_support/inflector/methods""require ""active_support/dependencies""module ActionDispatch class MiddlewareStack class Middleware attr_reader :args, :block, :klass def initialize(klass, args, block) @klass = klass @args = args @block = block end def name; klass.name; end def ==(middleware) case middleware when Middleware klass == middleware.klass when Class klass == middleware end end def inspect if klass.is_a?(Class) klass.to_s else klass.class.to_s end end def build(app) klass.new(app, *args, &block) end end include Enumerable attr_accessor :middlewares def initialize(*args) @middlewares = [] yield(self) if block_given? end def each @middlewares.each { |x| yield x } end def size middlewares.size end def last middlewares.last end def [](i) middlewares[i] end def unshift(klass, *args, &block) middlewares.unshift(build_middleware(klass, args, block)) end def initialize_copy(other) self.middlewares = other.middlewares.dup end def insert(index, klass, *args, &block) index = assert_index(index, :before) middlewares.insert(index, build_middleware(klass, args, block)) end alias_method :insert_before, :insert def insert_after(index, *args, &block) index = assert_index(index, :after) insert(index + 1, *args, &block) end def swap(target, *args, &block) index = assert_index(target, :before) insert(index, *args, &block) middlewares.delete_at(index + 1) end def delete(target) middlewares.delete_if { |m| m.klass == target } end def use(klass, *args, &block) middlewares.push(build_middleware(klass, args, block)) end def build(app = Proc.new) middlewares.freeze.reverse.inject(app) { |a, e| e.build(a) } end private def assert_index(index, where) i = index.is_a?(Integer) ? index : middlewares.index { |m| m.klass == index } raise ""No such middleware to insert #{where}: #{index.inspect}"" unless i i end def build_middleware(klass, args, block) Middleware.new(klass, args, block) end endend","How to fix undefined method `new' for ""Rack::Cors"":String"
Error when running Rails application," I'm new to Ruby on Rails and am learning to use Angular with it, but after I ran ""gem install rack-cors"", when I try to start a Rails application, I keep getting this error: This is the file that's mentioned on the error: How do I solve it? <code>  C:/Ruby23-x64/lib/ruby/gems/2.3.0/gems/actionpack-5.1.1/lib/action_dispatch/middleware/stack.rb:35:in `build': undefined method `new' for ""Rack::Cors"":String (NoMethodError)Did you mean? next from C:/Ruby23-x64/lib/ruby/gems/2.3.0/gems/actionpack-5.1.1/lib/action_dispatch/middleware/stack.rb:99:in `block in build' from C:/Ruby23-x64/lib/ruby/gems/2.3.0/gems/actionpack-5.1.1/lib/action_dispatch/middleware/stack.rb:99:in `each' from C:/Ruby23-x64/lib/ruby/gems/2.3.0/gems/actionpack-5.1.1/lib/action_dispatch/middleware/stack.rb:99:in `inject' from C:/Ruby23-x64/lib/ruby/gems/2.3.0/gems/actionpack-5.1.1/lib/action_dispatch/middleware/stack.rb:99:in `build' from C:/Ruby23-x64/lib/ruby/gems/2.3.0/gems/railties-5.1.1/lib/rails/engine.rb:508:in `block in app' from C:/Ruby23-x64/lib/ruby/gems/2.3.0/gems/railties-5.1.1/lib/rails/engine.rb:504:in `synchronize' from C:/Ruby23-x64/lib/ruby/gems/2.3.0/gems/railties-5.1.1/lib/rails/engine.rb:504:in `app' from C:/Ruby23-x64/lib/ruby/gems/2.3.0/gems/railties-5.1.1/lib/rails/application/finisher.rb:45:in `block in <module:Finisher>' from C:/Ruby23-x64/lib/ruby/gems/2.3.0/gems/railties-5.1.1/lib/rails/initializable.rb:30:in `instance_exec' from C:/Ruby23-x64/lib/ruby/gems/2.3.0/gems/railties-5.1.1/lib/rails/initializable.rb:30:in `run' from C:/Ruby23-x64/lib/ruby/gems/2.3.0/gems/railties-5.1.1/lib/rails/initializable.rb:59:in `block in run_initializers' from C:/Ruby23-x64/lib/ruby/2.3.0/tsort.rb:228:in `block in tsort_each' from C:/Ruby23-x64/lib/ruby/2.3.0/tsort.rb:350:in `block (2 levels) in each_strongly_connected_component' from C:/Ruby23-x64/lib/ruby/2.3.0/tsort.rb:431:in `each_strongly_connected_component_from' from C:/Ruby23-x64/lib/ruby/2.3.0/tsort.rb:349:in `block in each_strongly_connected_component' from C:/Ruby23-x64/lib/ruby/2.3.0/tsort.rb:347:in `each' from C:/Ruby23-x64/lib/ruby/2.3.0/tsort.rb:347:in `call' from C:/Ruby23-x64/lib/ruby/2.3.0/tsort.rb:347:in `each_strongly_connected_component' from C:/Ruby23-x64/lib/ruby/2.3.0/tsort.rb:226:in `tsort_each' from C:/Ruby23-x64/lib/ruby/2.3.0/tsort.rb:205:in `tsort_each' from C:/Ruby23-x64/lib/ruby/gems/2.3.0/gems/railties-5.1.1/lib/rails/initializable.rb:58:in `run_initializers' from C:/Ruby23-x64/lib/ruby/gems/2.3.0/gems/railties-5.1.1/lib/rails/application.rb:353:in `initialize!' from D:/TFE Unipar/Vigia Back-End/config/environment.rb:5:in `<top (required)>' from config.ru:3:in `require_relative' from config.ru:3:in `block in <main>' from C:/Ruby23-x64/lib/ruby/gems/2.3.0/gems/rack-2.0.2/lib/rack/builder.rb:55:in `instance_eval' from C:/Ruby23-x64/lib/ruby/gems/2.3.0/gems/rack-2.0.2/lib/rack/builder.rb:55:in `initialize' from config.ru:in `new' from config.ru:in `<main>' from C:/Ruby23-x64/lib/ruby/gems/2.3.0/gems/rack-2.0.2/lib/rack/builder.rb:49:in `eval' from C:/Ruby23-x64/lib/ruby/gems/2.3.0/gems/rack-2.0.2/lib/rack/builder.rb:49:in `new_from_string' from C:/Ruby23-x64/lib/ruby/gems/2.3.0/gems/rack-2.0.2/lib/rack/builder.rb:40:in `parse_file' from C:/Ruby23-x64/lib/ruby/gems/2.3.0/gems/rack-2.0.2/lib/rack/server.rb:319:in `build_app_and_options_from_config' from C:/Ruby23-x64/lib/ruby/gems/2.3.0/gems/rack-2.0.2/lib/rack/server.rb:219:in `app' from C:/Ruby23-x64/lib/ruby/gems/2.3.0/gems/railties-5.1.1/lib/rails/commands/server/server_command.rb:24:in `app' from C:/Ruby23-x64/lib/ruby/gems/2.3.0/gems/rack-2.0.2/lib/rack/server.rb:354:in `wrapped_app' from C:/Ruby23-x64/lib/ruby/gems/2.3.0/gems/railties-5.1.1/lib/rails/commands/server/server_command.rb:80:in `log_to_stdout' from C:/Ruby23-x64/lib/ruby/gems/2.3.0/gems/railties-5.1.1/lib/rails/commands/server/server_command.rb:42:in `start' from C:/Ruby23-x64/lib/ruby/gems/2.3.0/gems/railties-5.1.1/lib/rails/commands/server/server_command.rb:131:in `block in perform' from C:/Ruby23-x64/lib/ruby/gems/2.3.0/gems/railties-5.1.1/lib/rails/commands/server/server_command.rb:126:in `tap' from C:/Ruby23-x64/lib/ruby/gems/2.3.0/gems/railties-5.1.1/lib/rails/commands/server/server_command.rb:126:in `perform' from C:/Ruby23-x64/lib/ruby/gems/2.3.0/gems/thor-0.19.4/lib/thor/command.rb:27:in `run' from C:/Ruby23-x64/lib/ruby/gems/2.3.0/gems/thor-0.19.4/lib/thor/invocation.rb:126:in `invoke_command' from C:/Ruby23-x64/lib/ruby/gems/2.3.0/gems/thor-0.19.4/lib/thor.rb:369:in `dispatch' from C:/Ruby23-x64/lib/ruby/gems/2.3.0/gems/railties-5.1.1/lib/rails/command/base.rb:63:in `perform' from C:/Ruby23-x64/lib/ruby/gems/2.3.0/gems/railties-5.1.1/lib/rails/command.rb:44:in `invoke' from C:/Ruby23-x64/lib/ruby/gems/2.3.0/gems/railties-5.1.1/lib/rails/commands.rb:16:in `<top (required)>' from bin/rails:4:in `require' from bin/rails:4:in `<main> require ""active_support/inflector/methods""require ""active_support/dependencies""module ActionDispatch class MiddlewareStack class Middleware attr_reader :args, :block, :klass def initialize(klass, args, block) @klass = klass @args = args @block = block end def name; klass.name; end def ==(middleware) case middleware when Middleware klass == middleware.klass when Class klass == middleware end end def inspect if klass.is_a?(Class) klass.to_s else klass.class.to_s end end def build(app) klass.new(app, *args, &block) end end include Enumerable attr_accessor :middlewares def initialize(*args) @middlewares = [] yield(self) if block_given? end def each @middlewares.each { |x| yield x } end def size middlewares.size end def last middlewares.last end def [](i) middlewares[i] end def unshift(klass, *args, &block) middlewares.unshift(build_middleware(klass, args, block)) end def initialize_copy(other) self.middlewares = other.middlewares.dup end def insert(index, klass, *args, &block) index = assert_index(index, :before) middlewares.insert(index, build_middleware(klass, args, block)) end alias_method :insert_before, :insert def insert_after(index, *args, &block) index = assert_index(index, :after) insert(index + 1, *args, &block) end def swap(target, *args, &block) index = assert_index(target, :before) insert(index, *args, &block) middlewares.delete_at(index + 1) end def delete(target) middlewares.delete_if { |m| m.klass == target } end def use(klass, *args, &block) middlewares.push(build_middleware(klass, args, block)) end def build(app = Proc.new) middlewares.freeze.reverse.inject(app) { |a, e| e.build(a) } end private def assert_index(index, where) i = index.is_a?(Integer) ? index : middlewares.index { |m| m.klass == index } raise ""No such middleware to insert #{where}: #{index.inspect}"" unless i i end def build_middleware(klass, args, block) Middleware.new(klass, args, block) end endend","How to fix undefined method `new' for ""Rack::Cors"":String"
Rails 5.1 System tests with RSpec," After watching a RailsConf video on ActionDispatch::systemTestCase, I was excited to incorporate it into my current app. Currently our test suite setup uses the following:rspecfactory_girlcapybara # for feature specsdatabase_cleaner # for feature specs, mostly for testing jsselenium-webdriver # for feature specscapybara-webkit # for feature specsIt was difficult to get the configuration working for our current setup, but we eventually got it working, thanks largely to an article by Avdi Grimm titled: Configuring database_cleaner with Rails, RSpec, Capybara, and Selenium.My hope was to use the built-in system tests of rails released in rails 5.1. Since rails now has system testing built in: all I would need to worry about configuring is the following:rspecfactory_girlAnd that is it because ActionDispatch::systemTestCase takes care of capybara, database_cleaner, and it is already configured for the selenium driver.For example: currently my feature specs are written like so (Capybara within the context of RSpec): So this is what a typical integration/feature/system spec might look like for a test suite configured with rspec, database_cleaner, factory_girl, and capybara. I would like to convert it over to using ActionDispatch::systemTestCase. However: I would like to use ActionDispatch::systemTestCase within the context of RSpec.The RailsConf video above shows how ActionDispatch::systemTestCase works within the context of rails' default test suite layout (ex: minitest with tests located in a test directory), but it did not discuss how to use ActionDispatch::systemTestCase within the context of RSpec. I could not find any resources on making rails' built-in system tests configurable with RSpec, including within the system testing section of the rails guides. Is this possible? <code>  #spec/features/blogs/creating_blogs_spec.rbrequire ""rails_helper""RSpec.feature ""Logged in User can create a blog"" do before do create(:logged_in_user) end scenario ""successfully"", js: true do ... endend ",Rails 5.1 Configuring Built-in System Tests with RSpec
Cann't install Ruby rvm on Ubuntu 16.04 due to gpg bug," I'm trying to install Ruby on Ubuntu 16.04. However when I enter to following command to terminal: I get the following: When I tried any rvm command I got 'command not found'.I tried requesting https://rvm.io/mpapis.asc through the browser. Then running the following: but I got the following: I'm not used to do something that I don't understand, so I stopped their and didn't try sudo.So how can I install Ruby?UpdateI also tried installing gpg2 using: and then I tried and also But still, the same result when I try install rvm with the first command.n.b. I noticed that I have gpg v1.4.20 and gpg2 v2.1.11 <code>  $ \curl -sSL https://get.rvm.io | bash -s stable --ruby Downloading https://github.com/rvm/rvm/archive/1.29.1.tar.gzDownloading https://github.com/rvm/rvm/releases/download/1.29.1/1.29.1.tar.gz.ascgpg: Signature made 19 , 2017 EET 10:02:47 using RSA key ID ********gpg: Can't check signature: No public keyWarning, RVM 1.26.0 introduces signed releases and automated check of signatures when GPG software found. Assuming you trust Michal Papis import the mpapis public key (downloading the signatures).GPG signature verification failed for '/home/tamer/.rvm/archives/rvm-1.29.1.tgz' - 'https://github.com/rvm/rvm/releases/download/1.29.1/1.29.1.tar.gz.asc'! Try to install GPG v2 and then fetch the public key:gpg2 --keyserver hkp://keys.gnupg.net --recv-keys ****************************************or if it fails:command curl -sSL https://rvm.io/mpapis.asc | gpg2 --import -the key can be compared with:https://rvm.io/mpapis.aschttps://keybase.io/mpapisNOTE: GPG version 2.1.17 have a bug which cause failures during fetching keys from remote server. Please downgrade or upgrade to newer version (if available) or use the second method described above. $ gpg --import mpapis.asc gpg: fatal: can't open `/home/tamer/.gnupg/trustdb.gpg': Permission deniedsecmem usage: 1408/1408 bytes in 2/2 blocks of pool 1408/65536 $ sudo apt-get install gnupg2 -y $ gpg2 --keyserver hkp://keys.gnupg.net --recv-keys <key> $ curl -sSL https://rvm.io/mpapis.asc | gpg2 --import -",Can't install Ruby rvm on Ubuntu 16.04 due to gpg bug
Why is in Rails 5.1.1 session store removed, I went to this website to see the differences between Rails 5.0.0 and Rails 5.1.1Why does 5.1.1 not anymore include: config/initializers/session_store.rb?Thanks <code> ,Why is session store initializer removed in Rails 5.1.1
When `try` does work and not `&.`," Here is my code: I thought &. is a shortcut for .try but I guess I was wrong. May someone point me to the right direction regarding what I am missing?I feel like it's not ruby related. Grape maybe? Though I don't get how it could be. <code>  class Order < Grape::Entity expose :id { |order, options| order.id.obfuscate } expose :time_left_to_review do |order, options| byebug order&.time_left_to_review # ERROR end expose :created_at { |order, options| order.last_transition.created_at }end# NoMethodError Exception: undefined method `time_left_to_review' for #<Order:0x007f83b9efc970>",What is the difference between `try` and `&.` (safe navigation operator) in Ruby
What is the difference between `try` and `&.` in Ruby," Here is my code: I thought &. is a shortcut for .try but I guess I was wrong. May someone point me to the right direction regarding what I am missing?I feel like it's not ruby related. Grape maybe? Though I don't get how it could be. <code>  class Order < Grape::Entity expose :id { |order, options| order.id.obfuscate } expose :time_left_to_review do |order, options| byebug order&.time_left_to_review # ERROR end expose :created_at { |order, options| order.last_transition.created_at }end# NoMethodError Exception: undefined method `time_left_to_review' for #<Order:0x007f83b9efc970>",What is the difference between `try` and `&.` (safe navigation operator) in Ruby
"Unexpected behaviour in ruby for ""puts {}.class"""," Why is puts {}.class not showing Hash as output and then nil like the others? <code>  puts {}.class#=> NilClass puts """".classString#=> nil puts [].classArray#=> nil","Unexpected behaviour in Ruby for ""puts {}.class"""
Remove rubcop comments from Yardoc documentation," We are using Yardoc to create the HTML documentation for a number of gems and my company's apps. We are also using Rubocop to for style guide compliance. The issue I am running into is that we have to enable/disable some of the method metrics and those comments (# rubocop:disable Metrics/AbcSize, etc...) showing up in our documentation. Is there a plugin that removes these or some guide I can follow on creating my own? <code> ",Remove rubocop comments from Yardoc documentation
Ransack exact match of array values," I have to perform a search on a database using ransack. A few columns in the database have data stored in serialized arrays. I want to match the exact data stored in the arrays with data sent by user to perform search (users' data are also arrays). For example, in database, one column has data as (c1, c2 are test cases): User searches for data (t1, t2, t3 are test cases): For case c1 with t1, t2, t4, it should return no match found.With t3, it should result with match found.For case c2 with t1, t2, t3, it should return no match found.With t4, it return `match found.I found postgres_ext gem, but I cannot make it work. Can anyone suggest how I can do this or suggest any alternative method for search like this? Any alternative solution is also welcome. <code>  c1.column_data = [1, 2, 3, 4, 5]c2.column_data = [] t1.user_data = [1]t2.user_data = [1, 3]t3.user_data = [1, 2, 3, 4, 5]t4.user_data = []",Ransack exact match with array values
why is my rails server not running? cannot load such file  sqlite3/sqlite3_native (LoadError)," I have looked at several other posts on this and tried the solutions without success. The question is marked as a duplicate of this solution cannot load such file -- sqlite3/sqlite3_native (LoadError) on ruby on railsbut the answer given didn't work for me. I simply got the same errorI have just installed rails so everything is up-to-dateI am using the following: Windows 10, ruby version 2.5.1, rails version 5.2.0have also tried updating SQLite gem with bundle update.here is the error: How can I proceed?EDIT: add Gemfile <code>  C:\proje>rails sTraceback (most recent call last): 43: from bin/rails:4:in `<main>' 42: from C:/Ruby25-x64/lib/ruby/gems/2.5.0/gems/activesupport-5.2.0/lib/active_support/dependencies.rb:283:in `require' 41: from C:/Ruby25-x64/lib/ruby/gems/2.5.0/gems/activesupport-5.2.0/lib/active_support/dependencies.rb:249:in `load_dependency' 40: from C:/Ruby25-x64/lib/ruby/gems/2.5.0/gems/activesupport-5.2.0/lib/active_support/dependencies.rb:283:in `block in require' 39: from C:/Ruby25-x64/lib/ruby/gems/2.5.0/gems/bootsnap-1.3.0/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:29:in `require' 38: from C:/Ruby25-x64/lib/ruby/gems/2.5.0/gems/bootsnap-1.3.0/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:20:in `require_with_bootsnap_lfi' 37: from C:/Ruby25-x64/lib/ruby/gems/2.5.0/gems/bootsnap-1.3.0/lib/bootsnap/load_path_cache/loaded_features_index.rb:65:in `register' 36: from C:/Ruby25-x64/lib/ruby/gems/2.5.0/gems/bootsnap-1.3.0/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:21:in `block in require_with_bootsnap_lfi' 35: from C:/Ruby25-x64/lib/ruby/gems/2.5.0/gems/bootsnap-1.3.0/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:21:in `require' 34: from C:/Ruby25-x64/lib/ruby/gems/2.5.0/gems/railties-5.2.0/lib/rails/commands.rb:18:in `<top (required)>' 33: from C:/Ruby25-x64/lib/ruby/gems/2.5.0/gems/railties-5.2.0/lib/rails/command.rb:46:in `invoke' 32: from C:/Ruby25-x64/lib/ruby/gems/2.5.0/gems/railties-5.2.0/lib/rails/command/base.rb:65:in `perform' 31: from C:/Ruby25-x64/lib/ruby/gems/2.5.0/gems/thor-0.20.0/lib/thor.rb:387:in `dispatch' 30: from C:/Ruby25-x64/lib/ruby/gems/2.5.0/gems/thor-0.20.0/lib/thor/invocation.rb:126:in `invoke_command' 29: from C:/Ruby25-x64/lib/ruby/gems/2.5.0/gems/thor-0.20.0/lib/thor/command.rb:27:in `run' 28: from C:/Ruby25-x64/lib/ruby/gems/2.5.0/gems/railties-5.2.0/lib/rails/commands/server/server_command.rb:142:in `perform' 27: from C:/Ruby25-x64/lib/ruby/gems/2.5.0/gems/railties-5.2.0/lib/rails/commands/server/server_command.rb:142:in `tap' 26: from C:/Ruby25-x64/lib/ruby/gems/2.5.0/gems/railties-5.2.0/lib/rails/commands/server/server_command.rb:145:in `block in perform' 25: from C:/Ruby25-x64/lib/ruby/gems/2.5.0/gems/activesupport-5.2.0/lib/active_support/dependencies.rb:283:in `require' 24: from C:/Ruby25-x64/lib/ruby/gems/2.5.0/gems/activesupport-5.2.0/lib/active_support/dependencies.rb:249:in `load_dependency' 23: from C:/Ruby25-x64/lib/ruby/gems/2.5.0/gems/activesupport-5.2.0/lib/active_support/dependencies.rb:283:in `block in require' 22: from C:/Ruby25-x64/lib/ruby/gems/2.5.0/gems/bootsnap-1.3.0/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:29:in `require' 21: from C:/Ruby25-x64/lib/ruby/gems/2.5.0/gems/bootsnap-1.3.0/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:20:in `require_with_bootsnap_lfi' 20: from C:/Ruby25-x64/lib/ruby/gems/2.5.0/gems/bootsnap-1.3.0/lib/bootsnap/load_path_cache/loaded_features_index.rb:65:in `register' 19: from C:/Ruby25-x64/lib/ruby/gems/2.5.0/gems/bootsnap-1.3.0/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:21:in `block in require_with_bootsnap_lfi' 18: from C:/Ruby25-x64/lib/ruby/gems/2.5.0/gems/bootsnap-1.3.0/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:21:in `require' 17: from C:/proje/config/application.rb:7:in `<top (required)>' 16: from C:/Ruby25-x64/lib/ruby/gems/2.5.0/gems/bundler-1.16.1/lib/bundler.rb:114:in `require' 15: from C:/Ruby25-x64/lib/ruby/gems/2.5.0/gems/bundler-1.16.1/lib/bundler/runtime.rb:65:in `require' 14: from C:/Ruby25-x64/lib/ruby/gems/2.5.0/gems/bundler-1.16.1/lib/bundler/runtime.rb:65:in `each' 13: from C:/Ruby25-x64/lib/ruby/gems/2.5.0/gems/bundler-1.16.1/lib/bundler/runtime.rb:76:in `block in require' 12: from C:/Ruby25-x64/lib/ruby/gems/2.5.0/gems/bundler-1.16.1/lib/bundler/runtime.rb:76:in `each' 11: from C:/Ruby25-x64/lib/ruby/gems/2.5.0/gems/bundler-1.16.1/lib/bundler/runtime.rb:81:in `block (2 levels) in require' 10: from C:/Ruby25-x64/lib/ruby/gems/2.5.0/gems/bootsnap-1.3.0/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:79:in `require' 9: from C:/Ruby25-x64/lib/ruby/gems/2.5.0/gems/bootsnap-1.3.0/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:70:in `require_with_bootsnap_lfi' 8: from C:/Ruby25-x64/lib/ruby/gems/2.5.0/gems/bootsnap-1.3.0/lib/bootsnap/load_path_cache/loaded_features_index.rb:65:in `register' 7: from C:/Ruby25-x64/lib/ruby/gems/2.5.0/gems/bootsnap-1.3.0/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:71:in `block in require_with_bootsnap_lfi' 6: from C:/Ruby25-x64/lib/ruby/gems/2.5.0/gems/bootsnap-1.3.0/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:71:in `require' 5: from C:/Ruby25-x64/lib/ruby/gems/2.5.0/gems/sqlite3-1.3.13-x64-mingw32/lib/sqlite3.rb:2:in `<top (required)>' 4: from C:/Ruby25-x64/lib/ruby/gems/2.5.0/gems/sqlite3-1.3.13-x64-mingw32/lib/sqlite3.rb:6:in `rescue in <top (required)>' 3: from C:/Ruby25-x64/lib/ruby/gems/2.5.0/gems/activesupport-5.2.0/lib/active_support/dependencies.rb:283:in `require' 2: from C:/Ruby25-x64/lib/ruby/gems/2.5.0/gems/activesupport-5.2.0/lib/active_support/dependencies.rb:249:in `load_dependency' 1: from C:/Ruby25-x64/lib/ruby/gems/2.5.0/gems/activesupport-5.2.0/lib/active_support/dependencies.rb:283:in `block in require'C:/Ruby25-x64/lib/ruby/gems/2.5.0/gems/bootsnap-1.3.0/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:32:in `require': cannot load such file -- sqlite3/sqlite3_native (LoadError)C:\proje> source 'https://rubygems.org' git_source(:github) do |repo_name| repo_name = ""#{repo_name}/#{repo_name}"" unless repo_name.include?(""/"") ""https://github.com/#{repo_name}.git"" end # Bundle edge Rails instead: gem 'rails', github: 'rails/rails' gem 'rails', '~> 5.0.7' # Use sqlite3 as the database for Active Record gem 'sqlite3' # Use Puma as the app server gem 'puma', '~> 3.0' # Use SCSS for stylesheets gem 'sass-rails', '~> 5.0' # Use Uglifier as compressor for JavaScript assets gem 'uglifier', '>= 1.3.0' # Use CoffeeScript for .coffee assets and views gem 'coffee-rails', '~> 4.2' # See https://github.com/rails/execjs#readme for more supported runtimes # gem 'therubyracer', platforms: :ruby # Use jquery as the JavaScript library gem 'jquery-rails' # Turbolinks makes navigating your web application faster. Read more: https://github.com/turbolinks/turbolinks gem 'turbolinks', '~> 5' # Build JSON APIs with ease. Read more: https://github.com/rails/jbuilder gem 'jbuilder', '~> 2.5' # Use Redis adapter to run Action Cable in production # gem 'redis', '~> 3.0' # Use ActiveModel has_secure_password # gem 'bcrypt', '~> 3.1.7' # Use Capistrano for deployment # gem 'capistrano-rails', group: :development group :development, :test do # Call 'byebug' anywhere in the code to stop execution and get a debugger console gem 'byebug', platform: :mri end group :development do # Access an IRB console on exception pages or by using <%= console %> anywhere in the code. gem 'web-console', '>= 3.3.0' end # Windows does not include zoneinfo files, so bundle the tzinfo-data gem gem 'tzinfo-data', platforms: [:mingw, :mswin, :x64_mingw, :jruby]",cannot load such file  sqlite3/sqlite3_native (LoadError) Ruby on Rails
cannot load such file  sqlite3/sqlite3_native (LoadError)," I have looked at several other posts on this and tried the solutions without success. The question is marked as a duplicate of this solution cannot load such file -- sqlite3/sqlite3_native (LoadError) on ruby on railsbut the answer given didn't work for me. I simply got the same errorI have just installed rails so everything is up-to-dateI am using the following: Windows 10, ruby version 2.5.1, rails version 5.2.0have also tried updating SQLite gem with bundle update.here is the error: How can I proceed?EDIT: add Gemfile <code>  C:\proje>rails sTraceback (most recent call last): 43: from bin/rails:4:in `<main>' 42: from C:/Ruby25-x64/lib/ruby/gems/2.5.0/gems/activesupport-5.2.0/lib/active_support/dependencies.rb:283:in `require' 41: from C:/Ruby25-x64/lib/ruby/gems/2.5.0/gems/activesupport-5.2.0/lib/active_support/dependencies.rb:249:in `load_dependency' 40: from C:/Ruby25-x64/lib/ruby/gems/2.5.0/gems/activesupport-5.2.0/lib/active_support/dependencies.rb:283:in `block in require' 39: from C:/Ruby25-x64/lib/ruby/gems/2.5.0/gems/bootsnap-1.3.0/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:29:in `require' 38: from C:/Ruby25-x64/lib/ruby/gems/2.5.0/gems/bootsnap-1.3.0/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:20:in `require_with_bootsnap_lfi' 37: from C:/Ruby25-x64/lib/ruby/gems/2.5.0/gems/bootsnap-1.3.0/lib/bootsnap/load_path_cache/loaded_features_index.rb:65:in `register' 36: from C:/Ruby25-x64/lib/ruby/gems/2.5.0/gems/bootsnap-1.3.0/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:21:in `block in require_with_bootsnap_lfi' 35: from C:/Ruby25-x64/lib/ruby/gems/2.5.0/gems/bootsnap-1.3.0/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:21:in `require' 34: from C:/Ruby25-x64/lib/ruby/gems/2.5.0/gems/railties-5.2.0/lib/rails/commands.rb:18:in `<top (required)>' 33: from C:/Ruby25-x64/lib/ruby/gems/2.5.0/gems/railties-5.2.0/lib/rails/command.rb:46:in `invoke' 32: from C:/Ruby25-x64/lib/ruby/gems/2.5.0/gems/railties-5.2.0/lib/rails/command/base.rb:65:in `perform' 31: from C:/Ruby25-x64/lib/ruby/gems/2.5.0/gems/thor-0.20.0/lib/thor.rb:387:in `dispatch' 30: from C:/Ruby25-x64/lib/ruby/gems/2.5.0/gems/thor-0.20.0/lib/thor/invocation.rb:126:in `invoke_command' 29: from C:/Ruby25-x64/lib/ruby/gems/2.5.0/gems/thor-0.20.0/lib/thor/command.rb:27:in `run' 28: from C:/Ruby25-x64/lib/ruby/gems/2.5.0/gems/railties-5.2.0/lib/rails/commands/server/server_command.rb:142:in `perform' 27: from C:/Ruby25-x64/lib/ruby/gems/2.5.0/gems/railties-5.2.0/lib/rails/commands/server/server_command.rb:142:in `tap' 26: from C:/Ruby25-x64/lib/ruby/gems/2.5.0/gems/railties-5.2.0/lib/rails/commands/server/server_command.rb:145:in `block in perform' 25: from C:/Ruby25-x64/lib/ruby/gems/2.5.0/gems/activesupport-5.2.0/lib/active_support/dependencies.rb:283:in `require' 24: from C:/Ruby25-x64/lib/ruby/gems/2.5.0/gems/activesupport-5.2.0/lib/active_support/dependencies.rb:249:in `load_dependency' 23: from C:/Ruby25-x64/lib/ruby/gems/2.5.0/gems/activesupport-5.2.0/lib/active_support/dependencies.rb:283:in `block in require' 22: from C:/Ruby25-x64/lib/ruby/gems/2.5.0/gems/bootsnap-1.3.0/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:29:in `require' 21: from C:/Ruby25-x64/lib/ruby/gems/2.5.0/gems/bootsnap-1.3.0/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:20:in `require_with_bootsnap_lfi' 20: from C:/Ruby25-x64/lib/ruby/gems/2.5.0/gems/bootsnap-1.3.0/lib/bootsnap/load_path_cache/loaded_features_index.rb:65:in `register' 19: from C:/Ruby25-x64/lib/ruby/gems/2.5.0/gems/bootsnap-1.3.0/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:21:in `block in require_with_bootsnap_lfi' 18: from C:/Ruby25-x64/lib/ruby/gems/2.5.0/gems/bootsnap-1.3.0/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:21:in `require' 17: from C:/proje/config/application.rb:7:in `<top (required)>' 16: from C:/Ruby25-x64/lib/ruby/gems/2.5.0/gems/bundler-1.16.1/lib/bundler.rb:114:in `require' 15: from C:/Ruby25-x64/lib/ruby/gems/2.5.0/gems/bundler-1.16.1/lib/bundler/runtime.rb:65:in `require' 14: from C:/Ruby25-x64/lib/ruby/gems/2.5.0/gems/bundler-1.16.1/lib/bundler/runtime.rb:65:in `each' 13: from C:/Ruby25-x64/lib/ruby/gems/2.5.0/gems/bundler-1.16.1/lib/bundler/runtime.rb:76:in `block in require' 12: from C:/Ruby25-x64/lib/ruby/gems/2.5.0/gems/bundler-1.16.1/lib/bundler/runtime.rb:76:in `each' 11: from C:/Ruby25-x64/lib/ruby/gems/2.5.0/gems/bundler-1.16.1/lib/bundler/runtime.rb:81:in `block (2 levels) in require' 10: from C:/Ruby25-x64/lib/ruby/gems/2.5.0/gems/bootsnap-1.3.0/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:79:in `require' 9: from C:/Ruby25-x64/lib/ruby/gems/2.5.0/gems/bootsnap-1.3.0/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:70:in `require_with_bootsnap_lfi' 8: from C:/Ruby25-x64/lib/ruby/gems/2.5.0/gems/bootsnap-1.3.0/lib/bootsnap/load_path_cache/loaded_features_index.rb:65:in `register' 7: from C:/Ruby25-x64/lib/ruby/gems/2.5.0/gems/bootsnap-1.3.0/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:71:in `block in require_with_bootsnap_lfi' 6: from C:/Ruby25-x64/lib/ruby/gems/2.5.0/gems/bootsnap-1.3.0/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:71:in `require' 5: from C:/Ruby25-x64/lib/ruby/gems/2.5.0/gems/sqlite3-1.3.13-x64-mingw32/lib/sqlite3.rb:2:in `<top (required)>' 4: from C:/Ruby25-x64/lib/ruby/gems/2.5.0/gems/sqlite3-1.3.13-x64-mingw32/lib/sqlite3.rb:6:in `rescue in <top (required)>' 3: from C:/Ruby25-x64/lib/ruby/gems/2.5.0/gems/activesupport-5.2.0/lib/active_support/dependencies.rb:283:in `require' 2: from C:/Ruby25-x64/lib/ruby/gems/2.5.0/gems/activesupport-5.2.0/lib/active_support/dependencies.rb:249:in `load_dependency' 1: from C:/Ruby25-x64/lib/ruby/gems/2.5.0/gems/activesupport-5.2.0/lib/active_support/dependencies.rb:283:in `block in require'C:/Ruby25-x64/lib/ruby/gems/2.5.0/gems/bootsnap-1.3.0/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:32:in `require': cannot load such file -- sqlite3/sqlite3_native (LoadError)C:\proje> source 'https://rubygems.org' git_source(:github) do |repo_name| repo_name = ""#{repo_name}/#{repo_name}"" unless repo_name.include?(""/"") ""https://github.com/#{repo_name}.git"" end # Bundle edge Rails instead: gem 'rails', github: 'rails/rails' gem 'rails', '~> 5.0.7' # Use sqlite3 as the database for Active Record gem 'sqlite3' # Use Puma as the app server gem 'puma', '~> 3.0' # Use SCSS for stylesheets gem 'sass-rails', '~> 5.0' # Use Uglifier as compressor for JavaScript assets gem 'uglifier', '>= 1.3.0' # Use CoffeeScript for .coffee assets and views gem 'coffee-rails', '~> 4.2' # See https://github.com/rails/execjs#readme for more supported runtimes # gem 'therubyracer', platforms: :ruby # Use jquery as the JavaScript library gem 'jquery-rails' # Turbolinks makes navigating your web application faster. Read more: https://github.com/turbolinks/turbolinks gem 'turbolinks', '~> 5' # Build JSON APIs with ease. Read more: https://github.com/rails/jbuilder gem 'jbuilder', '~> 2.5' # Use Redis adapter to run Action Cable in production # gem 'redis', '~> 3.0' # Use ActiveModel has_secure_password # gem 'bcrypt', '~> 3.1.7' # Use Capistrano for deployment # gem 'capistrano-rails', group: :development group :development, :test do # Call 'byebug' anywhere in the code to stop execution and get a debugger console gem 'byebug', platform: :mri end group :development do # Access an IRB console on exception pages or by using <%= console %> anywhere in the code. gem 'web-console', '>= 3.3.0' end # Windows does not include zoneinfo files, so bundle the tzinfo-data gem gem 'tzinfo-data', platforms: [:mingw, :mswin, :x64_mingw, :jruby]",cannot load such file  sqlite3/sqlite3_native (LoadError) Ruby on Rails
Rspec - ArgumentError: SMTP To address may not be blank: []," At a bit of a confused here, I am running rspec test on my rails app and have a model spec: which is 1 of3 tests for the email object and it keeps failing with the following error: I cant understand why testing that email address in a model would require any SMTP TO address.Not sure what to look at any help would be great as its my only failing test :(Only other stuff I would think might help is I running:ruby v2.5.0p0rails v5.1.6RSpec 3.7rspec-core 3.7.1rspec-expectations 3.7.0rspec-mocks 3.7.0rspec-rails 3.7.2rspec-support 3.7.1 <code>  it { should validate_uniqueness_of(:email).case_insensitive } 1) User should validate that :email is case-insensitively unique Failure/Error: it { should validate_uniqueness_of(:email).case_insensitive } ArgumentError: SMTP To address may not be blank: [] # ./spec/models/user_spec.rb:43:in `block (2 levels) in <top (required)>'",ArgumentError: SMTP To address may not be blank: []
Regex - Usernames that cannot start or end with characters," I'm trying to achieve these rules with a regex:Can contain lowercase and uppercase letters and numbersCan contain underscores and periodsCannot contain 2 underscores in a rowCannot contain 2 periods in a rowCannot begin or end with an underscore or periodCannot contain letters with accentsMust be between 3 and 28 letters in lengthValid: Invalid: Here's my current regex: All rules seem to be working other than the exception for starting and ending with underscores or periods. <code>  Spicy_Pizza97IndigosInfinity.Beyond _yahoopowerup.un__realno..way ^(?:[a-zA-Z0-9]|([._])(?!\1)){3,28}$",Usernames that cannot start or end with characters
Argument Error Nil location provided. Can't build URI for an image_tag using carrier wave Ruby on Rails," I'm getting an argument error for Nil location provided when using the image_tag. How do I make the image_tag optional where it only displays if there is a corresponding image? This is with Ruby on Rails 5.This is my current show page view: <code>  <p id=""notice""><%= notice %></p><%= image_tag @restaurant.image_url %><p> <strong>Name:</strong> <%= @restaurant.name %></p><p> <strong>Address:</strong> <%= @restaurant.address %></p><p> <strong>Phone:</strong> <%= @restaurant.phone %></p><p> <strong>Website:</strong> <%= @restaurant.website %></p><%= link_to 'Edit', edit_restaurant_path(@restaurant), class: 'btn btn-link' %> |<%= link_to 'Back', restaurants_path, class: 'btn btn-link' %>",Carrierwave: Argument Error Nil location provided. Can't build URI for an image_tag using carrier wave Ruby on Rails
How can I reset anything related to Ruby to factory settings Mac OS High Sierra?," After a number of misadventures involving RVM, Ruby and Rails on my new laptop have left me completely bewildered. I uninstalled RVM but all the paths, versions and permissions are all messed up.I searched and couldn't find the right fixes. It feels like each solution makes the problem get worse.I want to start fresh without having to reset my computer to factory settings. How can I reset just the Ruby-related things like Ruby, Rails, etc., without erasing my computer? <code> ",How to reset anything related to Ruby to factory settings on Mac OS High Sierra
How can I reset anything related to Ruby to factory settings on Mac OS High Sierra?," After a number of misadventures involving RVM, Ruby and Rails on my new laptop have left me completely bewildered. I uninstalled RVM but all the paths, versions and permissions are all messed up.I searched and couldn't find the right fixes. It feels like each solution makes the problem get worse.I want to start fresh without having to reset my computer to factory settings. How can I reset just the Ruby-related things like Ruby, Rails, etc., without erasing my computer? <code> ",How to reset anything related to Ruby to factory settings on Mac OS High Sierra
How to pass argument to a square method?," How can I pass an argument to the definition of a singleton method of [] on A, in other words A['some_argument']? <code>  class A def self.[] # some_argument endend",How to pass argument to the method definition of `[]`?
Error installing ruby version 2.1.2 using rvm," Getting few errors while installing ruby-2.1.2 using rvm. I am new to ruby and hence need assistance. Please let me know Installation log and other relevant information here: logFrom the log provided in problem description, I have ruby 2.1.2 installed in the system. However, getting error when tried listing gems with gem list due to installation errors.After changing to 2.1.2 i.e., rvm use 2.1.2 and executing ruby -r openssl -e 'puts OpensSSL::OPENSSL_VERSION' gives this error: /Users/praveenk.k/.rvm/rubies/ruby-2.1.2/lib/ruby/site_ruby/2.1.0/rubygems/core_ext/kernel_require.rb:54:in require': cannot load such file -- openssl (LoadError) from /Users/praveenk.k/.rvm/rubies/ruby-2.1.2/lib/ruby/site_ruby/2.1.0/rubygems/core_ext/kernel_require.rb:54:in require' <code> ",Installing ruby-2.1.2: Cannot load such file -- openssl (LoadError)
Proper way to Display Ruby number," I have this spec that checks for the expected number: I get an error that says: As you can see, the number I got is the same as the one I expected so I'm confused why this is failing. How can I set the spec?animal_cost.class is a BigDecimal. <code>  expect(animal_cost).to eq(0.7771118644067795e5) expected: 77711.18644067795 got: 0.7771118644067795e5",Proper way to compare decimal values in RSpec?
Proper way to compare decimal values in RSpec," I have this spec that checks for the expected number: I get an error that says: As you can see, the number I got is the same as the one I expected so I'm confused why this is failing. How can I set the spec?animal_cost.class is a BigDecimal. <code>  expect(animal_cost).to eq(0.7771118644067795e5) expected: 77711.18644067795 got: 0.7771118644067795e5",Proper way to compare decimal values in RSpec?
